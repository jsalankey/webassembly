(function(){var g,ba="function"==typeof Object.defineProperties?Object.defineProperty:function(a,b,c){a!=Array.prototype&&a!=Object.prototype&&(a[b]=c.value)},da="undefined"!=typeof window&&window===this?this:"undefined"!=typeof global&&null!=global?global:this;function fa(){fa=function(){};da.Symbol||(da.Symbol=aaa)}var aaa=function(){var a=0;return function(b){return"jscomp_symbol_"+(b||"")+a++}}();
function ha(){fa();var a=da.Symbol.iterator;a||(a=da.Symbol.iterator=da.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&ba(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return ia(this)}});ha=function(){}}function ia(a){var b=0;return baa(function(){return b<a.length?{done:!1,value:a[b++]}:{done:!0}})}function baa(a){ha();a={next:a};a[da.Symbol.iterator]=function(){return this};return a}function ma(a){ha();var b=a[Symbol.iterator];return b?b.call(a):ia(a)}
function na(a){if(!(a instanceof Array)){a=ma(a);for(var b,c=[];!(b=a.next()).done;)c.push(b.value);a=c}return a}function oa(a,b,c){a instanceof String&&(a=String(a));for(var d=a.length,e=0;e<d;e++){var f=a[e];if(b.call(c,f,e,a))return{i:e,AB:f}}return{i:-1,AB:void 0}}function pa(a,b){if(b){var c=da;a=a.split(".");for(var d=0;d<a.length-1;d++){var e=a[d];e in c||(c[e]={});c=c[e]}a=a[a.length-1];d=c[a];b=b(d);b!=d&&null!=b&&ba(c,a,{configurable:!0,writable:!0,value:b})}}
pa("Array.prototype.findIndex",function(a){return a?a:function(a,c){return oa(this,a,c).i}});pa("Array.prototype.find",function(a){return a?a:function(a,c){return oa(this,a,c).AB}});pa("Math.cosh",function(a){if(a)return a;var b=Math.exp;return function(a){a=Number(a);return(b(a)+b(-a))/2}});
pa("String.prototype.startsWith",function(a){return a?a:function(a,c){if(null==this)throw new TypeError("The 'this' value for String.prototype.startsWith must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype.startsWith must not be a regular expression");var b=this+"";a+="";var e=b.length,f=a.length;c=Math.max(0,Math.min(c|0,b.length));for(var h=0;h<f&&c<e;)if(b[c++]!=a[h++])return!1;return h>=f}});
pa("Math.sign",function(a){return a?a:function(a){a=Number(a);return 0===a||isNaN(a)?a:0<a?1:-1}});pa("Number.EPSILON",function(){return Math.pow(2,-52)});pa("Object.is",function(a){return a?a:function(a,c){return a===c?0!==a||1/a===1/c:a!==a&&c!==c}});pa("Number.isFinite",function(a){return a?a:function(a){return"number"!==typeof a?!1:!isNaN(a)&&Infinity!==a&&-Infinity!==a}});pa("Number.isInteger",function(a){return a?a:function(a){return Number.isFinite(a)?a===Math.floor(a):!1}});
pa("Object.assign",function(a){return a?a:function(a,c){for(var b=1;b<arguments.length;b++){var e=arguments[b];if(e)for(var f in e)Object.prototype.hasOwnProperty.call(e,f)&&(a[f]=e[f])}return a}});var qa=qa||{},ra=this;function sa(a){return void 0!==a}function ta(a){return"string"==typeof a}function ua(a){return"number"==typeof a}function va(a){a=a.split(".");for(var b=ra,c=0;c<a.length;c++)if(b=b[a[c]],null==b)return null;return b}function wa(){}
function xa(a){a.oq=void 0;a.s=function(){return a.oq?a.oq:a.oq=new a}}
function ya(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var c=Object.prototype.toString.call(a);if("[object Window]"==c)return"object";if("[object Array]"==c||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==c||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b}function q(a){return"array"==ya(a)}function za(a){var b=ya(a);return"array"==b||"object"==b&&"number"==typeof a.length}function Aa(a){return Ba(a)&&"function"==typeof a.getFullYear}function Ca(a){return"function"==ya(a)}function Ba(a){var b=typeof a;return"object"==b&&null!=a||"function"==b}function Da(a){return a[Ea]||(a[Ea]=++caa)}
function Fa(a){null!==a&&"removeAttribute"in a&&a.removeAttribute(Ea);try{delete a[Ea]}catch(b){}}var Ea="closure_uid_"+(1E9*Math.random()>>>0),caa=0;function daa(a,b,c){return a.call.apply(a.bind,arguments)}function eaa(a,b,c){if(!a)throw Error();if(2<arguments.length){var d=Array.prototype.slice.call(arguments,2);return function(){var c=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(c,d);return a.apply(b,c)}}return function(){return a.apply(b,arguments)}}
function t(a,b,c){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?t=daa:t=eaa;return t.apply(null,arguments)}function Ga(a,b){var c=Array.prototype.slice.call(arguments,1);return function(){var b=c.slice();b.push.apply(b,arguments);return a.apply(this,b)}}var Ia=Date.now||function(){return+new Date};
function Ja(a,b){a=a.split(".");var c=ra;a[0]in c||!c.execScript||c.execScript("var "+a[0]);for(var d;a.length&&(d=a.shift());)!a.length&&sa(b)?c[d]=b:c[d]&&c[d]!==Object.prototype[d]?c=c[d]:c=c[d]={}}function w(a,b){function c(){}c.prototype=b.prototype;a.C=b.prototype;a.prototype=new c;a.prototype.constructor=a;a.MS=function(a,c,f){for(var d=Array(arguments.length-2),e=2;e<arguments.length;e++)d[e-2]=arguments[e];return b.prototype[c].apply(a,d)}};function Ka(a){a.prototype.then=a.prototype.then;a.prototype.$goog_Thenable=!0}function La(a){if(!a)return!1;try{return!!a.$goog_Thenable}catch(b){return!1}};function Ma(a){if(Error.captureStackTrace)Error.captureStackTrace(this,Ma);else{var b=Error().stack;b&&(this.stack=b)}a&&(this.message=String(a))}w(Ma,Error);Ma.prototype.name="CustomError";var Na;function Pa(a,b){this.l=a;this.o=b;this.j=0;this.g=null}Pa.prototype.get=function(){if(0<this.j){this.j--;var a=this.g;this.g=a.next;a.next=null}else a=this.l();return a};function Qa(a,b){a.o(b);100>a.j&&(a.j++,b.next=a.g,a.g=b)};function Ra(){this.j=this.g=null}var Ta=new Pa(function(){return new Sa},function(a){a.reset()});Ra.prototype.add=function(a,b){var c=Ta.get();c.set(a,b);this.j?this.j.next=c:this.g=c;this.j=c};Ra.prototype.remove=function(){var a=null;this.g&&(a=this.g,this.g=this.g.next,this.g||(this.j=null),a.next=null);return a};function Sa(){this.next=this.scope=this.fn=null}Sa.prototype.set=function(a,b){this.fn=a;this.scope=b;this.next=null};Sa.prototype.reset=function(){this.next=this.scope=this.fn=null};function Va(a){return function(){return a}}var Wa=Va(!1),Xa=Va(!0);function Ya(a){var b=arguments,c=b.length;return function(){for(var a=0;a<c;a++)if(!b[a].apply(this,arguments))return!1;return!0}};var Za=Array.prototype.indexOf?function(a,b){return Array.prototype.indexOf.call(a,b,void 0)}:function(a,b){if(ta(a))return ta(b)&&1==b.length?a.indexOf(b,0):-1;for(var c=0;c<a.length;c++)if(c in a&&a[c]===b)return c;return-1},$a=Array.prototype.forEach?function(a,b,c){Array.prototype.forEach.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ta(a)?a.split(""):a,f=0;f<d;f++)f in e&&b.call(c,e[f],f,a)};
function faa(a,b){var c=a.length,d=ta(a)?a.split(""):a;for(--c;0<=c;--c)c in d&&b.call(void 0,d[c],c,a)}
var ab=Array.prototype.filter?function(a,b,c){return Array.prototype.filter.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=[],f=0,h=ta(a)?a.split(""):a,k=0;k<d;k++)if(k in h){var l=h[k];b.call(c,l,k,a)&&(e[f++]=l)}return e},bb=Array.prototype.map?function(a,b,c){return Array.prototype.map.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=Array(d),f=ta(a)?a.split(""):a,h=0;h<d;h++)h in f&&(e[h]=b.call(c,f[h],h,a));return e},gaa=Array.prototype.reduce?function(a,b,c){return Array.prototype.reduce.call(a,
b,c)}:function(a,b,c){var d=c;$a(a,function(c,f){d=b.call(void 0,d,c,f,a)});return d},cb=Array.prototype.some?function(a,b){return Array.prototype.some.call(a,b,void 0)}:function(a,b){for(var c=a.length,d=ta(a)?a.split(""):a,e=0;e<c;e++)if(e in d&&b.call(void 0,d[e],e,a))return!0;return!1},db=Array.prototype.every?function(a,b,c){return Array.prototype.every.call(a,b,c)}:function(a,b,c){for(var d=a.length,e=ta(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&!b.call(c,e[f],f,a))return!1;return!0};
function eb(a,b,c){b=fb(a,b,c);return 0>b?null:ta(a)?a.charAt(b):a[b]}function fb(a,b,c){for(var d=a.length,e=ta(a)?a.split(""):a,f=0;f<d;f++)if(f in e&&b.call(c,e[f],f,a))return f;return-1}function gb(a,b){return 0<=Za(a,b)}function hb(a){if(!q(a))for(var b=a.length-1;0<=b;b--)delete a[b];a.length=0}function ib(a,b){gb(a,b)||a.push(b)}function jb(a,b,c){kb(a,c,0,b)}function lb(a,b,c){Ga(kb,a,c,0).apply(null,b)}function mb(a,b){b=Za(a,b);var c;(c=0<=b)&&nb(a,b);return c}
function nb(a,b){return 1==Array.prototype.splice.call(a,b,1).length}function ob(a,b){b=fb(a,b,void 0);return 0<=b?(nb(a,b),!0):!1}function haa(a,b){var c=0;faa(a,function(d,e){b.call(void 0,d,e,a)&&nb(a,e)&&c++})}function pb(a){return Array.prototype.concat.apply([],arguments)}function qb(a){return Array.prototype.concat.apply([],arguments)}function rb(a){var b=a.length;if(0<b){for(var c=Array(b),d=0;d<b;d++)c[d]=a[d];return c}return[]}
function sb(a,b){for(var c=1;c<arguments.length;c++){var d=arguments[c];if(za(d)){var e=a.length||0,f=d.length||0;a.length=e+f;for(var h=0;h<f;h++)a[e+h]=d[h]}else a.push(d)}}function kb(a,b,c,d){return Array.prototype.splice.apply(a,tb(arguments,1))}function tb(a,b,c){return 2>=arguments.length?Array.prototype.slice.call(a,b):Array.prototype.slice.call(a,b,c)}
function ub(a,b,c){function d(a){return Ba(a)?"o"+Da(a):(typeof a).charAt(0)+a}b=b||a;c=c||d;for(var e={},f=0,h=0;h<a.length;){var k=a[h++],l=c(k);Object.prototype.hasOwnProperty.call(e,l)||(e[l]=!0,b[f++]=k)}b.length=f}function iaa(a,b){return vb(a,b,!0,void 0,void 0)}function vb(a,b,c,d,e){for(var f=0,h=a.length,k;f<h;){var l=f+h>>1,m;c?m=b.call(e,a[l],l,a):m=b(d,a[l]);0<m?f=l+1:(h=l,k=!m)}return k?f:~f}function wb(a,b){a.sort(b||xb)}
function jaa(a,b){var c=xb;wb(a,function(a,e){return c(b(a),b(e))})}function kaa(a){jaa(a,function(a){return a.time})}function yb(a,b,c){if(!za(a)||!za(b)||a.length!=b.length)return!1;var d=a.length;c=c||laa;for(var e=0;e<d;e++)if(!c(a[e],b[e]))return!1;return!0}function xb(a,b){return a>b?1:a<b?-1:0}function laa(a,b){return a===b}function zb(a,b,c){c=vb(a,c||xb,!1,b);0>c&&jb(a,b,-(c+1))}
function Ab(a,b){for(var c={},d=0;d<a.length;d++){var e=a[d],f=b.call(void 0,e,d,a);sa(f)&&(c[f]||(c[f]=[])).push(e)}return c}function Bb(a){for(var b=[],c=0;c<arguments.length;c++){var d=arguments[c];if(q(d))for(var e=0;e<d.length;e+=8192){var f=tb(d,e,e+8192);f=Bb.apply(null,f);for(var h=0;h<f.length;h++)b.push(f[h])}else b.push(d)}return b}function Cb(a,b){a.length&&(b%=a.length,0<b?Array.prototype.unshift.apply(a,a.splice(-b,b)):0>b&&Array.prototype.push.apply(a,a.splice(0,-b)))}
function Db(a,b,c){b=Array.prototype.splice.call(a,b,1);Array.prototype.splice.call(a,c,0,b[0])};function Eb(a,b){return 0==a.lastIndexOf(b,0)}function Fb(a,b){var c=a.length-b.length;return 0<=c&&a.indexOf(b,c)==c}function Gb(a,b){return a.toLowerCase()==b.toLowerCase()}function maa(a,b){for(var c=a.split("%s"),d="",e=Array.prototype.slice.call(arguments,1);e.length&&1<c.length;)d+=c.shift()+e.shift();return d+c.join("%s")}function Hb(a){return/^[\s\xa0]*$/.test(a)}function Ib(a){return!/[^0-9]/.test(a)}var Jb=String.prototype.trim?function(a){return a.trim()}:function(a){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(a)[1]};
function Kb(a,b){a=String(a).toLowerCase();b=String(b).toLowerCase();return a<b?-1:a==b?0:1}function Lb(a,b){var c=/\d+|\.\d+|\D+/g;if(a==b)return 0;if(!a)return-1;if(!b)return 1;for(var d=a.toLowerCase().match(c),e=b.toLowerCase().match(c),f=Math.min(d.length,e.length),h=0;h<f;h++){c=d[h];var k=e[h];if(c!=k)return a=parseInt(c,10),!isNaN(a)&&(b=parseInt(k,10),!isNaN(b)&&a-b)?a-b:c<k?-1:1}return d.length!=e.length?d.length-e.length:a<b?-1:1}function Mb(a,b){return Lb(a,b)}
function Nb(a,b){return a.replace(/(\r\n|\r|\n)/g,b?"<br />":"<br>")}function Ob(a){if(!naa.test(a))return a;-1!=a.indexOf("&")&&(a=a.replace(oaa,"&amp;"));-1!=a.indexOf("<")&&(a=a.replace(paa,"&lt;"));-1!=a.indexOf(">")&&(a=a.replace(qaa,"&gt;"));-1!=a.indexOf('"')&&(a=a.replace(raa,"&quot;"));-1!=a.indexOf("'")&&(a=a.replace(saa,"&#39;"));-1!=a.indexOf("\x00")&&(a=a.replace(taa,"&#0;"));return a}var oaa=/&/g,paa=/</g,qaa=/>/g,raa=/"/g,saa=/'/g,taa=/\x00/g,naa=/[\x00&<>"']/;
function uaa(a){var b={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"'};var c=ra.document.createElement("div");return a.replace(vaa,function(a,e){var d=b[a];if(d)return d;"#"==e.charAt(0)&&(e=Number("0"+e.substr(1)),isNaN(e)||(d=String.fromCharCode(e)));d||(c.innerHTML=a+" ",d=c.firstChild.nodeValue.slice(0,-1));return b[a]=d})}
function waa(a){return a.replace(/&([^;]+);/g,function(a,c){switch(c){case "amp":return"&";case "lt":return"<";case "gt":return">";case "quot":return'"';default:return"#"!=c.charAt(0)||(c=Number("0"+c.substr(1)),isNaN(c))?a:String.fromCharCode(c)}})}var vaa=/&([^;\s<&]+);?/g;function Pb(a,b){a.length>b&&(a=a.substring(0,b-3)+"...");return a}function Qb(a,b){return-1!=a.indexOf(b)}function Rb(a){return String(a).replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")}
var xaa=String.prototype.repeat?function(a,b){return a.repeat(b)}:function(a,b){return Array(b+1).join(a)};function Sb(a,b,c){a=sa(c)?a.toFixed(c):String(a);c=a.indexOf(".");-1==c&&(c=a.length);return xaa("0",Math.max(0,b-c))+a}function Tb(a){return null==a?"":String(a)}function Ub(a){return Array.prototype.join.call(arguments,"")}function Vb(){return Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Ia()).toString(36)}
function Wb(a,b){return a<b?-1:a>b?1:0}function Xb(a){for(var b=0,c=0;c<a.length;++c)b=31*b+a.charCodeAt(c)>>>0;return b}var yaa=2147483648*Math.random()|0;function Zb(){return"goog_"+yaa++}function $b(a){var b=Number(a);return 0==b&&Hb(a)?NaN:b}function ac(a){var b=ta(void 0)?Rb(void 0):"\\s";return a.replace(new RegExp("(^"+(b?"|["+b+"]+":"")+")([a-z])","g"),function(a,b,e){return b+e.toUpperCase()})};var bc;a:{var cc=ra.navigator;if(cc){var dc=cc.userAgent;if(dc){bc=dc;break a}}bc=""}function ec(a){return Qb(bc,a)}function zaa(a){for(var b=/(\w[\w ]+)\/([^\s]+)\s*(?:\((.*?)\))?/g,c=[],d;d=b.exec(a);)c.push([d[1],d[2],d[3]||void 0]);return c};function fc(a,b,c){for(var d in a)b.call(c,a[d],d,a)}function Aaa(a,b){for(var c in a)if(b.call(void 0,a[c],c,a))return!0;return!1}function gc(a){var b=0,c;for(c in a)b++;return b}function hc(a){for(var b in a)return a[b]}function ic(a){var b=[],c=0,d;for(d in a)b[c++]=a[d];return b}function jc(a){var b=[],c=0,d;for(d in a)b[c++]=d;return b}function kc(a,b){var c=za(b),d=c?b:arguments;for(c=c?0:1;c<d.length;c++){if(null==a)return;a=a[d[c]]}return a}function lc(a,b){return null!==a&&b in a}
function mc(a,b){for(var c in a)if(a[c]==b)return!0;return!1}function nc(a,b,c){for(var d in a)if(b.call(c,a[d],d,a))return d}function oc(a,b){return(b=nc(a,b,void 0))&&a[b]}function pc(a){for(var b in a)return!1;return!0}function qc(a){for(var b in a)delete a[b]}function rc(a,b){b in a&&delete a[b]}function sc(a,b,c){if(null!==a&&b in a)throw Error('The object already contains the key "'+b+'"');a[b]=c}function uc(a,b){return null!==a&&b in a?a[b]:void 0}
function Baa(a,b){for(var c in a)if(!(c in b)||a[c]!==b[c])return!1;for(c in b)if(!(c in a))return!1;return!0}function vc(a){var b={},c;for(c in a)b[c]=a[c];return b}function wc(a){var b=ya(a);if("object"==b||"array"==b){if(Ca(a.clone))return a.clone();b="array"==b?[]:{};for(var c in a)b[c]=wc(a[c]);return b}return a}var xc="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");
function yc(a,b){for(var c,d,e=1;e<arguments.length;e++){d=arguments[e];for(c in d)a[c]=d[c];for(var f=0;f<xc.length;f++)c=xc[f],Object.prototype.hasOwnProperty.call(d,c)&&(a[c]=d[c])}}function zc(a){var b=arguments.length;if(1==b&&q(arguments[0]))return zc.apply(null,arguments[0]);for(var c={},d=0;d<b;d++)c[arguments[d]]=!0;return c};function Ac(){return ec("Trident")||ec("MSIE")}function Bc(){return(ec("Chrome")||ec("CriOS"))&&!ec("Edge")}function Caa(){function a(a){a=eb(a,d);return c[a]||""}var b=bc;if(Ac())return Daa(b);b=zaa(b);var c={};$a(b,function(a){c[a[0]]=a[1]});var d=Ga(lc,c);return ec("Opera")?a(["Version","Opera"]):ec("Edge")?a(["Edge"]):Bc()?a(["Chrome","CriOS"]):(b=b[2])&&b[1]||""}
function Daa(a){var b=/rv: *([\d\.]*)/.exec(a);if(b&&b[1])return b[1];b="";var c=/MSIE +([\d\.]+)/.exec(a);if(c&&c[1])if(a=/Trident\/(\d.\d)/.exec(a),"7.0"==c[1])if(a&&a[1])switch(a[1]){case "4.0":b="8.0";break;case "5.0":b="9.0";break;case "6.0":b="10.0";break;case "7.0":b="11.0"}else b="7.0";else b=c[1];return b};function Cc(a){ra.setTimeout(function(){throw a;},0)}function Dc(a,b){var c=a;b&&(c=t(a,b));!Ca(ra.setImmediate)||ra.Window&&ra.Window.prototype&&!ec("Edge")&&ra.Window.prototype.setImmediate==ra.setImmediate?(Ec||(Ec=Eaa()),Ec(c)):ra.setImmediate(c)}var Ec;
function Eaa(){var a=ra.MessageChannel;"undefined"===typeof a&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&!ec("Presto")&&(a=function(){var a=document.createElement("IFRAME");a.style.display="none";a.src="";document.documentElement.appendChild(a);var b=a.contentWindow;a=b.document;a.open();a.write("");a.close();var c="callImmediate"+Math.random(),d="file:"==b.location.protocol?"*":b.location.protocol+"//"+b.location.host;a=t(function(a){if(("*"==d||a.origin==d)&&a.data==
c)this.port1.onmessage()},this);b.addEventListener("message",a,!1);this.port1={};this.port2={postMessage:function(){b.postMessage(c,d)}}});if("undefined"!==typeof a&&!Ac()){var b=new a,c={},d=c;b.port1.onmessage=function(){if(sa(c.next)){c=c.next;var a=c.pu;c.pu=null;a()}};return function(a){d.next={pu:a};d=d.next;b.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("SCRIPT")?function(a){var b=document.createElement("SCRIPT");b.onreadystatechange=
function(){b.onreadystatechange=null;b.parentNode.removeChild(b);b=null;a();a=null};document.documentElement.appendChild(b)}:function(a){ra.setTimeout(a,0)}};function Fc(a,b){Gc||Faa();Hc||(Gc(),Hc=!0);Ic.add(a,b)}var Gc;function Faa(){if(-1!=String(ra.Promise).indexOf("[native code]")){var a=ra.Promise.resolve(void 0);Gc=function(){a.then(Jc)}}else Gc=function(){Dc(Jc)}}var Hc=!1,Ic=new Ra;function Jc(){for(var a;a=Ic.remove();){try{a.fn.call(a.scope)}catch(b){Cc(b)}Qa(Ta,a)}Hc=!1};function Kc(a,b){this.xa=Lc;this.u=void 0;this.j=this.g=this.ya=null;this.l=this.o=!1;if(a!=wa)try{var c=this;a.call(b,function(a){Mc(c,Nc,a)},function(a){Mc(c,Oc,a)})}catch(d){Mc(this,Oc,d)}}var Lc=0,Nc=2,Oc=3;function Pc(){this.next=this.context=this.j=this.o=this.g=null;this.l=!1}Pc.prototype.reset=function(){this.context=this.j=this.o=this.g=null;this.l=!1};var Qc=new Pa(function(){return new Pc},function(a){a.reset()});function Rc(a,b,c){var d=Qc.get();d.o=a;d.j=b;d.context=c;return d}
function Sc(a){if(a instanceof Kc)return a;var b=new Kc(wa);Mc(b,Nc,a);return b}function Tc(a){return new Kc(function(b,c){c(a)})}function Gaa(a,b,c){Uc(a,b,c,null)||Fc(Ga(b,a))}function Vc(a){return new Kc(function(b,c){var d=a.length,e=[];if(d)for(var f=function(a,c){d--;e[a]=c;0==d&&b(e)},h=function(a){c(a)},k=0,l;k<a.length;k++)l=a[k],Gaa(l,Ga(f,k),h);else b(e)})}Kc.prototype.then=function(a,b,c){return Wc(this,Ca(a)?a:null,Ca(b)?b:null,c)};Ka(Kc);
function Xc(a,b,c){b=Rc(b,b,c);b.l=!0;Yc(a,b)}function Zc(a,b){return Wc(a,null,b,void 0)}Kc.prototype.cancel=function(a){this.xa==Lc&&Fc(function(){var b=new $c(a);ad(this,b)},this)};function ad(a,b){if(a.xa==Lc)if(a.ya){var c=a.ya;if(c.g){for(var d=0,e=null,f=null,h=c.g;h&&(h.l||(d++,h.g==a&&(e=h),!(e&&1<d)));h=h.next)e||(f=h);e&&(c.xa==Lc&&1==d?ad(c,b):(f?(d=f,d.next==c.j&&(c.j=d),d.next=d.next.next):bd(c),cd(c,e,Oc,b)))}a.ya=null}else Mc(a,Oc,b)}
function Yc(a,b){a.g||a.xa!=Nc&&a.xa!=Oc||dd(a);a.j?a.j.next=b:a.g=b;a.j=b}function Wc(a,b,c,d){var e=Rc(null,null,null);e.g=new Kc(function(a,h){e.o=b?function(c){try{var e=b.call(d,c);a(e)}catch(m){h(m)}}:a;e.j=c?function(b){try{var e=c.call(d,b);!sa(e)&&b instanceof $c?h(b):a(e)}catch(m){h(m)}}:h});e.g.ya=a;Yc(a,e);return e.g}Kc.prototype.B=function(a){this.xa=Lc;Mc(this,Nc,a)};Kc.prototype.G=function(a){this.xa=Lc;Mc(this,Oc,a)};
function Mc(a,b,c){a.xa==Lc&&(a===c&&(b=Oc,c=new TypeError("Promise cannot resolve to itself")),a.xa=1,Uc(c,a.B,a.G,a)||(a.u=c,a.xa=b,a.ya=null,dd(a),b!=Oc||c instanceof $c||Haa(a,c)))}function Uc(a,b,c,d){if(a instanceof Kc)return Yc(a,Rc(b||wa,c||null,d)),!0;if(La(a))return a.then(b,c,d),!0;if(Ba(a))try{var e=a.then;if(Ca(e))return Iaa(a,e,b,c,d),!0}catch(f){return c.call(d,f),!0}return!1}
function Iaa(a,b,c,d,e){function f(a){k||(k=!0,d.call(e,a))}function h(a){k||(k=!0,c.call(e,a))}var k=!1;try{b.call(a,h,f)}catch(l){f(l)}}function dd(a){a.o||(a.o=!0,Fc(a.A,a))}function bd(a){var b=null;a.g&&(b=a.g,a.g=b.next,b.next=null);a.g||(a.j=null);return b}Kc.prototype.A=function(){for(var a;a=bd(this);)cd(this,a,this.xa,this.u);this.o=!1};
function cd(a,b,c,d){if(c==Oc&&b.j&&!b.l)for(;a&&a.l;a=a.ya)a.l=!1;if(b.g)b.g.ya=null,ed(b,c,d);else try{b.l?b.o.call(b.context):ed(b,c,d)}catch(e){fd.call(null,e)}Qa(Qc,b)}function ed(a,b,c){b==Nc?a.o.call(a.context,c):a.j&&a.j.call(a.context,c)}function Haa(a,b){a.l=!0;Fc(function(){a.l&&fd.call(null,b)})}var fd=Cc;function $c(a){Ma.call(this,a)}w($c,Ma);$c.prototype.name="cancel";function x(){0!=gd&&(hd[Da(this)]=this);this.Ea=this.Ea;this.pa=this.pa}var gd=0,hd={};x.prototype.Ea=!1;x.prototype.Xa=function(){return this.Ea};x.prototype.dispose=function(){if(!this.Ea&&(this.Ea=!0,this.J(),0!=gd)){var a=Da(this);delete hd[a]}};function id(a,b){a.Ea?sa(void 0)?b.call(void 0):b():(a.pa||(a.pa=[]),a.pa.push(sa(void 0)?t(b,void 0):b))}x.prototype.J=function(){if(this.pa)for(;this.pa.length;)this.pa.shift()()};function z(a){a&&"function"==typeof a.dispose&&a.dispose()}
function jd(a){for(var b=0,c=arguments.length;b<c;++b){var d=arguments[b];za(d)?jd.apply(null,d):z(d)}};function kd(){return ec("iPhone")&&!ec("iPod")&&!ec("iPad")}function ld(){return kd()||ec("iPad")||ec("iPod")};function md(a){md[" "](a);return a}md[" "]=wa;function Jaa(a,b){var c=Kaa;return Object.prototype.hasOwnProperty.call(c,a)?c[a]:c[a]=b(a)};var nd=ec("Opera"),od=Ac(),pd=ec("Edge"),Laa=pd||od,qd=ec("Gecko")&&!(Qb(bc.toLowerCase(),"webkit")&&!ec("Edge"))&&!(ec("Trident")||ec("MSIE"))&&!ec("Edge"),rd=Qb(bc.toLowerCase(),"webkit")&&!ec("Edge");rd&&ec("Mobile");var sd=ec("Macintosh"),td=ec("Windows"),ud=ec("Linux")||ec("CrOS"),vd=ra.navigator||null;vd&&Qb(vd.appVersion||"","X11");var Maa=ec("Android"),Naa=kd(),Oaa=ec("iPad"),Paa=ec("iPod");ld();function wd(){var a=ra.document;return a?a.documentMode:void 0}var xd;
a:{var yd="",zd=function(){var a=bc;if(qd)return/rv:([^\);]+)(\)|;)/.exec(a);if(pd)return/Edge\/([\d\.]+)/.exec(a);if(od)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(a);if(rd)return/WebKit\/(\S+)/.exec(a);if(nd)return/(?:Version)[ \/]?(\S+)/.exec(a)}();zd&&(yd=zd?zd[1]:"");if(od){var Ad=wd();if(null!=Ad&&Ad>parseFloat(yd)){xd=String(Ad);break a}}xd=yd}var Kaa={};
function Bd(a){return Jaa(a,function(){for(var b=0,c=Jb(String(xd)).split("."),d=Jb(String(a)).split("."),e=Math.max(c.length,d.length),f=0;0==b&&f<e;f++){var h=c[f]||"",k=d[f]||"";do{h=/(\d*)(\D*)(.*)/.exec(h)||["","","",""];k=/(\d*)(\D*)(.*)/.exec(k)||["","","",""];if(0==h[0].length&&0==k[0].length)break;b=Wb(0==h[1].length?0:parseInt(h[1],10),0==k[1].length?0:parseInt(k[1],10))||Wb(0==h[2].length,0==k[2].length)||Wb(h[2],k[2]);h=h[3];k=k[3]}while(0==b)}return 0<=b})}
function Cd(){return 9<=Number(Qaa)}var Dd;var Ed=ra.document;Dd=Ed&&od?wd()||("CSS1Compat"==Ed.compatMode?parseInt(xd,10):5):void 0;var Qaa=Dd;function Fd(a){if("undefined"==typeof a)return"undefined";if(null==a)return"NULL";var b=[],c;for(c in a)if(!Ca(a[c])){var d=c+" = ";try{d+=a[c]}catch(e){d+="*** "+e+" ***"}b.push(d)}return b.join("\n")}
function Gd(a){function b(a,h){var f=h+"  ";try{if(sa(a))if(null===a)c.push("NULL");else if(ta(a))c.push('"'+a.replace(/\n/g,"\n"+h)+'"');else if(Ca(a))c.push(String(a).replace(/\n/g,"\n"+h));else if(Ba(a)){a[Ea]||d.push(a);var l=Da(a);if(e[l])c.push("*** reference loop detected (id="+l+") ***");else{e[l]=!0;c.push("{");for(var m in a)Ca(a[m])||(c.push("\n"),c.push(f),c.push(m+" = "),b(a[m],f));c.push("\n"+h+"}");delete e[l]}}else c.push(a);else c.push("undefined")}catch(n){c.push("*** "+n+" ***")}}
var c=[],d=[],e={};b(a,"");for(a=0;a<d.length;a++)Fa(d[a]);return c.join("")}function Hd(a){var b=Error();if(Error.captureStackTrace)Error.captureStackTrace(b,a||Hd),b=String(b.stack);else{try{throw b;}catch(c){b=c}b=(b=b.stack)?String(b):null}b||(b=Id(a||arguments.callee.caller,[]));return b}
function Id(a,b){var c=[];if(gb(b,a))c.push("[...circular reference...]");else if(a&&50>b.length){c.push(Jd(a)+"(");for(var d=a.arguments,e=0;d&&e<d.length;e++){0<e&&c.push(", ");var f=d[e];switch(typeof f){case "object":f=f?"object":"null";break;case "string":break;case "number":f=String(f);break;case "boolean":f=f?"true":"false";break;case "function":f=(f=Jd(f))?f:"[fn]";break;default:f=typeof f}40<f.length&&(f=f.substr(0,40)+"...");c.push(f)}b.push(a);c.push(")\n");try{c.push(Id(a.caller,b))}catch(h){c.push("[exception trying to get caller]\n")}}else a?
c.push("[...long stack...]"):c.push("[end]");return c.join("")}function Jd(a){if(Kd[a])return Kd[a];a=String(a);if(!Kd[a]){var b=/function ([^\(]+)/.exec(a);Kd[a]=b?b[1]:"[Anonymous]"}return Kd[a]}var Kd={};var Raa=!od||Cd(),Ld=!od||Cd(),Saa=od&&!Bd("9"),Taa=function(){if(!ra.addEventListener||!Object.defineProperty)return!1;var a=!1,b=Object.defineProperty({},"passive",{get:function(){a=!0}});ra.addEventListener("test",wa,b);ra.removeEventListener("test",wa,b);return a}();function A(a,b){this.type=a;this.A=this.target=b;this.defaultPrevented=this.B=!1;this.uA=!0}A.prototype.stopPropagation=function(){this.B=!0};A.prototype.preventDefault=function(){this.defaultPrevented=!0;this.uA=!1};function Md(a,b){A.call(this,a?a.type:"");this.relatedTarget=this.A=this.target=null;this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.key="";this.keyCode=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.state=null;this.I=!1;this.pointerId=0;this.pointerType="";this.l=null;a&&this.init(a,b)}w(Md,A);var Uaa=[1,4,2],Vaa={2:"touch",3:"pen",4:"mouse"};
Md.prototype.init=function(a,b){var c=this.type=a.type,d=a.changedTouches?a.changedTouches[0]:null;this.target=a.target||a.srcElement;this.A=b;if(b=a.relatedTarget){if(qd){a:{try{md(b.nodeName);var e=!0;break a}catch(f){}e=!1}e||(b=null)}}else"mouseover"==c?b=a.fromElement:"mouseout"==c&&(b=a.toElement);this.relatedTarget=b;null===d?(this.offsetX=rd||void 0!==a.offsetX?a.offsetX:a.layerX,this.offsetY=rd||void 0!==a.offsetY?a.offsetY:a.layerY,this.clientX=void 0!==a.clientX?a.clientX:a.pageX,this.clientY=
void 0!==a.clientY?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0):(this.clientX=void 0!==d.clientX?d.clientX:d.pageX,this.clientY=void 0!==d.clientY?d.clientY:d.pageY,this.screenX=d.screenX||0,this.screenY=d.screenY||0);this.button=a.button;this.keyCode=a.keyCode||0;this.key=a.key||"";this.ctrlKey=a.ctrlKey;this.altKey=a.altKey;this.shiftKey=a.shiftKey;this.metaKey=a.metaKey;this.I=sd?a.metaKey:a.ctrlKey;this.pointerId=a.pointerId||0;this.pointerType=ta(a.pointerType)?a.pointerType:
Vaa[a.pointerType]||"";this.state=a.state;this.l=a;a.defaultPrevented&&this.preventDefault()};function Nd(a,b){return Raa?a.l.button==b:"click"==a.type?0==b:!!(a.l.button&Uaa[b])}function Od(a){return Nd(a,0)&&!(rd&&sd&&a.ctrlKey)}Md.prototype.stopPropagation=function(){Md.C.stopPropagation.call(this);this.l.stopPropagation?this.l.stopPropagation():this.l.cancelBubble=!0};
Md.prototype.preventDefault=function(){Md.C.preventDefault.call(this);var a=this.l;if(a.preventDefault)a.preventDefault();else if(a.returnValue=!1,Saa)try{if(a.ctrlKey||112<=a.keyCode&&123>=a.keyCode)a.keyCode=-1}catch(b){}};var Pd="closure_listenable_"+(1E6*Math.random()|0);function Qd(a){return!(!a||!a[Pd])}var Waa=0;function Xaa(a,b,c,d,e){this.listener=a;this.proxy=null;this.src=b;this.type=c;this.capture=!!d;this.za=e;this.key=++Waa;this.Gj=this.callOnce=!1}function Rd(a){a.Gj=!0;a.listener=null;a.proxy=null;a.src=null;a.za=null};function Sd(a){this.src=a;this.g={};this.j=0}g=Sd.prototype;g.add=function(a,b,c,d,e){var f=a.toString();a=this.g[f];a||(a=this.g[f]=[],this.j++);var h=Td(a,b,d,e);-1<h?(b=a[h],c||(b.callOnce=!1)):(b=new Xaa(b,this.src,f,!!d,e),b.callOnce=c,a.push(b));return b};g.remove=function(a,b,c,d){a=a.toString();if(!(a in this.g))return!1;var e=this.g[a];b=Td(e,b,c,d);return-1<b?(Rd(e[b]),nb(e,b),0==e.length&&(delete this.g[a],this.j--),!0):!1};
function Ud(a,b){var c=b.type;c in a.g&&mb(a.g[c],b)&&(Rd(b),0==a.g[c].length&&(delete a.g[c],a.j--))}g.removeAll=function(a){a=a&&a.toString();var b=0,c;for(c in this.g)if(!a||c==a){for(var d=this.g[c],e=0;e<d.length;e++)++b,Rd(d[e]);delete this.g[c];this.j--}return b};g.nk=function(a,b,c,d){a=this.g[a.toString()];var e=-1;a&&(e=Td(a,b,c,d));return-1<e?a[e]:null};
g.be=function(a,b){var c=sa(a),d=c?a.toString():"",e=sa(b);return Aaa(this.g,function(a){for(var f=0;f<a.length;++f)if(!(c&&a[f].type!=d||e&&a[f].capture!=b))return!0;return!1})};function Td(a,b,c,d){for(var e=0;e<a.length;++e){var f=a[e];if(!f.Gj&&f.listener==b&&f.capture==!!c&&f.za==d)return e}return-1};var Vd="closure_lm_"+(1E6*Math.random()|0),Wd={},Xd=0;function Yd(a,b,c,d,e){if(d&&d.once)return Zd(a,b,c,d,e);if(q(b)){for(var f=0;f<b.length;f++)Yd(a,b[f],c,d,e);return null}c=$d(c);return Qd(a)?a.H(b,c,Ba(d)?!!d.capture:!!d,e):ae(a,b,c,!1,d,e)}
function ae(a,b,c,d,e,f){if(!b)throw Error("Invalid event type");var h=Ba(e)?!!e.capture:!!e,k=be(a);k||(a[Vd]=k=new Sd(a));c=k.add(b,c,d,h,f);if(c.proxy)return c;d=Yaa();c.proxy=d;d.src=a;d.listener=c;if(a.addEventListener)Taa||(e=h),void 0===e&&(e=!1),a.addEventListener(b.toString(),d,e);else if(a.attachEvent)a.attachEvent(ce(b.toString()),d);else if(a.addListener&&a.removeListener)a.addListener(d);else throw Error("addEventListener and attachEvent are unavailable.");Xd++;return c}
function Yaa(){var a=Zaa,b=Ld?function(c){return a.call(b.src,b.listener,c)}:function(c){c=a.call(b.src,b.listener,c);if(!c)return c};return b}function Zd(a,b,c,d,e){if(q(b)){for(var f=0;f<b.length;f++)Zd(a,b[f],c,d,e);return null}c=$d(c);return Qd(a)?a.Ua(b,c,Ba(d)?!!d.capture:!!d,e):ae(a,b,c,!0,d,e)}function de(a,b,c,d,e){if(q(b))for(var f=0;f<b.length;f++)de(a,b[f],c,d,e);else d=Ba(d)?!!d.capture:!!d,c=$d(c),Qd(a)?a.M(b,c,d,e):a&&(a=be(a))&&(b=a.nk(b,c,d,e))&&ee(b)}
function ee(a){if(!ua(a)&&a&&!a.Gj){var b=a.src;if(Qd(b))Ud(b.rf,a);else{var c=a.type,d=a.proxy;b.removeEventListener?b.removeEventListener(c,d,a.capture):b.detachEvent?b.detachEvent(ce(c),d):b.addListener&&b.removeListener&&b.removeListener(d);Xd--;(c=be(b))?(Ud(c,a),0==c.j&&(c.src=null,b[Vd]=null)):Rd(a)}}}function ce(a){return a in Wd?Wd[a]:Wd[a]="on"+a}
function fe(a,b,c,d){var e=!0;if(a=be(a))if(b=a.g[b.toString()])for(b=b.concat(),a=0;a<b.length;a++){var f=b[a];f&&f.capture==c&&!f.Gj&&(f=ge(f,d),e=e&&!1!==f)}return e}function ge(a,b){var c=a.listener,d=a.za||a.src;a.callOnce&&ee(a);return c.call(d,b)}
function Zaa(a,b){if(a.Gj)return!0;if(!Ld){var c=b||va("window.event");b=new Md(c,this);var d=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var e=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(h){e=!0}if(e||void 0==c.returnValue)c.returnValue=!0}c=[];for(e=b.A;e;e=e.parentNode)c.push(e);a=a.type;for(e=c.length-1;!b.B&&0<=e;e--){b.A=c[e];var f=fe(c[e],a,!0,b);d=d&&f}for(e=0;!b.B&&e<c.length;e++)b.A=c[e],f=fe(c[e],a,!1,b),d=d&&f}return d}return ge(a,new Md(b,this))}
function be(a){a=a[Vd];return a instanceof Sd?a:null}var he="__closure_events_fn_"+(1E9*Math.random()>>>0);function $d(a){if(Ca(a))return a;a[he]||(a[he]=function(b){return a.handleEvent(b)});return a[he]};function C(){x.call(this);this.rf=new Sd(this);this.FC=this;this.Fn=null}w(C,x);C.prototype[Pd]=!0;g=C.prototype;g.ht=function(a){this.Fn=a};g.addEventListener=function(a,b,c,d){Yd(this,a,b,c,d)};g.removeEventListener=function(a,b,c,d){de(this,a,b,c,d)};
g.dispatchEvent=function(a){var b,c=this.Fn;if(c)for(b=[];c;c=c.Fn)b.push(c);c=this.FC;var d=a.type||a;if(ta(a))a=new A(a,c);else if(a instanceof A)a.target=a.target||c;else{var e=a;a=new A(d,c);yc(a,e)}e=!0;if(b)for(var f=b.length-1;!a.B&&0<=f;f--){var h=a.A=b[f];e=ie(h,d,!0,a)&&e}a.B||(h=a.A=c,e=ie(h,d,!0,a)&&e,a.B||(e=ie(h,d,!1,a)&&e));if(b)for(f=0;!a.B&&f<b.length;f++)h=a.A=b[f],e=ie(h,d,!1,a)&&e;return e};g.J=function(){C.C.J.call(this);this.removeAllListeners();this.Fn=null};
g.H=function(a,b,c,d){return this.rf.add(String(a),b,!1,c,d)};g.Ua=function(a,b,c,d){return this.rf.add(String(a),b,!0,c,d)};g.M=function(a,b,c,d){this.rf.remove(String(a),b,c,d)};g.removeAllListeners=function(a){return this.rf?this.rf.removeAll(a):0};function ie(a,b,c,d){b=a.rf.g[String(b)];if(!b)return!0;b=b.concat();for(var e=!0,f=0;f<b.length;++f){var h=b[f];if(h&&!h.Gj&&h.capture==c){var k=h.listener,l=h.za||h.src;h.callOnce&&Ud(a.rf,h);e=!1!==k.call(l,d)&&e}}return e&&0!=d.uA}
g.nk=function(a,b,c,d){return this.rf.nk(String(a),b,c,d)};g.be=function(a,b){return this.rf.be(sa(a)?String(a):void 0,b)};function je(a,b){C.call(this);this.j=a||1;this.g=b||ra;this.l=t(this.rO,this);this.o=Ia()}w(je,C);g=je.prototype;g.enabled=!1;g.xf=null;g.rO=function(){if(this.enabled){var a=Ia()-this.o;0<a&&a<.8*this.j?this.xf=this.g.setTimeout(this.l,this.j-a):(this.xf&&(this.g.clearTimeout(this.xf),this.xf=null),this.dispatchEvent("tick"),this.enabled&&(this.xf=this.g.setTimeout(this.l,this.j),this.o=Ia()))}};g.start=function(){this.enabled=!0;this.xf||(this.xf=this.g.setTimeout(this.l,this.j),this.o=Ia())};
g.stop=function(){this.enabled=!1;this.xf&&(this.g.clearTimeout(this.xf),this.xf=null)};g.J=function(){je.C.J.call(this);this.stop();delete this.g};function ke(a,b,c){if(Ca(a))c&&(a=t(a,c));else if(a&&"function"==typeof a.handleEvent)a=t(a.handleEvent,a);else throw Error("Invalid listener argument");return 2147483647<Number(b)?-1:ra.setTimeout(a,b||0)};var le={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",
darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",
ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",
lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",
moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",
seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function me(a,b,c){return Math.min(Math.max(a,b),c)}function ne(a,b,c){return Math.abs(a-b)<=(c||1E-6)}function oe(a){return a*Math.PI/180};function $aa(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(pe.test(c))return b.ej=qe(c),b.type="hex",b;a:{var d=a.match(aba);if(d){c=Number(d[1]);var e=Number(d[2]);d=Number(d[3]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=d&&255>=d){c=[c,e,d];break a}}c=[]}if(c.length)return b.ej=re(c),b.type="rgb",b;if(le&&(c=le[a.toLowerCase()]))return b.ej=c,b.type="named",b;throw Error(a+" is not a valid color string");}var bba=/#(.)(.)(.)/;
function qe(a){if(!pe.test(a))throw Error("'"+a+"' is not a valid hex color");4==a.length&&(a=a.replace(bba,"#$1$1$2$2$3$3"));return a.toLowerCase()}function se(a){a=qe(a);return[parseInt(a.substr(1,2),16),parseInt(a.substr(3,2),16),parseInt(a.substr(5,2),16)]}function te(a,b,c){a=Number(a);b=Number(b);c=Number(c);if(a!=(a&255)||b!=(b&255)||c!=(c&255))throw Error('"('+a+","+b+","+c+'") is not a valid RGB color');a=ue(a.toString(16));b=ue(b.toString(16));c=ue(c.toString(16));return"#"+a+b+c}
function re(a){return te(a[0],a[1],a[2])}function ve(a,b,c){0>c?c+=1:1<c&&--c;return 1>6*c?a+6*(b-a)*c:1>2*c?b:2>3*c?a+(b-a)*(2/3-c)*6:a}function we(a,b,c){a/=360;if(0==b)c=b=a=255*c;else{var d=.5>c?c*(1+b):c+b-b*c;var e=2*c-d;c=255*ve(e,d,a+1/3);b=255*ve(e,d,a);a=255*ve(e,d,a-1/3)}return[Math.round(c),Math.round(b),Math.round(a)]}var pe=/^#(?:[0-9a-f]{3}){1,2}$/i,aba=/^(?:rgb)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})\)$/i;function ue(a){return 1==a.length?"0"+a:a}
function cba(a){return re(we(a[0],a[1],a[2]))}function dba(a){for(var b=[[0,0,0],[255,255,255]],c=[],d=0;d<b.length;d++)c.push({color:b[d],diff:Math.abs(xe(b[d])-xe(a))+eba(b[d],a)});c.sort(function(a,b){return b.diff-a.diff});return c[0].color}function xe(a){return Math.round((299*a[0]+587*a[1]+114*a[2])/1E3)}function eba(a,b){return Math.abs(a[0]-b[0])+Math.abs(a[1]-b[1])+Math.abs(a[2]-b[2])};function ye(a,b,c,d,e){this.reset(a,b,c,d,e)}ye.prototype.g=null;var fba=0;ye.prototype.reset=function(a,b,c,d,e){"number"==typeof e||fba++;this.j=d||Ia();this.o=a;this.u=b;this.l=c;delete this.g};function ze(a){this.l=a;this.j=this.eb=this.g=this.ya=null}function Ae(a,b){this.name=a;this.value=b}Ae.prototype.toString=function(){return this.name};var Be=new Ae("OFF",Infinity),Ce=new Ae("SHOUT",1200),De=new Ae("SEVERE",1E3),Ee=new Ae("WARNING",900),Fe=new Ae("INFO",800),Ge=new Ae("CONFIG",700),He=new Ae("FINE",500),Ie=new Ae("FINER",400),Je=new Ae("FINEST",300),Ke=new Ae("ALL",0),Le=[Be,Ce,De,Ee,Fe,Ge,He,Ie,Je,Ke],Me=null;
function Ne(a){if(!Me){Me={};for(var b=0,c;c=Le[b];b++)Me[c.value]=c,Me[c.name]=c}return Me[a]||null}g=ze.prototype;g.getName=function(){return this.l};g.Hg=function(a){this.j||(this.j=[]);this.j.push(a)};g.mA=function(a){var b=this.j;return!!b&&mb(b,a)};g.getParent=function(){return this.ya};g.na=function(){this.eb||(this.eb={});return this.eb};g.cj=function(a){this.g=a};function Oe(a){return a.g?a.g:a.ya?Oe(a.ya):null}
g.log=function(a,b,c){if(a.value>=Oe(this).value)for(Ca(b)&&(b=b()),a=new ye(a,String(b),this.l),c&&(a.g=c),c=this;c;){var d=c,e=a;if(d.j)for(var f=0;b=d.j[f];f++)b(e);c=c.getParent()}};g.hb=function(a,b){this.log(Ee,a,b)};g.info=function(a,b){this.log(Fe,a,b)};g.config=function(a,b){this.log(Ge,a,b)};g.ta=function(a,b){this.log(He,a,b)};var Pe={},Qe=null;function Re(){Qe||(Qe=new ze(""),Pe[""]=Qe,Qe.cj(Ge))}
function Se(a){Re();var b;if(!(b=Pe[a])){b=new ze(a);var c=a.lastIndexOf("."),d=a.substr(c+1);c=Se(a.substr(0,c));c.na()[d]=b;b.ya=c;Pe[a]=b}return b};var E={Fg:!0,GR:"",MQ:ze,KQ:Ae};E.LQ=ye;E.V=function(a){return E.Fg?Se(a):null};E.Hg=function(a){E.Fg&&a&&a.Hg(void 0)};E.mA=function(a){return E.Fg&&a?a.mA(void 0):!1};E.log=function(a,b,c,d){E.Fg&&a&&a.log(b,c,d)};E.error=function(a,b,c){E.Fg&&a&&a.log(De,b,c)};E.hb=function(a,b,c){E.Fg&&a&&a.hb(b,c)};E.info=function(a,b,c){E.Fg&&a&&a.info(b,c)};E.ta=function(a,b){E.Fg&&a&&a.ta(b,void 0)};function Te(a,b){this.width=a;this.height=b}function Ue(a,b){return a==b?!0:a&&b?a.width==b.width&&a.height==b.height:!1}g=Te.prototype;g.clone=function(){return new Te(this.width,this.height)};g.aspectRatio=function(){return this.width/this.height};g.isEmpty=function(){return!(this.width*this.height)};g.ceil=function(){this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
g.round=function(){this.width=Math.round(this.width);this.height=Math.round(this.height);return this};g.scale=function(a,b){b=ua(b)?b:a;this.width*=a;this.height*=b;return this};function Ve(a){if(a instanceof Ve)this.j=a.toArray();else{var b;if(b=za(a))a:{for(var c=b=0;c<a.length;c++){if(!za(a[c])||0<b&&a[c].length!=b){b=!1;break a}for(var d=0;d<a[c].length;d++)if(!ua(a[c][d])){b=!1;break a}0==b&&(b=a[c].length)}b=0!=b}if(b)this.j=rb(a);else if(a instanceof Te){b=a.height;a=a.width;c=[];for(d=0;d<b;d++){c[d]=[];for(var e=0;e<a;e++)c[d][e]=0}this.j=c}else throw Error("Invalid argument(s) for Matrix contructor");}this.g=new Te(this.j[0].length,this.j.length)}
function gba(a,b){for(var c=0;c<a.g.height;c++)for(var d=0;d<a.g.width;d++)b.call(void 0,a.j[c][d],c,d,a)}function hba(a,b){var c=new Ve(a.g);gba(a,function(d,e,f){c.j[e][f]=b.call(void 0,d,e,f,a)});return c}Ve.prototype.add=function(a){if(!Ue(this.g,a.g))throw Error("Matrix summation is only supported on arrays of equal size");return hba(this,function(b,c,d){return b+a.j[c][d]})};
Ve.prototype.equals=function(a,b){if(this.g.width!=a.g.width||this.g.height!=a.g.height)return!1;b=b||0;for(var c=0;c<this.g.height;c++)for(var d=0;d<this.g.width;d++)if(!ne(this.j[c][d],a.j[c][d],b))return!1;return!0};Ve.prototype.toArray=function(){return this.j};var We,Xe,iba,jba,kba,lba=/^\s*(0x|#)?[0-9a-f]{2,6}\s*$/i,mba=/rgba\s*\(\s*\d+\s*,\s*\d+\s*,\s*\d+\s*(,\s*\d?(\.\d+)?)?\s*\)/i,nba=[{alpha:1,color:[255,136,0],ratio:0},{alpha:1,color:[255,255,0],ratio:43},{alpha:1,color:[0,255,0],ratio:85},{alpha:1,color:[0,255,255],ratio:128},{alpha:1,color:[0,0,255],ratio:170},{alpha:1,color:[136,0,255],ratio:213},{alpha:1,color:[255,0,255],ratio:255}],Ye="#000000 #000066 #0d0073 #110077 #190073 #1e0578 #1d0479 #24047a #26037b #2a037e #2d057f #32057f #340482 #380685 #3b0586 #3f0587 #420589 #45068c #4a068c #4d058f #500591 #530693 #560694 #5a0595 #5d0597 #62079a #640699 #660699 #680699 #6a0699 #6d0599 #6f0599 #710599 #730599 #760499 #780499 #7a0499 #7c0499 #7f0399 #810399 #830399 #850399 #880299 #8a0299 #8c0299 #8e0299 #910199 #930199 #950199 #970199 #9a0199 #9b0198 #9c0197 #9e0297 #9f0296 #a10395 #a20395 #a40394 #a50493 #a70493 #a80592 #aa0591 #ab0591 #ad0690 #ae0690 #b0078f #b1078e #b3078e #b4088d #b6088c #b7098c #b9098b #ba098a #bc0a8a #bd0a89 #bf0b89 #c00c86 #c10d83 #c20e81 #c3107e #c4117c #c51279 #c61477 #c71574 #c81672 #c9186f #ca196d #cb1a6a #cc1c68 #cd1d65 #ce1e63 #cf2060 #d0215e #d1225b #d22459 #d32556 #d42654 #d52851 #d6294f #d72a4c #d92c4a #d92d47 #da2f45 #da3042 #db3240 #dc333e #dc353b #dd3639 #de3836 #de3a34 #df3b32 #e03d2f #e03e2d #e1402a #e14128 #e24326 #e34423 #e34621 #e4481e #e5491c #e54b1a #e64c17 #e74e15 #e74f12 #e85110 #e9530e #e9540d #e9560c #ea570c #ea590b #eb5a0b #eb5c0a #eb5d0a #ec5f09 #ec6108 #ed6208 #ed6407 #ed6507 #ee6706 #ee6806 #ef6a05 #ef6b05 #ef6d04 #f06f03 #f07003 #f17202 #f17302 #f17501 #f27601 #f27800 #f37a00 #f37b00 #f37d00 #f47f00 #f48000 #f48200 #f58400 #f58600 #f58700 #f68900 #f68b00 #f68c00 #f78e00 #f79000 #f89200 #f89300 #f89500 #f99700 #f99800 #f99a00 #fa9c00 #fa9e00 #fa9f00 #fba100 #fba300 #fca500 #fca600 #fca700 #fca900 #fcaa00 #fcac00 #fcad00 #fcaf00 #fcb000 #fcb100 #fcb300 #fcb400 #fcb600 #fcb700 #fcb900 #fcba00 #fcbc00 #fcbd00 #fcbe00 #fcc000 #fcc100 #fcc300 #fcc400 #fcc600 #fcc700 #fcc900 #fcca05 #fccb0a #fccc0f #fccd14 #fcce19 #fccf1e #fcd023 #fcd128 #fcd22d #fcd333 #fcd438 #fcd53d #fcd742 #fcd847 #fcd94c #fcda51 #fddb56 #fddc5b #fddd60 #fdde66 #fddf6b #fde070 #fde175 #fde27a #fde47f #fde584 #fde689 #fde78e #fde893 #fde999 #fdea9e #fdeba3 #fdeca8 #feedad #feeeb2 #feefb7 #fef0bc #fef2c1 #fef3c6 #fef4cc #fef5d1 #fef6d6 #fef7db #fef8e0 #fef9e5 #fefaea #fefbef #fefcf4 #fefdf9 #ffffff".split(" "),
oba="#000000 #0000ff #0000ff #0000f6 #0000f9 #0000f5 #0000f7 #0000f8 #0000f5 #0000f6 #0000f5 #0000f6 #0000f7 #0000f5 #0000f6 #0000f5 #0000f5 #0000f6 #0000f5 #0000f6 #0000f5 #0000f5 #0000f6 #0000f4 #0000f5 #0000f6 #0006f6 #000cf6 #0013f6 #0019f6 #0020f6 #0026f6 #002cf6 #0033f6 #0039f6 #0040f6 #0046f6 #004cf6 #0053f6 #0059f6 #0060f6 #0066f6 #006cf6 #0073f6 #0079f6 #0080f6 #0086f6 #008cf6 #0093f6 #0099f6 #01a0f6 #00a3f5 #00a6f5 #00a9f4 #00acf4 #00aff4 #00b2f3 #00b5f3 #00b8f2 #00bbf2 #00bef2 #00c1f1 #00c4f1 #00c7f0 #00caf0 #00cdf0 #00d0ef #00d3ef #00d6ee #00d9ee #00dcee #00dfed #00e2ed #00e5ec #00e8ec #00ecec #00ece2 #00edd9 #00eecf #00efc6 #00efbc #00f0b3 #00f1a9 #00f2a0 #00f297 #00f38d #00f484 #00f57a #00f571 #00f667 #00f75e #00f854 #00f84b #00f942 #00fa38 #00fb2f #00fb25 #00fc1c #00fd12 #00fe09 #00ff00 #0aff00 #14ff00 #1eff00 #28ff00 #33ff00 #3dff00 #47ff00 #51ff00 #5bff00 #66ff00 #70ff00 #7aff00 #84ff00 #8eff00 #99ff00 #a3ff00 #adff00 #b7ff00 #c1ff00 #ccff00 #d6ff00 #e0ff00 #eaff00 #f4ff00 #ffff00 #fefc00 #fdf900 #fcf700 #fbf400 #faf200 #f9ef00 #f8ed00 #f7ea00 #f6e800 #f5e500 #f4e300 #f3e000 #f2de00 #f1db00 #f0d900 #efd600 #eed400 #edd100 #eccf00 #ebcc00 #eaca00 #e9c700 #e8c500 #e7c200 #e7c000 #e7be00 #e8bc00 #e9ba00 #eab800 #ebb600 #ecb400 #edb200 #eeb000 #efae00 #f0ac00 #f1aa00 #f2a800 #f3a700 #f4a500 #f5a300 #f6a100 #f79f00 #f89d00 #f99b00 #fa9900 #fb9700 #fc9500 #fd9300 #fe9100 #ff9000 #ff8a00 #ff8400 #ff7e00 #ff7800 #ff7300 #ff6d00 #ff6700 #ff6100 #ff5c00 #ff5600 #ff5000 #ff4a00 #ff4500 #ff3f00 #ff3900 #ff3300 #ff2e00 #ff2800 #ff2200 #ff1c00 #ff1700 #ff1100 #ff0b00 #ff0500 #ff0000 #ff0505 #ff0a0a #ff0f0f #ff1414 #ff1919 #ff1e1e #ff2323 #ff2828 #ff2d2d #ff3333 #ff3838 #ff3d3d #ff4242 #ff4747 #ff4c4c #ff5151 #ff5656 #ff5b5b #ff6060 #ff6666 #ff6b6b #ff7070 #ff7575 #ff7a7a #ff7f7f #ff8484 #ff8989 #ff8e8e #ff9393 #ff9999 #ff9e9e #ffa3a3 #ffa8a8 #ffadad #ffb2b2 #ffb7b7 #ffbcbc #ffc1c1 #ffc6c6 #ffcccc #ffd1d1 #ffd6d6 #ffdbdb #ffe0e0 #ffe5e5 #ffeaea #ffefef #fff4f4 #fff9f9 #ffffff".split(" ");
new Ve([[.299,.587,.114],[.595716,-.274453,-.321263],[.211456,-.522591,.311135]]);new Ve([[1,.9563,.621],[1,-.2721,-.6474],[1,-1.107,1.7046]]);function pba(a){var b=qba||nba;if(a<=b[0].ratio)return b[0].color;if(a>=b[b.length-1].ratio)return b[b.length-1].color;for(var c=0,d=b.length-1;c<d;c++)if(a>=b[c].ratio&&a<b[c+1].ratio){d=b[c].color;var e=b[c+1].color;a-=b[c].ratio;b=b[c+1].ratio-b[c].ratio;return[Ze(d[0],e[0],a,b),Ze(d[1],e[1],a,b),Ze(d[2],e[2],a,b)]}return[0,0,0]}
function $e(a,b){for(var c=[],d=me(30,0,360),e=me(330,d,360)-d,f=0,h=0;h<a;h++){var k=Math.round(h/a*e)+d,l=.5;b&&(70<=k&&50>=f?k=60:100<=k&&160>=k&&(l+=(k-130)/240));c.push(cba([k,1,l]));f=k}return c}function Ze(a,b,c,d){return a<b?Math.floor(c/d*(b-a)+a):Math.floor((a-b)*(1-c/d)+b)}
function af(a){var b=bf,c=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0];if(0===a[0]&&0===a[1]&&0===a[2])return c;var d=Math.max(b[0],b[1],b[2]);b=d==b[0]?0:d==b[1]?1:2;var e=Math.max(a[0],a[1],a[2]);a=[a[0]/e,a[1]/e,a[2]/e];for(var f=0;3>f;f++)c[5*f+b]=a[f]*e/d;return c}function cf(a,b){b=b||"";a=a.trim().replace(/^(0x|#)/,"");if(!a||isNaN(Number("0x"+a)))return b+"ffffff";for(;6>a.length;)a="0"+a;return b+a}function df(a){return"string"==typeof a&&lba.test(a)||mba.test(a)}
function ef(a){return re("string"===typeof a?ff(a):a)}function gf(a){return ef(a).toUpperCase().replace(/^#/,"0x")}function ff(a){if("string"==typeof a){var b=a.indexOf(","),c;if(-1==b)a=a.replace(/0x/ig,""),a="#"+a.replace(/[^a-f0-9]/ig,""),a=se(a);else{a=a.replace(/[^.,0-9]/g,"");var d=a.split(",");a=[];b=0;for(c=d.length;b<c;b++)a[b]=3==b?parseFloat(d[b]):parseInt(d[b],10)}}a&&3==a.length&&a.push(1);return a}function hf(a,b){if(a==b)return!0;q(a)||(a=ff(a));q(b)||(b=ff(b));return yb(a,b)};function F(a,b){if(null!=a){var c=ya(a);if("function"===c){var d;a.prototype.hasOwnProperty("os_impls")?d=a.prototype.os_impls:d=a.prototype.os_impls=[];d.push(b);return!0}if("object"===c){a:{for(a=Object.getPrototypeOf(a);a;){if(a.os_impls&&a.os_impls.length&&0<=a.os_impls.indexOf(b)){b=!0;break a}a=Object.getPrototypeOf(a)}b=!1}return b}}return!1};var jf,kf,lf,rba={};var mf,nf,of="function"===typeof Object.assign?Object.assign:function(a,b){if(void 0===a||null===a)throw new TypeError("Cannot convert undefined or null to object");for(var c=Object(a),d=1,e=arguments.length;d<e;++d){var f=arguments[d];if(void 0!==f&&null!==f)for(var h in f)f.hasOwnProperty(h)&&(c[h]=f[h])}return c};function pf(a){for(var b in a)delete a[b]}function qf(a){var b=[],c;for(c in a)b.push(a[c]);return b}function rf(a){for(var b in a)return!1;return!b};function sba(a){function b(b){var c=a.listener,e=a.bindTo||a.target;a.callOnce&&sf(a);return c.call(e,b)}return a.boundListener=b}function tf(a,b,c,d){for(var e,f=0,h=a.length;f<h;++f)if(e=a[f],e.listener===b&&e.bindTo===c)return d&&(e.deleteIndex=f),e}function uf(a,b){return(a=a.Rm)?a[b]:void 0}function vf(a){var b=a.Rm;b||(b=a.Rm={});return b}
function wf(a,b){var c=uf(a,b);if(c){for(var d=0,e=c.length;d<e;++d)a.removeEventListener(b,c[d].boundListener),pf(c[d]);c.length=0;if(c=a.Rm)delete c[b],0===Object.keys(c).length&&delete a.Rm}}function H(a,b,c,d,e){var f=vf(a),h=f[b];h||(h=f[b]=[]);(f=tf(h,c,d,!1))?e||(f.callOnce=!1):(f={bindTo:d,callOnce:!!e,listener:c,target:a,type:b},a.addEventListener(b,sba(f)),h.push(f));return f}function xf(a,b,c,d){return H(a,b,c,d,!0)}function yf(a,b,c,d){(a=uf(a,b))&&(c=tf(a,c,d,!0))&&sf(c)}
function sf(a){if(a&&a.target){a.target.removeEventListener(a.type,a.boundListener);var b=uf(a.target,a.type);if(b){var c="deleteIndex"in a?a.deleteIndex:b.indexOf(a);-1!==c&&b.splice(c,1);0===b.length&&wf(a.target,a.type)}pf(a)}}function zf(a){var b=vf(a),c;for(c in b)wf(a,c)};function I(a,b){a.prototype=Object.create(b.prototype);a.prototype.constructor=a}function Af(){}function J(a){return a.bH||(a.bH=++tba)}var tba=0;function Bf(){}Bf.prototype.Js=!1;Bf.prototype.dispose=function(){this.Js||(this.Js=!0,this.J())};Bf.prototype.J=Af;function Cf(a){this.type=a;this.target=null}Cf.prototype.preventDefault=Cf.prototype.stopPropagation=function(){this.Vz=!0};function uba(a){a.stopPropagation()};function Df(){this.cl={};this.Ji={};this.Wh={}}I(Df,Bf);g=Df.prototype;g.addEventListener=function(a,b){var c=this.Wh[a];c||(c=this.Wh[a]=[]);-1===c.indexOf(b)&&c.push(b)};
g.dispatchEvent=function(a){var b="string"===typeof a?new Cf(a):a;a=b.type;b.target=this;var c=this.Wh[a];if(c){a in this.Ji||(this.Ji[a]=0,this.cl[a]=0);++this.Ji[a];for(var d=0,e=c.length;d<e;++d)if(!1===c[d].call(this,b)||b.Vz){var f=!1;break}--this.Ji[a];if(0===this.Ji[a]){b=this.cl[a];for(delete this.cl[a];b--;)this.removeEventListener(a,Af);delete this.Ji[a]}return f}};g.J=function(){zf(this)};g.be=function(a){return a?a in this.Wh:0<Object.keys(this.Wh).length};
g.removeEventListener=function(a,b){var c=this.Wh[a];c&&(b=c.indexOf(b),a in this.cl?(c[b]=Af,++this.cl[a]):(c.splice(b,1),0===c.length&&delete this.Wh[a]))};function Ef(){Df.call(this);this.Tb=0}I(Ef,Df);function Ff(a){if(Array.isArray(a))for(var b=0,c=a.length;b<c;++b)sf(a[b]);else sf(a)}Ef.prototype.ia=function(){++this.Tb;this.dispatchEvent("change")};Ef.prototype.on=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=H(this,a[f],b,c);return e}return H(this,a,b,c)};Ef.prototype.once=function(a,b,c){if(Array.isArray(a)){for(var d=a.length,e=Array(d),f=0;f<d;++f)e[f]=xf(this,a[f],b,c);return e}return xf(this,a,b,c)};
function Gf(a,b,c,d){if(Array.isArray(b))for(var e=0,f=b.length;e<f;++e)yf(a,b[e],c,d);else yf(a,b,c,d)};function Hf(a){Ef.call(this);J(this);this.la={};void 0!==a&&this.qc(a)}I(Hf,Ef);var If={};function Jf(a){return If.hasOwnProperty(a)?If[a]:If[a]="change:"+a}g=Hf.prototype;g.get=function(a){var b;this.la.hasOwnProperty(a)&&(b=this.la[a]);return b};g.Xb=function(){return Object.keys(this.la)};g.Yb=function(){return of({},this.la)};g.Hq=function(a,b){var c=Jf(a);this.dispatchEvent(new Kf(c,a,b));this.dispatchEvent(new Kf("propertychange",a,b))};
g.set=function(a,b,c){c?this.la[a]=b:(c=this.la[a],this.la[a]=b,c!==b&&this.Hq(a,c))};g.qc=function(a,b){for(var c in a)this.set(c,a[c],b)};g.kf=function(a,b){if(a in this.la){var c=this.la[a];delete this.la[a];b||this.Hq(a,c)}};function Kf(a,b,c){Cf.call(this,a);this.key=b;this.oldValue=c}I(Kf,Cf);function Lf(a){this.message="Assertion failed. See https://openlayers.org/en/latest/doc/errors/#"+a+" for details.";this.code=a;this.name="AssertionError"}I(Lf,Error);function Mf(a,b){if(!a)throw new Lf(b);};function Nf(a,b,c){return Math.min(Math.max(a,b),c)}var vba=function(){var a;"cosh"in Math?a=Math.cosh:a=function(a){a=Math.exp(a);return(a+1/a)/2};return a}();function wba(a){Mf(0<a,29);return Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function Of(a){return a*Math.PI/180}function Pf(a,b){a%=b;return 0>a*b?a+b:a};function Qf(a){Hf.call(this);var b=of({},a);b.opacity=void 0!==a.opacity?a.opacity:1;b.visible=void 0!==a.visible?a.visible:!0;b.zIndex=void 0!==a.zIndex?a.zIndex:0;b.maxResolution=void 0!==a.maxResolution?a.maxResolution:Infinity;b.minResolution=void 0!==a.minResolution?a.minResolution:0;this.qc(b);this.xa={layer:this,managed:!0}}I(Qf,Hf);g=Qf.prototype;g.T=function(){return this.type};
function Rf(a){a.xa.opacity=Nf(a.Nb(),0,1);a.xa.sourceState=a.Lp();a.xa.visible=a.yb();a.xa.extent=a.Y();a.xa.zIndex=a.Ac();a.xa.maxResolution=a.ne();a.xa.minResolution=Math.max(a.oe(),0);return a.xa}g.Y=function(){return this.get("extent")};g.ne=function(){return this.get("maxResolution")};g.oe=function(){return this.get("minResolution")};g.Nb=function(){return this.get("opacity")};g.yb=function(){return this.get("visible")};g.Ac=function(){return this.get("zIndex")};
g.Cc=function(a){this.set("extent",a)};g.Kj=function(a){this.set("maxResolution",a)};g.Lj=function(a){this.set("minResolution",a)};g.xd=function(a){this.set("opacity",a)};g.dc=function(a){this.set("visible",a)};g.Of=function(a){this.set("zIndex",a)};function Sf(a){var b=of({},a);delete b.source;Qf.call(this,b);this.po=this.fh=this.eh=null;a.map&&this.setMap(a.map);H(this,Jf("source"),this.zF,this);this.Cb(a.source?a.source:null)}I(Sf,Qf);function Tf(a,b){return a.visible&&b>=a.minResolution&&b<a.maxResolution}g=Sf.prototype;g.Ip=function(a){a=a?a:[];a.push(Rf(this));return a};g.N=function(){return this.get("source")||null};g.Lp=function(){var a=this.N();return a?a.getState():"undefined"};g.yF=function(){this.ia()};
g.zF=function(){this.po&&(sf(this.po),this.po=null);var a=this.N();a&&(this.po=H(a,"change",this.yF,this));this.ia()};g.setMap=function(a){this.eh&&(sf(this.eh),this.eh=null);a||this.ia();this.fh&&(sf(this.fh),this.fh=null);a&&(this.eh=H(a,"precompose",function(a){var b=Rf(this);b.managed=!1;b.zIndex=Infinity;a.frameState.layerStatesArray.push(b);a.frameState.layerStates[J(this)]=b},this),this.fh=H(this,"change",a.render,a),this.ia())};g.Cb=function(a){this.set("source",a)};function Uf(){this.g={};this.j={}}xa(Uf);var Vf=E.V("os.layer.config.LayerConfigManager");function Wf(a,b){var c={};b=b.toLowerCase();b in a.g&&(c=a.g[b]());return c}function Xf(a,b){var c=null;b=b.toLowerCase();b in a.j&&(c=new a.j[b]);return c}function Yf(a,b,c){b=b.toLowerCase();b in a.j&&E.hb(Vf,"Layer config is being overridden for: "+b);a.j[b]=c};function K(a,b,c,d){A.call(this,"propertychange",d);this.j=void 0!==a?a:null;this.o=void 0!==b?b:null;this.u=void 0!==c?c:null}w(K,A);K.prototype.G=function(){return this.j};function Zf(){C.call(this);this.j=crossfilter();this.dimensions={};this.filterFunction=null;this.l={}}w(Zf,C);var $f=E.V("os.data.xf.DataModel");g=Zf.prototype;g.add=function(a){if(!this.Xa()){var b=Ia();q(a)||(a=[a]);this.j.add(a);E.ta($f,"Added "+a.length+" items to the model in "+(Ia()-b)+"ms.")}};g.clear=function(){if(!this.Xa()){for(var a in this.dimensions)this.dimensions[a].filterAll();this.j.remove();for(a in this.l)void 0!=this.dimensions[a]&&void 0!=this.l[a]&&this.dimensions[a].filter(this.l[a])}};
g.J=function(){qc(this.l);this.clear();for(var a in this.dimensions)this.dimensions[a].dispose(),delete this.dimensions[a];this.j=null;Zf.C.J.call(this)};g.yr=function(a,b,c){this.Xa()||(this.kl(a),this.dimensions[a]=this.j.dimension(b,c),this.dispatchEvent(new K("xf:dimension",a)))};g.hq=function(a){return null!=this.dimensions&&a in this.dimensions};
g.kl=function(a){!this.Xa()&&a in this.dimensions&&(this.dimensions[a].dispose(),delete this.dimensions[a],delete this.l[a],this.dispatchEvent(new K("xf:dimension",a)))};g.Tk=function(a,b){this.Xa()||(a in this.dimensions&&this.dimensions[a].filter(b),void 0!=b?this.l[a]=b:delete this.l[a])};g.Zp=function(a,b,c,d,e){var f;this.Xa()||(a=this.dimensions[a])&&(f=ag(a,b,c,d,e));return f||[]};function ag(a,b,c,d,e){a=a.group(b);a.reduce(c,d,e);c=a.top(Infinity)||[];a.dispose();return c}
g.pe=function(a,b,c){if(!this.Xa()&&(b=b&&this.hq(b)?this.dimensions[b]:hc(this.dimensions),a=a||Infinity,b))return a=c?b.bottom(a):b.top(a),this.filterFunction&&(a=ab(a,this.filterFunction,this)),a;E.error($f,"There are no dimensions for the model to filter on!");return[]};g.isEmpty=function(){return!this.j||0>=this.j.size()};var bg={PB:["BC","AD"],OB:["Before Christ","Anno Domini"],YB:"JFMAMJJASOND".split(""),lC:"JFMAMJJASOND".split(""),SB:"January February March April May June July August September October November December".split(" "),kC:"January February March April May June July August September October November December".split(" "),gC:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),nC:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),wC:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),
pC:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),iC:"Sun Mon Tue Wed Thu Fri Sat".split(" "),oC:"Sun Mon Tue Wed Thu Fri Sat".split(" "),VQ:"SMTWTFS".split(""),mC:"SMTWTFS".split(""),hC:["Q1","Q2","Q3","Q4"],cC:["1st quarter","2nd quarter","3rd quarter","4th quarter"],FB:["AM","PM"],vP:["EEEE, MMMM d, y","MMMM d, y","MMM d, y","M/d/yy"],nS:["h:mm:ss a zzzz","h:mm:ss a z","h:mm:ss a","h:mm a"],wP:["{1} 'at' {0}","{1} 'at' {0}","{1}, {0}","{1}, {0}"],Jt:6,IS:[5,6],Kt:5},cg=bg;
cg=bg;function dg(a,b,c,d,e,f){ta(a)?(this.j=a==xba?b:0,this.g=a==yba?b:0,this.l=a==zba?b:0,this.o=a==Aba?b:0,this.u=a==Bba?b:0,this.A=a==Cba?b:0):(this.j=a||0,this.g=b||0,this.l=c||0,this.o=d||0,this.u=e||0,this.A=f||0)}dg.prototype.equals=function(a){return a.j==this.j&&a.g==this.g&&a.l==this.l&&a.o==this.o&&a.u==this.u&&a.A==this.A};dg.prototype.clone=function(){return new dg(this.j,this.g,this.l,this.o,this.u,this.A)};var xba="y",yba="m",zba="d",Aba="h",Bba="n",Cba="s";
dg.prototype.add=function(a){this.j+=a.j;this.g+=a.g;this.l+=a.l;this.o+=a.o;this.u+=a.u;this.A+=a.A};function eg(a,b,c){ua(a)?(this.g=fg(a,b||0,c||1),gg(this,c||1)):Ba(a)?(this.g=fg(a.getFullYear(),a.getMonth(),a.getDate()),gg(this,a.getDate())):(this.g=new Date(Ia()),a=this.g.getDate(),this.g.setHours(0),this.g.setMinutes(0),this.g.setSeconds(0),this.g.setMilliseconds(0),gg(this,a))}function fg(a,b,c){b=new Date(a,b,c);0<=a&&100>a&&b.setFullYear(b.getFullYear()-1900);return b}g=eg.prototype;
g.Ni=cg.Jt;g.Oi=cg.Kt;g.clone=function(){var a=new eg(this.g);a.Ni=this.Ni;a.Oi=this.Oi;return a};g.getFullYear=function(){return this.g.getFullYear()};g.getMonth=function(){return this.g.getMonth()};g.getDate=function(){return this.g.getDate()};g.getTime=function(){return this.g.getTime()};g.getDay=function(){return this.g.getDay()};g.getUTCFullYear=function(){return this.g.getUTCFullYear()};g.getUTCMonth=function(){return this.g.getUTCMonth()};g.getUTCDate=function(){return this.g.getUTCDate()};
g.gv=function(){return this.g.getDay()};g.getUTCHours=function(){return this.g.getUTCHours()};g.getUTCMinutes=function(){return this.g.getUTCMinutes()};g.getTimezoneOffset=function(){return this.g.getTimezoneOffset()};g.set=function(a){this.g=new Date(a.getFullYear(),a.getMonth(),a.getDate())};g.setFullYear=function(a){this.g.setFullYear(a)};g.setMonth=function(a){this.g.setMonth(a)};g.setDate=function(a){this.g.setDate(a)};g.PE=function(a){this.g.setUTCFullYear(a)};g.QE=function(a){this.g.setUTCMonth(a)};
g.OE=function(a){this.g.setUTCDate(a)};
g.add=function(a){if(a.j||a.g){var b=this.getMonth()+a.g+12*a.j,c=this.getFullYear()+Math.floor(b/12);b%=12;0>b&&(b+=12);a:{switch(b){case 1:var d=0!=c%4||0==c%100&&0!=c%400?28:29;break a;case 5:case 8:case 10:case 3:d=30;break a}d=31}d=Math.min(d,this.getDate());this.setDate(1);this.setFullYear(c);this.setMonth(b);this.setDate(d)}a.l&&(b=new Date(this.getFullYear(),this.getMonth(),this.getDate(),12),a=new Date(b.getTime()+864E5*a.l),this.setDate(1),this.setFullYear(a.getFullYear()),this.setMonth(a.getMonth()),
this.setDate(a.getDate()),gg(this,a.getDate()))};g.Am=function(a){return[this.getFullYear(),Sb(this.getMonth()+1,2),Sb(this.getDate(),2)].join(a?"-":"")+""};g.xi=function(a,b){return[this.getUTCFullYear(),Sb(this.getUTCMonth()+1,2),Sb(this.getUTCDate(),2)].join(a?"-":"")+(b?"Z":"")};g.equals=function(a){return!(!a||this.getFullYear()!=a.getFullYear()||this.getMonth()!=a.getMonth()||this.getDate()!=a.getDate())};g.toString=function(){return this.Am()};
function gg(a,b){a.getDate()!=b&&(b=a.getDate()<b?1:-1,a.g.setUTCHours(a.g.getUTCHours()+b))}g.valueOf=function(){return this.g.valueOf()};function hg(a,b,c,d,e,f,h){this.g=ua(a)?new Date(a,b||0,c||1,d||0,e||0,f||0,h||0):new Date(a&&a.getTime?a.getTime():Ia())}w(hg,eg);g=hg.prototype;g.getHours=function(){return this.g.getHours()};g.getMinutes=function(){return this.g.getMinutes()};g.getSeconds=function(){return this.g.getSeconds()};g.gv=function(){return this.g.getUTCDay()};g.getUTCHours=function(){return this.g.getUTCHours()};
g.getUTCMinutes=function(){return this.g.getUTCMinutes()};g.Sp=function(){return this.g.getUTCSeconds()};g.add=function(a){eg.prototype.add.call(this,a);a.o&&this.g.setUTCHours(this.g.getUTCHours()+a.o);a.u&&this.g.setUTCMinutes(this.g.getUTCMinutes()+a.u);a.A&&this.g.setUTCSeconds(this.g.getUTCSeconds()+a.A)};
g.Am=function(a){var b=eg.prototype.Am.call(this,a);return a?b+" "+Sb(this.getHours(),2)+":"+Sb(this.getMinutes(),2)+":"+Sb(this.getSeconds(),2)+"":b+"T"+Sb(this.getHours(),2)+Sb(this.getMinutes(),2)+Sb(this.getSeconds(),2)+""};g.xi=function(a,b){var c=eg.prototype.xi.call(this,a);return a?c+" "+Sb(this.getUTCHours(),2)+":"+Sb(this.getUTCMinutes(),2)+":"+Sb(this.Sp(),2)+(b?"Z":""):c+"T"+Sb(this.getUTCHours(),2)+Sb(this.getUTCMinutes(),2)+Sb(this.Sp(),2)+(b?"Z":"")};
g.equals=function(a){return this.getTime()==a.getTime()};g.toString=function(){return this.Am()};g.clone=function(){var a=new hg(this.g);a.Ni=this.Ni;a.Oi=this.Oi;return a};function ig(a,b,c,d,e,f,h){a=ua(a)?Date.UTC(a,b||0,c||1,d||0,e||0,f||0,h||0):a?a.getTime():Ia();this.g=new Date(a)}w(ig,hg);g=ig.prototype;g.clone=function(){var a=new ig(this.g);a.Ni=this.Ni;a.Oi=this.Oi;return a};g.add=function(a){(a.j||a.g)&&eg.prototype.add.call(this,new dg(a.j,a.g));a=1E3*(a.A+60*(a.u+60*(a.o+24*a.l)));this.g=new Date(this.g.getTime()+a)};g.getTimezoneOffset=function(){return 0};g.getFullYear=hg.prototype.getUTCFullYear;g.getMonth=hg.prototype.getUTCMonth;g.getDate=hg.prototype.getUTCDate;
g.getHours=hg.prototype.getUTCHours;g.getMinutes=hg.prototype.getUTCMinutes;g.getSeconds=hg.prototype.Sp;g.getDay=hg.prototype.gv;g.setFullYear=hg.prototype.PE;g.setMonth=hg.prototype.QE;g.setDate=hg.prototype.OE;var jg={};function kg(a,b){if(null==window||null==a)return!1;try{a:{try{var c=window.opener||window.parent;if(c&&c.document){var d=c;break a}}catch(f){}d=window}if(b&&jg[b]){if(d===window)return a instanceof jg[b];if(d){var e=d.os;return a instanceof jg[b]||null!=e&&null!=e.instanceOf&&e.instanceOf(a,b)}}}catch(f){}return!1}Ja("os.instanceOf",kg);function lg(a){this.start=0;void 0!=a&&this.setStart(a)}F(lg,"os.time.ITime");jg["os.time.TimeInstant"]=lg;var mg=moment.utc("1753-01-01T00:00:00Z").valueOf(),ng=moment.utc("9999-12-31T23:59:59Z").valueOf();g=lg.prototype;g.Sa=function(){return this.start};g.setStart=function(a){this.start=og(a)};g.Ya=function(){return this.start};g.un=function(a){this.setStart(a)};g.Rk=function(a){if(a){if(!this.equals(a)){if(this.start<a.Sa())return-1;if(this.start>=a.Ya()||this.start!=a.Sa())return 1}return 0}return 1};
g.equals=function(a){return null!=a&&a.Sa()==this.Sa()&&a.Ya()==this.Ya()};g.toISOString=function(){return isNaN(this.start)?"Unbounded":pg(this.start)};g.toString=function(){return this.toISOString()};function og(a){var b=0;if(null!=a)switch(typeof a){case "number":b=a;break;case "string":b=(new Date(a)).getTime();break;case "object":"function"==typeof a.getFullYear?b=a.getTime():"function"==typeof a.Sa&&(b=a.Sa())}return isNaN(b)?0:Math.min(Math.max(b,mg),ng)};function qg(a,b){lg.call(this,a);this.g=0;void 0!=b&&this.un(b)}w(qg,lg);jg["os.time.TimeRange"]=qg;g=qg.prototype;g.Sa=function(){return this.start<this.g?this.start:this.g};g.Ya=function(){return this.g>this.start?this.g:this.start};g.un=function(a){this.g=og(a)};
g.Rk=function(a){if(a){if(!this.equals(a))if(a instanceof qg){if(a.Ya()<=this.Sa())return 1;if(a.Sa()>=this.Ya())return-1;if(a.Sa()<this.Sa())return 1;if(a.Sa()>this.Sa())return-1;if(a.Ya()<this.Ya())return 1;if(a.Ya()>this.Ya())return-1}else return-1*a.Rk(this);return 0}return 1};g.toISOString=function(a){var b=new ig,c=[];c.push(rg(this,b));c.push(a||" to ");c.push(sg(this,b));return c.join("")};function rg(a,b){b=b||new ig;a=a.Sa();return isNaN(a)||a===mg?"Unbounded":pg(a,b)}
function sg(a,b){b=b||new ig;a=a.Ya();return isNaN(a)||a===ng?"Unbounded":pg(a,b)};function tg(a,b){Zf.call(this);this.P=a;this.I=this.j.dimension(this.SA.bind(this,this.P));this.K=this.j.dimension(this.Hu.bind(this,this.P));this.A=crossfilter();this.U=crossfilter();this.u=(this.O=b||null)?this.U.dimension(this.SA.bind(this,this.O)):null;this.G=this.O?this.U.dimension(this.Hu.bind(this,this.O)):null;this.g={};this.o=this.A.dimension(Xa);this.aa=this.B=null}w(tg,Zf);var Dba=E.V("os.time.xf.TimeModel"),ug=new qg(NaN,NaN);g=tg.prototype;
g.add=function(a){if(!this.Xa()){var b=Ia();q(a)||(a=[a]);for(var c=[],d=[],e=0,f=a.length;e<f;e++){var h=a[e],k=this.P(h);k&&F(k,"os.time.ITime")?c.push(h):d.push(h)}this.j.add(c);this.A.add(d);this.O&&!vg.s().u.isEmpty()&&this.U.add(d);wg(this);E.ta(Dba,"Added "+a.length+" items to the model in "+(Ia()-b)+"ms.")}};
g.clear=function(){if(!this.Xa()){this.I.filterAll();this.K.filterAll();this.u&&this.u.filterAll();this.G&&this.G.filterAll();for(var a in this.g)this.g[a].filterAll();tg.C.clear.call(this);this.A.remove();this.U.remove();for(a in this.l)void 0!=this.l[a]&&(void 0!=this.dimensions[a]&&this.dimensions[a].filter(this.l[a]),void 0!=this.g[a]&&this.g[a].filter(this.l[a]));wg(this)}};
g.J=function(){tg.C.J.call(this);this.I.dispose();this.I=null;this.K.dispose();this.K=null;this.u&&(this.u.dispose(),this.u=null);this.G&&(this.G.dispose(),this.G=null);for(var a in this.g)this.g[a].dispose(),delete this.g[a];this.o&&(this.o.dispose(),this.o=null);this.A=null};g.yr=function(a,b,c){this.Xa()||(this.kl(a,!0),this.o&&(this.o.dispose(),this.o=null),this.dimensions[a]=this.j.dimension(b,c),this.g[a]=this.A.dimension(b,c),this.dispatchEvent(new K("xf:dimension",a)))};
g.Zp=function(a,b,c,d,e){if(!this.Xa()){var f=tg.C.Zp.call(this,a,b,c,d,e);if(a=this.g[a])for(b=ag(a,b,c,d,e),e=0,a=b.length;e<a;e++){var h=b[e],k=eb(f,function(a){return a.key==h.key});if(k){k=k.value;for(var l=h.value,m=l.getItems().slice(),n=0;n<m.length;n++){var p=m[n];d(l,p);c(k,p)}}else f.push(h)}}return f||[]};g.hq=function(a){return tg.C.hq.call(this,a)||null!=this.g&&a in this.g};
g.kl=function(a,b){this.Xa()||(a in this.g&&(this.g[a].dispose(),delete this.g[a]),b||!pc(this.g)||this.o||(this.o=this.A.dimension(Xa)),tg.C.kl.call(this,a))};g.Tk=function(a,b){this.Xa()||(a in this.g&&this.g[a].filter(b),tg.C.Tk.call(this,a,b))};function wg(a){a.B=null;if(!a.Xa()&&a.j&&0<a.j.size()){a.I.filterAll();a.K.filterAll();var b=a.I.bottom(1);b=0<b.length?a.P(b[0]).Sa():NaN;var c=a.K.top(1);c=0<c.length?a.P(c[0]).Ya():NaN;a.B=new qg(b,c);a.aa&&xg(a,a.aa,!1,!1)}}
function xg(a,b,c,d){if(!a.Xa()){var e=b.Sa(),f=b.Ya();e==f&&f++;a.I.filter([-Infinity,f]);a.K.filter([e,Infinity]);var h=a.I.top(Infinity);c&&(h=a.o?h.concat(a.o.top(Infinity)):h.concat(hc(a.g).top(Infinity)));!c&&d&&a.G&&a.u&&(a.u.filter([-Infinity,f]),a.G.filter([e,Infinity]),h=h.concat(a.u.top(Infinity)));a.filterFunction&&(h=ab(h,a.filterFunction,a));a.aa=b}return h||[]}g.isEmpty=function(){return(!this.j||0>=this.j.size())&&(!this.A||0>=this.A.size())};
g.SA=function(a,b){var c=mg;(a=a(b))&&(c=a.Sa());return c};g.Hu=function(a,b){var c=ng;(a=a(b))&&(c=a.Ya());return c};var yg=E.V("os.layer");function zg(a){var b=a.type;if(!b)return E.error(yg,"Layer type missing!"),null;var c=Xf(Uf.s(),b);if(!c)return E.error(yg,"Unknown layer config type: "+b),null;c=c.Me(a);if(!c)return E.error(yg,"Failed creating layer of type: "+b),null;c.ql(a);return c}function Ag(a){var b=0,c=a.Nb()||0,d=a.hk(),e=new je(250);e.H("tick",function(){if(5<b)a.yg(d),a.xd(c),e.dispose();else{var f=b%2?1:0;1==f?a.yg(!0):a.yg(!1);a.xd(f);b++}});e.start()}
function Bg(a){var b="";a=L.s().W(a);F(a,"os.layer.ILayer")&&(b=a.S())&&(a=a.cg())&&(b+=" "+a);return b}function Cg(a){for(var b=a=a.replace(/\s+\[\d+]$/,""),c=1;Eba(b);)b=a+" ["+c++ +"]";return b}function Eba(a){return Dg(L.s()).some(function(b){try{return b.S()==a}catch(c){}return!1})}function Eg(a){return a.Pg()}function Fg(a){return a.Qg()}function Fba(a){return a.sm()}function Hg(a){return a.Nb()}function Ig(a){return a.Tg()}function Jg(a){return a.D()};function Kg(){x.call(this);this.id="";this.error=null}w(Kg,x);Kg.prototype.D=function(){return this.id};Kg.prototype.getError=function(){return this.error};function Lg(a){if(a.Mc&&"function"==typeof a.Mc)return a.Mc();if(ta(a))return a.split("");if(za(a)){for(var b=[],c=a.length,d=0;d<c;d++)b.push(a[d]);return b}return ic(a)}function Mg(a){if(a.Xb&&"function"==typeof a.Xb)return a.Xb();if(!a.Mc||"function"!=typeof a.Mc){if(za(a)||ta(a)){var b=[];a=a.length;for(var c=0;c<a;c++)b.push(c);return b}return jc(a)}}
function Ng(a,b,c){if(a.forEach&&"function"==typeof a.forEach)a.forEach(b,c);else if(za(a)||ta(a))$a(a,b,c);else for(var d=Mg(a),e=Lg(a),f=e.length,h=0;h<f;h++)b.call(c,e[h],d&&d[h],a)};var Og="StopIteration"in ra?ra.StopIteration:{message:"StopIteration",stack:""};function Pg(){}Pg.prototype.next=function(){throw Og;};Pg.prototype.we=function(){return this};function Qg(a){if(a instanceof Pg)return a;if("function"==typeof a.we)return a.we(!1);if(za(a)){var b=0,c=new Pg;c.next=function(){for(;;){if(b>=a.length)throw Og;if(b in a)return a[b++];b++}};return c}throw Error("Not implemented");}
function Rg(a,b){if(za(a))try{$a(a,b,void 0)}catch(c){if(c!==Og)throw c;}else{a=Qg(a);try{for(;;)b.call(void 0,a.next(),void 0,a)}catch(c){if(c!==Og)throw c;}}}function Gba(a,b){var c=Qg(a);a=new Pg;a.next=function(){for(;;){var a=c.next();if(b.call(void 0,a,void 0,c))return a}};return a}function Sg(a){if(za(a))return rb(a);a=Qg(a);var b=[];Rg(a,function(a){b.push(a)});return b}function Hba(a){try{return Qg(a).next()}catch(b){if(b!=Og)throw b;return null}};function Tg(a,b){this.ha={};this.g=[];this.l=this.j=0;var c=arguments.length;if(1<c){if(c%2)throw Error("Uneven number of arguments");for(var d=0;d<c;d+=2)this.set(arguments[d],arguments[d+1])}else if(a){a instanceof Tg?(c=a.Xb(),d=a.Mc()):(c=jc(a),d=ic(a));for(var e=0;e<c.length;e++)this.set(c[e],d[e])}}g=Tg.prototype;g.Mc=function(){Ug(this);for(var a=[],b=0;b<this.g.length;b++)a.push(this.ha[this.g[b]]);return a};g.Xb=function(){Ug(this);return this.g.concat()};
g.equals=function(a,b){if(this===a)return!0;if(this.j!=a.j)return!1;b=b||Iba;Ug(this);for(var c,d=0;c=this.g[d];d++)if(!b(this.get(c),a.get(c)))return!1;return!0};function Iba(a,b){return a===b}g.isEmpty=function(){return 0==this.j};g.clear=function(){this.ha={};this.l=this.j=this.g.length=0};g.remove=function(a){return Vg(this.ha,a)?(delete this.ha[a],this.j--,this.l++,this.g.length>2*this.j&&Ug(this),!0):!1};
function Ug(a){if(a.j!=a.g.length){for(var b=0,c=0;b<a.g.length;){var d=a.g[b];Vg(a.ha,d)&&(a.g[c++]=d);b++}a.g.length=c}if(a.j!=a.g.length){var e={};for(c=b=0;b<a.g.length;)d=a.g[b],Vg(e,d)||(a.g[c++]=d,e[d]=1),b++;a.g.length=c}}g.get=function(a,b){return Vg(this.ha,a)?this.ha[a]:b};g.set=function(a,b){Vg(this.ha,a)||(this.j++,this.g.push(a),this.l++);this.ha[a]=b};g.forEach=function(a,b){for(var c=this.Xb(),d=0;d<c.length;d++){var e=c[d],f=this.get(e);a.call(b,f,e,this)}};g.clone=function(){return new Tg(this)};
g.we=function(a){Ug(this);var b=0,c=this.l,d=this,e=new Pg;e.next=function(){if(c!=d.l)throw Error("The map has changed since the iterator was created");if(b>=d.g.length)throw Og;var e=d.g[b++];return a?e:d.ha[e]};return e};function Vg(a,b){return Object.prototype.hasOwnProperty.call(a,b)};var Wg=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function Jba(a,b){if(a){a=a.split("&");for(var c=0;c<a.length;c++){var d=a[c].indexOf("="),e=null;if(0<=d){var f=a[c].substring(0,d);e=a[c].substring(d+1)}else f=a[c];b(f,e?decodeURIComponent(e.replace(/\+/g," ")):"")}}};function Xg(a,b){this.j=this.A=this.l="";this.o=null;this.u=this.G="";this.B=!1;var c;a instanceof Xg?(this.B=sa(b)?b:a.B,Yg(this,a.l),this.A=a.A,this.j=a.j,Zg(this,a.o),$g(this,a.Te()),ah(this,a.g.clone()),this.u=a.u):a&&(c=String(a).match(Wg))?(this.B=!!b,Yg(this,c[1]||"",!0),this.A=bh(c[2]||""),this.j=bh(c[3]||"",!0),Zg(this,c[4]),$g(this,c[5]||"",!0),ah(this,c[6]||"",!0),this.u=bh(c[7]||"")):(this.B=!!b,this.g=new ch(null,this.B))}
Xg.prototype.toString=function(){var a=[],b=this.l;b&&a.push(dh(b,eh,!0),":");var c=this.j;if(c||"file"==b)a.push("//"),(b=this.A)&&a.push(dh(b,eh,!0),"@"),a.push(encodeURIComponent(String(c)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c=this.o,null!=c&&a.push(":",String(c));if(c=this.Te())this.j&&"/"!=c.charAt(0)&&a.push("/"),a.push(dh(c,"/"==c.charAt(0)?Kba:Lba,!0));(c=this.g.toString())&&a.push("?",c);(c=this.u)&&a.push("#",dh(c,Mba));return a.join("")};
Xg.prototype.resolve=function(a){var b=this.clone(),c=!!a.l;c?Yg(b,a.l):c=!!a.A;c?b.A=a.A:c=!!a.j;c?b.j=a.j:c=null!=a.o;var d=a.Te();if(c)Zg(b,a.o);else if(c=!!a.G){if("/"!=d.charAt(0))if(this.j&&!this.G)d="/"+d;else{var e=b.Te().lastIndexOf("/");-1!=e&&(d=b.Te().substr(0,e+1)+d)}e=d;if(".."==e||"."==e)d="";else if(Qb(e,"./")||Qb(e,"/.")){d=Eb(e,"/");e=e.split("/");for(var f=[],h=0;h<e.length;){var k=e[h++];"."==k?d&&h==e.length&&f.push(""):".."==k?((1<f.length||1==f.length&&""!=f[0])&&f.pop(),d&&
h==e.length&&f.push("")):(f.push(k),d=!0)}d=f.join("/")}else d=e}c?$g(b,d):c=""!==a.g.toString();c?ah(b,a.g.clone()):c=!!a.u;c&&(b.u=a.u);return b};Xg.prototype.clone=function(){return new Xg(this)};function Yg(a,b,c){a.l=c?bh(b,!0):b;a.l&&(a.l=a.l.replace(/:$/,""))}function Zg(a,b){if(b){b=Number(b);if(isNaN(b)||0>b)throw Error("Bad port number "+b);a.o=b}else a.o=null}Xg.prototype.Te=function(){return this.G};function $g(a,b,c){a.G=c?bh(b,!0):b}
function ah(a,b,c){b instanceof ch?(a.g=b,fh(a.g,a.B)):(c||(b=dh(b,Nba)),a.g=new ch(b,a.B))}function gh(a,b){return(!a.j&&!b.j||a.j==b.j)&&(null==a.o&&null==b.o||a.o==b.o)}function hh(a){return a instanceof Xg?a.clone():new Xg(a,void 0)}function ih(a,b){a instanceof Xg||(a=hh(a));b instanceof Xg||(b=hh(b));return a.resolve(b)}function bh(a,b){return a?b?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}
function dh(a,b,c){return ta(a)?(a=encodeURI(a).replace(b,Oba),c&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function Oba(a){a=a.charCodeAt(0);return"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var eh=/[#\/\?@]/g,Lba=/[#\?:]/g,Kba=/[#\?]/g,Nba=/[#\?@]/g,Mba=/#/g;function ch(a,b){this.j=this.g=null;this.l=a||null;this.o=!!b}function jh(a){a.g||(a.g=new Tg,a.j=0,a.l&&Jba(a.l,function(b,c){a.add(decodeURIComponent(b.replace(/\+/g," ")),c)}))}g=ch.prototype;
g.add=function(a,b){jh(this);this.l=null;a=kh(this,a);var c=this.g.get(a);c||this.g.set(a,c=[]);c.push(b);this.j+=1;return this};g.remove=function(a){jh(this);a=kh(this,a);return Vg(this.g.ha,a)?(this.l=null,this.j-=this.g.get(a).length,this.g.remove(a)):!1};g.clear=function(){this.g=this.l=null;this.j=0};g.isEmpty=function(){jh(this);return 0==this.j};function lh(a,b){jh(a);b=kh(a,b);return Vg(a.g.ha,b)}
g.forEach=function(a,b){jh(this);this.g.forEach(function(c,d){$a(c,function(c){a.call(b,c,d,this)},this)},this)};g.Xb=function(){jh(this);for(var a=this.g.Mc(),b=this.g.Xb(),c=[],d=0;d<b.length;d++)for(var e=a[d],f=0;f<e.length;f++)c.push(b[d]);return c};g.Mc=function(a){jh(this);var b=[];if(ta(a))lh(this,a)&&(b=pb(b,this.g.get(kh(this,a))));else{a=this.g.Mc();for(var c=0;c<a.length;c++)b=pb(b,a[c])}return b};
g.set=function(a,b){jh(this);this.l=null;a=kh(this,a);lh(this,a)&&(this.j-=this.g.get(a).length);this.g.set(a,[b]);this.j+=1;return this};g.get=function(a,b){a=a?this.Mc(a):[];return 0<a.length?String(a[0]):b};function mh(a,b,c){a.remove(b);0<c.length&&(a.l=null,a.g.set(kh(a,b),rb(c)),a.j+=c.length)}
g.toString=function(){if(this.l)return this.l;if(!this.g)return"";for(var a=[],b=this.g.Xb(),c=0;c<b.length;c++){var d=b[c],e=encodeURIComponent(String(d));d=this.Mc(d);for(var f=0;f<d.length;f++){var h=e;""!==d[f]&&(h+="="+encodeURIComponent(String(d[f])));a.push(h)}}return this.l=a.join("&")};g.clone=function(){var a=new ch;a.l=this.l;this.g&&(a.g=this.g.clone(),a.j=this.j);return a};function kh(a,b){b=String(b);a.o&&(b=b.toLowerCase());return b}
function fh(a,b){b&&!a.o&&(jh(a),a.l=null,a.g.forEach(function(a,b){var c=b.toLowerCase();b!=c&&(this.remove(b),mh(this,c,a))},a));a.o=b}g.extend=function(a){for(var b=0;b<arguments.length;b++)Ng(arguments[b],function(a,b){this.add(b,a)},this)};/*
 Portions of this code are from MochiKit, received by
 The Closure Authors under the MIT license. All other code is Copyright
 2005-2009 The Closure Authors. All Rights Reserved.
*/
function nh(a,b){this.u=[];this.aa=a;this.O=b||null;this.l=this.g=!1;this.j=void 0;this.K=this.Ea=this.B=!1;this.A=0;this.ya=null;this.o=0}g=nh.prototype;g.cancel=function(a){if(this.g)this.j instanceof nh&&this.j.cancel();else{if(this.ya){var b=this.ya;delete this.ya;a?b.cancel(a):(b.o--,0>=b.o&&b.cancel())}this.aa?this.aa.call(this.O,this):this.K=!0;this.g||this.Gb(new oh(this))}};g.zu=function(a,b){this.B=!1;ph(this,a,b)};function ph(a,b,c){a.g=!0;a.j=c;a.l=!b;qh(a)}
function rh(a){if(a.g){if(!a.K)throw new sh(a);a.K=!1}}g.callback=function(a){rh(this);ph(this,!0,a)};g.Gb=function(a){rh(this);ph(this,!1,a)};function th(a,b,c){return uh(a,b,null,c)}function vh(a,b,c){uh(a,b,b,c)}function uh(a,b,c,d){a.u.push([b,c,d]);a.g&&qh(a);return a}g.then=function(a,b,c){var d,e,f=new Kc(function(a,b){d=a;e=b});uh(this,d,function(a){a instanceof oh?f.cancel():e(a)});return f.then(a,b,c)};Ka(nh);function wh(a,b){uh(a,b.callback,b.Gb,b)}
function xh(a,b){return b instanceof nh?th(a,t(b.ka,b)):th(a,function(){return b})}nh.prototype.ka=function(a){var b=new nh;wh(this,b);a&&(b.ya=this,this.o++);return b};function yh(a){return cb(a.u,function(a){return Ca(a[1])})}
function qh(a){if(a.A&&a.g&&yh(a)){var b=a.A,c=zh[b];c&&(ra.clearTimeout(c.ma),delete zh[b]);a.A=0}a.ya&&(a.ya.o--,delete a.ya);b=a.j;for(var d=c=!1;a.u.length&&!a.B;){var e=a.u.shift(),f=e[0],h=e[1];e=e[2];if(f=a.l?h:f)try{var k=f.call(e||a.O,b);sa(k)&&(a.l=a.l&&(k==b||k instanceof Error),a.j=b=k);if(La(b)||"function"===typeof ra.Promise&&b instanceof ra.Promise)d=!0,a.B=!0}catch(l){b=l,a.l=!0,yh(a)||(c=!0)}}a.j=b;d&&(k=t(a.zu,a,!0),d=t(a.zu,a,!1),b instanceof nh?(uh(b,k,d),b.Ea=!0):b.then(k,d));
c&&(b=new Bh(b),zh[b.ma]=b,a.A=b.ma)}function Ch(a){var b=new nh;b.callback(a);return b}function Dh(a){var b=new nh;b.Gb(a);return b}function sh(a){Ma.call(this);this.deferred=a}w(sh,Ma);sh.prototype.message="Deferred has already fired";sh.prototype.name="AlreadyCalledError";function oh(a){Ma.call(this);this.deferred=a}w(oh,Ma);oh.prototype.message="Deferred was canceled";oh.prototype.name="CanceledError";function Bh(a){this.ma=ra.setTimeout(t(this.j,this),0);this.g=a}
Bh.prototype.j=function(){delete zh[this.ma];throw this.g;};var zh={};function Eh(a,b,c,d,e,f){nh.call(this,e,f);this.I=a;this.G=[];this.P=!!b;this.sa=!!c;this.oa=!!d;for(b=this.pa=0;b<a.length;b++)uh(a[b],t(this.U,this,b,!0),t(this.U,this,b,!1));0!=a.length||this.P||this.callback(this.G)}w(Eh,nh);Eh.prototype.U=function(a,b,c){this.pa++;this.G[a]=[b,c];this.g||(this.P&&b?this.callback([a,c]):this.sa&&!b?this.Gb(c):this.pa==this.I.length&&this.callback(this.G));this.oa&&!b&&(c=null);return c};Eh.prototype.Gb=function(a){Eh.C.Gb.call(this,a);for(a=0;a<this.I.length;a++)this.I[a].cancel()};function Fh(a,b,c){x.call(this);this.g=a;this.o=b||0;this.j=c;this.l=t(this.fv,this)}w(Fh,x);g=Fh.prototype;g.ma=0;g.J=function(){Fh.C.J.call(this);this.stop();delete this.g;delete this.j};g.start=function(a){this.stop();this.ma=ke(this.l,sa(a)?a:this.o)};g.stop=function(){this.isActive()&&ra.clearTimeout(this.ma);this.ma=0};function Gh(a){a.stop();a.fv()}g.isActive=function(){return 0!=this.ma};g.fv=function(){this.ma=0;this.g&&this.g.call(this.j)};function Pba(){};function Hh(){}w(Hh,Pba);Hh.prototype.clear=function(){var a=Sg(this.we(!0)),b=this;$a(a,function(a){b.remove(a)})};function Ih(a){this.g=a}w(Ih,Hh);g=Ih.prototype;g.set=function(a,b){try{this.g.setItem(a,b)}catch(c){if(0==this.g.length)throw"Storage mechanism: Storage disabled";throw"Storage mechanism: Quota exceeded";}};g.get=function(a){a=this.g.getItem(a);if(!ta(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};g.remove=function(a){this.g.removeItem(a)};
g.we=function(a){var b=0,c=this.g,d=new Pg;d.next=function(){if(b>=c.length)throw Og;var d=c.key(b++);if(a)return d;d=c.getItem(d);if(!ta(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};g.clear=function(){this.g.clear()};g.key=function(a){return this.g.key(a)};function Jh(){var a=null;try{a=window.localStorage||null}catch(b){}this.g=a}w(Jh,Ih);function Kh(a,b){this.j=a;this.g=null;if(od&&!Cd()){Lh||(Lh=new Tg);this.g=Lh.get(a);this.g||(b?this.g=document.getElementById(b):(this.g=document.createElement("userdata"),this.g.addBehavior("#default#userData"),document.body.appendChild(this.g)),Lh.set(a,this.g));try{this.g.load(this.j)}catch(c){this.g=null}}}w(Kh,Hh);var Qba={".":".2E","!":".21","~":".7E","*":".2A","'":".27","(":".28",")":".29","%":"."},Lh=null;
function Mh(a){return"_"+encodeURIComponent(a).replace(/[.!~*'()%]/g,function(a){return Qba[a]})}g=Kh.prototype;g.set=function(a,b){this.g.setAttribute(Mh(a),b);Nh(this)};g.get=function(a){a=this.g.getAttribute(Mh(a));if(!ta(a)&&null!==a)throw"Storage mechanism: Invalid value was encountered";return a};g.remove=function(a){this.g.removeAttribute(Mh(a));Nh(this)};
g.we=function(a){var b=0,c=this.g.XMLDocument.documentElement.attributes,d=new Pg;d.next=function(){if(b>=c.length)throw Og;var d=c[b++];if(a)return decodeURIComponent(d.nodeName.replace(/\./g,"%")).substr(1);d=d.nodeValue;if(!ta(d))throw"Storage mechanism: Invalid value was encountered";return d};return d};g.clear=function(){for(var a=this.g.XMLDocument.documentElement,b=a.attributes.length;0<b;b--)a.removeAttribute(a.attributes[b-1].nodeName);Nh(this)};
function Nh(a){try{a.g.save(a.j)}catch(b){throw"Storage mechanism: Quota exceeded";}};function Oh(a,b){this.j=a;this.g=b+"::"}w(Oh,Hh);Oh.prototype.set=function(a,b){this.j.set(this.g+a,b)};Oh.prototype.get=function(a){return this.j.get(this.g+a)};Oh.prototype.remove=function(a){this.j.remove(this.g+a)};Oh.prototype.we=function(a){var b=this.j.we(!0),c=this,d=new Pg;d.next=function(){for(var d=b.next();d.substr(0,c.g.length)!=c.g;)d=b.next();return a?d.substr(c.g.length):c.j.get(d)};return d};function Ph(a,b){this.name=a;this.value=b}Ph.prototype.toString=function(){return this.name};var Qh=new Ph("Error",400),Rh=new Ph("Warning",300),Sh=new Ph("Success",200),Th=new Ph("Info",100);function Uh(a,b,c,d){A.call(this,"alert");this.l=a;this.P=new hg;this.O=c||5;this.K=d||null;this.u=b;this.id=Rba++}w(Uh,A);var Rba=0;Uh.prototype.getTime=function(){return this.P};var Sba={};function Wh(a){return M.get("about.application",a)}function Xh(a){return M.get("supportContact",a)};var Tba=String({});function Yh(a){if(!a)return a;var b={},c;for(c in a)void 0!==a[c]&&(b[c]=a[c],a[c]=void 0);return b}function Zh(a,b,c,d){null==c&&(c=!0);null==d&&(d=!0);for(var e in a){var f=a[e];if(e in b){var h=b[e];(null!==f&&void 0!==f||d)&&"__ignore__"!==f&&("__delete__"===f?c&&delete b[e]:$h(f)||$h(h)?c&&(b[e]=a[e]):Zh(f,h,c,d))}else $h(f)?b[e]=f:(b[e]={},Zh(f,b[e],c,d))}}function $h(a){return a&&"object"==ya(a)?(a=Object.getPrototypeOf(a),null==a||null!=Object.getPrototypeOf(a)):!0}
function ai(a,b,c){var d=a,e=b.length-1;$a(b,function(a,b){b===e?d[a]=c:(d[a]=Ba(d[a])?d[a]:{},d=d[a])})}function bi(a,b,c){b=null!=b?b:"";c=null!=c?c:".";var d={};if(void 0!==a)if($h(a)||q(a))d[b]=a;else if(Ba(a))if(pc(a))d[b]=a;else for(var e in a){var f=bi(a[e],b?b+c+e:e,c);yc(d,f)}return d}function ci(a){var b={},c;for(c in a)ai(b,c.split("."),a[c]);return b}
function di(a,b){"string"===ya(b)&&(b=b.split("."));if(0<b.length){var c=b[b.length-1];b=b.slice(0,b.length-1);var d=kc(a,b);"object"==ya(d)&&(delete d[c],0===gc(d)&&di(a,b))}}function ei(a,b){for(var c,d=1;d<arguments.length;d++){var e=arguments[d];if(e&&void 0!=e[a]){c=e[a];break}}return c}function Uba(){return function(a){return Ca(a.name)?a.name():a.name}}
function fi(a){var b=ya(a);if("object"==b||"array"==b){if(a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)a.hasOwnProperty(c)&&(b[c]=fi(a[c]));return b}return a};var Vba="consent areas filters favorite locationFormat mute search.recent storage.writeType storage.introLastSeen userSounds theme".split(" "),gi=[],hi=null;function ii(){hi||(hi=[]);return hi}function ji(a){if(a){var b=ii(),c=bi(a);$a(b,function(a){lc(c,a)&&(delete c[a],ib(gi,a))});return ci(c)}return null}function ki(a){a=bi(a);var b={};fc(a,function(a,d){b[li(d)]=a});return ci(b)}function Wba(a){a=bi(a);var b=/^(core|opensphere)\./,c={};fc(a,function(a,e){c[e.replace(b,"")]=a});return ci(c)}
function li(a){return[mi(a)?"core":"opensphere",a].join(".")}function ni(a){if(a&&0<a.length){var b=mi(a.join("."))?"core":"opensphere";var c=rb(a);c.unshift(b)}return c||[]}function mi(a){return cb(Vba,function(b){return Eb(a,b)})};var oi=ec("Firefox"),Xba=kd()||ec("iPod"),Yba=ec("iPad"),Zba=ec("Android")&&!(Bc()||ec("Firefox")||ec("Opera")||ec("Silk")),pi=Bc(),qi=ec("Safari")&&!(Bc()||ec("Coast")||ec("Opera")||ec("Edge")||ec("Silk")||ec("Android"))&&!ld();function ri(a){return(a=a.exec(bc))?a[1]:""}var $ba=function(){if(oi)return ri(/Firefox\/([0-9.]+)/);if(od||pd||nd)return xd;if(pi)return ld()?ri(/CriOS\/([0-9.]+)/):ri(/Chrome\/([0-9.]+)/);if(qi&&!ld())return ri(/Version\/([0-9.]+)/);if(Xba||Yba){var a=/Version\/(\S+).*Mobile\/(\S+)/.exec(bc);if(a)return a[1]+"."+a[2]}else if(Zba)return(a=ri(/Android\s+([0-9.]+)/))?a:ri(/Version\/([0-9.]+)/);return""}();function si(){this.g="";this.j=ti}si.prototype.Af=!0;si.prototype.Ce=function(){return this.g};si.prototype.toString=function(){return"Const{"+this.g+"}"};function ui(a){return a instanceof si&&a.constructor===si&&a.j===ti?a.g:"type_error:Const"}var ti={};function vi(a){var b=new si;b.g=a;return b}vi("");function wi(){this.Es="";this.uC=xi}wi.prototype.Af=!0;wi.prototype.Ce=function(){return this.Es};wi.prototype.kq=!0;wi.prototype.Si=function(){return 1};function yi(a){if(a instanceof wi&&a.constructor===wi&&a.uC===xi)return a.Es;ya(a);return"type_error:TrustedResourceUrl"}var xi={};function zi(a){var b=new wi;b.Es=a;return b};vc=function(a){var b={},c;for(c in a)a.hasOwnProperty(c)&&(b[c]=a[c]);return b};fc=function(a,b,c){for(var d in a)a.hasOwnProperty(d)&&b.call(c,a[d],d,a)};gc=function(a){var b=0,c;for(c in a)a.hasOwnProperty(c)&&b++;return b};jc=function(a){var b=[],c=0,d;for(d in a)a.hasOwnProperty(d)&&(b[c++]=d);return b};ic=function(a){var b=[],c=0,d;for(d in a)a.hasOwnProperty(d)&&(b[c++]=a[d]);return b};pc=function(a){for(var b in a)if(a.hasOwnProperty(b))return!1;return!0};
wc=function(a){var b=ya(a);if("object"==b||"array"==b){if(a.clone)return a.clone();b="array"==b?[]:{};for(var c in a)a.hasOwnProperty(c)&&(b[c]=wc(a[c]));return b}return a};/*

 Copyright 2005-2015 OpenLayers Contributors. All rights reserved.

 Redistribution and use in source and binary forms, with or without modification,
 are permitted provided that the following conditions are met:

 1. Redistributions of source code must retain the above copyright notice, this
 list of conditions and the following disclaimer.

 2. Redistributions in binary form must reproduce the above copyright notice,
 this list of conditions and the following disclaimer in the documentation and/or
 other materials provided with the distribution.

 THIS SOFTWARE IS PROVIDED BY OPENLAYERS CONTRIBUTORS ``AS IS'' AND ANY EXPRESS
 OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
 MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
 SHALL COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
 INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
 PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
 LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE
 OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF
 ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.

 The views and conclusions contained in the software and documentation are those
 of the authors and should not be interpreted as representing official policies,
 either expressed or implied, of OpenLayers Contributors.
*/
var N=new C,Ai=null;function Bi(){return/os\s?x/i.test(navigator.userAgent)}function Ci(a){a=a||window;try{return a.self!==a.top}catch(b){return!0}}var Di=null;function Ei(a,b){A.call(this,a);this.url=b}w(Ei,A);var Fi=null;function Gi(a){var b=Fi;b||(b=Fi=[]);-1==b.indexOf(a)&&b.push(a)}function aca(a,b,c){var d=Fi,e=null;if(d)for(var f=0,h=d.length;f<h;f++){var k=new d[f];c&&k.setTimeout(c);k.handles(a,b)&&(e?e.push(k):e=[k])}e&&e.sort(function(a,b){return-1*xb(a.lc(),b.lc())});return e};function Hi(a,b){this.ma=a;this.l=void 0!==b?b:0}Hi.prototype.D=function(){return this.ma};Hi.prototype.ga=function(a){this.ma=a};function Ii(){Hi.call(this,"urlReplace",-110)}w(Ii,Hi);var Ji=[];function bca(){var a=M.get("urlReplace");Ji.length=0;if(a)for(var b in a)Ji.push({search:new RegExp(b),replace:a[b]})}
Ii.prototype.j=function(a){if(Ji.length){for(var b=a.toString().replace(/[?#].*$/,""),c=a.g,d=c.Xb(),e=a.u,f=0,h=Ji.length;f<h;f++)if(b=b.replace(Ji[f].search,Ji[f].replace),e=e.replace(Ji[f].search,Ji[f].replace),d)for(var k=0,l=d.length;k<l;k++){var m=d[k],n=c.get(m);if(n){var p=n.toString().replace(Ji[f].search,Ji[f].replace);p!=n&&c.set(m,p)}}b=new Xg(b+(d.length?"?"+c.toString():"")+(e?"#"+e:""));b.toString()!==a.toString()&&(Yg(a,b.l),a.j=b.j,Zg(a,b.o),$g(a,b.Te()),ah(a,b.g.toString(),void 0),
a.u=b.u)}};function Ki(){Hi.call(this,"variables",-100)}w(Ki,Hi);var cca=E.V("os.net.VariableReplacer"),Li={};function Mi(a,b){a in Li&&E.hb(cca,'Overriding variable replacement function for "'+a+'"!');Li[a]={GN:b,Fb:new RegExp("{"+a+":?([^}]+)?}","g")}}Ki.prototype.j=function(a){var b=a.g,c=b.Xb(),d;for(d in Li){var e=Li[d].GN,f=Li[d].Fb;if(c)for(var h=0,k=c.length;h<k;h++){var l=c[h],m=b.get(l);if(m){var n=m.toString().replace(f,e);n!=m&&b.set(l,n)}}if(m=a.Te())n=m.replace(f,e),n!=m&&$g(a,n)}};function Ni(a,b,c){C.call(this);this.G=this.u=this.P=this.A=this.B=this.I=this.g=this.U=this.o=this.O=this.j=null;this.aa=!1;this.ka=this.K=this.l=null;this.Na=c||0;a&&Oi(this,a);b&&(this.oh=b);Pi(this,new Ki);Pi(this,new Ii)}w(Ni,C);var Qi=E.V("os.net.Request");g=Ni.prototype;g.J=function(){this.abort();Ri(this);Ni.C.J.call(this)};function Oi(a,b){"string"==typeof b?a.j=new Xg(b):a.j=b}function Si(a,b){a.O||(a.O={});a.O.Accept=b}
function Pi(a,b){if(null===a.o)a.o=[b];else{for(var c=0,d=a.o.length;c<d;c++)if(a.o[c].D()==b.D())throw Error('A modifier with the id "'+b.D()+'" already exists in the set!');zb(a.o,b,Ti)}}function Ui(a,b){if(a.o)if("string"==typeof b)for(var c=0,d=a.o.length;c<d;c++){if(a.o[c].D()==b){a.o.splice(c,1);break}}else a=a.o,b=vb(a,Ti||xb,!1,b),0<=b&&nb(a,b)}function Ti(a,b){var c=xb(a.l,b.l);return 0===c?xb(a.D(),b.D()):-c}g.oh="GET";function Ri(a){a.g=null;a.I=null}
g.abort=function(){this.l&&(Vi(this,this.l),this.l.abort(),Wi(this));this.dispatchEvent("abort")};function Xi(a){var b=null;return Zc(new Kc(function(c,d){b=function(e){b&&(a.M("success",b),a.M("error",b),a.M("abort",b));"success"===e.type?c(a.g):d(a.u)};a.H("success",b);a.H("error",b);a.H("abort",b);a.load()}),function(c){b&&c instanceof $c&&(a.M("success",b),a.M("error",b),a.M("abort",b),a.abort(),c=a.u);throw c;})}
g.load=function(a){var b=this.j;this.u=this.I=this.g=this.P=null;this.aa=!!a;if(b){a=b.clone();if(this.o){b=0;for(var c=this.o.length;b<c;b++)this.o[b].j(a)}this.P=a;N.dispatchEvent(new Ei("tryUrl",this.P.toString()));if((this.A=aca(this.oh,a,this.Na))&&this.A.length)E.info(Qi,(this.aa?"NOCACHE ":"")+this.oh+" "+a),Yi(this);else throw a="No handlers were found for URI: "+a,E.error(Qi,a),Error(a);}else throw a="No URI set for request!",E.error(Qi,a),Error(a);};
function Yi(a){if(a.A&&a.A.length){a.l&&Vi(a,a.l);a.l=a.A.shift();var b=a.l;b.H("success",a.Vw,!1,a);b.H("error",a.Ww,!1,a);a.l.Fa(a.oh,a.P.clone(),a.O,a.U,a.aa,a.B)}}function Vi(a,b){b.M("success",a.Vw);b.M("error",a.Ww)}g.Vw=function(){this.g=this.l.Jr();this.I=this.l.Kr();this.ka=this.l.kk();this.G||(this.G=[]);this.G.push(this.l.Mp());if(this.g&&this.K){var a=this.K(this.g,this.I["Content-Type"]);this.Xt(a)}Wi(this);a?(E.error(Qi,a),this.dispatchEvent("error")):this.dispatchEvent("success")};
g.Xt=function(a){a&&(this.u||(this.u=[]),this.u.push(a))};g.Ww=function(){this.g=this.l.Jr();this.I=this.l.Kr();this.G||(this.G=[]);var a=this.l.uy();a&&a.forEach(this.Xt,this);this.G.push(this.l.Mp());this.A&&this.A.length&&!this.l.Iv()?Yi(this):(E.error(Qi,"Error! See fine log for more details. "+this.P),Wi(this),this.dispatchEvent("error"))};function Wi(a){a.l&&(Vi(a,a.l),a.l.dispose());a.l=null;a.A=null}g.setTimeout=function(a){this.Na=a};function Zi(a,b){this.g=a;this.name="file: "+a;this.j=!!b}F(Zi,"os.config.storage.ISettingsStorage");F(Zi,"os.config.storage.ISettingsReadableStorage");g=Zi.prototype;g.init=function(){return Ch()};g.Vx=function(){var a=new nh,b=new Ni;b.H("success",Ga(this.xI,a),!1,this);b.H("error",Ga(this.UK,a),!1,this);Oi(b,this.g);b.load();return a};g.xI=function(a,b){b=b.target;var c=b.g;b.dispose();c=c.replace(/\/\*[\s\S]*\*\//mg,"");b=JSON.parse(c);b.user=ki(b.user||{});a.callback(b)};
g.UK=function(a,b){this.j?a.callback({}):a.Gb(b)};g.name="file";g.Jg=!0;function $i(a){this.l=a;this.g=0;this.j={}}var aj=E.V("os.config.storage.SettingsStorageLoader");$i.prototype.init=function(){for(var a=[],b=0,c=this.l.g.length;b<c;b++)a.push((this.l.g[b]||null).init());return a.length?th(new Eh(a),this.A,this):Dh("No settings storages registered.")};$i.prototype.A=function(a){$a(a,function(a,c){a[0]||((this.l.g[c]||null).Jg=!1)},this)};function bj(a){a.g=0;a.j={};a.j.user={};a.j.admin={};return cj(a)}
function cj(a){if(a.g<a.l.g.length){var b=(a.l.g[a.g]||null).Vx(),c=th(b,a.u,a);uh(c,null,a.o,a);return b}return Ch(a.j)}
$i.prototype.u=function(a){var b=fi(a);if(lc(b,"overrides")){var c=b.overrides;if(q(c)){b=0;for(var d=c.length;b<d;b++)dj(this.l,new Zi(c[b],!0),this.g+b+1)}}if(lc(a,"user")){c=fi(a.user);var e=["core","opensphere"];b=0;for(d=e.length;b<d;b++){var f=e[b],h=bi(c[f]),k={};fc(h,function(a,b){if(b){var c=kc(this.j,("user."+f+"."+b).split("."));q(c)&&q(a)&&(E.info(aj,"Merging settings arrays - existingVal: "+c+", value: "+a),lb(a,c,a.length),E.info(aj,"Result of merge: "+a));k[b]=a}},this);c[f]=ci(k)}Zh(c,
this.j.user)}lc(a,"admin")&&(a=fi(a.admin),Zh(a,this.j.admin));this.g+=1;return cj(this)};$i.prototype.o=function(){(this.l.g[this.g]||null).Jg=!1;this.g+=1;return cj(this)};function ej(){this.g=[];this.l="local";this.j=null;this.o=!1}xa(ej);function dj(a,b,c){jb(a.g,b,void 0!==c?c:a.g.length);"remote"===b.DB&&(a.o=!0)}function fj(a){for(var b=null,c=a.g.length-1;0<=c;c--){var d=a.g[c];if(F(d,"os.config.storage.ISettingsWritableStorage")&&d.DB===a.l&&d.Jg){b=d;break}}a.j=b;if(a.j){for(c=a.g.length-1;0<=c;c--)d=a.g[c],F(d,"os.config.storage.ISettingsWritableStorage")&&d!==a.j&&(d.Om=!0);a.j.Om=!1}}function gj(a){a.j&&a.j.Jg||fj(a);return a.j}
function dca(a){return ab(a.g,function(a){return F(a,"os.config.storage.ISettingsWritableStorage")&&a.Om},a)};function hj(a,b,c,d){A.call(this,a,d);this.l=void 0!=b?b:null;this.u=void 0!=c?c:null}w(hj,A);function ij(a,b){x.call(this);this.l=this.j=0;this.u=a;this.o=b;this.g=new Fh(t(this.lK,this),0,this)}w(ij,x);g=ij.prototype;g.J=function(){this.g.dispose();delete this.u;delete this.o;ij.C.J.call(this)};g.start=function(a,b){this.stop();b=b||0;this.j=Math.max(a||0,0);this.l=0>b?-1:Ia()+b;this.g.start(0>b?this.j:Math.min(this.j,b))};g.stop=function(){this.g.stop()};g.isActive=function(){return this.g.isActive()};g.Ph=function(){};g.rj=function(){};
g.lK=function(){if(this.u.call(this.o))this.Ph();else if(0>this.l)this.g.start(this.j);else{var a=this.l-Ia();0>=a?this.rj():this.g.start(Math.min(this.j,a))}};function jj(a){M.reset().then(Ga(eca,a),kj)}window.cls=jj;function eca(a){window.localStorage.clear();localStorage.setItem("resetDate","opensphere "+(new Date).toISOString());N.be("reset")?(N.dispatchEvent("reset"),a||(a=new ij(fca),a.Ph=lj,a.rj=lj,a.start(100,5E3))):a||kj()}function mj(){nj--}var nj=0;function fca(){return 0>=nj}function lj(){M.save().then(kj,kj)}function kj(){M.A=!1;window.location.reload(!0)};Ja("os.xt.IMessageHandler",function(){});function oj(a){this.j=0;this.l=a||100;this.g=[]}g=oj.prototype;g.add=function(a){var b=this.g[this.j];this.g[this.j]=a;this.j=(this.j+1)%this.l;return b};g.get=function(a){a=pj(this,a);return this.g[a]};g.set=function(a,b){a=pj(this,a);this.g[a]=b};g.isEmpty=function(){return 0==this.g.length};g.clear=function(){this.j=this.g.length=0};g.Mc=function(){for(var a=this.g.length,b=[],c=this.g.length-this.g.length;c<a;c++)b.push(this.get(c));return b};
g.Xb=function(){for(var a=[],b=this.g.length,c=0;c<b;c++)a[c]=c;return a};function pj(a,b){if(b>=a.g.length)throw Error("Out of bounds exception");return a.g.length<a.l?b:(a.j+Number(b))%a.l};function qj(){C.call(this);this.g=new oj(1E4);this.l={};this.j=!1}w(qj,C);xa(qj);function rj(a,b,c,d,e,f){c=c||Qh;e=new Uh(b,c,e,f);a.g.add(e);a.dispatchEvent(e);if(null!=d)switch(c){case Qh:E.error(d,b);break;case Rh:E.hb(d,b);break;default:E.info(d,b)}}qj.prototype.Hh=function(){this.g.clear();this.dispatchEvent("clearAlerts")};function sj(a,b,c,d){if(!a.j){var e=a.l[b]||0;e=tb(a.g.Mc(),0,a.g.g.length-e);$a(e,c,d);a.l[b]=a.g.g.length;a.j=!0}}var tj=qj.s();var gca=new C;function uj(a){if(!a){if(!("localStorage"in window&&window.localStorage))throw Error("This browser does not support localStorage!");a=window.localStorage}this.g=a;this.I=!1;this.ma=Vb();this.l="default";this.j=document.title;this.o=[];this.u=null;this.K=0;this.A=null;this.G=[];this.B=new Fh(this.Ea.bind(this));this.pa=!1;this.P=this.aa.bind(this);this.O=this.U.bind(this);Yd(window,"message",this.yK,!1,this)}xa(uj);var vj=E.V("os.xt.Peer");g=uj.prototype;g.yK=function(){};
function wj(a){return"xt."+(a||"default")+".master"}function xj(a,b,c){return(a=c.getItem("xt."+a+"."+b+".ping"))?parseInt(a,10):null}function yj(a,b,c){for(var d=["xt",a,b].join("."),e=c.length-1;0<=e;e--){var f=c.key(e);0===f.indexOf(d)&&c.removeItem(f)}c.getItem("xt."+a+".master")===b&&c.removeItem("xt."+a+".master")}g.D=function(){return this.ma};g.ga=function(a){this.ma=a;this.ra()};g.S=function(){return this.j};g.Ta=function(a){this.j=a;this.ra()};
g.Hg=function(a){-1==this.o.indexOf(a)&&this.o.push(a);this.ra()};function zj(a){for(var b=[],c=0,d=a.o.length;c<d;c++)for(var e=a.o[c].di?a.o[c].di():a.o[c].getTypes(),f=0,h=e.length;f<h;f++)ib(b,e[f]);return b}g.ra=function(){this.I&&this.ma&&this.j&&this.l&&(this.g.setItem(["xt",this.l,this.ma,"title"].join("."),this.j),this.g.setItem(["xt",this.l,this.ma,"details"].join("."),""),this.g.setItem(["xt",this.l,this.ma,"types"].join("."),JSON.stringify(zj(this))))};
g.init=function(){this.I||(this.I=!0,this.ra(),window.addEventListener("storage",this.P),window.addEventListener("unload",this.O),this.u=new je(1E4),this.u.H("tick",this.jr,!1,this),this.jr(),this.u.start(),E.ta(vj,"Initialized peer "+this.l+"."+this.ma+' "'+this.j+'"'),hca(this))};
function hca(a){for(var b=["xt",a.l,a.ma,""].join("."),c=["xt",a.l,"public."].join("."),d=Aj.map(function(a){return b+a}),e=a.g,f=e.length;f--;){var h=e.key(f);h&&(h.startsWith(c)||h.startsWith(b)&&-1===d.indexOf(h))&&a.aa({key:h,newValue:e.getItem(h)})}}
function Bj(a,b,c){var d;if(a.I){d||(d="public");try{a.g.setItem(["xt",a.l,d,a.ma,Date.now()].join("."),JSON.stringify({type:b,data:c,time:Date.now()}))}catch(e){E.error(vj,"A cross-app communication event was unable to be sent. This usually happens because the data was too large or because the storage is corrupted.",e),a.pa||(a.pa=!0,rj(qj.s(),"A cross-app communication event was unable to be sent. This usually happens because the data was too large or because the storage is corrupted. View the log for more details.",
Qh))}}else E.hb(vj,"Peer.send() was called but the peer has not been initialized")}function Cj(a,b){b=b||a.ma;return b===a.ma?a.u?a.K:null:xj(a.l,b,a.g)}function Dj(a,b){b=Cj(a,b);a=Cj(a);return null!=b&&15E3>a-b}
g.jr=function(){E.ta(vj,"Updating ping for peer "+this.l+"."+this.ma);this.K=Date.now();this.g.setItem("xt."+this.l+"."+this.ma+".ping",String(this.K));var a=this.D();if(this.g.getItem(wj(this.l))===a){a=Ej(this,void 0,!0);for(var b=0,c=a.length;b<c;b++)Dj(this,a[b])||yj(this.l,a[b],this.g);a="xt."+this.l+".public.";for(b=this.g.length-1;0<=b;b--)if(c=this.g.key(b),0===c.indexOf(a)){var d=JSON.parse(this.g.getItem(c)||"");1E4<this.K-d.time&&this.g.removeItem(c)}}else a=this.g.getItem(wj(this.l)),
a&&Dj(this,a)||(a&&yj(this.l,a,this.g),Fj(this))};function Fj(a){a.A||(a.A=new Fh(a.BD,25,a),a.A.start())}g.BD=function(){if(Dj(this,this.D())){var a=Ej(this);a.push(this.D());wb(a);a[0]===this.D()&&(a=wj(this.l),this.g.getItem(a)||(this.g.setItem(a,this.ma),gca.dispatchEvent(new A(["os.xt.events.masterAppointed",this.l].join(".")))))}this.A.stop();this.A.dispose();this.A=null};
function Ej(a,b,c){c=c||!1;for(var d="xt."+a.l+".",e=[],f=a.g.length-1;0<=f;f--){var h=a.g.key(f);0===h.indexOf(d)&&(h=h.split("."),2<h.length&&"master"!==h[2]&&"public"!==h[2]&&h[2]!==a.ma&&-1===e.indexOf(h[2])&&(c||Dj(a,h[2]))&&(b?-1<JSON.parse(a.g.getItem(h.slice(0,3).join(".")+".types")||"[]").indexOf(b)&&e.push(h[2]):e.push(h[2])))}return e}var Aj=["ping","title","details","types"];
uj.prototype.aa=function(a){var b=[];a.key&&(b=a.key.split("."));if(4<=b.length&&"xt"===b[0]&&b[1]===this.l&&(b[2]===this.ma||"public"==b[2])&&a.newValue){if(-1===Aj.indexOf(b[3])&&b[3]!==this.ma){a:{for(var c=b[3],d=JSON.parse(a.newValue),e=0,f=this.o.length;e<f;e++)if(-1<(this.o[e].di?this.o[e].di():this.o[e].getTypes()).indexOf(d.type)){E.ta(vj,"Found handler for message with type "+d.type);try{this.o[e].ad?this.o[e].ad(d.data,d.type,c,d.time):this.o[e].process(d.data,d.type,c,d.time);var h=!0;
break a}catch(k){E.error(vj,"Error while handling message!",k)}}else E.ta(vj,"Could not find handler for message with type "+d.type+" in "+zj(this));h=!1}h&&"public"!==b[2]&&this.g.removeItem(a.key)}}else 4<=b.length&&"xt"===b[0]&&b[1]===this.l&&0<Aj.indexOf(b[3])&&this.Ea();a.key!==wj(this.l)||a.newValue||Fj(this)};
uj.prototype.U=function(){yj(this.l,this.ma,this.g);this.u&&(this.u.stop(),this.u.M("tick",this.jr,!1,this),this.u.dispose(),this.u=null);this.B&&(this.B.stop(),this.B.dispose(),this.B=null);window.removeEventListener("storage",this.P);window.removeEventListener("unload",this.O)};uj.prototype.destroy=function(){this.U()};
uj.prototype.Ea=function(){var a=this.G,b=Date.now();for(this.G=[];0<a.length;){var c=a.shift(),d=c.messageType,e=ica(this.l,c.bT,this.g);e&&d&&(gb(e.g,d)||(e=null));e?c.deferred.callback(e):b>c.expiration?c.deferred.Gb():this.G.push(c)}this.G.length&&(b=Date.now(),a=gaa(this.G,function(a,b){return Math.min(a,b.expiration)},b+1E4),this.B.start(a-b))};function jca(a,b,c,d,e){this.group=a||"default";this.id=b||"";this.title=c||"";this.Ba=d||"";this.g=e||[]}
function ica(a,b,c){if(!a||!b||!xj(a,b,c))return null;var d="xt."+a+"."+b+".",e=JSON.parse(c.getItem(d+"types")||"[]"),f=c.getItem(d+"title")||"";c=c.getItem(d+"details")||"";return new jca(a,b,f,c,e)};function Gj(){C.call(this);this.g=new ej;this.aa=new $i(this.g);this.o={};this.j={};this.j.user={};this.j.admin={};this.P={};this.l=this.U=!1;this.A=!0;this.ka=!1;this.oa=new je(6E4);this.oa.H("tick",function(){this.save()},!1,this);this.oa.start();this.G=!1;this.K=[];this.O=[];this.sa=new Fh(this.RK,500,this);this.B={};this.I=new Fh(this.save,500,this);this.u=null}w(Gj,C);xa(Gj);var Hj=E.V("os.config.Settings");g=Gj.prototype;
g.init=function(){if(this.U)E.hb(Hj,"Settings already initialized!");else{E.ta(Hj,"Initializing settings.");this.l=!1;this.u=new uj;this.u.Ta("opensphereSettings");var a=this.u;a.l="settings";a.ra();this.u.Hg(this);vh(this.aa.init(),this.QK,this)}};g.QK=function(){E.ta(Hj,"Settings initialized.");this.U=!0;this.dispatchEvent(new A("initialized"))};g.load=function(){E.ta(Hj,"Loading settings");this.l=!1;vh(bj(this.aa),this.Ux,this)};
g.RK=function(){E.ta(Hj,"Reloading settings");vh(bj(this.aa),this.EJ,this)};g.EJ=function(a){this.o={};this.j={};this.Ux(a);a=0;for(var b=this.O.length;a<b;a++){var c=this.O[a];Ij(this,c.keys,this.get(c.keys),c.oldValue,!0)}this.O=[]};
g.Ux=function(a){E.ta(Hj,"Settings loaded");if(a){this.j=a;if(lc(a,"user")){var b=Wba(a.user);Zh(b,this.o)}lc(a,"admin")&&Zh(a.admin,this.o);this.j.user=ji(this.j.user)}a=!0;b=0;for(var c=this.g.g.length;b<c;b++){var d=this.g.g[b]||null,e=d.Jg;a=a&&e;e||E.error(Hj,"Settings failed to load from "+d.name)}a||rj(qj.s(),"Settings failed to load from one or more sources.  This session will continue to run, but you may notice some of your previously saved preferences are not available.",Rh);a=kc(this.o,
["storage","writeType"])||"local";this.l=this.U=!0;Jj(this,a);this.u.init();E.info(Hj,"Settings finished loading");this.dispatchEvent(new A("loaded"))};
function Jj(a,b){a.ka=!0;var c=a.g;c.l=b;fj(c);c.j?(E.ta(Hj,"Updated setting write type to "+b),a.A=!0):(E.error(Hj,"Updated setting write type to '"+b+"', but there was no accessible, registered storage to match.  Peristence will be disabled."),kca(a),Kj(a,"Failed to save settings to the configured storage type"));c=gj(a.g);E.info(Hj,"Storage write location is now: "+(c?c.name:"not assigned"));a.set("storage.writeType",b,!0);window.localStorage.setItem("opensphere.config.storage.writeType",b)}
g.save=function(a){this.I&&this.I.stop();if(this.A&&this.l&&this.G){this.G=!1;var b=gj(this.g);if(b){this.dispatchEvent(new A("willSave"));var c=this.j.user;ji(c);var d=!this.ka&&b.cD?this.P:c;this.P={};E.ta(Hj,"Saving settings...");c=rb(ii());lb(c,gi.slice());null!=a&&(d=a);return new Kc(function(a,c){uh(lca(b,d),function(){E.ta(Hj,"Settings saved");this.ka=!1;gi.length=0;hb(ii());var b=this.g.l;b&&Lj(this,b,!0);b=0;for(var c=this.K.length;b<c;b++){var d=this.K[b];Bj(this.u,d.namespace,d)}this.K=
[];mca(this);a()},function(a){var b=gj(this.g),d=this.g.l;E.error(Hj,"Failed to save settings to "+b.name+".  Attempting to find another suitable storage of type "+d);this.G=!0;Lj(this,d);b.Jg=10>this.B[d];Jj(this,d);c(a)},this)},this)}if(!this.A)return Kj(this),E.hb(Hj,"Settings could not be saved, no accessible, writable storage was found in the registry."),this.dispatchEvent(new A("saved")),Tc("Settings could not be saved, no accessible, writable storage was found in the registry.")}return Sc()};
function Lj(a,b,c){a.B.hasOwnProperty(b)?a.B[b]=c?0:a.B[b]+1:a.B[b]=0}function mca(a){var b=dca(a.g);if(b.length){var c=[];b.forEach(function(a){E.ta(Hj,"Clearing settings from "+a.name+" since it is not the designated write storage and all settings have been merged.");c.push(Nj(a,"core"));c.push(Nj(a,"opensphere"));a.Om=!1},a);vh(new Eh(c),a.wH,a)}}
g.wH=function(a){db(a,function(a){return a[0]},this)||E.hb(Hj,"Failed to clear one or more of the setting storages after switching write location. If this storage becomes accessible in the future, the remnant settings may affect application preferences since they will be merged with the others upon session initialization.");this.dispatchEvent(new A("saved"))};g.update=function(){E.ta(Hj,"Settings updated");this.dispatchEvent(new A("updated"))};
g.reset=function(a){var b=a||"opensphere";E.info(Hj,"Resetting settings for the application namespace: "+b);return new Kc(function(a,d){var c=this.get("storage.writeType",window.localStorage.getItem("opensphere.config.storage.writeType")||"local"),f=gj(this.g);f?Vc([Nj(f,"core"),Nj(f,b)]).then(function(){E.ta(Hj,"Reset settings success");this.j.user={};"remote"!==c||this.g.o?this.set("storage.writeType",c,!0):this.set("storage.writeType","local",!0);O(P.s(),nca,1);var e=P.s();e.j?(e.save(),(e.o?e.o:
new Oj).ty()):E.hb(Pj,"Metrics were not published: "+(e.j?"storage not available":"not enabled"));localStorage.setItem("resetDate",b+" "+(new Date).toISOString());this.set("reset.last",Date());this.save().then(a,d)},function(a){a="Reset settings failed"+(a?": "+a:"");E.error(Hj,a);d(a)},this):d("Write storage not available.")},this)};
g.get=function(a,b){"string"==typeof a&&(a=a.split("."));if(this.l)return a=kc(this.o,a),q(a)?a=rb(a):Ba(a)&&(a=vc(a)),void 0!==a?a:b;throw Error("Attempted to get a value before settings were loaded!");};
g.set=function(a,b,c){if(this.l){"string"==typeof a&&(a=a.split("."));var d=this.get(a);"object"!==typeof b||b instanceof Object||b instanceof Array||(b=fi(b));ai(this.o,a,b);var e=void 0!==kc(this.j.admin,a),f=[];e||(f=ni(a),ai(this.j.user,f,b));d!=b&&(e||(ai(this.P,f,b),Qj(a,b,d)),Ij(this,a,b,d,c))}else throw Error("Attempted to set a value before settings were loaded!");};Gj.prototype.set=Gj.prototype.set;
function Ij(a,b,c,d,e){var f=b.join(".");a.dispatchEvent(new hj(f,c,d));e||(a.G=!0,d=ni(b),"storage.writeType"==f?Bj(a.u,d[0],{keys:b,newValue:c}):ib(a.K,{namespace:d[0],keys:b}),a.I&&a.I.start())}function Qj(a,b,c){if("object"===ya(c)){c=jc(bi(c));var d=null!=b?jc(bi(b)):[],e=a.join(".");$a(c,function(a){gb(d,a)||ib(gi,li(e+"."+a))})}}function Kj(a,b){E.error(Hj,b||"Failed to connect to user settings");a.A=!1}
function kca(a){setTimeout(t(function(){var a=new C;this.Ua("storage.writeType",function(){a.dispatchEvent(new A("dismissAlert"))},!1,this);rj(qj.s(),"<strong>Settings are unavailable!</strong> This session will continue to run without any previously saved options, and any changes you make will not be remembered for the next session.",Qh,void 0,1,a)},a),10)}Gj.prototype.di=function(){return["core","opensphere"]};
Gj.prototype.ad=function(a){a.keys&&"storage.writeType"===a.keys.join(".")?Jj(this,a.newValue):(a.oldValue=this.get(a.keys),this.O.push(a),this.sa.start())};var M=Gj.s();function Rj(){C.call(this);this.o=this.ready=!1;this.l=void 0;this.g=[];this.j={}}w(Rj,C);xa(Rj);var Sj=E.V("os.plugin.PluginManager");g=Rj.prototype;g.J=function(){Rj.C.J.call(this);this.g.forEach(function(a){a.dispose()});this.g.length=0};function Tj(a,b){a.o?a.Lu(b)&&(a.g.push(b),a.yv(b)):a.g.push(b)}
g.yv=function(a){this.j[a.D()]=!1;E.ta(Sj,"Initializing plugin "+a.D());try{var b=a.init();b?Xc(b.then(function(){E.ta(Sj,"Initialized plugin "+a.D())},function(){E.hb(Sj,"Error loading plugin "+a.D()+": "+a.getError())},this),this.Fq.bind(this,a)):this.Fq(a)}catch(c){E.error(Sj,"Error loading plugin "+a.D(),c),this.Fq(a)}};
g.init=function(){E.info(Sj,"Initializing plugins ...");this.o=!0;this.g=this.g.filter(this.Lu,this);if(0<this.g.length){var a=M.get("plugin.initTimeout",1E4);this.l=setTimeout(this.OI.bind(this),a);this.g.forEach(this.yv,this)}else Uj(this)};g.OI=function(){this.l=void 0;var a=[],b;for(b in this.j)this.j[b]||a.push(b);E.hb(Sj,"Plugin initialization timed out for the following plugin(s): "+a.join(", "));Uj(this)};
g.Lu=function(a){var b=a.D();b=M.get(["plugins",b],!0);return b||null===b?!0:(E.info(Sj,"Plugin "+a.D()+" is disabled and will not be added."),a.dispose(),!1)};function Uj(a){a.ready||(E.info(Sj,"Finished loading plugins"),null!=a.l&&(clearTimeout(a.l),a.l=void 0),a.ready=!0,a.dispatchEvent("load"))}g.Fq=function(a){this.j[a.D()]=!0;a=0;for(var b=this.g.length;a<b;a++)if(!this.j[this.g[a].D()])return;Uj(this)};var oca={area:!0,base:!0,br:!0,col:!0,command:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0};function Vj(){this.g="";this.j=Wj}Vj.prototype.Af=!0;Vj.prototype.Ce=function(){return this.g};Vj.prototype.kq=!0;Vj.prototype.Si=function(){return 1};function Xj(a){if(a instanceof Vj&&a.constructor===Vj&&a.j===Wj)return a.g;ya(a);return"type_error:SafeUrl"}var Yj=/^(?:(?:https?|mailto|ftp):|[^:/?#]*(?:[/?#]|$))/i;function Zj(a){if(a instanceof Vj)return a;a=a.Af?a.Ce():String(a);Yj.test(a)||(a="about:invalid#zClosurez");return ak(a)}var Wj={};function ak(a){var b=new Vj;b.g=a;return b}ak("about:blank");function bk(){this.g="";this.j=ck}bk.prototype.Af=!0;var ck={};bk.prototype.Ce=function(){return this.g};function dk(a){var b=new bk;b.g=a;return b}var pca=dk("");function ek(a){if(a instanceof Vj)a='url("'+Xj(a).replace(/</g,"%3c").replace(/[\\"]/g,"\\$&")+'")';else if(a instanceof si)a=ui(a);else{a=String(a);var b=a.replace(qca,"$1").replace(fk,"url");if(b=rca.test(b)){for(var c=b=!0,d=0;d<a.length;d++){var e=a.charAt(d);"'"==e&&c?b=!b:'"'==e&&b&&(c=!c)}b=b&&c}a=b?sca(a):"zClosurez"}return a}
var rca=/^[-,."'%_!# a-zA-Z0-9]+$/,fk=/\b(url\([ \t\n]*)('[ -&(-\[\]-~]*'|"[ !#-\[\]-~]*"|[!#-&*-\[\]-~]*)([ \t\n]*\))/g,qca=/\b(hsl|hsla|rgb|rgba|(rotate|scale|translate)(X|Y|Z|3d)?)\([-0-9a-z.%, ]+\)/g;function sca(a){return a.replace(fk,function(a,c,d,e){var b="";d=d.replace(/^(['"])(.*)\1$/,function(a,c,d){b=c;return d});a=Zj(d).Ce();return c+b+a+b+e})};function gk(){this.g="";this.j=hk}gk.prototype.Af=!0;var hk={};function ik(a){function b(a){q(a)?$a(a,b):c+=jk(a)}var c="";$a(arguments,b);return kk(c)}function lk(a){a=ui(a);return 0===a.length?tca:kk(a)}gk.prototype.Ce=function(){return this.g};function jk(a){if(a instanceof gk&&a.constructor===gk&&a.j===hk)return a.g;ya(a);return"type_error:SafeStyleSheet"}function kk(a){var b=new gk;b.g=a;return b}var tca=kk("");function mk(){this.g="";this.l=nk;this.j=null}mk.prototype.kq=!0;mk.prototype.Si=function(){return this.j};mk.prototype.Af=!0;mk.prototype.Ce=function(){return this.g};function ok(a){if(a instanceof mk&&a.constructor===mk&&a.l===nk)return a.g;ya(a);return"type_error:SafeHtml"}function pk(a){if(a instanceof mk)return a;var b=null;a.kq&&(b=a.Si());a=Ob(a.Af?a.Ce():String(a));return qk(a,b)}
function rk(a){if(a instanceof mk)return a;a=pk(a);var b=ok(a);b=Nb(b.replace(/  /g," &#160;"),void 0);return qk(b,a.Si())}var sk=/^[a-zA-Z0-9-]+$/,uca={action:!0,cite:!0,data:!0,formaction:!0,href:!0,manifest:!0,poster:!0,src:!0},vca={APPLET:!0,BASE:!0,EMBED:!0,IFRAME:!0,LINK:!0,MATH:!0,META:!0,OBJECT:!0,SCRIPT:!0,STYLE:!0,SVG:!0,TEMPLATE:!0};
function tk(a,b,c){var d=String(a);if(!sk.test(d))throw Error("Invalid tag name <"+d+">.");if(d.toUpperCase()in vca)throw Error("Tag name <"+d+"> is not allowed for SafeHtml.");return uk(String(a),b,c)}
function vk(a){var b={type:"text/css"},c={},d={},e;for(e in b)d[e]=b[e];for(e in c)d[e]=c[e];for(e in void 0){var f=e.toLowerCase();if(f in b)throw Error('Cannot override "'+f+'" attribute, got "'+e+'" with value "'+(void 0)[e]+'"');f in c&&delete d[f];d[e]=(void 0)[e]}b="";a=pb(a);for(c=0;c<a.length;c++)b+=jk(a[c]);a=qk(b,0);return uk("style",d,a)}function wk(a){function b(a){q(a)?$a(a,b):(a=pk(a),d+=ok(a),a=a.Si(),0==c?c=a:0!=a&&c!=a&&(c=null))}var c=0,d="";$a(arguments,b);return qk(d,c)}
var nk={};function qk(a,b){var c=new mk;c.g=a;c.j=b;return c}
function uk(a,b,c){var d=null,e="";if(b)for(n in b){if(!sk.test(n))throw Error('Invalid attribute name "'+n+'".');var f=b[n];if(null!=f){var h=a;var k=n;var l=f;if(l instanceof si)l=ui(l);else if("style"==k.toLowerCase()){f=void 0;h=l;if(!Ba(h))throw Error('The "style" attribute requires goog.html.SafeStyle or map of style properties, '+typeof h+" given: "+h);if(!(h instanceof bk)){l="";for(f in h){if(!/^[-_a-zA-Z0-9]+$/.test(f))throw Error("Name allows only [-_a-zA-Z0-9], got: "+f);var m=h[f];null!=
m&&(m=q(m)?bb(m,ek).join(" "):ek(m),l+=f+":"+m+";")}h=l?dk(l):pca}h instanceof bk&&h.constructor===bk&&h.j===ck?f=h.g:(ya(h),f="type_error:SafeStyle");l=f}else{if(/^on/i.test(k))throw Error('Attribute "'+k+'" requires goog.string.Const value, "'+l+'" given.');if(k.toLowerCase()in uca)if(l instanceof wi)l=yi(l);else if(l instanceof Vj)l=Xj(l);else if(ta(l))l=Zj(l).Ce();else throw Error('Attribute "'+k+'" on tag "'+h+'" requires goog.html.SafeUrl, goog.string.Const, or string, value "'+l+'" given.');
}l.Af&&(l=l.Ce());k=k+'="'+Ob(String(l))+'"';e+=" "+k}}var n="<"+a+e;null!=c?q(c)||(c=[c]):c=[];!0===oca[a.toLowerCase()]?n+=">":(d=wk(c),n+=">"+ok(d)+"</"+a+">",d=d.Si());(a=b&&b.dir)&&(/^(ltr|rtl|auto)$/i.test(a)?d=0:d=null);return qk(n,d)}qk("<!DOCTYPE html>",0);var xk=qk("",0),yk=qk("<br>",0);var zk=null;function Ak(a){if(a)try{return jf=jf||zk.get("$sanitize"),jf(a)}catch(b){void 0===jf?console.error("$santize service unavailable!"):void 0===zk&&console.error("os.ui.injector service never defined!")}return a}function wca(a){if(a){var b={"<":"&lt;",">":"&gt;"};return String(a).replace(/[<>]/g,function(a){return b[a]})}return a}var Q=angular.module("os.ui",["ui.directives","ngAnimate","ngSanitize"]);
function Bk(a,b,c){var d=angular.element("#measureText");d&&0!==d.length||(d=$('<div id="measureText" class="u-offscreen"></div>').appendTo("body"));if(d&&0<d.length){var e="u-offscreen ";b&&(e+=b);d[0].setAttribute("class",e);d.css("font",c||"");d.html(a.replace(/\n/g,"<br>"));return new Te(d.width(),d.height())}return new Te(0,0)}function R(a,b){if(null!=b&&0<=b)setTimeout(function(){R(a)},b);else try{!a||a.$root&&a.$root.$$phase||a.$apply()}catch(c){}}
function Ck(a){if(zk){var b=zk.get("$browser");b&&b.notifyWhenNoOutstandingRequests(a)}}
(function(){if(void 0!==window.jQuery){var a=window.jQuery;if(a.fn&&a.fn.typeahead){a.extend(a.fn.typeahead.Constructor.prototype,{getSelectedValue:function(){return this.$menu.find(".active").attr("data-value")},setInputValue:function(a){if(!a)return null;this.$element.val(this.updater(a)).change();return this},expandInputValueToSelection:function(){var a=this.getSelectedValue();a||(this.next(),a=this.getSelectedValue());return this.setInputValue(a)},select:function(a){var b=this.getSelectedValue();
if(!b)return this;if(b){var c={"&lt;":"<","&gt;":">"},f;for(f in c)b=b.replace(RegExp(f,"g"),c[f])}this.setInputValue(b);(a||void 0==a)&&this.hide();return this},render:function(b){var c=this;b=a(b).map(function(b,d){d=wca(d);b=a(c.options.item).attr("data-value",d);b.find("a").html(c.highlighter(d));return b[0]});this.$menu.html(b);return this},next:function(){var b=this.$menu.find(".active").removeClass("active");b.find("a").removeClass("active");b=b.next();b.length||(b=a(this.$menu.find("li")[0]));
b.addClass("active");b.find("a").addClass("active")},prev:function(){var a=this.$menu.find(".active").removeClass("active");a.find("a").removeClass("active");a=a.prev();a.length||(a=this.$menu.find("li").last());a.addClass("active");a.find("a").addClass("active")},move:function(a){if(this.shown){switch(a.keyCode){case 27:a.preventDefault();break;case 13:if(!this.shown)return;this.select();return;case 38:a.preventDefault();this.prev();break;case 40:"keypress"!=a.type&&(a.preventDefault(),this.next())}a.stopPropagation()}},
keydown:function(b){this.suppressKeyPressRepeat=~a.inArray(b.keyCode,[40,38,39,13,27]);this.move(b)},keyup:function(a){switch(a.keyCode){case 40:case 38:case 16:case 17:case 18:break;case 39:if(!this.shown)return;this.expandInputValueToSelection().hide();break;case 13:case 27:if(!this.shown)return;this.hide();break;default:this.lookup()}a.stopPropagation();a.preventDefault()},click:function(a){a.preventDefault();this.select()}});a.fn.typeahead.defaults.item='<li><a tabindex="-1" class="dropdown-item text-truncate" href=""></a></li>';
a.fn.typeahead.defaults.menu='<ul class="typeahead dropdown-menu mw-100"></ul>';od&&(a.fn.modal.Constructor.prototype.enforceFocus=wa);var b=a.fn.typeahead.Constructor.prototype.enforceFocus;a.extend(a.fn.typeahead.Constructor.prototype,{enforceFocus:function(){a(document).on("focusin.modal",t(function(c){a(c.target).hasClass("select2-input")||b.call(this)},this))}})}}})();
(function(){if(void 0!==window.jQuery){var a=window.jQuery;a.datepicker&&a.extend(a.datepicker,{_checkOffset:function(b,c,d){var e=b.dpDiv.outerWidth(),f=b.dpDiv.outerHeight(),h=b.input?b.input.outerWidth():0,k=b.input?b.input.outerHeight():0,l=document.documentElement.clientWidth+(d?0:a(document).scrollLeft()),m=document.documentElement.clientHeight+(d?0:a(document).scrollTop());c.left-=this._get(b,"isRTL")?e-h:0;c.left-=d&&c.left==b.input.offset().left?a(document).scrollLeft():0;c.top-=ne(d&&c.top,
b.input.offset().top+k,1)?a(document).scrollTop():0;c.left-=Math.min(c.left,c.left+e>l&&l>e?Math.abs(c.left+e-l):0);c.top-=Math.min(c.top,c.top+f>m&&m>f?Math.abs(f+k):0);return c}})}})();var Dk={},Ek=new C;function Fk(a,b,c){a in Dk||(Dk[a]=[]);Dk[a].push({aw:b,priority:c||0});Dk[a].sort(xca);Ek.dispatchEvent(new K(a))}function xca(a,b){return a.priority-b.priority}function yca(a){var b=null,c=Dk["js-nav-icon__selectors"];c&&(b=eb(c,function(b){return b.aw==a}));return!!b}Q.directive("list",[function(){return{restrict:"A",controller:Gk,link:zca}}]);function zca(a,b,c,d){b=c.listId;d.id=b;if(a=Dk[b]||a.$eval(c.listItems))d.items=a;d.j=c.listPrefix;d.l=c.listSuffix;Hk(d)}
function Gk(a,b,c){this.scope=a;this.L=b;this.g=c;this.id=null;this.items=[];this.l=this.j="";Ek.H("propertychange",this.jd,!1,this);a.$on("$destroy",this.o.bind(this))}Gk.$inject=["$scope","$element","$compile"];Gk.prototype.o=function(){Ek.M("propertychange",this.jd,!1,this);this.g=this.L=this.scope=null;this.items.forEach(function(a){a.element=void 0})};Gk.prototype.jd=function(a){var b=a.u,c=a.o;a.j===this.id&&(b&&!c?(Ik(b.element[0]),this.scope.$emit("list:change")):Hk(this))};
function Hk(a){var b=Dk[a.id||""]||a.items,c=a.j||"",d=a.l||"";if(b){for(var e=0,f=b.length;e<f;e++){var h=b[e];if(!h.element){var k=h.aw;-1===k.indexOf("<")&&(k="<"+k+"></"+k+">");k=c+k+d;if(a.scope){var l=a.scope.$new();h.element=a.g(k)(l);h.scope=l}}h.element&&a.L.append(h.element)}a.scope.$emit("list:change")}};function Jk(){this.g={}}xa(Jk);var Aca=E.V("os.webgl.SynchronizerManager");function Kk(a,b,c){b in a.g?E.error(Aca,"A synchronizer of that type is already registered!"):a.g[b]=c};function Lk(a,b,c){void 0===c&&(c=[0,0]);c[0]=a[0]*b+.5|0;c[1]=a[1]*b+.5|0;return c}function Mk(a,b){if(Array.isArray(a))return a;void 0===b?b=[a,a]:b[0]=b[1]=a;return b};function Nk(a){for(var b=Ok(),c=0,d=a.length;c<d;++c)Pk(b,a[c]);return b}function Qk(a,b,c){return c?(c[0]=a[0]-b,c[1]=a[1]-b,c[2]=a[2]+b,c[3]=a[3]+b,c):[a[0]-b,a[1]-b,a[2]+b,a[3]+b]}function Rk(a,b){return b?(b[0]=a[0],b[1]=a[1],b[2]=a[2],b[3]=a[3],b):a.slice()}function Sk(a,b){var c=b[0];b=b[1];return a[0]<=c&&c<=a[2]&&a[1]<=b&&b<=a[3]}function Tk(a,b){return a[0]<=b[0]&&b[2]<=a[2]&&a[1]<=b[1]&&b[3]<=a[3]}function Ok(){return[Infinity,Infinity,-Infinity,-Infinity]}
function Uk(a,b,c,d,e){return e?(e[0]=a,e[1]=b,e[2]=c,e[3]=d,e):[a,b,c,d]}function Vk(a){return Uk(Infinity,Infinity,-Infinity,-Infinity,a)}function Wk(a,b){var c=a[0];a=a[1];return Uk(c,a,c,a,b)}function Xk(a,b){return a[0]==b[0]&&a[2]==b[2]&&a[1]==b[1]&&a[3]==b[3]}function Yk(a,b){b[0]<a[0]&&(a[0]=b[0]);b[2]>a[2]&&(a[2]=b[2]);b[1]<a[1]&&(a[1]=b[1]);b[3]>a[3]&&(a[3]=b[3]);return a}function Pk(a,b){b[0]<a[0]&&(a[0]=b[0]);b[0]>a[2]&&(a[2]=b[0]);b[1]<a[1]&&(a[1]=b[1]);b[1]>a[3]&&(a[3]=b[1])}
function Zk(a,b,c,d,e){for(;c<d;c+=e){var f=a,h=b[c],k=b[c+1];f[0]=Math.min(f[0],h);f[1]=Math.min(f[1],k);f[2]=Math.max(f[2],h);f[3]=Math.max(f[3],k)}return a}function $k(a){var b=0;al(a)||(b=bl(a)*cl(a));return b}function dl(a){return[(a[0]+a[2])/2,(a[1]+a[3])/2]}
function el(a,b,c,d,e){var f=b*d[0]/2;d=b*d[1]/2;b=Math.cos(c);var h=Math.sin(c);c=f*b;f*=h;b*=d;var k=d*h,l=a[0],m=a[1];a=l-c+k;d=l-c-k;h=l+c-k;c=l+c+k;k=m-f-b;l=m-f+b;var n=m+f+b;f=m+f-b;return Uk(Math.min(a,d,h,c),Math.min(k,l,n,f),Math.max(a,d,h,c),Math.max(k,l,n,f),e)}function cl(a){return a[3]-a[1]}function fl(a,b){var c=Ok();gl(a,b)&&(c[0]=a[0]>b[0]?a[0]:b[0],c[1]=a[1]>b[1]?a[1]:b[1],c[2]=a[2]<b[2]?a[2]:b[2],c[3]=a[3]<b[3]?a[3]:b[3]);return c}function bl(a){return a[2]-a[0]}
function gl(a,b){return a[0]<=b[2]&&a[2]>=b[0]&&a[1]<=b[3]&&a[3]>=b[1]}function al(a){return a[2]<a[0]||a[3]<a[1]}function hl(a,b){var c=(a[2]-a[0])/2*(b-1);b=(a[3]-a[1])/2*(b-1);a[0]-=c;a[2]+=c;a[1]-=b;a[3]+=b};/*

 Latitude/longitude spherical geodesy formulae taken from
 http://www.movable-type.co.uk/scripts/latlong.html
 Licensed under CC-BY-3.0.
*/
function il(a){this.radius=a}il.prototype.offset=function(a,b,c){var d=Of(a[1]);b/=this.radius;var e=Math.asin(Math.sin(d)*Math.cos(b)+Math.cos(d)*Math.sin(b)*Math.cos(c));return[180*(Of(a[0])+Math.atan2(Math.sin(c)*Math.sin(b)*Math.cos(d),Math.cos(b)-Math.sin(d)*Math.sin(e)))/Math.PI,180*e/Math.PI]};
function jl(a,b){var c=Of(a[1]),d=Of(b[1]),e=(d-c)/2;a=Of(b[0]-a[0])/2;c=Math.sin(e)*Math.sin(e)+Math.sin(a)*Math.sin(a)*Math.cos(c)*Math.cos(d);return 2*Bca.radius*Math.atan2(Math.sqrt(c),Math.sqrt(1-c))};var kl={};kl.degrees=12741994*Math.PI/360;kl.ft=.3048;kl.m=1;kl["us-ft"]=1200/3937;function ll(a){this.Rb=a.code;this.o=a.units;this.l=void 0!==a.extent?a.extent:null;this.Fo=void 0!==a.worldExtent?a.worldExtent:null;this.Ch=void 0!==a.axisOrientation?a.axisOrientation:"enu";this.j=void 0!==a.global?a.global:!1;this.g=!(!this.j||!this.l);this.B=a.getPointResolution;this.u=null;this.A=a.metersPerUnit;var b=a.code,c=window.proj4;"function"==typeof c&&(b=c.defs(b),void 0!==b&&(void 0!==b.axis&&void 0===a.axisOrientation&&(this.Ch=b.axis),void 0===a.metersPerUnit&&(this.A=b.to_meter),
void 0===a.units&&(this.o=b.units)))}ll.prototype.Y=function(){return this.l};ll.prototype.Tc=function(){return this.o};function ml(a){return a.A||kl[a.o]}ll.prototype.Th=function(){return this.j};ll.prototype.Cc=function(a){this.l=a;this.g=!(!this.j||!a)};function nl(a){ll.call(this,{code:a,units:"m",extent:Cca,global:!0,worldExtent:Dca,getPointResolution:function(a,c){return a/vba(c[1]/6378137)}})}I(nl,ll);var pl=6378137*Math.PI,Cca=[-pl,-pl,pl,pl],Dca=[-180,-85,180,85],ql=[new nl("EPSG:3857"),new nl("EPSG:102100"),new nl("EPSG:102113"),new nl("EPSG:900913"),new nl("urn:ogc:def:crs:EPSG:6.18:3:3857"),new nl("urn:ogc:def:crs:EPSG::3857"),new nl("http://www.opengis.net/gml/srs/epsg.xml#3857")];function rl(a,b){ll.call(this,{code:a,units:"degrees",extent:ul,axisOrientation:b,global:!0,metersPerUnit:Eca,worldExtent:ul})}I(rl,ll);var ul=[-180,-90,180,90],Eca=6378137*Math.PI/180,vl=[new rl("CRS:84"),new rl("EPSG:4326","neu"),new rl("urn:ogc:def:crs:EPSG::4326","neu"),new rl("urn:ogc:def:crs:EPSG:6.6:4326","neu"),new rl("urn:ogc:def:crs:OGC:1.3:CRS84"),new rl("urn:ogc:def:crs:OGC:2:84"),new rl("http://www.opengis.net/gml/srs/epsg.xml#4326","neu"),new rl("urn:x-ogc:def:crs:EPSG:4326","neu")];var wl={};var xl={};function yl(a,b,c){a=a.Rb;b=b.Rb;a in xl||(xl[a]={});xl[a][b]=c}function zl(a,b){a=a.Rb;delete xl[a][b.Rb];rf(xl[a])&&delete xl[a]}function Al(a,b){var c;a in xl&&b in xl[a]&&(c=xl[a][b]);return c};var Bca=new il(6371008.8);function Bl(a,b,c,d){a=Cl(a);var e=a.B;e?b=e(b,c):"degrees"==a.Tc()&&!d||"degrees"==d||(e=Dl(a,Cl("EPSG:4326")),b=[c[0]-b/2,c[1],c[0]+b/2,c[1],c[0],c[1]-b/2,c[0],c[1]+b/2],b=e(b,b,2),c=b.slice(0,2),e=b.slice(2,4),c=jl(c,e),e=b.slice(4,6),b=b.slice(6,8),b=(c+jl(e,b))/2,a=d?kl[d]:ml(a),void 0!==a&&(b/=a));return b}function El(a){a.forEach(Fl);a.forEach(function(b){a.forEach(function(a){b!==a&&yl(b,a,Gl)})})}
function Hl(a,b,c,d){a.forEach(function(a){b.forEach(function(b){yl(a,b,c);yl(b,a,d)})})}function Fl(a){wl[a.Rb]=a;yl(a,a,Gl)}function Il(a){return a?"string"===typeof a?Cl(a):a:Cl("EPSG:3857")}function Jl(a){return function(b,c,d){var e=b.length;d=void 0!==d?d:2;c=void 0!==c?c:Array(e);var f;for(f=0;f<e;f+=d){var h=a([b[f],b[f+1]]);c[f]=h[0];c[f+1]=h[1];for(h=d-1;2<=h;--h)c[f+h]=b[f+h]}return c}}function Kl(a,b){return Ll(a,"EPSG:4326",void 0!==b?b:"EPSG:3857")}
function Ml(a,b){a=Ll(a,void 0!==b?b:"EPSG:3857","EPSG:4326");b=a[0];if(-180>b||180<b)a[0]=Pf(b+180,360)-180;return a}function Cl(a){var b=null;if(a instanceof ll)b=a;else if("string"===typeof a&&(b=wl[a]||null,!b)){var c=window.proj4;"function"==typeof c&&void 0!==c.defs(a)&&(b=new ll({code:a}),Fl(b))}return b}function Nl(a,b){if(a===b)return!0;var c=a.Tc()===b.Tc();return a.Rb===b.Rb?c:Dl(a,b)===Gl&&c}function Ol(a,b){a=Cl(a);b=Cl(b);return Dl(a,b)}
function Dl(a,b){var c=a.Rb,d=b.Rb,e=Al(c,d);if(!e){var f=window.proj4;if("function"==typeof f){var h=f.defs(c),k=f.defs(d);void 0!==h&&void 0!==k&&(h===k?El([b,a]):(f=f(d,c),e=f.forward,f=f.inverse,b=Cl(b),a=Cl(a),yl(b,a,Jl(e)),yl(a,b,Jl(f))),e=Al(c,d))}}e||(e=Pl);return e}function Pl(a,b){if(void 0!==b&&a!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}return a}function Gl(a,b){if(void 0!==b){for(var c=0,d=a.length;c<d;++c)b[c]=a[c];a=b}else a=a.slice();return a}
function Ll(a,b,c){return Ol(b,c)(a,void 0,a.length)}function Ql(a,b,c){b=Ol(b,c);a=[a[0],a[1],a[0],a[3],a[2],a[1],a[2],a[3]];b(a,a,2);c=[a[0],a[2],a[4],a[6]];var d=[a[1],a[3],a[5],a[7]];a=Math.min.apply(null,c);b=Math.min.apply(null,d);c=Math.max.apply(null,c);d=Math.max.apply(null,d);return Uk(a,b,c,d,void 0)}El(ql);El(vl);
Hl(vl,ql,function(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c){b[e]=pl*a[e]/180;var f=6378137*Math.log(Math.tan(Math.PI*(a[e+1]+90)/360));f>pl?f=pl:f<-pl&&(f=-pl);b[e+1]=f}return b},function(a,b,c){var d=a.length;c=1<c?c:2;void 0===b&&(2<c?b=a.slice():b=Array(d));for(var e=0;e<d;e+=c)b[e]=180*a[e]/pl,b[e+1]=360*Math.atan(Math.exp(a[e+1]/6378137))/Math.PI-90;return b});function Rl(a,b,c,d){this.minX=a;this.maxX=b;this.minY=c;this.maxY=d}function Sl(a,b,c,d,e){return void 0!==e?(e.minX=a,e.maxX=b,e.minY=c,e.maxY=d,e):new Rl(a,b,c,d)}Rl.prototype.contains=function(a){return Tl(this,a[1],a[2])};function Tl(a,b,c){return a.minX<=b&&b<=a.maxX&&a.minY<=c&&c<=a.maxY}Rl.prototype.equals=function(a){return this.minX==a.minX&&this.minY==a.minY&&this.maxX==a.maxX&&this.maxY==a.maxY};
Rl.prototype.extend=function(a){a.minX<this.minX&&(this.minX=a.minX);a.maxX>this.maxX&&(this.maxX=a.maxX);a.minY<this.minY&&(this.minY=a.minY);a.maxY>this.maxY&&(this.maxY=a.maxY)};function Ul(a,b){return a>b?1:a<b?-1:0}function Vl(a,b,c){var d=a.length;if(a[0]<=b)return 0;if(!(b<=a[d-1]))if(0<c)for(c=1;c<d;++c){if(a[c]<b)return c-1}else if(0>c)for(c=1;c<d;++c){if(a[c]<=b)return c}else for(c=1;c<d;++c){if(a[c]==b)return c;if(a[c]<b)return a[c-1]-b<b-a[c]?c-1:c}return d-1}function Wl(a,b){var c=Array.isArray(b)?b:[b],d=c.length;for(b=0;b<d;b++)a[a.length]=c[b]}function Fca(a,b){for(var c=a.length>>>0,d,e=0;e<c;e++)if(d=a[e],b(d,e,a))return d;return null}
function Xl(a,b){var c=a.length;if(c!==b.length)return!1;for(var d=0;d<c;d++)if(a[d]!==b[d])return!1;return!0}function Yl(a,b){var c=a.length,d=Array(a.length),e;for(e=0;e<c;e++)d[e]={index:e,value:a[e]};d.sort(function(a,c){return b(a.value,c.value)||a.index-c.index});for(e=0;e<a.length;e++)a[e]=d[e].value}function Gca(a,b){var c=b||Ul;return a.every(function(b,e){if(0===e)return!0;b=c(a[e-1],b);return!(0<b||0===b)})};function Zl(a){this.minZoom=void 0!==a.minZoom?a.minZoom:0;this.g=a.resolutions;Mf(Gca(this.g,function(a,b){return b-a}),17);if(!a.origins)for(var b=0,c=this.g.length-1;b<c;++b)if(!d)var d=this.g[b]/this.g[b+1];else if(this.g[b]/this.g[b+1]!==d){d=void 0;break}this.A=d;this.maxZoom=this.g.length-1;this.j=void 0!==a.origin?a.origin:null;this.l=null;void 0!==a.origins&&(this.l=a.origins,Mf(this.l.length==this.g.length,20));d=a.extent;void 0===d||this.j||this.l||(this.j=[d[0],d[3]]);Mf(!this.j&&this.l||
this.j&&!this.l,18);this.o=null;void 0!==a.tileSizes&&(this.o=a.tileSizes,Mf(this.o.length==this.g.length,19));this.G=void 0!==a.tileSize?a.tileSize:this.o?null:256;Mf(!this.G&&this.o||this.G&&!this.o,22);this.I=void 0!==d?d:null;this.B=null;this.u=[0,0];void 0!==a.sizes?this.B=a.sizes.map(function(a){return new Rl(Math.min(0,a[0]),Math.max(a[0]-1,-1),Math.min(0,a[1]),Math.max(a[1]-1,-1))},this):d&&Hca(this,d)}var $l=[0,0,0];
function am(a,b,c,d,e){var f=null,h=b[0]-1;if(2===a.A){var k=b[1];var l=b[2]}else f=bm(a,b,e);for(;h>=a.minZoom;){2===a.A?(k=Math.floor(k/2),l=Math.floor(l/2),b=Sl(k,k,l,l,d)):b=cm(a,f,h,d);if(c.call(null,h,b))return!0;--h}return!1}Zl.prototype.Y=function(){return this.I};function dm(a,b){return a.j?a.j:a.l[b]}Zl.prototype.bb=function(a){return this.g[a]};Zl.prototype.fg=function(){return this.g};
function em(a,b,c,d){if(b[0]<a.maxZoom){if(2===a.A)return a=2*b[1],b=2*b[2],Sl(a,a+1,b,b+1,c);d=bm(a,b,d);return cm(a,d,b[0]+1,c)}return null}function Ica(a,b,c){var d=dm(a,b),e=a.bb(b);a=Mk(fm(a,b),a.u);return Uk(d[0]+c.minX*a[0]*e,d[1]+c.minY*a[1]*e,d[0]+(c.maxX+1)*a[0]*e,d[1]+(c.maxY+1)*a[1]*e,void 0)}function cm(a,b,c,d){gm(a,b[0],b[1],c,!1,$l);var e=$l[1],f=$l[2];gm(a,b[2],b[3],c,!0,$l);return Sl(e,$l[1],f,$l[2],d)}
function hm(a,b){var c=dm(a,b[0]),d=a.bb(b[0]);a=Mk(fm(a,b[0]),a.u);return[c[0]+(b[1]+.5)*a[0]*d,c[1]+(b[2]+.5)*a[1]*d]}function bm(a,b,c){var d=dm(a,b[0]),e=a.bb(b[0]);a=Mk(fm(a,b[0]),a.u);var f=d[0]+b[1]*a[0]*e;b=d[1]+b[2]*a[1]*e;return Uk(f,b,f+a[0]*e,b+a[1]*e,c)}
function gm(a,b,c,d,e,f){var h=dm(a,d),k=a.bb(d);a=Mk(fm(a,d),a.u);b=Math.floor((b-h[0])/k+(e?.5:0))/a[0];c=Math.floor((c-h[1])/k+(e?0:.5))/a[1];e?(b=Math.ceil(b)-1,c=Math.ceil(c)-1):(b=Math.floor(b),c=Math.floor(c));e=b;void 0!==f?(f[0]=d,f[1]=e,f[2]=c,d=f):d=[d,e,c];return d}function fm(a,b){return a.G?a.G:a.o[b]}function im(a,b){return a.B?a.B[b]:null}function jm(a,b,c){return Nf(Vl(a.g,b,c||0),a.minZoom,a.maxZoom)}
function Hca(a,b){for(var c=a.g.length,d=Array(c),e=a.minZoom;e<c;++e)d[e]=cm(a,b,e);a.B=d};function km(a){var b=a.u;b||(b=lm(a),a.u=b);return b}function mm(a,b,c){b=void 0!==b?b:42;var d=cl(a);a=bl(a);c=Mk(void 0!==c?c:256);c=Math.max(a/c[0],d/c[1]);b+=1;d=Array(b);for(a=0;a<b;++a)d[a]=c/Math.pow(2,a);return d}function lm(a,b,c){a=nm(a);b=mm(a,b,c);return new Zl({extent:a,origin:[a[0],a[3]],resolutions:b,tileSize:c})}function nm(a){a=Cl(a);var b=a.Y();b||(a=180*kl.degrees/ml(a),b=Uk(-a,-a,a,a));return b};Bf.prototype.Xa=function(){return this.Js};var Jca=/^#(?:[0-9a-f]{3,4}){1,2}$/i,Kca=/^([a-z]*)$/i;function om(a){return Array.isArray(a)?a:Lca(a)}function pm(a){return"string"===typeof a?a:qm(a)}
var Lca=function(){var a={},b=0;return function(c){if(a.hasOwnProperty(c))var d=a[c];else{if(1024<=b){d=0;for(var e in a)0===(d++&3)&&(delete a[e],--b)}d=c;Kca.exec(d)&&(e=document.createElement("div"),e.style.color=d,document.body.appendChild(e),d=getComputedStyle(e).color,document.body.removeChild(e));if(Jca.exec(d)){e=d.length-1;var f=4>=e?1:2;var h=4===e||8===e;e=parseInt(d.substr(1+0*f,f),16);var k=parseInt(d.substr(1+1*f,f),16);var l=parseInt(d.substr(1+2*f,f),16);d=h?parseInt(d.substr(1+3*
f,f),16):255;1==f&&(e=(e<<4)+e,k=(k<<4)+k,l=(l<<4)+l,h&&(d=(d<<4)+d));f=[e,k,l,d/255]}else 0==d.indexOf("rgba(")?(d=d.slice(5,-1).split(",").map(Number),f=rm(d)):0==d.indexOf("rgb(")?(d=d.slice(4,-1).split(",").map(Number),d.push(1),f=rm(d)):Mf(!1,14);d=f;a[c]=d;++b}return d}}();function rm(a,b){b=b||[];b[0]=Nf(a[0]+.5|0,0,255);b[1]=Nf(a[1]+.5|0,0,255);b[2]=Nf(a[2]+.5|0,0,255);b[3]=Nf(a[3],0,1);return b}
function qm(a){var b=a[0];b!=(b|0)&&(b=b+.5|0);var c=a[1];c!=(c|0)&&(c=c+.5|0);var d=a[2];d!=(d|0)&&(d=d+.5|0);return"rgba("+b+","+c+","+d+","+(void 0===a[3]?1:a[3])+")"};function sm(a,b,c,d,e,f,h){var k=(c-b)/d;if(3>k){for(;b<c;b+=d)f[h++]=a[b],f[h++]=a[b+1];return h}var l=Array(k);l[0]=1;l[k-1]=1;c=[b,c-d];for(var m=0,n;0<c.length;){var p=c.pop(),r=c.pop(),u=0,v=a[r],y=a[r+1],B=a[p],G=a[p+1];for(n=r+d;n<p;n+=d){var D=a[n];var U=a[n+1];var ja=v,ea=y,ca=B-ja,aa=G-ea;if(0!==ca||0!==aa){var ka=((D-ja)*ca+(U-ea)*aa)/(ca*ca+aa*aa);1<ka?(ja=B,ea=G):0<ka&&(ja+=ca*ka,ea+=aa*ka)}D=ja-D;U=ea-U;U=D*D+U*U;U>u&&(m=n,u=U)}u>e&&(l[(m-b)/d]=1,r+d<m&&c.push(r,m),m+d<p&&c.push(m,p))}for(n=
0;n<k;++n)l[n]&&(f[h++]=a[b+n*d],f[h++]=a[b+n*d+1]);return h}
function tm(a,b,c,d,e,f,h,k){var l;var m=0;for(l=c.length;m<l;++m){var n=c[m];a:{var p=a,r=n,u=d,v=e,y=f,B=h;if(b!=r){var G=v*Math.round(p[b]/v),D=v*Math.round(p[b+1]/v);b+=u;y[B++]=G;y[B++]=D;do{var U=v*Math.round(p[b]/v);h=v*Math.round(p[b+1]/v);b+=u;if(b==r){y[B++]=U;y[B++]=h;h=B;break a}}while(U==G&&h==D);for(;b<r;){var ja=v*Math.round(p[b]/v);var ea=v*Math.round(p[b+1]/v);b+=u;if(ja!=U||ea!=h){var ca=U-G,aa=h-D,ka=ja-G,Ha=ea-D;ca*Ha==aa*ka&&(0>ca&&ka<ca||ca==ka||0<ca&&ka>ca)&&(0>aa&&Ha<aa||aa==
Ha||0<aa&&Ha>aa)||(y[B++]=U,y[B++]=h,G=U,D=h);U=ja;h=ea}}y[B++]=U;y[B++]=h}h=B}k.push(h);b=n}return h};var Mca=function(){var a,b={};return function(c){a||(a=document.createElement("div").style);if(!(c in b)){a.font=c;var d=a.fontFamily;a.font="";if(!d)return null;b[c]=d.split(/,\s?/)}return b[c]}}();function um(a,b){var c=document.createElement("CANVAS");a&&(c.width=a);b&&(c.height=b);return c.getContext("2d")}function vm(a,b){var c=b.parentNode;c&&c.replaceChild(a,b)}function wm(a){a&&a.parentNode&&a.parentNode.removeChild(a)}function xm(a){for(;a.lastChild;)a.removeChild(a.lastChild)};function ym(a){Df.call(this);this.highWaterMark=void 0!==a?a:2048;this.l=0;this.o={};this.g=this.j=null}I(ym,Df);g=ym.prototype;g.Kg=function(){return this.l>this.highWaterMark};g.clear=function(){this.l=0;this.o={};this.g=this.j=null;this.dispatchEvent("clear")};function zm(a,b){return a.o.hasOwnProperty(b)}g.forEach=function(a,b){for(var c=this.j;c;)a.call(b,c.value_,c.key_,this),c=c.newer};
g.get=function(a){a=this.o[a];Mf(void 0!==a,15);if(a===this.g)return a.value_;a===this.j?(this.j=this.j.newer,this.j.older=null):(a.newer.older=a.older,a.older.newer=a.newer);a.newer=null;a.older=this.g;this.g=this.g.newer=a;return a.value_};g.remove=function(a){var b=this.o[a];Mf(void 0!==b,15);if(b===this.g){if(this.g=b.older)this.g.newer=null}else if(b===this.j){if(this.j=b.newer)this.j.older=null}else b.newer.older=b.older,b.older.newer=b.newer;delete this.o[a];--this.l;return b.value_};
g.Xb=function(){var a=Array(this.l),b=0,c;for(c=this.g;c;c=c.older)a[b++]=c.key_;return a};g.Mc=function(){var a=Array(this.l),b=0,c;for(c=this.g;c;c=c.older)a[b++]=c.value_;return a};g.pop=function(){var a=this.j;delete this.o[a.key_];a.newer&&(a.newer.older=null);this.j=a.newer;this.j||(this.g=null);--this.l;return a.value_};g.replace=function(a,b){this.get(a);this.o[a].value_=b};
g.set=function(a,b){Mf(!(a in this.o),16);b={key_:a,newer:null,older:this.g,value_:b};this.g?this.g.newer=b:this.j=b;this.g=b;this.o[a]=b;++this.l};var Am=Array(6);function Bm(){return[1,0,0,1,0,0]}function Cm(a){return Dm(a,1,0,0,1,0,0)}function Em(a,b){var c=a[0],d=a[1],e=a[2],f=a[3],h=a[4],k=a[5],l=b[0],m=b[1],n=b[2],p=b[3],r=b[4];b=b[5];a[0]=c*l+e*m;a[1]=d*l+f*m;a[2]=c*n+e*p;a[3]=d*n+f*p;a[4]=c*r+e*b+h;a[5]=d*r+f*b+k;return a}function Dm(a,b,c,d,e,f,h){a[0]=b;a[1]=c;a[2]=d;a[3]=e;a[4]=f;a[5]=h;return a}function Fm(a,b){a[0]=b[0];a[1]=b[1];a[2]=b[2];a[3]=b[3];a[4]=b[4];a[5]=b[5];return a}
function Gm(a,b){var c=b[0],d=b[1];b[0]=a[0]*c+a[2]*d+a[4];b[1]=a[1]*c+a[3]*d+a[5];return b}function Hm(a,b){var c=Math.cos(b);b=Math.sin(b);Em(a,Dm(Am,c,b,-b,c,0,0))}function Im(a,b,c){return Em(a,Dm(Am,b,0,0,c,0,0))}function Jm(a,b,c){Em(a,Dm(Am,1,0,0,1,b,c))}function Km(a,b,c,d,e,f,h,k){var l=Math.sin(f);f=Math.cos(f);a[0]=d*f;a[1]=e*l;a[2]=-d*l;a[3]=e*f;a[4]=h*d*f-k*d*l+b;a[5]=h*e*l+k*e*f+c;return a};var Lm=[0,0,0,1],Mm=[],Nm=[0,0,0,1],Om=[0,0,0,0],Pm=new ym,Nca={},Qm=null,Rm={},Oca=function(){function a(a){var b=Sm();b.font="32px monospace";f=b.measureText("wmytzilWMYTZIL@#/&?$%10").width;var c=!0;"monospace"!=a&&(b.font="32px "+a+",monospace",c=b.measureText("wmytzilWMYTZIL@#/&?$%10").width!=f);return c}function b(){var b=!0,f;for(f in c)60>c[f]&&(a(f)?(c[f]=60,pf(Rm),Qm=null,d.clear()):(++c[f],b=!1));b&&(window.clearInterval(e),e=void 0)}var c=Nca,d=Pm,e,f;return function(d){if(d=Mca(d))for(var f=
0,h=d.length;f<h;++f){var m=d[f];m in c||(c[m]=60,a(m)||(c[m]=0,void 0===e&&(e=window.setInterval(b,32))))}}}();function Sm(){var a=Qm;a||(a=Qm=um(1,1));return a}
var Pca=function(){var a;return function(b){var c=Rm[b];void 0==c&&(a||(a=document.createElement("span"),a.textContent="M",a.style.margin=a.style.padding="0 !important",a.style.position="absolute !important",a.style.left="-99999px !important"),a.style.font=b,document.body.appendChild(a),c=Rm[b]=a.offsetHeight,document.body.removeChild(a));return c}}();function Tm(a,b){var c=Sm();a!=c.font&&(c.font=a);return c.measureText(b).width}
function Um(a,b,c,d){0!==b&&(a.translate(c,d),a.rotate(b),a.translate(-c,-d))}var Vm=Bm();function Wm(a,b,c,d,e,f,h,k,l,m,n){if(1!=c){var p=a.globalAlpha;a.globalAlpha=p*c}b&&a.setTransform.apply(a,b);a.drawImage(d,e,f,h,k,l,m,h*n,k*n);p&&(a.globalAlpha=p);b&&a.setTransform.apply(a,Vm)};function Xm(a){return"string"===typeof a||a instanceof CanvasPattern||a instanceof CanvasGradient?a:pm(a)};function Ym(a,b,c,d,e){e=void 0!==e?e:[];for(var f=0;b<c;b+=d)e[f++]=a.slice(b,b+d);e.length=f;return e}function Zm(a,b,c,d,e){e=void 0!==e?e:[];var f=0,h;var k=0;for(h=c.length;k<h;++k){var l=c[k];e[f++]=Ym(a,b,l,d,e[f]);b=l}e.length=f;return e}function $m(a,b,c,d,e){e=void 0!==e?e:[];var f=0,h;var k=0;for(h=c.length;k<h;++k){var l=c[k];e[f++]=Zm(a,b,l,d,e[f]);b=l[l.length-1]}e.length=f;return e};function an(a,b,c,d){var e=a[b],f=a[b+1],h=0;for(b+=d;b<c;b+=d){var k=a[b],l=a[b+1];h+=Math.sqrt((k-e)*(k-e)+(l-f)*(l-f));e=k;f=l}return h};function bn(a,b,c,d,e,f){for(var h=f?f:[],k=0;b<c;b+=d){var l=a[b],m=a[b+1];h[k++]=e[0]*l+e[2]*m+e[4];h[k++]=e[1]*l+e[3]*m+e[5]}f&&h.length!=k&&(h.length=k);return h}function cn(a,b,c,d,e,f,h){for(var k=h?h:[],l=0,m;b<c;b+=d)for(k[l++]=a[b]+e,k[l++]=a[b+1]+f,m=b+2;m<b+d;++m)k[l++]=a[m];h&&k.length!=l&&(k.length=l);return k};var dn=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function en(a,b){var c,d,e=dn.length;for(d=0;d<e;++d)try{if(c=a.getContext(dn[d],b))return c}catch(f){}return null};var fn,gn="undefined"!==typeof navigator?navigator.userAgent.toLowerCase():"",Qca=-1!==gn.indexOf("firefox"),hn=-1!==gn.indexOf("safari")&&-1==gn.indexOf("chrom"),Rca=-1!==gn.indexOf("webkit")&&-1==gn.indexOf("edge"),ln=-1!==gn.indexOf("macintosh"),mn=window.devicePixelRatio||1,nn=!1;(function(){if(!("HTMLCanvasElement"in window))return!1;try{var a=document.createElement("CANVAS").getContext("2d");return a?(void 0!==a.setLineDash&&(nn=!0),!0):!1}catch(b){return!1}})();
var on="ontouchstart"in window,Sca="PointerEvent"in window,Tca=!!navigator.msPointerEnabled,pn=!1,qn,rn=[];if("WebGLRenderingContext"in window)try{var sn=en(document.createElement("CANVAS"),{failIfMajorPerformanceCaveat:!0});sn&&(pn=!0,qn=sn.getParameter(sn.MAX_TEXTURE_SIZE),rn=sn.getSupportedExtensions())}catch(a){}fn=pn;nf=rn;mf=qn;function tn(){}g=tn.prototype;g.Eu=function(){};g.Jh=function(){};g.zb=function(){};g.Tf=function(){};g.Ih=function(){};g.em=function(){};g.jh=function(){};g.Ng=function(){};g.kh=function(){};g.lg=function(){};g.lh=function(){};g.mg=function(){};g.pf=function(){};g.Dc=function(){};g.Mf=function(){};g.Vd=function(){};var un="Polygon Circle LineString Image Text Default".split(" "),vn={left:0,end:0,center:.5,right:1,start:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};function wn(a,b,c,d,e,f){this.pb=f;this.Hc=Ok();this.nd=a;this.gc=b;this.overlaps=e;this.pixelRatio=d;this.Ca=0;this.resolution=c;this.u=this.oa=this.ka=null;this.j=[];this.coordinates=[];this.Vb={};this.ib=Bm();this.g=[];this.Ea=null;this.state={};this.cb=0;this.md=Bm()}I(wn,tn);function xn(a,b,c,d,e,f,h,k){b.beginPath();b.moveTo.apply(b,c);b.lineTo.apply(b,d);b.lineTo.apply(b,e);b.lineTo.apply(b,f);b.lineTo.apply(b,c);h&&(a.sa=h[2],a.uc(b));k&&(yn(b,k),b.stroke())}
function zn(a,b,c,d,e,f,h,k,l,m,n,p,r,u,v,y,B,G,D){var U=G||D,ja=a.md;f*=u;h*=u;c-=f;d-=h;v&&(c=Math.round(c),d=Math.round(d));v=y+n>e.width?e.width-n:y;l=l+p>e.height?e.height-p:l;y=a.Hc;var ea=B[3]+v*u+B[1],ca=B[0]+l*u+B[2],aa=c-B[3],ka=d-B[0];if(U||0!==r){var Ha=[aa,ka];var Oa=[aa+ea,ka];var tc=[aa+ea,ka+ca];var Ua=[aa,ka+ca]}B=null;0!==r?(f=c+f,h=d+h,B=Km(ja,f,h,1,1,r,-f,-h),Vk(y),Pk(y,Gm(ja,Ha)),Pk(y,Gm(ja,Oa)),Pk(y,Gm(ja,tc)),Pk(y,Gm(ja,Ua))):Uk(aa,ka,aa+ea,ka+ca,y);r=b.canvas;r=y[0]<=r.width&&
0<=y[2]&&y[1]<=r.height&&0<=y[3];if(k){if(r||1!=k[4])Yk(k,y),(a=r?[b,B?B.slice(0):null,m,e,n,p,v,l,c,d,u]:null)&&U&&a.push(G,D,Ha,Oa,tc,Ua),k.push(a)}else r&&(U&&xn(a,b,Ha,Oa,tc,Ua,G,D),Wm(b,B,m,e,n,p,v,l,c,d,u))}function Uca(a,b){var c=a.pixelRatio;return 1==c?b:b.map(function(a){return a*c})}
function An(a,b,c,d,e,f,h){var k=a.coordinates.length,l=Bn(a);h&&(c+=e);h=[b[c],b[c+1]];var m=[NaN,NaN],n=!0,p;for(p=c+e;p<d;p+=e){m[0]=b[p];m[1]=b[p+1];var r=l[1];var u=l[2],v=l[3],y=m[0],B=m[1],G=0;y<l[0]?G|=16:y>u&&(G|=4);B<r?G|=8:B>v&&(G|=2);0===G&&(G=1);r=G;r!==D?(n&&(a.coordinates[k++]=h[0],a.coordinates[k++]=h[1]),a.coordinates[k++]=m[0],a.coordinates[k++]=m[1],n=!1):1===r?(a.coordinates[k++]=m[0],a.coordinates[k++]=m[1],n=!1):n=!0;h[0]=m[0];h[1]=m[1];var D=r}if(f&&n||p===c+e)a.coordinates[k++]=
h[0],a.coordinates[k++]=h[1];return k}function Cn(a,b,c,d,e,f){for(var h=0,k=d.length;h<k;++h){var l=d[h];c=An(a,b,c,l,e,!1,!1);f.push(c);c=l}return c}g=wn.prototype;
g.Eu=function(a,b,c){Dn(this,b);var d=a.T(),e=a.stride,f=this.coordinates.length,h;if("MultiPolygon"==d){d=a.Md();var k=[];for(var l=a.Jc,m=h=0,n=l.length;m<n;++m){var p=[];h=Cn(this,d,h,l[m],e,p);k.push(p)}this.j.push([4,f,k,a,c,$m])}else"Polygon"==d||"MultiLineString"==d?(k=[],d="Polygon"==d?a.Md():a.flatCoordinates,Cn(this,d,0,a.zd(),e,k),this.j.push([4,f,k,a,c,Zm])):"LineString"==d||"MultiPoint"==d?(d=a.flatCoordinates,e=An(this,d,0,d.length,e,!1,!1),this.j.push([4,f,e,a,c,Ym])):"Point"==d&&(d=
a.flatCoordinates,this.coordinates.push(d[0],d[1]),e=this.coordinates.length,this.j.push([4,f,e,a,c]));En(this,b)};function Dn(a,b){a.ka=[0,b,0];a.j.push(a.ka);a.oa=[0,b,0];a.g.push(a.oa)}g.uc=function(a){if(this.sa){var b=Gm(this.ib,this.sa.slice());a.translate(b[0],b[1]);a.rotate(this.cb)}a.fill();this.sa&&a.setTransform.apply(a,Vm)};function yn(a,b){a.strokeStyle=b[1];a.lineWidth=b[2];a.lineCap=b[3];a.lineJoin=b[4];a.miterLimit=b[5];nn&&(a.lineDashOffset=b[7],a.setLineDash(b[6]))}
function Fn(a,b,c){if(b&&5<b.length){var d=b[4];if(1==d||d==b.length-5){c={minX:b[0],minY:b[1],maxX:b[2],maxY:b[3],value:c};if(!a.pb.oD(c))for(a.pb.Bf(c),c=5,d=b.length;c<d;++c){var e=b[c];e&&(11<e.length&&xn(a,e[0],e[13],e[14],e[15],e[16],e[11],e[12]),Wm.apply(void 0,e))}b.length=5;Vk(b)}}}
function Gn(a,b,c,d,e,f,h){if(a.Ea&&Xl(c,a.ib))var k=a.Ea;else a.Ea||(a.Ea=[]),k=bn(a.coordinates,0,a.coordinates.length,2,c,a.Ea),Fm(a.ib,c);for(var l=!rf(d),m=0,n=e.length,p=0,r,u,v,y,B,G,D,U,ja,ea=0,ca=0,aa=null,ka=null,Ha=a.Vb,Oa=a.cb,tc={context:b,pixelRatio:a.pixelRatio,resolution:a.resolution,rotation:Oa},Ua=a.j!=e||a.overlaps?0:200;m<n;){var la=e[m];switch(la[0]){case 0:var Yb=la[1];l&&d[J(Yb).toString()]||!Yb.Z()?m=la[2]:void 0===h||gl(h,Yb.Z().Y())?++m:m=la[2]+1;break;case 1:ea>Ua&&(a.uc(b),
ea=0);ca>Ua&&(b.stroke(),ca=0);ea||ca||(b.beginPath(),y=B=NaN);++m;break;case 2:p=la[1];var jn=k[p],Gs=k[p+1],Vh=k[p+2]-jn,sl=k[p+3]-Gs,yB=Math.sqrt(Vh*Vh+sl*sl);b.moveTo(jn+yB,Gs);b.arc(jn,Gs,yB,0,2*Math.PI,!0);++m;break;case 3:b.closePath();++m;break;case 4:p=la[1];r=la[2];var mw=la[4],nw=6==la.length?la[5]:void 0;tc.geometry=la[3];tc.feature=Yb;m in Ha||(Ha[m]=[]);var Hs=Ha[m];nw?nw(k,p,r,2,Hs):(Hs[0]=k[p],Hs[1]=k[p+1],Hs.length=2);mw(Hs,tc);++m;break;case 6:p=la[1];r=la[2];ja=la[3];u=la[4];v=
la[5];U=f?null:la[6];var Gp=la[7],nqa=la[8],oqa=la[9],pqa=la[10],qqa=la[11],$4=la[12],rqa=la[13],sqa=la[14],tqa=la[15];if(16<la.length){var a5=la[16];var b5=la[17];var c5=la[18]}else a5=Om,b5=c5=!1;for(qqa&&($4+=Oa);p<r;p+=2)zn(a,b,k[p],k[p+1],ja,u,v,U,Gp,nqa,oqa,pqa,$4,rqa,sqa,tqa,a5,b5?aa:null,c5?ka:null);Fn(a,U,Yb);++m;break;case 5:var d5=la[1],e5=la[2],IR=la[3];U=f?null:la[4];var uqa=la[5],f5=la[6],vqa=la[7],g5=la[8],h5=la[9],i5=la[10],j5=la[11],k5=la[12],JR=la[13],l5=la[14],m5=an(k,d5,e5,2),
n5=g5(k5);if(uqa||n5<=m5){a:{var uI=void 0,o5=void 0,Is=void 0,Hp=k,tl=d5,p5=e5,q5=k5,wqa=g5,r5=(m5-n5)*vn[a.I[JR].textAlign],xqa=vqa,KR=[],zB=Hp[tl]>Hp[p5-2],s5=q5.length,ow=Hp[tl],pw=Hp[tl+1];tl+=2;for(var qw=Hp[tl],rw=Hp[tl+1],LR=0,vI=Math.sqrt(Math.pow(qw-ow,2)+Math.pow(rw-pw,2)),Js="",MR=0,wI=0;wI<s5;++wI){o5=zB?s5-wI-1:wI;var NR=q5.charAt(o5);Js=zB?NR+Js:Js+NR;var sw=wqa(Js)-MR;MR+=sw;for(var t5=r5+sw/2;tl<p5-2&&LR+vI<t5;)ow=qw,pw=rw,tl+=2,qw=Hp[tl],rw=Hp[tl+1],LR+=vI,vI=Math.sqrt(Math.pow(qw-
ow,2)+Math.pow(rw-pw,2));var yqa=t5-LR,tw=Math.atan2(rw-pw,qw-ow);zB&&(tw+=0<tw?-Math.PI:Math.PI);if(void 0!==uI){var xI=tw-uI;xI+=xI>Math.PI?-2*Math.PI:xI<-Math.PI?2*Math.PI:0;if(Math.abs(xI)>xqa){var uw=null;break a}}var u5=yqa/vI,v5=ow+u5*(qw-ow),w5=pw+u5*(rw-pw);uI==tw?(zB&&(Is[0]=v5,Is[1]=w5,Is[2]=sw/2),Is[4]=Js):(Js=NR,MR=sw,Is=[v5,w5,sw/2,tw,Js],zB?KR.unshift(Is):KR.push(Is),uI=tw);r5+=sw}uw=KR}if(uw){var yI;if(i5){var Ks=0;for(yI=uw.length;Ks<yI;++Ks){var Mj=uw[Ks];var OR=Mj[4];var kn=a.Pa(OR,
JR,"",i5);u=Mj[2]+j5;v=IR*kn.height+2*(.5-IR)*j5-h5;zn(a,b,Mj[0],Mj[1],kn,u,v,U,kn.height,1,0,0,Mj[3],l5,!1,kn.width,Om,null,null)}}if(f5)for(Ks=0,yI=uw.length;Ks<yI;++Ks)Mj=uw[Ks],OR=Mj[4],kn=a.Pa(OR,JR,f5,""),u=Mj[2],v=IR*kn.height-h5,zn(a,b,Mj[0],Mj[1],kn,u,v,U,kn.height,1,0,0,Mj[3],l5,!1,kn.width,Om,null,null)}}Fn(a,U,Yb);++m;break;case 7:if(void 0!==f){Yb=la[1];var x5=f(Yb);if(x5)return x5}++m;break;case 8:Ua?ea++:a.uc(b);++m;break;case 9:p=la[1];r=la[2];var AB=k[p];var BB=k[p+1];G=AB+.5|0;D=
BB+.5|0;if(G!==y||D!==B)b.moveTo(AB,BB),y=G,B=D;for(p+=2;p<r;p+=2)if(AB=k[p],BB=k[p+1],G=AB+.5|0,D=BB+.5|0,p==r-2||G!==y||D!==B)b.lineTo(AB,BB),y=G,B=D;++m;break;case 10:aa=la;a.sa=la[2];ea&&(a.uc(b),ea=0,ca&&(b.stroke(),ca=0));b.fillStyle=la[1];++m;break;case 11:ka=la;ca&&(b.stroke(),ca=0);yn(b,la);++m;break;case 12:Ua?ca++:b.stroke();++m;break;default:++m}}ea&&a.uc(b);ca&&b.stroke()}g.xc=function(a,b,c,d){this.cb=c;Gn(this,a,b,d,this.j,void 0,void 0)};
function Hn(a){var b=a.g;b.reverse();var c,d=b.length,e=-1;for(c=0;c<d;++c){var f=b[c];var h=f[0];if(7==h)e=c;else if(0==h){f[2]=c;f=a.g;for(h=c;e<h;){var k=f[e];f[e]=f[h];f[h]=k;++e;--h}e=-1}}}
g.Dc=function(a,b){var c=this.state;a?(a=a.Ja(),c.fillStyle=Xm(a?a:Lm)):c.fillStyle=void 0;b?(a=b.Ja(),c.strokeStyle=Xm(a?a:Nm),a=b.u,c.lineCap=void 0!==a?a:"round",a=b.j,c.lineDash=a?a.slice():Mm,a=b.o,c.lineDashOffset=a?a:0,a=b.A,c.lineJoin=void 0!==a?a:"round",a=b.g,c.lineWidth=void 0!==a?a:1,b=b.B,c.miterLimit=void 0!==b?b:10,c.lineWidth>this.Ca&&(this.Ca=c.lineWidth,this.u=null)):(c.strokeStyle=void 0,c.lineCap=void 0,c.lineDash=null,c.lineDashOffset=void 0,c.lineJoin=void 0,c.lineWidth=void 0,
c.miterLimit=void 0)};g.du=function(a,b){var c=a.fillStyle;a=[10,c];"string"!==typeof c&&(b=b.Y(),a.push([b[0],b[3]]));this.j.push(a)};g.Ci=function(a){this.j.push([11,a.strokeStyle,a.lineWidth*this.pixelRatio,a.lineCap,a.lineJoin,a.miterLimit,Uca(this,a.lineDash),a.lineDashOffset*this.pixelRatio])};function In(a,b,c,d){var e=b.fillStyle;if("string"!==typeof e||b.currentFillStyle!=e)c.call(a,b,d),b.currentFillStyle=e}
function Jn(a,b,c){var d=b.strokeStyle,e=b.lineCap,f=b.lineDash,h=b.lineDashOffset,k=b.lineJoin,l=b.lineWidth,m=b.miterLimit;if(b.currentStrokeStyle!=d||b.currentLineCap!=e||f!=b.currentLineDash&&!Xl(b.currentLineDash,f)||b.currentLineDashOffset!=h||b.currentLineJoin!=k||b.currentLineWidth!=l||b.currentMiterLimit!=m)c.call(a,b),b.currentStrokeStyle=d,b.currentLineCap=e,b.currentLineDash=f,b.currentLineDashOffset=h,b.currentLineJoin=k,b.currentLineWidth=l,b.currentMiterLimit=m}
function En(a,b){a.ka[2]=a.j.length;a.ka=null;a.oa[2]=a.g.length;a.oa=null;b=[7,b];a.j.push(b);a.g.push(b)}g.finish=Af;function Bn(a){a.u||(a.u=Rk(a.gc),0<a.Ca&&Qk(a.u,a.resolution*(a.Ca+1)/2,a.u));return a.u};function Kn(a,b,c,d,e,f){wn.call(this,a,b,c,d,e,f)}I(Kn,wn);function Ln(a,b,c,d,e){var f=a.state,h=void 0!==f.fillStyle;f=void 0!=f.strokeStyle;var k=d.length,l=[1];a.j.push(l);a.g.push(l);for(l=0;l<k;++l){var m=d[l],n=a.coordinates.length;c=An(a,b,c,m,e,!0,!f);c=[9,n,c];a.j.push(c);a.g.push(c);f&&(c=[3],a.j.push(c),a.g.push(c));c=m}b=[8];a.g.push(b);h&&a.j.push(b);f&&(h=[12],a.j.push(h),a.g.push(h));return c}
Kn.prototype.Tf=function(a,b){var c=this.state,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){Mn(this,a);Dn(this,b);this.g.push([10,pm(Lm)]);void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);var e=a.flatCoordinates;d=this.coordinates.length;An(this,e,0,e.length,a.stride,!1,!1);a=[1];d=[2,d];this.j.push(a,d);this.g.push(a,d);a=[8];this.g.push(a);void 0!==c.fillStyle&&this.j.push(a);void 0!==c.strokeStyle&&(c=[12],
this.j.push(c),this.g.push(c));En(this,b)}};Kn.prototype.mg=function(a,b){var c=this.state;Mn(this,a);Dn(this,b);this.g.push([10,pm(Lm)]);void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);c=a.zd();var d=a.Md();Ln(this,d,0,c,a.stride);En(this,b)};
Kn.prototype.lg=function(a,b){var c=this.state,d=c.strokeStyle;if(void 0!==c.fillStyle||void 0!==d){Mn(this,a);Dn(this,b);this.g.push([10,pm(Lm)]);void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);c=a.Jc;d=a.Md();a=a.stride;var e=0,f;var h=0;for(f=c.length;h<f;++h)e=Ln(this,d,e,c[h],a);En(this,b)}};
Kn.prototype.finish=function(){Hn(this);this.state=null;var a=this.nd;if(0!==a){var b=this.coordinates,c;var d=0;for(c=b.length;d<c;++d)b[d]=a*Math.round(b[d]/a)}};function Mn(a,b){var c=a.state;void 0!==c.fillStyle&&In(a,c,a.du,b);void 0!==c.strokeStyle&&Jn(a,c,a.Ci)};Kn.prototype.mg=function(a,b){var c=this.state;Mn(this,a);Dn(this,b);this.g.push([10,c.fillStyle?c.fillStyle:"rgba(0,0,0,0)"]);void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);c=a.zd();var d=a.Md();Ln(this,d,0,c,a.stride);En(this,b)};
Kn.prototype.lg=function(a,b){var c=this.state,d=c.fillStyle,e=c.strokeStyle;if(void 0!==d||void 0!==e){Mn(this,a);Dn(this,b);this.g.push([10,d?d:"rgba(0,0,0,0)"]);void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]);c=a.Jc;d=a.Md();a=a.stride;e=0;var f;var h=0;for(f=c.length;h<f;++h)e=Ln(this,d,e,c[h],a);En(this,b)}};
Kn.prototype.Tf=function(a,b){var c=this.state,d=c.fillStyle,e=c.strokeStyle;if(void 0!==d||void 0!==e)Mn(this,a),Dn(this,b),this.g.push([10,d?d:"rgba(0,0,0,0)"]),void 0!==c.strokeStyle&&this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset]),e=a.flatCoordinates,d=this.coordinates.length,An(this,e,0,e.length,a.stride,!1,!1),a=[1],d=[2,d],this.j.push(a,d),this.g.push(a,d),a=[8],this.g.push(a),void 0!==c.fillStyle&&this.j.push(a),void 0!==c.strokeStyle&&
(c=[12],this.j.push(c),this.g.push(c)),En(this,b)};var Vca=E.V("os.proj");function Nn(a){var b=M.get("projections",[]);b=b.concat(M.get("userProjections",[]));if(a){a=[Cl("EPSG:3857"),Cl("EPSG:4326")];for(var c=0,d=a.length;c<d;c++){var e=a[c];b.unshift({code:e.Rb,title:0===c?"Web Mercator / Spherical Mercator":"Geographic / Equirectangular",extent:e.Y(),worldExtent:e.Fo,isGlobal:e.Th()})}}return b}
function Wca(a){var b=S,c=a.projection,d=a.projections||[],e=["EPSG:4326","CRS:84","EPSG:3857","EPSG:900913"];c&&(e.unshift(c),d.unshift(c));if(!d.length)return b;e.unshift(b.Rb);d.sort(function(a,b){a=e.indexOf(a);b=e.indexOf(b);a=-1===a?e.length:a;b=-1===b?e.length:b;return a-b});c=0;for(var f=d.length;c<f;c++){var h=Cl(d[c]);if(h)return Nl(h,b)?b:h}E.hb(Vca,"A supported projection could not be found for layer "+a.id+". projections="+d.toString());return null};var On=void 0,Pn=[0,0],S=Cl("EPSG:4326");lm(S,42,[512,512]);var Qn=[0,0,0,0];function Rn(a,b,c){b=b.Y();a=Math.log((b[2]-b[0])/(256*a))/Math.LN2;null!=c&&(a=Number(a.toFixed(c)));return a}function Sn(a,b){b=b.Y();return(b[2]-b[0])/(256*Math.pow(2,a))}var Tn=Sn(25,S),Un=Sn(2,S);function Vn(a,b){var c=a[0]/a[1],d=Of(45);return b*a[1]*ml(S)*Math.cos(Math.abs(0))/2/Math.tan((1>=c?d:2*Math.atan(Math.tan(.5*d)/c))/2)}
function Wn(a,b,c){a=Xn(a);if(!a||0>=a[0]||0>=a[1])return NaN;var d=a[0]/a[1],e=Of(45);return 2*b*Math.tan((1>=d?e:2*Math.atan(Math.tan(.5*e)/d))/2)/ml(S)/Math.abs(Math.cos(c||0))/a[1]};Q.directive("defaultsettingui",[function(){return{restrict:"AE",replace:!0,template:"<div></div>",controller:Xca,controllerAs:"settingUi"}}]);function Xca(){};function Yn(){C.call(this);this.ma="";this.ga(Zn.toString());Zn++;this.eb=this.ya=this.Sb=null;this.Wj={}}w(Yn,C);var Zn=0;g=Yn.prototype;g.J=function(){Yn.C.J.call(this);if(this.eb){for(var a=0,b=this.eb.length;a<b;a++){var c=this.eb[a];this.am(c);c.dispose()}this.eb=null}};g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.ba=function(){return this.Sb};g.Da=function(a){if(a!==this.Sb){var b=this.Sb;this.Sb=a;this.dispatchEvent(new K("label",a,b))}};g.na=function(){return this.eb};
g.Bc=function(a,b){if(a!==this.eb){if(this.eb)for(var c=this.eb.length;c--;)this.removeChild(this.eb[c]);if(a){c=0;for(var d=a.length;c<d;c++)this.R(a[c],b)}this.dispatchEvent(new K("children",a,null))}};g.getParent=function(){return this.ya};g.df=function(a,b){this.ya!==a&&(this.ya=a)&&!b&&this.ya.R(this,!0,0)};g.Ha=function(){for(var a=this;a.getParent();)a=a.getParent();return a};
g.R=function(a,b,c){this.eb||(this.eb=[]);return this.gq(a)?null:(jb(this.eb,a,null!=c?c:this.eb.length),this.mq(a),b||a.df(this,!0),this.dispatchEvent(new K("children",this.eb)),a)};g.Tj=function(a,b){if(a){for(var c=!1,d=0,e=a.length;d<e;d++)this.R(a[d],b)&&(c=!0);c&&this.dispatchEvent(new K("children",this.eb))}};g.gq=function(a){return a.D()in this.Wj};g.We=function(){return null!=this.eb&&0<this.eb.length};g.index=function(a){this.Wj[a.D()]=a};g.pB=function(a){delete this.Wj[a.D()]};
g.removeChild=function(a){return this.eb&&(a=this.eb.indexOf(a),-1<a)?$n(this,a):null};g.kA=function(a){this.eb&&this.eb.length>a&&$n(this,a)};function $n(a,b){var c=a.eb[b];c.getParent()===a&&c.df(null);a.eb.splice(b,1);a.am(c);0===a.eb.length&&(a.eb=null);a.dispatchEvent(new K("children",a.eb));return c}g.find=function(a,b){if(a in this&&this[a]==b)return this;var c;if(this.eb)for(var d=0,e=this.eb.length;d<e;d++)if(c=this.eb[d].find(a,b))return c;return null};
g.mq=function(a){this.index(a);a.H("propertychange",this.Gf,!1,this)};g.am=function(a){this.pB(a);a.M("propertychange",this.Gf,!1,this)};g.Gf=function(a){a=a.j;"children"!=a&&"label"!=a||this.dispatchEvent(new K(a))};g.clone=function(){var a=new this.constructor;a.nc(this);return a};g.nc=function(a){this.ga(a.D());this.Da(a.ba())};function ao(a,b){return(a=a.getParent())&&a==b?!0:a?ao(a,b):!1}
function bo(a){var b=a.na();if(b&&0<b.length){a=[];for(var c=0;c<b.length;c++){var d=b[c];d&&a.push(bo(d))}return Bb(a)}return a};function co(){Yn.call(this);this.xa="off";this.Ga("off");this.A={};this.A.on=0;this.A.off=0;this.A.both=0;this.O=!1;this.aa=!0;this.sf=!1}w(co,Yn);g=co.prototype;g.getState=function(){return this.xa};
g.Ga=function(a){if(a!==this.xa){var b=this.xa;switch(a){case "off":case "on":case "both":this.xa=a;if(this.aa&&!this.O){this.O=!0;if("both"!==this.getState()){var c=this.na(),d=this.getState();this.A.off=0;this.A.on=0;this.A.both=0;if(c){for(var e=c.length;e--;)this.sB(c[e],d);this.A[d]=c.length}}this.O=!1}this.dispatchEvent(new K("state",a,b))}}};g.mq=function(a){this.aa&&(this.A[a.getState()]++,eo(this));co.C.mq.call(this,a)};
g.am=function(a){this.aa&&(this.A[a.getState()]--,eo(this));co.C.am.call(this,a)};g.Gf=function(a){this.aa&&"state"==a.j&&!this.O&&(this.A[a.u]--,this.A[a.o]++,eo(this));co.C.Gf.call(this,a)};function eo(a){var b=(a.na()||[]).length;a.O=!0;0<b?a.A.on>=b?a.Ga("on"):a.A.off>=b?a.Ga("off"):a.Ga("both"):a.Ga("off");a.O=!1}g.sB=function(a,b){a.Ga(b)};g.tp=function(){return this.sf};g.nc=function(a){this.Ga(a.getState());co.C.nc.call(this,a)};Q.directive("nodeicons",[function(){return{restrict:"E",template:'<span class="js-node-icons align-text-bottom pr-1 c-node-icons"></span>',controller:fo,controllerAs:"nodeicons"}}]);function fo(a,b,c){this.v=a;this.L=b;this.g=c;"item"in this.v&&(b=this.v.item,"getIcons"in this.v.item&&(b.H("propertychange",this.j,!1,this),go(this)));a.$on("$destroy",this.l.bind(this))}fo.$inject=["$scope","$element","$compile"];
fo.prototype.l=function(){this.v&&(this.v.item.M("propertychange",this.j,!1,this),this.g=this.L=this.v=null)};fo.prototype.j=function(a){"icons"==a.j&&go(this)};function go(a){if(a.v&&a.L){var b=a.L.find(".js-node-icons"),c=a.v.item.getIcons()||"&nbsp;";b.html(c);a.g(b.contents())(a.v)}};Q.directive("nodespinner",[function(){return{restrict:"AE",replace:!0,template:'<span ng-show="item.isLoading()" class="ng-hide"><i class="fa fa-fw" ng-class="spinClass" title="Loading..."></i></span>',controller:ho,controllerAs:"spin"}}]);function ho(a){this.v=a;a.spinClass||(a.spinClass="fa-spin fa-spinner");"item"in this.v&&(a=this.v.item,"isLoading"in this.v.item&&a.H("propertychange",this.g,!1,this));this.v.$on("$destroy",this.j.bind(this))}ho.$inject=["$scope","$element"];
ho.prototype.j=function(){this.v&&(this.v.item.M("propertychange",this.g,!1,this),this.v=null)};ho.prototype.g=function(a){"loading"==a.j&&R(this.v)};function io(){return{restrict:"AE",replace:!0,template:"<i class=\"js-node-toggle c-node-toggle fa fa-fw\" ng-class=\"{'fa-caret-right': item.collapsed, 'fa-caret-down': !item.collapsed}\"></i>",controller:jo,controllerAs:"toggle"}}Q.directive("nodetoggle",[io]);function jo(a,b){this.v=a;this.L=b;this.v.item instanceof ko&&(this.v.item.H("propertychange",this.g,!1,this),this.j());this.v.$on("$destroy",this.l.bind(this))}jo.$inject=["$scope","$element"];
jo.prototype.l=function(){this.v&&this.v.item.M("propertychange",this.g,!1,this);this.L=this.v=null};jo.prototype.g=function(a){"children"==a.j&&this.j()};jo.prototype.j=function(){var a=this.v.item.na();this.L.css("opacity",a&&0<a.length?"1":"0")};Q.directive("tristatecheckbox",[function(){return{restrict:"AE",replace:!0,template:'<span ng-class="chkClass + \' \' + chkClass + \'-\' + item.state"ng-click="checkCtrl.toggle($event)" ng-dblclick="checkCtrl.onDblClick($event)" title="{{chkTooltip}}"><label></label></span>',controller:lo,controllerAs:"checkCtrl"}}]);function lo(a,b){this.v=a;this.L=b;mo(this,this.v.item)&&b.addClass("disabled");a.$on("$destroy",this.g.bind(this))}lo.$inject=["$scope","$element"];
lo.prototype.g=function(){this.L=this.v=null};lo.prototype.toggle=function(a){if(this.v){var b=this.v.item;mo(this,b)||(b.Ga("off"==b.getState()?"on":"off"),this.v&&(this.v.$emit("dirty"),R(this.v)));a.stopPropagation()}};lo.prototype.toggle=lo.prototype.toggle;lo.prototype.onDblClick=function(a){this.L.hasClass("disabled")||a.stopPropagation()};lo.prototype.onDblClick=lo.prototype.onDblClick;function mo(a,b){return!!b&&(b.tp()||a.v.disableFolders&&b.We())};Q.directive("windowlauncher",[function(){return{restrict:"AE",replace:!0,template:'<small><button ng-click="launchCtrl.click($event)" title="{{chkTooltip}}" class="btn btn-sm btn-info border"><i ng-class="winLauncherClass"></i></button></small>',controller:no,controllerAs:"launchCtrl"}}]);function no(a){this.v=a;a.$on("$destroy",this.g.bind(this))}no.$inject=["$scope"];no.prototype.g=function(){this.v=null};no.prototype.click=function(){this.v&&this.v.item.Ka().setActive(!0)};no.prototype.click=no.prototype.click;function ko(){co.call(this);this.Cf=this.collapsed=!0;this.fe=-1;this.depth=0;this.I=!1;this.j=this.zf="";this.cb=this.ka=!0;this.Ca=this.jg=null;this.Ne=!1;this.nd=null;this.bold=!0}w(ko,co);g=ko.prototype;g.Da=function(a){ko.C.Da.call(this,a);this.label=this.ba()};g.Ga=function(a){oo(this,a)};function oo(a,b){ko.C.Ga.call(a,b);a.state=a.getState()}g.Ve=function(){return this.zf};function po(a,b){a.zf=b||""}g.Su=function(){return this.ka};g.Ld=function(){return this.j};g.Nf=function(a){this.j=a};
function qo(a,b){if(b!==a.ka){var c=a.ka;a.ka=b;a.dispatchEvent(new K("checkboxVisible",b,c))}}g.format=function(a,b,c){if(null==c)return"";a=ro(15*this.depth);a+="<nodetoggle></nodetoggle>";this.ka&&(a=a+"<tristatecheckbox></tristatecheckbox>"+ro());this.Ne&&(a=a+"<windowlauncher></windowlauncher>"+ro());a=a+'<nodespinner></nodespinner><nodeicons class="flex-shrink-0"></nodeicons>'+('<span class="text-truncate flex-fill">'+this.fk(c)+"</span>");return a+=this.j};
function ro(a){var b;null==a&&(a=2);null==b&&(b="px");return'<span class="c-slick-tree-node__spacer" style="width:'+a+b+'"></span>'}g.fk=function(a){var b='<span title="'+Ak(this.Ve()).replace(/<.*?>/g,"").replace(/"/g,"'")+'">';this.bold&&-1==this.fe&&(b+="<b>");b+=Ak(a);this.bold&&-1==this.fe&&(b+="</b>");return b+"</span>"};g.gd=function(){return this.Kc()};ko.prototype.getIcons=ko.prototype.gd;g=ko.prototype;g.Kc=function(){return"&nbsp;"};g.Dj=function(){};g.ii=function(){};g.iz=function(){};
g.nc=function(a){this.collapsed=a.collapsed;po(this,a.Ve());qo(this,a.Su());this.Ne=a.Ne;this.nd=a.nd;this.Ca=a.Ca;ko.C.nc.call(this,a)};g.ou=function(){return!1};g.Fd=function(a,b){this.collapsed=a;this.dispatchEvent(new K("collapsed",a,!a));if(b&&(b=this.na()))for(var c=0;c<b.length;c++)b[c].Fd(a,!0)};function so(){ko.call(this);this.g=null}w(so,ko);g=so.prototype;g.J=function(){so.C.J.call(this);this.g=null};g.qe=function(){var a="";this.g&&(a+=this.g.ba(),a+=this.getTags()?" "+this.getTags().join(" "):"",a+=" "+this.g.j.join(" "));return a};g.getTags=function(){return this.g&&this.g.getTags()||null};g.Su=function(){return!1};function to(a,b){a.g=b;a.g&&(a.ga(a.g.D()),a.Da(a.g.ba()),a.Ga("on"),qo(a,!1),po(a,a.g.qb()))}g.Kc=function(){var a=null;this.g&&(a=this.g.Rg());return a?a:so.C.Kc.call(this)};function uo(){this.g=null;this.label="Change Me!";this.j=[];this.description="";this.ie=[];this.icon="";this.ld=null}w(uo,x);g=uo.prototype;g.J=function(){uo.C.J.call(this);z(this.g);this.g=null};g.D=function(){return((0<this.j.length?this.j.join(".")+".":"")+this.label).replace(" ","_").toLowerCase()};function vo(a){a.j=["Map"]}g.qb=function(){return this.description};g.fb=function(a){this.description=a};g.Rg=function(){return this.icon||'<i class="fa fa-gear"></i>'};
g.yc=function(a){this.icon=Ub('<i class="',a,'"></i> ')};g.ba=function(){return this.label};g.Da=function(a){this.label=a};g.getTags=function(){return this.ie};g.vb=function(a){this.ie=a};g.Ug=function(){return this.ld};function wo(){return!0}function xo(){return!1};function yo(){Hf.call(this);this.A=Ok();this.I=-1;this.j={};this.u=this.l=0;this.U=Bm()}I(yo,Hf);yo.prototype.Y=function(a){this.I!=this.Tb&&(this.A=this.Vl(this.A),this.I=this.Tb);var b=this.A;a?(a[0]=b[0],a[1]=b[1],a[2]=b[2],a[3]=b[3]):a=b;return a};yo.prototype.simplify=function(a){return this.wm(a*a)};
yo.prototype.transform=function(a,b){var c=this.U;a=Cl(a);var d="tile-pixels"==a.Tc()?function(d,f,h){var e=a.Y(),l=a.Fo;e=cl(l)/cl(e);Km(c,l[0],l[3],e,-e,0,0,0);bn(d,0,d.length,h,c,f);return Ol(a,b)(d,f,h)}:Ol(a,b);this.Nl(d);return this};function zo(){yo.call(this);this.layout="XY";this.stride=2;this.flatCoordinates=null}I(zo,yo);function Ao(a){var b;"XY"==a?b=2:"XYZ"==a||"XYM"==a?b=3:"XYZM"==a&&(b=4);return b}g=zo.prototype;g.Vl=function(a){var b=this.flatCoordinates,c=this.flatCoordinates.length,d=this.stride;a=Vk(a);return Zk(a,b,0,c,d)};function Bo(a){return a.flatCoordinates.slice(0,a.stride)}
g.wm=function(a){this.u!=this.Tb&&(pf(this.j),this.l=0,this.u=this.Tb);if(0>a||0!==this.l&&a<=this.l)return this;var b=a.toString();if(this.j.hasOwnProperty(b))return this.j[b];var c=this.Yi(a);if(c.flatCoordinates.length<this.flatCoordinates.length)return this.j[b]=c;this.l=a;return this};g.Yi=function(){return this};function Co(a,b,c){a.stride=Ao(b);a.layout=b;a.flatCoordinates=c}
function Do(a,b,c,d){if(b)c=Ao(b);else{for(b=0;b<d;++b){if(0===c.length){a.layout="XY";a.stride=2;return}c=c[0]}c=c.length;var e;2==c?e="XY":3==c?e="XYZ":4==c&&(e="XYZM");b=e}a.layout=b;a.stride=c}g.Nl=function(a){this.flatCoordinates&&(a(this.flatCoordinates,this.flatCoordinates,this.stride),this.ia())};
g.rotate=function(a,b){var c=this.flatCoordinates;if(c){var d=c.length,e=this.stride,f=c?c:[],h=Math.cos(a);a=Math.sin(a);var k=b[0];b=b[1];for(var l=0,m=0;m<d;m+=e){var n=c[m]-k,p=c[m+1]-b;f[l++]=k+n*h-p*a;f[l++]=b+n*a+p*h;for(n=m+2;n<m+e;++n)f[l++]=c[n]}c&&f.length!=l&&(f.length=l);this.ia()}};
g.scale=function(a,b,c){var d=b;void 0===d&&(d=a);var e=c;e||(e=dl(this.Y()));if(c=this.flatCoordinates){b=c.length;var f=this.stride,h=c?c:[],k=e[0];e=e[1];for(var l=0,m=0;m<b;m+=f){var n=c[m]-k,p=c[m+1]-e;h[l++]=k+a*n;h[l++]=e+d*p;for(n=m+2;n<m+f;++n)h[l++]=c[n]}c&&h.length!=l&&(h.length=l);this.ia()}};g.translate=function(a,b){var c=this.flatCoordinates;c&&(cn(c,0,c.length,this.stride,a,b,c),this.ia())};function Eo(a,b){var c=0,d;var e=0;for(d=b.length;e<d;++e)a[c++]=b[e];return c}function Fo(a,b,c,d){var e;var f=0;for(e=c.length;f<e;++f){var h=c[f],k;for(k=0;k<d;++k)a[b++]=h[k]}return b}function Go(a,b,c,d,e){e=e?e:[];var f=0,h;var k=0;for(h=c.length;k<h;++k)b=Fo(a,b,c[k],d),e[f++]=b;e.length=f;return e};function Ho(a,b,c,d,e){var f=NaN,h=NaN,k=(c-b)/d;if(1===k)f=a[b],h=a[b+1];else if(2==k)f=.5*a[b]+.5*a[b+d],h=.5*a[b+1]+.5*a[b+d+1];else if(0!==k){h=a[b];k=a[b+1];var l=0;f=[0];var m;for(m=b+d;m<c;m+=d){var n=a[m],p=a[m+1];l+=Math.sqrt((n-h)*(n-h)+(p-k)*(p-k));f.push(l);h=n;k=p}c=.5*l;l=0;m=f.length;for(n=!1;l<m;)h=l+(m-l>>1),k=+Ul(f[h],c),0>k?l=h+1:(m=h,n=!k);h=n?l:~l;0>h?(c=(c-f[-h-2])/(f[-h-1]-f[-h-2]),b+=(-h-2)*d,f=a[b],f+=c*(a[b+d]-f),h=a[b+1],h+=c*(a[b+d+1]-h)):(f=a[b+h*d],h=a[b+h*d+1])}return e?
(e[0]=f,e[1]=h,e):[f,h]};function Io(a,b,c,d,e,f){for(var h=0,k=a[c-d],l=a[c-d+1];b<c;b+=d){var m=a[b],n=a[b+1];l<=f?n>f&&0<(m-k)*(f-l)-(e-k)*(n-l)&&h++:n<=f&&0>(m-k)*(f-l)-(e-k)*(n-l)&&h--;k=m;l=n}return 0!==h};function Jo(a,b){zo.call(this);this.g=null;this.o=-1;this.ic(a,b)}I(Jo,zo);g=Jo.prototype;g.clone=function(){var a=new Jo(null);Ko(a,this.layout,this.flatCoordinates.slice());return a};g.getCoordinates=function(){return Ym(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};g.getLength=function(){return an(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};
function Lo(a){if(a.o!=a.Tb){var b=Ho(a.flatCoordinates,0,a.flatCoordinates.length,a.stride,a.g);a.g=b;a.o=a.Tb}return a.g}g.Yi=function(a){var b=[];b.length=sm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,b,0);a=new Jo(null);Ko(a,"XY",b);return a};g.T=function(){return"LineString"};g.ic=function(a,b){a?(Do(this,b,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fo(this.flatCoordinates,0,a,this.stride),this.ia()):Ko(this,"XY",null)};
function Ko(a,b,c){Co(a,b,c);a.ia()};function Mo(a,b){zo.call(this);this.g=[];this.ic(a,b)}I(Mo,zo);g=Mo.prototype;g.clone=function(){var a=new Mo(null);No(a,this.layout,this.flatCoordinates.slice(),this.g.slice());return a};g.getCoordinates=function(){return Zm(this.flatCoordinates,0,this.g,this.stride)};g.zd=function(){return this.g};function Oo(a){var b=a.flatCoordinates,c=a.g;a=a.layout;var d=[],e=0,f;var h=0;for(f=c.length;h<f;++h){var k=c[h],l=new Jo(null);Ko(l,a,b.slice(e,k));d.push(l);e=k}return d}
function Po(a){var b=[],c=a.flatCoordinates,d=0,e=a.g;a=a.stride;var f;var h=0;for(f=e.length;h<f;++h){var k=e[h];d=Ho(c,d,k,a);Wl(b,d);d=k}return b}g.Yi=function(a){var b=[],c=[],d=this.flatCoordinates,e=this.g,f=this.stride,h=0,k=0,l;var m=0;for(l=e.length;m<l;++m){var n=e[m];k=sm(d,h,n,f,a,b,k);c.push(k);h=n}b.length=k;a=new Mo(null);No(a,"XY",b,c);return a};g.T=function(){return"MultiLineString"};
g.ic=function(a,b){a?(Do(this,b,a,2),this.flatCoordinates||(this.flatCoordinates=[]),a=Go(this.flatCoordinates,0,a,this.stride,this.g),this.flatCoordinates.length=0===a.length?0:a[a.length-1],this.ia()):No(this,"XY",null,this.g)};function No(a,b,c,d){Co(a,b,c);a.g=d;a.ia()}function Qo(a,b){var c=a.layout,d=[],e=[],f;var h=0;for(f=b.length;h<f;++h){var k=b[h];0===h&&(c=k.layout);Wl(d,k.flatCoordinates);e.push(d.length)}No(a,c,d,e)};function Ro(a,b){var c=[];b=b||function(){return Ba(h)?"o"+Da(h):(typeof h).slice(0,2)+h};for(var d={},e=0,f=0;f<a.length;){var h=a[f++],k=b(h);Object.prototype.hasOwnProperty.call(d,k)?c[e++]=h:d[k]=!0}return c}function Yca(a,b){return-1*xb(a.Yl,b.Yl)}
function Zca(a,b){var c=[];a=a.sort(Yca);a=a.reduce(function(a,c,d){return c.data.reduce(function(a,e){var f=c.TF(e,c.Yl);if(c.Yl){if(0<d)throw Error("Multiple cross product sets are not supported!");f in a||(a[f]=[]);a[f].push(e)}else if(void 0!==f&&null!==f){var h=a[f];h&&(a[f]=h.map(b.bind(null,e)))}return a},a||{})},null);for(var d in a)c=c.concat(a[d]);return c}
function So(a,b,c,d){var e=xb;d=me(d,0,c-1);for(var f=0,h=a.length,k;f<h;){var l=f+h>>1;l-=l%c;var m=e(b,a[l+d]);0<m?f=l+c:(h=l,k=!m)}return k?f:~f};function To(a){if(!a)return null;var b=S;"EPSG:4326"!==b.Rb&&(a=a.clone().toLonLat());var c=a.Y();if(a instanceof zo&&Uo(a)){var d=360,e=0,f=a.flatCoordinates;a=a.stride;for(var h=0,k=f.length;h<k;h+=a){var l=Vo(f[h],0,360);d=Math.min(d,l);e=Math.max(e,l)}c[0]=d;c[2]=e}180<c[2]-c[0]&&(d=c[0]+360,c[0]=c[2],c[2]=d);"EPSG:4326"!==b.Rb&&(c=Ql(c,"EPSG:4326",b));return c};function Wo(a,b,c){zo.call(this);b=b?b:0;if(a){Do(this,c,a,0);this.flatCoordinates||(this.flatCoordinates=[]);c=this.flatCoordinates;a=Eo(c,a);c[a++]=c[0]+b;var d;b=1;for(d=this.stride;b<d;++b)c[a++]=c[b];c.length=a}else Co(this,"XY",null);this.ia()}I(Wo,zo);g=Wo.prototype;g.clone=function(){var a=new Wo(null),b=this.flatCoordinates.slice();Co(a,this.layout,b);a.ia();return a};function Xo(a){return a.flatCoordinates.slice(0,a.stride)}
g.Vl=function(a){var b=this.flatCoordinates,c=b[this.stride]-b[0];return Uk(b[0]-c,b[1]-c,b[0]+c,b[1]+c,a)};function Yo(a){var b=a.flatCoordinates[a.stride]-a.flatCoordinates[0];a=a.flatCoordinates[a.stride+1]-a.flatCoordinates[1];return Math.sqrt(b*b+a*a)}g.T=function(){return"Circle"};g.getCoordinates=function(){};g.ic=function(){};function Zo(a){yo.call(this);this.g=a?a:null;$o(this)}I(Zo,yo);function ap(a){var b=[],c;var d=0;for(c=a.length;d<c;++d)b.push(a[d].clone());return b}function bp(a){var b;if(a.g){var c=0;for(b=a.g.length;c<b;++c)yf(a.g[c],"change",a.ia,a)}}function $o(a){var b;if(a.g){var c=0;for(b=a.g.length;c<b;++c)H(a.g[c],"change",a.ia,a)}}g=Zo.prototype;g.clone=function(){var a=new Zo(null);cp(a,ap(this.g));return a};g.Vl=function(a){Vk(a);for(var b=this.g,c=0,d=b.length;c<d;++c)Yk(a,b[c].Y());return a};
function dp(a){return ap(a.g)}g.wm=function(a){this.u!=this.Tb&&(pf(this.j),this.l=0,this.u=this.Tb);if(0>a||0!==this.l&&a<this.l)return this;var b=a.toString();if(this.j.hasOwnProperty(b))return this.j[b];var c=[],d=this.g,e=!1,f;var h=0;for(f=d.length;h<f;++h){var k=d[h],l=k.wm(a);c.push(l);l!==k&&(e=!0)}if(e)return a=new Zo(null),cp(a,c),this.j[b]=a;this.l=a;return this};g.T=function(){return"GeometryCollection"};g.isEmpty=function(){return 0===this.g.length};
g.rotate=function(a,b){for(var c=this.g,d=0,e=c.length;d<e;++d)c[d].rotate(a,b);this.ia()};g.scale=function(a,b,c){c||(c=dl(this.Y()));for(var d=this.g,e=0,f=d.length;e<f;++e)d[e].scale(a,b,c);this.ia()};function cp(a,b){bp(a);a.g=b;$o(a);a.ia()}g.Nl=function(a){var b=this.g,c;var d=0;for(c=b.length;d<c;++d)b[d].Nl(a);this.ia()};g.translate=function(a,b){var c=this.g,d;var e=0;for(d=c.length;e<d;++e)c[e].translate(a,b);this.ia()};g.J=function(){bp(this);yo.prototype.J.call(this)};function ep(a,b,c,d){for(var e=0,f=a[c-d],h=a[c-d+1];b<c;b+=d){var k=a[b],l=a[b+1];e+=h*k-f*l;f=k;h=l}return e/2}function fp(a,b,c,d){var e=0,f;var h=0;for(f=c.length;h<f;++h){var k=c[h];e+=ep(a,b,k,d);b=k}return e};function gp(a,b){zo.call(this);this.ic(a,b)}I(gp,zo);g=gp.prototype;g.clone=function(){var a=new gp(null),b=this.flatCoordinates.slice();Co(a,this.layout,b);a.ia();return a};g.me=function(){return ep(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};g.getCoordinates=function(){return Ym(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};
g.Yi=function(a){var b=[];b.length=sm(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,a,b,0);a=new gp(null);Co(a,"XY",b);a.ia();return a};g.T=function(){return"LinearRing"};g.ic=function(a,b){a?(Do(this,b,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fo(this.flatCoordinates,0,a,this.stride)):Co(this,"XY",null);this.ia()};function hp(a,b){zo.call(this);this.ic(a,b)}I(hp,zo);g=hp.prototype;g.clone=function(){var a=new hp(null);ip(a,this.layout,this.flatCoordinates.slice());return a};g.getCoordinates=function(){return this.flatCoordinates?this.flatCoordinates.slice():[]};g.Vl=function(a){return Wk(this.flatCoordinates,a)};g.T=function(){return"Point"};g.ic=function(a,b){a?(Do(this,b,a,0),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Eo(this.flatCoordinates,a),this.ia()):ip(this,"XY",null)};
function ip(a,b,c){Co(a,b,c);a.ia()};function jp(a,b){zo.call(this);this.ic(a,b)}I(jp,zo);jp.prototype.clone=function(){var a=new jp(null),b=this.flatCoordinates.slice();Co(a,this.layout,b);a.ia();return a};jp.prototype.getCoordinates=function(){return Ym(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)};function kp(a){var b=a.flatCoordinates,c=a.layout;a=a.stride;var d=[],e;var f=0;for(e=b.length;f<e;f+=a){var h=new hp(null);ip(h,c,b.slice(f,f+a));d.push(h)}return d}jp.prototype.T=function(){return"MultiPoint"};
jp.prototype.ic=function(a,b){a?(Do(this,b,a,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=Fo(this.flatCoordinates,0,a,this.stride)):Co(this,"XY",null);this.ia()};function lp(a,b,c,d,e,f,h){for(var k,l,m,n,p,r=e[f+1],u=[],v=0,y=c.length;v<y;++v){var B=c[v];m=a[B-d];p=a[B-d+1];for(k=b;k<B;k+=d){n=a[k];l=a[k+1];if(r<=p&&l<=r||p<=r&&r<=l)m=(r-p)/(l-p)*(n-m)+m,u.push(m);m=n;p=l}}v=NaN;y=-Infinity;u.sort(Ul);m=u[0];k=1;for(l=u.length;k<l;++k){n=u[k];B=Math.abs(n-m);if(B>y){m=(m+n)/2;a:if(0!==c.length&&Io(a,b,c[0],d,m,r)){var G=1;for(p=c.length;G<p;++G)if(Io(a,c[G-1],c[G],d,m,r)){p=!1;break a}p=!0}else p=!1;p&&(v=m,y=B)}m=n}isNaN(v)&&(v=e[f]);return h?(h.push(v,
r,y),h):[v,r,y]};function mp(a,b,c,d){for(var e=0,f=a[c-d],h=a[c-d+1];b<c;b+=d){var k=a[b],l=a[b+1];e+=(k-f)*(l+h);f=k;h=l}return 0<e}function np(a,b,c,d){var e=0;d=void 0!==d?d:!1;var f;var h=0;for(f=b.length;h<f;++h){var k=b[h];e=mp(a,e,k,c);if(0===h){if(d&&e||!d&&!e)return!1}else if(d&&!e||!d&&e)return!1;e=k}return!0}
function op(a,b,c,d,e){e=void 0!==e?e:!1;var f;var h=0;for(f=c.length;h<f;++h){var k=c[h],l=mp(a,b,k,d);if(0===h?e&&l||!e&&!l:e&&!l||!e&&l){l=a;for(var m=k,n=d;b<m-n;){var p;for(p=0;p<n;++p){var r=l[b+p];l[b+p]=l[m-n+p];l[m-n+p]=r}b+=n;m-=n}}b=k}return b}function pp(a,b,c,d){var e=0,f;var h=0;for(f=b.length;h<f;++h)e=op(a,e,b[h],c,d);return e};function qp(a,b){zo.call(this);this.g=[];this.K=-1;this.O=null;this.P=-1;this.o=null;this.ic(a,b)}I(qp,zo);g=qp.prototype;g.clone=function(){var a=new qp(null);rp(a,this.layout,this.flatCoordinates.slice(),this.g.slice());return a};g.me=function(){return fp(this.Md(),0,this.g,this.stride)};g.getCoordinates=function(a){if(void 0!==a){var b=this.Md().slice();op(b,0,this.g,this.stride,a)}else b=this.flatCoordinates;return Zm(b,0,this.g,this.stride)};g.zd=function(){return this.g};
function sp(a){if(a.K!=a.Tb){var b=dl(a.Y());a.O=lp(a.Md(),0,a.g,a.stride,b,0);a.K=a.Tb}return a.O}function tp(a){var b=a.layout,c=a.flatCoordinates;a=a.g;var d=[],e=0,f;var h=0;for(f=a.length;h<f;++h){var k=a[h],l=new gp(null),m=l;e=c.slice(e,k);Co(m,b,e);m.ia();d.push(l);e=k}return d}g.Md=function(){if(this.P!=this.Tb){var a=this.flatCoordinates;np(a,this.g,this.stride)?this.o=a:(this.o=a.slice(),this.o.length=op(this.o,0,this.g,this.stride));this.P=this.Tb}return this.o};
g.Yi=function(a){var b=[],c=[];b.length=tm(this.flatCoordinates,0,this.g,this.stride,Math.sqrt(a),b,0,c);a=new qp(null);rp(a,"XY",b,c);return a};g.T=function(){return"Polygon"};g.ic=function(a,b){a?(Do(this,b,a,2),this.flatCoordinates||(this.flatCoordinates=[]),a=Go(this.flatCoordinates,0,a,this.stride,this.g),this.flatCoordinates.length=0===a.length?0:a[a.length-1],this.ia()):rp(this,"XY",null,this.g)};function rp(a,b,c,d){Co(a,b,c);a.g=d;a.ia()}
function up(a){var b=a[0],c=a[1],d=a[2];a=a[3];b=[b,c,b,a,d,a,d,c,b,c];c=new qp(null);rp(c,"XY",b,[b.length]);return c}function $ca(a){var b=a.stride,c=a.layout,d=new qp(null,c);b*=65;for(var e=Array(b),f=0;f<b;f++)e[f]=0;rp(d,c,e,[e.length]);c=Xo(a);a=Yo(a);b=d.flatCoordinates;e=d.layout;f=d.stride;for(var h=d.zd(),k=b.length/f-1,l,m,n=0;n<=k;++n)m=n*f,l=0+2*Pf(n,k)*Math.PI/k,b[m]=c[0]+a*Math.cos(l),b[m+1]=c[1]+a*Math.sin(l);rp(d,e,b,h);return d};function vp(a,b){zo.call(this);this.Jc=[];this.o=-1;this.B=null;this.G=-1;this.g=null;this.ic(a,b)}I(vp,zo);g=vp.prototype;g.clone=function(){for(var a=new vp(null),b=this.Jc.length,c=Array(b),d=0;d<b;++d)c[d]=this.Jc[d].slice();wp(a,this.layout,this.flatCoordinates.slice(),c);return a};g.me=function(){var a=this.Md(),b=this.Jc,c=0,d=0,e;var f=0;for(e=b.length;f<e;++f){var h=b[f];d+=fp(a,c,h,this.stride);c=h[h.length-1]}return d};
g.getCoordinates=function(a){if(void 0!==a){var b=this.Md().slice();pp(b,this.Jc,this.stride,a)}else b=this.flatCoordinates;return $m(b,0,this.Jc,this.stride)};
function xp(a){if(a.o!=a.Tb){var b=a.flatCoordinates,c=a.Jc,d=a.stride,e=0,f=[],h;var k=0;for(h=c.length;k<h;++k){var l=c[k];var m=b;var n=l[0],p=d,r=Vk(void 0);m=Zk(r,m,e,n,p);f.push((m[0]+m[2])/2,(m[1]+m[3])/2);e=l[l.length-1]}b=a.Md();c=a.Jc;d=a.stride;k=0;h=[];l=0;for(m=c.length;l<m;++l)e=c[l],h=lp(b,k,e,d,f,2*l,h),k=e[e.length-1];a.B=h;a.o=a.Tb}return a.B}
g.Md=function(){if(this.G!=this.Tb){var a=this.flatCoordinates;a:{var b=this.Jc;var c;var d=0;for(c=b.length;d<c;++d)if(!np(a,b[d],this.stride,void 0)){b=!1;break a}b=!0}b?this.g=a:(this.g=a.slice(),this.g.length=pp(this.g,this.Jc,this.stride));this.G=this.Tb}return this.g};
g.Yi=function(a){var b=[],c=[],d=this.flatCoordinates,e=this.Jc,f=this.stride;a=Math.sqrt(a);var h=0,k=0,l;var m=0;for(l=e.length;m<l;++m){var n=e[m],p=[];k=tm(d,h,n,f,a,b,k,p);c.push(p);h=n[n.length-1]}b.length=k;d=new vp(null);wp(d,"XY",b,c);return d};
function yp(a){var b=a.layout,c=a.flatCoordinates;a=a.Jc;var d=[],e=0,f,h;var k=0;for(f=a.length;k<f;++k){var l=a[k].slice(),m=l[l.length-1];if(0!==e){var n=0;for(h=l.length;n<h;++n)l[n]-=e}n=new qp(null);rp(n,b,c.slice(e,m),l);d.push(n);e=m}return d}g.T=function(){return"MultiPolygon"};
g.ic=function(a,b){if(a){Do(this,b,a,3);this.flatCoordinates||(this.flatCoordinates=[]);b=this.flatCoordinates;var c=this.stride,d=this.Jc,e=0;d=d?d:[];var f=0,h;var k=0;for(h=a.length;k<h;++k)e=Go(b,e,a[k],c,d[f]),d[f++]=e,e=e[e.length-1];d.length=f;0===d.length?this.flatCoordinates.length=0:(a=d[d.length-1],this.flatCoordinates.length=0===a.length?0:a[a.length-1]);this.ia()}else wp(this,"XY",null,this.Jc)};function wp(a,b,c,d){Co(a,b,c);a.Jc=d;a.ia()}
function zp(a,b){var c=a.layout,d=[],e=[],f;var h=0;for(f=b.length;h<f;++h){var k=b[h];0===h&&(c=k.layout);var l=d.length;var m=k.zd();var n;var p=0;for(n=m.length;p<n;++p)m[p]+=l;Wl(d,k.flatCoordinates);e.push(m)}wp(a,c,d,e)};var ada=E.V("ol.geom.Geometry");function Ap(a,b){b=b||"EPSG:4326";var c=Cl(b),d=S;if(!c)E.hb(ada,'"'+b+'" was not defined as a projection in the application!');else if(!Nl(c,d))return a.transform(c,d);return a}yo.prototype.toLonLat=function(){var a=S,b=Cl("EPSG:4326");return Nl(a,b)?this:this.transform(a,b)};Zo.prototype.clone=function(){return new Zo(dp(this))};
[Wo,Zo,gp,Jo,Mo,jp,vp,hp,qp].forEach(function(a){a&&a.prototype&&a.prototype.clone&&(a.prototype.lD=a.prototype.clone,a.prototype.clone=function(){var a=this.lD();Zh(this.la,a.la);return a})});var Bp={ft:1/6076,yd:4.937458854509546E-4,mi:5280/6076,m:1/1852,km:1/1.852,nmi:1},Cp=/^(([\d]{1,2}[C-X][A-Z]{2}([0-9][0-9]){0,5})|([ABYZ][A-Z]{2}([0-9][0-9]){0,5}))$/,Dp=/(ele(v(a(t(i(o(n)?)?)?)?)?)|alt(i(t(u(d(e)?)?)?)?)?)\b/i,bda=/((ele(v(a(t(i(o(n)?)?)?)?)?)|alt(i(t(u(d(e)?)?)?)?)?))_units\b/i,cda=/(depth)\b/i,dda=/(depth)_units\b/i,eda=/^mgrs\s*(d(e(r(i(v(e(d?)?)?)?)?)?)?)?$/i,Ep=/[^NEWSnews\d\s.\-,]/g;function Fp(a,b){this.Fb=a;this.coords=b}Fp.prototype.Fb=null;Fp.prototype.coords=null;
var Ip=[[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,dir:[5,8]}])],[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,dir:[5,8]}])]],Jp=[[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2}(\.\d*)?)[\s,:\u00b0]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,dir:[5,8]}])],[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2}(\.\d*)?)[\s,:\u00b0]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,dir:[5,8]}])]],fda=[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,
dir:[5,8]}])],gda=[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:null,fa:null,dir:[1,4]},{ea:6,min:null,fa:null,dir:[5,8]}])],Kp=[[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:5,dir:[1,
7]},{ea:9,min:10,fa:12,dir:[8,14]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:5,
dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])],[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:12,dir:[8,14]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])]],Lp=[[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:12,dir:[8,14]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:5,
dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])],[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:12,dir:[8,14]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:5,
dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])]],hda=[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])],ida=[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:10,dir:[7,12]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:5,dir:[1,7]},{ea:9,min:10,fa:11,dir:[8,13]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:4,dir:[1,6]},{ea:8,min:9,fa:11,dir:[7,13]}])],Mp=[[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,
min:8,fa:null,dir:[6,10]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}])],[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,
min:8,fa:null,dir:[6,10]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}])]],Np=[[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,
fa:null,dir:[5,8]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}])],[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),
new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}])]],jda=[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,9]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,
dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,9]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^\w\.+-]+([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}])],kda=[new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,10]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,
min:7,fa:null,dir:[5,8]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,9]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,9]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW])[^NSEW\d]*$/i,
[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,dir:[5,8]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,5]},{ea:7,min:8,fa:null,dir:[6,9]}]),new Fp(/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW])([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW])[^NSEW\d]*$/i,[{ea:2,min:3,fa:null,dir:[1,4]},{ea:6,min:7,fa:null,
dir:[5,9]}])],lda=[Ip[0].concat(Mp[0],Kp[0],Jp[0],Np[0],Lp[0]),Ip[1].concat(Mp[1],Kp[1],Jp[1],Np[1],Lp[1])];
function Op(a,b,c){if(a){var d=NaN,e=NaN,f,h=Pp(b?b:0,c);a=a.trim().toUpperCase();var k=null,l=null;var m=0;for(f=h.length;m<f&&!(l=h[m],k=l.Fb.exec(a));m++);if(!k&&void 0===b)for(h=Pp(1,c),m=0,f=h.length;m<f&&!(l=h[m],k=l.Fb.exec(a));m++);if(k){d=k[l.coords[0].ea].indexOf(".");e=k[l.coords[0].ea].indexOf("-");e=-1==e?k[l.coords[0].ea].indexOf("+"):e;var n=k[l.coords[0].dir[0]]||k[l.coords[0].dir[1]],p=k[l.coords[1].dir[0]]||k[l.coords[1].dir[1]];"N"==p||"S"==p||"E"==n||"W"==n||""===n&&d>=(-1!=e?
4:3)||1==b?(d=Qp(k[l.coords[0].ea],k[l.coords[0].min],k[l.coords[0].fa],n),e=Qp(k[l.coords[1].ea],k[l.coords[1].min],k[l.coords[1].fa],p)):(e=Qp(k[l.coords[0].ea],k[l.coords[0].min],k[l.coords[0].fa],n),d=Qp(k[l.coords[1].ea],k[l.coords[1].min],k[l.coords[1].fa],p))}if(!isNaN(e)&&!isNaN(d))return void 0===b&&!n&&!p&&90<Math.abs(e)&&(b=e,e=d,d=b),{lat:e,lon:d}}return null}
function Pp(a,b){if(void 0!==b)switch(b){case "DD":return fda.concat(gda);case "DDM":return jda.concat(kda);case "DMS":return hda.concat(ida)}return lda[a]}
function Rp(a,b){if(!a)return NaN;var c=Number(a);if(!isNaN(c))return c;var d=[];if(null!=b)switch(b){case "DD":d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*[^NSEW\d]*$/i,coords:{ea:2,min:null,fa:null,dir:[1,4]}});break;case "DDM":d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,5]}});d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,
fa:null,dir:[1,4]}});d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,4]}});break;case "DMS":d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:5,dir:[1,7]}}),d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:4,dir:[1,6]}})}else d=[{Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^NSEW\d]*$/i,
coords:{ea:2,min:null,fa:null,dir:[1,4]}},{Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,5]}},{Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,4]}},{Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:5,dir:[1,7]}},{Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,
coords:{ea:2,min:3,fa:4,dir:[1,6]}}];b=void 0;for(var e=0,f=d.length;e<f;e++){var h=d[e];if(b=h.Fb.exec(a))break}b&&(c=Qp(b[h.coords.ea],b[h.coords.min],b[h.coords.fa],b[h.coords.dir[0]]||b[h.coords.dir[1]]));return c}
function Sp(a,b){if(!a)return NaN;var c=Number(a);if(!isNaN(c))return c;var d=[];if(null!=b)switch(b){case "DD":d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}(\.\d*)?)[\s,:\u00b0]*[^NSEW\d]*$/i,coords:{ea:2,min:null,fa:null,dir:[1,4]}});break;case "DDM":d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,5]}});d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,
fa:null,dir:[1,4]}});d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2})?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,4]}});break;case "DMS":d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:5,dir:[1,7]}}),d.push({Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,3}[\.]?)(\d{2}[\.]?)(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:4,dir:[1,6]}})}else d=[{Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,2}(\.\d*)?)[\s,:\u00b0]*([NSEW]?)[^NSEW\d]*$/i,
coords:{ea:2,min:null,fa:null,dir:[1,4]}},{Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2}(\.\d*|\d{3})?)?[\s\']*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,5]}},{Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2}\.\d*)?[\s]*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:null,dir:[1,4]}},{Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})[\s,:\u00b0]+(\d{1,2})([\s\',:]+(\d{1,2}(\.\d*|\d{3})?))?[\s\"\']*([NSEW]?)[^NSEW\d]*$/i,coords:{ea:2,min:3,fa:5,dir:[1,7]}},{Fb:/^\s*([NSEW]?)[\s]*([-+]?\d{1,2})(\d{2})(\d{2}(\.\d*|\d{3})?)?[\s]*([NSEW]?)[^NSEW\d]*$/i,
coords:{ea:2,min:3,fa:4,dir:[1,6]}}];b=void 0;for(var e=0,f=d.length;e<f;e++){var h=d[e];if(b=h.Fb.exec(a))break}b&&(c=Qp(b[h.coords.ea],b[h.coords.min],b[h.coords.fa],b[h.coords.dir[0]]||b[h.coords.dir[1]]));return c}
function Qp(a,b,c,d){if(!b&&!c){a.indexOf(".");var e=a.indexOf("."),f=a.indexOf("-");f=-1==f?a.indexOf("+"):f;if(-1==e||e>=(-1!=f?5:4))-1==e&&(e=a.length),f=a.substring(0,Math.min(-1==f?1===e%2?3:2:0===e%2?4:3,e)),a=a.substring(f.length),e-=f.length,c=b="00",2<=e&&(b=a.substring(0,2),a=a.substring(2),e-=2),2<=e&&(c=a),a=f}c&&2<c.length&&-1==c.indexOf(".")&&(c=c.substring(0,2)+"."+c.substring(2));a=parseFloat(a);b=parseFloat(b);c=parseFloat(c);e=Math.abs(a);isNaN(b)||(e+=b/60);isNaN(c)||(e+=c/60/60);
0>a&&(e*=-1);if("S"==d||"W"==d)e*=-1;return e}function Tp(a,b,c,d){var e=2<a.length?a[2]:0;c=360<c?c%360:c;d=d||0;for(var f=c/20,h=[],k=0;20>=k;++k){var l=osasm.geodesicDirect(a,d-c/2+k*f,b);l.push(e);h.push(l)}return h}
function Up(a,b){var c=Math.PI/10/2,d=[[1,0]];d[10]=[0,1];d[20]=[-1,0];d[30]=[0,-1];for(var e=1;10>e;++e){var f=e*c,h=Math.cos(f);f=Math.sin(f);d[e]=[h,f];d[e+10]=[-f,h];d[e+20]=[-h,-f];d[e+30]=[f,-h]}d.push(d[0]);var k=[];$a(d,function(c){k.push([a[0]+c[0]*b,a[1]+c[1]*b])});return k}
function Vp(a,b,c,d){var e=2<a.length?a[2]:0,f=Math.PI,h=1.2>Math.max(b,c)/Math.min(b,c)?mda:nda,k=Math.PI/2;d=Wp*(90-d);for(var l=[],m,n=void 0,p=0;2>p;p++){for(var r=0;32>r;r++)m=h(r,k,f,32),m=osasm.geodesicDirect(a,Xp*(m-d),b*c/Math.sqrt(Math.pow(b*Math.cos(m),2)+Math.pow(c*Math.sin(m),2))),m.push(e),l.push(m),n||(n=m);k+=Math.PI}l.push(n);return l}function Yp(a){if(a&&0<a.length){var b=a[0];a=a[a.length-1];if(b&&a)return Zp(b,a)}return!1}
function $p(a,b){var c=Yp(a);var d=Yp(a);d=null!=a&&(d&&3<a.length||!d&&2<a.length);if(a&&c&&d&&b){c=a.length;for(var e=d=!1,f=!1,h=!1;c--;)if(Zp(a[c],[b[0],b[1]]))f=!0;else if(Zp(a[c],[b[0],b[3]]))d=!0;else if(Zp(a[c],[b[2],b[1]]))h=!0;else if(Zp(a[c],[b[2],b[3]]))e=!0;else return!1;return e&&d&&h&&f}return!1}function aq(a){return a?(a=a.T(),"Polygon"==a||"MultiPolygon"==a):!1}function bq(a){var b;if(a&&0<a.length)for(var c=0;c<a.length;c+=1)if((b=a[c])&&2<b.length&&0!==b[2])return!0;return!1}
function cq(a){var b=!1,c,d;switch(a.T()){case "Point":(c=a.getCoordinates())&&(b=c&&2<c.length&&0!==c[2]);break;case "LineString":b=a.getCoordinates();b=bq(b);break;case "MultiPoint":b=a.getCoordinates();b=bq(b);break;case "MultiLineString":if(a=a.getCoordinates())for(c=0;c<a.length;c+=1)if(bq(a[c])){b=!0;break}break;case "Polygon":if(d=a.getCoordinates())for(c=0;c<d.length;c+=1)if(bq(d[c])){b=!0;break}break;case "MultiPolygon":var e=a.getCoordinates();if(e)for(a=0;a<e.length;a+=1)for(d=e[a],c=0;c<
d.length;c+=1)if(bq(d[c])){b=!0;a=e.length;break}break;case "GeometryCollection":if(a=dp(a))for(c=0;c<a.length;c+=1)if(cq(a[c])){b=!0;break}break;case "Circle":c=Bo(a);a=a.flatCoordinates.slice(a.flatCoordinates.length-a.stride);c&&a&&(b=c&&2<c.length&&0!==c[2]||a&&2<a.length&&0!==a[2]);break;default:b=!1}return null==b?!1:b}function Zp(a,b){return null==a||null==b||2==!a.length||2==!b.length?!1:1E-12>=Math.abs(a[0]-b[0])&&1E-12>=Math.abs(a[1]-b[1])}
function dq(a,b,c){var d=0>a;a=Sb(Math.abs(a),void 0!==b&&b?3:2,c);return(d?"-":"")+a}function eq(a,b,c){b=void 0!==b?b:!0;c=void 0!==c?c:!0;var d=0>a,e=0<a?Math.floor(a):Math.ceil(a),f=Math.abs(60*(e-a));a=Math.floor(f);f=60*(f-a);return Ub(dq(Math.abs(e),b),c?"\u00b0 ":"",dq(a),c?"' ":"",dq(f,!1,2),c?'"':"",c?" ":"",b?d?"W":"E":d?"S":"N")}
function fq(a,b,c){b=void 0!==b?b:!0;c=void 0!==c?c:!0;var d=0>a,e=0<a?Math.floor(a):Math.ceil(a);a=Math.abs(60*(e-a));return Ub(dq(Math.abs(e),b),c?"\u00b0 ":"",dq(a,!1,2),c?"'":"",c?" ":"",b?d?"W":"E":d?"S":"N")}function gq(a){return 90<a?90:-90>a?-90:a}function Vo(a,b,c){if(void 0!==b&&void 0!==c){for(;a<b;)a+=360;for(;a>c;)a-=360;return a}return 180<a?(a+180)%360-180:-180>a?(a-180)%360+180:a}
function Uo(a){if(a){var b;a instanceof Array&&(b=a);if(a instanceof yo){if(a instanceof hp)return!1;if(a instanceof Jo){b=a.flatCoordinates;a=a.stride;for(var c=Vo(b[0]),d=!1,e=0;e<b.length-a;e+=a){var f=Vo(b[e+a]);if(180!=Math.abs(c)&&180!=Math.abs(f)&&180<Math.abs(f-c)){d=!0;break}180!=Math.abs(f)&&(c=f)}return d}if(a instanceof Mo)return Oo(a).some(Uo);b=a.Y()}if(a instanceof hq)return(b=a.Z())?Uo(b):!1;if(b&&3<b.length)return a=Math.min(b[0],b[2]),b=Math.max(b[0],b[2]),!(-180>a&&-180>b||180<
a&&180<b||-180<a&&180>b)}return!1}function iq(a,b){if(a&&0<a.length){b=null!=b?b:Vo(a[0][0]);for(var c=0;c<a.length;c++)a[c][0]=Vo(a[c][0],b-180,b+180),a[c][1]=gq(a[c][1])}}function jq(a,b){if(a)for(var c=0;c<a.length;c++)iq(a[c],b)}
function kq(a,b){if(a&&!a.get("_normalized")&&!lq(a))switch(a.T()){case "Point":var c=a.getCoordinates();b=null!=b?b:0;c[0]=Vo(c[0],b-180,b+180);c[1]=gq(c[1]);a.ic(c);break;case "LineString":case "MultiPoint":c=a.getCoordinates();iq(c,b);a.ic(c);break;case "Polygon":case "MultiLineString":c=a.getCoordinates();jq(c,b);a.ic(c);break;case "MultiPolygon":if(c=a.getCoordinates())for(var d=0;d<c.length;d++)jq(c[d],b);a.ic(c);break;case "GeometryCollection":for(a=a.g,c=0;c<a.length;c++)kq(a[c],b)}}
function mda(a,b,c,d){return a/d*c+b}function nda(a,b,c,d){a/=d/2;if(1>a)return c*Math.pow(2,10*(a-1))/2+b;a--;return c*(-Math.pow(2,-10*a)+2)/2+b}function mq(a){var b=0;if(a)for(var c=1;c<a.length;c++){var d=a[c][0]-a[c-1][0];180<d?d-=360:-180>d&&(d+=360);b+=d}return 1<Math.abs(b)}var Xp=180/Math.PI,Wp=Math.PI/180;function nq(a){if(a instanceof Zo){var b=a.g;if(1===b.length)return nq(b[0])}return a}
function oq(a){var b=a.T();if("LineString"!==b&&"MultiLineString"!==b||a.get("_normalized")||!Uo(a))return a;if(a instanceof Jo){b=pq(a);var c=qq(b,a.layout)}else a instanceof Mo&&(b=oda(a),c=qq(b,a.layout));c instanceof yo&&To(c);c.set("_normalized",!0);return c}function qq(a,b){return 1<a.length?new Mo(a,b):new Jo(a[0],b)}
function pq(a){a=a.getCoordinates();a.forEach(function(a){a[0]=Vo(a[0])});for(var b=0,c=[],d=0;d<a.length-1;d++){var e=a[d+1],f=e[0]-a[d][0];180<Math.abs(f)&&(b=a.slice(b,d+1),e=e.slice(),e[0]=0<f?e[0]-360:e[0]+360,b.push(e),c.push(b),b=d+1)}b!==a.length-1&&c.push(a.slice(b));return c}function oda(a){return Oo(a).reduce(function(a,c){c=c?pq(c):[];return a.concat(c)},[])};function pda(a,b){return a&&b?a.toFixed(5)+"\u00b0  "+b.toFixed(5)+"\u00b0":""}Q.filter("deg",[function(){return pda}]);function qda(a){return a+"\u00b0"}Q.filter("deglat",[function(){return qda}]);function rda(a){return a+"\u00b0"}Q.filter("deglon",[function(){return rda}]);function sda(a,b){return fq(a,!1,!1)+" "+fq(b,!0,!1)}Q.filter("ddm",[function(){return sda}]);function tda(a){return fq(a,!1,!1)}Q.filter("ddmlat",[function(){return tda}]);function uda(a){return fq(a,!0,!1)}
Q.filter("ddmlon",[function(){return uda}]);function vda(a,b){return eq(a,!1,!1)+" "+eq(b,!0,!1)}Q.filter("dms",[function(){return vda}]);function wda(a){return eq(a,!1,!1)}Q.filter("dmslat",[function(){return wda}]);function xda(a){return eq(a,!0,!1)}Q.filter("dmslon",[function(){return xda}]);function yda(a,b){return b&&a?osasm.toMGRS([b,a]):""}Q.filter("mgrs",[function(){return yda}]);E.V("os.ui.location");var zda={CP:"deg",DP:"dms",AP:"ddm",PQ:"mgrs"};function rq(){return M.get("locationFormat","deg")};function sq(a,b){this.v=a;this.l=b;this.location="";this.currentFormat=rq();this.g=new Fh(this.format,25,this);this.v.$on("$destroy",this.o.bind(this));this.v.$watch("latdeg",this.j.bind(this));this.v.$watch("londeg",this.j.bind(this));M.H("locationFormat",this.Xv,!1,this)}sq.$inject=["$scope","$filter"];sq.prototype.o=function(){z(this.g);this.l=this.v=this.g=null};sq.prototype.j=function(){this.g&&this.g.start()};
sq.prototype.format=function(a){if(this.v&&void 0!=this.v.latdeg&&void 0!=this.v.londeg){this.currentFormat=a||rq();a=this.l(this.currentFormat);var b=this.v.latdeg,c=this.v.londeg;this.location="number"!==typeof b&&"string"!==typeof b||"number"!==typeof c&&"string"!==typeof c?"":a(this.v.latdeg,this.v.londeg).replace(/\u00b0/g,"&deg;");if(this.v.onchange)this.v.onchange();R(this.v)}};sq.prototype.format=sq.prototype.format;sq.prototype.Xv=function(a){a.l&&this.format(a.l)};
sq.prototype.locationChanged=sq.prototype.Xv;function tq(){return{restrict:"EA",replace:!0,template:tq.l,controller:sq,controllerAs:"simpleLocationCtrl",scope:{latdeg:"=",londeg:"=",onchange:"&"}}}tq.g="simpleLocation";Q.directive(tq.g,[tq]);tq.l='<div><simple-location-controls format-default="simpleLocationCtrl.currentFormat" on-change="simpleLocationCtrl.format(opt_format)"></simple-location-controls><span ng-bind-html="simpleLocationCtrl.location"></span></div>';
function uq(a){this.v=a;this.g=this.v.change;this.format=rq();this.g({opt_format:this.format});this.v.$on("$destroy",this.j.bind(this));this.v.$watch("formatDefault",t(function(a){this.format=a},this));M.H("locationFormat",this.Yv,!1,this)}uq.$inject=["$scope"];uq.prototype.Pu=function(a,b){this.g({opt_format:a});b&&b.target&&b.target.blur();M.set("locationFormat",a);R(this.v)};uq.prototype.formatChanged=uq.prototype.Pu;uq.prototype.Yv=function(a){a.l&&this.Pu(a.l)};
uq.prototype.locationControlChanged=uq.prototype.Yv;uq.prototype.j=function(){this.v=null};function vq(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/location/simplelocation.html",controller:uq,controllerAs:"simpleLocationControlsCtrl",scope:{formatDefault:"=",change:"&onChange",formatGroup:"&"}}}vq.g="simpleLocationControls";Q.directive(vq.g,vq);var Ada=/^mailto:/,wq=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,xq=/((ftp|https?):\/\/|(mailto:)?[A-Za-z0-9._%+-]+@)[^\s'"]*[^\s.;,{}<>'"]/;function Bda(a){var b={};a&&a.toString().split("&").forEach(function(a){a=a.split("=");2==a.length&&(b[a[0]]=decodeURIComponent(a[1]))});return b};var yq=/^(true|false)$/i,zq=/^(0x)?[0-9A-Fa-f]+$/,Aq=/^[+-]?\d+(\.\d*)?(E[+-]\d+)?$/;
function Bq(a,b,c,d,e){function f(a,f){l.push("<a ");c&&(l.push('class="'),l.push(c),l.push('" '));d&&(l.push('title="'),l.push(d),l.push('" '));b&&(l.push('target="'),l.push(b),l.push('" '));l.push('href="');l.push(a);l.push('">');h(e?e:f);l.push("</a>")}function h(a){a&&l.push(ok(pk(a)))}if(!a)return a;for(var k=a,l=[],m,n;a=k.match(xq);)m=a[0],a[2]==a[3]&&(m="mailto:"+m),n=a.index,h(k.substr(0,n)),f(m,a[0].replace(Ada,"")),k=k.substring(n+a[0].length);h(k);return l.join("")};function Cq(a){return function(b,c){return a(Bq(b,c))}}Cq.$inject=["$sanitize"];Q.filter("osLinky",["$sanitize",Cq]);function Dq(){uo.call(this);this.Da("Display");vo(this);this.fb("Start application in 2D or 3D mode");this.vb(["2D","3D","Dimension"]);this.yc("fa fa-dashboard");this.ld="displaysettings"}w(Dq,uo);var Cda={};function Eq(){var a=M.get("os.map.terrainOptions");return!(!a||!a.type)}Q.directive("displaysettings",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/config/displaysettings.html",controller:Fq,controllerAs:"display"}}]);
function Fq(a){this.v=a;a.appName=Wh("the application");this.help={fog:"Fog is displayed when tilting the globe to reduce rendered tiles and terrain near the horizon. Disabling fog or reducing density may degrade application performance.",sunlight:"Light the 3D scene with the Sun.",terrain:"Show terrain on the 3D globe."};this.g=!1;this.mapMode=M.get("os.map.mapMode","3d");this.v.$watch("display.mapMode",this.RO.bind(this));var b=M.get("os.map.cameraState");if(b)try{var c=JSON.parse(b)}catch(d){c=
void 0}this.cameraMode=M.get("os.map.cameraMode","default");this.v.$watch("display.cameraMode",this.MO.bind(this));this.cameraState=c||Gq(this);this.fogEnabled=M.get("os.map.fogEnabled",!0);b=M.get("os.map.fogDensity",.5);.001>b&&(b=.5);this.fogDensity=b;this.sunlightEnabled=M.get("os.map.enableLighting",!1);this.terrainEnabled=M.get("os.map.enableTerrain",!1);a.$watch("display.fogEnabled",this.zt.bind(this));a.$watch("display.fogDensity",this.zt.bind(this));M.H("os.map.cameraState",this.Cw,!1,this);
M.H("os.map.mapMode",this.Tx,!1,this);M.H("os.map.enableLighting",this.j,!1,this);M.H("os.map.enableTerrain",this.l,!1,this);Hq(this);a.$on("$destroy",this.PK.bind(this))}Fq.$inject=["$scope"];g=Fq.prototype;g.PK=function(){M.M("os.map.cameraState",this.Cw,!1,this);M.M("os.map.mapMode",this.Tx,!1,this);M.M("os.map.enableLighting",this.j,!1,this);M.M("os.map.enableTerrain",this.l,!1,this);this.v=null};function Iq(a,b,c){M&&(a.g=!0,M.set(b,c),a.g=!1)}
function Gq(a){var b=L.s(),c=Jq(b,3);b=Xn(b.X());return{mode:a.mapMode,center:[0,0],altitude:Vn([b[0],b[1]],c),heading:0,roll:0,tilt:0}}function Hq(a){a.show3DSettings=L.s().vc();a.show3DSettings?(a.v.showIEHelp=!1,a.v.showFFHelp=!1,a.v.showGCHelp=!1):od&&11==xd?a.v.showIEHelp=!0:qd&&Bd(10)?a.v.showFFHelp=!0:rd&&Bd(28)&&(a.v.showGCHelp=!0)}g.Cw=function(a){if(!this.g&&a.l&&"string"==typeof a.l)try{this.cameraState=JSON.parse(a.l),R(this.v)}catch(b){}};
g.Tx=function(a){!this.g&&a.l&&a.l!==this.mapMode&&(this.mapMode=a.l,Hq(this),R(this.v))};g.RO=function(a,b){a&&b&&a!==b&&Iq(this,"os.map.mapMode",a)};g.MO=function(a,b){if(a&&b&&a!==b)switch(Iq(this,"os.map.cameraMode",a),a){case "default":this.cameraState=Gq(this);M&&Iq(this,"os.map.cameraState","");break;case "last":this.yB()}};g.yB=function(){this.cameraState=Kq(L.s());M&&Iq(this,"os.map.cameraState",JSON.stringify(this.cameraState))};Fq.prototype.useCurrentPosition=Fq.prototype.yB;
Fq.prototype.zm=function(){if(this.cameraState&&0<this.cameraState.altitude){var a=L.s();a=Wn(a.X(),this.cameraState.altitude);return Lq(L.s(),a).toFixed(1)}return(3).toFixed(1)};Fq.prototype.getZoom=Fq.prototype.zm;Fq.prototype.zt=function(){M.set("os.map.fogEnabled",this.fogEnabled);M.set("os.map.fogDensity",this.fogDensity)};Fq.prototype.updateFog=Fq.prototype.zt;Fq.prototype.j=function(a){this.g||a.l===this.sunlightEnabled||(this.sunlightEnabled=a.l,R(this.v))};
Fq.prototype.l=function(a){this.g||a.l===this.terrainEnabled||(this.terrainEnabled=a.l,R(this.v))};Fq.prototype.oO=function(){return Eq()};Fq.prototype.supportsTerrain=Fq.prototype.oO;Fq.prototype.SO=function(){Iq(this,"os.map.enableLighting",this.sunlightEnabled)};Fq.prototype.updateSunlight=Fq.prototype.SO;Fq.prototype.TO=function(){Iq(this,"os.map.enableTerrain",this.terrainEnabled)};Fq.prototype.updateTerrain=Fq.prototype.TO;function Mq(){x.call(this);this.enabled=this.u=!1;this.map=void 0;this.log=Dda;this.cf=void 0;this.pO=60;this.A="bgColor os.map.enableLighting os.map.enableTerrain os.map.fogEnabled os.map.fogDensity os.map.terrainOptions".split(" ")}w(Mq,x);var Dda=E.V("os.webgl.AbstractWebGLRenderer");g=Mq.prototype;g.J=function(){Mq.C.J.call(this);this.A.forEach(function(a){M.M(a,this.zx,!1,this)},this)};g.X=function(){return this.map};g.setMap=function(a){this.map=a};g.tg=function(){return this.u};
g.Bn=function(){this.u||(this.A.forEach(function(a){M.H(a,this.zx,!1,this)},this),this.u=!0);return Sc()};g.renderSync=wa;function Eda(a){a.cf&&a.cf.reset()}g.kc=function(){return this.enabled};g.Za=function(a){this.cf&&this.cf.setActive(a);this.enabled=a};
g.zx=function(a){switch(a.type){case "bgColor":a=a.l;df(a)&&this.ts(a);break;case "os.map.enableLighting":this.rt(!!a.l);break;case "os.map.enableTerrain":this.mo(!!a.l);break;case "os.map.fogEnabled":this.lo(!!a.l);break;case "os.map.fogDensity":"number"===typeof a.l&&this.Zn(a.l);break;case "os.map.terrainOptions":this.kc()&&this.Co()}};g.ts=function(){};g.lo=function(){};g.Zn=function(){};g.rt=function(){};g.bm=function(){M.set("os.map.enableTerrain",!1);N.dispatchEvent("map:terrainDisabled")};
g.mo=function(){};g.Co=function(){};g.Ru=function(){return[Nq]};function Oq(a){var b=Math.pow(10,12);return Math.round(a*b)/b}function Pq(a){return"number"===typeof a?a:"string"===typeof a&&(a=a.trim())?Number(a):NaN};var Qq=NaN;function Fda(){N.dispatchEvent("strata:camera:viewChange")};function Rq(a){this.ha=a;this.g=!1;this.l=this.j=0;isNaN(Qq)&&(Qq=Strata.addFunction(Fda),Strata.CameraAPI.setViewChangeListener(Qq));N.H("strata:camera:viewChange",this.Eg,!1,this)}w(Rq,x);g=Rq.prototype;g.J=function(){Rq.C.J.call(this);N.M("strata:camera:viewChange",this.Eg,!1,this)};g.kc=function(){return this.g};g.Za=function(a){this.g!==a&&(a||this.Eg(),this.g=a)&&(this.wg(),a=Sn(1,S),this.j=this.Rf(a,0),a=Sn(25,S),this.l=this.Rf(a,0))};
g.Ff=function(){var a=Strata.CameraAPI.getPositionCartographic();return a&&3<=a.length?a[2]:0};g.Y=function(){return Strata.GlobeAPI.getScreenBoundsGeo()};g.Cp=function(){return 0};g.et=function(){};g.Qp=function(){return 0};g.tl=function(){};g.pz=function(){};g.qz=function(){};g.rz=function(){};g.oz=function(){};g.sz=function(){};g.uz=function(){};g.nz=function(){};g.Cn=function(){};g.Ti=function(){return this.Ff()};
g.Jo=function(a){var b=this.Ti();a=b-b*a;a>b-this.l?a=b-this.l:a<b-this.j&&(a=b-this.j);a&&Strata.CameraAPI.zoomInOrOutByMeters(a)};g.wg=function(){};g.Eg=function(){var a=T(this.ha);if(this.g&&a){var b=Strata.CameraAPI.getPositionCartographic();var c=(c=document.querySelector("canvas.webgl-canvas"))?Strata.GlobeAPI.getCoordinateFromPixel([c.clientWidth/2,c.clientHeight/2]):void 0;(c=c||b)&&b&&(Sq(a,Ll(c,"EPSG:4326",S)),b=this.Eh(b[2],0),Tq(a,a.constrainResolution(b,0,0)))}};
g.Rf=function(a,b){var c=document.querySelector("canvas.webgl-canvas");if(c){var d=Strata.CameraAPI.getFOVY(),e=ml(T(this.ha).Ra());return a*(c.clientHeight||300)*e*Math.cos(Math.abs(b))/2/Math.tan(d/2)}return 0};g.Eh=function(a,b){var c=document.querySelector("canvas.webgl-canvas");if(c){var d=Strata.CameraAPI.getFOVY(),e=ml(T(this.ha).Ra());return 2*a*Math.tan(d/2)/e/Math.cos(Math.abs(b))/c.clientHeight}return 0};
g.ra=function(){var a=Strata.CameraAPI.getPositionCartographic();if(a&&3===a.length){var b=Oq(a[0])||0,c=Oq(a[1])||0;a=a[2];var d=T(this.ha).Ra(),e=Wn(this.ha,a);d=Rn(e,d,1);return{center:[b,c],altitude:a,heading:0,roll:0,tilt:0,zoom:d}}return{}};g.restore=function(){};var Gda=!od||Cd(),Hda=!qd&&!od||od&&Cd()||qd&&Bd("1.9.1");function Uq(a,b){this.x=sa(a)?a:0;this.y=sa(b)?b:0}g=Uq.prototype;g.clone=function(){return new Uq(this.x,this.y)};g.equals=function(a){return a instanceof Uq&&(this==a?!0:this&&a?this.x==a.x&&this.y==a.y:!1)};g.ceil=function(){this.x=Math.ceil(this.x);this.y=Math.ceil(this.y);return this};g.floor=function(){this.x=Math.floor(this.x);this.y=Math.floor(this.y);return this};g.round=function(){this.x=Math.round(this.x);this.y=Math.round(this.y);return this};
g.translate=function(a,b){a instanceof Uq?(this.x+=a.x,this.y+=a.y):(this.x+=Number(a),ua(b)&&(this.y+=b));return this};g.scale=function(a,b){b=ua(b)?b:a;this.x*=a;this.y*=b;return this};function Vq(a){return a?new Wq(Xq(a)):Na||(Na=new Wq)}function Yq(a,b){return ta(b)?a.getElementById(b):b}
function Zq(a,b){var c=b||document;if(c.getElementsByClassName)a=c.getElementsByClassName(a)[0];else{c=document;var d=b||c;if(d.querySelectorAll&&d.querySelector&&a)a=d.querySelector(""+(a?"."+a:""));else{b=b||c;if(b.querySelectorAll&&b.querySelector&&a)a=b.querySelectorAll(""+(a?"."+a:""));else if(a&&b.getElementsByClassName){var e=b.getElementsByClassName(a);a=e}else if(e=b.getElementsByTagName("*"),a){var f={};for(c=d=0;b=e[c];c++){var h=b.className;"function"==typeof h.split&&gb(h.split(/\s+/),
a)&&(f[d++]=b)}f.length=d;a=f}else a=e;a=a[0]||null}}return a||null}function $q(a,b){fc(b,function(b,d){b&&b.Af&&(b=b.Ce());"style"==d?a.style.cssText=b:"class"==d?a.className=b:"for"==d?a.htmlFor=b:ar.hasOwnProperty(d)?a.setAttribute(ar[d],b):Eb(d,"aria-")||Eb(d,"data-")?a.setAttribute(d,b):a[d]=b})}
var ar={cellpadding:"cellPadding",cellspacing:"cellSpacing",colspan:"colSpan",frameborder:"frameBorder",height:"height",maxlength:"maxLength",nonce:"nonce",role:"role",rowspan:"rowSpan",type:"type",usemap:"useMap",valign:"vAlign",width:"width"};function br(a){a=a.document;a="CSS1Compat"==a.compatMode?a.documentElement:a.body;return new Te(a.clientWidth,a.clientHeight)}
function cr(a){var b=a.scrollingElement?a.scrollingElement:rd||"CSS1Compat"!=a.compatMode?a.body||a.documentElement:a.documentElement;a=a.parentWindow||a.defaultView;return od&&Bd("10")&&a.pageYOffset!=b.scrollTop?new Uq(b.scrollLeft,b.scrollTop):new Uq(a.pageXOffset||b.scrollLeft,a.pageYOffset||b.scrollTop)}function dr(a,b,c){return er(document,arguments)}
function er(a,b){var c=String(b[0]),d=b[1];if(!Gda&&d&&(d.name||d.type)){c=["<",c];d.name&&c.push(' name="',Ob(d.name),'"');if(d.type){c.push(' type="',Ob(d.type),'"');var e={};yc(e,d);delete e.type;d=e}c.push(">");c=c.join("")}c=a.createElement(c);d&&(ta(d)?c.className=d:q(d)?c.className=d.join(" "):$q(c,d));2<b.length&&fr(a,c,b,2);return c}
function fr(a,b,c,d){function e(c){c&&b.appendChild(ta(c)?a.createTextNode(c):c)}for(;d<c.length;d++){var f=c[d];!za(f)||Ba(f)&&0<f.nodeType?e(f):$a(Ida(f)?rb(f):f,e)}}function gr(a){var b=document,c=b.createElement("DIV");od?(a=wk(yk,a),c.innerHTML=ok(a),c.removeChild(c.firstChild)):c.innerHTML=ok(a);if(1==c.childNodes.length)c=c.removeChild(c.firstChild);else{for(b=b.createDocumentFragment();c.firstChild;)b.appendChild(c.firstChild);c=b}return c}function hr(a,b){fr(Xq(a),a,arguments,1)}
function ir(a){for(var b;b=a.firstChild;)a.removeChild(b)}function Ik(a){return a&&a.parentNode?a.parentNode.removeChild(a):null}function jr(a){return Hda&&void 0!=a.children?a.children:ab(a.childNodes,function(a){return 1==a.nodeType})}function kr(a){return sa(a.firstElementChild)?a.firstElementChild:lr(a.firstChild)}function lr(a){for(;a&&1!=a.nodeType;)a=a.nextSibling;return a}function mr(a){return Ba(a)&&1==a.nodeType}
function nr(a,b){if(!a||!b)return!1;if(a.contains&&1==b.nodeType)return a==b||a.contains(b);if("undefined"!=typeof a.compareDocumentPosition)return a==b||!!(a.compareDocumentPosition(b)&16);for(;b&&a!=b;)b=b.parentNode;return b==a}function Xq(a){return 9==a.nodeType?a:a.ownerDocument||a.document}
function or(a,b){if("textContent"in a)a.textContent=b;else if(3==a.nodeType)a.data=String(b);else if(a.firstChild&&3==a.firstChild.nodeType){for(;a.lastChild!=a.firstChild;)a.removeChild(a.lastChild);a.firstChild.data=String(b)}else ir(a),a.appendChild(Xq(a).createTextNode(String(b)))}function pr(a){return od&&!Bd("9")?(a=a.getAttributeNode("tabindex"),null!=a&&a.specified):a.hasAttribute("tabindex")}function qr(a){a=a.tabIndex;return ua(a)&&0<=a&&32768>a}
function Ida(a){if(a&&"number"==typeof a.length){if(Ba(a))return"function"==typeof a.item||"string"==typeof a.item;if(Ca(a))return"function"==typeof a.item}return!1}function rr(a,b){return b?sr(a,function(a){return!b||ta(a.className)&&gb(a.className.split(/\s+/),b)},!0,void 0):null}function sr(a,b,c,d){a&&!c&&(a=a.parentNode);for(c=0;a&&(null==d||c<=d);){if(b(a))return a;a=a.parentNode;c++}return null}function Wq(a){this.g=a||ra.document||document}g=Wq.prototype;
g.ub=function(a){return Yq(this.g,a)};g.getElementsByTagName=function(a,b){return(b||this.g).getElementsByTagName(String(a))};g.qc=$q;g.Rh=function(a,b,c){return er(this.g,arguments)};g.appendChild=function(a,b){a.appendChild(b)};g.append=hr;g.canHaveChildren=function(a){if(1!=a.nodeType)return!1;switch(a.tagName){case "APPLET":case "AREA":case "BASE":case "BR":case "COL":case "COMMAND":case "EMBED":case "FRAME":case "HR":case "IMG":case "INPUT":case "IFRAME":case "ISINDEX":case "KEYGEN":case "LINK":case "NOFRAMES":case "NOSCRIPT":case "META":case "OBJECT":case "PARAM":case "SCRIPT":case "SOURCE":case "STYLE":case "TRACK":case "WBR":return!1}return!0};
g.removeNode=Ik;g.na=jr;g.isElement=mr;g.isWindow=function(a){return Ba(a)&&a.window==a};g.contains=nr;function tr(a,b){var c=b||{};b=c.document||document;var d=yi(a),e=document.createElement("SCRIPT"),f={AA:e,Na:void 0},h=new nh(Jda,f),k=null,l=null!=c.timeout?c.timeout:5E3;0<l&&(k=window.setTimeout(function(){ur(e,!0);h.Gb(new vr(Kda,"Timeout reached for loading script "+d))},l),f.Na=k);e.onload=e.onreadystatechange=function(){e.readyState&&"loaded"!=e.readyState&&"complete"!=e.readyState||(ur(e,c.OS||!1,k),h.callback(null))};e.onerror=function(){ur(e,!0,k);h.Gb(new vr(Lda,"Error while loading script "+
d))};f=c.attributes||{};yc(f,{type:"text/javascript",charset:"UTF-8"});$q(e,f);e.src=yi(a);Mda(b).appendChild(e);return h}function Mda(a){var b=(a||document).getElementsByTagName("HEAD");return b&&0!=b.length?b[0]:a.documentElement}function Jda(){if(this&&this.AA){var a=this.AA;a&&"SCRIPT"==a.tagName&&ur(a,!0,this.Na)}}function ur(a,b,c){null!=c&&ra.clearTimeout(c);a.onload=wa;a.onerror=wa;a.onreadystatechange=wa;b&&window.setTimeout(function(){Ik(a)},0)}var Lda=0,Kda=1;
function vr(a,b){var c="Jsloader error (code #"+a+")";b&&(c+=": "+b);Ma.call(this,c);this.code=a}w(vr,Ma);function wr(a){switch(a){case 0:return"No Error";case 1:return"Access denied to content document";case 2:return"File not found";case 3:return"Firefox silently errored";case 4:return"Application custom error";case 5:return"An exception occurred";case 6:return"Http response at 400 or 500 level";case 7:return"Request was aborted";case 8:return"Request timed out";case 9:return"The resource is not available offline";default:return"Unrecognized error code"}};function xr(){}xr.prototype.g=null;function yr(a){var b;(b=a.g)||(b={},zr(a)&&(b[0]=!0,b[1]=!0),b=a.g=b);return b};var Ar;function Br(){}w(Br,xr);function Cr(a){return(a=zr(a))?new ActiveXObject(a):new XMLHttpRequest}function zr(a){if(!a.j&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var b=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],c=0;c<b.length;c++){var d=b[c];try{return new ActiveXObject(d),a.j=d}catch(e){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return a.j}Ar=new Br;function Dr(a){C.call(this);this.headers=new Tg;this.ka=a||null;this.l=!1;this.aa=this.g=null;this.Ca=this.P="";this.u=0;this.I="";this.o=this.sa=this.O=this.oa=!1;this.A=0;this.K=null;this.G=Er;this.U=this.B=!1}w(Dr,C);var Er="";Dr.prototype.j=E.V("goog.net.XhrIo");var Nda=/^https?$/i,Oda=["POST","PUT"];
function Fr(a,b,c,d,e){if(a.g)throw Error("[goog.net.XhrIo] Object is active with another request="+a.P+"; newUri="+b);c=c?c.toUpperCase():"GET";a.P=b;a.I="";a.u=0;a.Ca=c;a.oa=!1;a.l=!0;a.g=a.ka?Cr(a.ka):Cr(Ar);a.aa=a.ka?yr(a.ka):yr(Ar);a.g.onreadystatechange=t(a.vx,a);try{E.ta(a.j,Gr(a,"Opening Xhr")),a.sa=!0,a.g.open(c,String(b),!0),a.sa=!1}catch(h){E.ta(a.j,Gr(a,"Error opening Xhr: "+h.message));Hr(a,h);return}b=d||"";var f=a.headers.clone();e&&Ng(e,function(a,b){f.set(b,a)});e=eb(f.Xb(),Pda);
d=ra.FormData&&b instanceof ra.FormData;!gb(Oda,c)||e||d||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");f.forEach(function(a,b){this.g.setRequestHeader(b,a)},a);a.G&&(a.g.responseType=a.G);"withCredentials"in a.g&&a.g.withCredentials!==a.B&&(a.g.withCredentials=a.B);try{Ir(a),0<a.A&&(a.U=Qda(a.g),E.ta(a.j,Gr(a,"Will abort after "+a.A+"ms if incomplete, xhr2 "+a.U)),a.U?(a.g.timeout=a.A,a.g.ontimeout=t(a.Na,a)):a.K=ke(a.Na,a.A,a)),E.ta(a.j,Gr(a,"Sending request")),a.O=!0,
a.g.send(b),a.O=!1}catch(h){E.ta(a.j,Gr(a,"Send error: "+h.message)),Hr(a,h)}}function Qda(a){return od&&Bd(9)&&ua(a.timeout)&&sa(a.ontimeout)}function Pda(a){return Gb("Content-Type",a)}g=Dr.prototype;g.Na=function(){"undefined"!=typeof qa&&this.g&&(this.I="Timed out after "+this.A+"ms, aborting",this.u=8,E.ta(this.j,Gr(this,this.I)),this.dispatchEvent("timeout"),this.abort(8))};function Hr(a,b){a.l=!1;a.g&&(a.o=!0,a.g.abort(),a.o=!1);a.I=b;a.u=5;Jr(a);Kr(a)}
function Jr(a){a.oa||(a.oa=!0,a.dispatchEvent("complete"),a.dispatchEvent("error"))}g.abort=function(a){this.g&&this.l&&(E.ta(this.j,Gr(this,"Aborting")),this.l=!1,this.o=!0,this.g.abort(),this.o=!1,this.u=a||7,this.dispatchEvent("complete"),this.dispatchEvent("abort"),Kr(this))};g.J=function(){this.g&&(this.l&&(this.l=!1,this.o=!0,this.g.abort(),this.o=!1),Kr(this,!0));Dr.C.J.call(this)};g.vx=function(){this.Xa()||(this.sa||this.O||this.o?Lr(this):this.xJ())};g.xJ=function(){Lr(this)};
function Lr(a){if(a.l&&"undefined"!=typeof qa)if(a.aa[1]&&4==Mr(a)&&2==a.Ue())E.ta(a.j,Gr(a,"Local request error detected and ignored"));else if(a.O&&4==Mr(a))ke(a.vx,0,a);else if(a.dispatchEvent("readystatechange"),4==Mr(a)){E.ta(a.j,Gr(a,"Request complete"));a.l=!1;try{var b=a.Ue();a:switch(b){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break a;default:c=!1}var d;if(!(d=c)){var e;if(e=0===b){var f=String(a.P).match(Wg)[1]||null;if(!f&&ra.self&&ra.self.location){var h=
ra.self.location.protocol;f=h.substr(0,h.length-1)}e=!Nda.test(f?f.toLowerCase():"")}d=e}if(d)a.dispatchEvent("complete"),a.dispatchEvent("success");else{a.u=6;try{var k=2<Mr(a)?a.g.statusText:""}catch(l){E.ta(a.j,"Can not get status: "+l.message),k=""}a.I=k+" ["+a.Ue()+"]";Jr(a)}}finally{Kr(a)}}}
function Kr(a,b){if(a.g){Ir(a);var c=a.g,d=a.aa[0]?wa:null;a.g=null;a.aa=null;b||a.dispatchEvent("ready");try{c.onreadystatechange=d}catch(e){E.error(a.j,"Problem encountered resetting onreadystatechange: "+e.message)}}}function Ir(a){a.g&&a.U&&(a.g.ontimeout=null);a.K&&(ra.clearTimeout(a.K),a.K=null)}g.isActive=function(){return!!this.g};function Mr(a){return a.g?a.g.readyState:0}g.Ue=function(){try{return 2<Mr(this)?this.g.status:-1}catch(a){return-1}};
function Rda(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.G){case Er:case "text":return a.g.responseText;case "arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}E.error(a.j,"Response type "+a.G+" is not supported on this browser");return null}catch(b){return E.ta(a.j,"Can not get response: "+b.message),null}}function Gr(a,b){return b+" ["+a.Ca+" "+a.P+" "+a.Ue()+"]"};var Nr=void 0,Or=NaN,Pr=NaN,Qr=document.createElement("canvas"),Sda=Qr.getContext("2d");function Rr(a){return Sr(a,"i32")}function Sr(a,b){for(var c=Strata._malloc(4*a.length),d=0;d<a.length;d++)Strata.setValue(c+4*d,a[d],b);return c}function Tda(){var a=E.V("Strata"),b=a.cj;a.cj=function(a){b.call(this,a);Tr(Oe(this))};Tr(Oe(a));return a}
function Tr(a){switch(a){case Be:Ur(Strata.LogLevel.OFF);break;case Ce:Ur(Strata.LogLevel.CRITICAL);break;case De:Ur(Strata.LogLevel.ERR);break;case Ee:Ur(Strata.LogLevel.WARN);break;case Fe:Ur(Strata.LogLevel.INFO);break;case Ge:Ur(Strata.LogLevel.INFO);break;case He:Ur(Strata.LogLevel.DEBUG);break;case Ie:case Je:case Ke:Ur(Strata.LogLevel.TRACE)}}
function Uda(){var a=Strata.ApplicationAPI.getLastLogMessage();if(a&&a.raw){var b=a.raw.trim();switch(a.level){case Strata.LogLevel.TRACE.value:Nr.log(Ie,b,void 0);break;case Strata.LogLevel.DEBUG.value:Nr.ta(b);break;case Strata.LogLevel.INFO.value:Nr.info(b);break;case Strata.LogLevel.WARN.value:Nr.hb(b);break;case Strata.LogLevel.ERR.value:Nr.log(De,b,void 0);break;case Strata.LogLevel.CRITICAL.value:Nr.log(Ce,b,void 0);break;default:Nr.log(Je,b,void 0)}}}
function Ur(a){Strata.ApplicationAPI.setLogLevel(a)}Ja("strata.api.setLogLevel",Ur);function Vda(){var a=Strata.ApplicationAPI.getLastRequestParams();if(a&&a.url){var b=new Ni(a.url);b.B="arraybuffer";Xi(b).then(function(b){var c=0;if(b&&b.byteLength){c=b.byteLength;var e=Strata._malloc(c);(new Uint8Array(Strata.HEAPU8.buffer,e,c)).set(new Uint8Array(b))}Strata.ApplicationAPI.onHttpLoad(a.listener,e,c)},function(){Strata.ApplicationAPI.onHttpError(a.listener)})}}
function Vr(a){var b=0,c=0,d=0;if(a){if(a instanceof HTMLCanvasElement){d=a;var e=d.getContext("2d");c=d.width;d=d.height}else d=Qr,e=Sda,d.width=c=a.width,d.height=d=a.height,e.drawImage(a,0,0,c,d);(e=(a=e.getImageData(0,0,c,d))?a.data:void 0)&&e.byteLength&&(a=e.byteLength,b=Strata._malloc(a),(new Uint8Array(Strata.HEAPU8.buffer,b,a)).set(new Uint8Array(e)))}return{data:b,height:d,width:c}};E.V("strata.asm");function Wda(){Nr||(Nr=Tda());isNaN(Or)&&(Or=Strata.addFunction(Uda),Strata.ApplicationAPI.setLogMessageListener(Or))}function Xda(){return void 0===window.StrataLoader?new Kc(function(a,b){var c=vi("v1541734487/vendor/strata/Strata-loader.js");c=zi(ui(c));var d=M.get("plugin.strata.loadTimeout",3E4);tr(c,{timeout:d}).then(function(){window.loadStrata?loadStrata({onRuntimeInitialized:Wda}).then(a,b):b("Strata loader is not available.")},b)}):Sc()};function Wr(a,b,c){Cf.call(this,a);this.map=b;this.frameState=void 0!==c?c:null}I(Wr,Cf);function Xr(a,b,c,d,e){Wr.call(this,a,b,e);this.originalEvent=c;this.pixel=Yr(b,c);this.coordinate=b.getCoordinateFromPixel(this.pixel);this.dragging=void 0!==d?d:!1}I(Xr,Wr);Xr.prototype.preventDefault=function(){Wr.prototype.preventDefault.call(this);this.originalEvent.preventDefault()};Xr.prototype.stopPropagation=function(){Wr.prototype.stopPropagation.call(this);this.originalEvent.stopPropagation()};function Zr(a){a=a||{};this.G=void 0!==a.color?a.color:null;this.u=a.lineCap;this.j=void 0!==a.lineDash?a.lineDash:null;this.o=a.lineDashOffset;this.A=a.lineJoin;this.B=a.miterLimit;this.g=a.width;this.l=void 0}Zr.prototype.clone=function(){var a=this.Ja();return new Zr({color:a&&a.slice?a.slice():a||void 0,lineCap:this.u,lineDash:this.j?this.j.slice():void 0,lineDashOffset:this.o,lineJoin:this.A,miterLimit:this.B,width:this.g})};Zr.prototype.Ja=function(){return this.G};
Zr.prototype.setLineDash=function(a){this.j=a;this.l=void 0};function $r(a){this.sa=a.opacity;this.I=a.rotateWithView;this.l=a.rotation;this.K=a.scale;this.O=a.snapToPixel}$r.prototype.Nb=function(){return this.sa};$r.prototype.j=function(){return this.K};$r.prototype.xd=function(a){this.sa=a};function as(a){this.P=this.G=this.o=null;this.uc=void 0!==a.fill?a.fill:null;this.Ea=[0,0];this.B=a.points;this.g=void 0!==a.radius?a.radius:a.radius1;this.u=a.radius2;this.A=void 0!==a.angle?a.angle:0;this.Fc=void 0!==a.stroke?a.stroke:null;this.aa=this.ka=this.pa=null;var b=this.U=a.atlasManager,c="",d="",e=0,f=null,h=0,k=0;if(this.Fc){var l=this.Fc.Ja();null===l&&(l=Nm);l=Xm(l);k=this.Fc.g;void 0===k&&(k=1);f=this.Fc.j;h=this.Fc.o;nn||(f=null,h=0);d=this.Fc.A;void 0===d&&(d="round");c=this.Fc.u;
void 0===c&&(c="round");e=this.Fc.B;void 0===e&&(e=10)}var m=2*(this.g+k)+1;c={strokeStyle:l,strokeWidth:k,size:m,lineCap:c,lineDash:f,lineDashOffset:h,lineJoin:d,miterLimit:e};if(void 0===b){var n=um(m,m);this.G=n.canvas;b=m=this.G.width;this.Gu(c,n,0,0);this.uc?this.P=this.G:(n=um(c.size,c.size),this.P=n.canvas,this.Fu(c,n,0,0))}else m=Math.round(m),(d=!this.uc)&&(n=this.Fu.bind(this,c)),this.Fc?(e=this.Fc,void 0===e.l&&(e.l="s",e.l=e.G?"string"===typeof e.G?e.l+e.G:e.l+J(e.G).toString():e.l+"-",
e.l+=","+(void 0!==e.u?e.u.toString():"-")+","+(e.j?e.j.toString():"-")+","+(void 0!==e.o?e.o:"-")+","+(void 0!==e.A?e.A:"-")+","+(void 0!==e.B?e.B.toString():"-")+","+(void 0!==e.g?e.g.toString():"-")),e=e.l):e="-",this.uc?(f=this.uc,void 0===f.j&&(f.j=f.g instanceof CanvasPattern||f.g instanceof CanvasGradient?J(f.g).toString():"f"+(f.g?pm(f.g):"-")),f=f.j):f="-",this.o&&e==this.o[1]&&f==this.o[2]&&this.g==this.o[3]&&this.u==this.o[4]&&this.A==this.o[5]&&this.B==this.o[6]||(this.o=["r"+e+f+(void 0!==
this.g?this.g.toString():"-")+(void 0!==this.u?this.u.toString():"-")+(void 0!==this.A?this.A.toString():"-")+(void 0!==this.B?this.B.toString():"-"),e,f,this.g,this.u,this.A,this.B]),n=b.add(this.o[0],m,m,this.Gu.bind(this,c),n),this.G=n.image,this.Ea=[n.offsetX,n.offsetY],b=n.image.width,this.P=d?n.hitImage:this.G;this.pa=[m/2,m/2];this.ka=[m,m];this.aa=[b,b];$r.call(this,{opacity:1,rotateWithView:void 0!==a.rotateWithView?a.rotateWithView:!1,rotation:void 0!==a.rotation?a.rotation:0,scale:1,snapToPixel:void 0!==
a.snapToPixel?a.snapToPixel:!0})}I(as,$r);g=as.prototype;g.clone=function(){var a=new as({fill:this.lb()?this.lb().clone():void 0,points:this.B,radius:this.g,radius2:this.u,angle:this.A,snapToPixel:this.O,stroke:this.kb()?this.kb().clone():void 0,rotation:this.l,rotateWithView:this.I,atlasManager:this.U});a.xd(this.Nb());var b=this.j();a.K=b;return a};g.Ri=function(){return this.pa};g.lb=function(){return this.uc};g.Pq=function(){return this.P};g.Pa=function(){return this.G};g.tm=function(){return this.aa};
g.Fe=function(){return 2};g.Lk=function(){return this.Ea};g.Ef=function(){return this.ka};g.kb=function(){return this.Fc};g.Vh=function(){};g.load=function(){};g.Bl=function(){};
g.Gu=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();var e=this.B;if(Infinity===e)b.arc(a.size/2,a.size/2,this.g,0,2*Math.PI,!0);else{var f=void 0!==this.u?this.u:this.g;f!==this.g&&(e*=2);for(c=0;c<=e;c++){d=2*c*Math.PI/e-Math.PI/2+this.A;var h=0===c%2?this.g:f;b.lineTo(a.size/2+h*Math.cos(d),a.size/2+h*Math.sin(d))}}this.uc&&(c=this.uc.Ja(),null===c&&(c=Lm),b.fillStyle=Xm(c),b.fill());this.Fc&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.lineDash&&(b.setLineDash(a.lineDash),
b.lineDashOffset=a.lineDashOffset),b.lineCap=a.lineCap,b.lineJoin=a.lineJoin,b.miterLimit=a.miterLimit,b.stroke());b.closePath()};
g.Fu=function(a,b,c,d){b.setTransform(1,0,0,1,0,0);b.translate(c,d);b.beginPath();c=this.B;if(Infinity===c)b.arc(a.size/2,a.size/2,this.g,0,2*Math.PI,!0);else{d=void 0!==this.u?this.u:this.g;d!==this.g&&(c*=2);var e;for(e=0;e<=c;e++){var f=2*e*Math.PI/c-Math.PI/2+this.A;var h=0===e%2?this.g:d;b.lineTo(a.size/2+h*Math.cos(f),a.size/2+h*Math.sin(f))}}b.fillStyle=Lm;b.fill();this.Fc&&(b.strokeStyle=a.strokeStyle,b.lineWidth=a.strokeWidth,a.lineDash&&(b.setLineDash(a.lineDash),b.lineDashOffset=a.lineDashOffset),
b.stroke());b.closePath()};function bs(a){a=a||{};as.call(this,{points:Infinity,fill:a.fill,radius:a.radius,snapToPixel:a.snapToPixel,stroke:a.stroke,atlasManager:a.atlasManager})}I(bs,as);bs.prototype.clone=function(){var a=new bs({fill:this.lb()?this.lb().clone():void 0,stroke:this.kb()?this.kb().clone():void 0,radius:this.g,snapToPixel:this.O,atlasManager:this.U});a.xd(this.Nb());var b=this.j();a.K=b;return a};function cs(a){a=a||{};this.g=void 0!==a.color?a.color:null;this.j=void 0}cs.prototype.clone=function(){var a=this.Ja();return new cs({color:a&&a.slice?a.slice():a||void 0})};cs.prototype.Ja=function(){return this.g};function ds(a){a=a||{};this.Kd=null;this.Re=es;void 0!==a.geometry&&this.tb(a.geometry);this.uc=void 0!==a.fill?a.fill:null;this.wa=void 0!==a.image?a.image:null;this.ge=void 0!==a.renderer?a.renderer:null;this.Fc=void 0!==a.stroke?a.stroke:null;this.Ob=void 0!==a.text?a.text:null;this.Bi=a.zIndex}g=ds.prototype;
g.clone=function(){var a=this.Z();a&&a.clone&&(a=a.clone());return new ds({geometry:a,fill:this.lb()?this.lb().clone():void 0,image:this.Pa()?this.Pa().clone():void 0,stroke:this.kb()?this.kb().clone():void 0,text:this.mb()?this.mb().clone():void 0,zIndex:this.Ac()})};g.Wi=function(){return this.ge};g.Z=function(){return this.Kd};g.lb=function(){return this.uc};g.CA=function(a){this.uc=a};g.Pa=function(){return this.wa};g.setImage=function(a){this.wa=a};g.kb=function(){return this.Fc};
g.GA=function(a){this.Fc=a};g.mb=function(){return this.Ob};g.wh=function(a){this.Ob=a};g.Ac=function(){return this.Bi};g.tb=function(a){"function"===typeof a?this.Re=a:"string"===typeof a?this.Re=function(b){return b.get(a)}:a?void 0!==a&&(this.Re=function(){return a}):this.Re=es;this.Kd=a};g.Of=function(a){this.Bi=a};function Yda(a){if("function"!==typeof a){if(Array.isArray(a))var b=a;else Mf(a instanceof ds,41),b=[a];a=function(){return b}}return a}var fs=null;
function Zda(){if(!fs){var a=new cs({color:"rgba(255,255,255,0.4)"}),b=new Zr({color:"#3399CC",width:1.25});fs=[new ds({image:new bs({fill:a,stroke:b,radius:5}),fill:a,stroke:b})]}return fs}function es(a){return a.Z()};function $da(a){return function(b){if(b)return[Nf(b[0],a[0],a[2]),Nf(b[1],a[1],a[3])]}}function aea(a){return a};function bea(a){return function(b,c,d){if(void 0!==b)return b=Vl(a,b,d),b=Nf(b+c,0,a.length-1),c=Math.floor(b),b!=c&&c<a.length-1?a[c]/Math.pow(a[c]/a[c+1],b-c):a[c]}}function gs(a,b,c){return function(d,e,f){if(void 0!==d)return d=Math.max(Math.floor(Math.log(b/d)/Math.log(a)+(-f/2+.5))+e,0),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)}};function hs(a){if(void 0!==a)return 0}function is(a,b){if(void 0!==a)return a+b}function cea(a){var b=2*Math.PI/a;return function(a,d){if(void 0!==a)return a=Math.floor((a+d)/b+.5)*b}}function dea(){var a=Of(5);return function(b,c){if(void 0!==b)return Math.abs(b+c)<=a?0:b+c}};function js(a){a=""+a;var b=a.indexOf(".");b=-1===b?a.length:b;return 2<b?a:Array(3-b).join("0")+a};function ks(a,b){a[0]+=b[0];a[1]+=b[1]}function ls(a,b){var c=Math.cos(b);b=Math.sin(b);var d=a[1]*c+a[0]*b;a[0]=a[0]*c-a[1]*b;a[1]=d};function ms(a){return 1-Math.pow(1-a,3)}function eea(a){return 3*a*a-2*a*a*a}function ns(a){return a};function ps(a){Hf.call(this);a=of({},a);this.g=[0,0];this.l=[];this.vo=this.vo.bind(this);this.wd=Il(a.projection);var b={};b.center=void 0!==a.center?a.center:null;var c=void 0!==a.minZoom?a.minZoom:0;var d=void 0!==a.maxZoom?a.maxZoom:28;var e=void 0!==a.zoomFactor?a.zoomFactor:2;if(void 0!==a.resolutions){var f=a.resolutions;var h=f[c];var k=void 0!==f[d]?f[d]:f[f.length-1];d=bea(f)}else{k=Il(a.projection);h=k.Y();f=(h?Math.max(bl(h),cl(h)):360*kl.degrees/ml(k))/256/Math.pow(2,0);var l=f/Math.pow(2,
28);h=a.maxResolution;void 0!==h?c=0:h=f/Math.pow(e,c);k=a.minResolution;void 0===k&&(k=void 0!==a.maxZoom?void 0!==a.maxResolution?h/Math.pow(e,d):f/Math.pow(e,d):l);d=c+Math.floor(Math.log(h/k)/Math.log(e));k=h/Math.pow(e,d-c);d=gs(e,h,d-c)}this.o=h;this.G=k;this.I=e;this.A=a.resolutions;this.u=c;(void 0!==a.enableRotation?a.enableRotation:1)?(e=a.constrainRotation,e=void 0===e||!0===e?dea():!1===e?is:"number"===typeof e?cea(e):is):e=hs;this.j={center:void 0!==a.extent?$da(a.extent):aea,resolution:d,
rotation:e};void 0!==a.resolution?b.resolution=a.resolution:void 0!==a.zoom&&(b.resolution=this.constrainResolution(this.o,a.zoom-this.u),this.A&&(b.resolution=Nf(Number(this.bb()||b.resolution),this.G,this.o)));b.rotation=void 0!==a.rotation?a.rotation:0;this.qc(b)}I(ps,Hf);g=ps.prototype;
g.animate=function(a){var b=arguments.length;if(1<b&&"function"===typeof arguments[b-1]){var c=arguments[b-1];--b}if(qs(this)){for(var d=Date.now(),e=rs(this).slice(),f=this.bb(),h=ss(this),k=[],l=0;l<b;++l){var m=arguments[l],n={start:d,complete:!1,anchor:m.anchor,duration:void 0!==m.duration?m.duration:1E3,easing:m.easing||eea};m.center&&(n.sourceCenter=e,n.targetCenter=m.center,e=n.targetCenter);void 0!==m.zoom?(n.sourceResolution=f,n.targetResolution=this.constrainResolution(this.o,m.zoom-this.u,
0),f=n.targetResolution):m.resolution&&(n.sourceResolution=f,n.targetResolution=m.resolution,f=n.targetResolution);void 0!==m.rotation&&(n.sourceRotation=h,n.targetRotation=h+(Pf(m.rotation-h+Math.PI,2*Math.PI)-Math.PI),h=n.targetRotation);n.callback=c;if(m=n.sourceCenter&&n.targetCenter){m=n.sourceCenter;for(var p=!0,r=m.length-1;0<=r;--r)if(m[r]!=n.targetCenter[r]){p=!1;break}m=!p}m||n.sourceResolution!==n.targetResolution||n.sourceRotation!==n.targetRotation?d+=n.duration:n.complete=!0;k.push(n)}this.l.push(k);
ts(this,0,1);this.vo()}else b=arguments[b-1],b.center&&Sq(this,b.center),void 0!==b.zoom&&Tq(this,this.constrainResolution(this.o,b.zoom-this.u,0)),void 0!==b.rotation&&us(this,b.rotation),c&&c(!0)};function vs(a){ts(a,0,-a.g[0]);for(var b=0,c=a.l.length;b<c;++b){var d=a.l[b];d[0].callback&&d[0].callback(!1)}a.l.length=0}
g.vo=function(){void 0!==this.B&&(cancelAnimationFrame(this.B),this.B=void 0);if(0<this.g[0]){for(var a=Date.now(),b=!1,c=this.l.length-1;0<=c;--c){for(var d=this.l[c],e=!0,f=0,h=d.length;f<h;++f){var k=d[f];if(!k.complete){b=a-k.start;b=0<k.duration?b/k.duration:1;1<=b?(k.complete=!0,b=1):e=!1;b=k.easing(b);if(k.sourceCenter){var l=k.sourceCenter[0],m=k.sourceCenter[1];this.set("center",[l+b*(k.targetCenter[0]-l),m+b*(k.targetCenter[1]-m)])}k.sourceResolution&&k.targetResolution&&(l=1===b?k.targetResolution:
k.sourceResolution+b*(k.targetResolution-k.sourceResolution),k.anchor&&this.set("center",ws(this,l,k.anchor)),this.set("resolution",l));void 0!==k.sourceRotation&&void 0!==k.targetRotation&&(b=1===b?Pf(k.targetRotation+Math.PI,2*Math.PI)-Math.PI:k.sourceRotation+b*(k.targetRotation-k.sourceRotation),k.anchor&&this.set("center",xs(this,b,k.anchor)),this.set("rotation",b));b=!0;if(!k.complete)break}}e&&(this.l[c]=null,ts(this,0,-1),(d=d[0].callback)&&d(!0))}this.l=this.l.filter(Boolean);b&&void 0===
this.B&&(this.B=requestAnimationFrame(this.vo))}};function xs(a,b,c){var d=rs(a);if(void 0!==d){var e=[d[0]-c[0],d[1]-c[1]];ls(e,b-ss(a));ks(e,c)}return e}function ws(a,b,c){var d,e=rs(a);a=a.bb();void 0!==e&&void 0!==a&&(d=[c[0]-b*(c[0]-e[0])/a,c[1]-b*(c[1]-e[1])/a]);return d}function ys(a){var b=[100,100];a='.ol-viewport[data-view="'+J(a)+'"]';if(a=document.querySelector(a))a=getComputedStyle(a),b[0]=parseInt(a.width,10),b[1]=parseInt(a.height,10);return b}
g.constrainResolution=function(a,b,c){return this.j.resolution(a,b||0,c||0)};g.constrainRotation=function(a,b){return this.j.rotation(a,b||0)};function rs(a){return a.get("center")}function zs(a,b){return void 0!==b?(b[0]=a.g[0],b[1]=a.g[1],b):a.g.slice()}function As(a,b){b=b||ys(a);var c=rs(a);Mf(c,1);var d=a.bb();Mf(void 0!==d,2);a=ss(a);Mf(void 0!==a,3);return el(c,d,a,b)}g.ne=function(){return this.o};g.oe=function(){return this.G};g.Ra=function(){return this.wd};g.bb=function(){return this.get("resolution")};
g.fg=function(){return this.A};function Bs(a,b,c){a=c||ys(a);return Math.max(bl(b)/a[0],cl(b)/a[1])}function ss(a){return a.get("rotation")}g.getState=function(){var a=rs(this),b=this.Ra(),c=this.bb(),d=ss(this);return{center:a.slice(),projection:void 0!==b?b:null,resolution:c,rotation:d,zoom:this.zm()}};g.zm=function(){var a=this.bb();if(void 0!==a){var b=this.u||0;var c;if(this.A){b=c=Vl(this.A,a,1);var d=this.A[c];c=c==this.A.length-1?2:d/this.A[c+1]}else d=this.o,c=this.I;b+=Math.log(d/a)/Math.log(c)}return b};
function Cs(a,b,c){c=c||{};var d=c.size;d||(d=ys(a));if(b instanceof zo)if("Circle"===b.T()){b=b.Y();var e=up(b);e.rotate(ss(a),dl(b))}else e=b;else Mf(Array.isArray(b),24),Mf(!al(b),25),e=up(b);var f=void 0!==c.padding?c.padding:[0,0,0,0],h=void 0!==c.constrainResolution?c.constrainResolution:!0,k=void 0!==c.nearest?c.nearest:!1,l;void 0!==c.minResolution?l=c.minResolution:void 0!==c.maxZoom?l=a.constrainResolution(a.o,c.maxZoom-a.u,0):l=0;var m=e.flatCoordinates,n=ss(a);b=Math.cos(-n);n=Math.sin(-n);
var p=Infinity,r=Infinity,u=-Infinity,v=-Infinity;e=e.stride;for(var y=0,B=m.length;y<B;y+=e){var G=m[y]*b-m[y+1]*n,D=m[y]*n+m[y+1]*b;p=Math.min(p,G);r=Math.min(r,D);u=Math.max(u,G);v=Math.max(v,D)}d=Bs(a,[p,r,u,v],[d[0]-f[1]-f[3],d[1]-f[0]-f[2]]);d=isNaN(d)?l:Math.max(d,l);h&&(l=a.constrainResolution(d,0,0),!k&&l<d&&(l=a.constrainResolution(l,-1,0)),d=l);n=-n;l=(p+u)/2+(f[1]-f[3])/2*d;f=(r+v)/2+(f[0]-f[2])/2*d;b=[l*b-f*n,f*b+l*n];f=c.callback?c.callback:Af;void 0!==c.duration?a.animate({resolution:d,
center:b,duration:c.duration,easing:c.easing},f):(Tq(a,d),Sq(a,b),setTimeout(f.bind(void 0,!0),0))}function qs(a){return!!rs(a)&&void 0!==a.bb()}g.rotate=function(a,b){void 0!==b&&(b=xs(this,a,b),Sq(this,b));us(this,a)};function Sq(a,b){a.set("center",b);0<a.g[0]&&vs(a)}function ts(a,b,c){a.g[b]+=c;a.ia()}function Tq(a,b){a.set("resolution",b);0<a.g[0]&&vs(a)}function us(a,b){a.set("rotation",b);0<a.g[0]&&vs(a)};var Ds={method:"geodesic",distance:1E5},Es=null;function Fs(){return{method:Ds.method,distance:Ds.distance}}function Ls(a){a&&(Ds.method=a.method||Ds.method,Ds.distance=a.distance||Ds.fT)}var Ms=null;function Ns(a,b){Ms={method:b||Ds.method,distance:Ds.distance};a&&(a=Cl(a||S),Os={ep:Ol(a,"EPSG:4326"),Dq:Ol("EPSG:4326",a),Pv:a.Rb})}
function Ps(a){if(1E3<Ds.distance){var b=a.get("interpolationMethod")||null;if("none"===b){var c=a.Z();c&&c.set("interpolationMethod","none",!0)}else{Qs();if(c=a.get("_originalGeometry"))c=c.clone();else{c=a.Z();if(!c)return;var d=c.T();if("Point"===d||"MultiPoint"===d)return;c&&a.set("_originalGeometry",c.clone())}c&&(Es=b,Rs(c),Es=null,(b=Ms)&&b.method!==Ds.method&&a.set("interpolationMethod",b.method),a.tb(c),a.ia())}}}
function Rs(a,b){b||Qs();if("none"!==(a.get("interpolationMethod")||null))switch(a.T()){case "GeometryCollection":b=dp(a);b.forEach(fea);cp(a,ap(b));break;case "MultiPolygon":b=a.getCoordinates();b.forEach(gea);a.ic(b);break;case "MultiLineString":b=a.getCoordinates();b.forEach(Ss);a.ic(b);break;case "Polygon":b=a.getCoordinates();b.forEach(Ts);a.ic(b);break;case "LineString":b=a.getCoordinates(),Ss(b),a.ic(b)}}function fea(a){Rs(a,!0)}var Us=null,Os=null;
function Qs(){Us&&S.Rb===Us.Pv||(Us={ep:Ol(S,"EPSG:4326"),Dq:Ol("EPSG:4326",S),Pv:S.Rb})}function gea(a){a.forEach(Ts)}function Ts(a){Ss(a);a.length&&(a[a.length-1]=a[0])}
function Ss(a){var b=Ms||Ds,c=Os||Us,d=Es||b.method;if("geodesic"===d){var e=osasm.geodesicInterpolate;d=osasm.geodesicInverse}else if("rhumb"===d)e=osasm.rhumbInterpolate,d=osasm.rhumbInverse;else return;for(var f=a.length-2;0<=f;f--){var h=a[f],k=a[f+1],l=c.ep(h,void 0,h.length),m=c.ep(k,void 0,k.length);l.length=2;m.length=2;var n=d(l,m).distance,p=1+Math.ceil(n/b.distance);if(2<p){var r=Math.min(h.length,k.length);if(2<r){var u=[];for(n=2;n<r;n++)u.push(k[n]-h[n])}r=l[0]+180;var v=l[0]-180,y=
osasm._malloc(2*p*Float64Array.BYTES_PER_ELEMENT);e(l,m,y,p);l=new Float64Array(osasm.HEAPU8.buffer,y,2*p);var B=1;n=2;for(var G=l.length-2;n<G;n+=2){var D=[l[n],l[n+1]];D[0]=Vo(D[0],v,r);D=c.Dq(D);u&&u.forEach(function(a,b){D[b+2]=h[b+2]+a*B/(p-1)});a.splice(f+B,0,D);B++}osasm._free(y);m[0]=Vo(m[0],v,r);D=c.Dq(m,void 0,m.length);u&&u.forEach(function(a,b){D[b+2]=k[b+2]});a.splice(f+B,1,D)}}};function Vs(a){this.g=this.ha=null;this.Pc=a}w(Vs,x);g=Vs.prototype;g.J=function(){this.setMap(null)};g.render=function(){null!==this.ha&&this.Z()&&this.ha.render()};g.X=function(){return this.ha};g.setMap=function(a){null!==this.g&&(sf(this.g),this.g=null,this.ha.render(),this.ha=null);this.ha=a;null!=this.ha&&(this.g=H(a,"postcompose",this.mF,this),this.render())};g.mF=function(a){var b=this.Z(),c=this.Ib();a.vectorContext.zb(c);this.cu(a.vectorContext);a.vectorContext.Jh(b)};g.Ib=function(){return this.Pc};
g.cu=function(){};function Ws(a){Vs.call(this,a);this.j=this.Kd=null}w(Ws,Vs);Ws.prototype.Z=function(){return this.Kd};function Xs(a,b,c,d,e){Xr.call(this,a,b,c.originalEvent,d,e);this.g=c}I(Xs,Xr);var Ys={cS:"singleclick",pP:"click",zP:"dblclick",hR:"pointerdrag",kR:"pointermove",gR:"pointerdown",nR:"pointerup",mR:"pointerover",lR:"pointerout",iR:"pointerenter",jR:"pointerleave",fR:"pointercancel"};function hea(a){a=a.originalEvent;return a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function Zs(a){a=a.originalEvent;return 0==a.button&&!(Rca&&ln&&a.ctrlKey)}function iea(a){return"pointermove"==a.type}function jea(a){return"singleclick"==a.type}function $s(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&!a.shiftKey}function kea(a){a=a.originalEvent;return!a.altKey&&(ln?a.metaKey:a.ctrlKey)&&!a.shiftKey}
function at(a){a=a.originalEvent;return!a.altKey&&!(a.metaKey||a.ctrlKey)&&a.shiftKey}function bt(a){a=a.originalEvent.target.tagName;return"INPUT"!==a&&"SELECT"!==a&&"TEXTAREA"!==a}function ct(a){Mf(a.g,56);return"mouse"==a.g.pointerType};function lea(a,b,c,d,e,f){if(!(od||pd||rd&&Bd("525")))return!0;if(sd&&e)return dt(a);if(e&&!d)return!1;ua(b)&&(b=et(b));e=17==b||18==b||sd&&91==b;if((!c||sd)&&e||sd&&16==b&&(d||f))return!1;if((rd||pd)&&d&&c)switch(a){case 220:case 219:case 221:case 192:case 186:case 189:case 187:case 188:case 190:case 191:case 192:case 222:return!1}if(od&&d&&b==a)return!1;switch(a){case 13:return!0;case 27:return!(rd||pd)}return dt(a)}
function dt(a){if(48<=a&&57>=a||96<=a&&106>=a||65<=a&&90>=a||(rd||pd)&&0==a)return!0;switch(a){case 32:case 43:case 63:case 64:case 107:case 109:case 110:case 111:case 186:case 59:case 189:case 187:case 61:case 188:case 190:case 191:case 192:case 222:case 219:case 220:case 221:return!0;default:return!1}}function et(a){if(qd)a=mea(a);else if(sd&&rd)switch(a){case 93:a=91}return a}
function mea(a){switch(a){case 61:return 187;case 59:return 186;case 173:return 189;case 224:return 91;case 0:return 224;default:return a}};function ft(a,b){C.call(this);a&&gt(this,a,b)}w(ft,C);g=ft.prototype;g.L=null;g.Km=null;g.tq=null;g.Lm=null;g.re=-1;g.bh=-1;g.Po=!1;
var ht={3:13,12:144,63232:38,63233:40,63234:37,63235:39,63236:112,63237:113,63238:114,63239:115,63240:116,63241:117,63242:118,63243:119,63244:120,63245:121,63246:122,63247:123,63248:44,63272:46,63273:36,63275:35,63276:33,63277:34,63289:144,63302:45},it={Up:38,Down:40,Left:37,Right:39,Enter:13,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,"U+007F":46,Home:36,End:35,PageUp:33,PageDown:34,Insert:45},nea=od||pd||rd&&Bd("525"),jt=sd&&qd;g=ft.prototype;
g.fF=function(a){if(rd||pd)if(17==this.re&&!a.ctrlKey||18==this.re&&!a.altKey||sd&&91==this.re&&!a.metaKey)this.bh=this.re=-1;-1==this.re&&(a.ctrlKey&&17!=a.keyCode?this.re=17:a.altKey&&18!=a.keyCode?this.re=18:a.metaKey&&91!=a.keyCode&&(this.re=91));nea&&!lea(a.keyCode,this.re,a.shiftKey,a.ctrlKey,a.altKey,a.metaKey)?this.handleEvent(a):(this.bh=et(a.keyCode),jt&&(this.Po=a.altKey))};g.gF=function(a){this.bh=this.re=-1;this.Po=a.altKey};
g.handleEvent=function(a){var b=a.l,c=b.altKey;if(od&&"keypress"==a.type){var d=this.bh;var e=13!=d&&27!=d?b.keyCode:0}else(rd||pd)&&"keypress"==a.type?(d=this.bh,e=0<=b.charCode&&63232>b.charCode&&dt(d)?b.charCode:0):nd&&!rd?(d=this.bh,e=dt(d)?b.keyCode:0):(d=b.keyCode||this.bh,e=b.charCode||0,jt&&(c=this.Po),sd&&63==e&&224==d&&(d=191));var f=d=et(d);d?63232<=d&&d in ht?f=ht[d]:25==d&&a.shiftKey&&(f=9):b.keyIdentifier&&b.keyIdentifier in it&&(f=it[b.keyIdentifier]);a=f==this.re;this.re=f;b=new kt(f,
e,a,b);b.altKey=c;this.dispatchEvent(b)};g.ub=function(){return this.L};function gt(a,b,c){a.Lm&&a.detach();a.L=b;a.Km=Yd(a.L,"keypress",a,c);a.tq=Yd(a.L,"keydown",a.fF,c,a);a.Lm=Yd(a.L,"keyup",a.gF,c,a)}g.detach=function(){this.Km&&(ee(this.Km),ee(this.tq),ee(this.Lm),this.Lm=this.tq=this.Km=null);this.L=null;this.bh=this.re=-1};g.J=function(){ft.C.J.call(this);this.detach()};function kt(a,b,c,d){Md.call(this,d);this.type="key";this.keyCode=a;this.repeat=c}w(kt,Md);function lt(a){Hf.call(this);this.ha=null;this.setActive(!0);this.handleEvent=a.handleEvent}I(lt,Hf);lt.prototype.X=function(){return this.ha};lt.prototype.setActive=function(a){this.set("active",a)};lt.prototype.setMap=function(a){this.ha=a};function mt(a,b,c){var d=rs(a);d&&(b=a.j.center([d[0]+b[0],d[1]+b[1]]),c?a.animate({duration:c,easing:ns,center:b}):Sq(a,b))}
function nt(a,b,c,d){if(void 0!==b){var e=ss(a),f=rs(a);void 0!==e&&f&&0<d?a.animate({rotation:b,anchor:c,duration:d,easing:ms}):a.rotate(b,c)}}function ot(a,b,c,d){var e=a.bb();b=a.constrainResolution(e,b,0);if(void 0!==b){var f=a.fg();b=Nf(b,a.oe()||f[f.length-1],a.ne()||f[0])}c&&void 0!==b&&b!==e&&(f=rs(a),c=ws(a,b,c),c=a.j.center(c),c=[(b*f[0]-e*c[0])/(b-e),(b*f[1]-e*c[1])/(b-e)]);pt(a,b,c,d)}
function pt(a,b,c,d){if(b){var e=a.bb(),f=rs(a);void 0!==e&&f&&b!==e&&d?a.animate({resolution:b,anchor:c,duration:d,easing:ms}):(c&&(c=ws(a,b,c),Sq(a,c)),Tq(a,b))}};function qt(a){a=a?a:{};lt.call(this,{handleEvent:a.handleEvent?a.handleEvent:rt});this.ka=a.handleDownEvent?a.handleDownEvent:xo;this.oa=a.handleDragEvent?a.handleDragEvent:Af;this.sa=a.handleMoveEvent?a.handleMoveEvent:Af;this.Ca=a.handleUpEvent?a.handleUpEvent:xo;this.K=!1;this.pa={};this.j=[]}I(qt,lt);function st(a){for(var b=a.length,c=0,d=0,e=0;e<b;e++)c+=a[e].clientX,d+=a[e].clientY;return[c/b,d/b]}
function rt(a){if(!(a instanceof Xs))return!0;var b=!1,c=a.type;if("pointerdown"===c||"pointerdrag"===c||"pointerup"===c){c=a.g;var d=c.pointerId.toString();"pointerup"==a.type?delete this.pa[d]:"pointerdown"==a.type?this.pa[d]=c:d in this.pa&&(this.pa[d]=c);this.j=qf(this.pa)}this.K?"pointerdrag"==a.type?this.oa(a):"pointerup"==a.type&&(this.K=this.Ca(a)&&0<this.j.length):"pointerdown"==a.type?(this.K=a=this.ka(a),b=this.U(a)):"pointermove"==a.type&&this.sa(a);return!b}qt.prototype.U=function(a){return a};function tt(a,b,c,d,e){A.call(this,a);this.coordinate=b||null;this.geometry=c||null;this.pixel=d||null;this.l=e||null}w(tt,A);function ut(a){qt.call(this,a);this.l=!1;this.condition=void 0!==a&&void 0!==a.condition?a.condition:at;this.type="";this.Pc=void 0!==a&&void 0!==a.style?a.style:new ds({stroke:new Zr({color:[0,255,255,1],lineCap:"square",width:2})});this.P=null;this.setActive(!1);this.Ia=new Fh(this.jD,375,this)}w(ut,qt);var vt=E.V("os.ui.ol.interaction.AbstractDraw");g=ut.prototype;g.T=function(){return this.type};g.Mv=function(a){return this.type==a};g.Ib=function(){return this.Pc};g.zb=function(a){this.Pc=a};
g.Yb=function(){return null};g.kc=function(){return this.condition===wo||this.l};g.Za=function(a){a?this.condition=wo:(this.condition=at,this.l&&this.cancel());E.ta(vt,this.T()+" interaction "+(a?"enabled":"disabled"))};g.setActive=function(a){var b=this.get("active")&&!a;ut.C.setActive.call(this,a);b&&this.l&&this.cancel();E.ta(vt,this.T()+" interaction "+(a?"activated":"deactivated"))};g.handleEvent=function(a){var b=!1;"key"==a.type&&(b=27==(new Md(a.originalEvent)).keyCode)&&this.cancel();return!b};
g.kd=function(a){var b=this.X();E.ta(vt,this.T()+" interaction begin");b&&!this.l&&(this.l=!0,this.P=new ft(document,!0),this.P.H("key",this.Zy,!0,this),ts(T(b),1,1),this.dispatchEvent(new tt("drawstart",a.coordinate)))};g.update=function(){};g.end=function(a){if(this.l){E.info(vt,this.T()+" interaction complete: "+this.Jp());this.l=!1;var b=this.Z(),c=this.Yb();this.Ed();this.dispatchEvent(new tt("drawend",a.coordinate,b,a.pixel,c||void 0))}};
g.cancel=function(){this.l&&(E.ta(vt,this.T()+" interaction cancel"),this.l=!1,this.dispatchEvent(new tt("drawcancel")),this.Ed())};g.Ed=function(){E.ta(vt,this.T()+" interaction cleanup");this.Ia.start();this.P.M("key",this.Zy,!0,this);this.P.dispose();this.P=null};g.jD=function(){var a=this.X();a&&ts(T(a),1,-1)};g.Zy=function(a){27==a.keyCode&&this.cancel()};g.dispatchEvent=function(a){ut.C.dispatchEvent.call(this,a);a instanceof Cf&&a.originalEvent&&a.originalEvent.defaultPrevented||N&&N.dispatchEvent(a)};function wt(a){a=a||{};a.handleDownEvent=this.handleDownEvent;a.handleUpEvent=this.handleUpEvent;a.handleDragEvent=this.handleDragEvent;ut.call(this,a);this.g=null}w(wt,ut);g=wt.prototype;g.handleDownEvent=function(a){return ct(a)&&0===a.g.button&&this.condition(a)?(this.kd(a),this.update(a),!0):!1};g.handleDragEvent=function(a){ct(a)&&this.update(a)};
g.handleUpEvent=function(a){if(!ct(a))return!0;this.update(a);var b=0,c=0;if(this.g){c=this.X().getPixelFromCoordinate(this.g);var d=a.pixel;b=d[0]-c[0];c=d[1]-c[1]}64<=b*b+c*c?this.end(a):this.cancel();return!0};g.kd=function(a){wt.C.kd.call(this,a);this.g=a.coordinate};g.Ed=function(){wt.C.Ed.call(this);this.g=null};function xt(a){wt.call(this,a);this.type="box";this.B=null;this.A=new Ws(this.Ib());this.extent=null}w(xt,wt);g=xt.prototype;g.Z=function(){var a=this.A.j;a&&(a.toLonLat(),kq(a),Ap(a));return a};g.Yb=function(){return{interpolationMethod:"rhumb"}};g.kd=function(a){xt.C.kd.call(this,a);this.A.setMap(a.map)};
g.update=function(a){this.B=a.coordinate||this.B;if(this.g&&this.B){this.extent||(this.extent=[]);a=Ml(this.g,T(this.X()).Ra());var b=Ml(this.B,T(this.X()).Ra());a&&b&&(this.extent[0]=Vo(Math.min(a[0],b[0]),a[0]-180,a[0]+180),this.extent[1]=Math.min(a[1],b[1]),this.extent[2]=Vo(Math.max(a[0],b[0]),a[0]-180,a[0]+180),this.extent[3]=Math.max(a[1],b[1]),this.es(this.g,this.B))}};
g.es=function(a,b){a&&b&&this.extent&&(a=this.A,a.j=up(this.extent),Ap(a.j),a.Kd=a.j.clone(),Ns(void 0,"rhumb"),Rs(a.Kd),Os=Ms=null,a.render())};g.Ed=function(){xt.C.Ed.call(this);this.B=null;this.A&&this.A.setMap(null)};g.Jp=function(){return this.extent?this.extent.toString():"none"};function yt(a){a=a||{};var b=a.color||"rgba(0,255,255,1)";a.style=a.style||new ds({stroke:new Zr({color:b,lineCap:"square",width:2})});xt.call(this,a);this.color=om(b)||[0,255,255,1]}w(yt,xt);F(yt,"os.I3DSupport");g=yt.prototype;g.es=function(a,b){yt.C.es.call(this,a,b);this.Er(a,b)};g.Ed=function(){yt.C.Ed.call(this);zt(this.X(),!0);this.Dr()};g.Dr=wa;g.Er=wa;g.vc=function(){return!0};g.kd=function(a){yt.C.kd.call(this,a);zt(this.X(),!1)};var At={},oea=100,Bt=0;function Ct(a){if(a){var b=a._strataGeomId;null==b&&(b=oea++,a._strataGeomId=b);return b}}function Dt(a){if(a){var b=a._strataStyleId;null==b&&(a._strataStyleId=b=Bt++);return b}return Bt++}function pea(a){switch(a.T()){case "Point":return a.flatCoordinates.slice();case "MultiPoint":return a.flatCoordinates.slice(0,2);default:return dl(a.Y())}}
function Et(a){a=(a||S).Rb;if("EPSG:4326"===a)var b=Strata.TileProjectionType.EPSG_4326;else"EPSG:3857"===a&&(b=Strata.TileProjectionType.EPSG_3857);return b};yt.prototype.o=void 0;function qea(){void 0!==this.o&&(Ft([this.o]),this.o=void 0)}
function rea(a,b){if(L.s().Qa()&&(a=Ml(a,T(this.X()).Ra()),b=Ml(b,T(this.X()).Ra()),a&&b))if(a=180<Math.abs(Vo(this.extent[0])-Vo(this.extent[2])),a=[this.extent[a?2:0],this.extent[1],0,this.extent[a?0:2],this.extent[3],0],void 0===this.o){this.o=Math.round(1E16*Math.random());b=this.Ib();if(b instanceof ds){Gt(b);var c={};c[Dt(b)]=[this.o];Ht(c)}It(a,[this.o])}else if(b=[this.o],a.length)if(0===a.length%6&&b.length===a.length/6)Jt(a,b,Strata.GeometryAPI.getGeometryBoundingBox());else throw Error("Box coordinates must be a factor of 6 and have associated ids.");
};var Kt={hQ:"km",OQ:"m",WQ:"nmi",QQ:"mi",NP:"ft"},Lt={Kilometers:"km",Meters:"m","Nautical Miles":"nmi",Miles:"mi",Feet:"ft"},Mt=3.28084/5280,Nt=3.28084/6076;function Ot(a,b,c){c=c||"m";if(c==b)return a;if("m"!=c)switch(c){case "km":a/=.001;break;case "nmi":a/=Nt;break;case "mi":a/=Mt;break;case "ft":a/=3.28084;break;default:return NaN}c=1;switch(b){case "m":break;case "km":c=.001;break;case "mi":c=Mt;break;case "ft":c=3.28084;break;case "nmi":c=Nt;break;default:return NaN}return a*c};function Pt(a,b,c,d,e){Cf.call(this,a);this.vectorContext=b;this.frameState=c;this.context=d;this.glContext=e}I(Pt,Cf);function Qt(a){a=a||{};this.B=a.font;this.A=a.rotation;this.u=a.rotateWithView;this.j=a.scale;this.Ob=a.text;this.g=a.textAlign;this.l=a.textBaseline;this.uc=void 0!==a.fill?a.fill:new cs({color:"#333"});this.G=void 0!==a.maxAngle?a.maxAngle:Math.PI/4;this.K=void 0!==a.placement?a.placement:"point";var b=void 0===a.overflow?a.exceedLength:a.overflow;this.I=void 0!==b?b:!1;this.Fc=void 0!==a.stroke?a.stroke:null;this.ng=void 0!==a.offsetX?a.offsetX:0;this.o=void 0!==a.offsetY?a.offsetY:0;this.O=a.backgroundFill?
a.backgroundFill:null;this.P=a.backgroundStroke?a.backgroundStroke:null;this.U=void 0===a.padding?null:a.padding}g=Qt.prototype;g.clone=function(){return new Qt({font:this.Ae(),placement:this.K,maxAngle:this.G,overflow:this.I,rotation:this.A,rotateWithView:this.u,scale:this.j,text:this.mb(),textAlign:this.g,textBaseline:this.l,fill:this.lb()?this.lb().clone():void 0,stroke:this.kb()?this.kb().clone():void 0,offsetX:this.ng,offsetY:this.o})};g.Ae=function(){return this.B};g.lb=function(){return this.uc};
g.kb=function(){return this.Fc};g.mb=function(){return this.Ob};g.CA=function(a){this.uc=a};g.GA=function(a){this.Fc=a};g.wh=function(a){this.Ob=a};function Rt(){this.g=[];this.j={};this.l=[];this.Xg();for(var a=0;a<this.g.length;a++){this.j[this.g[a].getName()]=this.g[a];var b=this.g[a];this.j[b.j?b.j:b.l]=this.g[a]}sea(this)}g=Rt.prototype;g.S=function(){return null};g.hg=function(){return null};g.wf=function(){return null};g.ye=function(){return null};g.Zf=function(){return-1};g.ba=function(a){return a.getName().concat("")};g.format=function(a,b,c){c=c?c:-1;return(0<=c?a.toFixed(c):a.toString())+" "+this.ba(b)};g.nM=function(a){return a.o};
g.Xg=function(){};function sea(a){a.l=a.g.filter(a.nM);wb(a.l,function(a,c){return a.g<c.g?1:-1})};function St(a,b,c,d,e){this.l=a;this.g=b;this.o=c?c:!1;this.j=d?d:null;this.u=e?e:1}St.prototype.getName=function(){return this.l};function Tt(){Rt.call(this)}w(Tt,Rt);g=Tt.prototype;g.S=function(){return"Imperial"};g.hg=function(){return"distance"};g.wf=function(){return"imperial"};g.ye=function(){return this.j.mi};g.Zf=function(){return 1/1609.344};g.Xg=function(){this.g.push(new St("in",1/63360,!1,"inches"));this.g.push(new St("ft",1/5280,!0,"feet"));this.g.push(new St("yd",1/1760,!0,"yards"));this.g.push(new St("mi",1,!0,"miles",.1))};function Ut(){Rt.call(this)}w(Ut,Rt);g=Ut.prototype;g.S=function(){return"Feet Only"};g.hg=function(){return"distance"};g.wf=function(){return"feet"};g.ye=function(){return this.j.ft};g.Zf=function(){return 3.28084};g.Xg=function(){this.g.push(new St("ft",1,!0,"feet"))};function Vt(){Rt.call(this)}w(Vt,Rt);g=Vt.prototype;g.S=function(){return"Metric"};g.hg=function(){return"distance"};g.wf=function(){return"metric"};g.ye=function(){return this.j.m};g.Zf=function(){return 1};
g.Xg=function(){this.g.push(new St("nm",1E-9,!1,"nanometers"));this.g.push(new St("um",1E-6,!1,"micrometers"));this.g.push(new St("mm",.001,!1,"millimeters"));this.g.push(new St("cm",.01,!0,"centimeters"));this.g.push(new St("dm",.1,!1,"decimeters"));this.g.push(new St("m",1,!0,"meters"));this.g.push(new St("dam",10,!1,"Decameters"));this.g.push(new St("hm",100,!1,"Hectometers"));this.g.push(new St("km",1E3,!0,"Kilometers"));this.g.push(new St("Mm",1E6,!1,"Megameters"));this.g.push(new St("Gm",1E9,
!1,"Gigameters"));this.g.push(new St("Tm",1E12,!1,"Terameters"))};function Wt(){Rt.call(this)}w(Wt,Rt);g=Wt.prototype;g.S=function(){return"Miles Only"};g.hg=function(){return"distance"};g.wf=function(){return"mile"};g.ye=function(){return this.j.mi};g.Zf=function(){return 1/1609.344};g.Xg=function(){this.g.push(new St("mi",1,!0,"miles",.1))};function Xt(){Rt.call(this)}w(Xt,Rt);g=Xt.prototype;g.S=function(){return"Nautical Miles Only"};g.hg=function(){return"distance"};g.wf=function(){return"nauticalmile"};g.ye=function(){return this.j.nmi};g.Zf=function(){return 1/1852};g.Xg=function(){this.g.push(new St("nmi",1,!0,"nautical miles"))};function Yt(){Rt.call(this)}w(Yt,Rt);g=Yt.prototype;g.S=function(){return"Nautical"};g.hg=function(){return"distance"};g.wf=function(){return"nautical"};g.ye=function(){return this.j.nmi};g.Zf=function(){return 1/1852};g.Xg=function(){this.g.push(new St("ft",1/6076,!0,"feet"));this.g.push(new St("nmi",1,!0,"nautical miles"))};function Zt(){Rt.call(this)}w(Zt,Rt);g=Zt.prototype;g.S=function(){return"Yards Only"};g.hg=function(){return"distance"};g.wf=function(){return"yard"};g.ye=function(){return this.j.yd};g.Zf=function(){return 1.09361};g.Xg=function(){this.g.push(new St("yd",1,!0,"yards"))};function tea(){this.g={};var a={};a.distance=new Tt;this.g.imperial=a;a={};a.distance=new Vt;this.g.metric=a;a={};a.distance=new Yt;this.g.nautical=a;a={};a.distance=new Xt;this.g.nauticalmile=a;a={};a.distance=new Wt;this.g.mile=a;a={};a.distance=new Zt;this.g.yard=a;a={};a.distance=new Ut;this.g.feet=a}function $t(a,b,c){return(a=a.g[b])?a[c]:null};function au(){C.call(this);this.j=new tea;this.g=M.get("os.map.units","metric");this.l=this.j.g;var a=this.j;this.o=Object.keys(a.g?a.g:{});wb(this.o);M.H("os.map.units",this.u,!1,this)}w(au,C);xa(au);var uea=E.V("os.unit.UnitManager");function bu(a,b){var c=a.g;a.g=b;M.set("os.map.units",b);a.dispatchEvent(new K("unit:change",b,c))}
function cu(a,b,c,d,e,f){var h=$t(a.j,"metric",b);d=h.j[d];d!==h.ye()&&(c*=d.g);d=$t(a.j,"metric",b);d!==h&&(c/=h.Zf());a=$t(a.j,f,b);a!==d&&(c*=a.Zf());e=a.j[e];e!==a.ye()&&(c/=e.g);return c}
function du(a,b,c){var d=$t(a.j,"metric","distance").ye().getName();b=cu(a,"distance",b,"m",d,"metric");var e=$t(a.j,a.g,"distance");var f=au.s(),h=$t(f.j,"metric",e.hg());if(0==b)var k=h.ye();else{var l=e.l.length;if(h){h=h.ye().getName();for(var m=0;m<l;m++)if(Math.abs(cu(f,e.hg(),b,h,e.l[m].getName(),e.wf()))>=e.l[m].u){k=e.l[m];break}}k=null!=k?k:0<l?e.l[l-1]:null}return e.format(cu(a,"distance",b,d,k.getName(),a.g),k,c?c:-1)}
au.prototype.u=function(a){"string"===typeof a.l?bu(this,a.l):E.hb(uea,"Unrecognized units change value: "+a.l)};function eu(a,b){Vs.call(this,a);this.o=this.A=null;this.j=-1;this.l=this.Kd=null;this.u=b||null}w(eu,Vs);var vea=new il(6378137);eu.prototype.cu=function(a){var b=au.s();this.u&&a.Vd(new Qt({fill:new cs({color:[0,255,255,1]}),text:du(b,this.j,3)}))};eu.prototype.Z=function(){return this.Kd};
function fu(a,b,c){a.A=b;a.o=c;c=T(a.X()).Ra();b=Ml(a.A,c);c=Ml(a.o,c);a.j=osasm.geodesicInverse(b,c).distance;var d=a.j;c=[];var e;for(e=0;32>e;++e)Wl(c,vea.offset(b,d,2*Math.PI*e/32));c.push(c[0],c[1]);b=new qp(null);rp(b,"XY",c,[c.length]);Ap(b);a.l=b;a.Kd=a.l.clone();Rs(a.Kd);a.render()}eu.prototype.cd=function(a){this.u=a};function gu(){wt.call(this);this.type="circle";this.o=new eu(this.Ib(),"km");this.center=null;this.distance=-1}w(gu,wt);g=gu.prototype;g.Z=function(){var a=this.o.l;a&&(a.toLonLat(),kq(a),Ap(a));return a};g.Yb=function(){var a={};a.interpolationMethod=Ds.method;return a};g.kd=function(a){gu.C.kd.call(this,a);this.o.setMap(a.map)};
g.update=function(a){a=a.coordinate;if(this.g&&(this.center=this.g,a)){var b=Ml(this.g,T(this.X()).Ra()),c=Ml(a,T(this.X()).Ra());this.distance=osasm.geodesicInverse(b,c).distance;this.az(this.g,a)}};g.az=function(a,b){a&&b&&(fu(this.o,a,b),this.o.cd("km"))};g.Ed=function(){gu.C.Ed.call(this);this.center=null;this.distance=-1;this.o&&this.o.setMap(null)};g.Jp=function(){var a="";this.g&&(a+=this.g[0]+"E ",a+=this.g[1]+"N ");this.distance&&(a+=this.distance+"m");return a};function hu(){gu.call(this);this.o.cd(au.s().g)}w(hu,gu);F(hu,"os.I3DSupport");g=hu.prototype;g.az=function(a,b){a&&b&&(fu(this.o,a,b),this.o.cd(au.s().g));this.Gr(a,b)};g.Ed=function(){hu.C.Ed.call(this);zt(this.X(),!0);this.Fr()};g.Fr=wa;g.Gr=wa;g.vc=function(){return!0};g.kd=function(a){hu.C.kd.call(this,a);zt(this.X(),!1)};function iu(a){a=a?a:{};var b=of({},a);delete b.style;delete b.renderBuffer;delete b.updateWhileAnimating;delete b.updateWhileInteracting;Sf.call(this,b);this.jp=void 0!==a.declutter?a.declutter:!1;this.He=void 0!==a.renderBuffer?a.renderBuffer:100;this.Pc=null;this.Qj=void 0;this.zb(a.style);this.vB=void 0!==a.updateWhileAnimating?a.updateWhileAnimating:!1;this.wB=void 0!==a.updateWhileInteracting?a.updateWhileInteracting:!1;this.ll=a.renderMode||"vector";this.type="VECTOR"}I(iu,Sf);
iu.prototype.Ib=function(){return this.Pc};iu.prototype.Nd=function(){return this.Qj};iu.prototype.zb=function(a){this.Pc=void 0!==a?a:Zda;this.Qj=null===a?void 0:Yda(this.Pc);this.ia()};function ju(a,b){Hf.call(this);this.j=!!(b||{}).unique;this.g=a?a:[];if(this.j)for(a=0,b=this.g.length;a<b;++a)ku(this,this.g[a],a);lu(this)}I(ju,Hf);g=ju.prototype;g.clear=function(){for(;0<this.getLength();)this.pop()};g.extend=function(a){var b;var c=0;for(b=a.length;c<b;++c)this.push(a[c]);return this};g.forEach=function(a,b){a=b?a.bind(b):a;b=this.g;for(var c=0,d=b.length;c<d;++c)a(b[c],c,b)};g.item=function(a){return this.g[a]};g.getLength=function(){return this.get(mu)};
function nu(a,b,c){a.j&&ku(a,c);a.g.splice(b,0,c);lu(a);a.dispatchEvent(new ou("add",c))}g.pop=function(){return pu(this,this.getLength()-1)};g.push=function(a){this.j&&ku(this,a);var b=this.getLength();nu(this,b,a);return this.getLength()};g.remove=function(a){var b=this.g,c;var d=0;for(c=b.length;d<c;++d)if(b[d]===a)return pu(this,d)};function pu(a,b){var c=a.g[b];a.g.splice(b,1);lu(a);a.dispatchEvent(new ou("remove",c));return c}function lu(a){a.set(mu,a.g.length)}
function ku(a,b,c){for(var d=0,e=a.g.length;d<e;++d)if(a.g[d]===b&&d!==c)throw new Lf(58);}var mu="length";function ou(a,b){Cf.call(this,a);this.element=b}I(ou,Cf);var qu=document.implementation.createDocument("","",null);function ru(a,b){return qu.createElementNS(a,b)}function su(a,b){return tu(a,b,[]).join("")}function tu(a,b,c){if(a.nodeType==Node.CDATA_SECTION_NODE||a.nodeType==Node.TEXT_NODE)b?c.push(String(a.nodeValue).replace(/(\r\n|\r|\n)/g,"")):c.push(a.nodeValue);else for(a=a.firstChild;a;a=a.nextSibling)tu(a,b,c);return c}function uu(a){return a instanceof Document}function vu(a){return a instanceof Node}
function wu(a){return(new DOMParser).parseFromString(a,"application/xml")}function xu(a,b){return function(c,d){c=a.call(b,c,d);void 0!==c&&Wl(d[d.length-1],c)}}function yu(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&d[d.length-1].push(c)}}function zu(a,b){return function(c,d){c=a.call(void 0!==b?b:this,c,d);void 0!==c&&(d[d.length-1]=c)}}
function Au(a){return function(b,c){var d=a.call(this,b,c);if(void 0!==d){c=c[c.length-1];b=b.localName;var e;b in c?e=c[b]:e=c[b]=[];e.push(d)}}}function V(a,b){return function(c,d){var e=a.call(this,c,d);void 0!==e&&(d[d.length-1][void 0!==b?b:c.localName]=e)}}function W(a,b){return function(c,d,e){a.call(void 0!==b?b:this,c,d,e);e[e.length-1].node.appendChild(c)}}
function Bu(a){var b,c;return function(d,e,f){if(void 0===b){b={};var h={};h[d.localName]=a;b[d.namespaceURI]=h;c=Cu(d.localName)}Du(b,c,e,f)}}function Cu(a,b){return function(c,d,e){c=d[d.length-1].node;d=a;void 0===d&&(d=e);e=b;void 0===b&&(e=c.namespaceURI);return ru(e,d)}}var Eu=Cu();function Fu(a,b){for(var c=b.length,d=Array(c),e=0;e<c;++e)d[e]=a[b[e]];return d}function X(a,b,c){c=void 0!==c?c:{};var d;var e=0;for(d=a.length;e<d;++e)c[a[e]]=b;return c}
function Gu(a,b,c,d){for(b=b.firstElementChild;b;b=b.nextElementSibling){var e=a[b.namespaceURI];void 0!==e&&(e=e[b.localName],void 0!==e&&e.call(d,b,c))}}function Hu(a,b,c,d,e){d.push(a);Gu(b,c,d,e);return d.pop()}function Du(a,b,c,d,e,f){for(var h=(void 0!==e?e:c).length,k,l,m=0;m<h;++m)k=c[m],void 0!==k&&(l=b.call(f,k,d,void 0!==e?e[m]:void 0),void 0!==l&&a[l.namespaceURI][l.localName].call(f,l,k,d))}function Iu(a,b,c,d,e,f,h){e.push(a);Du(b,c,d,e,f,h);e.pop()};function wea(a,b,c){return function(d,e,f){var h=new XMLHttpRequest;h.open("GET","function"===typeof a?a(d,e,f):a,!0);"arraybuffer"==b.T()&&(h.responseType="arraybuffer");h.onload=function(){if(!h.status||200<=h.status&&300>h.status){var a=b.T();if("json"==a||"text"==a)var d=h.responseText;else"xml"==a?(d=h.responseXML)||(d=wu(h.responseText)):"arraybuffer"==a&&(d=h.response);d&&c.call(this,b.vg(d,{featureProjection:f}),b.On(d),null)}}.bind(this);h.onerror=function(){}.bind(this);h.send()}}
function xea(a,b){return wea(a,b,function(a){this.zc(a)})};function yea(){return[[-Infinity,-Infinity,Infinity,Infinity]]};function Ju(a){this.jq=a.html};function Ku(a){Hf.call(this);this.wd=Cl(a.projection);this.Vj=null;this.Ol=Lu(this,a.attributions);this.vG=a.logo;this.xa=void 0!==a.state?a.state:"ready";this.Go=void 0!==a.wrapX?a.wrapX:!1}I(Ku,Hf);
function Lu(a,b){if(!b)return null;if(b instanceof Ju)return a.Vj=[b],function(){return[b.jq]};if(Array.isArray(b)){if(b[0]instanceof Ju){a.Vj=b;var c=b.map(function(a){return a.jq});return function(){return c}}a.Vj=b.map(function(a){return new Ju({html:a})});return function(){return b}}if("function"===typeof b)return b;a.Vj=[new Ju({html:b})];return function(){return[b]}}g=Ku.prototype;g.tc=Af;g.Ra=function(){return this.wd};g.getState=function(){return this.xa};g.refresh=function(){this.ia()};
g.Ga=function(a){this.xa=a;this.ia()};var Mu={ji:function(){}};
(function(a){function b(a,c){if(!(this instanceof b))return new b(a,c);this.Lo=Math.max(4,a||9);this.Rt=Math.max(2,Math.ceil(.4*this.Lo));c&&this.DC(c);this.clear()}function c(a,b){d(a,0,a.children.length,b,a)}function d(a,b,c,d,f){f||(f=p(null));f.minX=Infinity;f.minY=Infinity;f.maxX=-Infinity;f.maxY=-Infinity;for(var h;b<c;b++)h=a.children[b],e(f,a.td?d(h):h);return f}function e(a,b){a.minX=Math.min(a.minX,b.minX);a.minY=Math.min(a.minY,b.minY);a.maxX=Math.max(a.maxX,b.maxX);a.maxY=Math.max(a.maxY,
b.maxY);return a}function f(a,b){return a.minX-b.minX}function h(a,b){return a.minY-b.minY}function k(a){return(a.maxX-a.minX)*(a.maxY-a.minY)}function l(a){return a.maxX-a.minX+(a.maxY-a.minY)}function m(a,b){return a.minX<=b.minX&&a.minY<=b.minY&&b.maxX<=a.maxX&&b.maxY<=a.maxY}function n(a,b){return b.minX<=a.maxX&&b.minY<=a.maxY&&b.maxX>=a.minX&&b.maxY>=a.minY}function p(a){return{children:a,height:1,td:!0,minX:Infinity,minY:Infinity,maxX:-Infinity,maxY:-Infinity}}function r(a,b,c,d,e){for(var f=
[b,c],h;f.length;)c=f.pop(),b=f.pop(),c-b<=d||(h=b+Math.ceil((c-b)/d/2)*d,v(a,h,b,c,e),f.push(b,h,h,c))}var u="undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},v=function(a,b){return b={np:{}},a(b,b.np),b.np}(function(a){(function(b,c){a.np=c()})(u,function(){function a(c,d,e,f,h){for(;f>e;){if(600<f-e){var k=f-e+1,l=d-e+1,m=Math.log(k),n=.5*Math.exp(2*m/3);m=.5*Math.sqrt(m*n*(k-n)/k)*(0>l-k/2?-1:1);a(c,d,Math.max(e,Math.floor(d-l*n/k+m)),Math.min(f,
Math.floor(d+(k-l)*n/k+m)),h)}k=c[d];l=e;n=f;b(c,e,d);for(0<h(c[f],k)&&b(c,e,f);l<n;){b(c,l,n);l++;for(n--;0>h(c[l],k);)l++;for(;0<h(c[n],k);)n--}0===h(c[e],k)?b(c,e,n):(n++,b(c,n,f));n<=d&&(e=n+1);d<=n&&(f=n-1)}}function b(a,b,c){var d=a[b];a[b]=a[c];a[c]=d}function c(a,b){return a<b?-1:a>b?1:0}return function(b,d,e,f,h){a(b,d,e||0,f||b.length-1,h||c)}})});b.prototype={all:function(){return this.Nt(this.data,[])},search:function(a){var b=this.data,c=[],d=this.je;if(!n(a,b))return c;for(var e=[],
f,h,k,l;b;){f=0;for(h=b.children.length;f<h;f++)k=b.children[f],l=b.td?d(k):k,n(a,l)&&(b.td?c.push(k):m(a,l)?this.Nt(k,c):e.push(k));b=e.pop()}return c},oD:function(a){var b=this.data,c=this.je;if(!n(a,b))return!1;for(var d=[],e,f,h,k;b;){e=0;for(f=b.children.length;e<f;e++)if(h=b.children[e],k=b.td?c(h):h,n(a,k)){if(b.td||m(a,k))return!0;d.push(h)}b=d.pop()}return!1},load:function(a){if(!a||!a.length)return this;if(a.length<this.Rt){for(var b=0,c=a.length;b<c;b++)this.Bf(a[b]);return this}a=this.Pt(a.slice(),
0,a.length-1,0);this.data.children.length?this.data.height===a.height?this.St(this.data,a):(this.data.height<a.height&&(b=this.data,this.data=a,a=b),this.Qt(a,this.data.height-a.height-1,!0)):this.data=a;return this},Bf:function(a){a&&this.Qt(a,this.data.height-1);return this},clear:function(){this.data=p([]);return this},remove:function(a,b){if(!a)return this;for(var c=this.data,d=this.je(a),e=[],f=[],h,k,l,n;c||e.length;){c||(c=e.pop(),k=e[e.length-1],h=f.pop(),n=!0);if(c.td){a:{l=a;var p=c.children,
r=b;if(r){for(var u=0;u<p.length;u++)if(r(l,p[u])){l=u;break a}l=-1}else l=p.indexOf(l)}if(-1!==l){c.children.splice(l,1);e.push(c);this.CC(e);break}}n||c.td||!m(c,d)?k?(h++,c=k.children[h],n=!1):c=null:(e.push(c),f.push(h),h=0,k=c,c=c.children[0])}return this},je:function(a){return a},Zo:f,ap:h,toJSON:function(){return this.data},Nt:function(a,b){for(var c=[];a;)a.td?b.push.apply(b,a.children):c.push.apply(c,a.children),a=c.pop();return b},Pt:function(a,b,d,e){var f=d-b+1,h=this.Lo;if(f<=h){var k=
p(a.slice(b,d+1));c(k,this.je);return k}e||(e=Math.ceil(Math.log(f)/Math.log(h)),h=Math.ceil(f/Math.pow(h,e-1)));k=p([]);k.td=!1;k.height=e;f=Math.ceil(f/h);h=f*Math.ceil(Math.sqrt(h));var l;for(r(a,b,d,h,this.Zo);b<=d;b+=h){var m=Math.min(b+h-1,d);r(a,b,m,f,this.ap);for(l=b;l<=m;l+=f){var n=Math.min(l+f-1,m);k.children.push(this.Pt(a,l,n,e-1))}}c(k,this.je);return k},BC:function(a,b,c,d){for(var e,f,h,l,m,n,p,r;;){d.push(b);if(b.td||d.length-1===c)break;p=r=Infinity;e=0;for(f=b.children.length;e<
f;e++)h=b.children[e],m=k(h),n=(Math.max(h.maxX,a.maxX)-Math.min(h.minX,a.minX))*(Math.max(h.maxY,a.maxY)-Math.min(h.minY,a.minY))-m,n<r?(r=n,p=m<p?m:p,l=h):n===r&&m<p&&(p=m,l=h);b=l||b.children[0]}return b},Qt:function(a,b,c){var d=this.je;c=c?a:d(a);d=[];var f=this.BC(c,this.data,b,d);f.children.push(a);for(e(f,c);0<=b;)if(d[b].children.length>this.Lo)this.EC(d,b),b--;else break;this.yC(c,d,b)},EC:function(a,b){var d=a[b],e=d.children.length,f=this.Rt;this.zC(d,f,e);e=this.AC(d,f,e);e=p(d.children.splice(e,
d.children.length-e));e.height=d.height;e.td=d.td;c(d,this.je);c(e,this.je);b?a[b-1].children.push(e):this.St(d,e)},St:function(a,b){this.data=p([a,b]);this.data.height=a.height+1;this.data.td=!1;c(this.data,this.je)},AC:function(a,b,c){var e,f;var h=f=Infinity;for(e=b;e<=c-b;e++){var l=d(a,0,e,this.je);var m=d(a,e,c,this.je);var n=Math.max(0,Math.min(l.maxX,m.maxX)-Math.max(l.minX,m.minX))*Math.max(0,Math.min(l.maxY,m.maxY)-Math.max(l.minY,m.minY));l=k(l)+k(m);if(n<h){h=n;var p=e;f=l<f?l:f}else n===
h&&l<f&&(f=l,p=e)}return p},zC:function(a,b,c){var d=a.td?this.Zo:f,e=a.td?this.ap:h,k=this.Ot(a,b,c,d);b=this.Ot(a,b,c,e);k<b&&a.children.sort(d)},Ot:function(a,b,c,f){a.children.sort(f);f=this.je;var h=d(a,0,b,f),k=d(a,c-b,c,f),m=l(h)+l(k),n;for(n=b;n<c-b;n++){var p=a.children[n];e(h,a.td?f(p):p);m+=l(h)}for(n=c-b-1;n>=b;n--)p=a.children[n],e(k,a.td?f(p):p),m+=l(k);return m},yC:function(a,b,c){for(;0<=c;c--)e(b[c],a)},CC:function(a){for(var b=a.length-1,d;0<=b;b--)0===a[b].children.length?0<b?(d=
a[b-1].children,d.splice(d.indexOf(a[b]),1)):this.clear():c(a[b],this.je)},DC:function(a){var b=["return a"," - b",";"];this.Zo=new Function("a","b",b.join(a[0]));this.ap=new Function("a","b",b.join(a[1]));this.je=new Function("a","return {minX: a"+a[0]+", minY: a"+a[1]+", maxX: a"+a[2]+", maxY: a"+a[3]+"};")}};a["default"]=b})(Mu.ji=Mu.ji||{});Mu.ji=Mu.ji.default;function Nu(){this.j=Mu.ji(void 0);this.g={}}g=Nu.prototype;g.Bf=function(a,b){a={minX:a[0],minY:a[1],maxX:a[2],maxY:a[3],value:b};this.j.Bf(a);this.g[J(b)]=a};g.load=function(a,b){for(var c=Array(b.length),d=0,e=b.length;d<e;d++){var f=a[d],h=b[d];f={minX:f[0],minY:f[1],maxX:f[2],maxY:f[3],value:h};c[d]=f;this.g[J(h)]=f}this.j.load(c)};g.remove=function(a){a=J(a);var b=this.g[a];delete this.g[a];return null!==this.j.remove(b)};
g.update=function(a,b){var c=this.g[J(b)];Xk([c.minX,c.minY,c.maxX,c.maxY],a)||(this.remove(b),this.Bf(a,b))};function Ou(a){return a.j.all().map(function(a){return a.value})}function Pu(a,b){return a.j.search({minX:b[0],minY:b[1],maxX:b[2],maxY:b[3]}).map(function(a){return a.value})}g.forEach=function(a,b){return Qu(Ou(this),a,b)};function Ru(a,b,c,d){return Qu(Pu(a,b),c,d)}function Qu(a,b,c){for(var d,e=0,f=a.length;e<f&&!(d=b.call(c,a[e]));e++);return d}g.isEmpty=function(){return rf(this.g)};
g.clear=function(){this.j.clear();this.g={}};g.Y=function(a){var b=this.j.data;return Uk(b.minX,b.minY,b.maxX,b.maxY,a)};g.concat=function(a){this.j.load(a.j.all());for(var b in a.g)this.g[b|0]=a.g[b|0]};function Su(a){a=a||{};Ku.call(this,{attributions:a.attributions,logo:a.logo,projection:void 0,state:"ready",wrapX:void 0!==a.wrapX?a.wrapX:!0});this.Kb=Af;this.Lc=a.format;this.En=void 0==a.overlaps?!0:a.overlaps;this.ab=a.url;void 0!==a.loader?this.Kb=a.loader:void 0!==this.ab&&(Mf(this.Lc,7),this.Kb=xea(this.ab,this.Lc));this.kO=void 0!==a.strategy?a.strategy:yea;var b=void 0!==a.useSpatialIndex?a.useSpatialIndex:!0;this.Ab=b?new Nu:null;this.Cq=new Nu;this.Xc={};this.Uc={};this.jf={};this.Xf=
{};this.ke=null;if(a.features instanceof ju){var c=a.features;var d=c.g}else Array.isArray(a.features)&&(d=a.features);b||void 0!==c||(c=new ju(d));void 0!==d&&Tu(this,d);void 0!==c&&zea(this,c)}I(Su,Ku);g=Su.prototype;g.cc=function(a){var b=J(a).toString();if(Uu(this,b,a)){this.kt(b,a);var c=a.Z();c?(b=c.Y(),this.Ab&&this.Ab.Bf(b,a)):this.Xc[b]=a;this.dispatchEvent(new Vu("addfeature",a))}this.ia()};g.kt=function(a,b){this.Xf[a]=[H(b,"change",this.aq,this),H(b,"propertychange",this.aq,this)]};
function Uu(a,b,c){var d=!0,e=c.D();void 0!==e?e.toString()in a.Uc?d=!1:a.Uc[e.toString()]=c:(Mf(!(b in a.jf),30),a.jf[b]=c);return d}g.zc=function(a){Tu(this,a);this.ia()};function Tu(a,b){var c,d=[],e=[],f=[];var h=0;for(c=b.length;h<c;h++){var k=b[h];var l=J(k).toString();Uu(a,l,k)&&e.push(k)}h=0;for(c=e.length;h<c;h++)k=e[h],l=J(k).toString(),a.kt(l,k),(b=k.Z())?(l=b.Y(),d.push(l),f.push(k)):a.Xc[l]=k;a.Ab&&a.Ab.load(d,f);h=0;for(c=e.length;h<c;h++)a.dispatchEvent(new Vu("addfeature",e[h]))}
function zea(a,b){var c=!1;H(a,"addfeature",function(a){c||(c=!0,b.push(a.feature),c=!1)});H(a,"removefeature",function(a){c||(c=!0,b.remove(a.feature),c=!1)});H(b,"add",function(a){c||(c=!0,this.cc(a.element),c=!1)},a);H(b,"remove",function(a){c||(c=!0,this.Bb(a.element),c=!1)},a);a.ke=b}
g.clear=function(a){if(a){for(var b in this.Xf)this.Xf[b].forEach(sf);this.ke||(this.Xf={},this.Uc={},this.jf={})}else if(this.Ab){this.Ab.forEach(this.ki,this);for(var c in this.Xc)this.ki(this.Xc[c])}this.ke&&this.ke.clear();this.Ab&&this.Ab.clear();this.Cq.clear();this.Xc={};this.dispatchEvent(new Vu("clear"));this.ia()};g.Nu=function(a){this.Ab?this.Ab.forEach(a,void 0):this.ke&&this.ke.forEach(a,void 0)};function Wu(a,b,c,d){a.Ab?Ru(a.Ab,b,c,d):a.ke&&a.ke.forEach(c,d)}
g.La=function(){if(this.ke)var a=this.ke.g;else this.Ab&&(a=Ou(this.Ab),rf(this.Xc)||Wl(a,qf(this.Xc)));return a};g.om=function(a){return Pu(this.Ab,a)};g.Y=function(a){return this.Ab.Y(a)};g.Ad=function(a){a=this.Uc[a.toString()];return void 0!==a?a:null};g.jk=function(){return this.Lc};g.fg=function(){};g.Ma=function(){return this.ab};
g.aq=function(a){a=a.target;var b=J(a).toString(),c=a.Z();c?(c=c.Y(),b in this.Xc?(delete this.Xc[b],this.Ab&&this.Ab.Bf(c,a)):this.Ab&&this.Ab.update(c,a)):b in this.Xc||(this.Ab&&this.Ab.remove(a),this.Xc[b]=a);c=a.D();void 0!==c?(c=c.toString(),b in this.jf?(delete this.jf[b],this.Uc[c]=a):this.Uc[c]!==a&&(Xu(this,a),this.Uc[c]=a)):b in this.jf||(Xu(this,a),this.jf[b]=a);this.ia();this.dispatchEvent(new Vu("changefeature",a))};g.isEmpty=function(){return this.Ab.isEmpty()&&rf(this.Xc)};
function Yu(a,b,c,d){var e=a.Cq;b=a.kO(b,c);var f;var h=0;for(f=b.length;h<f;++h){var k=b[h];Ru(e,k,function(a){return Tk(a.extent,k)})||(a.Kb.call(a,k,c,d),e.Bf(k,{extent:k.slice()}))}}g.Bb=function(a){var b=J(a).toString();b in this.Xc?delete this.Xc[b]:this.Ab&&this.Ab.remove(a);this.ki(a);this.ia()};g.ki=function(a){var b=J(a).toString();this.Xf[b].forEach(sf);delete this.Xf[b];var c=a.D();void 0!==c?delete this.Uc[c.toString()]:delete this.jf[b];this.dispatchEvent(new Vu("removefeature",a))};
function Xu(a,b){for(var c in a.Uc)if(a.Uc[c]===b){delete a.Uc[c];break}}function Vu(a,b){Cf.call(this,a);this.feature=b}I(Vu,Cf);function hq(a){Hf.call(this);this.ma=void 0;this.de="geometry";this.Pc=null;this.Qj=void 0;this.j=null;H(this,Jf(this.de),this.Dm,this);void 0!==a&&(a instanceof yo||!a?this.tb(a):this.qc(a))}I(hq,Hf);g=hq.prototype;g.clone=function(){var a=new hq(this.Yb());Zu(a,this.de);var b=this.Z();b&&a.tb(b.clone());(b=this.Ib())&&a.zb(b);return a};g.Z=function(){return this.get(this.de)};g.D=function(){return this.ma};g.Ib=function(){return this.Pc};g.Nd=function(){return this.Qj};g.eF=function(){this.ia()};
g.Dm=function(){this.j&&(sf(this.j),this.j=null);var a=this.Z();a&&(this.j=H(a,"change",this.eF,this));this.ia()};g.tb=function(a){this.set(this.de,a)};g.zb=function(a){this.Qj=(this.Pc=a)?Aea(a):void 0;this.ia()};g.ga=function(a){this.ma=a;this.ia()};function Zu(a,b){yf(a,Jf(a.de),a.Dm,a);a.de=b;H(a,Jf(a.de),a.Dm,a);a.Dm()}
function Aea(a){var b;if("function"===typeof a)2==a.length?b=function(b){return a(this,b)}:b=a;else{if(Array.isArray(a))var c=a;else Mf(a instanceof ds,41),c=[a];b=function(){return c}}return b};function $u(a){return!!a}function av(a,b){if(b instanceof Sf){var c=b.Y();!c&&(b=b.N(),b instanceof Su||b instanceof bv)&&(c=b.Y());c&&Yk(a,c)}return a}function Bea(a,b){b&&(b=b instanceof yo?b:b.geometry)&&Yk(a,To(b));return a}function Cea(a){return a?a.N():void 0}function cv(a){return a?a.Z():void 0}function dv(a){return a instanceof ev?a.W():void 0}function fv(a){if(!a)return[];q(a)||(a=[a]);return a.map(dv).filter($u)};window.jsts&&(jsts.geom.LineString.prototype.isClosed=function(){return this.isEmpty()?!1:this.getCoordinateN(0).equals2D(this.getCoordinateN(this.getNumPoints()-1),1E-12)});/*

 Copyright (c) 2011 by The Authors.
 Published under the LGPL 2.1 license.
 See /license-notice.txt for the full text of the license notice.
 See /license.txt for the full text of the license.
*/
var gv=E.V("os.geo.jsts");function hv(a){return a?[a.x,a.y,a.z||0]:null}function iv(a){return new jsts.geom.Coordinate(a[0],a[1],a[2])}function jv(a){if(null==window.jsts)throw Error("JSTS library is not loaded!");this.g=a||new jsts.geom.GeometryFactory}xa(jv);
function kv(a,b){if(b)switch(b.T()){case "Point":return lv(a,b);case "LineString":return mv(a,b);case "LinearRing":return a.g.createLinearRing(b.getCoordinates().map(iv));case "Polygon":return nv(a,b);case "MultiPoint":return Dea(a,b);case "MultiLineString":return Eea(a,b);case "MultiPolygon":return Fea(a,b);case "GeometryCollection":return Gea(a,b)}return null}function lv(a,b){b=b.getCoordinates();return a.g.createPoint(iv(b))}
function mv(a,b){b=b.getCoordinates();if(!b||0==b.length)return null;1==b.length&&(b[1]=b[0]);return a.g.createLineString(b.map(iv))}function nv(a,b){b=tp(b);for(var c=null,d=[],e=0;e<b.length;e++){var f=a.g.createLinearRing(b[e].getCoordinates().map(iv));0===e?c=f:d.push(f)}return a.g.createPolygon(c,d)}function Dea(a,b){b=kp(b).map(function(a){return lv(this,a)},a);return a.g.createMultiPoint(b)}
function Eea(a,b){b=Oo(b).map(function(a){return mv(this,a)},a);return a.g.createMultiLineString(b)}function Fea(a,b){b=yp(b).map(function(a){return nv(this,a)},a);return a.g.createMultiPolygon(b)}function Gea(a,b){b=dp(b).map(function(a){return kv(this,a)},a);return a.g.createGeometryCollection(b)}
jv.prototype.write=function(a){var b=a.getGeometryType();if("Point"===b)a=a.getCoordinate(),a=new hp(hv(a));else if("LineString"===b)a=ov(a);else if("LinearRing"===b)a=a?a.getCoordinates().map(hv):[],a=new gp(a);else if("Polygon"===b)a=pv(a);else if("MultiPoint"===b)a=a?a.getCoordinates().map(hv):[],a=new jp(a);else if("MultiLineString"===b){b=[];if(a)for(var c=a.getNumGeometries(),d=0;d<c;d++){var e=a.getGeometryN(d);e&&b.push(ov(e).getCoordinates())}a=new Mo(b)}else if("MultiPolygon"===b){b=[];
if(a)for(c=a.getNumGeometries(),d=0;d<c;d++)(e=a.getGeometryN(d))&&b.push(pv(e).getCoordinates());a=new vp(b)}else if("GeometryCollection"===b){b=[];if(a)for(c=a.getNumGeometries(),d=0;d<c;d++)(e=a.getGeometryN(d))&&b.push(this.write(e));a=new Zo(b)}else a=null;return a};function ov(a){a=a?a.getCoordinates().map(hv):[];return new Jo(a)}
function pv(a){var b=[];if(a){var c=a.getExteriorRing();if(c){b.push(c.getCoordinates().map(hv));c=a.getNumInteriorRing();for(var d=0;d<c;d++){var e=a.getInteriorRingN(d);e&&b.push(e.getCoordinates().map(hv))}}}return new qp(b)}
function qv(a){var b=null;if(a)switch(a.T()){case "LineString":var c=a.getCoordinates();3<c.length&&Yp(c)&&(b=new qp([c]));break;case "MultiLineString":c=a.getCoordinates();var d=[];for(a=0;a<c.length;a++)3<c[a].length&&Yp(c[a])&&d.push(c[a]);1==d.length?b=new qp(d):1<d.length&&(b=new vp([d]));break;case "Circle":b=$ca(a);break;case "GeometryCollection":if(c=a.g){var e=[];for(a=0;a<c.length;a++)if(d=qv(c[a])){var f=d.T();"Polygon"==f?e.push(d):"MultiPolygon"==f&&yp(d).forEach(function(a){e.push(a)})}1==
e.length?b=e[0]:1<e.length&&(b=new vp(null),zp(b,e))}break;case "Polygon":case "MultiPolygon":b=a}return b}function rv(a,b,c){var d=null;if(a&&b){var e=a.Z();b=b.Z();if(e&&b){d=jv.s();e=kv(d,e);b=kv(d,b);if(e.covers(b))throw Error("Result geometry is unchanged");e=e.union(b);if(e=d.write(e))e=sv(e),e.set("_normalized",!0);d=c?a:new hq;d.tb(e)}}return d}
function tv(a,b,c){var d=null;if(a&&b){var e=a.Z(),f=b.Z();if(e&&f){b=jv.s();e=kv(b,e);f=kv(b,f);d=c?a:new hq;if(f.covers(e))throw Error("Result geometry is empty");if(e.contains(f)||e.crosses(f)||e.overlaps(f))if((a=e.difference(f))&&!a.isEmpty()){if(a=b.write(a))a=sv(a),a.set("_normalized",!0);d.tb(a)}else throw Error("Result geometry is empty");else throw Error("Result geometry is unchanged");}}return d}
function uv(a){var b=null;if(a)try{var c=jv.s(),d=a.map(function(a){return a?kv(c,a):null}).filter($u);if(1==d.length)var e=d[0];else if(1<d.length)try{e=new jsts.geom.GeometryCollection(d,new jsts.geom.GeometryFactory),e=e.union()}catch(f){e=new jsts.geom.MultiPolygon(d,new jsts.geom.GeometryFactory),e=e.buffer(0)}e&&(b=c.write(e))}catch(f){E.error(gv,"Failed merging geometries",f)}return b}
function vv(a){if(a&&(a=a.filter($u),1<a.length)){for(var b=[0,0,0,0],c=0;c<a.length;c++){var d=a[c].Y();bl(d)>bl(b)&&(b=d)}b=(b[0]+b[2])/2;for(c=0;c<a.length;c++)a[c].kf("_normalized",!0),kq(a[c],b);c=uv(a);if(c instanceof qp)return[c];if(c instanceof vp)return yp(c)}return a}
function wv(a,b,c){if(!a)return null;var d=a.T();if(0==b||"Point"!==d&&663469.9375<b)return null;var e=a.clone();c||e.toLonLat();a=null;switch(d){case "Point":a=Hea(e,Math.abs(b));break;case "LineString":case "MultiLineString":kq(e);a=xv(e,Math.abs(b));break;case "Polygon":d=e.getCoordinates();if(0<d.length&&mq(d[0]))a=Iea(e,b);else{d=e.Y();var f=yv(d,b);f?0<f&&(a=xv(e,b)):a=zv(e,b,(d[0]+d[2])/2)}break;case "MultiPolygon":e=yp(e);0>b&&(e=vv(e));e&&(a=e.map(function(a){return wv(a,b,!0)}).filter($u),
0<b&&(a=vv(a)),a=uv(a));break;case "GeometryCollection":if(e=dp(e))a=e.map(function(a){return wv(a,b,!0)}).filter($u),a=uv(a)}a&&(a=sv(a),a.set("_normalized",!0),a.set("interpolationMethod","none"));a&&!c&&Ap(a);return a}function Hea(a,b){a=Bo(a);b=Vp(a,b,b,0);return new qp([b])}
function yv(a,b){if(a&&6<a[2]-a[0]){if(0>b){b=Math.abs(b);var c=osasm.geodesicDirect([0,Math.max(Math.abs(a[1]),Math.abs(a[3]))],180,b);b=6-osasm.rhumbDirect([0,c[1]],90,2.05*b)[0];return 0<b&&500>=(a[2]-a[0])/b?b:-1}return 6}return 0}
function xv(a,b){var c=null,d=jv.s(),e=kv(d,a),f=a.Y();var h=yv(f,b);if(0<=h){var k=[];if(0<h)for(var l=jv.s(),m=f[0];m<f[2];m+=h){var n=up([m,f[1],m+6,f[3]]);k.push(kv(l,n))}}if((h=k)&&500>h.length){k=[];if(h.length)for(f=0;f<h.length;f++)l=e.intersection(h[f]),l.isEmpty()||k.push(d.write(l));else k.push(a);if(0<k.length){a=a.Y();a=(a[0]+a[2])/2;d=[];for(f=0;f<k.length;f++)(e=zv(k[f],b,a))&&d.push(e);0<d.length&&(c=uv(d))}}return c}
function zv(a,b,c){var d=null;if(a){d=dl(a.Y());proj4.defs("bufferCRS","+ellps=WGS84 +proj=tmerc +lat_0="+d[1]+" +lon_0="+d[0]+" +k=1 +x_0=0 +y_0=0");var e=new ll({code:"bufferCRS"});a.transform("EPSG:4326",e);d=Av(a,b,e,c);a=Cl("EPSG:4326");zl(a,e);zl(e,a)}return d}function Iea(a,b){var c=null;if(a){var d;if(d=0<dl(a.Y())[1]?Cl("EPSG:3413"):Cl("EPSG:3031"))a.transform("EPSG:4326",d),c=Av(a,b,d)}return c}
function Av(a,b,c,d){var e=null,f=jv.s();if(a=kv(f,a))if(b=jsts.simplify.DouglasPeuckerSimplifier.simplify(a,Math.abs(.01*b)).buffer(b),!b.isEmpty()&&(f=e=f.write(b)))f.transform(c,"EPSG:4326"),kq(f,d);return e}
function sv(a,b,c){if(a){var d=a.T();if("Polygon"==d||"MultiPolygon"==d)try{var e=jv.s(),f=kv(e,a);if(f.isEmpty())return c?void 0:a;if(f.isValid()){f.normalize();var h=f}else if(f instanceof jsts.geom.Polygon){var k=new jsts.operation.polygonize.Polygonizer;Bv(f,k);h=Cv(k.getPolygons(),f.getFactory())}else if(f instanceof jsts.geom.MultiPolygon){k=new jsts.operation.polygonize.Polygonizer;for(var l=f.getNumGeometries();0<l--;)Bv(f.getGeometryN(l),k);h=Cv(k.getPolygons(),f.getFactory())}if(h&&h.isValid()){var m=
f.getLength(),n=Math.abs(m-h.getLength());!b&&.005<n/m&&rj(tj,"Area was modified from the original due to invalid topology. Common reasons include polygons that cross or overlap themselves.",Rh);var p=e.write(h);p.qc(a.Yb());return p}}catch(r){E.error(gv,"Geometry validation check failed",r)}return c?void 0:a}}function Bv(a,b){Dv(a.getExteriorRing(),b);for(var c=a.getNumInteriorRing();0<c--;)Dv(a.getInteriorRingN(c),b)}
function Dv(a,b){a instanceof jsts.geom.LinearRing&&(a=a.getFactory().createLineString(a.getCoordinates()));var c=a.getFactory().createPoint(a.getCoordinateN(0));a=a.union(c);b.add(a)}function Cv(a){switch(a.size()){case 0:return null;case 1:return a.iterator().next();default:a=a.iterator();for(var b=a.next();a.hasNext();)b=b.union(a.next());return b}};function Ev(){ut.call(this,{handleDownEvent:Jea,handleMoveEvent:Kea,handleUpEvent:Lea});this.type="polygon";this.coords=[];this.g=this.B=null;this.finish=!1}w(Ev,ut);g=Ev.prototype;g.Z=function(){var a=new qp([this.coords]),b=Ds.method;a.set("interpolationMethod",b);a.toLonLat();kq(a);Ns("EPSG:4326",b);Rs(a);Os=Ms=null;a=sv(a);Ap(a);return a};g.Yb=function(){var a={};a.interpolationMethod=Ds.method;return a};function Kea(a){this.l&&this.update(a)}
function Lea(a){this.l&&this.finish&&this.end(a);return!1}function Jea(a){return Od(new Md(a.originalEvent))&&(this.l||this.condition(a))?(this.l||this.kd(a),this.lt(a)?(this.zA(a),this.finish=!0):this.update(a),!0):!1}g.zA=function(){this.coords[this.coords.length-1]=this.coords[0]};g.lt=function(a){if(3<this.coords.length){var b=this.X().getPixelFromCoordinate(this.coords[0]);a=a.pixel;if(b&&a)return 7>Math.abs(a[0]-b[0])&&7>Math.abs(a[1]-b[1])}return!1};
g.kd=function(a){this.finish=!1;Ev.C.kd.call(this,a);Qs();this.coords.length=0};g.update=function(a){var b=a.coordinate;b&&("pointerdown"===a.type?(this.coords.push(b),1==this.coords.length&&this.coords.push(b)):1<this.coords.length&&(this.coords[this.coords.length-1]=b),this.ku(),1<this.coords.length&&this.al())};g.ku=function(){};
g.al=function(){Fv(this);this.B.setMap(this.X());this.g||(this.g=new hq,this.g.zb(this.Ib()),this.g.set("interpolationMethod",Ds.method),this.B.N().cc(this.g));var a=new Jo(this.coords.slice());a.toLonLat();kq(a);Ap(a);this.g.tb(a);this.g.set("_originalGeometry",void 0);this.g.qc(this.Yb(),!0);Ps(this.g)};function Fv(a){a.B||(a.B=new iu({map:a.X(),source:new Su({features:new ju,useSpatialIndex:!1}),style:a.Ib(),updateWhileAnimating:!0,updateWhileInteracting:!0}))}
g.Ed=function(){Ev.C.Ed.call(this);this.B&&(this.B.N().ke.clear(),this.B.setMap(null),this.B.dispose(),this.B=null);this.g&&(this.g=null)};g.Jp=function(){return this.coords.toString()};function Gv(){Ev.call(this);this.color=[51,255,255,1]}w(Gv,Ev);F(Gv,"os.I3DSupport");g=Gv.prototype;g.al=function(){Gv.C.al.call(this);this.nn()};function Hv(a){return Ml(a,S)}g.Ed=function(){Gv.C.Ed.call(this);zt(this.X(),!0);this.mn()};g.mn=wa;g.nn=wa;g.vc=function(){return!0};g.kd=function(a){Gv.C.kd.call(this,a);(a=this.X())&&0>=zs(T(a))[1]&&zt(0,!1)};hu.prototype.A=void 0;function Mea(){void 0!==this.A&&(Ft([this.A]),this.A=void 0)}function Nea(){if(L.s().Qa()){var a=this.o.Z().getCoordinates();if(a.length&&a[0].length){a=a[0].map(Hv);var b=[0,a.length];a.forEach(function(a){b.push(a[0]);b.push(a[1]);b.push(a[2]||0)});if(void 0===this.A){this.A=Math.round(1E16*Math.random());a=this.Ib();if(a instanceof ds){Gt(a);var c={};c[Dt(a)]=[this.A];Ht(c)}Iv(b,[this.A])}else Jv(b,[this.A])}}};Gv.prototype.I=void 0;function Oea(){void 0!==this.I&&(Ft([this.I]),this.I=void 0)}function Pea(){if(L.s().Qa()){var a=this.g.Z().getCoordinates();if(a.length){a=a.map(Hv);var b=[0,a.length];a.forEach(function(a){b.push(a[0]);b.push(a[1]);b.push(a[2]||0)});if(void 0===this.I){this.I=Math.round(1E16*Math.random());a=this.Ib();if(a instanceof ds){Gt(a);var c={};c[Dt(a)]=[this.I];Ht(c)}Iv(b,[this.I])}else Jv(b,[this.I])}}};function Qea(a){a instanceof yt?(a.Dr=qea,a.Er=rea):a instanceof Gv?(a.mn=Oea,a.nn=Pea):a instanceof hu&&(a.Fr=Mea,a.Gr=Nea)};function Kv(){this.g=this.ha=null}xa(Kv);Kv.prototype.X=function(){return this.ha?this.ha:L.s().X()};Kv.prototype.clear=function(){this.g=null;M.set(["map","z-order"],this.g)};function Lv(a){if(!a.g&&(a.g=M.get(["map","z-order"])||{},a.g)){var b=Ia(),c;for(c in a.g)for(var d=a.g[c],e=d.length;e--;)2592E6<b-d[e].time&&d.splice(e,1)}}function Mv(a,b){if(!a.g||!b)return null;for(var c in a.g)for(var d=a.g[c]||[],e=0,f=d.length;e<f;e++)if(d[e].id==b)return c;return null}
function Nv(a){for(var b=Ov(a.X()).g,c=0,d=b.length;c<d;c++){var e=b[c],f=e.Sc()||"",h=a.g[f]||[];e=Pv(e).g;for(var k=0,l=e.length;k<l;k++){for(var m=e[k],n=!1,p=0,r=h.length;p<r;p++)if(h[p].id==m.D()){n=!0;h[p].time=Ia();break}n||h.push({id:m.D(),time:Ia()})}a.g[f]=h}}
Kv.prototype.update=function(){Lv(this);Nv(this);for(var a=Ov(this.X()).g,b=0,c=0,d=a.length;c<d;c++){var e=a[c],f=this.g[e.Sc()||""];if(f){var h=!1,k=Pv(e).g;k.sort(function(a,b){for(var c=-1,d=-1,e=0,k=f.length;e<k&&!(f[e].id==a.D()&&(c=e),f[e].id==b.D()&&(d=e),-1<c&&-1<d);e++);a=xb(c,d);h||(h=0<a);return a});for(var l=0;l<k.length;l++)k[l].Of(b++);h&&(e.dispatchEvent("zOrderUpdate"),e.ia())}}};
function Qv(a,b,c,d){if(a.g&&c)for(var e in a.g){for(var f=a.g[e],h=-1,k=-1,l=!1,m=0,n=f.length;m<n;m++)if(f[m].id==b&&(l=!0,h=m),f[m].id==c&&(k=m),-1<h&&-1<k){m=f.splice(h,1)[0];h<k&&k--;f.splice(k+(d?1:0),0,m);break}if(l)break}}Kv.prototype.save=function(){Lv(this);Nv(this);M.set(["map","z-order"],this.g)};function Rv(a){var b=a||{};a=of({},b);delete a.layers;b=b.layers;Qf.call(this,a);this.o=[];this.g={};H(this,Jf(Sv),this.kF,this);b?Array.isArray(b)?b=new ju(b.slice(),{unique:!0}):Mf(b instanceof ju,43):b=new ju(void 0,{unique:!0});this.Lq(b)}I(Rv,Qf);g=Rv.prototype;g.Em=function(){this.ia()};
g.kF=function(){this.o.forEach(sf);this.o.length=0;var a=Pv(this);this.o.push(H(a,"add",this.jF,this),H(a,"remove",this.lF,this));for(var b in this.g)this.g[b].forEach(sf);pf(this.g);a=a.g;var c;b=0;for(c=a.length;b<c;b++){var d=a[b];this.g[J(d).toString()]=[H(d,"propertychange",this.Em,this),H(d,"change",this.Em,this)]}this.ia()};g.jF=function(a){a=a.element;var b=J(a).toString();this.g[b]=[H(a,"propertychange",this.Em,this),H(a,"change",this.Em,this)];this.ia()};
g.lF=function(a){a=J(a.element).toString();this.g[a].forEach(sf);delete this.g[a];this.ia()};function Pv(a){return a.get(Sv)}g.Lq=function(a){this.set(Sv,a)};
g.Ip=function(a){var b=void 0!==a?a:[],c=b.length;Pv(this).forEach(function(a){a.Ip(b)});a=Rf(this);var d;for(d=b.length;c<d;c++){var e=b[c];e.opacity*=a.opacity;e.visible=e.visible&&a.visible;e.maxResolution=Math.min(e.maxResolution,a.maxResolution);e.minResolution=Math.max(e.minResolution,a.minResolution);void 0!==a.extent&&(e.extent=void 0!==e.extent?fl(e.extent,a.extent):a.extent)}return b};g.Lp=function(){return"ready"};var Sv="layers";function Tv(a,b,c){A.call(this,a);this.layer=b;this.index=null!=c?c:-1}w(Tv,A);function Uv(a){Rv.call(this,a);this.l=0;this.u=this.j=null;if(a=Pv(this))H(a,"add",this.pn,this),H(a,"remove",this.qn,this)}w(Uv,Rv);g=Uv.prototype;g.J=function(){Uv.C.J.call(this);var a=Pv(this);a&&(yf(a,"add",this.pn,this),yf(a,"remove",this.qn,this))};g.Lq=function(a){var b=Pv(this);b&&(yf(b,"add",this.pn,this),yf(b,"remove",this.qn,this));a&&(H(a,"add",this.pn,this),H(a,"remove",this.qn,this));Uv.C.Lq.call(this,a)};g.Sc=function(){return this.u};g.he=function(a){this.u=a};
g.pn=function(a){a.element instanceof Sf&&this.dispatchEvent(new Tv("addLayer",a.element))};g.qn=function(a){a.element instanceof Sf&&this.dispatchEvent(new Tv("removeLayer",a.element))};function Vv(a){Sf.call(this,a?a:{});this.type="IMAGE"}I(Vv,Sf);function Wv(a,b){this.id=a||"";this.name=a||"";this.field=b||a||"";this.type="string";this.internal=!1;this.sortable=this.resizable=!0;this.minWidth=30;this.maxWidth=Number.MAX_VALUE;this.width=0;this.rerenderOnResize=!1;this.cssClass=this.headerCssClass="";this.selectable=this.focusable=this.defaultSortAsc=!0;this.asyncPostRender=this.behavior=this.formatter=null;this.visible=!0;this.visprotected=this.temp=!1;this.derivedFrom=this.toolTip="";this.userModified=!1}
Wv.prototype.ra=function(a){a||(a={});a.id=this.id;a.name=this.name;a.field=this.field;a.type=this.type;a.resizable=this.resizable;a.sortable=this.sortable;a.minWidth=this.minWidth;a.maxWidth=this.maxWidth;a.width=this.width;a.rerenderOnResize=this.rerenderOnResize;a.headerCssClass=this.headerCssClass;a.cssClass=this.cssClass;a.defaultSortAsc=this.defaultSortAsc;a.focusable=this.focusable;a.selectable=this.selectable;a.behavior=this.behavior;a.visible=this.visible;a.visprotected=this.visprotected;
a.toolTip=this.toolTip;a.derivedFrom=this.derivedFrom;a.userModified=this.userModified;a.formatter=null;a.asyncPostRender=null;return a};
Wv.prototype.restore=function(a){this.id=a.id;this.name=a.name;this.field=a.field;this.type=a.type||"string";this.resizable=a.resizable;this.sortable=a.sortable;this.minWidth=a.minWidth;this.maxWidth=a.maxWidth;this.width=a.width;this.rerenderOnResize=a.rerenderOnResize;this.headerCssClass=a.headerCssClass;this.cssClass=a.cssClass;this.defaultSortAsc=a.defaultSortAsc;this.focusable=a.focusable;this.selectable=a.selectable;this.behavior=a.behavior;this.visible=a.visible;this.visprotected=a.visprotected;
this.toolTip=a.toolTip;this.derivedFrom=a.derivedFrom;this.userModified=a.userModified;this.asyncPostRender=this.formatter=null};Wv.prototype.clone=function(){var a=new Wv;this.ra(a);a.formatter=this.formatter;a.asyncPostRender=this.asyncPostRender;return a};for(var Xv,Yv=ic({ALPHA:"alpha",HB:"color",IP:"ellipse",QB:"geometry",FP:"_node",aQ:"_htmlDescription",fQ:"_interactive",tQ:"lineOfBearing",uQ:"lineOfBearingErrorHigh",vQ:"lineOfBearingErrorLow",eS:"sourceId",fS:"_sourceName",mS:"recordTime",DS:"visibleNonTimeline"}),Zv=0,Rea=Yv.length;Zv<Rea;Zv++)Yv[Zv]="("+Yv[Zv]+")";Xv=new RegExp("^(_.*|"+Yv.join("|")+")$");var Sea={};function $v(a,b,c){A.call(this,a,c);this.l=b}w($v,A);$v.prototype.getContext=function(){return this.l};var Tea=["group","submenu","separator"];function aw(a){this.type=a.type||"item";this.eventType=a.eventType;this.qa=a.qa;this.label=a.label;this.visible=null!=a.visible?a.visible:!0;this.enabled=null!=a.enabled?a.enabled:!0;this.selected=a.selected;this.da=a.da;this.tooltip=a.tooltip;this.Bg=a.Bg;this.sort=a.sort||0;this.Xo=null!=a.Xo?a.Xo:!0;this.children=null!=a.children?a.children.map(function(a){return new aw(a)}):void 0;this.Aa=a.Aa;this.za=a.za}
aw.prototype.find=function(a){if(this.label===a||this.eventType===a)return this;var b=null;if(this.children)for(var c=0,d=this.children.length;c<d&&!(b=this.children[c].find(a));c++);return b};aw.prototype.R=function(a){var b=a instanceof aw?a:new aw(a);this.children||(this.children=[]);if(a=eb(this.children,function(a){return a.type==b.type&&a.eventType==b.eventType&&a.label==b.label&&a.qa==b.qa&&a.tooltip==b.tooltip&&a.sort==b.sort}))return a;this.children.push(b);return b};
aw.prototype.removeChild=function(a){var b=!1;this.children&&(b=ob(this.children,function(b){return b.eventType===a||b.label===a}),this.children.length||(this.children=void 0));return b};
aw.prototype.render=function(a,b){this.Aa&&this.Aa(a,b);var c=this.visible,d=this.enabled,e=null!=this.type?this.type:"item",f=null!=this.tooltip?this.tooltip:"",h="",k="";if(("root"===e||"submenu"===e||"group"===e)&&this.children){this.children.sort(Uea);for(var l=0,m=this.children.length;l<m;l++)k+=this.children[l].render(a,b)}if("root"===e)return k;k||"group"!==e&&"submenu"!==e||(c=!1);if(!c)return h;h+="<li";if("separator"===e)return h+">-</li>";a=[];b="submenu"!==e&&"group"!==e;"group"===e&&
(this.label?a.push("dropdown-header"):a.push("u-dropdown-header__empty"));d||a.push("disabled");b&&a.push("dropdown-item");0<a.length&&(h+=' class="'+a.join(", ")+'"');b&&(h+=' evt-type="'+(this.eventType||this.label)+'"');h=h+((f?' title="'+f+'"':"")+">")+"<div>";this.Bg&&(h+='<span class="text-muted d-inline-block float-right pl-2">'+this.Bg+"</span>");"check"===e&&(h+='<i class="fa fa-fw fa-'+(this.selected?"check-":"")+'square-o"></i>');"radio"===e&&(h+='<i class="fa fa-fw fa-'+(this.selected?
"dot-":"")+'circle-o"></i>');if(this.da)for(l=0,m=this.da.length;l<m;l++)h+=this.da[l];h+='<span class="text-truncate">'+this.label+"</span>";h=h+"</div>"+("submenu"===e?"<ul>":"</li>")+k;"submenu"===e&&(h+="</ul></li>");"group"===e&&(h+="<li>-</li>");return h};function Uea(a,b){return xb(a.sort,b.sort)||xb(a.label,b.label)};function bw(a){C.call(this);this.j=a||window;this.l=Yd(this.j,"resize",this.o,!1,this);this.g=br(this.j||window)}w(bw,C);function Vea(a){return a.g?a.g.clone():null}bw.prototype.J=function(){bw.C.J.call(this);this.l&&(ee(this.l),this.l=null);this.g=this.j=null};bw.prototype.o=function(){var a=br(this.j||window);Ue(a,this.g)||(this.g=a,this.dispatchEvent("resize"))};function cw(a,b,c,d,e){A.call(this,a);this.id=b;this.value=c;this.params=d||null;this.qa=e||null}w(cw,A);function dw(a,b,c){A.call(this,"displayOnboarding");this.title=a;this.l=b;this.config=c||null}w(dw,A);function ew(a,b){sa(a.name)?(this.name=a.name,this.code=fw[a.name]):(this.code=a.code,this.name=Wea(a.code));Ma.call(this,maa("%s %s",this.name,b))}w(ew,Ma);function Wea(a){var b=nc(fw,function(b){return a==b});if(!sa(b))throw Error("Invalid code: "+a);return b}var fw={AbortError:3,EncodingError:5,InvalidModificationError:9,InvalidStateError:7,NotFoundError:1,NotReadableError:4,NoModificationAllowedError:6,PathExistsError:12,QuotaExceededError:10,SecurityError:2,SyntaxError:8,TypeMismatchError:11};function gw(a,b){A.call(this,a.type,b)}w(gw,A);function hw(){C.call(this);this.g=new FileReader;this.g.onloadstart=t(this.Ii,this);this.g.onprogress=t(this.Ii,this);this.g.onload=t(this.Ii,this);this.g.onabort=t(this.Ii,this);this.g.onerror=t(this.Ii,this);this.g.onloadend=t(this.Ii,this)}w(hw,C);g=hw.prototype;g.abort=function(){try{this.g.abort()}catch(a){throw new ew(a,"aborting read");}};g.Xi=function(){return this.g.result};g.getError=function(){return this.g.error&&new ew(this.g.error,"reading file")};
g.Ii=function(a){this.dispatchEvent(new gw(a,this))};g.J=function(){hw.C.J.call(this);delete this.g};function iw(a){var b=new hw,c=Xea(b);b.g.readAsArrayBuffer(a);return c}function Xea(a){var b=new nh;a.H("loadend",Ga(function(a,b){var c=b.Xi(),d=b.getError();null==c||d?a.Gb(d):a.callback(c);b.dispose()},b,a));return b};var jw=E.V("os.file.mime"),kw={type:"application/octet-stream",detect:function(){return Sc(!0)},priority:0};function lw(a,b,c,d){var e=d?vw(d):kw;if(e){e.children||(e.children=[]);d=e.children.length;for(var f=0,h=e.children.length;f<h;f++)if(e.children[f].type===a){d=f;E.hb(jw,'The mime type "'+a+'" was previously registered and will be replaced');break}e.children[d]={type:a,detect:b,priority:c||0};e.children.sort(Yea)}else E.error(jw,'The parent type "'+d+'" could not be found.')}
function Yea(a,b){return a.priority-b.priority}function vw(a,b){b=b||kw;if(b.type===a)return b;if(b.children)for(var c=0,d=b.children.length;c<d;c++){var e=vw(a,b.children[c]);if(e)return e}}function ww(a,b,c,d){c=c||kw;var e=c.detect(a,b,d);e instanceof Kc||console.warn(c.type,"is not using a promise");return e.then(function(e){if(e)return d=e,c.children?c.children.reduce(function(c,e){return c.then(function(c){return c?c:ww(a,b,e,d)})},Sc()).then(function(a){return a?a:c.type}):c.type})}
function xw(a,b,c){b=b||kw;c=c||[];c.push(b.type);if(a===b.type)return c;if(b.children)for(var d=0,e=b.children.length;d<e;d++){var f=xw(a,b.children[d],c);if(f)return f}c.pop()};function yw(a){return a&&3<a.byteLength?1347093252==(new DataView(a.slice(0,4))).getUint32(0):!1}lw("application/zip",function(a,b){return yw(a)?window.zip?new Kc(function(c){var d=b&&b.o?new zip.BlobReader(b.o):new zip.ArrayBufferReader(a);try{zip.createReader(d,function(a){a.getEntries(function(a){c(a)})},function(){c(!0)})}catch(e){console.error(e)}}):Sc(!0):Sc()});
function zw(a){return function(b,c,d){if(d&&Array.isArray(d))for(b=0,c=d.length;b<c;b++)if(a.test(d[b].filename)){var e=!0;break}return Sc(e)}};function Aw(){this.u=this.ab=this.A=this.o=this.j=this.l=this.g=null}var Bw=!1;g=Aw.prototype;g.Pb=function(){return this.g};function Cw(a){var b=a.Pb();b instanceof ArrayBuffer&&(b=Dw(b,a))&&(a.g=b)}g.getFileName=function(){return this.j};g.T=function(){return this.A};g.Ub=function(a){this.A=a};g.Ma=function(){return this.ab};g.Mb=function(a){this.ab=a};function Zea(a){var b=a.o;if(b){var c=new nh;wh(th(iw(b),function(b){a.g=b;return null}),c);return c}}
g.ra=function(a){a=a||{};a.content=this.g;a.contentType=this.l;a.fileName=this.j;a.type=this.A;a.url=this.ab;a.encoding=this.u;return a};g.restore=function(a){this.g=a.content||null;this.l=a.contentType||null;this.j=a.fileName||null;this.A=a.type||null;this.ab=a.url||null;this.u=a.encoding||null};window.zip&&(Modernizr.webworkers?zip.workerScriptsPath="v1541734487/vendor/zip-js/":(zip.useWebWorkers=!1,tr("v1541734487/vendor/zip-js/inflate.js"),tr("v1541734487/vendor/zip-js/deflate.js")));
function Ew(a){var b=new nh;if(a.path&&Bw)b.callback(Fw(a.name,Gw(a.path),a,null));else if(104857600>a.size){var c=Hw(a.name);wh(th(iw(a),Fw.bind(void 0,a.name,c,a)),b)}else b.Gb('File "'+a.name+'" exceeds the size limit ('+(Math.floor(104.8576)+"MB")+") and cannot be imported.");return b}function Fw(a,b,c,d){var e=new Aw;e.g=d;e.j=a;e.Mb(b);c&&(e.l=c.type,e.o=c);return e}function Gw(a){return td?"file:///"+a.replace(/\\/g,"/"):"file://"+a}function Hw(a){return"local://"+a}
function Iw(a){if(!a)return!1;a="string"===typeof a?a:a.Ma();return!!a&&Eb(a,"file://")}function Jw(a){if(!a)return!1;a="string"===typeof a?a:a.Ma();return!!a&&Eb(a,"local://")}function Kw(a){var b=null;a&&Ba(a)&&(b=new Aw,b.restore(a));return b}function Lw(a){return a?a.ra():void 0};function Mw(a,b,c,d){A.call(this,a);this.l=b&&b instanceof Aw?b:null;this.url=b&&"string"===typeof b?b:null;this.config=d||null}w(Mw,A);function Nw(){x.call(this);this.g={};this.keys=[]}w(Nw,x);g=Nw.prototype;g.J=function(){this.keys.forEach(this.wt);Nw.C.J.call(this)};g.handle=function(a,b){if(this.handles(a))if(b){var c=[],d=this.g[a]||[];b=b.split(",");for(var e=0,f=b.length;e<f;e++){var h=decodeURIComponent(b[e]);h&&(-1==d.indexOf(h)&&this.j(a,h),c.push(h))}this.g[a]=c;b=0;for(e=d.length;b<e;b++)f=d[b],-1===c.indexOf(f)&&this.xt(a,f)}else this.wt(a)};g.Xb=function(){return this.keys};g.handles=function(a){return-1<this.keys.indexOf(a)};
g.xt=function(){};g.wt=function(a){if(a in this.g){for(var b=this.g[a],c=0,d=b.length;c<d;c++)this.xt(a,b[c]);delete this.g[a]}};function Ow(){Nw.call(this);this.keys=["tips"]}w(Ow,Nw);Ow.prototype.j=function(a,b){"tips"===a&&M.set("onboarding.showOnboarding","true"===b)};function Pw(){Nw.call(this);this.keys=["file"]}w(Pw,Nw);xa(Pw);Pw.prototype.j=function(a,b){if("file"===a){a:{a=Qw(Y);for(var c=0,d=a.length;c<d;c++)if(a[c].gh(b)){a=a[c];break a}a=null}a?a.isActive()||a.setActive(!0):N.dispatchEvent(new Mw("importUrl",b))}};Pw.prototype.xt=function(a,b){if("file"===a){a=null;for(var c=Qw(Y),d=0,e=c.length;d<e;d++)if(c[d].gh(b)){a=c[d];break}a&&(a.setActive(!1),Rw(Y,a))}};function Sw(a){return a.D()}function $ea(a,b){return b.getName()==a}function Tw(a,b,c){if(void 0!==b&&void 0!==c){b*=c;if(b>a.length)return[];c=b+c;c>a.length&&(c=void 0);return a.slice(b,c)}return a};function Uw(){this.A=zk.get("$rootScope");this.u=zk.get("$location");this.g=null;this.j={};this.o=!1}xa(Uw);Uw.prototype.l=function(){if(this.o){var a=this.g;if(this.g=afa(this))for(var b in this.g){var c=this.j[b];c&&c.forEach(function(a){a.handle(b,this.g[b])},this)}if(a)for(b in a)this.g&&b in this.g||(c=this.j[b])&&c.forEach(function(a){a.wt(b)})}};function Vw(a,b){b.Xb().forEach(function(a){this.j[a]?this.j[a].push(b):this.j[a]=[b]},a);a.l()}
function afa(a){if((a=a.u.search())&&!pc(a))return a;a=(new Xg(window.location)).g;jh(a);var b=a.g;Ug(b);a={};for(var c=0;c<b.g.length;c++){var d=b.g[c];a[d]=b.ha[d]}b={};for(var e in a)b[e]=a[e].join(",");return b};function Ww(){C.call(this);this.j={};this.g={};Vw(Uw.s(),new Ow)}w(Ww,C);xa(Ww);var Xw=E.V("os.ui.onboarding.OnboardingManager"),Yw=["images/"],Zw="v1541734487/";function $w(a,b){var c=M.get(["onboarding",b]);c=a.isEnabled()&&!c;var d=a.j[b];d?c&&Ba(d)&&ax(a,b,d):(a.j[b]=!0,b=new Ni(b),Si(b,"application/json, text/plain, */*"),b.Ua("success",Ga(a.o,c),!1,a),b.Ua("error",a.l,!1,a),b.load())}Ww.prototype.isEnabled=function(){return M.get("onboarding.showOnboarding",!0)};
function ax(a,b,c){M.set(["onboarding",b],!0);a.dispatchEvent(new dw(c.title,c.steps,c.config||null))}Ww.prototype.o=function(a,b){var c=b.target;b=c.g;for(var d=Zw,e=0,f=Yw.length;e<f;e++)b=b.replace(new RegExp(Yw[e],"g"),d+Yw[e]);b=JSON.parse(b);d=c.j.toString();c.dispose();if(b.title&&b.steps){c=b.steps;e=0;for(f=c.length;e<f;e++){var h=c[e],k=h.context;k&&(k in this.g?this.g[k].push(h):this.g[k]=[h])}this.j[d]=b;a&&ax(this,d,b)}else E.error(Xw,'Onboarding configuration at "'+d+'" does not contain required information.')};
Ww.prototype.l=function(a){a=a.target;var b=a.j.toString();a.dispose();E.hb(Xw,"Unable to load onboarding with URI: "+b)};Q.directive("contextOnboarding",[function(){return{restrict:"E",replace:!0,scope:{context:"@"},template:'<button title="Show help" class="btn btn-sm btn-outline-secondary border-0" ng-click="ctrl.show()"><i class="fa fa-fw fa-question"></i></button>',controller:bx,controllerAs:"ctrl"}}]);function bx(a){this.v=a;a.$on("$destroy",this.g.bind(this))}bx.$inject=["$scope"];bx.prototype.g=function(){this.v=null};
bx.prototype.show=function(){var a=Ww.s(),b=this.v.context,c=a.g[b];c?a.dispatchEvent(new dw(c[0].title,c,{width:350})):E.ta(Xw,"No onboarding registered for "+b+".")};bx.prototype.show=bx.prototype.show;var cx={YQ:".js-navtop",XQ:".js-navbottom"},bfa=E.V("os.ui.window");
function dx(){return{restrict:"E",replace:!0,transclude:!0,scope:{id:"@",helpContext:"@",minWidth:"@",maxWidth:"@",minHeight:"@",maxHeight:"@",x:"@",y:"@",width:"@",headerClass:"@",height:"@",label:"@",icon:"@",iconHtml:"@",showClose:"=",showHide:"=",showCollapse:"=",noScroll:"@",overlay:"@",modal:"=",disableDrag:"@",windowContainer:"@",headerBtns:"=?"},templateUrl:"v1541734487/views/window/window.html",controller:ex,controllerAs:"windowCtrl"}}Q.directive("window",[dx]);
function fx(a,b,c,d,e,f){c||(c="#js-window__container");-1==b.indexOf("<")&&(b="<"+b+"></"+b+">");var h="<"+("key"in a?"savedwindow":"window"),k;for(k in a){var l=a[k];"label"===k&&"string"===typeof l&&(l=l.replace(/"/g,"&quot;"));h+=" "+k+'="'+l+'"'}a=h+(">"+b+"</"+("key"in a?"savedwindow":"window")+">");c||(c="#js-window__container");-1==a.indexOf("<")&&(a="<"+a+"></"+a+">");(b=angular.element(c).injector())&&gx(a,c,d||$("[ng-view]").scope()||b.get("$rootScope"),e||b.get("$compile"),f)}
function gx(a,b,c,d,e){c=c.$new();null!=e&&yc(c,e);d(a)(c).appendTo(b)}gx.$inject=["html","parent","$scope","$compile","opt_scopeOptions"];function hx(a){(a=ix(a))&&(a=a.children().first().scope())&&a.windowCtrl&&a.windowCtrl.Ql()}
function jx(a){var b=null,c=a?ix(a):angular.element(".js-window:not(.ng-hide)");if(c){c.removeClass("d-flex");c.addClass("d-none");var d=angular.element(".modal-backdrop");d&&d.addClass("d-none");b=function(){c.removeClass("d-none");c.addClass("d-flex");d&&d.removeClass("d-none")}}return b}function kx(a){a&&(a=a.is(".js-window")?a.children().scope():a.parents(".js-window").children().scope())&&a.windowCtrl.close()}
function ix(a){var b=angular.element(".js-window#"+a);0==b.length&&(b=angular.element('[key="'+a+'"]'));0==b.length&&(b=null);return b}function cfa(a,b){(a=ix(a))&&(a=a.children().first().scope())&&a.windowCtrl&&a.windowCtrl.scope.$broadcast("os.ui.window.params",b)}
function dfa(a,b,c){var d=b.getBoundingClientRect();b=d.x+20;d=d.y+20;if(c){c=c.getBoundingClientRect();var e=a.getBoundingClientRect();b+e.width>c.x+c.width&&(b=c.x);d+e.height>c.y+c.height&&(d=c.y)}$(a).css("left",b+"px");$(a).css("top",d+"px")}
function efa(a){for(var b=$.makeArray($(".js-window")).sort(lx),c=0;c<b.length;c++)if(b[c]===a){b.unshift(b.splice(c,1));break}a=Ab(b,function(a){return $($(a).children()[0]).scope().modal?"modal":"standard"});a.modal&&a.modal.forEach(function(a,b){b=String(1049-b);$(a).draggable("option","zIndex",b);$(a).css("zIndex",b)});a.standard&&a.standard.forEach(function(a,b){b=String(990-b);$(a).draggable("option","zIndex",b);$(a).css("zIndex",b)})}
function lx(a,b){a=$(a).css("zIndex")||0;b=$(b).css("zIndex")||0;return a>b?-1:a<b?1:0}
function ex(a,b,c){x.call(this);this.scope=a;this.element=b;a.windowContainer=a.windowContainer||"#js-window__container";var d=angular.element(a.windowContainer);a.id||(a.id=Zb());b[0].id=a.id;"center"==a.x&&(a.x=(d.width()-a.width)/2);if("center"==a.y){var e=Math.min($(window).height(),d.height());if("auto"==a.height){b.css("top","-20000px");var f=function(){if(!mx(this)){var c=b.height();a.y=(e-c)/2;b.css("top",a.y+"px")}this.Gi()}.bind(this);var h=c(function(){E.hb(bfa,'Window READY event was not fired for "'+
a.label+'"!');k();f()},1E3);var k=a.$on("window.ready",function(){c.cancel(h);f()})}else a.y=(e-a.height)/2}0>a.x&&(a.x=d.width()-Number(a.width)+Number(a.x));0>a.y&&(a.y=d.height()-Number(a.height)+Number(a.y));this.scope.modal&&nx(this);a.disableDrag||(d={containment:a.windowContainer,handle:a.overlay?".js-window__header, .js-window-overlay-content":".js-window__header",start:this.Ny.bind(this),stop:this.Oy.bind(this),scroll:!1},b.draggable(d));if(a.minWidth&&a.maxWidth&&a.minWidth!=a.maxWidth||
a.minHeight&&a.maxHeight&&a.minHeight!=a.maxHeight)d={containment:a.windowContainer,minWidth:Number(a.minWidth)||200,maxWidth:Number(a.maxWidth)||window.screen.availWidth,minHeight:Number(a.minHeight)||100,maxHeight:Number(a.maxHeight)||window.screen.availHeight,handles:"nw, ne, sw, se",start:this.Ny.bind(this),stop:this.Oy.bind(this)},yc(d,a.resizeOptions||{}),b.resizable(d);b.css("width",a.width+"px");d=a.height;"auto"==a.height?b.css("bottom","auto"):d+="px";b.css("height",d);mx(this)||(b.css("left",
a.x+"px"),"center"==a.y&&"auto"==a.height||b.css("top",a.y+"px"));this.j=new bw;this.j.H("resize",this.wL,!1,this);this.g=NaN;this.u=!1;Yd(b[0],"mousedown",this.xB,!0,this);Yd(window,"mousedown",this.A,!0,this);a.overlay&&(Yd(b[0],"mouseover",this.B,!0,this),Yd(b[0],"mouseout",this.l,!0,this),this.l());this.scope.$watch("modal",this.qK.bind(this));this.scope.$on("windowReConstrain",this.Gi.bind(this));this.scope.$on("$destroy",this.dispose.bind(this));this.scope.active=!0;"center"==a.y&&"auto"==a.height||
this.Gi();this.element.focus();c(function(){this.Ql()}.bind(this))}w(ex,x);ex.$inject=["$scope","$element","$timeout"];ex.prototype.J=function(){ex.C.J.call(this);this.u||this.close(!0);de(window,"mousedown",this.A,!0,this);de(this.element[0],"mousedown",this.xB,!0,this);this.scope.overlay&&(de(this.element[0],"mouseover",this.B,!0,this),de(this.element[0],"mouseout",this.l,!0,this));this.scope.modal&&ox(this);z(this.j);this.scope=this.element=this.j=null};
function nx(a){if(!a.o){var b=$("body");a.o=b.append('<div class="modal-backdrop show"></div>');b.addClass("modal-open")}}function ox(a){a.o&&($("body").removeClass("modal-open"),$(".modal-backdrop").first().remove(),a.o=null)}ex.prototype.Ql=function(){this.element&&efa(this.element[0])};ex.prototype.bringToFront=ex.prototype.Ql;
function mx(a){if(a.scope&&a.element){var b=a.scope.id;if(b&&(b=$.makeArray($(".js-window#"+b)).sort(lx),b=Fca(b,function(a){return a!==this.element[0]}.bind(a))))return dfa(a.element[0],b,document.querySelector(a.scope.windowContainer||"#js-window__container")),!0}return!1}ex.prototype.A=function(){this.scope.active=!1;R(this.scope)};
ex.prototype.B=function(){var a=this.element.find(".js-window__header"),b=this.element.find(".ui-resizable-se");a&&(b.css("visibility","visible"),a.css("visibility","visible"),this.element.removeClass("modal-borderless"))};ex.prototype.l=function(){var a=this.element.find(".js-window__header");this.element.toggleClass(".ui-resizable-se");var b=this.element.find(".ui-resizable-se");a&&(b.css("visibility","hidden"),a.css("visibility","hidden"),this.element.addClass("modal-borderless"))};
ex.prototype.close=function(a){this.u=!0;var b=this.element.scope()||this.scope;a&&b.$broadcast("windowCancel",this.element);b.$broadcast("windowClosing",this.element);b.$emit("windowClose",this.element);a=this.element;this.Xa()||this.scope.$parent.$destroy();a.remove()};ex.prototype.close=ex.prototype.close;
ex.prototype.toggle=function(){if(!this.scope.modal){var a=this.element.find(".js-window__wrapper");isNaN(this.g)?(this.element.resizable("option","disabled",!0),this.g=this.element.outerHeight(),a.toggle(),a=this.element.find(".js-window__header"),this.element.height(a.outerHeight()),this.scope.collapsed=!0,this.element.find(".js-window__header").addClass("collapsed")):(this.element.height(this.g),this.g=NaN,a.toggle(),this.element.resizable("option","disabled",!1),this.Gi(),this.scope.collapsed=
!1,this.element.find(".js-window__header").removeClass("collapsed"))}};ex.prototype.toggle=ex.prototype.toggle;ex.prototype.hide=function(){this.scope.id&&(jx(this.scope.id),N.dispatchEvent(new cw("toggleUI",this.scope.id)))};ex.prototype.hide=ex.prototype.hide;g=ex.prototype;g.jd=function(){};g.Ny=function(){this.scope.$emit("windowDragStart");angular.element("iframe").addClass("u-pointer-events-none")};
g.Oy=function(a,b){this.jd(a,b);this.scope.$emit("windowDragStop");"auto"==this.scope.height&&this.element.css("height","auto");angular.element("iframe").removeClass("u-pointer-events-none");this.Gi()};g.qK=function(a,b){void 0!==a&&a!=b&&(a?nx(this):ox(this))};g.xB=function(){this.scope.modal||this.Ql();this.scope.active||(this.scope.active=!0,R(this.scope))};g.wL=function(){this.Gi()};
g.Gi=function(){var a=parseFloat(this.element.css("left").replace("px","")),b=parseFloat(this.element.css("top").replace("px","")),c=parseFloat(this.element.css("width").replace("px","")),d=parseFloat(this.element.css("height").replace("px","")),e=$(this.scope.windowContainer).offset().top,f=Vea(this.j);c>f.width&&(c=Math.max(f.width,parseFloat(this.scope.minWidth||this.scope.width||0)),this.element.css("width",c+"px"));d>f.height&&(d=Math.max(f.height,parseFloat(this.scope.minHeight||this.scope.height||
0)),this.element.css("height",d+"px"));0>a?this.element.css("left","0px"):a+c>f.width&&(a=Math.max(f.width-c,0),this.element.css("left",a+"px"));b<e?this.element.css("top",e+"px"):b+d>f.height&&(b=Math.max(f.height-d,e),this.element.css("top",b+"px"));if("auto"==this.scope.height){var h=0;ic(cx).forEach(function(a){h+=$(a).outerHeight()});a=f.height-h;this.element.find(".modal-content").css("max-height",a)}};g.FI=function(a,b){a=$(a.target).parents(".js-window");b.onClick(a)};
ex.prototype.onHeaderBtnClick=ex.prototype.FI;function px(a){C.call(this);this.B=a;this.o=void 0;this.g={};this.u=void 0;this.A=new Fh(this.PL,25,this);this.l=!1}w(px,C);g=px.prototype;g.J=function(){px.C.J.call(this);this.close();this.A.dispose()};g.Ha=function(){return this.B};
g.yn=function(a){if(!$(a.target).closest("#menu").length){var b=this.g.of,c=this.g.of,d="string"===typeof b?b:"";try{var e=$(a.target).closest(b[0]).length||$(a.target).closest(c).length}catch(f){e=$(a.target).closest(d).length?!0:!1}e&&"#map-container"!=b&&".c-svg-timeline"!=b?this.close(!1,!0):this.close()}};
g.open=function(a,b,c,d){if(this.l)this.close(d);else if(this.close(d),this.o=a||void 0,this.g=b||{},this.u=c||this,a=this.Ha().render(this.o,this.u),a=('<ul id="menu" class="c-menu dropdown-menu show">'+a+"</ul>").replace(/<ul><li>-<\/li>/g,"<ul>"),a=a.replace(/<li>-<\/li><\/ul>/g,"</ul>"),/<li(\s|>)/.test(a)){this.j=$(a);this.g.collision=this.g.collision||"fit";$(document.body).append(this.j.menu({items:"> :not(.dropdown-header)",select:this.OJ.bind(this)}));if(a=rr(this.g.of[0],"navbar"))a=ab(a.className.split(" "),
function(a){return-1!=a.indexOf("bg-")}),a.length&&this.j.wrap('<div id="js-menu__wrapper" class="'+a.join(" ")+'"></div>');this.j.position(this.g);this.A.start();(null!=d?d:1)&&this.dispatchEvent("menu:open");this.l=!0;R(zk.get("$rootScope"))}};g.PL=function(){qx(this);var a=document;Yd(a,"mousedown",this.yn,!0,this);Yd(a,"pointerdown",this.yn,!0,this)};function qx(a){var b=document;de(b,"mousedown",a.yn,!0,a);de(b,"pointerdown",a.yn,!0,a)}
g.OJ=function(a,b){(b=b.item.attr("evt-type"))&&(a=this.Ha().find(b))&&a.enabled&&-1===Tea.indexOf(a.type)&&(b=new $v(b,this.o,this.u),a.za?a.za(b):this.dispatchEvent(b),a.qa&&O(P.s(),a.qa,1),a.Xo&&this.close())};g.close=function(a,b){this.j&&((null!=a?a:1)&&N&&N.dispatchEvent(rx),this.j.unwrap("#js-menu__wrapper"),this.j.remove(),this.j=null);this.o=void 0;this.g={};this.u=void 0;qx(this);this.l=b?this.l:!1;R(zk.get("$rootScope"))};
g.dispatchEvent=function(a){var b=px.C.dispatchEvent.call(this,a);a=a.defaultPrevented?!1:N.dispatchEvent(a);return b||a};function sx(){this.description="";this.g={}}sx.prototype.fb=function(a){this.description=a};sx.prototype.qb=function(){return this.description};function tx(){sx.call(this)}w(tx,sx);
tx.prototype.Fa=function(a){var b=ux(this,a);a={target:"_blank"};var c=window;var d=b instanceof Vj?b:Zj("undefined"!=typeof b.href?b.href:String(b));b=a.target||b.target;var e=[];for(f in a)switch(f){case "width":case "height":case "top":case "left":e.push(f+"="+a[f]);break;case "target":case "noopener":case "noreferrer":break;default:e.push(f+"="+(a[f]?1:0))}var f=e.join(",");ld()&&c.navigator&&c.navigator.standalone&&b&&"_self"!=b?(f=c.document.createElement("A"),d instanceof Vj||d instanceof Vj||
(d=d.Af?d.Ce():String(d),Yj.test(d)||(d="about:invalid#zClosurez"),d=ak(d)),f.href=Xj(d),f.setAttribute("target",b),a.noreferrer&&f.setAttribute("rel","noreferrer"),a=document.createEvent("MouseEvent"),a.initMouseEvent("click",!0,!0,c,1),f.dispatchEvent(a)):a.noreferrer?(c=c.open("",b,f),a=Xj(d),c&&(Laa&&Qb(a,";")&&(a="'"+a.replace(/'/g,"%27")+"'"),c.opener=null,vi("b/12014412, meta tag with sanitized URL"),a='<META HTTP-EQUIV="refresh" content="0; url='+Ob(a)+'">',a=qk(a,null),c.document.write(ok(a)),
c.document.close())):(c=c.open(Xj(d),b,f))&&a.noopener&&(c.opener=null)};tx.prototype.matches=function(a,b,c){try{if(null!=a){var d=a.sourceId;var e=a.sourceUrl}if(this.ab&&this.qb()){var f=this.g.val,h=this.g.col,k=this.g.url,l=this.g.id;return d&&l&&!l.test(d)||e&&k&&!k.test(e)||b&&h&&!h.test(b.j())&&!h.test(b.S())||f&&!f.test(c?c.toString():"")?!1:!0}return!1}catch(m){return!1}};tx.prototype.mm=function(a){return ux(this,a)};
function ux(a,b){var c=a.g.val;c&&(c=c.exec(b))&&c[0]&&(b=c[0]);c=a.g.search;var d=a.g.replace;b&&c&&null!==d&&(b=b.replace(c,d));return a.ab.replace("%s",b)};Q.directive("columnactions",[function(){return{restrict:"E",transclude:!0,templateUrl:"v1541734487/views/columnactions/columnactionprompt.html",controller:vx,controllerAs:"columnActionPrompt"}}]);function vx(a,b){this.v=a;this.L=b;this.matched=this.v.matched;a.$on("$destroy",this.g.bind(this))}vx.$inject=["$scope","$element"];vx.prototype.g=function(){this.v=this.L=null};vx.prototype.ED=function(a,b){a.Fa(b)};vx.prototype.executeMatch=vx.prototype.ED;vx.prototype.qb=function(a){return a.qb()};
vx.prototype.getDescription=vx.prototype.qb;vx.prototype.close=function(){kx(this.L)};vx.prototype.close=vx.prototype.close;function wx(a,b,c){a={matched:a,colDef:c,value:b,doneText:"Close",doneIcon:"fa fa-check"};b={label:Ub("Select a Column Action for ",c.S()," = ",b),icon:"fa fa-action",x:"center",y:"center",width:"450",height:"350",modal:"true","show-close":"true","no-scroll":"true"};fx(b,'<columnactions class="d-flex flex-fill"></columnactions>',void 0,void 0,void 0,a)};function xx(){C.call(this);this.g={};var a=M.get("columnActions");if(a)for(var b in a){var c,d=c=void 0,e=a[b];if(e)switch(e.type){case "url":var f=d=new tx,h=e.regex;for(c in h)f.g[c]="replace"!=c?new RegExp(h[c]):h[c];d.fb(e.description);d.ab=e.action}(c=d)&&(this.g[b]=c)}}w(xx,C);xa(xx);xx.prototype.Qi=function(a,b,c){var d=[],e;for(e in this.g){var f=this.g[e];f&&f.matches(a,b,c)&&d.push(f)}return d};function yx(a){if("object"!==typeof a){if(null!=a&&xq.test(a)&&!ffa.test(a)){var b="",c=a.split(" "),d=1;1===c.length?xq.test(a)&&(c=Ak(a),b=Bq(c,"_blank","slick-cell-link",c)):$a(c,function(a){xq.test(a)&&(a=Ak(String(a)),a=Bq(a,"_blank","slick-cell-link",a,"["+d+"]"),d++);b=b.concat(a)+" "});""!==b&&(a=b.trim())}}else a=kg(a,"os.time.TimeInstant")?a.toString():"";return a};function zx(a,b){this.g=a;this.l=b}zx.prototype.S=function(){return this.l||this.g.name};zx.prototype.j=function(){return this.l||this.g.field};function gfa(a,b,c,d,e){b=$(b).find(".col-act-mult");0<b.length&&(c=b.data().colvalue,b.click(Ga(hfa,c,e,{sourceId:a.sourceId})))}function hfa(a,b,c,d){null==c&&(c={});b=new zx(b,d.value);c=xx.s().Qi(c,b,a);wx(c,a,b)};function Ax(a,b,c){return c?c:""}function ifa(a,b,c){return c?'<i class="fa fa-circle" style="color:'+c+'"></i>':'<i class="fa fa-adjust c-formatter__adjust" title="Multiple Colors Present"></i>'}var ffa=/<a /;function Bx(a,b,c,d,e,f){c=yx(c);a=(f||jfa)(a,b,c,d,e,!0);return Ub(c,a)}
function jfa(a,b,c,d,e,f){a="";!0!==f&&(a=c);f=xx.s().Qi(null,new zx(d),c);1===f.length?a=Ub(a," <div ",'class="col-act col-act-single d-inline-block" data-colvalue="',c,'">','<a class="os-colact-anchor" href="',f[0].mm(c),'" target="_blank">','<i class="fa fa-external-link-square" title="',f[0].qb(),'"></i></a></div>'):1<f.length&&(a=Ub(a," <div ",'class="col-act col-act-mult d-inline-block" data-colvalue="',c,'">','<span title="Multiple Column Actions" ','class="fa-stack mult-colaction align-baseline">',
'<i class="fa fa-square-o fa-stack-1x c-formatter__column-action-square"></i>','<i class="fa fa-stack fa-external-link-square"></i></span></div>'),d.asyncPostRender=Ga(gfa,e));return a};var Cx={TIME:{order:-95,width:Bk("0000-00-00 00:00:00Z","ui-widget").width+10},MGRS:{order:-90,width:Bk("00WWW0000000000","ui-widget").width+10},LAT_DMS:{order:-85,width:Bk("00\u00b0 00' 00.00\" N","ui-widget").width+10},LON_DMS:{order:-84,width:Bk("000\u00b0 00' 00.00\" W","ui-widget").width+10},LAT:{order:-83,width:Bk("-00.000000","ui-widget").width+10},LON:{order:-82,width:Bk("-000.000000","ui-widget").width+10},LAT_DDM:{order:-81,width:Bk("00\u00b0 00.00' N","ui-widget").width+10},LON_DDM:{order:-80,
width:Bk("000\u00b0 00.00' W","ui-widget").width+10},ALTITUDE:{order:-79,width:Bk("-000000.000","ui-widget").width+10},SEMI_MAJOR:{order:-78,width:Math.max(Bk("-000.000000","ui-widget").width,Bk("SEMI_MAJOR","ui-widget ui-state-default").width+20)},SEMI_MINOR:{order:-77,width:Math.max(Bk("-000.000000","ui-widget").width,Bk("SEMI_MINOR","ui-widget ui-state-default").width+20)},ORIENTATION:{order:-76,width:Math.max(Bk("-000.000000","ui-widget").width,Bk("ORIENTATION","ui-widget ui-state-default").width+
20)},Name:{order:-60}};function Dx(a){var b=a.header?20:0;if(!a.width){var c=Cx[a.name];a.width=c&&c.width?c.width+b:Math.max(80,Bk(a.name).width+b+20)}}function Ex(a,b){Dx(a);Dx(b);var c=Cx[a.name],d=Cx[b.name];c||(c=Cx[a.derivedFrom]);d||(d=Cx[b.derivedFrom]);return xb(c?c.order:0,d?d.order:0)}function Fx(a,b){return xb(a.name,b.name)}function Gx(a,b){return Lb(a.name,b.name)}function Hx(a){this.visible=!!a&&!!a.xe}
function kfa(a){var b=this.visible=!1;if(a&&a.xe&&a.columns)for(var c=0;c<a.columns.length;c++)if(a.columns[c].visible)if(b){this.visible=!0;break}else b=!0}function Ix(a,b){for(var c=null,d=0,e=a.length;d<e;d++)if(a[d].field==b||a[d].name==b){c=a[d];break}return c}function Jx(a,b,c){return c[a]==b}function lfa(a,b,c){return b[a]==c[a]||b[a]>c[a]?1:-1}function Kx(a){return a.userModified}
function mfa(a,b){var c={};a.forEach(function(a,b){c[a.name]={xe:a,index:b}});b.forEach(function(a){var b=c[a.name];b&&a.restore(b.xe)});b.sort(function(a,b){a=c[a.name];b=c[b.name];return a&&b?xb(a.index,b.index):a?-1:b?1:0})};var Lx={};function nfa(a){var b=a.g;if(b&&!L.s().Qa()){var c=0,d=b.La().splice(0,b.La().length);if(d&&0<d.length){var e=new je(250);e.H("tick",function(){5<c?(Mx(b,d),e.dispose()):(Mx(b,c%2?d:null),c++)});e.start()}}else(a=L.s().W(a.D()))&&Ag(a)}function ofa(a){var b=new Wv(a.name);b.type=a.type;return b}function pfa(a,b){a=a.get("zIndex")||0;b=b.get("zIndex")||0;return xb(b,a)}
function qfa(a){if(a instanceof hq){a=a.get("recordTime");var b=vg.s();if(F(a,"os.time.ITime")&&!Nx(b,a))return a}return null}function rfa(a){if(a instanceof hq){a=a.get("recordTime");var b=vg.s();if(F(a,"os.time.ITime")&&Nx(b,a))return a}return null}function Ox(a,b){var c=null;if(a&&(a=a.getColumns())&&0<a.length){c=[];for(var d=0;d<a.length;d++){var e=a[d],f=e.field;!e.visible||Hb(Tb(f))||gb(c,f)||!b&&Px(f)||c.push(f)}}return c}
var sfa=function(a,b,c){var d;return function(){var e=this,f=arguments;c&&!d&&a.apply(e,f);clearTimeout(d);d=setTimeout(function(){d=null;c||a.apply(e,f)},b)}}(function(a){N.dispatchEvent(Qx);a="The maximum feature count for the application has been reached ("+a+"). Further features will not be added until some are removed. Consider narrowing your time range, applying filters, shrinking your query areas, or removing some feature layers.";var b=L.s();!b.Qa()&&b.vc()&&(a+=" Switching to 3D mode will also allow more data to be loaded. To enable 3D mode, right-click the map and choose Toggle 2D/3D Mode.");
rj(qj.s(),a,Rh)},5E3,!0);var Rx=/^desc(ription)?$/i;function Sx(a,b,c,d){qp.call(this,null);this.center=a;this.B=b;this.G=null!=c?c:b;this.orientation=d||0;a=Vp(this.center,this.B,this.G,this.orientation);this.ic([a]);Ap(this)}w(Sx,qp);Sx.prototype.clone=function(){return new Sx(this.center,this.B,this.G,this.orientation)};function tfa(){if(!od)return!1;try{return new ActiveXObject("MSXML2.DOMDocument"),!0}catch(a){return!1}}var Tx=od&&tfa();function Ux(a,b){if(b&&!a)throw Error("Can't create document with namespace and no root tag");if(document.implementation&&document.implementation.createDocument)return document.implementation.createDocument(b||"",a||"",null);if(Tx){var c=Vx();if(c)return a&&c.appendChild(c.createNode(1,a,b||"")),c}throw Error("Your browser does not support creating new documents");}
function Wx(a){if("undefined"!=typeof DOMParser)return(new DOMParser).parseFromString(a,"application/xml");if(Tx){var b=Vx();b.loadXML(a);return b}throw Error("Your browser does not support loading xml documents");}function Xx(a){var b=a.xml;if(b)return b;if("undefined"!=typeof XMLSerializer)return(new XMLSerializer).serializeToString(a);throw Error("Your browser does not support serializing XML documents");}function Yx(a,b){for(var c in b)b.hasOwnProperty(c)&&a.setAttribute(c,b[c])}
function Vx(){var a=new ActiveXObject("MSXML2.DOMDocument");a.resolveExternals=!1;a.validateOnParse=!1;try{a.setProperty("ProhibitDTD",!0),a.setProperty("MaxXMLSize",2048),a.setProperty("MaxElementDepth",256)}catch(b){}return a};function Zx(a,b,c,d){A.call(this,a);this.id=b;this.l=c;this.u=d}w(Zx,A);jg["ol.Feature"]=hq;g=hq.prototype;g.set=function(a,b){void 0===b?delete this.la[a]:this.la[a]=b};g.kf=function(a){delete this.la[a]};g.clone=function(){var a=new hq;a.qc(this.la,!0);Zu(a,this.de);var b=this.Z();null!=b&&a.tb(b.clone());a.ga(this.D());return a};g.zb=function(a){this.Qj=(this.Pc=a)?this.FE:void 0};g.FE=function(a){return this.Pc instanceof ds?[this.Pc]:"function"==typeof this.Pc?(a=this.Pc(a))?a instanceof ds?[a]:a:[]:this.Pc};g.hc=!1;var $x=0;
hq.prototype.ga=function(a){this.ma=a;null==this.id&&(this.id=$x,$x++);this.ia()};function ay(a,b){return kg(a,"ol.Feature")?a.la[b]:a[b]}function by(a,b,c){kg(a,"ol.Feature")?void 0===c?a.kf(b,!0):a.set(b,c,!0):void 0!==c?a[b]=c:delete a[b]}function cy(a,b,c){var d=void 0,e=Number.MAX_VALUE,f=Number.MAX_VALUE;a=kg(a,"ol.Feature")?a.la:a;for(var h in a)(a=h.match(b))&&(a.index<f||a.index==f&&h.length<d.length)&&(d=h,f=a.index,h==c&&(e=f));if(null==d||f>e)d=c;return d}
function ufa(a){for(var b=0,c=a.length;c--;){var d=a[c];b=Math.max(d.lc(),b)}for(c=a.length;c--;)d=a[c],d.lc()<b&&a.splice(c,1);return a}function dy(a){if(!a)return null;var b=/^(Column )(\d+)$/.exec(a);return b&&3==b.length?"COLUMN_"+(Number(b[2])+1):a}function ey(a){if(!a)return null;var b=/^(COLUMN_)(\d+)$/.exec(a);return b&&3==b.length?"Column "+(Number(b[2])-1):a};function fy(){this.g={}}xa(fy);var gy=E.V("os.im.mapping.MappingRegistry");function hy(a,b,c){a.g[b]?E.error(gy,"A mapping with key: "+b+" was already applied. Additional mappings with the same name are not allowed."):a.g[b]=c}fy.prototype.restore=function(a){var b=this.g[a.id];if(b)return b=new b,b.restore(a),b;E.error(gy,"There was no class associated with the configuration object.");return null};function iy(){this.g={};this.j=fy.s()}xa(iy);var jy=E.V("os.im.mapping.MappingManager");function ky(a,b){var c=b.D();c?a.g[c]=b:E.error(jy,'Unable to register mapping without an identifier! Mapping label is "'+b.ba()+'".')}iy.prototype.Wd=function(a){var b=[],c;for(c in this.g){var d=this.g[c].Wd(a);d&&b.push(d)}return vfa(b)};function vfa(a){var b=[];if(a){a=Ab(a,function(a){return a.tk()||"default"});for(var c in a)b="default"==c?b.concat(a[c]):b.concat(ufa(a[c]))}return b}
function ly(a,b){a={};for(var c=0,d=b.length;c<d;c++)a[c]=b[c].ra();return a}function my(a,b){var c=[],d;for(d in b){var e=b[d];var f=null;if("id"in e){var h=e.id,k=a.g[h]||null;if(k)try{var l=k.clone();l.restore(e);f=l}catch(m){E.error(jy,m.message,m)}else E.error(jy,'Failed to restore mapping: no mapping registered with id "'+h+'".')}else E.error(jy,"Failed to restore mapping: persisted mapping does not have an id:\n"+Fd(e));(e=f)&&c.push(e)}return c}
iy.prototype.sc=function(a){for(var b=ny("mappings"),c=0,d=a.length;c<d;c++)try{var e=a[c];b.appendChild(e.sc())}catch(f){E.error(jy,"Failed to restore mapping from xml:\n"+Fd(e))}return b};iy.prototype.fd=function(a){var b=a.getAttribute("type");var c=this.j.g[b];c?b=new c:(E.error(gy,"There was no class associated with the key: "+b),b=null);if(b)return b.fd(a),b;E.error(jy,"There was no class associated with the configuration object.");return null};for(var oy,py=ic({gP:"arrowSize",hP:"arrowUnits",kP:"centerShape",HB:"color",FILL:"fill",bQ:"icon",cQ:"image",jQ:"labels",kQ:"labelColor",lQ:"_labelGeometry",mQ:"labelSize",rQ:"_lastShowLabels",zQ:"lobBearingColumn",AQ:"lobBearingError",BQ:"lobBearingErrorColumn",CQ:"lobColumnLength",DQ:"lobLength",IQ:"lobLengthType",EQ:"lobLengthColumn",JQ:"lobLengthUnits",FQ:"lobLengthError",GQ:"lobLengthErrorColumn",HQ:"lobLengthErrorUnits",bR:"opacity",vR:"replaceStyle",OR:"shape",QR:"showArrow",RR:"showEllipse",
TR:"showError",SR:"showEllipsoids",UR:"showGroundRef",VR:"showLabels",WR:"showLabelColumns",bS:"showRotation",HR:"rotationColumn",jC:"size",dS:"skipLayerStyle",hS:"stroke",iS:"styleUrl"}),qy=0,wfa=py.length;qy<wfa;qy++)py[qy]="("+py[qy]+")";oy=new RegExp("^(_.*|"+py.join("|")+")$");for(var ry,sy=ic({MP:"_style",NR:"_selectStyle",TP:"_highlightStyle",tP:"_customHighlightStyle",iQ:"_labelStyle"}),ty=0,xfa=sy.length;ty<xfa;ty++)sy[ty]="("+sy[ty]+")";ry=new RegExp("^("+sy.join("|")+")$");function uy(a){return JSON.stringify(String(a))}function vy(a){a=String(a).replace(/([-()\[\]{}+?$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08");return a=a.replace(new RegExp(Rb("*"),"g"),".*")};var yfa=/^(name|title)$/i;function wy(a,b,c,d){var e=NaN;if(a){b&&(e=Pq(a.la[b]));if(isNaN(e))c&&(e=Pq(a.la[c]),d&&(f=a.la[d]));else var f="nmi";isNaN(e)||(f&&mc(Kt,f)?a=Ot(e,"m",f):(a=e,250>a&&(a*=1852)),e=a)}return isNaN(e)?void 0:e}
function xy(a,b){if(!b){var c=a.la.ellipse;if(c instanceof Sx)return c}b=a?a.Z():null;if(b instanceof hp){var d=Ml(Bo(b),S);if(d){var e=(e=wy(a,"SEMI_MAJOR (nmi)*","SEMI_MAJOR","SEMI_MAJ_UNITS"))?Math.abs(e):void 0;var f=(f=wy(a,"SEMI_MINOR (nmi)*","SEMI_MINOR","SEMI_MINOR_UNITS"))?Math.abs(f):void 0;var h=Pq(a.get("ORIENTATION"));h=isNaN(h)?void 0:h;var k=(k=wy(a,void 0,"RADIUS","RADIUS_UNITS"))?Math.abs(k):void 0;e&&f&&null!=h?c=new Sx(d,e,f,h):k&&(c=new Sx(d,k))}}a.set("ellipse",c||b);return c}
function yy(a,b,c){return b?null!=a.la[b]&&(c=parseFloat(a.la[b]),c==a.la[b])?c:NaN:c?c:NaN}
function zy(a,b,c){if(!b){var d=a.la.lineOfBearing;if(d instanceof Mo)return}b=a?a.Z():null;if(c&&b instanceof hp){var e=Ml(Bo(b),S),f=yy(a,c.hu),h="column"==c.Aq?yy(a,c.Qv,0):1;if(e&&null!=f&&!isNaN(f)&&h){f%=360;f+=0>=f?360:0;var k=[];3>e.length&&(e[2]=0);var l=Math.min(Math.abs(Ot(h,"m",c.Tv||"m")*(("column"==c.Aq?c.su:c.length)||1E3)),19E6),m=osasm.geodesicDirect(e,0>h?(f+180)%360:f,l);m[2]=e[2];h=osasm.geodesicInverse(e,m).finalBearing;d=new Jo([e,m],"XYZM");d=oq(d);d instanceof Jo&&k.push(d.getCoordinates());
if(c.MA){var n=Math.min(Ot(c.fu||100,"m",c.gu||"m"),19E6),p=osasm.geodesicDirect(m,h+180-45,n);p.push(e[2]);p=new Jo([m,p],"XYZM");p=oq(p);p instanceof Jo&&k.push(p.getCoordinates());n=osasm.geodesicDirect(m,h+225,n);n.push(e[2]);n=new Jo([m,n],"XYZM");n=oq(n);n instanceof Jo&&k.push(n.getCoordinates())}0<k.length&&(d=new Mo(k,"XYZM"),d.set("_normalized",!0),Ap(d));p=n=null;if(c.OA){k=c.Sv||"m";var r=Math.abs(yy(a,c.Rv)),u=void 0!==c.zq?c.zq:1,v=Math.abs(yy(a,c.iu)),y=void 0!==c.So?c.So:1;if(null===
v||isNaN(v))v=1;if(null===r||isNaN(r))r=1;k=Ot(r,"m",k)*u;0<v&&0<y?(h=Tp(e,l+k,Math.min(v*y*2,360),f),n=new Jo(h,"XYZM"),n=oq(n),n.set("_normalized",!0),Ap(n),0<r&&0<u&&(e=Tp(e,l-k,Math.min(v*y*2,360),f),p=new Jo(e,"XYZM"),p=oq(p),p.set("_normalized",!0),Ap(p))):0<r&&0<u&&(l=osasm.geodesicDirect(m,h+180,-k),f=osasm.geodesicDirect(l,h+90,-k),f.push(e[2]),l=osasm.geodesicDirect(l,h-90,-k),l.push(e[2]),n=new Jo([l,f],"XYZM"),n=oq(n),n.set("_normalized",!0),Ap(n),f=osasm.geodesicDirect(m,h+180,k),m=osasm.geodesicDirect(f,
h+90,k),m.push(e[2]),h=osasm.geodesicDirect(f,h-90,k),h.push(e[2]),p=new Jo([h,m],"XYZM"),p=oq(p),p.set("_normalized",!0),Ap(p))}Rs(d);a.set("lineOfBearingErrorHigh",n);a.set("lineOfBearingErrorLow",p)}c.NA?xy(a):a.set("ellipse",null)}a.set("lineOfBearing",d||b)}
function Ay(a,b,c){var d=!1;c=c||a.Z();if(c instanceof hp&&(c=c.flatCoordinates,1<c.length)){c=Ml(c,S);if(b||void 0==a.la.MGRS)a.la.MGRS=osasm.toMGRS(c),d=!0;if(b||void 0==a.la.LAT)a.la.LAT=c[1],d=!0;if(b||void 0==a.la.LON)a.la.LON=c[0],d=!0;(b||void 0==a.la.ALTITUDE)&&c[2]&&(a.la.ALTITUDE=c[2],d=!0);if(b||void 0==a.la.LAT_DMS)a.la.LAT_DMS=eq(c[1],!1),d=!0;if(b||void 0==a.la.LON_DMS)a.la.LON_DMS=eq(c[0],!0),d=!0;if(b||void 0==a.la.LAT_DDM)a.la.LAT_DDM=fq(c[1],!1),d=!0;if(b||void 0==a.la.LON_DDM)a.la.LON_DDM=
fq(c[0],!0),d=!0}d&&a.ia()}function By(a,b){return a?a.get(b):void 0}function Cy(a){if(a)for(var b in a.la)if(yfa.test(b)){var c=a.la[b];if(c&&"string"===typeof c){var d=c;break}}return d}var zfa="la";function Afa(a,b){return a+"."+zfa+"["+uy(b)+"]"}function Px(a){return Xv.test(a)||ry.test(a)||oy.test(a)}function Dy(a){var b=null;a&&(a=a.get("sourceId"))&&(b=L.s().W(a));return b}
function Ey(a,b){var c=null;null!=b&&(b=b.N(),kg(b,"os.source.Vector")&&(c=b));null==c&&null!=a&&(a=a.get("sourceId"))&&(c=Fy.N(a));return c}function Gy(a,b,c){if(a){var d=a.la.color;if(!d){var e=Hy(a);e&&e.replaceStyle&&(d=Iy(e,!1))}if(!d&&(e=a.la._style))if(Array.isArray(e))for(var f=0;!d&&f<e.length;f++)d=Iy(e[f])||void 0;else d=Iy(e)||void 0;if(d)return d;if(b)return b.Ja();if(null!==b&&(a=Ey(a)))return a.Ja()}return void 0!==c?c:"rgba(255,255,255,1)"}
function Jy(a,b,c){var d=a.la.shape;(!d||c)&&(a=b||Ey(a))&&kg(a,"os.source.Vector")&&(a=a.Jd,c||a!==Ky)&&(d=a);return d}function Ly(a,b,c){var d=a.la.centerShape;(!d||c)&&(a=b||Ey(a))&&kg(a,"os.source.Vector")&&(a=a.Sf,c||a!==Ky)&&(d=a);return d}function My(a){return a&&!1!==a.la.showLabels?(a.la.showLabels=!1,!0):!1}function Ny(a){return a&&!0!==a.la.showLabels?a.la.showLabels=!0:!1}
function Oy(a,b){b||(b=Ey(a));!b&&Py(L.s(),a)&&(b=L.s().W("draw").N());var c=a.D();c&&b&&b.Ad(c)&&(b.dispatchEvent(new Vu("changefeature",a)),b.ia())}function Qy(a,b,c){if(c=c||Ey(a[0]))for(var d=0,e=a.length;d<e;d++){var f=a[d];if(f&&!(f instanceof Ry)){var h=Hy(f,c),k=f.la._style||h||Sy;Ty(k,b);h=Uy(f,k,h);f.zb(h)}}}function Bfa(a,b){b=b.la.recordTime;a=a.la.recordTime;b&&a?(b=b.Sa(),a=a.Sa(),a=b>a?1:b<a?-1:0):a=b?1:a?-1:0;return a}function Vy(a,b){return a.ma>b.ma?1:a.ma<b.ma?-1:0};var Ky="Default",Wy={Default:void 0,Point:{config:{image:{type:"circle"}}},Square:{config:{image:{type:"shape",subType:"square"}}},Triangle:{config:{image:{type:"shape",subType:"triangle"}}},Icon:{config:{image:{type:"icon"}}},Ellipse:{config:{geometry:"ellipse"}},"Ellipse with Center":{config:{geometries:["geometry","ellipse"]}},"Selected Ellipse":{selectedConfig:{geometry:"ellipse"}},"Selected Ellipse with Center":{selectedConfig:{geometries:["geometry","ellipse"]}},"Line of Bearing":{config:{geometries:["lineOfBearing",
"lineOfBearingErrorHigh","lineOfBearingErrorLow","ellipse"]}},"Line of Bearing with Center":{config:{geometries:["lineOfBearing","lineOfBearingErrorHigh","lineOfBearingErrorLow","ellipse","geometry"]}}},Xy=/line of bearing/i,Yy=/ellipse/i,Zy=/center/i,Cfa=/selected/i,$y=/default/i,az={},bz;for(bz in Wy)az[bz]=Zy.test(bz);
var Sy={image:{type:"circle",radius:3,fill:{color:"rgba(255,255,255,1)"}},stroke:{width:3,color:"rgba(255,255,255,1)"}},cz={image:{color:"rgba(255,0,0,1)",fill:{color:"rgba(255,0,0,1)"}},stroke:{color:"rgba(255,0,0,1)"},zIndex:100},Dfa={image:{color:"rgba(255,255,255,1)",fill:{color:"rgba(255,255,255,1)"},stroke:{color:"rgba(255,0,0,1)",width:1}},stroke:{color:"rgba(255,255,255,1)"},zIndex:101},dz={image:{color:"rgba(255,0,0,1)",fill:{color:"rgba(255,0,0,1)"},stroke:{color:"rgba(255,255,0,1)",width:1}},
stroke:{color:"rgba(255,0,0,1)"},zIndex:102},ez={fill:{color:"rgba(0,255,255,0.15)"},stroke:{width:3,color:"rgba(0,255,255,1)"}},fz=["image","fill","stroke"];function gz(a){a=om(a);a=[255*(4==a.length?a[3]:1),a[2],a[1],a[0]];var b;for(b=0;4>b;++b){var c=parseInt(a[b],10).toString(16);a[b]=1==c.length?"0"+c:c}return a.join("")}function hz(a){return pm("string"===typeof a?ff(a):a)}var iz=["image","fill","stroke"];
function Iy(a,b){if(a){if(null!=a.color)return b?ff(a.color):a.color;for(var c=0;c<iz.length;c++){var d=iz[c];if(!$h(a[d])&&(d=Iy(a[d],b)))return d}}return null}function jz(a,b,c){if(a){var d=c||fz,e;for(e in a)-1!==d.indexOf(e)&&(a[e].color=b),$h(a[e])||jz(a[e],b,c)}}function kz(a){var b=null;a&&(a=a.image)&&a.src&&(b={path:a.src});return b}function lz(a,b){b&&a&&(a=a.image)&&(a.src=b.path)}
function mz(a,b,c){var d=b.showRotation||!1;b=b.rotationColumn;c=Number(c.la["string"===typeof b?b:""]);c="number"!==typeof c||isNaN(c)?0:c;nz({image:{rotation:d?oe(c):0}},a)}function Ty(a,b,c){if(a){var d,e;for(e in a)-1!==fz.indexOf(e)&&(d=ff(a[e].color))&&(d[3]=c?d[3]*b:b,a[e].color=hz(d)),$h(a[e])||Ty(a[e],b,c)}}
function oz(a){if(a){if(void 0!=a.radius)return a.radius;if(void 0!=a.width)return a.width;if(void 0!=a.scale)return Math.round(3*a.scale);for(var b in a)if(!$h(a[b])){var c=oz(a[b]);if(void 0!==c)return c}}}
function pz(a,b){if(a)for(var c in a)"radius"==c?a[c]=b:"scale"==c?a[c]=qz(Math.max(b,.01)):"width"==c?a[c]=Math.max(b,1):$h(a[c])||("stroke"==c?a[c].width=Math.max(b,1):"image"==c?"icon"==a[c].type?(a[c].scale=qz(Math.max(b,.01)),a[c].radius=void 0):(a[c].radius=b,a[c].scale=void 0):pz(a[c],b))}function rz(a,b){b=oz(b);a=oz(a);return null!=b&&null!=a?Math.round(qz(b)*qz(a)*3):b||a||3}function qz(a){return Math.floor(a/3*100)/100}
function sz(a,b,c){c||(c=Hy(a,b),c=Uy(a,a.la._style||c||Sy,c));a.zb(c);(b=b||Ey(a))&&b.Uc[a.ma.toString()]&&tz(b,a)}function uz(a,b){if(0<a.length)for(var c=Hy(a[0],b),d=0,e=a.length;d<e;d++){var f=a[d],h=Uy(f,f.la._style||c||Sy,c);sz(f,b,h)}}
function Hy(a,b){var c=a.get("sourceId"),d=a.get("skipLayerStyle");if(c&&!d){var e={};c=vz(wz.s(),c)||Sy;nz(c,e);(a=b||Ey(a))&&kg(a,"os.source.Vector")&&(c=(b=a.Jd)?Wy[b]:void 0)&&((c.config&&nz(c.config,e),c.selectedConfig&&(e.selectedConfig=c.selectedConfig),"Icon"==b)?(a=e.image)&&a.radius&&(a.scale=qz(a.radius)):az[b]&&(b=(a=a.Sf)?Wy[a]:void 0)&&(b.config&&nz(b.config,e),"Icon"==a&&(a=e.image)&&a.radius&&(a.scale=qz(a.radius))))}return e}
function xz(a){return null!=a.image&&"icon"==a.image.type}
function yz(a,b,c){var d=a.la.color;if(c&&c.replaceStyle)return d&&jz(c,d),c;var e={};nz(b,e);!c&&a&&(c=Hy(a));if((b=a.la._style)&&c){void 0!=b.length&&(b=b[0]);var f=e.image;if(f){var h=rz(b.image,c.image);f.radius=h;f.scale=Math.max(qz(h),.01)}else c.image&&(e.image={},nz(c.image,e.image));void 0!==e.showRotation&&void 0!==e.rotationColumn?mz(e,e,a):void 0!==a.la.showRotation&&void 0!==a.la.rotationColumn&&mz(e,a.la,a);(f=e.stroke)?(c=rz(b.stroke,c.stroke),f.width=Math.max(c,1)):c.stroke&&(e.stroke=
{},nz(c.stroke,e.stroke))}else c&&void 0!==c.showRotation&&void 0!==c.rotationColumn&&mz(e,c,a);d&&jz(e,d);a=a.get("opacity");null==a||isNaN(a)||Ty(e,Number(a),!0);return e}
function zz(a,b,c){"lineOfBearing"==b.geometry||b.geometries&&-1!=b.geometries.indexOf("lineOfBearing")?c?zy(a,!0,{fu:c.arrowSize,gu:c.arrowUnits,hu:c.lobBearingColumn,So:c.lobBearingError,iu:c.lobBearingErrorColumn,su:c.lobColumnLength,length:c.lobLength,Aq:c.lobLengthType,Qv:c.lobLengthColumn,Tv:c.lobLengthUnits,zq:c.lobLengthError,Rv:c.lobLengthErrorColumn,Sv:c.lobLengthErrorUnits,MA:c.showArrow,NA:c.showEllipse,OA:c.showError}):zy(a):("ellipse"==b.geometry||b.geometries&&-1!=b.geometries.indexOf("ellipse"))&&
xy(a)}
function Uy(a,b,c){var d=[];if(!a)return d;if("number"===typeof b.length){for(var e=0,f=b.length;e<f;e++)d.push(Uy(a,b[e],c));return Bb(d)}b=yz(a,b,c);var h=a.la.opacity;null==h||isNaN(h)?h=void 0:h=Number(h);e=null!=c&&!!c.replaceStyle;var k=Jy(a,void 0,e),l=k?Wy[k]:void 0;if(l){if(l.config){var m=l.config;zz(a,m,c);f=xz(b);var n=xz(m);k&&az[k]&&(k=(k=Ly(a,void 0,e))?Wy[k]:void 0)&&k.config&&(nz(k.config,m),n=xz(k.config));f&&!n?(f=b.image,e=hz(Iy(b)||"rgba(255,255,255,1)"),b.image={radius:null!=f.scale?
Math.round(3*f.scale):3,fill:{color:e}},b.stroke=b.stroke||{},b.stroke.color=e):e&&f&&n&&(lz(b,kz(c)),mz(b,b,a));nz(m,b)}l.selectedConfig&&(b.selectedConfig=l.selectedConfig)}if(l=a.la._selectStyle)null!=h&&l.image&&(e=om(l.image.fill.color),e[3]=h,jz(l,e)),nz(l,b),b.selectedConfig&&(l=b.selectedConfig,b.selectedConfig=void 0,zz(a,l,c),l.geometry&&!a.la[l.geometry]||nz(l,b));(m=a.la._highlightStyle)&&nz(m,b);if(b.geometries)for(e=0,f=b.geometries.length;e<f;e++)n=b.geometries[e],a.la[n]&&(b.geometry=
n,d.push(Az(wz.s(),b)));else d.push(Az(wz.s(),b));e=a.la._labelGeometry;if(!e||e==b.geometry){if(a.la._highlightStyle||!1!==a.la.showLabels)if(e=Bz(b.labels,c?c.labels:[Cz()]))if(n=Dz(a,e),!Hb(Tb(n))){var p=a.get("_labelStyle");p||(p=wz.s().j.text,e={},nz(ei("text",b,c)||{},e),p=p.g(e),p=new ds({geometry:Ez,text:p}));p.Of((b.zIndex||0)+500);e=b.labelColor||c&&c.labelColor;if(!e||a.la._highlightStyle||a.la._selectStyle)e=Iy(b);k=e||"rgba(255,255,255,1)";e=ei("labelSize",b,c);"string"==typeof e&&(e=
parseInt(e,10)||void 0);e||(e=14);var r=Fz(e);f=p.mb();f.B=r;f.wh(Efa(n));n=f.lb();n.g=k;n.j=void 0;k=om(k);n=om(f.kb().Ja());n[3]=k[3];k=f.kb();n=hz(n);k.G=n;k.l=void 0;f.ng=xz(b)?e:e/2;f.g="left";a.set("_labelStyle",p,!0)}if(a=p)null!=h&&(p=om(a.Ob.Fc.G),p[3]*=h,a.Ob.Fc.G=qm(p),m||l||(e=c&&c.labelColor?om(c.labelColor):om(Iy(b)),e[3]*=h,a.Ob.uc.g=qm(e))),d.push(a)}return d}
function nz(a,b){for(var c in a){var d=a[c];d&&"object"==typeof d&&"number"!=typeof d.length?(c in b||(b[c]={}),nz(d,b[c])):b[c]=d}}function Gz(a,b,c){a.dispatchEvent(new K(c||"style",b));a.N().ia()}function Hz(a){return!!a.labels};function Iz(a){for(var b=[],c=0,d=0;d<a.length;d++){var e=a.charCodeAt(d);255<e&&(b[c++]=e&255,e>>=8);b[c++]=e}return b};function Jz(a){var b=0,c=a.length,d={a:-1640531527,b:-1640531527,c:314159265},e;for(e=c;12<=e;e-=12,b+=12)d.a+=Kz(a,b),d.b+=Kz(a,b+4),d.c+=Kz(a,b+8),Lz(d);d.c+=c;switch(e){case 11:d.c+=a[b+10]<<24;case 10:d.c+=(a[b+9]&255)<<16;case 9:d.c+=(a[b+8]&255)<<8;case 8:d.b+=Kz(a,b+4);d.a+=Kz(a,b);break;case 7:d.b+=(a[b+6]&255)<<16;case 6:d.b+=(a[b+5]&255)<<8;case 5:d.b+=a[b+4]&255;case 4:d.a+=Kz(a,b);break;case 3:d.a+=(a[b+2]&255)<<16;case 2:d.a+=(a[b+1]&255)<<8;case 1:d.a+=a[b+0]&255}return Lz(d)}
function Lz(a){var b=a.a,c=a.b,d=a.c;b=b-c-d^d>>>13;c=c-d-b^b<<8;d-=b;d=d-c^c>>>13;b-=c;b-=d;b^=d>>>12;c=c-d-b^b<<16;d-=b;d=d-c^c>>>5;b-=c;b-=d;b^=d>>>3;c=c-d-b^b<<10;d-=b;d=d-c^c>>>15;a.a=b;a.b=c;return a.c=d}function Kz(a,b){return Mz(a[b+0])+(Mz(a[b+1])<<8)+(Mz(a[b+2])<<16)+(Mz(a[b+3])<<24)}function Mz(a){return 127<a?a-256:a};var bf=[255,255,255];
function Nz(a,b,c,d){var e="";a=String(Jz(Iz(a)));if(b&&0<b.length){var f="string"===typeof d?ff(d):d;f=af(f||bf);e+='<svg width="'+16*b.length+'px" height="16px" class="align-middle" xmlns="http://www.w3.org/2000/svg" filter="url(#filter_'+a+')">';e+=b.join("");Oz=0;e=e.replace(/x="(\d+)"/g,Ffa);e=e+('<filter id="filter_'+a+'">')+('<feColorMatrix id="matrix_'+a+'" values="'+f.join(" ")+'"/>');e+="</filter></svg>"}if(c&&0<c.length)for(b=ef(d),d=0,f=c.length;d<f;d++){var h=c[d].replace('class="','class="layer-icon-'+
a+" ");h=h.replace(">",' style="color:'+b+'">');e+=h}return e}var Oz=0;function Ffa(a,b){var c=16*Oz;Oz++;return a.replace(b,c.toString())}function Pz(a,b){"string"===typeof b&&(b=ff(b));var c=af(b||bf);a=String(Jz(Iz(a)));angular.element("#matrix_"+a).attr("values",c.join(" "));b=ef(b||bf);angular.element("i.fa.layer-icon-"+a).css("color",b)};function Qz(a,b){this.nb=!1;this.title="Change Layer Auto Refresh";this.Ba=null;this.state="ready";this.Oa=a;this.g=0;this.interval=b}Qz.prototype.N=function(){var a=L.s().W(this.Oa);if(!a)return this.state="error",this.Ba='Unable to locate layer with id "'+this.Oa+'".',null;a=a.N();return(a instanceof Rz||a instanceof bv)&&a.ah()?a:(this.state="error",this.Ba='Source for layer with id "'+this.Oa+'" does not support refresh.',null)};
Qz.prototype.Fa=function(){this.state="executing";var a=this.N();return a?(this.g=a.Sg(),a.ef(this.interval),O(P.s(),Sz,1),this.state="success",!0):!1};Qz.prototype.Db=function(){this.state="reverting";var a=this.N();return a?(a.ef(this.g),this.state="ready",!0):!1};function Tz(a,b,c){this.nb=!1;this.title="Change Style";this.Ba=null;this.state="ready";this.Oa=a;this.oldValue=null!=c?c:this.j();this.value=b;this.qa=null}g=Tz.prototype;g.Fa=function(){return Gfa(this)?(this.state="executing",this.setValue(this.value),this.qa&&O(P.s(),this.qa,1),this.state="success",!0):!1};g.Db=function(){this.state="reverting";this.setValue(this.oldValue);this.state="ready";return!0};
function Gfa(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.Oa?void 0===a.value?(a.state="error",a.Ba="Value not provided",!1):!0:(a.state="error",a.Ba="Layer ID not provided.",!1)}g.finish=function(){};g.nh=function(a){return a instanceof Uz?a.Va():a instanceof Vz?vz(wz.s(),a.D()):null};g.setValue=function(a){var b=this.W();b=this.nh(b);this.g(b,a);this.finish(b)};g.W=function(){return L.s().W(this.Oa)};function Wz(){this.j={};this.cache={}}Wz.prototype.eo=function(a){this.j=a};Wz.prototype.l=function(){};function Xz(){Wz.call(this)}w(Xz,Wz);Xz.prototype.g=function(a){var b=void 0!==a.radius?a.radius:3,c=1+b,d=a.fill;if(d){var e=this.j.fill.g(d);c+=e.id}if(a=a.stroke){var f=this.j.stroke.g(a);c+=f.id}this.cache[c]||(this.cache[c]=new bs({radius:b,fill:e,stroke:f}),this.cache[c].id=c);return this.cache[c]};Xz.prototype.l=function(a,b){if(a instanceof bs){b.type="circle";b.radius=a.g;var c=a.lb();c&&this.j.fill.l(c,b);(a=a.kb())&&this.j.stroke.l(a,b)}};function Yz(){Wz.call(this)}w(Yz,Wz);Yz.prototype.g=function(a){a=a.color||"rgba(255,255,255,1)";a=pm(a);var b=1+Xb(a);this.cache[b]||(this.cache[b]=new cs({color:a}),this.cache[b].id=b);return this.cache[b]};Yz.prototype.l=function(a,b){if(a instanceof cs&&(a=a.Ja(),void 0!==a&&null!==a)){var c={};b.fill=c;c.color=pm(a)}};function Zz(){this.g={};this.j=0;this.l=32}Zz.prototype.clear=function(){this.g={};this.j=0};function $z(a){if(a.j>a.l){var b=0,c;for(c in a.g){var d=a.g[c];0!==(b++&3)||d.be()||(delete a.g[c],--a.j)}}}Zz.prototype.get=function(a,b,c){a=b+":"+a+":"+(c?pm(c):"null");return a in this.g?this.g[a]:null};Zz.prototype.set=function(a,b,c,d){this.g[b+":"+a+":"+(c?pm(c):"null")]=d;++this.j};Zz.prototype.setSize=function(a){this.l=a;$z(this)};var aA=new Zz;function bA(a,b,c,d,e,f){Df.call(this);this.G=null;this.wa=a?a:new Image;null!==d&&(this.wa.crossOrigin=d);this.A=f?document.createElement("CANVAS"):null;this.o=f;this.B=null;this.g=e;this.j=c;this.l=b;this.K=!1;2==this.g&&cA(this)}I(bA,Df);function dA(a,b,c,d,e,f){var h=aA.get(b,d,f);h||(h=new bA(a,b,c,d,e,f),aA.set(b,d,f,h));return h}function cA(a){var b=um(1,1);try{b.drawImage(a.wa,0,0),b.getImageData(0,0,1,1)}catch(c){a.K=!0}}bA.prototype.I=function(){this.g=3;this.B.forEach(sf);this.B=null;this.dispatchEvent("change")};
bA.prototype.O=function(){this.g=2;this.j&&(this.wa.width=this.j[0],this.wa.height=this.j[1]);this.j=[this.wa.width,this.wa.height];this.B.forEach(sf);this.B=null;cA(this);if(!this.K&&null!==this.o){this.A.width=this.wa.width;this.A.height=this.wa.height;var a=this.A.getContext("2d");a.drawImage(this.wa,0,0);for(var b=a.getImageData(0,0,this.wa.width,this.wa.height),c=b.data,d=this.o[0]/255,e=this.o[1]/255,f=this.o[2]/255,h=0,k=c.length;h<k;h+=4)c[h]*=d,c[h+1]*=e,c[h+2]*=f;a.putImageData(b,0,0)}this.dispatchEvent("change")};
bA.prototype.Pa=function(){return this.A?this.A:this.wa};bA.prototype.load=function(){if(0==this.g){this.g=1;this.B=[xf(this.wa,"error",this.I,this),xf(this.wa,"load",this.O,this)];try{this.wa.src=this.l}catch(a){this.I()}}};function eA(a){a=a||{};this.A=void 0!==a.anchor?a.anchor:[.5,.5];this.U=null;this.o=void 0!==a.anchorOrigin?a.anchorOrigin:"top-left";this.G=void 0!==a.anchorXUnits?a.anchorXUnits:"fraction";this.P=void 0!==a.anchorYUnits?a.anchorYUnits:"fraction";this.oa=void 0!==a.crossOrigin?a.crossOrigin:null;var b=void 0!==a.img?a.img:null,c=void 0!==a.imgSize?a.imgSize:null,d=a.src;Mf(!(void 0!==d&&b),4);Mf(!b||b&&c,5);void 0!==d&&0!==d.length||!b||(d=b.src||J(b).toString());Mf(void 0!==d&&0<d.length,6);var e=
void 0!==a.src?0:2;this.B=void 0!==a.color?om(a.color):null;this.g=dA(b,d,c,this.oa,e,this.B);this.ka=void 0!==a.offset?a.offset:[0,0];this.u=void 0!==a.offsetOrigin?a.offsetOrigin:"top-left";this.pa=null;this.aa=void 0!==a.size?a.size:null;$r.call(this,{opacity:void 0!==a.opacity?a.opacity:1,rotation:void 0!==a.rotation?a.rotation:0,scale:void 0!==a.scale?a.scale:1,snapToPixel:void 0!==a.snapToPixel?a.snapToPixel:!0,rotateWithView:void 0!==a.rotateWithView?a.rotateWithView:!1})}I(eA,$r);g=eA.prototype;
g.clone=function(){return new eA({anchor:this.A.slice(),anchorOrigin:this.o,anchorXUnits:this.G,anchorYUnits:this.P,crossOrigin:this.oa,color:this.B&&this.B.slice?this.B.slice():this.B||void 0,src:this.g.l,offset:this.ka.slice(),offsetOrigin:this.u,size:null!==this.aa?this.aa.slice():void 0,opacity:this.Nb(),scale:this.j(),snapToPixel:this.O,rotation:this.l,rotateWithView:this.I})};
g.Ri=function(){if(this.U)return this.U;var a=this.A,b=this.Ef();if("fraction"==this.G||"fraction"==this.P){if(!b)return null;a=this.A.slice();"fraction"==this.G&&(a[0]*=b[0]);"fraction"==this.P&&(a[1]*=b[1])}if("top-left"!=this.o){if(!b)return null;a===this.A&&(a=this.A.slice());if("top-right"==this.o||"bottom-right"==this.o)a[0]=-a[0]+b[0];if("bottom-left"==this.o||"bottom-right"==this.o)a[1]=-a[1]+b[1]}return this.U=a};g.Ja=function(){return this.B};g.Pa=function(a){return this.g.Pa(a)};g.tm=function(){return this.g.j};
g.Fe=function(){return this.g.g};g.Pq=function(){var a=this.g;if(!a.G)if(a.K){var b=a.j[0],c=a.j[1],d=um(b,c);d.fillRect(0,0,b,c);a.G=d.canvas}else a.G=a.wa;return a.G};g.Lk=function(){if(this.pa)return this.pa;var a=this.ka;if("top-left"!=this.u){var b=this.Ef(),c=this.g.j;if(!b||!c)return null;a=a.slice();if("top-right"==this.u||"bottom-right"==this.u)a[0]=c[0]-b[0]-a[0];if("bottom-left"==this.u||"bottom-right"==this.u)a[1]=c[1]-b[1]-a[1]}return this.pa=a};
g.Ef=function(){return this.aa?this.aa:this.g.j};g.Vh=function(a,b){return H(this.g,"change",a,b)};g.load=function(){this.g.load()};g.Bl=function(a,b){yf(this.g,"change",a,b)};function fA(){C.call(this);this.log=Hfa;this.g=0;this.statusCode=-1;this.timeout=0}w(fA,C);var Hfa=E.V("os.net.AbstractRequestHandler");g=fA.prototype;g.lc=function(){return this.g};g.Ir=null;g.handles=function(){return!1};g.uy=function(){return this.Ir};g.Mp=function(){return this.statusCode};
g.Ui=function(a){var b=a.u;if(6===b){this.statusCode=a=a.Ue();switch(!0){case 502===a:b="Bad gateway.";break;case 503===a:b="Service unavailable.";break;case 500<=a:b="The remote server experienced an error ("+a+").";break;case 400===a:b="Bad request.";break;case 401===a:b="You do not have proper authorization to perform this action.";break;case 403===a:b="You do not have proper authorization to perform this action.";break;case 404===a:b="The requested resource was not found.";break;case 400<=a:b=
"There was an issue accessing the resource ("+a+").";break;default:b=wr(b)+"."}E.error(this.log,b+" Http Status code: "+a)}else b=wr(b),E.error(this.log,b);return b};g.kk=function(){return""};g.Iv=function(){return!!this.statusCode};g.setTimeout=function(a){this.timeout=a};function gA(){}gA.prototype.rn=function(){return"application/x-www-form-urlencoded;charset=utf-8"};gA.prototype.format=function(a){var b=a.g.toString();a.g.clear();return b};function hA(){fA.call(this);this.log=Ifa}w(hA,fA);var Ifa=E.V("os.net.SameDomainHandler");g=hA.prototype;g.J=function(){this.Oc&&this.Oc.dispose();hA.C.J.call(this)};g.handles=function(a,b){if(window){if(!b.j)return!0;if("local"!=b.l)return gh(new Xg(window.location),b)}return!1};g.Oc=null;g.Jr=function(){return this.Oc?Rda(this.Oc):null};
g.Kr=function(){if(this.Oc){var a={};var b=this.Oc;b=(b.g&&4==Mr(b)?b.g.getAllResponseHeaders():"").split("\r\n");for(var c=0;c<b.length;c++)if(!Hb(b[c])){var d=2;for(var e=b[c].split(": "),f=[];0<d&&e.length;)f.push(e.shift()),d--;e.length&&f.push(e.join(": "));d=f;a[d[0]]=a[d[0]]?a[d[0]]+(", "+d[1]):d[1]}}else a=null;return a};g.mu=function(){this.Oc=new Dr;this.Oc.A=Math.max(0,this.timeout);this.Oc.H("success",this.AK,!1,this);this.Oc.H("error",this.Mx,!1,this);this.Oc.H("timeout",this.Mx,!1,this)};
g.abort=function(){this.Oc&&this.Oc.abort()};g.Fa=function(a,b,c,d,e,f){this.Ir=null;this.Oc||this.mu();var h=null;"GET"!=a&&"HEAD"!=a&&"DELETE"!=a&&(d||(d=new gA),h=d.format(b),c||(c={}),d.rn()&&(c["Content-Type"]=d.rn()));e&&(d=Ia(),b.g.set("_cd",d));this.Oc.G=f||Er;Fr(this.Oc,this.Gq(b),a,h,c)};g.Gq=function(a){return a};g.AK=function(){this.statusCode=this.Oc.Ue();this.dispatchEvent("success")};g.Mx=function(){var a=this.Ui(this.Oc);a&&(this.Ir=[a]);this.dispatchEvent("error")};g.kk=function(){return"sameDomain"};function iA(){hA.call(this);this.log=Jfa}w(iA,hA);var Jfa=E.V("os.net.ExtDomainHandler"),jA=!1;iA.prototype.handles=function(a,b){if(window&&b.j&&"local"!=b.l){a=new Xg(window.location);var c=a.l.toLowerCase(),d=b.l.toLowerCase();return jA||c==d||"http"!=d?!gh(a,b):(E.hb(this.log,"Mixed content is not allowed: "+b.toString()),!1)}return!1};iA.prototype.Gq=function(a){if(this.Oc){var b=kA(a)===lA;this.Oc.B=b}return a};iA.prototype.kk=function(){return"extDomain"};function mA(a,b,c){if(ua(a))var d={name:nA(a)};else d=a,a=Kfa(a.name);this.code=a;this.g=d;b="Error "+b+": "+this.getName();c&&(b+=", "+c);Ma.call(this,b)}w(mA,Ma);mA.prototype.getName=function(){return this.g.name||""};
var oA={vC:1,ZQ:2,NOT_FOUND_ERR:3,IB:4,LB:5,aR:6,tC:7,ABORT_ERR:8,eC:9,qS:10,sC:11,dC:12,INVALID_ACCESS_ERR:13,INVALID_STATE_ERR:14},pA=(ra.Gg||ra.Ah||oA).vC,qA=(ra.Gg||ra.Ah||oA).NOT_FOUND_ERR,rA=(ra.Gg||ra.Ah||oA).IB,sA=(ra.Gg||ra.Ah||oA).LB,tA=(ra.Gg||ra.Ah||oA).tC,uA=(ra.Gg||ra.Ah||oA).ABORT_ERR,vA=(ra.Gg||ra.Ah||oA).eC,wA=(ra.Gg||ra.Ah||oA).sC,xA=(ra.Gg||ra.Ah||oA).dC,yA=(ra.DOMException||oA).INVALID_ACCESS_ERR,zA=(ra.DOMException||oA).INVALID_STATE_ERR;
function Kfa(a){switch(a){case "UnknownError":return pA;case "NotFoundError":return qA;case "ConstraintError":return rA;case "DataError":return sA;case "TransactionInactiveError":return tA;case "AbortError":return uA;case "ReadOnlyError":return vA;case "TimeoutError":return wA;case "QuotaExceededError":return xA;case "InvalidAccessError":return yA;case "InvalidStateError":return zA;default:return pA}}
function nA(a){switch(a){case pA:return"UnknownError";case qA:return"NotFoundError";case rA:return"ConstraintError";case sA:return"DataError";case tA:return"TransactionInactiveError";case uA:return"AbortError";case vA:return"ReadOnlyError";case wA:return"TimeoutError";case xA:return"QuotaExceededError";case yA:return"InvalidAccessError";case zA:return"InvalidStateError";default:return"UnknownError"}}function AA(a,b){return"error"in a?new mA(a.error,b):new mA({name:"UnknownError"},b)}
function BA(a,b){if("name"in a)return b=b+": "+a.message,new mA(a,b);if("code"in a){var c=nA(a.code);b=b+": "+a.message;return new mA({name:c},b)}return new mA({name:"UnknownError"},b)};function CA(){x.call(this)}w(CA,x);function DA(a,b,c){if(!F(a,"os.storage.IMechanism"))throw Error("mechanism must implement os.storage.IMechanism");x.call(this);this.g=a;this.j=b||JSON.parse;this.serialize=c||JSON.stringify}w(DA,CA);var EA=E.V("os.storage.AsyncStorageWrapper");g=DA.prototype;g.init=function(){return Ch()};g.get=function(a){var b;try{(b=this.g.get(a))&&(b=this.j(b))}catch(c){b=void 0}return Ch(null!=b?b:void 0)};
g.Ey=function(){var a=[];try{a=this.g.Fy();for(var b=0;b<a.length;b++){var c=a[b];c&&(a[b]=this.j(c))}}catch(d){a=[]}return Ch(a)};
g.set=function(a,b,c){if(c||null==this.g.get(a)){try{b=this.serialize(b)}catch(d){b=void 0}if(b)try{this.g.set(a,b)}catch(d){a=Wh("the application");b=Xh("your system administrator");switch("string"==typeof d?d:""){case "Storage mechanism: Invalid value was encountered":c="Failed saving data to application storage due to an invalid value.";break;case "Storage mechanism: Quota exceeded":c="Application storage is full and data was not saved to the application.";break;case "Storage mechanism: Storage disabled":c=
"Application storage is disabled and data was not saved to the application.";break;default:c="Failed saving data to application storage: "+d.message+"."}c+=" Your work may be lost if you close/refresh "+a+". Please contact "+b+" for support.";rj(qj.s(),c,Qh,EA)}else this.g.remove(a)}return Ch(void 0)};g.remove=function(a){this.g.remove(a);return Ch(void 0)};g.clear=function(){this.g instanceof Hh?this.g.clear():E.hb(EA,"Clear is unsupported by storage mechanism");return Ch(void 0)};function FA(a){this.g=a}var Lfa=ra.IDBKeyRange||ra.webkitIDBKeyRange;FA.prototype.range=function(){return this.g};function GA(){C.call(this)}w(GA,C);g=GA.prototype;g.Lg=null;g.next=function(a){if(a)this.Lg["continue"](a);else this.Lg["continue"]()};g.update=function(a){var b="updating via cursor with value ",c=new nh;try{var d=this.Lg.update(a)}catch(e){return b+=Gd(a),c.Gb(BA(e,b)),c}d.onsuccess=function(){c.callback()};d.onerror=function(d){b+=Gd(a);c.Gb(AA(d.target,b))};return c};
g.remove=function(){var a=new nh;try{var b=this.Lg["delete"]()}catch(c){return a.Gb(BA(c,"deleting via cursor")),a}b.onsuccess=function(){a.callback()};b.onerror=function(b){a.Gb(AA(b.target,"deleting via cursor"))};return a};g.getValue=function(){return this.Lg.value};g.getKey=function(){return this.Lg.key};
function Mfa(a,b,c){var d=new GA;try{var e=b?b.range():null;var f=c?a.openCursor(e,c):a.openCursor(e)}catch(h){throw d.dispose(),BA(h,a.name);}f.onsuccess=function(a){d.Lg=a.target.result||null;d.Lg?d.dispatchEvent(HA):d.dispatchEvent(IA)};f.onerror=function(){d.dispatchEvent(JA)};return d}var IA="c",JA="e",HA="n";function KA(a){this.g=a}g=KA.prototype;g.getName=function(){return this.g.name};function LA(a,b,c,d,e){var f=new nh;try{var h=e?a.g[b](d,e):a.g[b](d)}catch(k){return c+=Gd(d),e&&(c+=", with key "+Gd(e)),f.Gb(BA(k,c)),f}h.onsuccess=function(a){f.callback(a.target.result)};h.onerror=function(a){c+=Gd(d);e&&(c+=", with key "+Gd(e));f.Gb(AA(a.target,c))};return f}g.add=function(a,b){return LA(this,"add","adding into "+this.getName()+" with value ",a,b)};
g.remove=function(a){var b=new nh;try{var c=this.g["delete"](a instanceof FA?a.range():a)}catch(e){return c="removing from "+this.getName()+" with key "+Gd(a),b.Gb(BA(e,c)),b}c.onsuccess=function(){b.callback()};var d=this;c.onerror=function(c){var e="removing from "+d.getName()+" with key "+Gd(a);b.Gb(AA(c.target,e))};return b};
g.get=function(a){var b=new nh;try{var c=this.g.get(a)}catch(e){return c="getting from "+this.getName()+" with key "+Gd(a),b.Gb(BA(e,c)),b}c.onsuccess=function(a){b.callback(a.target.result)};var d=this;c.onerror=function(c){var e="getting from "+d.getName()+" with key "+Gd(a);b.Gb(AA(c.target,e))};return b};
function Nfa(a){var b=new nh;try{var c=MA(a,void 0,void 0)}catch(e){return b.Gb(e),b}var d=[];Yd(c,HA,function(){d.push(c.getValue());c.next()});Zd(c,[JA,IA],function(a){c.dispose();a.type==IA?b.callback(d):b.Gb()});return b}function MA(a,b,c){return Mfa(a.g,b,c)}g.clear=function(){var a="clearing store "+this.getName(),b=new nh;try{var c=this.g.clear()}catch(d){return b.Gb(BA(d,a)),b}c.onsuccess=function(){b.callback()};c.onerror=function(c){b.Gb(AA(c.target,a))};return b};
g.deleteIndex=function(a){try{this.g.deleteIndex(a)}catch(b){throw BA(b,"deleting index "+a);}};g.count=function(a){var b=new nh;try{var c=a?a.range():null,d=this.g.count(c);d.onsuccess=function(a){b.callback(a.target.result)};var e=this;d.onerror=function(a){b.Gb(AA(a.target,e.getName()))}}catch(f){b.Gb(BA(f,this.getName()))}return b};function NA(a){x.call(this);this.j=a;this.g={}}w(NA,x);var OA=[];g=NA.prototype;g.H=function(a,b,c,d){q(b)||(b&&(OA[0]=b.toString()),b=OA);for(var e=0;e<b.length;e++){var f=Yd(a,b[e],c||this.handleEvent,d||!1,this.j||this);if(!f)break;this.g[f.key]=f}return this};g.Ua=function(a,b,c,d){return PA(this,a,b,c,d)};function PA(a,b,c,d,e,f){if(q(c))for(var h=0;h<c.length;h++)PA(a,b,c[h],d,e,f);else{b=Zd(b,c,d||a.handleEvent,e,f||a.j||a);if(!b)return a;a.g[b.key]=b}return a}
g.M=function(a,b,c,d,e){if(q(b))for(var f=0;f<b.length;f++)this.M(a,b[f],c,d,e);else c=c||this.handleEvent,d=Ba(d)?!!d.capture:!!d,e=e||this.j||this,c=$d(c),d=!!d,b=Qd(a)?a.nk(b,c,d,e):a?(a=be(a))?a.nk(b,c,d,e):null:null,b&&(ee(b),delete this.g[b.key])};g.removeAll=function(){fc(this.g,function(a,b){this.g.hasOwnProperty(b)&&ee(a)},this);this.g={}};g.J=function(){NA.C.J.call(this);this.removeAll()};g.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};function QA(a,b){C.call(this);this.g=a;this.l=b;this.j=new NA(this);this.j.H(this.g,"complete",t(this.dispatchEvent,this,RA));this.j.H(this.g,"abort",t(this.dispatchEvent,this,SA));this.j.H(this.g,"error",this.o)}w(QA,C);QA.prototype.o=function(a){a.target instanceof mA?this.dispatchEvent({type:TA,target:a.target}):this.dispatchEvent({type:TA,target:AA(a.target,"in transaction")})};var RA="complete",SA="abort",TA="error";
QA.prototype.objectStore=function(a){try{return new KA(this.g.objectStore(a))}catch(b){throw BA(b,"getting object store "+a);}};QA.prototype.wait=function(){var a=new nh;Zd(this,RA,t(a.callback,a));var b=Zd(this,SA,function(){ee(c);a.Gb(new mA(uA,"waiting for transaction to complete"))});var c=Zd(this,TA,function(c){ee(b);a.Gb(c.target)});var d=this.l;return th(a,function(){return d})};QA.prototype.abort=function(){this.g.abort()};QA.prototype.J=function(){QA.C.J.call(this);this.j.dispose()};function UA(a){C.call(this);this.g=a;this.j=new NA(this);this.j.H(this.g,VA,t(this.dispatchEvent,this,VA));this.j.H(this.g,WA,this.RE);this.j.H(this.g,XA,this.yD);this.j.H(this.g,YA,t(this.dispatchEvent,this,YA))}w(UA,C);g=UA.prototype;g.Tp=!0;g.RE=function(a){this.dispatchEvent({type:WA,errorCode:a.target.error.severity})};g.yD=function(a){this.dispatchEvent(new ZA(a.oldVersion,a.newVersion))};g.close=function(){this.Tp&&(this.g.close(),this.Tp=!1)};g.getName=function(){return this.g.name};
function $A(a,b,c){try{var d=c?a.g.transaction(b,c):a.g.transaction(b);return new QA(d,a)}catch(e){throw BA(e,"creating transaction");}}g.J=function(){UA.C.J.call(this);this.j.dispose()};var VA="abort",YA="close",WA="error",XA="versionchange";function ZA(a,b){A.call(this,XA);this.oldVersion=a;this.newVersion=b}w(ZA,A);var aB=ra.indexedDB||ra.mozIndexedDB||ra.webkitIndexedDB||ra.moz_indexedDB;function Ofa(a,b,c,d){var e=new nh;b=b?aB.open(a,b):aB.open(a);b.onsuccess=function(a){a=new UA(a.target.result);e.callback(a)};b.onerror=function(b){e.Gb(AA(b.target,"opening database "+a))};b.onupgradeneeded=function(a){if(c){var b=new UA(a.target.result);c(new ZA(a.oldVersion,a.newVersion),b,new QA(a.target.transaction,b))}};b.onblocked=function(a){d&&d(new ZA(a.oldVersion,a.newVersion))};return e};function bB(a,b,c){x.call(this);this.j=null;this.A=b||"opensphere.shared";this.u=null!=c?c:1;this.l=a;this.g=null;this.o={};this.log=Pfa}w(bB,CA);var Pfa=E.V("os.storage.IDBStorage");g=bB.prototype;g.J=function(){bB.C.J.call(this);this.g&&this.g.cancel();this.j&&this.j.Tp&&this.j.close();this.j=null};g.init=function(){if(Modernizr.indexeddb)var a=this.g=uh(Ofa(this.A,this.u,this.vK.bind(this),this.pH.bind(this)),this.RH,this.QH,this);else a=new nh,a.Gb(this.Ui("idb:unsupported"));return a};
g.RH=function(a){E.ta(this.log,"Successfully opened database "+a.getName());this.j=a;this.g=null};g.QH=function(a){E.error(this.log,"Error opening database:",a);return a};g.pH=function(){E.error(this.log,"IDB store blocked from upgrading to version "+this.u+"!")};
g.vK=function(a,b){E.ta(this.log,"Upgrading database from "+a.oldVersion+" to "+a.newVersion);a=b.g.objectStoreNames;if(!a||!a.contains(this.l)){a=this.l;try{b.g.createObjectStore(a,void 0)}catch(c){throw BA(c,"creating object store "+a);}}};g.get=function(a){return this.g?th(this.g,Ga(this.Zu,a),this):Modernizr.indexeddb?this.Zu(a):cB(this,"idb:unsupported")};g.Zu=function(a){return this.j?th($A(this.j,[this.l],"readonly").objectStore(this.l).get(a),this.Zl,this):cB(this,"idb:unsupported")};
g.Ey=function(){return this.g?th(this.g,this.Qu,this):Modernizr.indexeddb?this.Qu():cB(this,"idb:unsupported")};g.Qu=function(){return this.j?th(Nfa($A(this.j,[this.l],"readonly").objectStore(this.l)),this.vD,this):cB(this,"idb:unsupported")};g.set=function(a,b,c){return this.g?th(this.g,Ga(this.EA,a,b,c),this):Modernizr.indexeddb?this.EA(a,b,c):cB(this,"idb:unsupported")};
g.EA=function(a,b,c){if(!this.j&&(!this.g||this.g.g))return cB(this,"idb:unsupported");var d=$A(this.j,[this.l],"readwrite"),e=d.objectStore(this.l),f=MA(e,new FA(Lfa.bound(a,a,void 0,void 0))),h=null,k=Yd(f,HA,function(){h||(h=this.Zl(f.getValue()));f.next()},!1,this);Zd(f,IA,function(){ee(k);if(h){if(c){var d=this.Ys(b);LA(e,"put","putting into "+e.getName()+" with value",d,a)}}else th(e.add(this.Ys(b),a),Ga(this.RI,a),this)},!1,this);return d.wait()};
g.remove=function(a){return this.g?th(this.g,Ga(this.nA,a),this):Modernizr.indexeddb?this.nA(a):cB(this,"idb:unsupported")};g.nA=function(a){if(!this.j&&(!this.g||this.g.g))return cB(this,"idb:unknown");var b=$A(this.j,[this.l],"readwrite");th(b.objectStore(this.l).remove(a),Ga(this.TI,a),this);return b.wait()};g.Zl=function(a){return a};g.vD=function(a){var b=[];if(a&&0<a.length)for(var c=0,d=a.length;c<d;c++){var e=this.Zl(a[c]);null!=e&&b.push(e)}return b};g.Ys=function(a){return a};
g.pJ=function(){E.info(this.log,'Cleared object store "'+this.l+'".')};g.RI=function(a){E.info(this.log,'Added item "'+a+'" to the database.')};g.TI=function(a){E.info(this.log,'Removed item "'+a+'" from the database.')};g.clear=function(){return this.g?th(this.g,this.qu,this):Modernizr.indexeddb?this.qu():cB(this,"idb:unsupported")};g.qu=function(){return th($A(this.j,[this.l],"readwrite").objectStore(this.l).clear(),this.pJ,this)};
function cB(a,b){var c=a.Ui(b);b in a.o||(a.o[b]=new nh,a.o[b].Gb(c));rj(qj.s(),c,Qh);return a.o[b]}g.Ui=function(a){switch(a){case "idb:unsupported":return"Uh oh! Your browser does not support storing data with an in-browser database. To use this feature, please upgrade to a modern browser (we recommend Chrome 28+, FF24+, or IE10+).";default:return'There has been an error accessing the in-browser database. For assistance, use the "Help" menu to contact support.'}};function dB(){this.g={}}w(dB,Hh);F(dB,"os.storage.IMechanism");g=dB.prototype;g.set=function(a,b){this.g[a]=b};g.get=function(a){return this.g[a]};g.Fy=function(){return ic(this.g)};g.remove=function(a){delete this.g[a]};g.clear=function(){qc(this.g)};g.we=function(a){var b=0,c=a?jc(this.g):ic(this.g);a=new Pg;a.next=function(){if(b>=c.length)throw Og;return c[b++]};return a};function eB(a,b){x.call(this);this.log=Qfa;this.j={};this.g=new bB("files",a||"opensphere.files",b||2);this.g.Zl=Kw;this.g.Ys=Lw;uh(this.g.init(),this.fK,this.Ex,this)}w(eB,x);xa(eB);var Qfa=E.V("os.file.FileStorage");g=eB.prototype;g.J=function(){eB.C.J.call(this);z(this.g);this.g=null};g.fK=function(){uh(this.g.Ey(),this.uI,this.Ex,this)};g.Ex=function(){z(this.g);this.g=new DA(new dB,Kw,Lw)};g.uI=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b].Ma();d&&(this.j[d]=!0)}};
g.clear=function(){return th(this.g.clear(),this.tI,this)};function fB(a,b){var c="string"==typeof b?b:b.Ma();c?th(a.g.remove(c),Ga(a.pI,c),a):(a="string"==typeof b?"undefined":b.getFileName(),(new nh).Gb("Unable delete a file ("+a+") with a null/empty url!"))}function gB(a,b){b="string"==typeof b?b:b.Ma();return!!b&&null!=a.j[b]}function hB(a,b){return a.g.get(b)}
function iB(a,b){var c=b.getFileName();if(c&&gB(a,b)){var d=c.slice(c.lastIndexOf("/")+1).replace(/\.+/g,".");var e=d.lastIndexOf(".");d=0>=e?"":d.substr(e+1);c=c.replace(new RegExp("."+d+"$"),"");e=1;do{var f=c+"-"+e++ +"."+d;b.j=f;b.Mb(Hw(f))}while(gB(a,b))}}function jB(a,b){var c=b.Ma();return c?th(a.g.set(c,b,!0),Ga(a.qI,c),a):(a=new nh,a.Gb("Unable store a file ("+b.getFileName()+") with a null/empty url!"),a)}g.qI=function(a){a&&(this.j[a]=!0)};g.pI=function(a){a&&delete this.j[a]};
g.tI=function(){this.j={}};function kB(){C.call(this);this.j=this.g=null;this.statusCode=-1}w(kB,C);g=kB.prototype;g.yj=null;g.uy=function(){return this.yj};g.lc=function(){return 0};g.handles=function(a,b){return"local"==b.l};g.mu=function(){};g.Jr=function(){return this.j?this.j.Pb():null};g.Kr=function(){return null};g.abort=function(){this.g&&this.g.cancel()};g.Fa=function(a,b){this.j=this.yj=null;a=eB.s();b=decodeURIComponent(b.toString());this.g=uh(hB(a,b),this.dL,this.cL,this)};
g.dL=function(a){this.g=null;a?(this.statusCode=200,this.j=a,this.dispatchEvent(new A("success"))):(this.statusCode=404,this.yj=["File not found in local storage!"],this.dispatchEvent(new A("error")))};g.cL=function(a){this.g=null;this.yj=[];"string"===typeof a?(this.statusCode=400,this.yj.push(a)):(this.statusCode=404,this.yj.push("File not found in local storage!"));this.dispatchEvent(new A("error"))};g.Mp=function(){return this.statusCode};g.kk=function(){return"local"};
g.Iv=function(){return this.statusCode&&0<=this.statusCode?!0:!1};g.setTimeout=function(){};function lB(){hA.call(this);this.g=-10}w(lB,hA);var mB=E.V("os.net.ProxyHandler"),nB="/proxy/{url}",oB=["http"],pB=["GET"],qB=!0;function Rfa(){var a=M.get(["proxy"]);a&&(void 0!==a.schemes&&(oB=a.schemes),void 0!==a.methods&&(pB=a.methods),void 0!==a.encode&&(qB=a.encode),void 0!==a.url&&(nB=a.url))}
lB.prototype.handles=function(a,b){var c=nB;if(!c||-1==c.indexOf("{url}"))return E.hb(mB,"The proxy url is not set properly"),!1;c=pB;if(!c||-1==c.indexOf(a))return E.ta(mB,"The "+a+" method is not supported by the proxy."),!1;c=oB;return c&&-1!=c.indexOf(b.l)?!lB.C.handles.call(this,a,b):(E.ta(mB,"The "+b.l+" scheme is not supported by the proxy"),!1)};lB.prototype.Gq=function(a){return rB(a)};function rB(a){a=qB?encodeURIComponent(a.toString()):a.toString();return nB.replace("{url}",a)}
lB.prototype.kk=function(){return"proxy"};var lA="use-credentials",sB={fP:"anonymous",CS:lA,NONE:"none"},tB=[],uB=[],Sfa=new Xg(window.location);function Tfa(){tB.length=0;var a=M.get("crossOrigin",{}),b;for(b in a){var c=a[b];vB(c.pattern,c.value,c.priority,!0)}tB.sort(wB)}function wB(a,b){return xb(b.priority,a.priority)}
function kA(a){if(a){a="string"===typeof a?new Xg(a):a;a:{var b=a.toString();if(tB)for(var c=0,d=tB.length;c<d;c++)if(tB[c].pattern.test(b)){b=tB[c].crossOrigin;break a}b=void 0}if(b)return b;if(a.j&&!gh(a,Sfa))return"anonymous"}return"none"}function vB(a,b,c,d){tB.push({pattern:"string"===typeof a?new RegExp(a):a,crossOrigin:b,priority:c||0});d||tB.sort(wB)}function Ufa(){var a=M.get("trustedUris",{}),b=M.get("userTrustedUris",{});Zh(b,a,!0);uB.length=0;for(var c in a)uB.push(new RegExp(c))}
function xB(a){if(a&&uB){var b="string"===typeof a?a:a.toString();return uB.some(function(a){return a.test(b)})}return!1};function CB(a,b,c,d,e,f){bA.call(this,a,b,c,d,e,f);this.P=b;this.u=0;this.log=Vfa}w(CB,bA);var Vfa=E.V("os.style.FallbackIconImage"),Wfa=/^data/i;
CB.prototype.I=function(){this.u++;var a=this.P;if(1===this.u){if(a&&Wfa.test(a)&&this.crossOrigin){E.ta(this.log,"attempting to retry data URL "+a+" with an empty crossOrigin value");this.g=0;this.crossOrigin=null;this.load();return}this.u++}if(2===this.u){var b=new Xg(a),c=new lB;if(a&&c.handles("GET",b)){E.ta(this.log,"attempting to retry URL "+a+" through the proxy");this.g=0;this.l=rB(a);this.load();return}this.u++}3===this.u?(E.ta(this.log,"falling back to default icon"),this.g=0,this.l=DB,
this.load()):(E.error(this.log,"Unknown error accessing icon!"),CB.C.I.call(this))};dA=function(a,b,c,d,e,f){var h=aA.get(b,d,f);h||(h=new CB(a,b,c,d,e,f),aA.set(b,d,f,h));return h};function EB(a){a=a||{};if(null==a.opacity&&null!=a.color){var b=ff(a.color);b&&"number"==typeof b[3]&&!isNaN(b[3])&&(a.opacity=b[3])}eA.call(this,a);this.Ea=0;this.Vh(this.Ca,this)}w(EB,eA);EB.prototype.j=function(){if(this.Ea)return this.Ea;var a=this.Ef(),b=EB.C.j.call(this);a&&(this.Ea=b=32*b/Math.min(a[0],a[1]));return b};EB.prototype.Ca=function(){var a=this.g.g;2<=a&&this.Bl(this.Ca,this);2===a&&this.g.l==DB&&(this.K=1,this.l=0)};var Xfa={lP:"onChange",LP:"onExpire",gQ:"onInterval"},FB={href:"http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png",scale:1},GB=/https?:\/\/maps\.google\.com\/mapfiles\/kml\//i;function HB(){return{path:"http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png"}}function IB(a){return a?a.replace(GB,"v1541734487/images/icons/kml/"):""}
var JB=[{title:"Yellow Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png"},{title:"Blue Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/blue-pushpin.png"},{title:"Green Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/grn-pushpin.png"},{title:"Light Blue Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/ltblu-pushpin.png"},{title:"Pink Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/pink-pushpin.png"},{title:"Purple Push Pin",
path:"http://maps.google.com/mapfiles/kml/pushpin/purple-pushpin.png"},{title:"Red Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/red-pushpin.png"},{title:"White Push Pin",path:"http://maps.google.com/mapfiles/kml/pushpin/wht-pushpin.png"},{title:"Letter A",path:"http://maps.google.com/mapfiles/kml/paddle/a.png"},{title:"Letter B",path:"http://maps.google.com/mapfiles/kml/paddle/b.png"},{title:"Letter C",path:"http://maps.google.com/mapfiles/kml/paddle/c.png"},{title:"Letter D",path:"http://maps.google.com/mapfiles/kml/paddle/d.png"},
{title:"Letter E",path:"http://maps.google.com/mapfiles/kml/paddle/e.png"},{title:"Letter F",path:"http://maps.google.com/mapfiles/kml/paddle/f.png"},{title:"Letter G",path:"http://maps.google.com/mapfiles/kml/paddle/g.png"},{title:"Letter H",path:"http://maps.google.com/mapfiles/kml/paddle/h.png"},{title:"Letter I",path:"http://maps.google.com/mapfiles/kml/paddle/i.png"},{title:"Letter J",path:"http://maps.google.com/mapfiles/kml/paddle/j.png"},{title:"Letter K",path:"http://maps.google.com/mapfiles/kml/paddle/k.png"},
{title:"Letter L",path:"http://maps.google.com/mapfiles/kml/paddle/l.png"},{title:"Letter M",path:"http://maps.google.com/mapfiles/kml/paddle/m.png"},{title:"Letter N",path:"http://maps.google.com/mapfiles/kml/paddle/n.png"},{title:"Letter O",path:"http://maps.google.com/mapfiles/kml/paddle/o.png"},{title:"Letter P",path:"http://maps.google.com/mapfiles/kml/paddle/p.png"},{title:"Letter Q",path:"http://maps.google.com/mapfiles/kml/paddle/q.png"},{title:"Letter R",path:"http://maps.google.com/mapfiles/kml/paddle/r.png"},
{title:"Letter S",path:"http://maps.google.com/mapfiles/kml/paddle/s.png"},{title:"Letter T",path:"http://maps.google.com/mapfiles/kml/paddle/t.png"},{title:"Letter U",path:"http://maps.google.com/mapfiles/kml/paddle/u.png"},{title:"Letter V",path:"http://maps.google.com/mapfiles/kml/paddle/v.png"},{title:"Letter W",path:"http://maps.google.com/mapfiles/kml/paddle/w.png"},{title:"Letter X",path:"http://maps.google.com/mapfiles/kml/paddle/x.png"},{title:"Letter Y",path:"http://maps.google.com/mapfiles/kml/paddle/y.png"},
{title:"Letter Z",path:"http://maps.google.com/mapfiles/kml/paddle/z.png"},{title:"Number 1",path:"http://maps.google.com/mapfiles/kml/paddle/1.png"},{title:"Number 2",path:"http://maps.google.com/mapfiles/kml/paddle/2.png"},{title:"Number 3",path:"http://maps.google.com/mapfiles/kml/paddle/3.png"},{title:"Number 4",path:"http://maps.google.com/mapfiles/kml/paddle/4.png"},{title:"Number 5",path:"http://maps.google.com/mapfiles/kml/paddle/5.png"},{title:"Number 6",path:"http://maps.google.com/mapfiles/kml/paddle/6.png"},
{title:"Number 7",path:"http://maps.google.com/mapfiles/kml/paddle/7.png"},{title:"Number 8",path:"http://maps.google.com/mapfiles/kml/paddle/8.png"},{title:"Number 9",path:"http://maps.google.com/mapfiles/kml/paddle/9.png"},{title:"Number 10",path:"http://maps.google.com/mapfiles/kml/paddle/10.png"},{title:"Blue Blank",path:"http://maps.google.com/mapfiles/kml/paddle/blu-blank.png"},{title:"Blue Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/blu-diamond.png"},{title:"Blue Circle",path:"http://maps.google.com/mapfiles/kml/paddle/blu-circle.png"},
{title:"Blue Square",path:"http://maps.google.com/mapfiles/kml/paddle/blu-square.png"},{title:"Blue Stars",path:"http://maps.google.com/mapfiles/kml/paddle/blu-stars.png"},{title:"Green Blank",path:"http://maps.google.com/mapfiles/kml/paddle/grn-blank.png"},{title:"Green Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/grn-diamond.png"},{title:"Green Circle",path:"http://maps.google.com/mapfiles/kml/paddle/grn-circle.png"},{title:"Green Square",path:"http://maps.google.com/mapfiles/kml/paddle/grn-square.png"},
{title:"Green Stars",path:"http://maps.google.com/mapfiles/kml/paddle/grn-stars.png"},{title:"Light Blue Blank",path:"http://maps.google.com/mapfiles/kml/paddle/ltblu-blank.png"},{title:"Light Blue Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/ltblu-diamond.png"},{title:"Light Blue Circle",path:"http://maps.google.com/mapfiles/kml/paddle/ltblu-circle.png"},{title:"Light Blue Square",path:"http://maps.google.com/mapfiles/kml/paddle/ltblu-square.png"},{title:"Light Blue Stars",path:"http://maps.google.com/mapfiles/kml/paddle/ltblu-stars.png"},
{title:"Pink Blank",path:"http://maps.google.com/mapfiles/kml/paddle/pink-blank.png"},{title:"Pink Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/pink-diamond.png"},{title:"Pink Circle",path:"http://maps.google.com/mapfiles/kml/paddle/pink-circle.png"},{title:"Pink Square",path:"http://maps.google.com/mapfiles/kml/paddle/pink-square.png"},{title:"Pink Stars",path:"http://maps.google.com/mapfiles/kml/paddle/pink-stars.png"},{title:"Yellow Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/ylw-diamond.png"},
{title:"Yellow Circle",path:"http://maps.google.com/mapfiles/kml/paddle/ylw-circle.png"},{title:"Yellow Square",path:"http://maps.google.com/mapfiles/kml/paddle/ylw-square.png"},{title:"Yellow Stars",path:"http://maps.google.com/mapfiles/kml/paddle/ylw-stars.png"},{title:"White Blank",path:"http://maps.google.com/mapfiles/kml/paddle/wht-blank.png"},{title:"White Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/wht-diamond.png"},{title:"White Circle",path:"http://maps.google.com/mapfiles/kml/paddle/wht-circle.png"},
{title:"White Square",path:"http://maps.google.com/mapfiles/kml/paddle/wht-square.png"},{title:"White Stars",path:"http://maps.google.com/mapfiles/kml/paddle/wht-stars.png"},{title:"Red Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/red-diamond.png"},{title:"Red Circle",path:"http://maps.google.com/mapfiles/kml/paddle/red-circle.png"},{title:"Red Square",path:"http://maps.google.com/mapfiles/kml/paddle/red-square.png"},{title:"Red Stars",path:"http://maps.google.com/mapfiles/kml/paddle/red-stars.png"},
{title:"Purple Diamond",path:"http://maps.google.com/mapfiles/kml/paddle/purple-diamond.png"},{title:"Purple Circle",path:"http://maps.google.com/mapfiles/kml/paddle/purple-circle.png"},{title:"Purple Square",path:"http://maps.google.com/mapfiles/kml/paddle/purple-square.png"},{title:"Purple Stars",path:"http://maps.google.com/mapfiles/kml/paddle/purple-stars.png"},{title:"Arrow Reverse",path:"http://maps.google.com/mapfiles/kml/shapes/arrow-reverse.png"},{title:"Arrow",path:"http://maps.google.com/mapfiles/kml/shapes/arrow.png"},
{title:"Donut",path:"http://maps.google.com/mapfiles/kml/shapes/donut.png"},{title:"Forbidden",path:"http://maps.google.com/mapfiles/kml/shapes/forbidden.png"},{title:"Info I",path:"http://maps.google.com/mapfiles/kml/shapes/info-i.png"},{title:"Polygon",path:"http://maps.google.com/mapfiles/kml/shapes/polygon.png"},{title:"Diamond",path:"http://maps.google.com/mapfiles/kml/shapes/open-diamond.png"},{title:"Square",path:"http://maps.google.com/mapfiles/kml/shapes/square.png"},{title:"Star",path:"http://maps.google.com/mapfiles/kml/shapes/star.png"},
{title:"Target",path:"http://maps.google.com/mapfiles/kml/shapes/target.png"},{title:"Triangle",path:"http://maps.google.com/mapfiles/kml/shapes/triangle.png"},{title:"Crosshairs",path:"http://maps.google.com/mapfiles/kml/shapes/cross-hairs.png"},{title:"Square",path:"http://maps.google.com/mapfiles/kml/shapes/placemark_square.png"},{title:"Circle",path:"http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png"},{title:"Shaded Dot",path:"http://maps.google.com/mapfiles/kml/shapes/shaded_dot.png"},
{title:"Dining",path:"http://maps.google.com/mapfiles/kml/shapes/dining.png"},{title:"Coffee",path:"http://maps.google.com/mapfiles/kml/shapes/coffee.png"},{title:"Bars",path:"http://maps.google.com/mapfiles/kml/shapes/bars.png"},{title:"Snack Bar",path:"http://maps.google.com/mapfiles/kml/shapes/snack_bar.png"},{title:"Man",path:"http://maps.google.com/mapfiles/kml/shapes/man.png"},{title:"Woman",path:"http://maps.google.com/mapfiles/kml/shapes/woman.png"},{title:"Wheel Chair Accessible",path:"http://maps.google.com/mapfiles/kml/shapes/wheel_chair_accessible.png"},
{title:"Parking Lot",path:"http://maps.google.com/mapfiles/kml/shapes/parking_lot.png"},{title:"Cabs",path:"http://maps.google.com/mapfiles/kml/shapes/cabs.png"},{title:"Bus",path:"http://maps.google.com/mapfiles/kml/shapes/bus.png"},{title:"Truck",path:"http://maps.google.com/mapfiles/kml/shapes/truck.png"},{title:"Rail",path:"http://maps.google.com/mapfiles/kml/shapes/rail.png"},{title:"Airports",path:"http://maps.google.com/mapfiles/kml/shapes/airports.png"},{title:"Ferry",path:"http://maps.google.com/mapfiles/kml/shapes/ferry.png"},
{title:"Heliport",path:"http://maps.google.com/mapfiles/kml/shapes/heliport.png"},{title:"Subway",path:"http://maps.google.com/mapfiles/kml/shapes/subway.png"},{title:"Tram",path:"http://maps.google.com/mapfiles/kml/shapes/tram.png"},{title:"Info",path:"http://maps.google.com/mapfiles/kml/shapes/info.png"},{title:"Circle",path:"http://maps.google.com/mapfiles/kml/shapes/info_circle.png"},{title:"Flag",path:"http://maps.google.com/mapfiles/kml/shapes/flag.png"},{title:"Rainy",path:"http://maps.google.com/mapfiles/kml/shapes/rainy.png"},
{title:"Water",path:"http://maps.google.com/mapfiles/kml/shapes/water.png"},{title:"Snowflake Simple",path:"http://maps.google.com/mapfiles/kml/shapes/snowflake_simple.png"},{title:"Marina",path:"http://maps.google.com/mapfiles/kml/shapes/marina.png"},{title:"Fishing",path:"http://maps.google.com/mapfiles/kml/shapes/fishing.png"},{title:"Sailing",path:"http://maps.google.com/mapfiles/kml/shapes/sailing.png"},{title:"Swimming",path:"http://maps.google.com/mapfiles/kml/shapes/swimming.png"},{title:"Ski",
path:"http://maps.google.com/mapfiles/kml/shapes/ski.png"},{title:"Parks",path:"http://maps.google.com/mapfiles/kml/shapes/parks.png"},{title:"Campfire",path:"http://maps.google.com/mapfiles/kml/shapes/campfire.png"},{title:"Picnic",path:"http://maps.google.com/mapfiles/kml/shapes/picnic.png"},{title:"Campground",path:"http://maps.google.com/mapfiles/kml/shapes/campground.png"},{title:"Ranger Station",path:"http://maps.google.com/mapfiles/kml/shapes/ranger_station.png"},{title:"Toilets",path:"http://maps.google.com/mapfiles/kml/shapes/toilets.png"},
{title:"Poi",path:"http://maps.google.com/mapfiles/kml/shapes/poi.png"},{title:"Hiker",path:"http://maps.google.com/mapfiles/kml/shapes/hiker.png"},{title:"Cycling",path:"http://maps.google.com/mapfiles/kml/shapes/cycling.png"},{title:"Motorcycling",path:"http://maps.google.com/mapfiles/kml/shapes/motorcycling.png"},{title:"Horseback Riding",path:"http://maps.google.com/mapfiles/kml/shapes/horsebackriding.png"},{title:"Play",path:"http://maps.google.com/mapfiles/kml/shapes/play.png"},{title:"Golf",
path:"http://maps.google.com/mapfiles/kml/shapes/golf.png"},{title:"Trail",path:"http://maps.google.com/mapfiles/kml/shapes/trail.png"},{title:"Shopping",path:"http://maps.google.com/mapfiles/kml/shapes/shopping.png"},{title:"Movies",path:"http://maps.google.com/mapfiles/kml/shapes/movies.png"},{title:"Convenience",path:"http://maps.google.com/mapfiles/kml/shapes/convenience.png"},{title:"Grocery",path:"http://maps.google.com/mapfiles/kml/shapes/grocery.png"},{title:"Arts",path:"http://maps.google.com/mapfiles/kml/shapes/arts.png"},
{title:"Home Garden Business",path:"http://maps.google.com/mapfiles/kml/shapes/homegardenbusiness.png"},{title:"Electronics",path:"http://maps.google.com/mapfiles/kml/shapes/electronics.png"},{title:"Mechanic",path:"http://maps.google.com/mapfiles/kml/shapes/mechanic.png"},{title:"Gas Stations",path:"http://maps.google.com/mapfiles/kml/shapes/gas_stations.png"},{title:"Real Estate",path:"http://maps.google.com/mapfiles/kml/shapes/realestate.png"},{title:"Salon",path:"http://maps.google.com/mapfiles/kml/shapes/salon.png"},
{title:"Dollar",path:"http://maps.google.com/mapfiles/kml/shapes/dollar.png"},{title:"Euro",path:"http://maps.google.com/mapfiles/kml/shapes/euro.png"},{title:"Yen",path:"http://maps.google.com/mapfiles/kml/shapes/yen.png"},{title:"Firedept",path:"http://maps.google.com/mapfiles/kml/shapes/firedept.png"},{title:"Hospitals",path:"http://maps.google.com/mapfiles/kml/shapes/hospitals.png"},{title:"Lodging",path:"http://maps.google.com/mapfiles/kml/shapes/lodging.png"},{title:"Phone",path:"http://maps.google.com/mapfiles/kml/shapes/phone.png"},
{title:"Caution",path:"http://maps.google.com/mapfiles/kml/shapes/caution.png"},{title:"Earthquake",path:"http://maps.google.com/mapfiles/kml/shapes/earthquake.png"},{title:"Falling Rocks",path:"http://maps.google.com/mapfiles/kml/shapes/falling_rocks.png"},{title:"Post Office",path:"http://maps.google.com/mapfiles/kml/shapes/post_office.png"},{title:"Police",path:"http://maps.google.com/mapfiles/kml/shapes/police.png"},{title:"Sunny",path:"http://maps.google.com/mapfiles/kml/shapes/sunny.png"},{title:"Partly Cloudy",
path:"http://maps.google.com/mapfiles/kml/shapes/partly_cloudy.png"},{title:"Volcano",path:"http://maps.google.com/mapfiles/kml/shapes/volcano.png"},{title:"Camera",path:"http://maps.google.com/mapfiles/kml/shapes/camera.png"},{title:"Webcam",path:"http://maps.google.com/mapfiles/kml/shapes/webcam.png"}];function KB(){Wz.call(this)}w(KB,Wz);
KB.prototype.g=function(a){a.src||(a.src=DB);var b=a.src;b&&GB.test(b)&&(a.src=IB(b),!a.anchor&&-1<b.indexOf("/pushpin/")&&(a.anchor=[.33,.07],a.anchorOrigin="bottom-left",a.anchorXUnits="fraction",a.anchorYUnits="fraction"),!a.anchor&&-1<b.indexOf("/paddle/")&&(-1<b.indexOf("-lv")?a.scale=.5:(a.anchor=[.5,.07],a.anchorOrigin="bottom-left",a.anchorXUnits="fraction",a.anchorYUnits="fraction")));a.fill&&a.fill.color&&(a.color=a.fill.color);b=1;for(var c in a)void 0!==a[c]&&(b+=Xb(a[c].toString()));
this.cache[b]||(a={anchor:a.anchor,anchorOrigin:a.anchorOrigin,anchorXUnits:a.anchorXUnits,anchorYUnits:a.anchorYUnits,color:a.color,offset:a.offset,offsetOrigin:a.offsetOrigin,rotation:a.rotation,scale:a.scale,size:a.size,src:a.src},c=new Xg(a.src),a.crossOrigin=kA(c),od&&"none"===a.crossOrigin&&(a.crossOrigin=void 0),this.cache[b]=new EB(a),this.cache[b].id=b);return this.cache[b]};
KB.prototype.l=function(a,b){if(a instanceof eA){b.type="icon";var c=a.A;c&&.5!=c[0]&&.5!=c[1]&&(b.anchor=c);(c=a.o)&&"top-left"!=c&&(b.anchorOrigin=c);(c=a.G)&&"fraction"!=c&&(b.anchorXUnits=c);(c=a.P)&&"fraction"!=c&&(b.anchorYUnits=c);a.g&&a.g.o&&(b.color=pm(a.g.o));(c=a.ka)&&0!==c[0]&&0!==c[1]&&(b.offset=c);(c=a.u)&&"top-left"!=c&&(b.offsetOrigin=c);c=a.l;void 0!==c&&0!==c&&(b.rotation=c);c=a.K;void 0!==c&&1!==c&&(b.scale=c);(c=a.Ef())&&(b.size=c);(a=a.g.l)&&(b.src=a)}};var DB=IB("http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png");function LB(){Wz.call(this)}w(LB,Wz);LB.prototype.g=function(a){return this.j[a.type||"circle"].g(a)};LB.prototype.l=function(a,b){if(a instanceof $r){var c={};b.image=c;for(var d in this.j)this.j[d].l(a,c)}};LB.prototype.eo=function(a){a&&(a=vc(a),delete a.image);LB.C.eo.call(this,a)};var Yfa={point:{points:1},triangle:{points:3},square:{angle:oe(45),points:4}};function MB(){Wz.call(this)}w(MB,Wz);
MB.prototype.g=function(a){var b,c=a.subType||"point",d=1+Xb(c);var e=a.radius;null==e&&(e=3);e=Math.round(1.33*e);d+=e;var f=a.fill;if(f){var h=this.j.fill.g(f);d+=h.id}if(a=a.stroke){var k=this.j.stroke.g(a);d+=k.id}this.cache[d]||((c=Yfa[c])&&void 0!==c.radius2&&(b=e+c.radius2),this.cache[d]=new as({angle:c.angle,fill:h,points:c.points,radius:e,radius2:b,snapToPixel:c.snapToPixel,stroke:k}),this.cache[d].id=d);return this.cache[d]};function NB(){Wz.call(this)}w(NB,Wz);NB.prototype.g=function(a){var b=a.width||3,c=a.color||"rgba(255,255,255,1)";c=pm(c);a=1+b+Xb(c);this.cache[a]||(this.cache[a]=new Zr({width:b,color:c}),this.cache[a].id=a);return this.cache[a]};NB.prototype.l=function(a,b){if(a instanceof Zr){var c=a.Ja(),d={};b.stroke=d;null!==c&&void 0!==c&&(d.color=pm(c));a=a.g;null!==a&&void 0!==a&&(d.width=a)}};function OB(){Wz.call(this)}w(OB,Wz);OB.prototype.g=function(a){var b,c=[];var d=a.zIndex||0;var e=1+d;(b=a.geometry)&&(e+=Xb(b));c.push(e);if(e=a.image){var f=this.j.image.g(e);c.push(f.id)}else c.push(0);if(e=a.fill){var h=this.j.fill.g(e);c.push(h.id)}else c.push(0);if(a=a.stroke){var k=this.j.stroke.g(a);c.push(k.id)}else c.push(0);c=c.join("-");this.cache[c]||(this.cache[c]=new ds({geometry:b,image:f,fill:h,stroke:k,zIndex:d}),this.cache[c].id=c);return this.cache[c]};
OB.prototype.l=function(a,b){if(a instanceof ds){var c=a.Z();c&&(b.geometry=c);c=a.Ac();void 0!==c&&0!==c&&(b.zIndex=c);(c=a.Pa())&&this.j.image.l(c,b);(c=a.lb())&&this.j.fill.l(c,b);(a=a.kb())&&this.j.stroke.l(a,b)}};var Zfa=E.V("os.style.label"),PB={column:null,showColumn:!1};function Bz(a,b){if(a)b=a;else{if(a=b){a:{a=0;for(var c=b.length;a<c;a++)if(b[a].column!==PB.column){a=!1;break a}a=!0}a=!a}b=a?b:[Cz()]}return b}function Cz(a){a=a||PB;return{column:a.column,showColumn:a.showColumn}}function QB(a){return a?a.filter(function(a){return null!=a&&!!a.column}):[]}
var UB=new ij(function(){var a=L.s();if(a.X()&&T(a.X()))var b=T(a.X());else return!1;b=b.bb();if(void 0===b)return!1;var c=RB(a);if(Xk(c,Qn))return!1;var d=up(c),e=Ok();c=Ia();var f=[],h=[],k={},l={},m=SB(Y);m.sort(pfa);for(var n=0,p=m.length;n<p;n++){var r=m[n];if(r instanceof Rz&&r.yb()){var u=r.D(),v=vz(wz.s(),u);v&&v.showLabels&&(l[u]=v.labels,k[u]=[],f.push(r),v=r.Zd(!1),h=h.concat(TB(r,d,v)))}}d={};n=0;for(p=h.length;n<p;n++)if(m=h[n],!(m.id in d)){d[m.id]=!0;v=m.la._style;r=m.la.sourceId;var y=
Dz(m,Bz(v?v.labels:null,l[r])),B=Ez(m);if(B instanceof zo&&y)for(v=vz(wz.s(),r),y=Bk(y,"feature-label",Fz(v.labelSize)),v=(y.width+5)*b,y=(y.height+5)*b,Ny(m)&&k[r].push(m),m=dl(B.Y()),Wk(m,e),e[0]-=v,e[1]-=y,e[2]+=v,e[3]+=y,m=0,r=f.length;m<r;m++)if(B=f[m],v=B.D(),B=B.om(e)){y=0;for(var G=B.length;y<G;y++){var D=B[y];if(!(D.id in d)){var U=D.Z();if(U&&"Point"!=U.T()&&(U=dl(U.Y()),!Sk(e,U)))continue;d[D.id]=!0;My(D)&&k[v].push(D)}}}}for(u in k)0<k[u].length&&(uz(k[u]),(b=a.W(u))&&Gz(b,k[u],"labelVisibility"));
a="Label visibility computed in "+(Ia()-c)+"ms.";E.ta(Zfa,a);return!0});function VB(){UB.isActive()||UB.start(100,5E3)}function Efa(a){try{var b=(new DOMParser).parseFromString(a,"text/html").body.textContent}catch(c){b=a}b=b.trim();return b=b.split("\n").map(function(a){return Pb(a.trim(),50)}).join("\n")}
function Dz(a,b){return b.map(function(b){var c=b.column;switch(c){case "TIME":c=a.la.recordTime||"";break;default:c=a.la[c]}(c=null!=c?c.toString():"")&&b.showColumn&&(c=b.column+": "+c);return c}).filter($u).join("\n")}function Fz(a){a=me(a||14,8,24)+"px";return"bold "+a+"/"+a+" Arial"}function Ez(a){var b,c=a.get("_labelGeometry");c&&(b=a.get(c));b||(b=a.Z());b instanceof Zo&&(b=(a=b.g)&&a[0]||null);return b};function WB(){Wz.call(this)}w(WB,Wz);WB.prototype.g=function(a){return new Qt({text:a.text,textAlign:a.textAlign||"center",textBaseline:a.textBaseline||"middle",font:a.font||Fz(),fill:new cs({color:a.fillColor||"rgba(255,255,255,1)"}),stroke:new Zr({color:a.strokeColor||"rgba(0,0,0,1)",width:void 0!==a.strokeWidth?a.strokeWidth:2}),offsetX:void 0!==a.offsetX?a.offsetX:0,offsetY:void 0!==a.offsetY?a.offsetY:0})};function wz(){this.l=new OB;this.j={circle:new Xz,fill:new Yz,icon:new KB,image:new LB,shape:new MB,stroke:new NB,text:new WB};this.l.eo(this.j);for(var a in this.j)this.j[a].eo(this.j);this.g={}}xa(wz);function Az(a,b){return a.l.g(b)}function vz(a,b){return b in a.g?a.g[b]:null}function XB(a,b){if(b in a.g)a=a.g[b];else{var c=fi(Sy);a=a.g[b]=c}return a};function YB(a,b,c,d){Tz.call(this,a,c,d);this.callback=b}w(YB,Tz);YB.prototype.j=function(){var a=L.s().W(this.Oa);return F(a,"os.layer.ILayer")?a.Nb():null};YB.prototype.g=function(a,b){a=L.s().W(this.Oa);F(a,"os.layer.ILayer")&&this.callback(a,b)};YB.prototype.finish=function(){var a=L.s().W(this.Oa);a instanceof Vz&&Gz(a)};YB.prototype.setValue=function(a){var b=L.s().W(this.Oa);b=this.nh(b)||{};this.g(b,a);this.finish(b)};function ZB(){C.call(this)}w(ZB,C);g=ZB.prototype;g.J=function(){jd(this.nf);ZB.C.J.call(this)};g.nf=null;g.bc=function(a){if(this.nf=a){this.nb=!1;var b;var c=0;for(b=a.length;c<b;c++)a[c].nb&&(this.nb=!0);if(!this.title){var d=[];$a(a,function(a){a.title&&d.push(a.title)});this.title="[ "+d.join(", ")+" ]"}}};g.title=null;g.state="ready";g.nb=!1;g.Ba=null;function $B(){C.call(this)}w($B,ZB);g=$B.prototype;g.wr=0;g.Ki="executed";g.Fa=function(){this.Ki="executed";return aC(this)};g.Db=function(){this.Ki="reverted";return aC(this)};function aC(a){var b;a.wr=0;var c=a.nf;var d=0;for(b=c.length;d<b;d++){c[d].nb&&c[d].Ua(a.Ki,a.Qx,!1,a);var e=!1;try{e="executed"==a.Ki?c[d].Fa():c[d].Db()}catch(f){}if(!e)return a.state="error",a.dispatchEvent(new A("executed")),!1;c[d].nb||a.Qx(null)}a.state="executed"===a.Ki?"success":"ready";return!0}
g.Qx=function(){this.wr++;this.wr==this.nf.length&&this.dispatchEvent(new A(this.Ki))};function bC(){C.call(this);this.ma=Vb();this.j="New Filter";this.l=!1;this.type="";this.A=this.g=this.o=null;this.enabled=!1;this.Xh=!0}w(bC,C);g=bC.prototype;g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.S=function(){return this.j};g.Ta=function(a){this.j=a};g.qb=function(){return this.o};g.fb=function(a){this.o=a};g.T=function(){return this.type};g.Ub=function(a){this.type=a};g.isEnabled=function(){return this.enabled};g.Za=function(a){this.enabled=a};g.sb=function(){return this.g};
g.rg=function(a){var b=this.g;if(this.g=a)try{this.A=Wx(this.g)}catch(c){}this.dispatchEvent(new K("filter",this.g,b))};function cC(a){return a.A?kr(a.A):null}
g.matches=function(a){var b=!1;if(a){b=!0;for(var c={},d=0;d<a.length;d++)c[a[d].name]=a[d].type;a=cC(this).querySelectorAll("PropertyName");for(d=0;d<a.length;d++){var e=a[d];if(e.textContent in c){var f=c[e.textContent];if("decimal"==f){var h=e.nextElementSibling;h&&"Literal"===h.localName||(h=e.parentElement.querySelector("Literal"));if(h&&(e=h.textContent||null)&&isNaN(parseFloat(e))){b=!1;break}}if(Eb(f,"gml:")){b=!1;break}}else{b=!1;break}}}return b};
g.clone=function(){var a=this.ra(),b=new this.constructor;b.restore(a);return b};g.ra=function(a){a||(a={});a.id=this.ma;a.title=this.j;a.description=this.o;a.type=this.type;a.filter=this.g;a.enabled=this.enabled;a.match=this.Xh;return a};g.restore=function(a){this.ma=a.id;this.j=a.title;this.o=a.description;this.type=a.type;this.rg(a.filter);this.Za(a.enabled);this.Xh=a.match};function dC(a,b,c){A.call(this,a);this.key=b||null;this.g=c||null}w(dC,A);function Oj(){this.u=$fa;this.g=[];this.o=M.get(["metrics","baseUrl"]);this.A=M.get(["metrics","interval"],6E4);this.j=0;this.l=new je(this.A);this.l.H("tick",this.ty,!1,this);this.l.start()}var $fa=E.V("os.metrics.GraphiteMetricsProvider");g=Oj.prototype;g.rn=function(){return"application/json"};g.format=function(){return JSON.stringify(this.g)};
g.ty=function(){if(this.o&&0<this.g.length){var a=new Ni;Oi(a,this.o);a.oh="POST";a.U=this;Si(a,"application/json, text/plain, */*");a.H("success",this.gK,!1,this);a.H("error",this.aL,!1,this);a.load()}};g.gK=function(){this.g=[];this.j=0};g.aL=function(){E.error(this.u,"Failed to send metrics to server - "+this.o);this.j+=1;3<=this.j&&(E.error(this.u,"Metrics will not be sent to server, too many failures."),this.l.stop(),this.g=[])};var aga={bP:"map.features.addFeature",cP:"map.features.addFeatures",dP:"map.features.addLabel",eP:"map.features.addLayer",iP:"map.features.setBackGroundColor",nP:"map.features.clearSelection",oP:"map.features.clearState",qP:"map.features.copyCoordinates",rP:"map.contextMenu.copyCoordinates",sP:"map.keyboard.copyCoordinates",EP:"map.feature.draw",OP:"map.features.flyTo",PP:"map.features.flyToExtent",QP:"map.keyboard.generalImport",dQ:"map.features.importState",sQ:"map.features.layerCount",wQ:"map.features.loadFromArea",
xQ:"map.features.loadFromCoordinates",yQ:"map.features.loadFromCountry",NQ:"map.feature.measureToolToggle",SQ:"map.features.mapMode-2d",TQ:"map.features.mapMode-3d",cR:"map.feature.openLayers",dR:"map.keyboard.openLayers",pR:"map.features.queryWorld",qR:"map.redo",sR:"map.features.removeFeature",tR:"map.features.removeFeatures",uR:"map.features.removeLayer",wR:"map.features.resetRoll",xR:"map.keyboard.resetRoll",yR:"map.features.resetRotation",zR:"map.contextMenu.resetRotation",AR:"map.keyboard.resetRotation",
BR:"map.features.resetTilt",CR:"map.keyboard.resetTilt",DR:"map.features.resetView",ER:"map.contextMenu.resetView",FR:"map.keyboard.resetView",IR:"map.features.saveState",JR:"map.keyboard.saveState",PR:"map.features.share",KR:"map.features.screenCapture",LR:"map.features.screenCapture",MR:"map.keyboard.search",XR:"map.features.layers",YR:"map.keyboard.layers",ZR:"map.features.showLedgend",aS:"map.features.showLedgendContext",pS:"map.features.toggleMode",rS:"map.undo",tS:"map.units.feet",uS:"map.units.imperial",
vS:"map.units.metric",wS:"map.units.mile",xS:"map.units.nautical",yS:"map.units.nauticalmile",zS:"map.units.yard",ES:"map.stats.error-webglInitFailed",FS:"map.stats.error-webglPerfCaveat",GS:"map.stats.error-webglUnsupported"},nca="settings.reset",Sz="layers.features.changeVectorAutoRefresh";function P(){C.call(this);this.l={};this.j=M.get("metrics.enabled",!1);this.u=this.o=null;this.j&&(window.addEventListener("beforeunload",this.bL.bind(this)),this.o=this.o?this.o:new Oj,this.l=M.get("metrics.values")||{},this.save(),Yd(document.body,"click",this.tN))}w(P,C);xa(P);var Pj=E.V("os.metrics.Metrics");g=P.prototype;g.J=function(){z(this.g);this.g=null;z(this.u);this.u=null};g.isEnabled=function(){return this.j};g.bL=function(){this.j&&this.save()};
g.save=function(){this.j?(M.set("metrics.values",this.l),E.info(Pj,"Metrics locally saved")):E.hb(Pj,"Metrics were not saved: "+(this.j?"storage not available":"not enabled"))};g.reset=function(){this.j?(this.l={},this.save(),this.dispatchEvent("metrics:reset"),E.info(Pj,"Metrics reset")):E.hb(Pj,"Metrics were not reset: "+(this.j?"storage not available":"not enabled"))};
function eC(a,b){a=a.split(".");for(var c=a.pop().replace(fC,""),d=0;d<a.length&&(b=b[a[d]],null!=b);d++);if(b)for(var e in b)if(b.hasOwnProperty(e)&&c==e.replace(fC,""))return!0;return!1}
function O(a,b,c){try{if(a.j&&!Hb(Tb(b))){if(a.o){var d=a.o;d.l.enabled&&d.g.push({name:"opensphere."+b,value:c})}var e=b.split("."),f=e[e.length-1],h=kc(a.l,e);null!=h&&(c=bga.test(f)?Math.max(h,c):cga.test(f)?Math.min(h,c):h+c);if(c!=h){ai(a.l,e,c);var k=e.join(".").replace(fC,"");a.dispatchEvent(new hj(k,c))}}else E.ta(Pj,"Metrics disabled or no key provided - skipped update")}catch(l){E.error(Pj,"updateMetric caused un-expected exception.",l)}}
g.tN=function(a){try{var b=a.target,c=b.attributes.getNamedItem("metric"),d=c?c.value:null;Hb(Tb(d))&&b.parentElement&&(d=(c=b.parentElement.attributes.getNamedItem("metric"))?c.value:null);O(P.s(),d,1)}catch(e){E.error(Pj,"recordClickEvent caused un-expected exception.",e)}};var qba=[{alpha:1,color:[187,187,187],ratio:0},{alpha:1,color:[220,150,75],ratio:38.25},{alpha:1,color:[255,150,0],ratio:63.75},{alpha:1,color:[255,255,0],ratio:127.5},{alpha:1,color:[0,255,0],ratio:255}],fC=/#(.*)/;E.V("os.metrics");
var bga=/^max-/,cga=/^min-/;Q.directive("fbText",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/filter/text.html"}}]);var gC={string:/.*/,decimal:/^\-?\d+((\.|,)\d+)?$/,integer:/^\-?\d+$/};function hC(a,b,c,d){d.$parsers.unshift(function(c){var e=a.expr.column.type,h=gC[e];if(h&&h.test(c))return d.$setValidity("type",!0),b.attr("title",""),c;d.$setValidity("type",!1);b.attr("title","Please enter a valid "+e)})}hC.$inject=["$scope","$element","$attrs","$ctrl"];
Q.directive("coltypecheck",[function(){return{require:"ngModel",link:hC}}]);Q.directive("fbBetween",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/filter/between.html",controller:iC,controllerAs:"betweenCtrl"}}]);function iC(a){this.v=a;this.min=0;this.max=1;if(null!=a.expr.literal){var b=a.expr.literal.split(/\s*,\s*/);2==b.length&&(this.min=parseFloat(b[0]),this.max=parseFloat(b[1]))}this.jd();a.$on("$destroy",this.g.bind(this))}iC.$inject=["$scope"];iC.prototype.g=function(){this.v=null};
iC.prototype.jd=function(){var a=parseFloat(this.min),b=parseFloat(this.max),c="";isNaN(a)||(c+=a+", ");isNaN(b)||(c+=b);this.v.expr.literal=c};iC.prototype.onChange=iC.prototype.jd;function jC(a,b,c,d,e,f,h,k){this.localName=a;this.j=b;this.u=c||b;this.o=d||null;this.l=e||"";this.A=h||"fb-text";this.hint=f||"";this.gm=!0===k||!1}jC.prototype.S=function(){return this.j};jC.prototype.getTitle=jC.prototype.S;jC.prototype.vk=function(){return this.u};jC.prototype.getShortTitle=jC.prototype.vk;g=jC.prototype;g.gk=function(){return this.l};g.gg=function(){return this.A};
g.sb=function(a,b){var c=null;a&&(c="<"+this.localName+(this.l?" "+this.l:"")+"><PropertyName>"+a+"</PropertyName>",b&&!this.gm&&(c+="<Literal><![CDATA["+b.trim()+"]]\x3e</Literal>"),c+="</"+this.localName+">");return c};g.pd=function(){return""};g.Yd=function(a){return a.find("*").filter(function(){return"PropertyName"==this.localName}).first().text()};g.Nh=function(a){return this.gm?null:a.find("*").filter(function(){return"Literal"==this.localName}).first().text()};
g.matches=function(a){return a&&a.length?a[0].localName==this.localName:!1};g.Wk=function(a){return a&&this.o?-1<this.o.indexOf(a):a&&0===a.indexOf("gml:")?!1:!0};g.Zb=function(a,b){return this.gm?!0:a?(b=gC[b])&&b.test(a)?!0:!1:!1};function kC(){jC.call(this,"And","is between","between",["integer","decimal"],'hint="between"',void 0,"fb-between")}w(kC,jC);g=kC.prototype;g.pd=function(a,b){return(b=lC(b))&&2==b.length&&b[0]!==b[1]?"("+a+">="+b[0]+"&&"+a+"<="+b[1]+")":""};
g.sb=function(a,b){var c="";(b=lC(b))&&2==b.length&&b[0]!==b[1]&&(c=this.gk(),c="<"+this.localName+(c?" "+c:"")+">",c+="<PropertyIsGreaterThanOrEqualTo><PropertyName>"+a+"</PropertyName><Literal><![CDATA["+b[0]+"]]\x3e</Literal></PropertyIsGreaterThanOrEqualTo><PropertyIsLessThanOrEqualTo><PropertyName>"+a+"</PropertyName><Literal><![CDATA["+b[1]+"]]\x3e</Literal></PropertyIsLessThanOrEqualTo>",c+="</"+this.localName+">");return c};
function lC(a){if(a){var b=a.trim().split(/\s*,\s*/);if(2==b.length&&(a=parseFloat(b[0]),b=parseFloat(b[1]),!isNaN(a)&&!isNaN(b)))return[Math.min(a,b),Math.max(a,b)]}return null}g.Nh=function(a){var b=[];a.find("Literal").each(function(a,d){b.push($(d).text())});return b.join(", ")};g.matches=function(a){return a?"between"==a.attr("hint"):!1};g.Zb=function(a,b){if(a&&(a=a.trim().split(/\s*,\s*/),2==a.length)){var c=parseFloat(a[1]);b=gC[b];return b.test(parseFloat(a[0]))&&b.test(c)}return!1};function mC(){jC.call(this,"PropertyIsEqualTo","is equal to","=")}w(mC,jC);mC.prototype.pd=function(a,b){return null!=b?a+"=="+uy(b):""};function nC(){jC.call(this,"PropertyIsGreaterThan","is greater than",">")}w(nC,jC);nC.prototype.pd=function(a,b){return Hb(Tb(b))?"":a+">"+uy(b)};function oC(){jC.call(this,"PropertyIsGreaterThanOrEqualTo","is greater than or equal to",">=")}w(oC,jC);oC.prototype.pd=function(a,b){return Hb(Tb(b))?"":a+">="+uy(b)};function dga(a){var b=null;a&&a.clipboardData?b=a.clipboardData.getData("text"):void 0!==window.clipboardData&&(b=window.clipboardData.getData("text"));return void 0!==b?b:null};Q.directive("fbList",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/filter/list.html"}}]);function pC(a,b){this.v=a;this.L=b;this.j=/[\n\r\t](?=[\S])/g;this.L.on("paste",this.g.bind(this));a.$on("$destroy",this.l.bind(this))}pC.$inject=["$scope","$element"];pC.prototype.g=function(a){if(null!=dga(a.originalEvent)){var b=this;setTimeout(function(){b.v.expr.literal=b.v.expr.literal.replace(b.j,", ").replace(/[\n\r\t]\s*/g,"").trim();R(b.v)},10)}};
pC.prototype.l=function(){this.L.off("paste");this.L=this.v=null};function qC(a,b,c,d){d.$parsers.unshift(function(c){var e=a.expr.column.type,h=gC[e],k=c?c.split(/\s*,\s*/):null;d.$setValidity("type",!0);b.attr("title","");if(k&&k.length)for(var l=0,m=k.length;l<m;l++){var n=k[l];if(h&&!n||!h.test(n)){d.$setValidity("type",!1);b.attr("title","Please enter a valid "+e+" for item "+(l+1));c=void 0;break}}else d.$setValidity("type",!1),b.attr("title","Please enter a value"),c=void 0;return c})}
qC.$inject=["$scope","$element","$attrs","$ctrl"];Q.directive("coltypelist",[function(){return{require:"ngModel",controller:pC,link:qC}}]);function rC(a,b,c,d,e,f){jC.call(this,"Or",a||"is in list",b||"in list",c||null,d||'hint="in list"',e||"e.g. A, B, ...",f||"fb-list");this.g="in list"}w(rC,jC);function sC(a){var b=[];if(a&&(a=a.trim().split(/\s*,\s*/),0<a.length))for(var c=0;c<a.length;c++){var d=a[c].trim();d&&b.push(d)}return b}g=rC.prototype;g.pd=function(a,b){b=sC(b);return 0<b.length?(b=b.map(uy),"(["+b.join(",")+"]).indexOf(String("+a+"))!=-1"):""};
g.sb=function(a,b){var c="";b=sC(b);if(0<b.length){c=this.gk();c="<"+this.localName+(c?" "+c:"")+">";for(var d=0,e=b.length;d<e;d++)c+="<PropertyIsEqualTo><PropertyName>"+a+"</PropertyName><Literal><![CDATA["+b[d].trim()+"]]\x3e</Literal></PropertyIsEqualTo>";c+="</"+this.localName+">"}return c};g.Nh=function(a){var b=[];a.find("Literal").each(function(a,d){b.push($(d).text())});return b.join(", ")};g.matches=function(a){return a?a.attr("hint")==this.g:!1};
g.Zb=function(a,b){var c=!1;if(a){a=a.trim().split(/\s*,\s*/);b=gC[b];c=!0;for(var d=0,e=a.length;d<e;d++)if(!b.test(a[d])){c=!1;break}}return c};function tC(){jC.call(this,"PropertyIsLike","is like","like",["string"],'wildCard="*" singleChar="." escape="\\"',"e.g. abc*")}w(tC,jC);tC.prototype.pd=function(a,b){return Hb(Tb(b))?"":(b=vy(b),b=String(b).replace(/([\\"])/g,"\\$1"),"/^"+b+"$/i.test("+a+")")};Q.directive("fbTextNoColCheck",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/filter/textnocolcheck.html",controller:uC,controllerAs:"textNoColCheckCtrl"}}]);function uC(a){this.v=a;this.start=void 0;null!=a.expr.literal&&(this.start=a.expr.literal);this.jd();a.$on("$destroy",this.g.bind(this))}uC.$inject=["$scope"];uC.prototype.g=function(){this.v=null};uC.prototype.jd=function(){this.v.expr.literal=this.start};uC.prototype.onChange=uC.prototype.jd;function vC(a,b,c,d,e,f){c=c||["integer","decimal"];jC.call(this,"And",a||"is like",b||"like",c,d||'hint="is like numeric"',e||"e.g. 12.34*",f||"fb-text-no-col-check");this.g="is like numeric"}w(vC,jC);g=vC.prototype;g.pd=function(a,b){return(b=wC(b))&&2==b.length&&b[0]!==b[1]?"("+a+">="+b[0]+"&&"+a+"<"+b[1]+")":""};
g.sb=function(a,b){var c="";if((b=wC(b))&&2==b.length){var d=this.gk();c+="<"+this.localName+(d?" "+d:"")+">";c+="<PropertyIsGreaterThanOrEqualTo><PropertyName>"+a+"</PropertyName><Literal><![CDATA["+b[0]+"]]\x3e</Literal></PropertyIsGreaterThanOrEqualTo><PropertyIsLessThan><PropertyName>"+a+"</PropertyName><Literal><![CDATA["+b[1]+"]]\x3e</Literal></PropertyIsLessThan>";c+="</"+this.localName+">"}return c};
function wC(a){if(a){var b=a.trim().split("*")[0];a=parseFloat(b);if(!isNaN(a)){b=b.split(".");var c=0;2==b.length&&(c=-b[1].length);return[a,(a+Math.pow(10,c)).toFixed(Math.abs(c))]}}return null}g.Zb=function(a,b){if(!a)return!1;a=Number(a.trim().split("*")[0]);return(b=gC[b])&&b.test(a)?!0:!1};g.Nh=function(a){return a.find("PropertyIsGreaterThanOrEqualTo Literal").text()+"*"};g.matches=function(a){return a?a.attr("hint")==this.g:!1};function xC(){jC.call(this,"PropertyIsNull","is empty","empty",void 0,void 0,void 0,"span",!0)}w(xC,jC);xC.prototype.pd=function(a){return"("+a+"==null||"+a+'==="")'};function yC(){jC.call(this,"PropertyIsLessThan","is less than","<")}w(yC,jC);yC.prototype.pd=function(a,b){return Hb(Tb(b))?"":a+"<"+uy(b)};function zC(){jC.call(this,"PropertyIsLessThanOrEqualTo","is less than or equal to","<=")}w(zC,jC);zC.prototype.pd=function(a,b){return Hb(Tb(b))?"":a+"<="+uy(b)};function AC(){rC.call(this,"is like list","like list",["string"],'hint="like list"',"A, b*, ...","fb-list");this.g="like list"}w(AC,rC);AC.prototype.pd=function(a,b){b=sC(b);return 0<b.length?(b=b.map(function(a){a=vy(a);return String(a).replace(/([\\"])/g,"\\$1")}),"/^("+b.join("|")+")$/i.test("+a+")"):""};
AC.prototype.sb=function(a,b){if(a=AC.C.sb.call(this,a,b))a=a.replace(/<PropertyIsEqualTo/g,'<PropertyIsLike wildCard="*" singleChar="." escape="\\"'),a=a.replace(/<\/PropertyIsEqualTo/g,"</PropertyIsLike");return a};Q.directive("fbListNoColCheck",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/filter/listnocolcheck.html"}}]);function BC(){vC.call(this,"is like list","like list",["decimal","integer"],"","eg. 12.45*, 3.568*, ...","fb-list-no-col-check");this.g="like list numeric"}w(BC,vC);function CC(a){var b=[];if(a&&(a=a.trim().split(/\s*,\s*/),0<a.length))for(var c=0;c<a.length;c++){var d=a[c].trim();d&&b.push(d)}return b}g=BC.prototype;g.pd=function(a,b){var c="";b=CC(b);if(0<b.length){for(var d=[],e=0,f=b.length;e<f;e++){var h=BC.C.pd.call(this,a,b[e]);h&&d.push(h)}0<d.length&&(c+="("+d.join("||")+")")}return c};
g.sb=function(a,b){var c="";b=CC(b);if(0<b.length){c+='<Or hint="like list numeric">';for(var d=0,e=b.length;d<e;d++)c+=BC.C.sb.call(this,a,b[d]);c+="</Or>"}return c};g.Zb=function(a,b){var c=!1;a=CC(a);if(0<a.length){c=!0;for(var d=0,e=a.length;d<e;d++){var f=Number(a[d].trim().split("*")[0]),h=gC[b];h&&h.test(f)||(c=!1)}}return c};g.matches=function(a){return a?a.attr("hint")==this.g:!1};
g.Nh=function(a){var b=[];a.find("PropertyIsGreaterThanOrEqualTo Literal").each(function(a,d){b.push($(d).text()+"*")});return b.join(", ")};function DC(a){this.g=a;jC.call(this,"Not","not");this.hint=a.hint||""}w(DC,jC);DC.prototype.S=function(){return this.g.S().replace("is","is not")};DC.prototype.getTitle=DC.prototype.S;DC.prototype.vk=function(){return"not "+this.g.vk()};DC.prototype.getShortTitle=DC.prototype.vk;g=DC.prototype;g.gk=function(){return this.g.gk()};g.gg=function(){return this.g.gg()};g.pd=function(a,b){return(a=this.g.pd(a,b))?"!("+a+")":""};g.sb=function(a,b){return(a=this.g.sb(a,b))?"<Not>"+a+"</Not>":""};g.Yd=function(a){return this.g.Yd(a)};
g.Nh=function(a){return this.g.Nh(a)};g.matches=function(a){return DC.C.matches.call(this,a)&&1==a.children().length&&this.g.matches(a.children().first())};g.Wk=function(a){return this.g.Wk(a)};g.Zb=function(a,b){return this.g.Zb(a,b)};function EC(){DC.call(this,new kC)}w(EC,DC);function FC(){jC.call(this,"PropertyIsNotEqualTo","is not equal to","!=")}w(FC,jC);FC.prototype.pd=function(a,b){return null!=b?a+"!="+uy(b):""};function GC(){DC.call(this,new tC)}w(GC,DC);function HC(){DC.call(this,new xC)}w(HC,DC);var IC=["And","Or","Not"],JC=[new mC,new FC,new yC,new zC,new nC,new oC,new tC,new GC,new kC,new EC,new xC,new HC,new rC,new DC(new rC),new AC,new DC(new AC),new vC,new BC],ega=["Intersects","Disjoint","BBOX"];
function KC(a,b,c){b=null!=b?b:-1;var d="";if(a&&-1==ega.indexOf(a.localName)){var e=a.childNodes;a=LC(a);for(var f=0;f<e.length;f++){var h=e[f];0<f&&a&&(d+=" "+a.toUpperCase()+" ");var k=LC(h);if("Not"===k)d+=k.toUpperCase()+" ("+KC(h,void 0,c)+")";else if(k)d+="("+KC(h,void 0,c)+")";else if("PropertyIsNotEqualTo"===h.localName&&c)k=h.childNodes,h=MC(k),k=NC(k),d+="NOT ("+h+" = "+k+")";else{k=h;var l=c;h="";if(null!=k){if(k){var m=k.parentNode;m=null!=m&&!(null!=k&&null!=LC(k))&&null!=m&&null!=LC(m)}else m=
!1;if(m){var n=k.childNodes;if(n&&0<n.length)if(m=MC(n),1<n.length){l=NC(n,l);a:{if(k){n=0;for(var p=JC.length;n<p;n++)if(JC[n].localName==k.localName){k=JC[n].vk();break a}}k=null}h+=m+" "+k+" "+l}else 1==n.length&&(h=l?h+(m+" = '' or "+m+" is null"):h+(m+" is empty"))}else(k=LC(k))&&(h+=k)}d+=null!=h?h:""}}}0<b&&d.length>b&&(d=d.substr(0,b-3)+"...");return d}function MC(a){var b="";a&&a[0]&&(b=su(a[0],!0).trim());return b}
function NC(a,b){var c="";a&&a[1]&&(c=a[1].textContent||"",c=isNaN(c)?"'"+c+"'":c,b&&Qb(c,"*")&&(c=c.replace(/\*/g,"%")));return c}function LC(a){return a&&(a=a instanceof Node?a.localName:"string"==typeof a?a:a?String(a):null)&&(a=IC.indexOf(a),-1<a)?IC[a]:null}function fga(a){if(a){var b=angular.element(a);return eb(JC,function(a){return a.matches(b)})}return null}function gga(a){return(a=OC.rd(a))?a.uf():null}
function hga(a){for(var b=0,c=JC.length;b<c;b++)if(JC[b].Wk(a.type))return!0;return!1}
function PC(a){var b=[];if(!Hb(a)){var c=Qw(Y).filter(function(b){return F(b,"os.filter.IFilterable")?b.uf()===a:!1});if(c.length)b=c.reduce(function(a,b){return a=a.concat(b.pm())},b);else{c=a.lastIndexOf("!!");var d=a.indexOf("#");-1!=c?(a=a.substring(c+2),-1!=a.lastIndexOf(":")&&(a=a.substring(a.lastIndexOf(":")+1))):-1!=d&&(a=a.substring(d+1),-1!=a.indexOf("#")&&(a=a.substring(0,a.lastIndexOf("#"))));b.push(a)}}return b};function QC(){return{restrict:"AE",replace:!0,template:"<div></div>",scope:{items:"=",directiveFunction:"=",generic:"@",alwaysSwitch:"@"},controller:RC,controllerAs:"uiSwitch"}}Q.directive("uiswitch",[QC]);
function RC(a,b,c){this.scope=a;this.L=b;this.B="true"===this.scope.alwaysSwitch;this.o=this.g=null;this.A=c;this.u=[];this.u.push(a.$watch("items",this.MH.bind(this)));a.$on("uiSwitch:update",this.Wr.bind(this));a.$on("$destroy",this.vL.bind(this));this.j=this.l=null;"MutationObserver"in window&&MutationObserver?(this.l=new MutationObserver(this.My.bind(this)),this.l.observe(this.L[0],{childList:!0})):this.j=new Fh(this.My,25,this);this.Wr()}RC.$inject=["$scope","$element","$compile"];var SC=E.V("os.ui.UISwitchCtrl");
g=RC.prototype;g.MH=function(){this.Wr()};
g.Wr=function(){var a=this.scope.items;a=q(a)?a:[a];var b=this.scope.directiveFunction,c=this.scope.generic||null,d=null;E.ta(SC,"Checking UI ui: "+b+" items: "+a+" generic: "+c);if(a&&b)for(var e=0,f=a.length;e<f;e++){var h=b(a[e]);if(d&&d!=h){d=c;break}else d=h}E.ta(SC,"The new UI is "+d);this.B||d!=this.o?(TC(this),d&&(b="<"+d+"></"+d+">",c=this.scope.$new(),c.items=a,this.bu(c),this.g=this.A(b)(c),this.L.append(this.g),this.j&&this.j.start())):this.g&&(c=this.g.scope(),c.items=a,R(c));this.o=
d};g.bu=function(){};g.My=function(){this.scope.$emit("controls.changed",this.L.outerWidth(),this.L.outerHeight())};function TC(a){if(a.g){a.scope.$emit("controls.changed",-a.L.outerWidth(),-a.L.outerHeight());var b=a.g.scope();a.g.remove();b&&b.$destroy();a.g=null;a.o=null}}g.vL=function(){for(var a=0,b=this.u.length;a<b;a++)this.u[a]();this.l&&(this.l.disconnect(),this.l=null);this.j&&(this.j.stop(),this.j.dispose(),this.j=null);TC(this);this.A=this.L=this.scope=null};Q.directive("opuiswitch",[function(){var a=QC();a.template="<span></span>";a.scope.expr="=";a.controller=UC;return a}]);function UC(a,b,c){RC.call(this,a,b,c)}w(UC,RC);UC.$inject=["$scope","$element","$compile"];UC.prototype.bu=function(a){a.expr=this.scope.expr};Q.directive("expression",[function(){return{restrict:"AE",replace:!0,scope:{expr:"=",columns:"="},templateUrl:"v1541734487/views/filter/expression.html",controller:VC,controllerAs:"exprCtrl"}}]);function WC(){this.literal=this.op=this.column=this.g=null}WC.prototype.sb=function(){return this.op?this.op.sb(this.column.field||this.column.name,this.literal):null};
function XC(a,b){if(b){b=angular.element(b);a.literal="";for(var c=0,d=JC.length;c<d;c++)if(JC[c].matches(b)){c=JC[c];a.g=c.Yd(b);a.literal=c.Nh(b);a.op=c;break}}}WC.prototype.Zb=function(a){return this.column&&this.op?this.op.Zb(a,this.column.type):!1};WC.prototype.clone=function(){var a=new WC;a.column=this.column;a.op=this.op;a.literal=this.literal;var b=this.sb();if(b)try{XC(a,kr($.parseXML(b)))}catch(c){}return a};
function VC(a){this.scope=a;this.scope.ops=JC;a.columns&&(a.columns=a.columns.filter(this.HL,this));var b=a.expr;b.g&&!b.column&&(b.column=Ix(this.scope.columns,b.g));b.column=b.column||this.scope.columns[0];b.op=b.op||JC[0];a.$watch("expr.column",this.Gw.bind(this));a.$watch("expr.op",this.wA.bind(this));this.Gw(b.column,null)}VC.$inject=["$scope","$element"];g=VC.prototype;
g.HL=function(a){if(!/datetime/i.test(a.type))for(var b=0,c=this.scope.ops.length;b<c;b++)if(this.scope.ops[b].Wk(a.type))return!0;return!1};g.Gw=function(a,b){a!==b&&(this.scope.ops=JC.filter(this.MD,this),a=this.scope.expr,a.op=-1<this.scope.ops.indexOf(a.op)?a.op:this.scope.ops[0],this.wA())};g.wA=function(){try{var a=this.scope.exprForm.literal;a.$viewValue&&(a.$setViewValue(a.$viewValue),a.$$parseAndValidate())}catch(b){}};
g.MD=function(a){return this.scope&&this.scope.expr&&this.scope.expr.column?a.Wk(this.scope.expr.column.type):!1};g.gg=function(a){return a?a.gg():null};VC.prototype.getUi=VC.prototype.gg;Q.directive("expressionnodeui",[function(){return{restrict:"AE",replace:!0,template:'<span><span ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit the expression"></i></span><span ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the expression"></i></span></span>',controller:YC,controllerAs:"nodeUi"}}]);function YC(a){this.v=a}YC.$inject=["$scope","$element"];YC.prototype.remove=function(){this.v.$emit("filterbuilder.remove",this.v.item)};
YC.prototype.remove=YC.prototype.remove;YC.prototype.Rc=function(){this.v.$emit("advancedfilterbuilder.editExpr",this.v.item)};YC.prototype.edit=YC.prototype.Rc;function ZC(a){ko.call(this);this.nodeType="expression";this.g=null;qo(this,!1);this.j=a?"<expressionnodeviewui></expressionnodeviewui>":"<expressionnodeui></expressionnodeui>";this.cb=!1}w(ZC,ko);ZC.prototype.getExpression=function(){return this.g};ZC.prototype.getExpression=ZC.prototype.getExpression;g=ZC.prototype;g.Gl=function(){var a="";this.g&&(a=this.g.sb()||"");return a};
g.ba=function(){if(this.g&&this.g.column){var a=this.g.column.name,b=this.g.op.S();return a+" <b>"+b+"</b> "+(this.g.op.gm?"":this.g.literal||"")}return ZC.C.ba.call(this)};g.Kc=function(){return'<i class="fa fa-fw fa-file mr-1"></i>'};g.nc=function(a){ZC.C.nc.call(this,a);this.g=a.getExpression()};g.format=function(){var a=ro(20*this.depth);a=a+"<nodetoggle></nodetoggle><nodeicons></nodeicons>"+('<span class="text-truncate flex-fill">'+this.ba()+"</span>");return a+=this.j};
function $C(a,b,c){c=new ZC(c);var d=new WC;c.g=d;XC(d,a);d.g&&!d.column&&(d.column=Ix(b,d.g));return c};Q.directive("groupnodeui",[function(){return{restrict:"AE",replace:!0,template:'<span class="flex-fill form-inline"><span class="flex-fill"><select class="custom-select" ng-model="item.grouping" ng-options="key for (key, value) in groupUi.groups" title="Whether results can match any or all filters in the group"/></span><span><span ng-show="!groupUi.isRoot" ng-click="groupUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the expression"></i></span></span></span>',controller:aD,controllerAs:"groupUi"}}]);
function aD(a){this.v=a;a=this.v.item;this.groups=iga;this.isRoot=!a.getParent()}aD.$inject=["$scope","$element"];var iga={"All (AND)":"And","Any (OR)":"Or",Not:"Not"};aD.prototype.remove=function(){this.v.$emit("filterbuilder.remove",this.v.item)};aD.prototype.remove=aD.prototype.remove;Q.directive("groupnodeviewui",[function(){return{restrict:"AE",replace:!0,template:"<span><span>{{groupUi.group}}</span></span>",controller:bD,controllerAs:"groupUi"}}]);function bD(a){this.v=a;this.group=jga[this.v.item.Vi()]}bD.$inject=["$scope","$element"];var jga={And:"All (AND)",Or:"Any (OR)",Not:"Not"};Q.directive("nodetogglefolder",[function(){var a=io();a.template="<span>"+a.template+"<i class=\"fa fa-fw action\" ng-class=\"{'fa-folder': item.collapsed, 'fa-folder-open': !item.collapsed}\"></i></span>";a.controller=cD;return a}]);function cD(a,b){jo.call(this,a,b)}w(cD,jo);cD.$inject=["$scope","$element"];cD.prototype.g=function(){};cD.prototype.j=function(){};function dD(a){ko.call(this);this.grouping="And";qo(this,!1);this.j=a?"<groupnodeviewui></groupnodeviewui>":"<groupnodeui></groupnodeui>";this.collapsed=!1}w(dD,ko);g=dD.prototype;g.Vi=function(){return this.grouping};g.th=function(a){this.grouping=a};g.Gl=function(a,b){var c=this.na(),d="";if(c){d=this.grouping;a&&(d+=' namehint="'+eD(a)+'"');b&&(d+=' description="'+eD(b)+'"');d="<"+d+">";a=0;for(b=c.length;a<b;a++)d+=c[a].Gl();d+="</"+this.grouping+">"}return d};
g.nc=function(a){dD.C.nc.call(this,a);this.th(a.Vi())};g.format=function(){var a=ro(19*this.depth);return a=a+"<nodetogglefolder></nodetogglefolder><nodeicons></nodeicons>"+this.j};Q.directive("confirm",[function(){return{restrict:"E",replace:!0,transclude:!0,scope:!0,templateUrl:"v1541734487/views/window/confirm.html",controller:fD,controllerAs:"confirm"}}]);
function gD(a,b){a=a||{};b=b||{};b.confirmCallback=a.confirm||wa;b.confirmValue=a.confirmValue||void 0;b.cancelCallback=a.cancel||wa;b.yesText=a.yesText||"OK";b.yesIcon=a.yesIcon||"fa fa-check";b.yesButtonClass=a.yesButtonClass||"btn-primary";b.yesButtonTitle=a.yesButtonTitle||"";b.noText=void 0!==a.noText?a.noText:"Cancel";b.noIcon=void 0!==a.noIcon?a.noIcon:"fa fa-ban";b.noButtonTitle=a.noButtonTitle||"";b.noButtonClass=a.noButtonClass||"btn-secondary";b.formClass=a.formClass||"form-horizontal";
var c=a.windowOptions||{},d=c.height||140,e=c.width||325;fx({"header-class":c.headerClass||"",label:c.label||"Confirm",icon:c.icon||"",x:c.x||"center",y:c.y||"center",width:e,"min-width":c.minWidth||e,"max-width":c.maxWidth||e,height:d,"min-height":c.minHeight||d,"max-height":c.maxHeight||d,modal:null!=c.modal?c.modal:!0,"show-close":null!=c.showClose?c.showClose:!1,"no-scroll":null!=c.noScroll?c.noScroll:!0},"<confirm>"+(a.prompt||"Are you sure?")+"</confirm>",void 0,void 0,void 0,b)}
function fD(a,b,c){this.v=a;this.L=b;null==this.v.valid&&(this.v.valid=!0);this.g=new ft(document);this.g.H("key",this.j,!1,this);c(function(){a.$emit("window.ready")});a.$on("$destroy",this.l.bind(this))}fD.$inject=["$scope","$element","$timeout"];fD.prototype.l=function(){z(this.g);this.v=this.L=null};fD.prototype.cancel=function(){this.v.cancelCallback&&this.v.cancelCallback();kx(this.L)};fD.prototype.cancel=fD.prototype.cancel;
fD.prototype.confirm=function(){if(this.v.confirmCallback){var a=this.v.confirmValue;null==a&&(a=this.L.find(".js-confirm-text").children().first().scope().confirmValue);this.v.confirmCallback(a)}kx(this.L)};fD.prototype.confirm=fD.prototype.confirm;fD.prototype.j=function(a){27==a.keyCode&&this.cancel()};Q.directive("advancedfilterbuilder",[function(){return{restrict:"AE",replace:!0,scope:{root:"=",columns:"=",viewonly:"=?"},templateUrl:"v1541734487/views/filter/advancedfilterbuilder.html",controller:hD,controllerAs:"advCtrl"}}]);
function hD(a){this.v=a;this.l=new Fh(this.o,50,this);this.g=null;this.gridOptions={multiSelect:!1};this.tree=[];this.selected=null;this.editing=!1;iD(this);a.$on("tabChange",this.jK.bind(this));a.$on("advancedfilterbuilder.editExpr",this.mI.bind(this));a.$on("$destroy",this.GL.bind(this))}hD.$inject=["$scope","$element"];var jD=E.V("os.ui.filter.AdvancedFilterBuilderCtrl");g=hD.prototype;g.GL=function(){this.v=null;z(this.l);this.l=null;kD()};g.jK=function(){iD(this);this.j();kD()};
function iD(a){a.tree=[a.v.root];a.v.$broadcast(lD);a.l.start()}g.mI=function(a,b){this.Rc(b.getExpression(),b)};g.AD=function(a,b){this.j();this.v.viewonly||(b.g=a);iD(this)};function mD(a){var b=a.selected;q(b)&&(0<b.length?b=b[0]:b=null);b||(b=a.v.root);return b}g.zD=function(a){this.j();var b=mD(this);if(b){b=b instanceof dD?b:b.getParent();var c=new ZC;c.g=a;b.R(c,void 0,0);b.collapsed=!1;this.g=c;iD(this)}else E.error(jD,"Failed adding expression. Unable to determine parent.")};
g.HC=function(){this.j();var a=mD(this);if(a){a=a instanceof dD?a:a.getParent();var b=new dD;a.R(b,void 0,0);a.collapsed=!1;this.g=b;iD(this)}else E.error(jD,"Failed adding group. Unable to determine parent.")};hD.prototype.addGrouping=hD.prototype.HC;hD.prototype.GC=function(){this.Rc()};hD.prototype.addExpr=hD.prototype.GC;
hD.prototype.Rc=function(a,b){if(!ix("editExpr")){var c=!!a;this.editing=!0;a=a?a.clone():new WC;var d={expr:a,columns:this.v.columns};d.columns&&d.columns.sort(kga);gD({confirm:c&&b?this.AD.bind(this,a,b):this.zD.bind(this,a),cancel:this.j.bind(this),prompt:'<expression expr="expr" columns="columns"></expression>',windowOptions:{id:"editExpr",x:"center",y:"center",label:(c?"Edit":"Add")+" Expression","show-close":!1,"no-scroll":!0,width:750,"min-width":500,"max-widith":1E3,height:"auto",icon:"fa fa-file",
modal:"true"}},d)}};hD.prototype.edit=hD.prototype.Rc;hD.prototype.Sl=function(){return this.selected&&this.selected!==this.v.root};hD.prototype.canRemove=hD.prototype.Sl;hD.prototype.remove=function(){this.Sl()&&this.v.$emit("filterbuilder.remove",this.selected)};hD.prototype.remove=hD.prototype.remove;hD.prototype.j=function(){this.editing=!1};hD.prototype.o=function(){this.g&&(this.selected=this.g,this.v.$broadcast(nD,this.g),this.g=null,R(this.v))};function kga(a,b){return Kb(a.name,b.name)}
function kD(){var a=angular.element("#editExpr");a&&kx(a)};function oD(a){if(a.classList)return a.classList;a=a.className;return ta(a)&&a.match(/\S+/g)||[]}function pD(a,b){return a.classList?a.classList.contains(b):gb(oD(a),b)}function qD(a,b){a.classList?a.classList.add(b):pD(a,b)||(a.className+=0<a.className.length?" "+b:b)}function lga(a,b){if(a.classList)$a(b,function(b){qD(a,b)});else{var c={};$a(oD(a),function(a){c[a]=!0});$a(b,function(a){c[a]=!0});a.className="";for(var d in c)a.className+=0<a.className.length?" "+d:d}}
function rD(a,b){a.classList?a.classList.remove(b):pD(a,b)&&(a.className=ab(oD(a),function(a){return a!=b}).join(" "))}function mga(a,b){a.classList?$a(b,function(b){rD(a,b)}):a.className=ab(oD(a),function(a){return!gb(b,a)}).join(" ")};function sD(a,b){this.menu=null;this.lp=a;this.order=null!=b?b:Number.MAX_VALUE};function nga(a){if(!Ca(a.j))return a.j;if(a.l)throw Error("illegal state: ActionManager.getActionArgs() infinite recursion");a.l=!0;var b=a.j.call(a);a.l=!1;return b}function oga(a){var b=nga(a),c=!1;0<a.u.length&&a.u.forEach(function(a){a(b)});a.A.forEach(function(a){a.isEnabled(b)?Vg(this.g.ha.ha,a.sg)?(this.g.remove(a.sg),this.g.set(a.sg,a)):(this.g.set(a.sg,a),c=!0):c|=this.g.remove(a.sg)},a);c&&pga(a);a.g.Mc()}function pga(a){a.dispatchEvent(new A("enabledActionsChanged"))};function tD(a,b,c){this.o=a;this.l=b;this.ph=c||new sD(null,Number.MAX_VALUE)}tD.prototype.getName=function(){return this.o};tD.prototype.getName=tD.prototype.getName;tD.prototype.qb=function(){return this.l};tD.prototype.getDescription=tD.prototype.qb;tD.prototype.j=function(){return this.ph};function uD(a){tD.call(this,a.S(),a.qb(),a.ph);this.g=a}w(uD,tD);uD.prototype.mm=function(){return this.g};uD.prototype.getAction=uD.prototype.mm;function vD(a,b){tD.call(this,a,null,b);this.g=[]}w(vD,tD);vD.prototype.getItems=function(){return this.g};vD.prototype.getItems=vD.prototype.getItems;function wD(){tD.call(this,"",null)}w(wD,tD);wD.prototype.dG=!0;wD.prototype.isSeparator=wD.prototype.dG;function xD(a){tD.call(this,a,null)}w(xD,tD);xD.prototype.eG=!0;xD.prototype.isSeparatorHeader=xD.prototype.eG;function yD(a,b,c){a.path="v1541734487/";a.isFlat="true"==a.flatten;a.menuLimit=25;a.isSubmenu=!1;this.scope=a;this.element=b;this.timeout=c;this.l=[];this.element&&this.element[0]&&(this.key=Yd(this.element[0],"contextmenu",this.A,!0,this));this.scope.titletext&&this.scope.titleselector&&(b=this.scope.titletext,$(this.scope.titleselector).children().prepend(b));b=this.scope.provider;"true"==a.visible&&b&&b.o()&&this.position();a.$on("$destroy",this.destroy.bind(this));this.l.push(a.$watch("provider",
this.tx.bind(this)));this.l.push(a.$watch("position",this.uJ.bind(this)))}yD.$inject=["$scope","$element","$timeout"];yD.prototype.destroy=function(){this.tx(null,this.scope.provider);for(var a=0,b=this.l.length;a<b;a++)this.l[a]();this.key&&(ee(this.key),this.key=null);this.scope=this.Na=this.element=null};yD.prototype.A=function(a){2===a.button&&(a.preventDefault(),a.stopPropagation())};
yD.prototype.invoke=function(a){var b=this.scope.provider;return a&&Ca(a.hE)?(O(P.s(),a.g,1),b.invoke(a.sg),!0):!1};yD.prototype.invoke=yD.prototype.invoke;g=yD.prototype;g.uJ=function(a,b){a!=b&&this.position()};g.tx=function(a,b){b&&b.M("enabledActionsChanged",this.o,!1,this);a&&(this.o(),a.H("enabledActionsChanged",this.o,!1,this))};
function qga(a,b){if(!b)return[];var c={};$a(b,function(a){var b=a.ph;if(b)if(b=b.menu){b=b.split(".");var d=kc(c,b);d?d[a.S()]=a:(d={},d[a.S()]=a,ai(c,b,d))}else c[a.S()]=a;else c[a.S()]=a},a);b=[];zD(a,c,b);return b}
function zD(a,b,c){$a(jc(b),function(a){var d=b[a];if(d&&d.j&&d.S)zb(c,new uD(d),this.RA);else if(Ba(d)){var e=a.split("/");if(1<e.length){a=e[1];var f=e[0]}a=new vD(a,new sD(f));f=a.getItems();zb(c,a,this.RA);zD(this,d,f)}},a);a=void 0;for(var d=0;d<c.length;d++){var e=void 0;e=(e=c[d].ph)&&e.lp;a!=e&&(0<d&&(jb(c,new wD,d),d++),null!=e&&(jb(c,new xD(e.replace(/^[0-9]*:/,"")),d),d++));a=e}}
g.RA=function(a,b){var c=a.ph.lp,d=b.ph.lp;return c===d?(a=a.ph.order,b=b.ph.order,a===b?1:a>b?1:-1):null!=c?null!=d?c===d?1:c>d?1:-1:-1:1};
g.position=function(){var a=this.element,b=this.scope.position||a.position();this.timeout(function(){a.removeClass("right-menu");if(Ba(b)){var c=b.left||b.x,d=b.top||b.y,e=a.outerWidth(),f=a.outerHeight(),h=br(window);c+e>h.width-5?(c=h.width-5-e,a.addClass("right-menu")):c+2*e>h.width-5&&a.addClass("right-menu");d=0>d?5:d;d+f>h.height-30&&(d=h.height-30-f);a.css("left",(0>c?5:c)+"px");a.css("top",d+"px")}else"right"==b&&a.addClass("right-menu");a.addClass("show")},25)};
g.ZM=function(){this.timeout(t(function(){if(this.element&&!this.scope.isFlat){var a=this.element.find(".js-action-menu-item-list .js-dropdown-submenu").find(".js-action-menu-item-list");if(a&&0<a.length){var b=a.scope(),c=br(window),d=a.find(".js-dropdown-item"),e=0;if(d&&0<d.length){e=d[0].offsetHeight;var f=d.length;d=a.outerHeight()-f*e;e=parseInt((c.height-d)/e-1,10)}e<f&&(a.scope().isMoreButton=!0);b.menuLimit=e;R(a.scope());b=a.offset();if(Ba(b)){d=b.top||b.y;e=a.outerHeight();b=br(window);
c=this.element.outerWidth();var h=this.element.offset();d=0>d?5:d;f=a[0].parentElement;a=a.closest(".js-dropdown-submenu, .dropdown-item").offset();d=e>b.height-30?-1*h.top:d+e>b.height-30?b.height-e-30-this.element.offset().top:a.top-h.top;f.style.top=d+"px";a=h.left||h.x;a+c+f.offsetWidth>b.width&&f.offsetWidth<=a&&(f.style.left="auto",f.style.right="100%")}}}},this),50,!0)};yD.prototype.positionSubmenu=yD.prototype.ZM;
yD.prototype.o=function(){this.scope.actions=qga(this,this.scope.provider.g.Mc());this.scope.menuLimit=100;this.scope.isMoreButton=!1;R(this.scope)};yD.prototype.nF=function(){this.scope.provider.aT(this.element);this.close()};yD.prototype.handleMoreResults=yD.prototype.nF;
function AD(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/menu/actionmenu.html",controller:yD,controllerAs:"actionMenu",scope:{provider:"=",position:"=",visible:"@",flatten:"@",titletext:"@",titleselector:"@",isSubmenu:"=?",isMoreButton:"=?"}}}Q.directive("actionMenu",AD);var rx="menuclose";function BD(a,b,c){yD.call(this,a,b,c);this.element.removeClass("show");this.j=this.nL.bind(this);this.g=this.target=null;this.u=new Fh(this.mL,25,this)}w(BD,yD);BD.$inject=["$scope","$element","$timeout"];g=BD.prototype;g.destroy=function(){BD.C.destroy.call(this);this.u.dispose();this.u=null};
g.close=function(a){void 0===a&&(a=!0);this.g=this.target=null;this.element.hasClass("show")&&(a&&N&&N.dispatchEvent(rx),this.element.removeClass("show"),this.element.removeClass("right-menu"),this.element.blur());this.element.find("#js-global-menu__title").remove();a=document;a.removeEventListener("mousedown",this.j,!0);a.removeEventListener("pointerdown",this.j,!0);a.removeEventListener("scroll",this.Hy.bind(this),!0);R(this.scope)};g.open=function(){R(this.scope);this.u.start()};
g.mL=function(){var a=document;a.addEventListener("mousedown",this.j,!0);a.addEventListener("pointerdown",this.j,!0);a.addEventListener("scroll",this.Hy.bind(this),!0)};g.nL=function(a){$(a.target).closest("#js-global-menu").length||this.close()};g.invoke=function(a){return BD.C.invoke.call(this,a)?(this.close(),!0):!1};
g.position=function(){var a=this.element,b=this.scope.position||a.position();this.timeout(function(){if(Ba(b)){var c=b.left||b.right||b.x,d=b.top||b.bottom||b.y,e=a.outerWidth(),f=a.outerHeight(),h=br(window);c+e>h.width-5?(c=h.width-5-e,a.addClass("right-menu")):c+2*e>h.width-5&&a.addClass("right-menu");c=0>c?5:c;d=0>d?5:d;d+f>h.height-50&&(d=h.height-50-f);a.css("top","");a.css("bottom","");a.css("left","");a.css("right","");a.css(void 0!==b.right?"right":"left",c+"px");a.css(void 0!==b.bottom?
"bottom":"top",d+"px")}else"right"==b&&a.addClass("right-menu");a.addClass("show")},5)};g.Hy=function(){if(this.g){var a=$(this.target).offset();this.g.left==a.left&&this.g.top==a.top||CD()}};function rga(a,b,c){var d=angular.element("#js-global-menu").scope();d.provider=a;a=d.actionMenu;CD();c&&(a.target=c,a.g=$(c).offset());(a=zk.get("$timeout"))?a(Ga(DD,b,c,void 0)):DD(b,c,void 0)}function CD(){angular.element("#js-global-menu").scope().actionMenu.close()}
function DD(a,b,c){var d=angular.element("#js-global-menu"),e=d.scope(),f=e.actionMenu,h;"string"===typeof b?h=null!=c?c.find(b):angular.element(b):void 0!==b&&(h=b);b=a;null!=h&&(e=h.offset(),e.top&&(e.top-=$(document).scrollTop()),"string"===typeof a?(b=a.split(/\s+/),a=b[0],b=1<b.length?parseInt(b[1],10):2,"right"==a?(a=e.left-d.outerWidth()+h.outerWidth(),h=e.top+h.outerHeight()+b,b={x:a,y:h}):"bottom"==a?(h=e.top-b,b={x:e.left,bottom:d.parent().outerHeight()-h}):b={x:e.left,y:e.top+h.outerHeight()+
b}):(b.x+=e.left,b.y+=e.top));e=d.scope();e.position=b;f.open()}Q.directive("globalMenu",function(){var a=AD();a.scope=!0;a.controller=BD;return a});function ED(a){return function(b){a:{var c=b.target;for(var d=b.type,e=0,f=FD.length;e<f;e++)if(FD[e](c,d)){c=!0;break a}c=!1}if(!c)return a(b)}}var FD=[];function GD(a){a.preventDefault();a.stopPropagation()}function HD(a){2===a.button&&GD(a)}ib(FD,function(a){return a instanceof HTMLInputElement});Q.directive("columnrow",[function(){return{restrict:"E",replace:!0,scope:{item:"="},templateUrl:"v1541734487/views/column/columnrow.html"}}]);Q.directive("columnManager",[function(){return{restrict:"E",replace:!0,scope:{columns:"=",acceptCallback:"=",shownCallback:"="},templateUrl:"v1541734487/views/column/columnmanager.html",controller:ID,controllerAs:"columnManager"}}]);
function ID(a,b){this.v=a;this.L=b;this.g={};this.shownColumns=[];this.shownSelected=[];this.hiddenColumns=[];this.hiddenSelected=[];this.searchResults=[];this.searchIndex=0;this.term="";this.valid=!0;for(a=0;a<this.v.columns.length;a++)b=this.v.columns[a],b.visible?this.shownColumns.push(b.clone()):b.visprotected||this.hiddenColumns.push(b.clone()),this.g[b.id]=b;this.hiddenColumns.sort(Gx);this.tableOptions={fullWidthRows:!0,forceFitColumns:!0,multiSelect:!0,sortable:!0,multiColumnSort:!0,useRowRenderEvents:!0,
dataItemColumnValueExtractor:this.o};this.hiddenConfig=[{id:"hidden",name:"Hidden",field:"name",selectable:!0,formatter:Ax}];this.shownConfig=[{id:"shown",name:"Shown",field:"name",selectable:!0,formatter:Ax}];this.hideDblClick=this.hide.bind(this);this.showDblClick=this.show.bind(this);this.j=new ft(document);this.v.$on("$destroy",this.u.bind(this));JD(this)}ID.$inject=["$scope","$element"];ID.prototype.u=function(){z(this.j);this.L=this.v=null};
ID.prototype.rG=function(a){a?this.j.H("key",this.l,!1,this):this.j.M("key",this.l,!1,this)};ID.prototype.listenForKeys=ID.prototype.rG;
ID.prototype.show=function(a){if(!0===a){for(a=0;a<this.hiddenColumns.length;a++)this.hiddenColumns[a].visible=!0,this.shownColumns.push(this.hiddenColumns[a]);this.hiddenColumns.length=0;this.v.$broadcast(lD)}else if(0<this.hiddenSelected.length){this.hiddenSelected.sort(Gx);for(a=0;a<this.hiddenSelected.length;a++){var b=this.hiddenSelected[a];b.visible=!0;mb(this.hiddenColumns,b);this.shownColumns.push(b)}this.shownSelected=this.hiddenSelected;this.hiddenSelected=[];this.v.$broadcast(lD);this.v.$broadcast(nD,
this.shownSelected[0],!0)}JD(this);this.find(this.searchIndex-1)};ID.prototype.show=ID.prototype.show;
ID.prototype.hide=function(a){if(!0===a){for(a=0;a<this.shownColumns.length;a++)this.shownColumns[a].visible=!1,this.hiddenColumns.push(this.shownColumns[a]);this.shownColumns.length=0}else if(0<this.shownSelected.length)for(a=0;a<this.shownSelected.length;a++){var b=this.shownSelected[a];b.visible=!1;mb(this.shownColumns,b);this.hiddenColumns.push(b)}this.hiddenColumns.sort(Gx);JD(this);this.v.$broadcast(lD);this.find(this.searchIndex-1)};ID.prototype.hide=ID.prototype.hide;
ID.prototype.accept=function(){for(var a=this.v.columns,b=this.shownColumns,c=0;c<this.hiddenColumns.length;c++){var d=this.hiddenColumns[c].id;this.g[d]&&(this.g[d].visible=!1)}for(c=0;c<this.shownColumns.length;c++)d=this.shownColumns[c].id,this.g[d]&&(this.g[d].visible=!0);for(d=c=0;c<b.length;c++,d++){for(;d<a.length&&!a[d].visible;)d++;if(b[c].id!=a[d].id){var e=fb(a,Jx.bind(this,"id",b[c].id));-1<e&&Db(a,e,d>e?d-1:d)}}this.v.acceptCallback&&this.v.acceptCallback();this.v.shownCallback&&this.v.shownCallback(this.shownColumns);
this.close()};ID.prototype.accept=ID.prototype.accept;ID.prototype.close=function(){kx(this.L)};ID.prototype.close=ID.prototype.close;function JD(a){a.valid=0<a.shownColumns.length}ID.prototype.o=function(){return'<columnrow item="item"></columnrow>'};function KD(a,b,c){var d=[];if(b&&(b=Jb(b).toUpperCase(),a[c]))for(var e=0;e<a[c].length;e++)-1<a[c][e].name.toUpperCase().indexOf(b)&&d.push({Yo:a[c][e],list:c});return d}
ID.prototype.find=function(a){""!=this.term&&(this.searchResults=KD(this,this.term,"hiddenColumns").concat(KD(this,this.term,"shownColumns")),this.searchIndex=null!=a?a:-1,this.next())};ID.prototype.find=ID.prototype.find;ID.prototype.clear=function(){this.term="";this.searchResults=[];this.searchIndex=0};ID.prototype.clear=ID.prototype.clear;ID.prototype.next=function(){0<this.searchResults.length&&(this.searchIndex=(this.searchIndex+1)%this.searchResults.length,LD(this))};ID.prototype.next=ID.prototype.next;
ID.prototype.Jn=function(){0<this.searchResults.length&&(this.searchIndex=0==this.searchIndex?this.searchResults.length-1:this.searchIndex-1,LD(this))};ID.prototype.previous=ID.prototype.Jn;function LD(a){var b=a.searchResults[a.searchIndex];"hiddenColumns"==b.list?(a.shownSelected=[],a.hiddenSelected=[b.Yo]):(a.hiddenSelected=[],a.shownSelected=[b.Yo]);a.v.$broadcast(lD);a.v.$broadcast(nD,b.Yo,!0)}
ID.prototype.l=function(a){13===a.keyCode&&(a.preventDefault(),a.stopPropagation(),a.shiftKey?this.Jn():this.next())};Q.directive("textprompt",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/window/textprompt.html",controller:MD,controllerAs:"textPrompt"}}]);function MD(a,b){this.L=b;a.$on("$destroy",this.uL.bind(this));this.j=new ft(document);this.j.H("key",this.tL,!1,this);this.g=new Fh(this.SN,50,this);a.$emit("window.ready");a.$watch("value",this.wK.bind(this))}MD.$inject=["$scope","$element"];g=MD.prototype;g.uL=function(){this.g.dispose();this.j.dispose();this.L=null};
g.wK=function(a){a&&(this.g.stop(),this.g.start())};g.SN=function(){this.L.find(".js-text-prompt__main").select()};g.tL=function(a){27==a.keyCode&&this.close()};g.close=function(){kx(this.L)};MD.prototype.close=MD.prototype.close;function ND(a){if(a&&!Hb(Tb(a))){var b=document.createElement("textarea");b.style.top="-2000px";b.style.left="-2000px";b.style.width="2em";b.style.height="2em";b.value=a;document.body.appendChild(b);b.select();try{var c=document.execCommand("copy")}catch(d){}document.body.removeChild(b);c?(a=(20<a.length?"Value ":'"'+a+'" ')+" copied to clipboard",rj(qj.s(),a,Th)):fx({id:"copy",x:"center",y:"center",label:"Copy","show-close":!0,"no-scroll":!0,"min-width":200,"min-height":90,"max-width":1E3,"max-height":1E3,
modal:!0,width:300,height:"auto",icon:"fa fa-copy"},"textprompt",void 0,void 0,void 0,{text:"Use Ctrl+C to copy",value:a})}};var lD="slickgrid.invalidateRows",nD="slickgrid.scrollToItem";
function OD(){return{restrict:"AE",replace:!0,template:'<div class="slick-grid"></div>',scope:{data:"=",columns:"=",options:"=",contextMenu:"&",columnMenuEnabled:"@",dblClickEnabled:"@",dblClickHandler:"=?",dragEnabled:"@",resizeWith:"@",idField:"@",disableSelection:"@",selected:"=?",useAngular:"@",defaultSortColumn:"@",defaultSortOrder:"@",compare:"=?",getItemMetadata:"=?",rowScope:"=?",cellTooltips:"=?"},controller:PD,controllerAs:"gridCtrl"}}Q.directive("slickgrid",[OD]);
function PD(a,b,c){try{zk.get("$animate").enabled(b,!1)}catch(f){}this.scope=a;this.element=b;this.ka=c;this.A=[];this.K=!1;this.oa=this.resize.bind(this);this.Ia=new Fh(this.CD,50,this);this.A.push(a.$watch("data",this.ns.bind(this)));this.A.push(a.$watch("selected",this.PJ.bind(this)));this.A.push(a.$watch("columns",this.ls.bind(this)));this.A.push(a.$watch("options",this.rJ.bind(this)));this.A.push(a.$on("$destroy",this.dispose.bind(this)));var d=a.$watch("defaultSortColumn",t(function(b){b&&eb(a.columns,
function(a){return b==a.id})&&setTimeout(t(function(){d();this.va&&(this.va.setSortColumn(b,"desc"!==this.scope.defaultSortOrder),this.rr())},this),100)},this));this.o=a.columnMenuEnabled&&"false"!==a.columnMenuEnabled?new px(new aw({type:"root",children:[{label:"Column Order",type:"group",sort:0,children:[{label:"Manage Columns",eventType:"column:manageColumns",tooltip:"Display a window where you can manage your columns",da:['<i class="fa fa-fw fa-columns"></i>'],sort:0},{label:"First",eventType:"column:moveColumnToBeginning",
tooltip:"Move the column to the beginning",da:['<i class="fa fa-fw fa-angle-double-left"></i>'],Aa:Hx,sort:1},{label:"Last",eventType:"column:moveColumnToEnd",tooltip:"Move the column to the end",da:['<i class="fa fa-fw fa-angle-double-right"></i>'],Aa:Hx,sort:2}]},{label:"Edit Columns",type:"group",sort:1,children:[{label:"Hide Column",eventType:"column:removeColumn",tooltip:"Removes the column from the grid",da:['<i class="fa fa-fw fa-eye-slash"></i>'],Aa:kfa,sort:0},{label:"Reset Columns",eventType:"column:resetColumns",
tooltip:"Show all columns and reset their widths",da:['<i class="fa fa-fw fa-refresh"></i>'],sort:100}]}]})):null;this.Hb=new Slick.Data.DataView;void 0!==a.getItemMetadata&&(this.Hb.getItemMetadata=a.getItemMetadata);c=this.hi();c.editable&&(this.element.addClass("editable"),this.scope.$on("slickgrid.commitEdit",this.GH.bind(this)));this.va=new Slick.Grid(b,this.Hb,this.getColumns(),c);this.Hb.onRowCountChanged.subscribe(this.WL.bind(this));this.Hb.onRowsChanged.subscribe(this.IJ.bind(this));this.va.onClick.subscribe(this.er.bind(this));
this.va.onKeyDown.subscribe(this.Kx.bind(this));this.va.onSelectedRowsChanged.subscribe(this.BI.bind(this));this.va.onSort.subscribe(this.rr.bind(this));this.va.onColumnsReordered.subscribe(this.EH.bind(this));this.va.onColumnsResized.subscribe(this.FH.bind(this));this.va.onMouseEnter.subscribe(this.ez.bind(this));this.va.onMouseLeave.subscribe(this.fz.bind(this));a.useAngular&&(this.va.onRowRender.subscribe(this.ps.bind(this)),this.va.onRowRemove.subscribe(this.gz.bind(this)),this.va.onActiveCellChanged.subscribe(this.apply.bind(this)));
if(this.u=a.disableSelection?null:new Slick.RowSelectionModel)this.va.setSelectionModel(this.u),this.Hb.syncGridSelection(this.va,!1);a.$on(lD,this.ks.bind(this));a.$on("slickgrid.invalidateColumns",this.YF.bind(this));a.$on("slickgrid.copyRows",this.JH.bind(this));a.$on(nD,this.LJ.bind(this));a.$on("slickgrid.scrollToCell",this.KJ.bind(this));a.$on("slickgrid.sortSelected",this.YJ.bind(this));a.$on("resize",this.oa);a.cellTooltips=void 0==a.cellTooltips?!0:a.cellTooltips;a.dblClickEnabled&&"false"!==
a.dblClickEnabled&&(null!=a.dblClickHandler?this.va.onDblClick.subscribe(a.dblClickHandler.bind(this)):this.va.onDblClick.subscribe(this.onDblClick.bind(this)));if(a.dragEnabled&&"false"!==a.dragEnabled){this.va.onDragInit.subscribe(this.UL.bind(this));this.va.onDragStart.subscribe(this.VL.bind(this));this.va.onDrag.subscribe(this.dz.bind(this));this.va.onDragEnd.subscribe(this.TL.bind(this));this.G=new je(20);this.aa=0;var e=this.element.find(".slick-viewport");this.G.H("tick",function(){e.scrollTop(e.scrollTop()-
this.aa)},!1,this);this.element.addClass("dragdrop")}this.I=null;a.resizeWith?(this.I=b.parents(a.resizeWith),this.I.resize(this.oa)):this.element.resize(this.oa);this.P=void 0;this.P=a.contextMenu&&a.contextMenu()||void 0;e=this.element.find(".slick-viewport");Yd(e[0],"contextmenu",this.ms,!1,this);Yd(e[0],"mousedown",HD,!0);Yd(e[0],"mouseup",HD,!0);this.scope.$on("contextmenu",this.ms.bind(this));this.o&&(this.o.H("column:removeColumn",this.CH,!1,this),this.o.H("column:resetColumns",this.DH,!1,
this),this.o.H("column:moveColumnToBeginning",this.zH,!1,this),this.o.H("column:moveColumnToEnd",this.AH,!1,this),this.o.H("column:manageColumns",this.Iw,!1,this),b=this.element.find(".slick-header"),Yd(b[0],"contextmenu",this.ar,!1,this),a.$on("column:manageColumns",this.Iw.bind(this)),a.$on("column:contextMenu",this.ar.bind(this)));this.U=this.j=!1}w(PD,x);PD.$inject=["$scope","$element","$compile"];var QD={multiColumnSort:!0};g=PD.prototype;
g.J=function(){PD.C.J.call(this);if(this.element){var a=this.element.find(".slick-header");de(a[0],"contextmenu",this.ar,!1,this);a=this.element.find(".slick-viewport");de(a[0],"contextmenu",this.ms,!1,this);de(a[0],"mousedown",HD,!0);de(a[0],"mouseup",HD,!0)}z(this.o);this.o=null;a=0;for(var b=this.A.length;a<b;a++)this.A[a]();this.A.length=0;z(this.Ia);this.I?(this.I.off("resize"),this.I=null):this.element.off("resize");this.u&&(this.u.destroy(),this.u=null);this.G&&this.G.dispose();this.Hb&&this.Hb.setItems([]);
this.va&&(this.va.invalidateAllRows(),this.va.destroy());this.Hb=this.va=null;this.P=void 0;this.element=null;this.scope=this.scope.data=null};g.hi=function(){if(this.scope.options){var a=vc(QD);yc(a,this.scope.options);return a}return QD};g.getColumns=function(){for(var a=RD(this).slice(),b=a.length,c=[];b--;)SD(a[b])||(c=a.splice(b,1).concat(c));return a};function RD(a){return a.scope.columns||[]}function SD(a){return!("visible"in a)||a.visible}g.getData=function(){return this.scope.data||[]};
function sga(a){var b=TD(a);if(b&&b.length){b=b.slice().sort(xb);var c=b.map(function(a){return this.Hb.getItemByIdx(a)},a).filter($u)}return c||[]}g.IJ=function(a,b){this.Xa()||(this.va.invalidateRows(b.rows),this.va.render())};g.WL=function(){this.Xa()||(this.va.updateRowCount(),this.ib?this.va.render():this.ib=!0)};g.resize=function(){this.Ia.start()};g.CD=function(){this.va.resizeCanvas();var a=TD(this);a&&0<a.length&&this.va.scrollRowIntoView(a[0],!1)};
g.JH=function(a,b){if(Ca(b)){a=sga(this);0===a.length&&(a=this.Hb?this.Hb.getItems():[]);b=b||Tb;for(var c="",d=0;d<a.length;d++)if(c+=b(a[d])+"\n",1E5<c.length){rj(tj,"Data exceeds the maximum copy limit. Please reduce the selected/displayed data and try again.",Rh);c=void 0;break}c&&ND(c.trim())}};g.LJ=function(a,b,c){a=this.Zv(b);void 0!==a&&(c?this.va.scrollRowToTop(a):this.va.scrollRowIntoView(a,!1))};
g.KJ=function(a,b,c){a=b;b=this.Hb.getItems().length-1;a=Math.min(a||0,b||0);b=this.getColumns().length-1;c=Math.min(c||0,b||0);this.va.scrollCellIntoView(a,c,!1)};g.er=function(a,b){this.Kx(a,b)};g.Kx=function(a){a=a&&a.keyCode||0;16!=a&&18!=a&&17!=a&&(this.U=!0,this.scope.$emit("userInteraction"),Dc(function(){this.U=!1},this))};g.xo=function(a){this.va.resetActiveCell();this.Hb.setItems(a,this.scope.idField||"id");this.va.getSortColumns().length&&this.rr()};g.ns=function(){this.xo(this.getData())};
g.ls=function(a){a&&this.getColumns()==a||(this.va.setColumns(this.getColumns()),a=TD(this),null!=this.u&&this.va.setSelectedRows(a))};g.bi=function(a){a&&a.forEach(function(a){a.userModified=!0});this.ls()};
g.EH=function(){if(!this.j){this.j=!0;for(var a=this.va.getColumns(),b=RD(this),c=[],d=0,e=0,f=a.length;d<f;d++,e++){for(;a[d].internal;)d++;for(;e<b.length&&!SD(b[e]);)e++;if(a[d].id!=b[e].id){var h=fb(b,Jx.bind(this,"id",a[d].id));if(-1<h){var k=e>h?e-1:e;ib(c,b[h]);ib(c,b[k]);Db(b,h,k)}}}0<c.length&&this.bi(c);this.j=!1}};
g.FH=function(){if(!this.j){this.j=!0;for(var a=[],b=RD(this),c=this.element.find(".slick-header-column"),d=0,e=c.length;d<e;d++){var f=$(c[d]).outerWidth(),h=$(c[d]).data();0<f&&h&&h.column&&(h=fb(b,Jx.bind(this,"id",h.column.id)),-1<h&&(b[h].width=f,a.push(b[h])))}0<a.length&&this.bi(a);this.j=!1}};g.DH=function(a){(a=a.getContext())&&a.va===this&&(RD(this).forEach(function(a){a.visible=!0;a.width=Math.max(80,Bk(a.name).width+20);a.userModified=!1}),this.bi())};
g.CH=function(a){var b=a.getContext();b&&b.va===this&&b.xe&&(a=RD(this),b=fb(a,Jx.bind(this,"id",b.xe.id)),-1<b&&(a[b].visible=!1,this.bi([a[b]])))};g.zH=function(a){var b=a.getContext();b&&b.va===this&&b.xe&&(a=RD(this),b=fb(a,Jx.bind(this,"id",b.xe.id)),-1<b&&(Db(a,b,0),this.bi([a[b]])))};g.AH=function(a){var b=a.getContext();b&&b.va===this&&b.xe&&(a=RD(this),b=fb(a,Jx.bind(this,"id",b.xe.id)),-1<b&&(Db(a,b,a.length-1),this.bi([a[b]])))};
g.Iw=function(){var a=RD(this);if(a){var b=this.bi.bind(this);fx({label:"Column Manager",icon:"fa fa-columns",x:"center",y:"center",width:"600","min-width":"500","max-width":"700",height:"400","min-height":"350","max-height":"1000","show-close":!0,"no-scroll":!0,modal:!0},'<column-manager columns="columns" accept-callback="acceptCallback" ></column-manager>',void 0,void 0,void 0,{columns:a,acceptCallback:b})}};g.vp=function(){return this.scope.selected};
g.ms=function(a,b){a.preventDefault();var c=null,d=0,e=0;a instanceof Md?(a.stopPropagation(),c=this.vp(a),d=a.clientX,e=a.clientY):b&&2==b.length&&(c=this.vp(),d=b[0],e=b[1]);a=this.scope.selected;b=null;if(a)for(var f=0,h=a.length;f<h;f++){var k=a[f];if(F(k,"os.ui.menu.IMenuSupplier"))if(k=k.Xx(),!b)b=k;else{if(b.constructor!==k.constructor){b=null;break}}else{b=null;break}}a=b||this.P;null!=c&&a instanceof px&&a.open(c,{my:"left top",at:"left+"+d+" top+"+e,of:"#js-window__container"},this)};
g.ar=function(a,b){a.preventDefault();if(a instanceof Md){a.stopPropagation();var c=a.target;var d=pD(c,"slick-header-column")?a.target:rr(c,"slick-header-column");c={my:"left top",at:"left+"+a.clientX+" top+"+a.clientY,of:"#js-window__container"}}else Ba(b)&&(c=b);this.o&&c&&((a=d?$(d).data("column"):void 0)&&a.internal||this.o.open({columns:RD(this),xe:a,va:this},c))};g.rJ=function(){this.va.setOptions(this.hi())};
g.PJ=function(a){this.j||(this.j=!0,a?(a=q(a)?a:[a],a=a.map(this.Zv,this)):a=[],null!=this.u&&this.va.setSelectedRows(a),this.U||this.va.resetActiveCell(),this.j=!1)};g.yG=function(a){return this.va.getDataItem(a)};g.Zv=function(a){return this.Hb.getRowById(a[this.scope.idField||"id"])};
g.BI=function(a,b){if(!this.j){this.j=!0;if(a=b.rows)a=a.map(this.yG,this),a=this.va.getOptions().multiSelect?a:a[0]||null,this.scope.selected=a,this.scope.$emit("slickgrid.selectionChange",a),this.apply();this.j=!1}};g.apply=function(){R(this.scope)};
g.rr=function(){this.Hb.beginUpdate();for(var a=this.va.getSortColumns(),b=this.va.getColumns(),c=0,d=a.length;c<d;c++)for(var e=0,f=b.length;e<f;e++)if(b[e].id==a[c].columnId){a[c].column=b[e];break}b=this.scope.compare||this.ew.bind(this,this.va.getSortColumns());this.Hb.sort(b);this.Hb.endUpdate();this.va.resetActiveCell();this.scope.$emit("slickgrid.sortChanged",a)};
g.ew=function(a,b,c){for(var d=0,e=a.length;d<e;d++){var f=a[d].column.sortField||a[d].column.field,h=a[d].sortAsc?1:-1,k=null;this.scope.options&&(this.scope.options.dataItemColumnSortValueExtractor?k=this.scope.options.dataItemColumnSortValueExtractor:this.scope.options.dataItemColumnValueExtractor&&(k=this.scope.options.dataItemColumnValueExtractor));if(k){var l=k(b,f);f=k(c,f)}else l=b[f],f=c[f];k=typeof l;"string"===k&&((l=l.trim())||(l=null));var m=typeof f;"string"===m&&((f=f.trim())||(f=null));
if(null==l||null==f)return l==f?0:(null==l?1:-1)*h;var n=void 0;k!=m?"number"==k?(f=parseFloat(f),isNaN(f)&&(f=Number.MAX_VALUE*h)):"number"==m&&(l=parseFloat(l),isNaN(l)&&(f=Number.MAX_VALUE*h)):"function"==typeof l.Rk?n=l.Rk(f)*h:"number"!=k&&Aq.test(l)&&Aq.test(f)&&(l=parseFloat(l),f=parseFloat(f));void 0==n&&(n=(l>f?1:l<f?-1:0)*h);if(0!==n)return n}return 0};
g.YJ=function(){this.Hb.beginUpdate();for(var a=this.va.getSortColumns(),b=this.va.getColumns(),c=0,d=a.length;c<d;c++)for(var e=0,f=b.length;e<f;e++)if(b[e].id==a[c].columnId){a[c].column=b[e];break}a=this.va.getData();b=TD(this);a=a.mapRowsToIds(b);a=zc(a);a=this.PN.bind(this,a,this.va.getSortColumns());this.Hb.sort(a);this.Hb.endUpdate()};g.PN=function(a,b,c,d){var e=a[d.id];return a[c.id]===e?this.ew.call(this,b,c,d):e?1:-1};
g.ps=function(a,b){a=this.scope.$new();Ba(this.scope.rowScope)&&yc(a,this.scope.rowScope);a.item=b.item;this.ka(b.node)(a)};g.gz=function(a,b){a=angular.element(b.node);b=a.scope();a.remove();b&&b.$destroy()};function TD(a){return null!=a.u?a.va.getSelectedRows():[]}g.ks=function(){this.Xa()||(this.va.invalidateAllRows(),this.va.render(),this.Hb.refresh())};g.YF=function(){this.ls()};
g.onDblClick=function(a,b){this.j||(this.j=!0,a=angular.element(this.va.getCellNode(b.row,b.cell)).text(),ND(a),this.j=!1)};g.UL=function(a){a.stopImmediatePropagation();this.scope.$emit("slickgrid.onDragInit")};
g.VL=function(a,b){var c=this.va.getCellFromEvent(a);if(!c)return!1;var d=this.va.getSelectedRows();if(0===d.length||-1===d.indexOf(c.row))d=[c.row];b.rows=d;if(!this.nu(d))return!1;this.K=!0;c=0;for(var e=d.length;c<e;c++)$(this.va.getCellNode(d[c],0)).parent().addClass("slick-dragging");a.stopImmediatePropagation();b.insertBefore=-1;a=this.va.getOptions().rowHeight;c=this.va.getCanvasNode();b.rect=$("<div class='slick-reorder-proxy'/>").css("position","absolute").css("zIndex","99999").css("width",
$(c).innerWidth()).css("height",a*d.length).appendTo(c);b.guide=$("<div class='slick-reorder-guide'/>").css("position","absolute").css("zIndex","99998").css("width",$(c).innerWidth()).css("top",-1E3).appendTo(c);return!0};g.nu=function(){return!0};
function UD(a,b){var c=b.pageY-$(a.va.getCanvasNode()).offset().top,d=a.element.find(".slick-viewport");b=b.pageY-d.offset().top;d=15>b;var e=15>a.element.height()-b;d?a.aa=2*Math.log(16-b):e&&(a.aa=-2*Math.log(16+b-a.element.height()));d||e?a.G.start():a.G.stop();return c}
g.dz=function(a,b){if(!this.K)return!1;a.stopImmediatePropagation();var c=UD(this,a);a=this.va.getOptions().rowHeight;b.rect.css("top",c-5);c=Math.max(0,Math.min(Math.round(c/a),this.va.getDataLength()));c!==b.insertBefore&&(this.Fi(b.rows,c)?(b.guide.css("top",c*a),b.rect.css("background","blue"),b.canMove=!0):(b.guide.css("top",-1E3),b.rect.css("background","red"),b.canMove=!1),b.insertBefore=c);return!0};
g.Fi=function(a,b){if(isNaN(b))return!1;for(var c=0,d=a.length;c<d;c++)if(a[c]==b||a[c]==b-1)return!1;return!0};g.TL=function(a,b){this.G.stop();if(!this.K)return!1;this.K=!1;a.stopImmediatePropagation();b.guide.remove();b.rect.remove();a=b.rows;for(var c=0,d=a.length;c<d;c++)$(this.va.getCellNode(a[c],0)).parent().removeClass("slick-dragging");b.canMove&&(this.cm(b.rows,b.insertBefore),this.scope.$emit("slickgrid.orderChange"));return!0};
g.cm=function(a,b){var c=[],d=this.getData(),e=d.slice(0,b),f=d.slice(b,d.length);a.sort(VD);for(var h=0,k=a.length;h<k;h++)c.push(d[a[h]]);a.reverse();h=0;for(k=a.length;h<k;h++)d=a[h],d<b?e.splice(d,1):f.splice(d-b,1);d=e.concat(c.concat(f));b=[];h=0;for(k=a.length;h<k;h++)b.push(e.length+h);this.scope.data=d;this.ns()};
g.ez=function(a){if(!this.j){this.j=!0;a=this.va.getCellFromEvent(a);if(this.scope.cellTooltips){var b=$(this.va.getCellNode(a.row,a.cell));b.attr("title",b.text())}a=this.va.getDataItem(a.row);this.scope.$emit("slickgrid.highlightChange",a);this.j=!1}};g.fz=function(){this.j||(this.j=!0,this.scope.$emit("slickgrid.highlightChange",null),this.j=!1)};g.GH=function(){this.va&&this.va.getEditorLock().isActive()&&this.va.getEditorLock().commitCurrentEdit()};function VD(a,b){return a-b};function WD(){return{restrict:"AE",replace:!0,template:'<div class="c-slick-tree"></div>',scope:{data:"=",selected:"=",contextMenu:"&",checkboxClass:"@",checkboxTooltip:"@",disableFolders:"@",disableSelection:"@",dragEnabled:"@",multiSelect:"@",resizeWith:"@",spinClass:"@",showRoot:"@",disposable:"@",dblClickHandler:"=?",winLauncherClass:"@",noRoot:"@"},controller:XD,controllerAs:"tree"}}Q.directive("slicktree",[WD]);
function XD(a,b,c){a.dblClickEnabled=!0;this.Ca="true"==a.multiSelect;PD.call(this,a,b,c);this.cb=a.checkboxClass||"c-tristate";this.jb=a.spinClass||"fa-spin fa-spinner";this.pb=a.winLauncherClass||"fa fa-fw fa-plus";this.B=[];this.Hb.setFilter(this.nB.bind(this));a.multiSelect="true"==a.multiSelect;a.disableFolders=null!=a.disableFolders;a.showRoot=null!=a.showRoot;a.noRoot=null!=a.noRoot;a.noRoot&&(a.showRoot=!1);a.disposable=null!=a.disposable;this.va.onRowRender.subscribe(this.ps.bind(this));
this.va.onRowRemove.subscribe(this.gz.bind(this));this.va.onActiveCellChanged.subscribe(this.apply.bind(this));this.g=null;this.O=new Fh(this.RD,10,this);this.l="sibling"}w(XD,PD);XD.$inject=["$scope","$element","$compile"];g=XD.prototype;g.J=function(){YD(this);this.B=this.ka=null;this.O&&(this.O.dispose(),XD.C.J.call(this));this.O=null};function YD(a){a.g&&(a.g.M("propertychange",a.hz,!1,a),a.sa&&(a.scope.disposable||a.g.Bc(null),a.g.dispose()),a.g=null);a.sa=!1}
g.hi=function(){return{enableCellNavigation:"true"!=this.scope.disableSelection,fullWidthRows:!0,forceFitColumns:!0,multiSelect:this.Ca,useRowRenderEvents:!0,headerRowHeight:0,rowHeight:21}};g.getColumns=function(){return[{id:"label",name:"Label",field:"label",sortable:!1,formatter:this.vt.bind(this)}]};
g.vp=function(a){var b;if(a)try{var c=sr(a.target,this.fG.bind(this));c&&(b=angular.element(c).scope().item)}catch(d){}b&&(!this.scope.selected||!this.Ca&&this.scope.selected!=b||q(this.scope.selected)&&!gb(this.scope.selected,b))&&(this.scope.selected=[b]);return this.scope.selected};g.fG=function(a){return pD(a,"ng-scope")?(a=angular.element(a).scope(),null!=a&&"item"in a&&a.item instanceof ko):!1};g.ns=function(a){a&&ZD(this,a)};
function ZD(a,b){b!==a.g&&YD(a);q(b)||(b=[b]);a.scope.noRoot||1!=b.length?(a.g=new ko,a.sa=!0,a.g.Bc(b,!0)):(a.g!==b[0]&&(a.g=b[0]),!a.scope.showRoot&&a.g.na()&&0<a.g.na().length&&(b=a.g.na()));!a.scope.noRoot&&a.g&&a.g.H("propertychange",a.hz,!1,a);a.B.length=0;$D(b,a.B);a.xo(a.B);a.ks()}g.hz=function(a){var b=a.j;("children"==b||"label"==b&&this.g)&&this.O.start();"scrollRowIntoView"==b&&(a=a.o)&&(a=this.Hb.getRowById(a),this.va.scrollRowIntoView(a,0))};g.RD=function(){ZD(this,this.g)};
var tga=0;function $D(a,b,c){c||(c=0);if(a)for(var d=b.length-1,e=0,f=a.length;e<f;e++){var h=a[e];h.id=h.id||tga++;h.depth=c;h.fe=0<c?d:-1;b.push(h);h.na()&&$D(h.na(),b,c+1)}}g=XD.prototype;g.er=function(a,b){var c=this.Hb.getItem(b.row);c&&pD(a.target,"js-node-toggle")&&(c.Fd(!c.collapsed),this.Hb.updateItem(c.id,c),this.scope.$emit("collapseChange"));XD.C.er.call(this,a,b)};
g.onDblClick=function(a,b){(a=this.Hb.getItem(b.row))&&(b=a.na())&&0<b.length&&(a.Fd(!a.collapsed),this.Hb.updateItem(a.id,a),this.scope.$emit("collapseChange"))};g.ez=function(a){if(!this.j){this.j=!0;a=this.va.getCellFromEvent(a).row;var b=this.va.getCellNode(a,0);b&&$(b).addClass("hovered");if(a=this.va.getDataItem(a))try{a.Dj()}catch(c){}this.apply();this.j=!1}};
g.fz=function(a){if(!this.j){this.j=!0;this.element.find(".hovered").removeClass("hovered");a=this.va.getCellFromEvent(a).row;if(a=this.va.getDataItem(a))try{a.ii()}catch(b){}this.apply();this.j=!1}};g.nB=function(a){for(a=-1<a.fe?this.B[a.fe]:null;a;){if(a.collapsed)return!1;a=-1<a.fe?this.B[a.fe]:null}return!0};g.vt=function(a,b,c,d,e){null==c&&(c="");return e.format(a,b,c)};g.ps=function(a,b){a=this.scope.$new();this.nq(a,b.row,b.node,b.item);this.ka(b.node)(a)};
g.nq=function(a,b,c,d){a.item=d;b=a.item;a.chkClass=b.jg||this.cb;a.spinClass=this.jb;a.disableFolders=this.scope.disableFolders;a.chkTooltip=b.Ca||this.scope.checkboxTooltip;a.itemAction=this.QI.bind(this,d);a.winLauncherClass=b.nd||this.pb};g.QI=function(a,b){a instanceof ko&&a.iz(b)};g.getData=function(){var a=this.scope.data||[];q(a)||(a=[a]);return a};
function aE(a,b,c,d){var e=b.na(),f=fb(e,function(b){return b==a[d]});-1==f&&(f=0);var h=e.slice(0,f),k=e.slice(f,e.length);e=[];f=0;for(var l=c.length;f<l;f++){var m=a[c[f]];b.gq(m)&&e.push(m)}$a(e,function(a){mb(h,a);mb(k,a)});return e=h.concat(e.concat(k))}
function uga(a,b,c,d){var e=null;d instanceof ko?e=d:"number"==typeof d&&(a.scope.showRoot&&"reparentToRoot"==a.l?e=a.g:"reparentToRoot"!=a.l&&(e=b[d]||a.g));var f=b[c[0]],h=[];$a(c,function(a){a=b[a];f.depth==a.depth&&h.push(a);var d=a.getParent();d&&(eb(c,function(a){return d===b[a]})||d.removeChild(a))});$a(h,function(a){a.df(e)})}
g.Fi=function(a,b){if(isNaN(b)||this.scope.showRoot&&0==b||!this.scope.showRoot&&b>this.Hb.getItems().length-1)return!1;var c=this.Hb.getItem(a[0]),d=this.Hb.getItem(b);if(!c||c==this.g)return!1;if(!d)return!0;for(var e=c.depth,f=0,h=a.length;f<h;f++)if(this.Hb.getItem(a[f]).depth<e||a[f]==b)return!1;return ao(d,c)||d==c.getParent()&&"sibling"!=this.l||!this.scope.showRoot&&d==this.g||c.fe==d.fe&&"reparent"!=this.l&&(a=c.getParent(),a||(a=this.g),a=a.na(),b=fb(a,function(a){return a==c}),b<a.length-
1&&a[b+1]==d)?!1:"sibling"==this.l?!0:d.cb};
g.dz=function(a,b){if(!this.K)return!1;a.stopImmediatePropagation();var c=UD(this,a);a=this.va.getOptions().rowHeight;var d=c/a,e=d%(Math.floor(d)||1),f=this.va.getDataLength();b.rect.css("top",c-5);c=Math.max(0,Math.min(Math.round(d),f));this.l="sibling";b.rows.sort(VD);if(d<f&&.4<e&&.6>e)this.l="reparent",f=Math.floor(d),this.Fi(b.rows,f)?(d=this.Hb.getItem(f),b.guide.css("top",(c+(0==Math.round(e)?.5:-.5))*a),b.guide.css("left",15*(d.depth+1)),b.rect.removeClass("bg-danger"),b.rect.addClass("bg-primary"),
b.canMove=!0):(b.guide.css("top",-1E3),b.rect.removeClass("bg-primary"),b.rect.addClass("bg-danger"),b.canMove=!1),b.insertBefore=f;else{if(this.Fi(b.rows,c)){d=this.Hb.getItem(c);e=this.Hb.getItem(b.rows[0]);var h=d?d.depth:0;b.guide.css("top",c*a);b.guide.css("left",15*(h+1));b.rect.removeClass("bg-danger");b.rect.addClass("bg-primary");b.canMove=!0;d&&d.fe!=e.fe?this.l=-1==d.fe?"reparentToRoot":"reparentLookupParent":c==f&&(this.l="reparentToRoot")}else b.guide.css("top",-1E3),b.guide.css("left",
0),b.rect.removeClass("bg-primary"),b.rect.addClass("bg-danger"),b.canMove=!1;b.insertBefore=c}return!0};
g.cm=function(a,b){var c=this.B?this.B.filter(this.nB.bind(this)):[],d=[];if("sibling"==this.l){var e=c[a[0]].getParent();e||(e=this.g);a=aE(c,e,a,b);e.Bc(a,e==this.g&&!this.scope.showRoot);e==this.g?this.scope.showRoot?d=this.g:d=a:$a(c,function(a){(!a.getParent()||this.scope.showRoot&&a===this.g)&&d.push(a)},this)}else{var f=b;if("reparentLookupParent"==this.l){var h=c[b].getParent();b=fb(c,function(a){return a.D()==h.D()});0>b&&(b=h)}uga(this,c,a,b);if("reparentToRoot"==this.l){var k=c.slice(0,
b),l=c.slice(b,c.length);e=[];b=0;for(f=a.length;b<f;b++)e.push(c[a[b]]);$a(e,function(a){mb(k,a);mb(l,a)});c=k.concat(e.concat(l))}else e=c[a[0]].getParent(),e.Bc(aE(c,e,a,f),!1);$a(c,function(a){(!a.getParent()||this.scope.showRoot&&a===this.g)&&d.push(a)},this)}this.scope.data=d;R(this.scope);this.ks();this.scope.$emit("slicktree.update",this.scope.data)};Q.directive("basicfiltertree",[function(){var a=WD();a.controller=bE;a.template='<div class="c-slick-tree no-hover"></div>';return a}]);function bE(a,b,c){XD.call(this,a,b,c)}w(bE,XD);bE.$inject=["$scope","$element","$compile"];g=bE.prototype;g.vt=function(a){return 1==a%2?'<div ng-bind="root.grouping"></div>':'<expression expr="item.getExpression()" columns="columns"></expression><span ng-if="hasMultipleFilters()"><button class="btn btn-danger btn-sm" tabindex="-1" ng-click="$emit(\'filterbuilder.remove\', item)" title="Remove this expression"><i class="fa fa-times"></i></button></span>'};
g.hi=function(){var a=bE.C.hi.call(this);a.rowHeight=26;return a};g.nq=function(a,b,c,d){a.columns=this.scope.$parent.columns;a.root=this.scope.$parent.root;a.hasMultipleFilters=this.IF.bind(this);bE.C.nq.call(this,a,b,c,d)};g.IF=function(){if(this.scope&&this.scope.$parent&&this.scope.$parent.root){var a=this.scope.$parent.root.na();return!!a&&1<a.length}return!1};g.xo=function(a){for(var b=1,c=2*a.length-1;b<c;b+=2){var d=new ko;d.id="g."+b;a.splice(b,0,d)}bE.C.xo.call(this,a)};Q.directive("basicfilterbuilder",[function(){return{restrict:"AE",replace:!0,scope:{root:"=",columns:"=",isComplex:"="},templateUrl:"v1541734487/views/filter/basicfilterbuilder.html",controller:cE,controllerAs:"basicCtrl"}}]);function cE(a){this.v=a;this.j=new Fh(this.o,50,this);this.g=a.root;this.g.na()||this.add();a.$on("$destroy",this.l.bind(this))}cE.$inject=["$scope"];
cE.prototype.l=function(){this.v=null;for(var a=this.g.na().slice(),b=0;b<a.length;b++){var c=a[b];if(c instanceof ZC){var d=c.getExpression();d.Zb(d.literal)||c.getParent().removeChild(c)}}};cE.prototype.add=function(a){a=$C(a||null,this.v.columns);this.g.R(a);this.j.start()};cE.prototype.add=cE.prototype.add;cE.prototype.o=function(){var a=this.g.na();a&&this.v.$broadcast(nD,a[a.length-1])};Q.directive("validationMessage",[function(){return{restrict:"E",replace:!0,scope:{target:"="},templateUrl:"v1541734487/views/util/validationmessage.html",controller:dE,controllerAs:"ctrl"}}]);function dE(a){this.v=a}dE.$inject=["$scope","$element"];dE.prototype.Sh=function(){return this.v.target&&!pc(this.v.target.$error)&&this.v.target.$dirty};dE.prototype.hasError=dE.prototype.Sh;function eE(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/filter/editfilters.html",controller:fE,controllerAs:"filters"}}Q.directive("editfilter",[eE]);
function fE(a,b){this.scope=a;this.element=b;this.g=a.entry;this.root=null;this.title=this.g.S();this.description=this.g.qb();this.isComplex=!1;this.root=new dD;if(b=cC(this.g))this.root.th(b.localName),gE(this,b,this.root);hE(this);a.tab=this.isComplex?"advanced":"basic";a.$on("filterbuilder.remove",t(this.K,this));a.$on("$destroy",t(this.o,this));this.g.sb()?O(P.s(),"filters.edit",1):O(P.s(),"filters.new",1)}fE.$inject=["$scope","$element"];
fE.prototype.o=function(){var a=angular.element("#removeMultiple");a&&kx(a);this.element=this.scope=null};function hE(a){var b=a.root;a.isComplex=!1;if(b&&b.na()){var c=b.na();if("Not"==b.Vi())a.isComplex=!0;else for(b=0;b<c.length;b++)if(c[b]instanceof dD){a.isComplex=!0;break}}}
function gE(a,b,c){b=kr(b);for(var d;b;){var e=a;var f=b;d=c;for(var h=!1,k=0;k<JC.length;k++)if(JC[k].matches(angular.element(f))){h=!0;break}h?(f=$C(f,e.scope.columns),d.R(f),d.collapsed=!1):(e=new dD,e.th(f.localName),d.R(e),f=e);d=sa(b.nextElementSibling)?b.nextElementSibling:lr(b.nextSibling);f instanceof dD&&gE(a,b,f);b=d}}
fE.prototype.K=function(a,b){b.na()?ix("removeMultiple")||gD({confirm:this.A.bind(this,b),prompt:"Are you sure you want to remove multiple items from the filter?",yesText:"Yes",hT:"fa-trash",yesButtonClass:"btn-danger",noText:"No",noIcon:"fa fa-remove",windowOptions:{id:"removeMultiple",x:"center",y:"center",label:"Remove Items","show-close":!1,"no-scroll":!0,width:300,height:"auto",icon:"fa fa-warning",modal:"true",headerClass:"bg-danger u-bg-danger-text"}}):this.A(b)};fE.prototype.A=function(a){a.getParent().removeChild(a)};
fE.prototype.it=function(a){hE(this);this.scope.tab=a;this.scope.$broadcast("tabChange",a)};fE.prototype.setTab=fE.prototype.it;fE.prototype.Jm=function(){return"basic"===this.scope.tab&&this.isComplex||iE(this,this.root)};fE.prototype.isInvalid=fE.prototype.Jm;function iE(a,b){if(b instanceof dD){if((b=b.na())&&b.length){for(var c=0,d=b.length;c<d;c++)if(iE(a,b[c]))return!0;return!1}}else if(b instanceof ZC)return a=b.getExpression(),!a.Zb(a.literal);return!0}fE.prototype.cancel=function(){kx(this.element)};
fE.prototype.cancel=fE.prototype.cancel;fE.prototype.finish=function(){this.g.Ta(this.title);this.g.fb(this.description);var a=this.root.Gl(this.title,this.description);this.g.rg(a);this.scope.callback&&this.scope.callback(this.g);kx(this.element)};fE.prototype.finish=fE.prototype.finish;function jE(a,b,c,d){this.j=a;this.merge=void 0!==b?b:!1;this.g=c;this.o=void 0!==d?d:!1;this.l=vga(this)}g=jE.prototype;g.nb=!1;g.title="Change query entries";g.Ba=null;g.state="ready";function wga(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.j?a.l?a.merge&&0===a.j.length&&!a.g?(a.Ba="When merging an empty set, the layer hint must be supplied",!1):!0:(a.Ba="No old entries found.",!1):(a.Ba="No new entries provided.",!1)}
g.Fa=function(){return wga(this)?(this.state="executing",kE(this,this.j),this.state="success",!0):!1};g.Db=function(){this.state="reverting";kE(this,this.l);this.state="ready";return!0};function kE(a,b){var c=lE;if(a.merge){var d=mE(a),e;for(e in d)nE(c,e,void 0,void 0,!0)}else nE(c,void 0,void 0,void 0,!0);oE(c,b,a.o,a.g)}function vga(a){var b=lE.getEntries(),c=mE(a);return a.merge?b.filter(function(a){return a.layerId in c}):b}
function mE(a){var b={};a.g&&(b[a.g]=!0);return b=a.j.reduce(function(a,b){a[b.layerId]=!0;return a},b)};function pE(a){this.filter=a;this.nb=!1;this.title="Add/Remove filter";this.Ba=null;this.state="ready";this.entries=lE.getEntries(null,null,this.filter.D())}function qE(a){return"ready"!==a.state?(a.Ba="Command not in ready state",!1):a.filter?a.filter.type?a.filter.sb()?!0:(a.Ba="Filter entry does not contain a filter",!1):(a.Ba="Filter type not set",!1):(a.Ba="Filter not provided",!1)}pE.prototype.add=function(){rE(sE.s(),this.filter);tE(this)};
pE.prototype.remove=function(){uE(this);vE(sE.s(),this.filter)};function tE(a){a.entries&&0<a.entries.length&&oE(lE,a.entries,!0,a.filter.T())}function uE(a){a.entries&&0<a.entries.length&&nE(lE,null,null,a.filter.D())};function wE(a){pE.call(this,a);this.filter&&(this.title='Add Filter "'+this.filter.S()+'"')}w(wE,pE);wE.prototype.Fa=function(){return qE(this)?(this.state="executing",this.add(),this.state="success",!0):!1};wE.prototype.Db=function(){this.state="reverting";this.remove();this.state="ready";return!0};function xE(){this.filters=[];this.and=!0}xE.prototype.ra=function(a){a||(a={});for(var b=[],c=0,d=this.filters.length;c<d;c++)this.filters[c].l||(b[c]=this.filters[c].ra());a.filters=b;a.and=this.and;return a};xE.prototype.restore=function(a){this.and=a.and;if(a=a.filters)for(var b=0,c=a.length;b<c;b++){var d=new bC;a[b]&&(d.restore(a[b]),this.filters.push(d))}};
function sE(){C.call(this);this.g={};var a=window.localStorage.getItem("filters");a&&(a=JSON.parse(a),M.set("filters",a),window.localStorage.removeItem("filters"));this.load();N.H("addFilter",this.zw,!1,this)}w(sE,C);xa(sE);g=sE.prototype;g.J=function(){N.M("addFilter",this.zw,!1,this)};g.save=function(){};g.load=function(){this.dispatchEvent(new K("filters"))};g.clear=function(){qc(this.g);this.save()};
function yE(a,b){var c=[],d;for(d in a.g)c=c.concat(a.g[d].filters);return b?b in a.g?a.g[b].filters:null:0<c.length?c:null}g.rd=function(a){return Y.Ka(a)};g.sb=function(a){var b=yE(this);if(b)for(var c=0,d=b.length;c<d;c++)if(b[c].D()==a)return b[c];return null};function zE(a,b){var c=yE(a,b);if(c)for(var d=0,e=c.length;d<e;d++)if(a.isEnabled(c[d],b))return!0;return!1}g.isEnabled=function(a){return a.isEnabled()};
function rE(a,b){b&&b.type&&b.sb()&&(b.type in a.g||(a.g[b.type]=new xE),a.g[b.type].filters.push(b),a.dispatchEvent(new dC("filtersRefresh")),a.save())}function vE(a,b){b&&b.type in a.g&&(mb(a.g[b.type].filters,b),a.dispatchEvent(new dC("filtersRefresh")),a.save())}g.Vi=function(a){return a in this.g?this.g[a].and:!0};g.th=function(a,b){if(a in this.g){var c=this.g[a];c.and!==b&&(c.and=b,b=new dC("filterGroupingChanged"),b.key=a,this.dispatchEvent(b),this.save())}};
g.toggle=function(a,b){if(a=a instanceof bC?a.D():a)a=this.sb(a),b=void 0!==b?b:!a.isEnabled(),a.Za(b),this.save(),a&&(this.dispatchEvent(new K("toggle",a)),a.dispatchEvent(new K("enabled",a)))};g.zw=function(a){if((a=a.g)&&!(a instanceof bC))try{var b=new bC;b.restore(a.ra());b instanceof bC&&(a=b)}catch(c){a=null}(b=a)?(b=new wE(b),AE(BE,b)):rj(tj,"Unrecognized filter.",Qh)};
function CE(a,b,c,d){var e=!1;d&&(e=!0);var f={id:"editfilter",x:"center",y:"center",label:(e?"Edit":"Add")+" Filter","show-close":!0,"no-scroll":!1,"min-width":300,"min-height":300,"max-width":1E3,"max-height":1E3,modal:!0,width:850,height:425,icon:"fa fa-filter"};d=d?d.clone():new bC;e||d.Za(!0);d.T()||d.Ub(a);fx(f,"editfilter",void 0,void 0,void 0,{entry:d,columns:b,callback:c})}
function xga(a,b,c,d){d=d?d.clone():new bC;d.T()||d.Ub(a);fx({id:"editfilter",x:"center",y:"center",label:"View Filter","show-close":!0,"no-scroll":!1,"min-width":300,"min-height":300,"max-width":1E3,"max-height":1E3,modal:!0,width:850,height:425,icon:"fa fa-filter"},"viewfilter",void 0,void 0,void 0,{entry:d,columns:b,viewonly:!0})}
function DE(a,b){var c={id:"copyfilter",x:"center",y:"center",label:"Copy "+a.S()+" to Layers","show-close":!0,"no-scroll":!1,modal:!0,width:500,height:"auto",icon:"fa fa-copy"};fx(c,'<copyfilter filter-entry="filterEntry" layer-id="layerId"></copyfilter>',void 0,void 0,void 0,{filterEntry:a,layerId:b})}var OC=null;function EE(){sE.call(this)}w(EE,sE);xa(EE);yc(sE,{s:function(){return EE.s()}});g=EE.prototype;g.load=function(){var a=M.get("filters");if(a){for(var b in a){var c=new xE;c.restore(a[b]);this.g[b]=c}this.dispatchEvent(new dC("filtersRefresh"))}};g.save=function(){var a={},b;for(b in this.g){var c=yE(this,b);c&&0<c.length&&(a[b]=this.g[b].ra())}M.set("filters",a)};g.isEnabled=function(a,b){var c=lE;return a?(a=c.getEntries(b,null,a.D()),!!a&&!!a.length):!1};
g.rd=function(a){var b=L.s().W(a);return b instanceof Vz?b:EE.C.rd.call(this,a)};
g.open=function(a,b){if(!(0<$("#filter"+(a?"-"+Xb(a):"")).length)){var c={id:"filter"+(a?"-"+Xb(a):""),x:"center",y:"center",label:"Filters","show-close":!0,"no-scroll":!0,"min-width":300,"min-height":300,"max-width":1E3,"max-height":1E3,width:400,height:500,icon:"filter-icon fa fa-filter"},d={};if(a){var e=L.s().W(a);if(e){if(b)d.columns=b;else try{e.Zg()&&e.hj();return}catch(f){}c.label=e.S()+" Filters"}d.type=a}fx(c,"filters",void 0,void 0,void 0,d)}};function FE(a,b){this.scope=a;this.j=b.parent();a.$on("$destroy",this.destroy.bind(this))}FE.$inject=["$scope","$element"];FE.prototype.destroy=function(){this.j=this.scope=null};FE.prototype.show=function(){return this.j.hasClass("hovered")||this.j.hasClass("selected")||this.j.parent().hasClass("selected")};FE.prototype.show=FE.prototype.show;function GE(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.canFavorite()"><favorite ng-show="nodeUi.show()" type="descriptor" key="{{nodeUi.descId}}" value="{{nodeUi.layerLabel}}"></favorite></span><span ng-if="nodeUi.filtersEnabled" ng-click="nodeUi.filter()"><i class="fa fa-filter fa-fw c-glyph" title="Manage filters"ng-class="{\'text-success\': nodeUi.filtered, \'c-glyph__off\': !nodeUi.filtered}"></i></span><span ng-if="nodeUi.isRemovable()" ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the layer"></i></span></span>',
controller:HE,controllerAs:"nodeUi"}}Q.directive("defaultlayernodeui",[GE]);function HE(a,b){FE.call(this,a,b);lE.H("propertychange",this.l,!1,this);this.l();a=this.scope.item;this.layerLabel=a.ba();(a=Y.Ka(a.D()))&&(this.descId=a.D())}w(HE,FE);HE.$inject=["$scope","$element"];HE.prototype.destroy=function(){HE.C.destroy.call(this);lE.M("propertychange",this.l,!1,this)};HE.prototype.W=function(){return this.scope&&this.scope.item instanceof ev?this.scope.item.W():null};
HE.prototype.N=function(){var a=this.W();return a instanceof Sf?a.N():null};HE.prototype.De=function(){var a=this.scope.item;if(a&&a instanceof ev){var b=a.W();if(a&&b&&F(b,"os.layer.ILayer"))return b.De()}return!1};HE.prototype.isRemovable=HE.prototype.De;HE.prototype.remove=function(){var a=this.scope.item;if(a.W()instanceof IE){if((a=a.na().slice())&&0<a.length)for(var b=a.length;b--;)JE(a[b])}else JE(a)};HE.prototype.remove=HE.prototype.remove;
function JE(a){a=new Tv("removeLayer",a.D());N.dispatchEvent(a)}HE.prototype.aD=function(){var a=KE(this);return a?(a=Y.Ka(a),!!(a&&a instanceof LE)):!1};HE.prototype.canFavorite=HE.prototype.aD;HE.prototype.filter=function(){var a=KE(this);if(a){a=Y.Ka(a);var b=this.W();a=[a,b];b=0;for(var c=a.length;b<c;b++){var d=a[b];if(F(d,"os.filter.IFilterable")&&d.Zg()){d.hj();break}}}};HE.prototype.filter=HE.prototype.filter;
HE.prototype.l=function(){var a=this.scope.item;(this.filtered=zE(EE.s(),a.D()))?this.j.addClass("font-italic"):this.j.removeClass("font-italic");a=this.W();F(a,"os.filter.IFilterable")?this.filtersEnabled=a.Zg():this.filtersEnabled=!1};function KE(a){return a.scope.item.D()};function IE(){C.call(this);this.ma=Vb();this.g=[];this.o=null;this.A=!1;this.I=this.B=null;this.G=!0;this.u="defaultlayerui";this.l=!1}w(IE,C);F(IE,"os.layer.ILayer");g=IE.prototype;g.J=function(){this.g.length=0};g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.N=function(){return null};g.ob=function(){for(var a=0,b=this.g.length;a<b;a++)try{if(this.g[a].ob())return!0}catch(c){}return this.A};g.Wa=function(a){this.A=a};g.S=function(){return this.j};g.Ta=function(a){this.j=a};g.gd=function(){return""};
g.Sc=function(){return 0<this.g.length?this.g[0].Sc():"group"};g.he=function(){};g.cg=function(){return""};g.ve=function(){};g.rb=function(){return 0<this.g.length?this.g[0].rb():this.B};g.Ec=function(a){this.B=a};g.Pg=function(){for(var a=0,b=0,c=this.g.length;b<c;b++)try{a=Math.max(a,this.g[b].Pg())}catch(d){}return me(a,0,1)};g.Ij=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].Ij(a)}catch(d){}};
g.Qg=function(){for(var a=0,b=0,c=this.g.length;b<c;b++)try{a=Math.max(a,this.g[b].Qg())}catch(d){}return me(a,0,1)};g.Jj=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].Jj(a)}catch(d){}};g.sm=function(){for(var a=-180,b=0,c=this.g.length;b<c;b++)try{a=Math.max(a,this.g[b].sm())}catch(d){}return me(a,-180,180)};g.gt=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].gt(a)}catch(d){}};
g.Nb=function(){for(var a=0,b=0,c=this.g.length;b<c;b++)try{a=Math.max(a,this.g[b].Nb())}catch(d){}return me(a,0,1)};g.xd=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].xd(a)}catch(d){}};g.Tg=function(){for(var a=0,b=0,c=this.g.length;b<c;b++)try{a=Math.max(a,this.g[b].Tg())}catch(d){}return me(a,0,1)};g.Mj=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].Mj(a)}catch(d){}};g.hd=function(){for(var a=0,b=this.g.length;a<b;a++)try{if(this.g[a].hd())return!0}catch(c){}return!1};
g.Hd=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].Hd(a)}catch(d){}};g.yg=function(a){for(var b=0,c=this.g.length;b<c;b++)try{this.g[b].yg(a)}catch(d){}};g.hk=function(){for(var a=0,b=this.g.length;a<b;a++)try{if(this.g[a].hk())return!0}catch(c){}return!1};g.getTags=function(){return this.I};g.vb=function(a){this.I=a};g.Va=function(){return this.o};g.ql=function(a){this.o=a};g.De=function(){for(var a=0,b=this.g.length;a<b;a++)try{if(!this.g[a].De())return!1}catch(c){}return this.G};
g.Ag=function(a){this.G=a};g.Ld=function(){for(var a={},b=0,c=null,d=0,e=this.g.length;d<e;d++){var f=this.g[d].rm();f&&(f in a?a[f]++:a[f]=1,a[f]>b&&(b=a[f],c=f))}return c?"<"+c+"></"+c+">":"<defaultlayernodeui></defaultlayernodeui>"};g.Nf=void 0;g.mk=function(){return this.u};g.zg=function(a){this.u=a};g.rm=function(){return null};g.removeLayer=function(a){mb(this.g,a)};g.Ei=function(){};g.yl=function(){return!1};g.wk=function(){return null};g.sl=function(){};g.lk=function(){return this.l};
g.ao=function(a){this.l=a};g.ra=function(a){return a||{}};g.restore=function(){};function ME(a,b){x.call(this);this.scope=a;this.element=b;this.g=new Fh(this.NI,25,this);this.j=["style"];this.l=[];this.is3DEnabled=L.s().Qa();L.s().H("propertychange",this.Xy,!1,this);a.$watch("items",this.UI.bind(this));a.$on("$destroy",this.dispose.bind(this))}w(ME,x);ME.$inject=["$scope","$element"];g=ME.prototype;g.J=function(){ME.C.J.call(this);this.l.forEach(sf);this.l.length=0;L.s().M("propertychange",this.Xy,!1,this);z(this.g);this.element=this.scope=this.g=null};
g.getValue=function(a,b){b=void 0!==b?b:1;for(var c=NE(this),d=0,e=c.length;d<e;d++)try{var f=c[d].W();if(f){var h=a(f);return void 0!==h?h:b}}catch(k){}return 1};g.xb=function(a){for(var b=[],c=NE(this),d=0,e=c.length;d<e;d++)try{var f=c[d].W();if(f){var h=a(f);h&&b.push(h)}}catch(k){}h=null;1<b.length?(h=new $B,h.bc(b),h.title=b[0].title+" ("+b.length+" layers)"):0<b.length&&(h=b[0]);h&&AE(OE.s(),h)};
function NE(a){var b=[];a=a.scope.items||[];a=a.filter(PE);for(var c=0;c<a.length;c++){var d=a[c];d.W()instanceof IE?(d=d.na())&&(b=b.concat(d)):b.push(d)}return b}g.sd=function(){Dc(Ga(R,this.scope))};g.NI=function(){this.Xa()||this.sd()};g.UI=function(a){if(!this.Xa()&&(this.l.forEach(sf),this.l.length=0,this.sd(),a)){a=a.filter(PE);for(var b=0,c=a.length;b<c;b++){var d=a[b].W();d&&this.l.push(H(d,"propertychange",this.ZI,this))}}};
g.ZI=function(a){this.Xa()||(a instanceof Kf&&null!=this.scope[a.key]?!this.Xa()&&this.g&&this.g.start():a instanceof K&&(a=a.j)&&-1!=this.j.indexOf(a)&&!this.Xa()&&this.g&&this.g.start())};g.Xy=function(a){"map:change:view3d"==a.j&&(this.is3DEnabled=L.s().Qa(),R(this.scope))};function PE(a){return a instanceof ev};Q.directive("defaultlayerui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/layer/default.html",controller:QE,controllerAs:"defaultCtrl"}}]);
function QE(a,b,c){ME.call(this,a,b);this.j.push("refreshInterval");this.refresh=null;this.refreshOptions=yga;this.showBasicColor=this.showHue=this.showColorReset=this.showColorPicker=this.showRefresh=!1;this.defaults={brightness:0,contrast:1,hue:0,opacity:1,saturation:1};this.o="colorControl:none";this.u={};for(var d in RE)b=RE[d],a.$on(d+".slide",this.ML.bind(this,b)),a.$on(d+".slidestart",this.XJ.bind(this)),a.$on(d+".slidestop",this.Bx.bind(this,b,d));this.sd();SE(this);c(t(function(){if(this.element){var a=
M.get("layercontrols","");a&&(a=this.element.find(a))&&$(a).collapse("show")}},this))}w(QE,ME);QE.$inject=["$scope","$element","$timeout"];var RE={opacity:function(a,b){a.xd(b)},brightness:function(a,b){a.Ij(b)},contrast:function(a,b){a.Jj(b)},hue:function(a,b){a.gt(b)},saturation:function(a,b){a.Mj(b)}};g=QE.prototype;
g.sd=function(){QE.C.sd.call(this);if(!this.Xa()){this.scope.brightness=this.getValue(Eg,0);this.scope.contrast=this.getValue(Fg);this.scope.hue=this.getValue(Fba,0);this.scope.opacity=this.getValue(Hg);this.scope.saturation=this.getValue(Ig);zga(this);this.showHue=this.showBasicColor=this.showColorReset=this.showColorPicker=!1;var a=NE(this);if(a&&0<a.length)try{for(var b,c=0,d=a.length;c<d;c++){var e=a[c].W();if(null==b){if(b=TE(this,e),"colorControl:none"==b)break}else if(TE(this,e)!==b){b="colorControl:none";
break}}switch(b){case "colorControl:pickerReset":this.showBasicColor=this.showColorReset=this.showColorPicker=!0;break;case "colorControl:picker":this.showColorPicker=!0;this.showColorReset=this.showBasicColor=!1;break;case "colorControl:basic":this.showBasicColor=!0;this.showColorReset=this.showColorPicker=!1;break;default:this.showColorReset=this.showColorPicker=this.showBasicColor=!1}}catch(f){}}};
function zga(a){a.showRefresh=!1;a.refresh=null;var b=NE(a);if(b&&0<b.length){var c;a.showRefresh=db(b,function(a){a=a.W();return a instanceof Sf&&(a=a.N(),a instanceof Rz||a instanceof bv&&a.ah())?(null==c&&(c=a.Sg()),!0):!1});null!=c&&(a.refresh=eb(a.refreshOptions,function(a){return a.interval==c}))}}function TE(a,b){return b&&(b=b.Va())&&b.colorControl?b.colorControl:a.o}
function SE(a){for(var b=NE(a),c=0,d=b.length;c<d;c++)try{var e=b[c].W();if(e){var f=e.D(),h={},k=Hg(e);h.opacity=null!=k?k:0;var l=Eg(e);h.brightness=null!=l?l:0;var m=Fg(e);h.contrast=null!=m?m:0;var n=Ig(e);h.saturation=null!=n?n:0;a.u[f]=h}}catch(p){}}g.ML=function(a,b,c){b=NE(this);for(var d=0,e=b.length;d<e;d++)a(b[d].W(),c)};g.XJ=function(){SE(this)};
g.Bx=function(a,b,c,d){this.xb(function(c){var e=this.u[c.D()],h=1;e&&void 0!==e[b]&&(h=e[b]);if(c=h!==d?new YB(c.D(),a,d,h):null)c.title="Change "+b;return c}.bind(this));SE(this)};g.DJ=function(){var a=NE(this);if(a&&0<a.length){var b=(a=this.refresh)?a.interval:0;this.xb(function(a){return new Qz(a.D(),b)})}};QE.prototype.onRefreshChange=QE.prototype.DJ;QE.prototype.reset=function(a){var b=this.defaults[a];null!=b&&this.Bx(RE[a],a,null,b)};QE.prototype.reset=QE.prototype.reset;
QE.prototype.VN=function(a){M.set("layercontrols",a)};QE.prototype.setOpenSection=QE.prototype.VN;function UE(a,b,c){A.call(this,a,c);this.l=b}w(UE,A);UE.prototype.l=null;function OE(){C.call(this);this.j=[];this.u=50;this.B=[];this.l=this.g=-1;this.G=[]}w(OE,C);xa(OE);var VE=E.V("os.command.CommandProcessor");function WE(a){return a.g!=a.l||cb(a.j,function(a){return"executing"===a.state})}function XE(a,b){if(WE(a))throw Error("Setting the max queue size while processing asynchronous commands is not allowed!. Consider having the command run a job instead.");a.u=b;YE(a);a.dispatchEvent(new A("history_limit_changed"))}
OE.prototype.Vo=function(){var a=this.u;XE(this,0);XE(this,a)};function AE(a,b){if("error"===b.state)var c=!1;else{c=!0;for(var d=0,e=a.G.length;d<e&&c;d++)a.G[d](b)||(c=!1)}if(!c)return!1;if(WE(a))return E.ta(VE,'Processing is under way. Added "'+b.title+'" command to temporary queue.'),a.B.push(b),!0;a.g<a.j.length&&(a.j.length=a.g+1);a.l++;"ready"===b.state?ZE(a,b):a.o(null,b);return!0}
function YE(a){for(;a.j.length>a.u;){var b=a.j.shift();try{z(b)}catch(c){E.error(VE,'error disposing command "'+b.title+'": '+String(c))}-1<a.g&&a.g--}a.l=a.g}OE.prototype.pl=function(a){WE(this)?this.l=Math.min(this.j.length-1,Math.max(-1,a)):(this.l=Math.min(this.j.length-1,Math.max(-1,a)),this.l<this.g?$E(this,this.j[this.g]):this.l>this.g&&ZE(this,this.j[this.g+1]))};
function ZE(a,b){E.info(VE,'executing "'+b.title+'" command');b.nb&&b.Ua("executed",a.o,!1,a);a.dispatchEvent(new UE("command_executing",b));var c=!1;try{c=b.Fa()}catch(d){c=!1,E.error(VE,'Error executing command "'+b.title,d)}c?b.nb||a.o(null,b):(b.nb&&b.M("executed",a.o,!1,a),b.state="error",a.o(null,b))}
function $E(a,b){a.dispatchEvent(new UE("command_reverting",b));E.info(VE,'reverting "'+b.title+'" command');b.nb&&b.Ua("reverted",a.A,!1,a);var c=!1;try{c=b.Db()}catch(d){c=!1,E.error(VE,'Error reverting command "'+b.title,d)}c?b.nb||a.A(null,b):(b.nb&&b.M("reverted",a.A,!1,a),b.state="error",a.A(null,b))}function aF(a){0<a.B.length&&(a.j.length=a.g+1,AE(a,a.B.shift()))}
OE.prototype.o=function(a,b){a=b||a.target;this.dispatchEvent(new UE("command_executed",a));"success"===a.state?(this.g++,this.g==this.j.length&&(this.j.push(a),this.l>=this.g&&YE(this),E.info(VE,'Added "'+a.title+'" command to history.'),this.dispatchEvent(new UE("command_added",a)))):(this.l--,a===this.j[this.g+1]?(this.j.splice(this.g+1,1),E.error(VE,'Removed "'+a.title+'" ['+this.g+1+"] command from history after error.")):a.Ba&&E.error(VE,"Error running command "+a.title+" - "+a.Ba));this.g<
this.l?ZE(this,this.j[this.g+1]):0<this.B.length?aF(this):this.g>this.l&&$E(this,this.j[this.g])};OE.prototype.A=function(a,b){a=b||a.target;this.g--;this.dispatchEvent(new UE("command_reverted",a));this.g>this.l?$E(this,this.j[this.g]):aF(this)};var BE=OE.s();function bF(a,b,c,d){A.call(this,a);this.l=b||null;this.message=d||null}w(bF,A);var cF={aP:"addDescriptor",rR:"removeDescriptor",AS:"updateDescriptor",BS:"userToggledDescriptor",ZO:"descriptorActivated",BP:"descriptorDeactivated"};function dF(a,b){A.call(this,a);this.l=b||null}w(dF,A);function eF(a,b,c,d){this.type=a.toLowerCase();this.g=b;this.title=c;this.j=d};var Y=null;function fF(){ko.call(this);this.log=Aga;this.Pe=this.ib=!1;this.Ck=!0;this.u="default"}w(fF,ko);var Aga=E.V("os.ui.data.BaseProvider");g=fF.prototype;g.Wb=function(a){this.Za(a.enabled);this.Da(a.label)};g.load=function(){};g.kc=function(){return this.ib};g.Za=function(a){var b=this.ib!==a;this.ib=a;b&&this.dispatchEvent(new K("children",null,a))};g.getError=function(){return!1};g.tp=function(){return!0};
function gF(a){for(var b=a.D()+"#"+Vb(),c=!1;!c;)c=(c=a.na())?!cb(c,function(a){return a.D()==b}):!0,b=a.D()+"#"+Vb();return b};function hF(){fF.call(this);this.url="";this.Ig=null;this.Ia=0;this.Vb=!1;this.oa=null;this.G=!1}w(hF,fF);g=hF.prototype;g.init=function(){this.Ga("off")};g.Wb=function(a){hF.C.Wb.call(this,a);this.Mb(a.url);this.init()};g.load=function(a){this.dispatchEvent(new bF("dataProviderLoading",this));this.Wa(!0);this.G=a||!1;iF(this,!1)};g.js=function(){return!0};g.finish=function(){this.Wa(!1);this.dispatchEvent(new bF("dataProviderLoaded",this))};
g.Kc=function(){var a=hF.C.Kc.call(this);this.getError()&&(a+='<i class="fa fa-warning text-warning" title="Server failed to load. See the log/alerts window for details."></i>');return a};g.Ma=function(){return this.url};g.Mb=function(a){this.url=a};g.getError=function(){return this.Vb};function iF(a,b){a.Vb=b;a.Vb||jF(a,null);a.dispatchEvent(new K("icons"))}g.Ui=function(){return this.oa};function jF(a,b){a.oa=b;a.oa&&iF(a,!0)}g.ob=function(){return this.tf};hF.prototype.isLoading=hF.prototype.ob;
hF.prototype.Wa=function(a){this.tf!=a&&(this.tf=a,this.dispatchEvent(new K("loading",a,!a)))};hF.prototype.Gf=function(a){this.ob()||hF.C.Gf.call(this,a)};function kF(){C.call(this);this.log=Bga;this.l={};this.u={};this.o=new ko;this.j={};this.I=new Fh(this.Bs,50,this);var a=window.localStorage.getItem(lF());a&&(a=JSON.parse(a),M.set(lF(),a),window.localStorage.removeItem(lF()))}w(kF,C);xa(kF);var Bga=E.V("os.data.DataManager");function mF(a,b){b.type in a.l?E.hb(a.log,'The provider type "'+b.type+'" has already been registered with the data manager!'):a.l[b.type]=b}
function nF(a,b,c){b=b.toLowerCase();b in a.u?E.error(a.log,'The descriptor type "'+b+'" already exists!'):a.u[b]=c}function oF(a,b){b=b.toLowerCase();if(b in a.u)return new a.u[b];E.ta(a.log,'No descriptor exists for type "'+b+'".');return null}function pF(a,b){if(b.D()){for(var c=b.Lh(),d=0,e=c.length;d<e;d++)a.j[c[d]]=b;a.dispatchEvent(new dF("addDescriptor",b));a.I.start()}else E.error(a.log,"Could not add the descriptor because its ID was empty or null")}
function Rw(a,b){if(b.D()){for(var c=b.Lh(),d=0,e=c.length;d<e;d++)delete a.j[c[d]];a.dispatchEvent(new dF("removeDescriptor",b));a.I.start()}else E.error(a.log,"Could not remove the descriptor because its ID was empty or null")}g=kF.prototype;g.Ka=function(a){return a in this.j?this.j[a]:null};function Qw(a,b){var c=[],d;for(d in a.j)if(!b||0===d.indexOf(b)){var e=a.j[d];-1===c.indexOf(e)&&c.push(e)}return c}
function qF(a,b){if(a.rb(b.D()))throw Error('A provider with the ID "'+b.D()+'" already exists! Modify that one rather than replacing it.');a.o.R(b);b.H("propertychange",a.sx,!1,a);a.dispatchEvent(new bF("addDataProvider",b))}function rF(a,b){if(b=a.rb(b))b.M("propertychange",a.sx,!1,a),a.o.removeChild(b),a.dispatchEvent(new bF("removeDataProvider",b)),b.dispose()}g.sx=function(a){var b=a.target;"loading"!=a.j||b.ob()||this.dispatchEvent(new bF("dataProviderLoaded",b))};
g.rb=function(a){a=a.replace(/#.*/,"");var b=b?b.replace(/#.*/,""):null;var c=this.o.na(),d=null;if(c)for(var e=0,f=c.length;e<f;e++)if(c[e].D()==a||b&&c[e]instanceof hF&&c[e].Ma()==b){d=c[e];break}return d};g.Sh=function(){var a=this.o.na();return a?cb(a,function(a){return a.kc()&&a.getError()}):!1};
g.Bs=function(){var a=[],b={},c=Date.now()-2592E6,d;for(d in this.j)if(!(d in b)){var e=this.j[d];if(e){for(var f=e.Lh(),h=0,k=f.length;h<k;h++)b[f[h]]=!0;if(F(e,"os.data.IUrlDescriptor")&&(f=e.Ma(),!f||Jw(f)&&!(eB.s().g instanceof bB)))continue;(e.isLocal()||e.ud>c)&&a.push(e.ra())}}M.set(lF(),a)};function lF(){return"opensphere.descriptors"};var Qx="maxFeatures";function sF(a,b,c,d){A.call(this,a);this.source=b;this.filter=c||null;this.items=d||null}w(sF,A);function tF(){kF.call(this);this.log=Cga;this.g={};this.A=!0;uF(this,M.get("dataManager.filterTime",!0));var a=L.s();a.H("addLayer",this.B,!1,this);a.H("removeLayer",this.G,!1,this)}w(tF,kF);xa(tF);yc(kF,{s:function(){return tF.s()}});var Cga=E.V("os.data.OSDataManager");tF.prototype.J=function(){tF.C.J.call(this);var a=L.s();a.M("addLayer",this.B,!1,this);a.M("removeLayer",this.G,!1,this)};tF.prototype.N=function(a){return this.g[a]||null};
function SB(a){var b=[],c;for(c in a.g)b.push(a.g[c]);return b}function vF(a){var b=0;a=SB(a);for(var c=0,d=a.length;c<d;c++)b+=a[c].dg();return b}function uF(a,b){if(a.A!=b){a.A=b;for(var c in a.g)wF(a.g[c],b);M.set("dataManager.filterTime",b);a.dispatchEvent(new K("timeFilterEnabled",b))}}tF.prototype.B=function(a){a.layer instanceof Vz&&(a=a.layer,a.N()instanceof Rz&&(a=a.N(),a.D()in this.g||(this.g[a.D()]=a,wF(a,this.A),this.dispatchEvent(new sF("dataSourceAdded",a)))))};
tF.prototype.G=function(a){a.layer instanceof Vz&&(a=a.layer,a.N()instanceof Rz&&(a=a.N(),a.D()in this.g&&(delete this.g[a.D()],this.dispatchEvent(new sF("dataSourceRemoved",a)))))};function xF(a,b){if(a=a.Ka(b))if(a=a.eg(),0<a&&a<ng)return yF(vg.s(),a),!0;return!1}var Fy=null;function zF(a){this.l=a;this.state="ready"}zF.prototype.N=function(){return Fy.N(this.l)};zF.prototype.nb=!1;zF.prototype.title="Source";zF.prototype.Ba=null;function AF(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.N()?!0:(a.state="error",a.Ba='Data source "'+a.l+'" does not exist',!1)};function BF(){}function CF(a){if("number"==typeof a){var b=new BF;b.u=a;var c=a;if(0==c)c="Etc/GMT";else{var d=["Etc/GMT",0>c?"-":"+"];c=Math.abs(c);d.push(Math.floor(c/60)%100);c%=60;0!=c&&d.push(":",Sb(c,2));c=d.join("")}b.l=c;c=a;0==c?c="UTC":(d=["UTC",0>c?"+":"-"],c=Math.abs(c),d.push(Math.floor(c/60)%100),c%=60,0!=c&&d.push(":",c),c=d.join(""));a=DF(a);b.o=[c,c];b.g={gS:a,Mt:a};b.j=[];return b}b=new BF;b.l=a.id;b.u=-a.std_offset;b.o=a.names;b.g=a.names_ext;b.j=a.transitions;return b}
function DF(a){var b=["GMT"];b.push(0>=a?"+":"-");a=Math.abs(a);b.push(Sb(Math.floor(a/60)%100,2),":",Sb(a%60,2));return b.join("")}function EF(a,b){b=Date.UTC(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate(),b.getUTCHours(),b.getUTCMinutes())/36E5;for(var c=0;c<a.j.length&&b>=a.j[c];)c+=2;return 0==c?0:a.j[c-1]}BF.prototype.ec=function(a){return this.u-EF(this,a)};function FF(){this.j=[];this.g=cg;var a="mm:ss.SSS";for(Dga&&(a=a.replace(/\u200f/g,""));a;){for(var b=a,c=0;c<GF.length;++c){var d=a.match(GF[c]);if(d){var e=d[0];a=a.substring(e.length);0==c&&("''"==e?e="'":(e=e.substring(1,"'"==d[1]?e.length-1:e.length),e=e.replace(/''/g,"'")));this.j.push({text:e,type:c});break}}if(b===a)throw Error("Malformed pattern part: "+a);}}var GF=[/^'(?:[^']|'')*('|$)/,/^(?:G+|y+|M+|k+|S+|E+|a+|h+|K+|H+|c+|L+|Q+|d+|m+|s+|v+|V+|w+|z+|Z+)/,/^[^'GyMkSEahKHcLQdmsvVwzZ]+/];
function HF(a){return a.getHours?a.getHours():0}FF.prototype.format=function(a,b){if(!a)throw Error("The date to format must be non-null.");var c=b?6E4*(a.getTimezoneOffset()-b.ec(a)):0,d=c?new Date(a.getTime()+c):a,e=d;b&&d.getTimezoneOffset()!=a.getTimezoneOffset()&&(e=6E4*(d.getTimezoneOffset()-a.getTimezoneOffset()),d=new Date(d.getTime()+e),c+=0<c?-864E5:864E5,e=new Date(a.getTime()+c));c=[];for(var f=0;f<this.j.length;++f){var h=this.j[f].text;1==this.j[f].type?c.push(Ega(this,h,a,d,e,b)):c.push(h)}return c.join("")};
function IF(a,b){b=String(b);a=a.g||cg;if(void 0!==a.xC){for(var c=[],d=0;d<b.length;d++){var e=b.charCodeAt(d);c.push(48<=e&&57>=e?String.fromCharCode(a.xC+e-48):b.charAt(d))}b=c.join("")}return b}var Dga=!1;function JF(a){if(!(a.getHours&&a.getSeconds&&a.getMinutes))throw Error("The date to format has no time (probably a goog.date.Date). Use Date or goog.date.DateTime, or use a pattern without time fields.");}
function Ega(a,b,c,d,e,f){var h=b.length;switch(b.charAt(0)){case "G":return c=0<d.getFullYear()?1:0,4<=h?a.g.OB[c]:a.g.PB[c];case "y":return c=d.getFullYear(),0>c&&(c=-c),2==h&&(c%=100),IF(a,Sb(c,h));case "M":a:switch(c=d.getMonth(),h){case 5:h=a.g.YB[c];break a;case 4:h=a.g.SB[c];break a;case 3:h=a.g.gC[c];break a;default:h=IF(a,Sb(c+1,h))}return h;case "k":return JF(e),c=HF(e)||24,IF(a,Sb(c,h));case "S":return c=e.getTime()%1E3/1E3,IF(a,c.toFixed(Math.min(3,h)).substr(2)+(3<h?Sb(0,h-3):""));case "E":return c=
d.getDay(),4<=h?a.g.wC[c]:a.g.iC[c];case "a":return JF(e),h=HF(e),a.g.FB[12<=h&&24>h?1:0];case "h":return JF(e),c=HF(e)%12||12,IF(a,Sb(c,h));case "K":return JF(e),c=HF(e)%12,IF(a,Sb(c,h));case "H":return JF(e),c=HF(e),IF(a,Sb(c,h));case "c":a:switch(c=d.getDay(),h){case 5:h=a.g.mC[c];break a;case 4:h=a.g.pC[c];break a;case 3:h=a.g.oC[c];break a;default:h=IF(a,Sb(c,1))}return h;case "L":a:switch(c=d.getMonth(),h){case 5:h=a.g.lC[c];break a;case 4:h=a.g.kC[c];break a;case 3:h=a.g.nC[c];break a;default:h=
IF(a,Sb(c+1,h))}return h;case "Q":return c=Math.floor(d.getMonth()/3),4>h?a.g.hC[c]:a.g.cC[c];case "d":return IF(a,Sb(d.getDate(),h));case "m":return JF(e),IF(a,Sb(e.getMinutes(),h));case "s":return JF(e),IF(a,Sb(e.getSeconds(),h));case "v":return h=f||CF(c.getTimezoneOffset()),h.l;case "V":return a=f||CF(c.getTimezoneOffset()),2>=h?a.l:0<EF(a,c)?sa(a.g.MB)?a.g.MB:a.g.DST_GENERIC_LOCATION:sa(a.g.Mt)?a.g.Mt:a.g.STD_GENERIC_LOCATION;case "w":return c=e.getFullYear(),b=e.getMonth(),d=e.getDate(),e=a.g.Kt,
c=new Date(c,b,d),e=sa(e)?e:3,b=a.g.Jt||0,d=((c.getDay()+6)%7-b+7)%7,c=c.valueOf()+864E5*((e-b+7)%7-d),e=(new Date((new Date(c)).getFullYear(),0,1)).valueOf(),IF(a,Sb(Math.floor(Math.round((c-e)/864E5)/7)+1,h));case "z":return a=f||CF(c.getTimezoneOffset()),4>h?a.o[0<EF(a,c)?2:0]:a.o[0<EF(a,c)?3:1];case "Z":return e=f||CF(c.getTimezoneOffset()),4>h?(h=-e.ec(c),a=[0>h?"-":"+"],h=Math.abs(h),a.push(Sb(Math.floor(h/60)%100,2),Sb(h%60,2)),h=a.join("")):h=IF(a,DF(e.ec(c))),h;default:return""}};Mi("time",function(a,b){a=b?b.split(/\s*,\s*/):[];b=new Date;var c=null;switch(a[1]){case "Timeline":b=vg.s();c=new qg(new Date(b.g-b.G),new Date(b.g));break;case "Today":var d=KF(b,"day");var e=LF(b,"day");break;case "Yesterday":d=KF(b,"day");e=LF(b,"day");d.setUTCDate(d.getUTCDate()-1);e.setUTCDate(e.getUTCDate()-1);break;case "Last 24 Hours":e=b;d=MF(e,"hours",-24);break;case "Last 48 Hours":e=b;d=MF(e,"hours",-48);break;case "Last 72 Hours":e=b;d=MF(e,"hours",-72);break;case "Last 168 Hours (1 Week)":e=
b;d=MF(e,"hours",-168);break;case "This Week":d=KF(b,"week");e=LF(b,"week");break;case "Last Week":d=KF(b,"week");e=LF(b,"week");d.setUTCDate(d.getUTCDate()-7);e.setUTCDate(e.getUTCDate()-7);break;case "This Month":d=KF(b,"month");e=LF(b,"month");break;case "Last 30 Days":e=LF(b,"day");d=MF(e,"day",-30);break;case "Last 60 Days":e=LF(b,"day");d=MF(e,"day",-60);break;case "Last 90 Days":e=LF(b,"day");d=MF(e,"day",-90);break;case "This Year":d=KF(b,"year"),e=LF(b,"year")}!c&&d&&e&&(c=new qg(d,e));d=
c;return NF(new Date("start"==a[0]?d.Sa():d.Ya()),a[2]||OF)});var PF="YYYY-MM-DD YYYY/MM/DD YYYYMMDD MM-DD-YYYY MM/DD/YYYY MMDDYYYY DD-MM-YYYY DD/MM/YYYY DDMMYYYY".split(" "),Fga={instant:/((up|start|begin).*)?(day|date|doi)/i,start:/((up|start|begin).*)?(day|date|doi)/i,end:/(down|stop|end).*(day|date|doi)/i},QF="YYYY-MM-DDTHH:mm:ss.SSSZ;YYYY-MM-DDTHH:mm:ss.SSSZZ;YYYY-MM-DDTHH:mm:ss.SSS;YYYY-MM-DDTHH:mm:ss.SSSSZ;YYYY-MM-DDTHH:mm:ss.SSSSZZ;YYYY-MM-DDTHH:mm:ss.SSSS;YYYY-MM-DDTHH:mm:ssZ;YYYY-MM-DDTHH:mm:ssZZ;YYYY-MM-DDTHH:mm:ss;YYYY-MM-DDTHH:mmZ;YYYY-MM-DDTHH:mmZZ;YYYY-MM-DDTHH:mm;YYYY-MM-DD HH:mm:ss.SSSZ;YYYY-MM-DD HH:mm:ss.SSSZZ;YYYY-MM-DD HH:mm:ss.SSS;YYYY-MM-DD HH:mm:ss.SSSSZ;YYYY-MM-DD HH:mm:ss.SSSSZZ;YYYY-MM-DD HH:mm:ss.SSSS;YYYY-MM-DD HH:mm:ssZ;YYYY-MM-DD HH:mm:ssZZ;YYYY-MM-DD HH:mm:ss;YYYY-MM-DD HH:mmZ;YYYY-MM-DD HH:mmZZ;YYYY-MM-DD HH:mm;YYYY/MM/DD HH:mm:ss.SSSZ;YYYY/MM/DD HH:mm:ss.SSSZZ;YYYY/MM/DD HH:mm:ss.SSS;YYYY/MM/DD HH:mm:ss.SSSSZ;YYYY/MM/DD HH:mm:ss.SSSSZZ;YYYY/MM/DD HH:mm:ss.SSSS;YYYY/MM/DD HH:mm:ssZ;YYYY/MM/DD HH:mm:ssZZ;YYYY/MM/DD HH:mm:ss;YYYY/MM/DD HH:mmZ;YYYY/MM/DD HH:mmZZ;YYYY/MM/DD HH:mm;YYYY:MM:DD::HH:mm:ss.SSSZ;YYYY:MM:DD::HH:mm:ss.SSSZZ;YYYY:MM:DD::HH:mm:ss.SSS;YYYY:MM:DD::HH:mm:ss.SSSSZ;YYYY:MM:DD::HH:mm:ss.SSSSZZ;YYYY:MM:DD::HH:mm:ss.SSSS;YYYY:MM:DD::HH:mm:ssZ;YYYY:MM:DD::HH:mm:ssZZ;YYYY:MM:DD::HH:mm:ss;YYYY:MM:DD::HH:mmZ;YYYY:MM:DD::HH:mmZZ;YYYY:MM:DD::HH:mm;YYYYMMDDTHHmmssZ;YYYYMMDDTHHmmss;YYYYMMDDHHmmssZ;YYYYMMDDHHmmss;MM/DD/YYYY HH:mm:ssZ;MM/DD/YYYY HH:mm:ss;MM/DD/YYYY HH:mmZ;MM/DD/YYYY HH:mm;MM/DD/YY HH:mm:ssZ;MM/DD/YY HH:mm:ss;MM/DD/YY HH:mmZ;MM/DD/YY HH:mm".split(";"),
Gga="YYYY-MM-DDTHH:mm:ss.SSS Z;YYYY-MM-DDTHH:mm:ss.SSSS Z;YYYY-MM-DDTHH:mm:ss.SS Z;YYYY-MM-DDTHH:mm:ss.S Z;YYYY-MM-DDTHH:mm:ss.SSSSZ;YYYY-MM-DDTHH:mm:ss.SSSZ;YYYY-MM-DDTHH:mm:ss.SSZ;YYYY-MM-DDTHH:mm:ss.SZ;YYYY-MM-DDTHH:mm:ss.SSSS;YYYY-MM-DDTHH:mm:ss.SSS;YYYY-MM-DDTHH:mm:ss.SS;YYYY-MM-DDTHH:mm:ss.S;YYYY-MM-DDTHH:mm:ss Z;YYYY-MM-DDTHH:mm Z;YYYY-MM-DD HH:mm:ss.SSS Z;YYYY-MM-DD HH:mm:ss.SSSS Z;YYYY-MM-DD HH:mm:ss.SS Z;YYYY-MM-DD HH:mm:ss.S Z;YYYY-MM-DD HH:mm:ss.SSSSZ;YYYY-MM-DD HH:mm:ss.SSSZ;YYYY-MM-DD HH:mm:ss.SSZ;YYYY-MM-DD HH:mm:ss.SZ;YYYY-MM-DD HH:mm:ss.SS;YYYY-MM-DD HH:mm:ss.S;YYYY-MM-DD HH:mm:ss Z;YYYY-MM-DD HH:mm Z;YYYY/MM/DD HH:mm:ss.SSS Z;YYYY/MM/DD HH:mm:ss.SSSS Z;YYYY/MM/DD HH:mm:ss.SS Z;YYYY/MM/DD HH:mm:ss.S Z;YYYY/MM/DD HH:mm:ss.SSSZ;YYYY/MM/DD HH:mm:ss.SSSSZ;YYYY/MM/DD HH:mm:ss.SSZ;YYYY/MM/DD HH:mm:ss.SZ;YYYY/MM/DD HH:mm:ss.SSSS;YYYY/MM/DD HH:mm:ss.SS;YYYY/MM/DD HH:mm:ss.S;YYYY/MM/DD HH:mm:ss Z;YYYY/MM/DD HH:mm Z;MM/DD/YYYY HH:mm:ss Z;MM/DD/YYYY HH:mm Z;MM/DD/YY HH:mm:ss Z;MM/DD/YY HH:mm Z;YYDDDHHmmss;YYYYMMDD HHmmss".split(";"),
Hga={instant:/((up|start|begin).*)?(date|time)/i,start:/((up|start|begin).*)?(date|time)/i,end:/(down|stop|end).*(date|time)/i},RF="HH:mm:ssZ;HH:mm:ss;HH:mm:ss.SSSZ;HH:mm:ss.SSS;HH:mm:ss.SSSSZ;HH:mm:ss.SSSS;HH:mmZ;HH:mm;HHmmssZ;HHmmss;ZHHmmss;HHmmss.SSSZ;HHmmss.SSS;HHmmss.SSSSZ;HHmmss.SSSS;HHmmZ;ZHHmm;K*m*s a z".split(";"),Iga="HH:mm:ss.SSS;HH:mm:ss.SSSS;HH:mm:ss.SS;HH:mm:ss.S;HHmmss.SSSS;HHmmss.SS;HHmmss.S;HH:mm:ss.SSSZ;HH:mm:ss.SSSSZ;HH:mm:ss.SSZ;HH:mm:ss.SZ;HHmmss.SSSSZ;HHmmss.SSSZ;HHmmss.SSZ;HHmmss.SZ;HH:mm:ss.SSS Z;HH:mm:ss.SSSS Z;HH:mm:ss.SS Z;HH:mm:ss.S Z;HHmmss.SSS Z;HHmmss.SSSS Z;HHmmss.SS Z;HHmmss.S Z;HH:mm:ss Z;HH:mm Z;HHmmss Z;HHmm Z".split(";"),
SF={instant:/((up|start|begin).*)?(time|toi)/i,start:/((up|start|begin).*)?(time|toi)/i,end:/(down|stop|end).*(time|toi)/i},TF=new qg(-Infinity,Infinity),UF=0,VF="Z";function LF(a,b){return WF(a,b,!1)}function KF(a,b,c){return c?XF(WF(YF(a),b,void 0)):WF(a,b)}
function ZF(a,b,c,d){b=(b||"").toLowerCase();a=a.toISOString();if("year"==b)return a.slice(0,4);if("month"==b)return a.slice(0,7);if("day"==b||"week"==b||c)return a.slice(0,10);a=a.replace(".000","");d||(a=a.replace("T"," "),a=a.replace("Z",""));return a}function $F(a){return(new FF).format(a)}function NF(a,b){return moment(a.toISOString()).utc().format(b)}
function MF(a,b,c,d){a=d?YF(a):new Date(a.getTime());switch(b){case "custom":case "hours":a.setUTCHours(a.getUTCHours()+c);break;case "day":a.setUTCDate(a.getUTCDate()+c);break;case "week":a.setUTCDate(a.getUTCDate()+7*c);break;case "month":a.setUTCMonth(a.getUTCMonth()+c);break;case "year":a.setUTCFullYear(a.getUTCFullYear()+c)}return d?XF(a):a}function aG(a,b,c){a=bG(a,b,c);return a.isValid()?Jga(a._f):null}function cG(a,b,c){a=bG(a,b,c);return a.isValid()?a.toDate():null}
function bG(a,b,c){c=void 0!==c?c:!0;var d=[];if(q(b))for(var e=0,f=b.length;e<f;e++)d.push(dG(b[e]));else b?d.push(dG(b)):d=QF;return moment.utc(a,d,c)}function dG(a){return a.replace(/(M+|D+|H+|m+|s+)/g,function(a){return 2==a.length?a[0]:a})}function Jga(a){return a.replace(/(M+|D+|H+|m+|s+)/g,function(a){return 1==a.length?a+a:a})}
function WF(a,b,c){var d=new Date(a.getTime());c=void 0===c||c;b=b.toLowerCase();switch(b){case "year":d.setUTCMonth(0,1);d.setUTCHours(0,0,0,0);!c&&a.getTime()>d.getTime()&&d.setUTCFullYear(d.getUTCFullYear()+1);break;case "month":d.setUTCDate(1);d.setUTCHours(0,0,0,0);!c&&a.getTime()>d.getTime()&&d.setUTCMonth(d.getUTCMonth()+1);break;case "week":d.setUTCDate(d.getUTCDate()-d.getUTCDay());d.setUTCHours(0,0,0,0);!c&&a.getTime()>d.getTime()&&d.setUTCDate(d.getUTCDate()+7);break;case "custom":case "day":d.setUTCHours(0,
0,0,0);!c&&a.getTime()>d.getTime()&&d.setUTCDate(d.getUTCDate()+1);break;case "hour":d.setUTCMinutes(0,0,0);!c&&a.getTime()>d.getTime()&&d.setUTCHours(d.getUTCHours()+1);break;case "min":d.setUTCSeconds(0,0);!c&&a.getTime()>d.getTime()&&d.setUTCMinutes(a.getUTCMinutes()+1);break;case "sec":d.setUTCMilliseconds(0),!c&&a.getTime()>d.getTime()&&d.setUTCSeconds(a.getUTCSeconds()+1)}return d}function XF(a){return new Date(a.getTime()+6E4*a.getTimezoneOffset())}
function YF(a){return new Date(a.getTime()-6E4*a.getTimezoneOffset())}function pg(a,b){b||(b=new ig);var c=UF,d=VF;if(c)return b.g.setTime(a+c),b.xi(!0,!1)+" "+d;b.g.setTime(a);return b.xi(!0,!0)}function eG(){UF=M.get(["time","offset"],0);VF=M.get(["time","offsetLabel"],"Z")}function Kga(){eG()}var OF=QF[6].replace("Z","[Z]");
Mi("now",function(a,b){a=b?b.split(/\s*,\s*/):[];b=a[0]||0;var c=parseFloat(b);isNaN(c)||(b=c);b=moment.duration(b,void 0);b=new Date(Date.now()+b.asMilliseconds());return NF(b,a[1]||OF)});var fG=Ux();function eD(a){"string"===typeof a&&(a=a.replace(/&/g,"&amp;"),a=a.replace(/</g,"&lt;"),a=a.replace(/>/g,"&gt;"),a=a.replace(/'/g,"&#39;"),a=a.replace(/"/g,"&quot;"),a=a.replace(/\//g,"&#x2F;"));return a}function Z(a,b,c,d){a=ny(a,b.ownerDocument,c,d);b.appendChild(a);return a}function gG(a,b,c,d,e){a=hG(a,b,c.ownerDocument,d,e);c.appendChild(a);return a}function ny(a,b,c,d){b=b||fG;a=b.createElement(a);null!=d&&Yx(a,d);null!=c&&a.appendChild(b.createTextNode(String(c)));return a}
function hG(a,b,c,d,e){c=c||fG;a=c.createElementNS(b,a);null!=e&&Yx(a,e);null!=d&&a.appendChild(c.createTextNode(String(d)));return a}function iG(a,b){a=jr(a);return ab(a,function(a){return a.localName==b})}function jG(a){a=su(a,!0).trim();a=new Date(a||void 0);return isNaN(a.getTime())?null:a}
function kG(a,b,c,d){if(3===a.nodeType)b.appendChild(b.ownerDocument.createTextNode(a.textContent));else if(4===a.nodeType)b.appendChild(b.ownerDocument.createCDATASection(a.textContent));else if(1===a.nodeType){if(a.hasAttributes()){var e={};for(var f=a.attributes,h=0,k=f.length;h<k;h++)"xmlns:ogc"!=f[h].name&&(e[f[h].name]=f[h].value)}b=c&&d?gG(c+":"+a.localName,d,b,void 0,e):Z(a.localName,b,void 0,e);if((a=a.childNodes)&&0<a.length)for(h=0,k=a.length;h<k;h++)kG(a[h],b,c,d);return b}return null}
function lG(a){return Xx(a).replace(/ xmlns=""/g,"")}function mG(a,b){return a&&!Hb(Tb(a.textContent))?a.textContent:b}function nG(a,b){if(a=a.querySelector(b))if(a=Tb(a.textContent),!Hb(a))return a;return null}var Lga=/xsi:.*?=".*?"/gm;function oG(){this.id=void 0;this.j="AbstractMapping"}g=oG.prototype;g.ja=void 0;g.ld=void 0;g.Wd=function(){return null};g.D=function(){return this.id};g.ba=function(){return null};g.lc=function(){return 0};g.tk=function(){return"default"};g.hf=function(a){return null!=a};g.clone=function(){var a=new this.constructor;a.ja=this.ja;return a};g.ra=function(a){a=a||{};a.id=this.D();a.field=this.ja;return a};g.restore=function(a){this.ja=a.field};
g.sc=function(){var a=ny("mapping",void 0,void 0,{type:this.j});Z("field",a,dy(this.ja));return a};g.fd=function(a){this.j=a.getAttribute("type");this.ja=ey(pG(a,"field"))};function pG(a,b){return(a=a.getElementsByTagName(b))&&a[0]?a[0].innerHTML:null};function qG(){oG.call(this);this.g=void 0;this.A=!1}w(qG,oG);hy(fy.s(),"Rename",qG);g=qG.prototype;g.D=function(){return"Rename"};g.ba=function(){return"Rename "+this.ja+" to "+this.g};g.Fa=function(a){if(this.ja&&this.g&&this.g!=this.ja){var b=ay(a,this.ja);b&&(by(a,this.g,b),this.A||by(a,this.ja,void 0))}};g.clone=function(){var a=qG.C.clone.call(this);a.g=this.g;a.A=this.A;return a};g.ra=function(a){a=qG.C.ra.call(this,a);a.toField=this.g;a.keepOriginal=this.A;return a};
g.restore=function(a){qG.C.restore.call(this,a);this.g=a.toField;this.A=a.keepOriginal};g.sc=function(){var a=qG.C.sc.call(this);Z("toField",a,this.g);Z("keepOriginal",a,this.A||!1);return a};g.fd=function(a){qG.C.fd.call(this,a);var b=pG(a,"toField");null!=b?this.g=b:this.g=void 0;b=pG(a,"keepOriginal");this.A=null!=b?"true"===b?!0:!1:!1};function rG(){oG.call(this);this.value=null;this.replace=!0}w(rG,oG);g=rG.prototype;g.D=function(){return"Static"};g.ba=function(){return"Set "+this.ja+" to "+this.value};g.Fa=function(a){a&&this.ja&&(this.replace||null==ay(a,this.ja))&&by(a,this.ja,this.value)};g.clone=function(){var a=rG.C.clone.call(this);a.value=this.value;a.replace=this.replace;return a};g.ra=function(a){a=rG.C.ra.call(this,a);a.value=this.value;a.replace=this.replace;return a};
g.restore=function(a){rG.C.restore.call(this,a);this.value=a.value;this.replace=a.replace};var sG={merge:"Combines all imported areas into a single area.",title:"Custom title given to all imported areas.",titleColumn:"Column used to apply titles to all imported areas. If an imported item doesn't have this field defined, a generic title will be given. You may also choose to apply a custom title to imported areas.",description:"Description applied to all imported areas.",descColumn:"Column used to apply descriptions to all imported areas. If an imported item doesn't have this field defined, the description will be left blank. You may also choose to apply a custom description to imported areas.",
tags:"Comma-delimited list of tags to apply to all imported areas. Tags can be used to group or search areas in the Areas tab of the Layers window.",tagsColumn:"Column used to apply tags to all imported areas. Tags can be used to group or search areas in the Areas tab of the Layers window.  If an imported item doesn't have this field defined, the tags will be left blank. You may also choose to provide your own custom tags."},tG="title name description tags geometry _originalGeometry interpolationMethod".split(" ");
function uG(a,b){b.forEach(function(b){b.Fa(a);b instanceof qG&&"title"==b.g&&!a.get("title")&&a.set("title","No "+b.ja)});a.get("title")&&a.set("name",void 0)}
function vG(a){var b=[];if(a){if(a.titleColumn&&a.titleColumn.field){var c=new qG;c.A=!0;c.g="title";c.ja=a.titleColumn.field;b.push(c)}else a.title&&(c=new rG,c.ja="title",c.value=a.title||"No Title Provided",b.push(c));a.descColumn&&a.descColumn.field?(c=new qG,c.A=!0,c.g="description",c.ja=a.descColumn.field,b.push(c)):a.description&&(c=new rG,c.ja="description",c.value=a.description,b.push(c));a.tagsColumn&&a.tagsColumn.field?(c=new qG,c.A=!0,c.g="tags",c.ja=a.tagsColumn.field,b.push(c)):a.tags&&
(c=new rG,c.ja="tags",c.value=a.tags,b.push(c))}return b};function wG(){this.l=this.defaultDataProjection=null}function xG(a,b,c){var d;c&&(d={dataProjection:c.dataProjection?c.dataProjection:a.On(b),featureProjection:c.featureProjection});return yG(a,d)}function yG(a,b){return of({dataProjection:a.defaultDataProjection,featureProjection:a.l},b)}
function zG(a,b,c){var d=c?Cl(c.featureProjection):null,e=c?Cl(c.dataProjection):null,f;d&&e&&!Nl(d,e)?a instanceof yo?f=(b?a.clone():a).transform(b?d:e,b?e:d):f=Ql(a,e,d):f=a;if(b&&c&&void 0!==c.decimals){var h=Math.pow(10,c.decimals);f===a&&(f=f.clone());f.Nl(function(a){for(var b=0,c=a.length;b<c;++b)a[b]=Math.round(a[b]*h)/h;return a})}return f};function AG(){wG.call(this)}I(AG,wG);function BG(a){return"string"===typeof a?(a=JSON.parse(a))?a:null:null!==a?a:null}g=AG.prototype;g.T=function(){return"json"};g.Ls=function(a,b){return CG(this,BG(a),xG(this,a,b))};g.vg=function(a,b){var c=BG(a);a=xG(this,a,b);if("FeatureCollection"===c.type){b=[];c=c.features;var d;var e=0;for(d=c.length;e<d;++e)b.push(CG(this,c[e],a))}else b=[CG(this,c,a)];return b};g.gl=function(a,b){var c=BG(a);a=xG(this,a,b);return DG(c,a)};
g.On=function(a){a=BG(a).crs;var b;a?"name"==a.type?b=Cl(a.properties.name):Mf(!1,36):b=this.defaultDataProjection;return b};g.Ht=function(a,b){return JSON.stringify(this.g(a,b))};g.It=function(a,b){return JSON.stringify(EG(this,a,b))};function FG(a){a=a?a:{};wG.call(this);this.defaultDataProjection=Cl(a.defaultDataProjection?a.defaultDataProjection:"EPSG:4326");a.featureProjection&&(this.l=Cl(a.featureProjection));this.j=a.geometryName;this.o=a.extractGeometryName}I(FG,AG);function DG(a,b){return a?zG((0,Mga[a.type])(a),!1,b):null}function GG(a,b){return(0,Nga[a.T()])(zG(a,!0,b),b)}
var Mga={Point:function(a){return new hp(a.coordinates)},LineString:function(a){return new Jo(a.coordinates)},Polygon:function(a){return new qp(a.coordinates)},MultiPoint:function(a){return new jp(a.coordinates)},MultiLineString:function(a){return new Mo(a.coordinates)},MultiPolygon:function(a){return new vp(a.coordinates)},GeometryCollection:function(a,b){a=a.geometries.map(function(a){return DG(a,b)});return new Zo(a)}},Nga={Point:function(a){return{type:"Point",coordinates:a.getCoordinates()}},
LineString:function(a){return{type:"LineString",coordinates:a.getCoordinates()}},Polygon:function(a,b){if(b)var c=b.rightHanded;return{type:"Polygon",coordinates:a.getCoordinates(c)}},MultiPoint:function(a){return{type:"MultiPoint",coordinates:a.getCoordinates()}},MultiLineString:function(a){return{type:"MultiLineString",coordinates:a.getCoordinates()}},MultiPolygon:function(a,b){if(b)var c=b.rightHanded;return{type:"MultiPolygon",coordinates:a.getCoordinates(c)}},GeometryCollection:function(a,b){return{type:"GeometryCollection",
geometries:a.g.map(function(a){var c=of({},b);delete c.featureProjection;return GG(a,c)})}},Circle:function(){return{type:"GeometryCollection",geometries:[]}}};function CG(a,b,c){b="Feature"===b.type?b:{type:"Feature",geometry:b};c=DG(b.geometry,c);var d=new hq;a.j?Zu(d,a.j):a.o&&void 0!==b.geometry_name&&Zu(d,b.geometry_name);d.tb(c);void 0!==b.id&&d.ga(b.id);b.properties&&d.qc(b.properties);return d}
FG.prototype.g=function(a,b){b=yG(this,b);var c={type:"Feature"},d=a.D();void 0!==d&&(c.id=d);(d=a.Z())?c.geometry=GG(d,b):c.geometry=null;b=a.Yb();delete b[a.de];rf(b)?c.properties=null:c.properties=b;return c};function EG(a,b,c){c=yG(a,c);var d=[],e;var f=0;for(e=b.length;f<e;++f)d.push(a.g(b[f],c));return{type:"FeatureCollection",features:d}};function HG(){C.call(this);this.j=[];this.l={}}w(HG,C);g=HG.prototype;g.add=function(a){var b=this.Bh(a);b&&this.dispatchEvent(new K("add",a));return b};g.Bh=function(a){var b=this.D(a);return this.contains(a)?!1:(this.l[b]=a,this.j.push(a),!0)};g.D=function(a){return a.id};function IG(a,b){return b?"string"===typeof b?b:a.D(b):null}g.contains=function(a){return(a=IG(this,a))?a in this.l:!1};g.get=function(a){return(a=IG(this,a))&&this.contains(a)?this.l[a]:null};
function JG(a){return a.j.slice()}g.remove=function(a){var b=IG(this,a);a=this.get(b);if(b&&a){delete this.l[b];for(var c=b=this.j.length;b--;)this.j[b]===a&&this.j.splice(b,1);this.j.length!==c&&this.dispatchEvent(new K("remove",a))}return a};var KG=new ds({stroke:new Zr({color:"#888",lineCap:"square",width:3}),image:new bs({radius:3,fill:new cs({color:"#888"})})}),LG=new ds({stroke:new Zr({color:"#ff0",lineCap:"square",width:3}),image:new bs({radius:3,fill:new cs({color:"#ff0"})})}),MG=new ds({stroke:new Zr({color:"#f00",lineCap:"square",width:3}),image:new bs({radius:3,fill:new cs({color:"#f00"})})}),NG=new ds({stroke:new Zr({color:"#fff",lineCap:"square",width:3}),image:new bs({radius:3,fill:new cs({color:"#fff"})})});function OG(){HG.call(this);this.log=Oga;this.u=!1;this.X()&&this.X().H("map:ready",this.zn,!1,this);this.o=null;this.A=new Fh(this.save,100,this);this.load()}w(OG,HG);xa(OG);var Oga=E.V("os.ui.query.AreaManager"),PG=1;g=OG.prototype;g.zn=function(){this.u=!0;for(var a=JG(this),b=0,c=a.length;b<c;b++){var d=a[b];Ap(d.Z(),this.o);var e=d.get("shown");this.toggle(d,void 0!==e?e:!0)}QG.s().H("propertychange",this.Ct,!1,this);this.Ct()};g.X=function(){return this.ha};
g.setMap=function(a){this.X()&&(this.X().M("map:ready",this.zn,!1,this),this.u=!1,QG.s().M("propertychange",this.Ct,!1,this));this.ha=a;this.X()&&(this.zn(),this.X().H("map:ready",this.zn,!1,this))};g.D=function(a){return""+a.D()};function RG(a,b,c){var d=c||!1;$a(b,function(a){a.D()||a.ga("area_"+Vb());a.get("temp")||a.get("title")||(a.set("temp",!0),a.set("title","temp area "+PG++));a.set("shown",d);this.Bh(a,!0)},a);a.dispatchEvent(new K("areas"))}
g.add=function(a){a.D()||a.ga("area_"+Vb());!a.get("title")&&a.get("name")?(a.set("temp",!0),a.set("title",a.get("name"))):a.get("temp")||a.get("title")||(a.set("temp",!0),a.set("title","temp area "+PG++));var b=this.Bh(a);this.dispatchEvent(new K("add/edit",a));this.A.start();return b};
function SG(a,b){var c=b.Z(),d=b.get("_originalGeometry");if(!c)return!1;var e=!1,f=c.T();if("Polygon"==f||"MultiPolygon"==f)c=sv(c),f=null,d&&(f=sv(d)),e=!0,b.tb(c),b.set("_originalGeometry",f||c);else try{var h=qv(c);h&&(b.tb(h),e=!0)}catch(k){E.error(a.log,"Error converting "+f+" to polygon:",k),e=!1}e&&a.fw(b);return e}g.fw=function(a){kq(a.Z())};function Pga(a){var b=TG;return a?ab(a,function(a){return null!=a&&SG(this,a)},b):null}
g.Bh=function(a,b){b=b||!1;if(null!=a&&SG(this,a)){if(a.kf("_node",!0),OG.C.Bh.call(this,a)){if(this.u){var c=a.get("shown");b?UG(this,a,void 0!==c?c:!0):this.toggle(a,void 0!==c?c:!0)}return!0}}else rj(tj,"Area is invalid and cannot be used. Common problems include polygons that cross themselves and multipolygons with overlapping elements.",Rh);return!1};function UG(a,b,c){if(b=a.get(b))c=void 0!==c?c:!Py(a.X(),b),b.set("shown",c),c?Py(a.X(),b)||(a.BA(b),a.X().cc(b)):a.X().Bb(b),a.A.start()}
g.toggle=function(a,b){UG(this,a,b);if(a=this.get(a))this.dispatchEvent(new K("toggle",a)),a.dispatchEvent("toggle")};g.remove=function(a){var b=OG.C.remove.call(this,a);b&&this.X()&&(this.uo(a),this.X().Bb(b),this.A.start());return b};g.clear=function(){for(var a=lE,b=JG(this),c=[],d=0;d<b.length;d++){var e=b[d];this.remove(e);c.push(e);(e=e.D()?a.getEntries(null,e.D()):[])&&VG(a,e)}return c};g.save=function(){return Ch()};g.load=function(){this.dispatchEvent(new K("areas"));return Ch()};
function Qga(a){var b=M.get("areas");if(b){var c=new FG;a.o=S;if(a=c.vg(b,{featureProjection:a.o}))for(b=0;b<a.length;b++)(c=a[b]?a[b].Z():void 0)&&c.set("_normalized",!0,!0);return a}return null}g.BA=function(a){a.zb(KG)};g.Ct=function(){for(var a=JG(this),b=!1,c=0,d=a.length;c<d;c++)this.zh(a[c],!0)&&(b=!0);b&&this.X().W("draw").N().ia()};
g.zh=function(a,b){var c=!1,d=QG.s().getEntries(null,a.D()),e=KG,f=this.X().W("draw").N();if(d&&0<d.length){var h=WG(lE);h=jc(h);if(h=1==h.length?h[0]:null)for(var k=0,l=d.length;k<l;k++){if(d[k].layerId==h){e=d[k].includeArea?LG:MG;break}}else e=d[0].includeArea?LG:MG}d=a.Ib();h=a.D();d!==e&&h&&(a.zb(e),f.Ad(h)&&(f.dispatchEvent(new Vu("changefeature",a)),c=!0));c&&!b&&f.ia();return c};g.Ps=function(a){var b=this.X().W("draw").N(),c=a.D();c&&b.Ad(c)&&b.dispatchEvent(new Vu("changefeature",a));b.ia()};
g.uo=function(a){if((a=this.get(a))&&Py(this.X(),a)){var b=lE.getEntries(void 0,a.D());0< !b.length?a.zb(KG):b[0].includeArea?a.zb(LG):a.zb(MG)}};g.iq=function(a){if((a=this.get(a))&&Py(this.X(),a)){var b=$("#map-container");a&&(a.zb(NG),b.css("cursor","pointer"))}};function Rga(a){return!a.get("temp")}
function XG(a,b){b={feature:a,columns:b||void 0};a=!TG.get(a)||a.get("temp")?"Save Area...":"Edit Area Details...";fx({label:a,x:"center",y:"center",width:400,height:"auto","show-close":!0,modal:!0},"<editarea></editarea>",void 0,void 0,void 0,b)}var TG=null;Q.directive("combonodeui",[function(){return{restrict:"AE",replace:!0,template:'<span class="form-inline"><span ng-if="nodeUi.isGroup()" title="Whether to pass all filters (AND) or any filter (OR)"><span><select class="custom-select" ng-model="nodeUi.activeGroup" ng-change="nodeUi.toggleGroup()"ng-options="item as item for item in nodeUi.groups"/></span></span><span class="ml-2"><span ng-if="nodeUi.isArea() && nodeUi.isEnabled()" ng-click="nodeUi.toggleQuery()" title="Toggles between querying and excluding the area"><i class="fa fa-fw c-glyph" ng-class="{\'fa-ban text-danger\': !nodeUi.include, \'fa-circle u-text-yellow\': nodeUi.include}"></i></span><span ng-if="nodeUi.isFilter() && nodeUi.showCopy()" ng-click="nodeUi.copy()"><i class="fa fa-copy fa-fw c-glyph" title="Copy"></i></span><span ng-if="nodeUi.isFilter() || nodeUi.isArea()" ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit"></i></span><span ng-if="nodeUi.isFilter() || nodeUi.isArea()" ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove"></i></span></span></span>',
controller:YG,controllerAs:"nodeUi"}}]);function YG(a){this.v=a;this.g=a.item;var b;if((b=this.g.na())&&b.length){for(var c=!0,d=0;d<b.length;d++){var e=b[d].gb();e&&void 0!==e.filterGroup&&!e.filterGroup&&(c=!1)}b=c}else b=!0;this.activeGroup=(this.group=b)?ZG[0]:ZG[1];(b=this.g.gb())&&b.areaId?(b=b.includeArea,b=void 0!==b?b:!0):b=!0;this.include=b;(b=this.gb())&&void 0===b.filterGroup&&(b.filterGroup=this.group);this.groups=ZG;a.$on("$destroy",this.j.bind(this))}YG.$inject=["$scope","$element"];
var ZG=["All (AND)","Any (OR)"];YG.prototype.j=function(){this.v=null};YG.prototype.ut=function(){this.group=!this.group;this.gb().filterGroup=this.group;var a=this.g.na();if(a)for(var b=0,c=a.length;b<c;b++){var d=a[b];d&&(d=d.gb())&&d.filterId&&(d.filterGroup=this.group)}this.v.$emit("dirty")};YG.prototype.toggleGroup=YG.prototype.ut;YG.prototype.bG=function(){var a=this.g.na();return a&&a.length?(a=a[0].gb(),!!a&&!!a.filterId&&"*"!==a.filterId):!1};YG.prototype.isGroup=YG.prototype.bG;
YG.prototype.gb=function(){return this.g.gb()};YG.prototype.BO=function(){this.include=!this.include;var a=this.gb();a&&(a.includeArea=this.include);O(P.s(),"filters.advanced.areaIncludeToggle",1);this.v.$emit("dirty")};YG.prototype.toggleQuery=YG.prototype.BO;YG.prototype.ZF=function(){var a=this.gb();return!!a&&!!a.areaId&&"*"!==a.areaId};YG.prototype.isArea=YG.prototype.ZF;YG.prototype.isEnabled=function(){return"off"!==this.g.getState()};YG.prototype.isEnabled=YG.prototype.isEnabled;
YG.prototype.Im=function(){var a=this.gb();return!!a&&!!a.filterId&&"*"!==a.filterId};YG.prototype.isFilter=YG.prototype.Im;YG.prototype.Rc=function(){this.v.$emit("edit",this.Im(),this.gb());O(P.s(),"filters.advanced.areaEdit",1)};YG.prototype.edit=YG.prototype.Rc;YG.prototype.view=function(){this.v.$emit("view",this.Im(),this.gb())};YG.prototype.view=YG.prototype.view;YG.prototype.bO=function(){var a=Y.Ka(this.gb().layerId),b=WG(lE);return 0<gc(b)&&!!a};YG.prototype.showCopy=YG.prototype.bO;
YG.prototype.copy=function(){this.v.$emit("copy",this.gb());O(P.s(),"filters.advanced.areaCopy",1)};YG.prototype.copy=YG.prototype.copy;YG.prototype.remove=function(){this.v.$emit("remove",this.Im(),this.gb());this.v.$emit("dirty");O(P.s(),"filters.advanced.areaRemove",1)};YG.prototype.remove=YG.prototype.remove;function $G(a){ko.call(this);this.g=null;this.collapsed=!1;a=a||"combonodeui";this.j="<"+a+"></"+a+">"}w($G,ko);g=$G.prototype;g.gb=function(){return this.g};function aH(a,b){a.g=b;b="";if(a.g&&a.g.filterId){var c=OC.sb(a.g.filterId);c&&(b=KC(cC(c),1E3))}po(a,b)}g.Kc=function(){var a=null;this.g&&this.g.layerId&&!this.g.filterId&&!this.g.areaId&&(a=(a=Y.Ka(this.g.layerId))?a.gd():"");return a?a:$G.C.Kc.call(this)};g.nc=function(a){aH(this,a.gb());$G.C.nc.call(this,a)};
g.Dj=function(){if(this.g){var a=this.g.areaId;a&&"*"!==a&&TG.iq(a)}};g.ii=function(){if(this.g){var a=this.g.areaId;a&&"*"!==a&&TG.uo(a)}};function bH(a){a=a.ba();var b=/^No (layers|filters|areas)$/;return!!a&&b.test(a)}g.getState=function(){var a=$G.C.getState.call(this);return"both"==a?"on":a};
g.Ga=function(a){var b=bH(this),c=this.getParent();if(c){var d=c.gb();this.g&&d&&void 0!==d.filterGroup&&(this.g.filterGroup=d.filterGroup);if("off"!==a&&!this.na()){var e=c.na();if(e){d=0;for(var f=e.length;d<f;d++){var h=e[d];h!==this&&(b||bH(h))&&h.Ga("off")}}if(d=c.getParent())for(b=bH(c),e=d.na(),d=0,f=e.length;d<f;d++)if(h=e[d],h!==c){var k=h.na();if(k)for(var l=0,m=k.length;l<m;l++){var n=k[l];n.D()===this.D()&&(b||bH(h))&&n.Ga("off")}}}}$G.C.Ga.call(this,a)};function QG(){C.call(this);this.entries=[];this.o=[];this.j=[];this.g={};this.u=new Fh(this.cz,20,this);this.l=new Fh(this.Jx,20,this);TG.H("propertychange",this.hH,!1,this);OC.H("propertychange",this.wI,!1,this);this.load()}w(QG,C);xa(QG);var cH=E.V("os.ui.query.QueryManager");g=QG.prototype;g.save=function(){};g.load=function(){};
g.getEntries=function(a,b,c,d,e){d=d?this.o:this.entries;e=!!e;return a||b||c?d.filter(function(d){return(e||!("negate"in d))&&(!a||a==d.layerId)&&(!b||b==d.areaId)&&(!c||c==d.filterId)}):d.slice()};function Sga(a,b,c){for(var d=0;d<c.length;d++)-1==fb(b,function(a){return Baa(a,c[d])})&&a.isActive(c[d].areaId)&&(a.g[c[d].layerId]=!0)}g.Jx=function(){var a=dH(this);Sga(this,this.o,a);this.o=a;this.cz();this.save()};
function eH(a,b,c,d,e,f,h){var k=a.getEntries(b,c,d);if(0===k.length||k[0].includeArea!==e||k[0].filterGroup!==f)nE(a,b,c,d),c={layerId:b,areaId:c,filterId:d,includeArea:void 0!==e?e:!0,filterGroup:void 0!==f?f:!0},h&&(c.temp=!0),a.entries.push(c),a.g[b]=!0;a.l.start()}function oE(a,b,c,d){(d=d?"all"===d?"*":d:void 0)&&(a.g[d]=!0);for(var e=0,f=b.length;e<f;e++)a.entries.push(b[e]),!d&&a.isActive(b[e].areaId)&&(a.g[b[e].layerId]=!0);c?a.Jx():a.l.start()}
function fH(a){var b=lE,c=WG(b),d=TG,e=OC;return(a?b.o:b.entries).filter(function(a){var b=a.layerId,f=a.areaId;a=a.filterId;if(b&&"*"!==b&&!(b in c))return!1;b=d.get(f);if(f&&"*"!==f&&(!b||!b.get("shown")))return!1;f=e.sb(a);return!a||"*"===a||f&&f.isEnabled()?!0:!1})}
function nE(a,b,c,d,e){if(b||c||d){e=a.entries.length;for(var f=0;e--;){var h=a.entries[e];b&&b!=h.layerId||c&&c!=h.areaId||d&&d!=h.filterId||(a.entries.splice(e,1),"negate"in h||(a.g[h.layerId]=!0),f++)}0<f&&(E.ta(cH,"Removed "+f+" entries matching layer: "+b+" area: "+c+" filter: "+d),a.l.start())}else E.ta(cH,"Clearing all query entries"),a.entries.length=0,a.o.length=0,e||(a.g["*"]=!0,a.l.start())}
function VG(a,b){for(var c=a.entries.length,d=0;c--;){var e=a.entries[c];-1<b.indexOf(e)&&("negate"in e||!a.isActive(e.areaId)||(a.g[e.layerId]=!0),a.entries.splice(c,1),d++)}0<d&&(E.ta(cH,"Removed "+d+" entries."),a.l.start())}function gH(a,b){var c=typeof b;b="string"==c||"number"==c?b:b.D();c=TG;for(var d=!1,e=!1,f=0,h=a.entries.length;f<h;f++){var k=a.entries[f],l=k.areaId;l===b&&(l=c.get(l))&&l.get("shown")&&(k.includeArea?d=!0:e=!0)}return d&&e?3:d?2:e?1:0}
function hH(a,b){var c=typeof b;b="string"==c||"number"==c?b:b.D();c=OC;for(var d=0,e=a.entries.length;d<e;d++){var f=a.entries[d].filterId;if(f===b&&(f=c.sb(f))&&f.isEnabled())return!0}return!1}g.cz=function(){E.ta(cH,"Refreshing layers");this.dispatchEvent(new K("queries",this.g));this.g={}};g.isActive=function(a){return 0<gH(this,a)};
function iH(a,b){for(var c=TG,d=0,e=a.entries.length;d<e;d++){var f=a.entries[d],h=f.areaId,k=c.get(h);if(f.layerId===b&&h&&f.includeArea&&k&&k.get("shown"))return!0}return!1}function WG(a){for(var b={},c=0,d=a.j.length;c<d;c++){var e=a.j[c].l,f=a.j[c].bz();e&&(b[e]=f)}return b}function jH(a,b){a.l.start();for(var c={},d=0,e=b.length;d<e;d++)c[b[d].layerId]=!0;if("*"in c)a.g["*"]=!0,a.u.start();else for(var f in c)b=a,b.g[f]=!0,b.u.start()}
g.hH=function(a){"toggle"===a.j&&(a=a.o.D(),jH(this,this.getEntries(null,a)))};g.wI=function(a){"toggle"===a.j&&(a=a.o.D(),jH(this,this.getEntries(null,null,a)))};function kH(a){var b=[a.layerId,a.areaId,a.filterId,a.includeArea,a.filterGroup];"negate"in a&&b.push(a.negate);return b.join("|")}
function dH(a,b){var c=b||a.entries;b={};for(var d,e=[],f=0,h=c.length;f<h;f++){var k=c[f];"*"===k.layerId||"*"===k.areaId||"*"===k.filterId?e.push(k):(d=kH(k),b[d]=k)}if(!e.length)return a.entries.slice();c=[];var l={};f=0;for(h=a.j.length;f<h;f++){var m=a.j[f].l;!m||m in l||(c.push({layerId:m}),l[m]=!0)}a={"*|*":[]};l={};m={};for(f=e.length;f--;){k=e[f];var n=k.areaId,p=k.layerId;h=k.filterId;var r=k.includeArea,u=k.filterGroup,v=k.negate;n&&"*"!==n&&(k=p+"|"+h,v||(k in a||(a[k]=[]),a[k].push({areaId:n,
includeArea:r})),v||"*"!==p)&&(n in l||(l[n]={}),l[n][p]=!0);h&&"*"!==h&&(p in m||(m[p]=[]),m[p].push({filterId:h,filterGroup:u}));v&&e.splice(f,1)}if("*"in m){r=m["*"];f=0;for(h=r.length;f<h;f++)for(var y=0,B=c.length;y<B;y++)u=vc(r[f]),k=c[y],k in m||(m[k]=[]),m[k].push(u);delete m["*"]}r=["layerId","areaId","filterId"];u=0;for(v=r.length;u<v;u++){var G=r[u],D=[];f=0;for(h=e.length;f<h;f++)if(k=e[f],"*"===k[G]){p=k.layerId;y=null;if(0===u){if(n=k.areaId,y=c,n&&"*"!==n){var U=l[n];U&&(y=c.filter(function(a){return!(a.layerId in
U)}))}}else if(1===u){var ja=a[p+"|*"],ea=a["*|*"];ja=ja?ja.slice():[];ea=ea?ea.slice():[];for(y=ea.length;y--;){n=ea[y].areaId;var ca=!1;B=ja.length;var aa=l[n];aa&&p in aa&&(ca=!0);if(!ca)for(aa=0;aa<B;aa++)if(ja[aa].areaId===n){ca=!0;break}ca&&ea.splice(y,1)}y=ja.concat(ea)}else y=m[p];if(y&&y.length)for(n=0,p=y.length;n<p;n++){B=vc(k);ja=y[n];for(d in ja)B[d]=ja[d];ja=!1;ea=0;for(ca=r.length;ea<ca;ea++)if("*"===B[r[ea]]){ja=!0;break}ja?D.push(B):(d=kH(B),b[d]=B)}else k.includeArea&&m[p]?D.push(k):
(d=kH(k),b[d]=k)}else D.push(k);e=D}return ic(b).concat(D)}
function lH(a,b,c,d,e,f,h){c=void 0!==c?c:0;b=b||["layer","area","filter"];if(c>=b.length)return null;d||(d=new $G(h),d.ga("root"));var k=b[c].toLowerCase();c++;for(var l=null,m=null,n,p=d;p;){if(n=p.gb()){var r=n.filterId;l||"*"===r||(l=r);n=n.layerId;m||"*"===n||(m=n)}p=p.getParent()}p=OC;if(e&&2==c&&"*"!==d.D()){for(l=c-1;l<b.length;l++)k=b[l].toLowerCase(),r=b[l===c-1?c:l].toLowerCase(),p=new $G(h),p.ga([m,k,"*"].join("|")),p.Da(k.charAt(0).toUpperCase()+k.substring(1)+"s"),n={},n[r+"Id"]="*",
aH(p,n),d.R(p),lH(a,[k],0,p,e,f,h);return d}switch(k){case "layer":m=null;l?(p=p.sb(l))&&(m=[p.type]):f?(l=f.label,r=f.id,p=new $G(h),p.ga(r),p.Da((e?"":"Layer: ")+l),aH(p,{layerId:r}),d.R(p),lH(a,b,c,p,e,f,h)):m=jc(WG(a));if(m)for(r=WG(a),l=0,n=m.length;l<n;l++){var u=r[m[l]];u&&(p=new $G(h),p.ga(m[l]),p.Da((e?"":"Layer: ")+u),aH(p,{layerId:m[l]}),d.R(p),lH(a,b,c,p,e,f,h))}break;case "area":m=JG(TG);l=0;for(n=m.length;l<n;l++)m[l].get("shown")&&(p=new $G(h),r=m[l].D(),p.ga(r),p.Da((e?"":"Area: ")+
m[l].get("title")),aH(p,{areaId:r}),d.R(p),lH(a,b,c,p,e,f,h));break;case "filter":if((r=yE(p,m))&&r.length)for(l=0,n=r.length;l<n;l++)r[l].isEnabled()&&(p=new $G(h),p.ga(r[l].D()),p.Da((e?"":"Filter: ")+r[l].S()),aH(p,{filterId:r[l].D(),layerId:m}),d.R(p),lH(a,b,c,p,e,f,h));e||(p=new $G(h),p.Da("No filters"),p.ga("nofilters"),d.R(p),lH(a,b,c,p,e,f,h))}p=d.na();e||p&&p.length?p&&p.sort(function(a,b){a=a.ba();b=b.ba();return"string"===typeof a&&"string"===typeof b?Kb(a,b):xb(a,b)}):(p=new $G(h),p.Da("No "+
k+"s"),d.R(p),lH(a,b,c,p,e,f,h));return d}var lE=null;function mH(){Y.H("dataSourceRemoved",this.A,!1,this);QG.call(this)}w(mH,QG);xa(mH);yc(QG,{s:function(){return mH.s()}});var Tga=E.V("os.query.QueryManager");mH.prototype.A=function(a){if(a.source){a=a.source.D();for(var b=this.j.length;b--;)if(this.j[b].l===a){var c=this.j.splice(b,1);c&&c.forEach(function(a){z(a)})}E.info(Tga,"Removed all query handlers for "+a)}};
mH.prototype.load=function(){this.entries=(this.entries=M.get(["query","entries"],[]))||[];var a=TG,b=OC;this.entries=this.entries.filter(function(c){var d=c.areaId;c=c.filterId;return d&&"*"!==d&&!a.get(d)||c&&"*"!==c&&!b.sb(c)?!1:!0});this.l.start()};mH.prototype.save=function(){var a=this.entries.filter(function(a){return!a.temp});M.set(["query","entries"],a)};function nH(a,b,c){this.j=a;this.l=b;this.g=c;this.Ba=this.title="Rename layer from "+this.g+" to "+this.l;this.nb=!1;this.state="ready"}nH.prototype.Fa=function(){return"ready"===this.state?(this.state="executing",oH(this,this.l),this.state="success",!0):!1};nH.prototype.Db=function(){this.state="reverting";oH(this,this.g);this.state="success";return this.j?(oH(this,this.g),this.state="ready",!0):!1};
function oH(a,b){a.j.Ta(b);a=a.j.N();F(a,"os.source.ISource")&&(a.Ta(b),L.s().dispatchEvent(new A("renameLayer")))};Q.directive("confirmtext",[function(){return{restrict:"E",templateUrl:"v1541734487/views/window/confirmtext.html",controller:pH,controllerAs:"confirmtext"}}]);function pH(a,b){a.$parent.select&&setTimeout(function(){b.find('[name="title"]').select()},10);a.$watch("confirmValue",function(b,d){b!=d&&(a.$parent.confirmValue=b)});a.$emit("window.ready")}pH.$inject=["$scope","$element"];
function qH(a){a=a||{};var b=a.windowOptions||{};fx({label:b.label||"Enter Text",icon:b.icon||"",x:b.x||"center",y:b.y||"center",width:b.width||325,height:b.height||"auto",modal:null!=b.modal?b.modal:"true","show-close":null!=b.showClose?b.showClose:"false","no-scroll":null!=b.noScroll?b.noScroll:"true"},"<confirm><confirmtext></confirmtext></confirm>",void 0,void 0,void 0,{confirmCallback:a.confirm||wa,cancelCallback:a.cancel||wa,confirmValue:a.defaultValue,yesText:a.yesText||"OK",yesIcon:a.yesIcon||
"fa fa-check",yesButtonClass:a.yesButtonClass||"btn-primary",noText:a.noText||"Cancel",noIcon:a.noIcon||"fa fa-ban",noButtonClass:a.noButtonClass||"btn-secondary",select:!!a.select,limit:a.ZS||200,formLabel:a.formLabel,prompt:a.prompt})};function rH(a){a&&qH({confirm:Ga(Uga,a),defaultValue:a.S(),prompt:"Please choose a layer name:",select:!0,windowOptions:{icon:"fa fa-i-cursor",label:"Rename Layer"}})}function Uga(a,b){a=new nH(a,b,a.S());AE(OE.s(),a)};function sH(a){Vv.call(this,a);this.ma=Vb();this.l=this.B="Image";this.j="Image Overlay";a.title&&this.Ta(this.j+" - "+a.title);this.g=!1;this.O=this.G=null;this.I=!0;this.u=null;this.A="defaultlayerui";this.P=!0;this.K="image";this.o=!0;this.Of(999)}w(sH,Vv);F(sH,"os.layer.ILayer");g=sH.prototype;g.J=function(){sH.C.J.call(this);this.Wa(!1);var a=this.N();a&&a.dispose();a=wz.s();var b=this.D();b in a.g&&delete a.g[b]};g.Va=function(){return this.u};g.ql=function(a){this.u=a};g.ob=function(){return this.g};
g.Wa=function(a){if(this.g!==a){var b=this.g;this.g=a;this.dispatchEvent(new K("loading",a,b))}};g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.rb=function(){return this.G};g.Ec=function(a){this.G=a};g.De=function(){return this.I};g.Ag=function(a){this.I=a};g.getTags=function(){return this.O};g.vb=function(a){this.O=a};g.S=function(){return this.j};g.Ta=function(a){if(this.j!==a){var b=this.j;this.j=a;this.dispatchEvent(new K("title",a,b))}};g.Sc=function(){return this.B};
g.he=function(a){this.B=a};g.cg=function(){return this.l};g.ve=function(a){this.l=a};g.hd=function(){return this.P};g.Hd=function(a){this.P=a=!!a;this.dc(a);this.dispatchEvent(new K("visible",a,!a))};g.yg=function(a){this.dc(a)};g.hk=function(){return this.yb()};g.Ld=function(){return"<defaultlayernodeui></defaultlayernodeui>"};g.Nf=function(){};g.mk=function(){return this.A};g.zg=function(a){this.A=a};
g.gd=function(){var a=vz(wz.s(),this.D());return a?(a=Iy(a,!0),Nz(this.D(),['<image xlink:href="v1541734487/images/features-base.png" x="0" y="0" width="16px" height="16px"><title>Feature layer</title></image>'],[],a)):'<img src="v1541734487/images/features-base.png" title="Feature layer"/>'};g.rm=function(){return null};g.wk=function(){return this.K};g.sl=function(a){this.K=a};g.lk=function(){return this.o};g.ao=function(a){this.o=a};
g.yl=function(a,b){if(tH)switch(a){case uH:case vH:return!0;case wH:return!!b&&za(b)&&1===b.length;case xH:return this.De();case yH:return!0}return!1};g.Ei=function(a){if(tH)switch(a){case uH:Ag(this);break;case xH:a=new Tv("removeLayer",this.D());N.dispatchEvent(a);break;case wH:rH(this)}};g.ra=function(a){a=a||{};a.visible=this.hd();a.opacity=this.Nb();a.minResolution=this.oe();a.maxResolution=this.ne();var b=vz(wz.s(),this.D());b&&(a.color=Iy(b),a.size=oz(b));return a};
g.restore=function(a){void 0!==a.id&&this.ga(a.id);void 0!==a.provider&&this.Ec(a.provider);void 0!==a.tags&&this.vb(a.tags);void 0!==a.title&&this.Ta(a.title);void 0!==a.layerType&&this.he(a.layerType);void 0!==a.explicitType&&this.ve(a.explicitType);void 0!==a.visible&&this.Hd(a.visible);var b=a.opacity;void 0!==b&&this.xd(b);this.Lj(a.minResolution||this.oe());this.Kj(a.maxResolution||this.ne())};function zH(a){a=a?a:{};var b=of({},a);delete b.preload;delete b.useInterimTilesOnError;Sf.call(this,b);this.set("preload",void 0!==a.preload?a.preload:0);this.set("useInterimTilesOnError",void 0!==a.useInterimTilesOnError?a.useInterimTilesOnError:!0);this.type="TILE"}I(zH,Sf);function AH(a){return a.get("useInterimTilesOnError")};var Vga={label:"Default",data:""},Wga=/(density)|(foreground color)/i;function BH(a,b){try{if(b&&Qb(b,"/xml")||!b){var c=("string"===typeof a?Wx(a):a).querySelector("ExceptionText, ServiceException");if(c)return c.textContent}}catch(d){}return null}function Xga(){var a=new ch;fh(a,!0);a.set("service","WFS");a.set("version","1.1.0");a.set("request","GetFeature");a.set("srsname","EPSG:4326");a.set("outputformat","application/json");return a}function CH(a){return M.get(a||"maxFeatures",5E4)};function DH(a,b,c){Tz.call(this,a,b,c)}w(DH,Tz);DH.prototype.nh=function(a){return a instanceof Uz?a.Va():null};DH.prototype.g=function(){};function EH(a,b,c){Tz.call(this,a,b,c);this.title="Change Layer Color";b&&(this.value=hz(b))}w(EH,DH);EH.prototype.j=function(){var a=L.s().W(this.Oa);return a instanceof Uz?a.Ja():null};EH.prototype.g=function(a,b){var c=L.s().W(this.Oa);c instanceof Uz&&Yga(c,b);EH.C.g.call(this,a,b)};function FH(a,b,c){Tz.call(this,a,b,c);this.title="Colorize Layer";this.value=b}w(FH,DH);FH.prototype.j=function(){var a=L.s().W(this.Oa);return a instanceof Uz?GH(a):null};FH.prototype.g=function(a,b){var c=L.s().W(this.Oa);c instanceof Uz&&Zga(c,b);FH.C.g.call(this,a,b)};function HH(a,b,c){Tz.call(this,a,b,c);this.title="Change Layer Style"}w(HH,DH);HH.prototype.j=function(){var a=L.s().W(this.Oa);return a instanceof Uz?a.Ib():null};HH.prototype.g=function(a,b){var c=L.s().W(this.Oa);c instanceof Uz&&c.zb(b);HH.C.g.call(this,a,b)};var yga=[{label:"-- None --",interval:0},{label:"15 seconds",interval:15},{label:"30 seconds",interval:30},{label:"1 minute",interval:60},{label:"5 minutes",interval:300},{label:"10 minutes",interval:600},{label:"15 minutes",interval:900},{label:"30 minutes",interval:1800},{label:"1 hour",interval:3600},{label:"2 hours",interval:7200},{label:"3 hours",interval:10800},{label:"6 hours",interval:21600},{label:"12 hours",interval:43200},{label:"1 day",interval:86400}];
function $ga(a){return(a=vz(wz.s(),a.D()))&&a.labels||[Cz()]}function aha(a){return(a=vz(wz.s(),a.D()))&&a.showLabels||!1}function bha(a){return(a=vz(wz.s(),a.D()))&&a.labelColor||Iy(a)}function cha(a){return(a=vz(wz.s(),a.D()))&&a.labelSize||!1}function IH(a){return(a=a.N())&&kg(a,"os.source.Vector")?dha(a):null}function dha(a){a=a.getColumns().slice();a.sort(Fx);return a}function eha(a){return a.B}function fha(a){a=a.Ib();return Ba(a)?a:null}function gha(a){return GH(a)}
function hha(a){var b=null;(a=a.N())&&kg(a,"os.source.Vector")&&(b=a.gc);return b};Q.directive("slider",[function(){return{restrict:"AE",replace:!0,scope:{live:"&",min:"=",max:"=",name:"@",value:"=",step:"=",disabled:"=?"},template:'<div class="slider-container"></div>',controller:JH}}]);
function JH(a,b){var c={min:a.min,max:a.max,value:a.value,disabled:void 0!==a.disabled?a.disabled:!1};void 0!==a.step&&(c.step=a.step);var d=!0;void 0!==a.live&&void 0!==a.live()&&(d=a.live());d?(d=this.j.bind(this),c.slide=this.g.bind(this),c.start=d,c.stop=d):c.stop=this.g.bind(this);a.$on("$destroy",this.o.bind(this));this.v=a;this.L=b;this.L.slider(c);b=this.l.bind(this);a.$watch("disabled",b);a.$watch("value",b);a.$watch("min",b);a.$watch("max",b);a.$watch("step",b)}JH.$inject=["$scope","$element"];
JH.prototype.o=function(){this.L=this.v=null};JH.prototype.l=function(a,b){if(a!==b){a=["min","max","step","value","disabled"];b=0;for(var c=a.length;b<c;b++){var d=a[b];d in this.v&&this.L.slider("option",d,this.v[d])}}};JH.prototype.g=function(a,b){if("values"in b){var c=b.values;b=c[0];c=c[1];b=[Math.min(b,c),Math.max(b,c)]}else b=[b.value];b&&(b=1===b.length?b[0]:b,this.v.value=b,this.v.$emit(this.v.name+"."+a.type,b),R(this.v))};
JH.prototype.j=function(a){this.v.$emit(this.v.name+"."+a.type,this.v.value)};Q.directive("tilelayerui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/layer/tile.html",controller:KH,controllerAs:"tile"}}]);function KH(a,b,c){QE.call(this,a,b,c);a.$on("color.change",this.A.bind(this));a.$on("color.reset",this.G.bind(this))}w(KH,QE);KH.$inject=["$scope","$element","$timeout"];
KH.prototype.sd=function(){KH.C.sd.call(this);this.scope&&(this.scope.color=iha(this),this.scope.styles=this.getValue(eha),this.scope.style=this.getValue(fha),this.scope.colorize=this.getValue(gha))};function iha(a){if(a=a.scope.items)for(var b=0,c=a.length;b<c;b++)try{var d=a[b].W();if(d instanceof Uz){var e=d.Ja();return e?ef(e):e}}catch(f){}return null}KH.prototype.A=function(a,b){this.xb(function(a){return new EH(a.D(),b)})};KH.prototype.G=function(a){this.A(a,"");this.scope.color=iha(this)};
KH.prototype.bn=function(){var a=this.scope.items;if(a&&1===a.length&&null!=this.scope.style){var b=this.scope.style;this.xb(function(a){return new HH(a.D(),b)})}};KH.prototype.onStyleChange=KH.prototype.bn;KH.prototype.yH=function(){var a=this.scope.colorize;this.xb(function(b){return new FH(b.D(),a)})};KH.prototype.onColorizeChange=KH.prototype.yH;function Uz(a){zH.call(this,a);this.ma=Vb();this.ka="Tile Layers";this.pa="Tiles";this.j="New Layer";this.G=this.u=!1;this.Ia=this.oa=null;this.sa=!0;this.B=this.Pc=this.g=null;this.U="<defaultlayernodeui></defaultlayernodeui>";this.Ea="tilelayerui";this.Ca="tile";this.aa=!1;this.P=this.SC.bind(this);(a=this.N())&&H(a,"propertychange",this.ZK,this)}w(Uz,zH);F(Uz,"os.layer.ILayer");F(Uz,"os.legend.ILegendRenderer");g=Uz.prototype;g.J=function(){Uz.C.J.call(this);var a=this.N();a&&a.dispose()};
g.Lj=function(a){var b=this.N();b&&(b.hc=!1,b.set("minResolution",a),b.hc=!0);Uz.C.Lj.call(this,a)};g.Kj=function(a){if(isFinite(a)){if(isFinite(a)){var b=1;for(var c=0;Math.round(a*b)/b!==a;)b*=10,c++;b=c}else b=0;a+=Math.pow(10,-b)}if(b=this.N())b.hc=!1,b.set("maxResolution",a),b.hc=!0;Uz.C.Kj.call(this,a)};function LH(a){var b=a.Ja();b&&Pz(a.D(),ef(b))}g.ZK=function(a){if(a instanceof K){var b=a.j;b==MH?this.Wa(a.o):b==NH&&this.dispatchEvent(new K("refreshInterval",a.o,a.u))}};g.D=function(){return this.ma};
g.ga=function(a){this.ma=a};g.Ja=function(){return this.g?this.g.color||this.g.baseColor:null};g.Pg=function(){return this.g?this.g.brightness||0:0};g.Qg=function(){return this.g&&null!=this.g.contrast?this.g.contrast:1};g.Tg=function(){return this.g&&null!=this.g.saturation?this.g.saturation:1};function GH(a){return a.g?a.g.colorize||!1:!1}function Zga(a,b){a.g&&(a.g.colorize=b,OH(a),Gz(a))}function Yga(a,b,c){if(c=c||a.g)c.color=b&&"string"==typeof b?ef(b):null,OH(a),LH(a),Gz(a)}
g.Ij=function(a){Uz.C.Ij.call(this,a);var b=this.g;b&&(b.brightness=a,OH(this),LH(this),Gz(this))};g.Jj=function(a){Uz.C.Jj.call(this,a);var b=this.g;b&&(b.contrast=a,OH(this),LH(this),Gz(this))};g.Mj=function(a){Uz.C.Mj.call(this,a);var b=this.g;b&&(b.saturation=a,OH(this),LH(this),Gz(this))};
function OH(a){var b=a.N();if(b instanceof PH){GH(a)||!hf(a.Ja(),a.g?a.g.baseColor:null)||0!=a.Pg()||1!=a.Qg()||1!=a.Tg()?(a=a.P,b.g||(b.g=[]),ib(b.g,a)):(a=a.P,b.g||(b.g=[]),mb(b.g,a));b=b.Gc.Mc();a=0;for(var c=b.length;a<c;a++){var d=b[a];d instanceof QH&&d.reset()}}}
g.SC=function(a){var b=(this.g?this.g.baseColor:null)||"#fffffe",c=this.Ja()||"#fffffe",d=this.Pg(),e=this.Qg(),f=this.Tg(),h=GH(this);if((h||!hf(b,c)||0!=this.Pg()||1!=this.Qg()||1!=this.Tg())&&c){if(h){var k;q(c)?k=c:k=ff(c);for(var l=0,m=a.length;l<m;l+=4)a[l]=k[0],a[l+1]=k[1],a[l+2]=k[2]}else if(!hf(b,c))for(q(b)?m=b:m=ff(b),q(c)?l=c:l=ff(c),b=Math.max(m[0],m[1],m[2]),k=b==m[0]?0:b==m[1]?1:2,m=Math.max(l[0],l[1],l[2]),l=[l[0]/m,l[1]/m,l[2]/m],c=m/b,m=l[0]*c,b=l[1]*c,l=l[2]*c,l=[0==k?m:0,1==k?
m:0,2==k?m:0,0,0,0==k?b:0,1==k?b:0,2==k?b:0,0,0,0==k?l:0,1==k?l:0,2==k?l:0,0,0,0,0,0,1,0],k=0,m=a.length;k<m;k+=4){b=a[k];c=a[k+1];h=a[k+2];var n=a[k+3];if(0!==b||0!==c||0!==h||0!==n)a[k]=b*l[0]+c*l[1]+h*l[2]+n*l[3]+l[4],a[k+1]=b*l[5]+c*l[6]+h*l[7]+n*l[8]+l[9],a[k+2]=b*l[10]+c*l[11]+h*l[12]+n*l[13]+l[14]}l=(1-e)/2;k=.3086*(1-f);m=.6094*(1-f);b=.082*(1-f);d*=225;e=[e*(k+f),e*k,e*k,0,0,e*m,e*(m+f),m*e,0,0,e*b,e*b,e*(b+f),0,0,0,0,0,1,0,l+d,l+d,l+d,1,0];f=0;for(d=a.length;f<d;f+=4)l=a[f],k=a[f+1],m=a[f+
2],b=a[f+3],a[f]=Math.round(l*e[0]+k*e[5]+m*e[10]+b*e[15]+e[20]),a[f+1]=Math.round(l*e[1]+k*e[6]+m*e[11]+b*e[16]+e[21]),a[f+2]=Math.round(l*e[2]+k*e[7]+m*e[12]+b*e[17]+e[22]),a[f]=me(a[f],0,255),a[f+1]=me(a[f+1],0,255),a[f+2]=me(a[f+2],0,255)}};g.Ib=function(){var a=this.Pc;if(!a){var b=this.N();if(F(b,"os.source.IStyle")&&(a=b.Ib(),b=this.B))for(var c=0,d=b.length;c<d;c++)if(b[c].data==a)return b[c]}return a};
g.zb=function(a){"string"==typeof a&&(a=this.B?eb(this.B,jha.bind(this,a)):null);this.Pc=a;var b=this.N();F(b,"os.source.IStyle")&&(b.zb(a),Gz(this))};g.gd=function(){var a,b="";this.u&&(b+='<i class="fa fa-warning text-warning" title="There were errors accessing the tiles for this layer"></i>');var c=this.Ja();c&&(a=ff(c));return b+=a?Nz(this.D(),['<image xlink:href="v1541734487/images/tiles-base.png" x="0" y="0" width="16px" height="16px"><title>Tile layer</title></image>'],null,a):'<img src="v1541734487/images/tiles-base.png" title="Tile layer"/>'};
g.ob=function(){return this.G};g.Wa=function(a){if(this.G!==a){var b=this.G;this.G=a;this.dispatchEvent(new K("loading",a,b));a=this.N();a instanceof bv&&(a=a.Sh(),a!==this.u&&(this.u=a,this.dispatchEvent(new K("error",this.u,!this.u))))}};g.S=function(){return this.j};g.Ta=function(a){this.j=a;this.dispatchEvent(new K("title",a))};g.Sc=function(){return this.ka};g.he=function(a){this.ka=a};g.cg=function(){return this.pa};g.ve=function(a){this.pa=a};g.rb=function(){return this.oa};
g.Ec=function(a){this.oa=a};g.getTags=function(){return this.Ia};g.vb=function(a){this.Ia=a};g.getError=function(){return this.u};g.De=function(){return this.sa};g.Ag=function(a){this.sa=a};g.Ld=function(){return this.U};g.Nf=function(a){this.U=a};g.mk=function(){return this.Ea};g.zg=function(a){this.Ea=a};g.hd=function(){return Uz.C.yb.call(this)};g.Hd=function(a){a!==this.hd()&&(this.dc(a),this.dispatchEvent(new K("visible",a,!a)))};g.yg=function(a){this.dc(a)};g.hk=function(){return this.yb()};
g.Va=function(){return this.g};g.ql=function(a){this.g=a;OH(this)};g.Ei=function(a){var b=this.N();if(tH)switch(a){case uH:Ag(this);break;case RH:xF(Y,this.D());break;case yH:b.refresh();break;case xH:a=new Tv("removeLayer",this.D());N.dispatchEvent(a);break;case wH:rH(this)}};g.rm=function(){return null};
g.yl=function(a,b){if(tH)switch(a){case vH:b=S.Y();a=av(Ok(),this);b=$k(b);var c=$k(a);return!al(a)&&.8>c/b;case uH:case yH:case SH:return!0;case wH:return!!b&&za(b)&&1===b.length;case RH:a=Y.Ka(this.D());if(null!=a)return a=a.eg(),0<a&&a<ng;break;case xH:return this.De()}return!1};g.wk=function(){return this.Ca};g.sl=function(a){this.Ca=a};g.lk=function(){return this.aa};g.ao=function(a){this.aa=a};
g.Kf=function(a){if(a.showTile&&TH(a)&&this.hd()){var b=UH(this.S(),a),c=new hq(new hp([a.offsetX,a.offsetY])),d=new ds({fill:new cs({color:hz(this.Ja()||"#fff")}),stroke:new Zr({color:"#000",width:1})});var e=Math.ceil(.8*a.fontSize);for(var f=Math.round(e/2.85),h=10-Math.floor(a.fontSize/8),k=a.offsetY,l=[],m=0;3>m;m++)l.push(new qp([[[h+f,k],[h+e,k],[h+e-f,k+f],[h,k+f],[h+f,k]]])),k-=Math.ceil(f/2);e=new Zo(l);e=new hq(e);VH(a,e,d,c,b)}};
g.ra=function(a){a=a||{};a.visible=this.hd();a.opacity=this.Nb();a.contrast=this.Qg();a.brightness=this.Pg();a.saturation=this.Tg();a.color=this.Ja();a.colorize=GH(this);var b=this.N().tileGrid,c=this.Va();c=c?c.zoomOffset||0:0;a.maxZoom=Math.min(25,jm(b,this.oe())-c);a.minZoom=Math.max(2,jm(b,this.ne())-c);(b=this.Ib())&&(a.style="string"===typeof b?b:b.data);(b=this.N())&&b instanceof bv&&(a.refreshInterval=b.Sg());return a};
g.restore=function(a){null!=a.id&&this.ga(a.id);null!=a.provider&&this.Ec(a.provider);null!=a.tags&&this.vb(a.tags);null!=a.title&&this.Ta(a.title);null!=a.layerType&&this.he(a.layerType);null!=a.visible&&this.Hd(a.visible);var b=a.alpha||a.opacity;null!=b&&this.xd(b);null!=a.contrast&&this.Jj(a.contrast);null!=a.brightness&&this.Ij(a.brightness);null!=a.saturation&&this.Mj(a.saturation);a.color&&Yga(this,a.color,a);a.colorize&&Zga(this,a.colorize);void 0!==a.refreshInterval&&(b=this.N())&&b instanceof
bv&&b.ef(a.refreshInterval);b=a.zoomOffset||0;var c=this.N().tileGrid,d=c.minZoom;c=c.maxZoom;if(null!=a.minZoom){var e=Math.min(c,Math.max(d,Math.round(a.minZoom)+b));this.Kj(this.N().tileGrid.bb(e))}null!=a.maxZoom&&(e=Math.min(c,Math.max(d,Math.round(a.maxZoom)+b)),this.Lj(this.N().tileGrid.bb(e)));a=a.style||"";b=this.Ib();(!b||"string"===typeof b&&a!=b||a!=b.data)&&this.zb(a)};function jha(a,b){return b.data==a};function WH(a){x.call(this);this.map=a;this.u=this.o=!1;this.l=[];this.g={};this.j=new Fh(this.VO,250,this)}w(WH,x);g=WH.prototype;g.J=function(){WH.C.J.call(this);this.l.forEach(sf);this.l.length=0;z(this.j);this.map=this.j=void 0};
g.rc=function(){if(!this.u){for(var a=Ov(this.map).g,b=0,c=a.length;b<c;b++){var d=a[b];if(d instanceof Uv){this.l.push(H(d,"zOrderUpdate",this.EI,this));this.l.push(H(d,"addLayer",this.YI,this));this.l.push(H(d,"removeLayer",this.aJ,this));d=Pv(d).g;for(var e=0,f=d.length;e<f;e++){var h=d[e];h instanceof Sf&&kha(this,h)}}}this.u=!0}};g.reset=function(){for(var a in this.g)this.g[a].reset()};g.setActive=function(a){this.o=a;for(var b in this.g)this.g[b].setActive(a)};
function kha(a,b){var c=b.D();if(c){var d=a.g[c];if(!d){var e=Jk.s();var f=b.wk();(e=f?e.g[f]:null)&&(d=a.hp(e,b))}d&&(a.g[c]=d,d.setActive(a.o),d.rc(),N.dispatchEvent("map:glRepaint"))}}g.hp=function(a,b){return new a(b,this.map)};g.EI=function(a){a=a.target;a instanceof Uv&&this.zo(a)};g.VO=function(){for(var a=Ov(this.map).g,b=0,c=a.length;b<c;b++){var d=a[b];d instanceof Uv&&this.zo(d)}};g.zo=function(){};
g.YI=function(a){a&&a.layer&&(a="string"===typeof a.layer?L.s().W(a.layer):a.layer,a instanceof Sf&&(kha(this,a),this.j&&this.j.start()))};g.aJ=function(a){a&&a.layer&&(a="string"===typeof a.layer?L.s().W(a.layer):a.layer)&&(a=a.D(),this.g[a]&&(this.g[a].dispose(),delete this.g[a],this.j&&this.j.start()))};function XH(a){WH.call(this,a)}w(XH,WH);XH.prototype.hp=function(a,b){return new a(b,this.map)};XH.prototype.rc=function(){XH.C.rc.call(this);this.j&&this.j.start()};XH.prototype.zo=function(a){var b=Pv(a).g;if(0<b.length){var c=0;a=1E4*Ov(this.map).g.indexOf(a);b[0]instanceof Uz?c=YH(L.s(),Uz):b[0]instanceof Vz?c=YH(L.s(),Vz):b[0]instanceof sH&&(c=YH(L.s(),sH));for(var d=0,e=b.length;d<e;d++){var f=b[d].D();(f=this.g[f])&&(a=f.li(a,c))}}};var ZH=NaN,lha=0,$H={},mha={},aI={};function nha(a){var b=mha[a];if(b){var c=b.Fe();if(2>c&&(0==c&&b.load(),!aI[a])){aI[a]=!0;var d=b.Vh(function(){d&&sf(d);if(3>b.Fe()){var c=Vr(b.g.wa);Strata.StylesAPI.loadIconInfo(c.data,c.width,c.height,a)}delete aI[a]},void 0)}}};function bI(){Mq.call(this);this.log=oha;this.j=this.g=this.Xd=void 0;this.o=this.l=0}w(bI,Mq);var oha=E.V("strata.StrataRenderer");g=bI.prototype;g.tg=function(){return!!this.g&&!!this.j};
g.Bn=function(){return!this.tg()&&this.map?new Kc(function(a,b){var c=document.querySelector(".ol-viewport"),d=c.querySelector("canvas");c&&d&&(this.g=document.createElement("canvas"),qD(this.g,"webgl-canvas"),qD(this.g,"strata-canvas"),this.j=document.createElement("div"),this.j.className="strata-container",this.j.style.visibility="hidden",this.j.appendChild(this.g),c.insertBefore(this.j,d.nextSibling),this.sA(),H(this.map,Jf(cI),this.sA,this),Xda().then(function(){void 0===window.Strata&&b();isNaN(Pr)&&
(Pr=Strata.addFunction(Vda),Strata.ApplicationAPI.setHttpListener(Pr));isNaN(ZH)&&(ZH=Strata.addFunction(nha),Strata.StylesAPI.setIconLoader(ZH));var c=this.map.interactions;c&&c.forEach(Qea);this.Xd=new Rq(this.map);this.cf=new XH(this.map);this.cf.rc();a()},b,this))},this):Sc()};g.sA=function(){if(this.g){var a=this.g.clientHeight,b=this.g.clientWidth;a&&b&&(b!==this.o||a!==this.l)&&(this.g.width=this.o=b,this.g.height=this.l=a)}};
g.Za=function(a){bI.C.Za.call(this,a);this.j.style.visibility=this.enabled?"visible":"hidden";L.s().X().interactions.forEach(function(a){try{a.vc()||a.setActive(!this.enabled)}catch(c){a.setActive(!this.enabled)}});this.Xd&&this.Xd.Za(this.enabled);this.us(this.enabled);dI(this.map).dc(!this.enabled)};g.mz=function(){return this.Xd};g.getCoordinateFromPixel=function(a){return this.tg()&&a&&2===a.length?(a=Strata.GlobeAPI.getCoordinateFromPixel(a))&&2<=a.length?a:null:null};
g.getPixelFromCoordinate=function(a){return this.tg()&&2<=a.length?(2===a.length?a.push(0):3<a.length&&(a.length=3),Strata.GlobeAPI.getPixelFromCoordinate(a)):null};g.lz=function(a,b,c){a=Strata.GeometryAPI.getGeometryIdAt(a[0],a[1]);if(0<a){var d=At[a];if(d&&(a=d.Vu(a),d=d.layer,ua(a)&&(a=d.N().Ad(a)),a&&d&&(c=c?c.layerFilter:void 0,!c||c(d))))return b(a,d)||null}return null};g.renderSync=function(){Strata.ViewAPI.renderSync()};g.us=function(a){this.tg()&&Strata.ApplicationAPI.setKeyAndMouseActive(a)};
g.ts=function(){};g.lo=function(){};g.Zn=function(){};g.rt=function(){};g.mo=function(){};g.bm=function(){};g.Co=function(){};function eI(a,b,c,d){for(var e=[],f=0;f<b.length;f++)e.push(H(a,b[f],c,d,void 0))}function fI(a,b,c,d){for(var e=0;e<b.length;e++)yf(a,b[e],c,d)};function gI(a,b){x.call(this);this.l=!1;this.layer=a;this.map=b;this.view=T(b);this.o=vg.s()}w(gI,x);gI.prototype.setActive=function(a){this.l=a};gI.prototype.li=function(a){return++a};gI.prototype.vs=wa;var hI=E.V("strata.api.geometry");function Iv(a,b,c){a.length&&b.length&&iI(a,b,Strata.GeometryAPI.getGeometryPolyline(),c)}function pha(a,b,c,d){if(a.length&&b.length&&b.length===c.length){a=Sr(a,"float");var e=Rr(c),f=Strata.VectorAPI.createStringVector();b.forEach(function(a){f.push_back(a)});null!=d&&Strata.GeometryAPI.groupGeometries(d,e,c.length);Strata.GeometryAPI.addLabelGeometries(a,f,e,c.length)}}
function It(a,b,c){if(a.length)if(0===a.length%6&&b.length===a.length/6)iI(a,b,Strata.GeometryAPI.getGeometryBoundingBox(),c);else throw Error("Box coordinates must be a factor of 6 and have associated ids.");}function Jv(a,b){a.length&&b.length&&Jt(a,b,Strata.GeometryAPI.getGeometryPolyline())}
function iI(a,b,c,d){var e=Date.now();a=Sr(a,"float");var f=Rr(b);null!=d&&Strata.GeometryAPI.groupGeometries(d,f,b.length);Strata.GeometryAPI.addGeometries(a,f,b.length,c);E.ta(hI,"Added "+b.length+" geometries ("+c+") in "+(Date.now()-e)+"ms.")}function Jt(a,b,c){var d=Date.now();a=Sr(a,"float");var e=Rr(b);Strata.GeometryAPI.updateGeometries(a,e,b.length,c);E.ta(hI,"Added "+b.length+" geometries ("+c+") in "+(Date.now()-d)+"ms.")}
function Ft(a){if(a.length){var b=Date.now(),c=Rr(a);Strata.GeometryAPI.removeGeometries(c,a.length);E.ta(hI,"Removed "+a.length+" points in "+(Date.now()-b)+"ms.")}}function jI(a){var b=[],c=[],d;for(d in a)!0===a[d]?b.push(Number(d)):!1===a[d]&&c.push(Number(d));b.length&&(a=Rr(b),Strata.GeometryAPI.setGeometryVisibility(a,!0,b.length));c.length&&(a=Rr(c),Strata.GeometryAPI.setGeometryVisibility(a,!1,c.length))}
Ja("strata.api.geometry.addTerrainLayer",function(a){"cesium"===a.type?Xi(new Ni(a.url+"/layer.json")).then(function(b){if(b&&b.length){try{var c=JSON.parse(b)}catch(k){E.error(hI,"Failed parsing STK terrain metadata",k)}if(c)if(b=c,c=Ct(a),null==c)E.error(hI,"Failed creating STK terrain geometry id");else{var d=b.projection;if("EPSG:4326"===d)var e=Strata.TileProjectionType.EPSG_4326;else"EPSG:3857"===d&&(e=Strata.TileProjectionType.EPSG_3857);if(e)if(b.tiles&&b.tiles[0]){d=b.tiles[0].replace("{version}",
b.version||"");d=a.url+"/"+d;var f=Strata.lengthBytesUTF8(d)+1,h=Strata._malloc(f);Strata.stringToUTF8(d,h,f);Strata.GeometryAPI.addTerrainLayer(c,e,h,2,b.minzoom||0,"tms"===b.scheme)}else E.error(hI,"STK metadata missing tile URL");else E.error(hI,"STK metadata projection is not supported")}}else E.error(hI,"Received empty STK metadata response")}):E.error(hI,"Unsupported terrain type: "+a.type)});var kI={},lI=NaN;function qha(a,b,c,d,e,f){var h=kI[f];if(h&&(a=[a,b,c,d],a=Ql(a,"EPSG:4326",h.projection),e=h.layer.N().Pa(a,e,window.devicePixelRatio,h.projection))){var k;a=e.Pa();a instanceof HTMLVideoElement||a instanceof Image?k=a.src:a instanceof HTMLCanvasElement&&(k=a.toDataURL());e=e.Y();e=Ql(e,h.projection,"EPSG:4326");k&&e&&Strata.GeometryAPI.putImageUrl(f,e[0],e[1],e[2],e[3],k)}};function mI(a,b){gI.call(this,a,b);this.g=this.layer.N();this.j=-1;eI(this.layer,rha,this.VA,this);H(this.g,"change",this.qo,this)}w(mI,gI);var rha=["change:opacity","change:visible"];g=mI.prototype;g.J=function(){fI(this.layer,rha,this.VA,this);yf(this.g,"change",this.qo,this);this.g=null;mI.C.J.call(this)};g.rc=function(){this.qo()};
g.qo=function(a){if(this.layer&&(this.j!==this.g.Tb||a)){this.j=this.g.Tb;a:{var b=this.layer;a=Ct(b);if(null!=a&&!(a in kI)){var c=b.N();if(!(c instanceof nI)){a=!1;break a}var d=c.Ra()||S,e={id:a,layer:b,projection:d};kI[e.id]=e;isNaN(lI)&&(lI=Strata.addFunction(qha));b=c instanceof oI?c.wa.Y():b.Y()||d.Y();e=e.layer.Nb();d=Et(d);if(b&&d){Strata.GeometryAPI.addTileOverlay(a,b[0],b[1],b[2],b[3],e,d,lI);a=!0;break a}}a=!1}a||(a=Ct(this.layer),null!=a&&Strata.GeometryAPI.refreshTile(a))}};
g.reset=function(){this.qo(!0)};g.VA=function(a){var b=Ct(this.layer);switch(a.type){case "change:opacity":Strata.GeometryAPI.setTileLayerOpacity(b,this.layer.Nb());break;case "change:visible":a={},a[b]=this.layer.yb(),jI(a)}};var pI={},qI=NaN,sha=NaN,tha=NaN,uha=NaN,vha=NaN;function wha(a,b){return 0<b&&(a=pI[a])&&(b=im(a.tilegrid,b))?b.maxX-b.minX+1:0}function xha(a,b){return 0<b&&(a=pI[a])&&(b=im(a.tilegrid,b))?b.maxY-b.minY+1:0}
function yha(a,b,c,d){var e=pI[d];if(e){var f=-b-1,h=e.layer.N(),k=h.Od(e.projection);(c<k.minZoom-1||c>k.maxZoom)&&rI(d,a,b,c);var l=sI(h,c,a,f,1,e.projection);e=l.getState();if(e===tI)rI(d,a,b,c);else if(e===zI)rI(d,a,b,c,l.Pa());else if(e===AI)rI(d,a,b,c);else{l.load();var m=H(l,"change",function(){var e=l.getState();e===tI?(rI(d,a,b,c),sf(m)):e===zI?(rI(d,a,b,c,l.Pa()),sf(m)):e===AI&&(rI(d,a,b,c),sf(m))})}}}
function rI(a,b,c,d,e){e=Vr(e);Strata.GeometryAPI.putImage(a,b,c,d,e.data,e.width,e.height)}function zha(a,b,c,d){var e=pI[a];if(e){var f=bm(e.tilegrid,[d,b,-c-1]);(f=Ql(f,e.projection,"EPSG:4326"))&&Strata.GeometryAPI.putXYBox(a,b,c,d,f)}}function Aha(a,b){return(a=pI[a])?jm(a.tilegrid,b):0};function BI(a,b){gI.call(this,a,b);this.j=NaN;this.g=new Fh(this.jO,50,this)}w(BI,gI);var Bha=["change:opacity","change:visible"];g=BI.prototype;g.J=function(){z(this.g);this.g=void 0;Cha(this);BI.C.J.call(this)};g.li=function(a){this.j=a;var b=Ct(this.layer);null!=b&&Strata.GeometryAPI.setTileLayerZOrder(b,a++);return a};g.rc=function(){this.g&&this.g.start()};
g.jO=function(){Cha(this);var a;if(a=this.layer)a:{a=this.layer;var b=Ct(a);if(null!=b&&!(b in pI)){var c=a.N();if(!(c instanceof bv)){a=!1;break a}var d=c.Ra()||S;a={id:b,layer:a,projection:d,tilegrid:c.tileGrid};pI[a.id]=a;isNaN(qI)&&(qI=Strata.addFunction(wha),sha=Strata.addFunction(xha),tha=Strata.addFunction(zha),uha=Strata.addFunction(yha),vha=Strata.addFunction(Aha));b=a.layer.Nb();if(c=Et()){Strata.GeometryAPI.addTileLayer(a.id,b,c,qI,sha,tha,uha,vha);a=!0;break a}}a=!1}a&&(isNaN(this.j)||
(a=Ct(this.layer),null!=a&&Strata.GeometryAPI.setTileLayerZOrder(a,this.j)),eI(this.layer,Bha,this.XA,this),H(this.layer,"change",this.WA,this))};g.reset=function(){};function Cha(a){var b;if(b=a.layer){b=a.layer;var c=Ct(b);null!=c&&pI[c]?(delete pI[c],Ft([c]),b._strataGeomId=void 0,b=!0):b=!1}b&&(fI(a.layer,Bha,a.XA,a),yf(a.layer,"change",a.WA,a))}g.WA=function(){if(this.layer){var a=Ct(this.layer);null!=a&&Strata.GeometryAPI.refreshTile(a)}};
g.XA=function(a){var b=Ct(this.layer);switch(a.type){case "change:opacity":Strata.GeometryAPI.setTileLayerOpacity(b,this.layer.Nb());break;case "change:visible":a={},a[b]=this.layer.yb(),jI(a)}};function CI(a,b,c){x.call(this);this.o=null!=c?t(a,c):a;this.l=b;this.j=t(this.NE,this);this.g=[]}w(CI,x);g=CI.prototype;g.Oj=!1;g.bl=0;g.Qh=null;g.Pd=function(a){this.g=arguments;this.Qh||this.bl?this.Oj=!0:DI(this)};g.stop=function(){this.Qh&&(ra.clearTimeout(this.Qh),this.Qh=null,this.Oj=!1,this.g=[])};g.pause=function(){this.bl++};g.resume=function(){this.bl--;this.bl||!this.Oj||this.Qh||(this.Oj=!1,DI(this))};g.J=function(){CI.C.J.call(this);this.stop()};
g.NE=function(){this.Qh=null;this.Oj&&!this.bl&&(this.Oj=!1,DI(this))};function DI(a){a.Qh=ke(a.j,a.l);a.o.apply(null,a.g)};var Dha={},Eha={};function Ht(a){var b=[],c=[],d=[],e;for(e in a){b.push(Number(e));for(var f=a[e],h=0;h<f.length;h++)c.push(f[h]);d.push(f.length)}a=Rr(b);c=Rr(c);d=Rr(d);Strata.StylesAPI.associateGeoms(a,c,d,b.length)}function Fha(a,b,c,d,e){return{id:a,fillColor:b,strokeColor:c,size:null!=d?d:3,lineWidth:null!=e?e:3,face:Strata.FontFace.NONE,icon:-1,horizOrigin:Strata.IconOrigin.CENTER,vertOrigin:Strata.IconOrigin.CENTER,horizOffset:0,vertOffset:0,rotation:0}}
function Gt(a){if(a){var b=Dt(a);if(null!=b&&!(b in Dha)){Dha[b]=!0;var c=3,d=3,e,f=a.kb();if(f){var h=e=om(f.Ja());d=f.g}h||(f=a.lb())&&(h=om(f.Ja()));if(a=a.Pa())h||(f=a.lb())&&(h=om(f.Ja())),a instanceof as&&(c=a.g);h||(h=om("rgba(255,255,255,1)"));e||(e=om("rgba(255,255,255,1)"));b=Fha(b,[h[0]/255,h[1]/255,h[2]/255,h[3]],[e[0]/255,e[1]/255,e[2]/255,e[3]],c,d);a instanceof EB&&((c=a.g.l)?(c in $H||(d=lha++,$H[c]=d,mha[d]=a),c=$H[c]):c=-1,-1<c&&(a=a.l,b.icon=c,b.horizOrigin=Strata.IconOrigin.CENTER,
b.vertOrigin=Strata.IconOrigin.CENTER,b.horizOffset=0,b.vertOffset=0,b.rotation=null!=a?a:0));Strata.StylesAPI.addStyle(b)}}}function EI(a){var b,c=14,d=Strata.FontFace.SANS;if(a=a?a.mb():void 0){var e=a.lb();e&&(b=om(e.Ja()));(a=a.Ae())&&(c=Number(a.replace(/[^\d]*(\d+)px.*/,"$1"))||14)}b||(b=om("rgba(255,255,255,1)"));e=""+b+c;a=Eha[e];null==a&&(Eha[e]=a=Dt(),b=[b[0]/255,b[1]/255,b[2]/255,b[3]],c=Fha(a,b,b,c),c.face=d||Strata.FontFace.SANS,Strata.StylesAPI.addStyle(c));return a};function Gha(a){this.context=a;this.log=Hha}var Hha=E.V("strata.sync.FeatureConverter");Gha.prototype.g=function(a){if(a&&this.context&&this.context.view){var b=this.context.view.bb();if(null!=b){var c=Iha(this,a,b);if(c){b=c.filter(function(a){return!a.mb()});c=c.filter(function(a){return!!a.mb()});var d;if(c&&0<c.length){var e=a.get("_labelGeometry");e&&(d=a.get(e))}for(e=0;e<b.length;e++){var f=b[e];if(f){var h=(0,f.Re)(a);if(h){var k=d&&d!=h?void 0:c;Gt(f);Jha(this,a,h,f,k)}}}}}}};
function Jha(a,b,c,d,e){if(e&&e.length){var f=a.context.av(c);null==f?Kha(a,b,c,e):(e=EI(e[0]),null!=e&&a.context.Ao(f,e))}else a.context.oA(c);if(a.context.Kv(c))b=Ct(c),null!=b&&a.context.zh(b,d);else switch(f=c.T(),f){case "Point":f=Ct(c);c=c.getCoordinates();null!=f&&c&&2<=c.length&&(c=Ll(c,S,"EPSG:4326"))&&(a=a.context,!a.le[f]&&2<=c.length&&(2===c.length&&c.push(0),a.Fk(f,b),a.sh[f]=c,a.zh(f,d)));break;case "LineString":c.toLonLat();f=Ct(c);e=c.flatCoordinates;var h=c.stride,k=e.length/h;if(null!=
f&&2<=k){var l=c.layout,m="XYZ"===l||"XYZM"===l;l=[0,k];for(var n=0;n<k;n++){var p=n*h;l.push(e[p]);l.push(e[p+1]);l.push(m?e[p+2]:0)}a=a.context;a.le[f]||(a.Fk(f,b),a.kg[f]=l,a.zh(f,d))}Ap(c);break;case "Polygon":c.toLonLat();f=Ct(c);e=c.flatCoordinates;h=c.stride;k=c.zd()[0]/h;if(null!=f&&4<=k){l=c.layout;m="XYZ"===l||"XYZM"===l;l=[0,k];for(n=0;n<k;n++)p=n*h,l.push(e[p]),l.push(e[p+1]),l.push(m?e[p+2]:0);a=a.context;a.le[f]||(a.Fk(f,b),a.kg[f]=l,a.zh(f,d))}Ap(c);break;case "GeometryCollection":case "Circle":case "MultiPoint":case "MultiLineString":case "MultiPolygon":break;
case "LinearRing":throw Error("LinearRing should only be part of polygon.");default:throw Error("OpenLayers geometry type not handled: "+f);}}function Kha(a,b,c,d){var e=Ct(c),f=d.map(function(a){if(a=(a=a.mb())?a.mb():void 0)return a.replace(/[^\x0a\x0d\x20-\x7e\xa0-\xff]/g,"")}).filter($u).join("\n");c=pea(c);f&&null!=e&&c&&2<=c.length&&(c=Ll(c,S,"EPSG:4326"))&&a.context.Wz(e,c,f,b,d[0])}
function Iha(a,b,c){var d,e=b.Nd();e&&(d=e.call(b,c));!d&&a.context.layer&&(a=a.context.layer.Nd())&&(d=a(b,c));d instanceof ds&&(d=[d]);return d};function FI(a,b){x.call(this);this.Ic=new Gha(this);this.Qe={};this.ed={};this.le={};this.jc={};this.od={};this.Dh={};this.sh={};this.Wc={};this.kg={};this.dd={};this.ff={};this.Og=new CI(this.qp,25,this);this.layer=a;this.source=a.N();this.map=b;this.view=T(b)}w(FI,x);g=FI.prototype;g.J=function(){FI.C.J.call(this);z(this.Og);GI(this)};g.Vu=function(a){return this.le[a]};g.Fj=function(){this.Qe=Yh(this.Qe);this.ed=Yh(this.ed);this.le=Yh(this.le);this.jc=Yh(this.jc);this.od=Yh(this.od);At=Yh(At)};
g.Kv=function(a){a=Ct(a);return null!=a&&!!this.le[a]};function Lha(a,b){b&&(a.Ic.g(b),HI(a,[b]),a.Og.Pd())}function II(a,b){b&&b.length&&(b.forEach(a.Ic.g,a.Ic),HI(a,b),a.Og.Pd())}function GI(a){var b=[],c;for(c in a.le)a.le[c]&&b.push(Number(c));Ft(b);a.Qe={};a.ed={};a.le={};a.od={}}
g.Bb=function(a,b){if(a){var c=a.id;if(a=this.Qe[c]){this.Qe[c]=void 0;this.ed[c]=void 0;for(c=a.length;c--;){var d=a[c];!this.lA(d)&&this.le[d]||a.splice(c,1);var e=this.jc[d];null!=e&&a.push(e);this.le[d]=void 0;this.jc[d]=void 0;this.od[d]=void 0;At[d]=void 0}b||(Ft(a),this.Fj())}}};g.Ge=function(a){if(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=this.Qe[d.id];this.Bb(d,!0);e&&e.length&&Array.prototype.push.apply(b,e)}Ft(b);this.Fj()}};
g.oA=function(a){a=Ct(a);if(null!=a){var b=this.jc[a];null!=b&&(null!=this.Wc[b]?this.Wc[b]=void 0:Ft([b]),this.jc[a]=void 0)}};g.Ai=function(a,b){a=a.id;this.ed[a]!==b&&(this.ed[a]=b,this.Qe[a].forEach(function(a){this.zl(a,b);a=this.jc[a];null!=a&&this.zl(a,b)},this),this.Og.Pd())};g.zl=function(a,b){this.ff[a]=void 0!==this.ff[a]?void 0:b};g.zh=function(a,b){b=Dt(b);null!=b&&this.od[a]!==b&&(b in this.dd||(this.dd[b]=[]),this.dd[b].push(a),this.od[a]=b)};
g.lA=function(a){var b=!1;a in this.sh&&(this.sh[a]=void 0,b=!0);a in this.kg&&(this.kg[a]=void 0,b=!0);a in this.Dh&&(this.Dh[a]=void 0,b=!0);a in this.Wc&&(a=this.jc[a],null!=a&&(this.Wc[a]=void 0));return b};
g.qp=function(){var a=Ct(this.layer);if(!pc(this.sh)){var b=[],c=[],d;for(d in this.sh)this.sh[d]&&(c.push(Number(d)),Array.prototype.push.apply(b,this.sh[d]));b.length&&c.length===b.length/3&&iI(b,c,Strata.GeometryAPI.getGeometryPoint(),a);this.sh={}}if(!pc(this.kg)){b=[];c=[];for(d in this.kg)this.kg[d]&&(c.push(Number(d)),Array.prototype.push.apply(b,this.kg[d]));Iv(b,c,a);this.kg={}}if(!pc(this.Dh)){b=[];c=[];for(d in this.Dh)this.Dh[d]&&(c.push(Number(d)),Array.prototype.push.apply(b,this.Dh[d]));
It(b,c,a);this.Dh={}}if(!pc(this.Wc)){b=[];c=[];var e=[];for(d in this.Wc){var f=this.Wc[d];f&&(c.push(Number(d)),e.push(f.label),Array.prototype.push.apply(b,f.coordinate))}pha(b,e,c,a);this.Wc={}}pc(this.dd)||(Ht(this.dd),this.dd={});pc(this.ff)||(jI(this.ff),this.ff={})};g.Wz=function(a,b,c,d,e){d=Ct(e);null!=d&&null==this.jc[a]&&2<=b.length?(2===b.length&&b.push(0),this.jc[a]=d,this.Wc[d]={id:d,coordinate:b,label:c},a=EI(e),this.Ao(d,a)):this.jc[a]=void 0};
g.Ao=function(a,b){this.od[a]!==b&&(b in this.dd||(this.dd[b]=[]),this.dd[b].push(a),this.od[a]=b)};g.Fk=function(a,b){var c=b.id;this.Qe[c]=this.Qe[c]||[];this.Qe[c].push(a);this.le[a]=b;At[a]=this};g.jo=function(a){return this.source instanceof Rz?!this.source.Xe(a)&&(!this.source.Qc||!this.source.aa):!1};function HI(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c];if(e){var f=a.Qe[e.id];if(f){var h=0;for(f=f.length;h<f;h++)a.source instanceof Rz&&a.Ai(e,a.jo(e))}}}}
g.av=function(a){a=Ct(a);if(null!=a)return this.jc[a]};function JI(a,b){gI.call(this,a,b);this.context=void 0;this.source=this.layer.N()}w(JI,gI);var Mha=["labelVisibility","style"];g=JI.prototype;g.J=function(){JI.C.J.call(this);Nha(this);this.source=void 0};
g.rc=function(){Nha(this);!this.context&&this.layer&&this.source&&(this.context=new FI(this.layer,this.map),this.st(),II(this.context,this.source.La()),H(this.layer,"change:visible",this.st,this),H(this.layer,"propertychange",this.aB,this),H(this.source,"changefeature",this.ZA,this),this.source instanceof Rz?H(this.source,"propertychange",this.cB,this):(H(this.source,"addfeature",this.YA,this),H(this.source,"removefeature",this.bB,this),H(this.source,"clear",this.Fw,this)))};g.reset=function(){};
function Nha(a){a.layer&&(yf(a.layer,"change:visible",a.st,a),yf(a.layer,"propertychange",a.aB,a));a.source&&(yf(a.source,"changefeature",a.ZA,a),a.source instanceof Rz?yf(a.source,"propertychange",a.cB,a):(yf(a.source,"addfeature",a.YA,a),yf(a.source,"removefeature",a.bB,a),yf(a.source,"clear",a.Fw,a)));a.context&&(z(a.context),a.context=void 0)}g.st=function(){var a=Ct(this.layer);if(null!=a){var b={};jI((b[a]=this.layer.yb(),b))}};g.YA=function(a){this.context&&a.feature&&Lha(this.context,a.feature)};
g.bB=function(a){this.context&&a.feature&&this.context.Bb(a.feature)};g.Fw=function(){this.context&&GI(this.context)};g.ZA=function(a){(a=a.feature)&&this.l&&this.context&&Lha(this.context,a)};g.aB=function(a){if(this.l&&this.context&&this.layer instanceof Vz&&a instanceof K){var b=a.j;this.source&&b&&-1<Mha.indexOf(b)&&(a=a.o||this.source.La())&&II(this.context,a)}};
g.cB=function(a){try{var b=a.j}catch(h){return}var c=this.source;switch(b){case KI:this.context&&GI(this.context);break;case LI:this.context&&((c=a.o)&&c.length&&II(this.context,c),(c=a.u)&&c.length&&this.context.Ge(c));break;case MI:case NI:case OI:case PI:(b=a.u)&&II(this.context,b);(a=a.o)&&II(this.context,a);break;case QI:if(!c.Qc||!c.aa){var d=a.o;if(d)for(var e=0,f=d.length;e<f;e++)(a=d[e])&&!a.Xa()&&(b=!c.Xe(a),this.context.Ai(a,b))}break;case RI:if(e=a.o)for(d in e)if(a=c.Ad(d))b=e[d],this.context.Ai(a,
b);break;case SI:(d=c.La())&&d.length&&HI(this.context,d);break;case TI:case UI:if(b=a.u,a=a.o,Yy.test(a)||Yy.test(b)||Xy.test(a)||Xy.test(b))d=c.La(),this.context.Ge(d),II(this.context,d)}};function VI(){Kg.call(this);this.id="strata"}w(VI,Kg);VI.prototype.init=function(){Oha(L.s(),new bI);var a=Jk.s();Kk(a,"image",mI);Kk(a,"tile",BI);Kk(a,"vector",JI);Kk(a,"draw",JI)};Tj(Rj.s(),new VI);function Pha(a,b){A.call(this,a);this.l=b}w(Pha,A);function WI(a,b,c,d,e){this.l=a;this.A=b;this.o=c;this.P=d;this.nd=e;this.wa=this.g=this.j=this.Ca=this.sa=this.oa=null;this.cb=this.Ia=this.K=this.aa=this.pa=this.U=0;this.ib=!1;this.u=this.jb=0;this.pb=!1;this.Ea=0;this.Ob="";this.Vb=this.Eb=0;this.gc=!1;this.I=this.Hc=0;this.ka=this.G=this.B=null;this.O=[];this.md=Bm()}I(WI,tn);
function Qha(a,b,c){if(a.wa){b=bn(b,0,c,2,a.P,a.O);c=a.l;var d=a.md,e=c.globalAlpha;1!=a.K&&(c.globalAlpha=e*a.K);var f=a.jb;a.ib&&(f+=a.nd);var h;var k=0;for(h=b.length;k<h;k+=2){var l=b[k]-a.U,m=b[k+1]-a.pa;a.pb&&(l=Math.round(l),m=Math.round(m));if(0!==f||1!=a.u){var n=l+a.U,p=m+a.pa;Km(d,n,p,a.u,a.u,f,-n,-p);c.setTransform.apply(c,d)}c.drawImage(a.wa,a.Ia,a.cb,a.Ea,a.aa,l,m,a.Ea,a.aa)}0===f&&1==a.u||c.setTransform(1,0,0,1,0,0);1!=a.K&&(c.globalAlpha=e)}}
function XI(a,b,c,d){var e=0;if(a.ka&&""!==a.Ob){a.B&&YI(a,a.B);a.G&&ZI(a,a.G);var f=a.ka,h=a.l,k=a.Ca,l=f.textAlign?f.textAlign:"center";k?(k.font!=f.font&&(k.font=h.font=f.font),k.textAlign!=l&&(k.textAlign=l),k.textBaseline!=f.textBaseline&&(k.textBaseline=h.textBaseline=f.textBaseline)):(h.font=f.font,h.textAlign=l,h.textBaseline=f.textBaseline,a.Ca={font:f.font,textAlign:l,textBaseline:f.textBaseline});b=bn(b,e,c,d,a.P,a.O);f=a.l;h=a.Hc;for(a.gc&&(h+=a.nd);e<c;e+=d){k=b[e]+a.Eb;l=b[e+1]+a.Vb;
if(0!==h||1!=a.I){var m=Km(a.md,k,l,a.I,a.I,h,-k,-l);f.setTransform.apply(f,m)}a.G&&f.strokeText(a.Ob,k,l);a.B&&f.fillText(a.Ob,k,l)}0===h&&1==a.I||f.setTransform(1,0,0,1,0,0)}}function $I(a,b,c,d,e,f){var h=a.l;a=bn(b,c,d,e,a.P,a.O);h.moveTo(a[0],a[1]);b=a.length;f&&(b-=2);for(c=2;c<b;c+=2)h.lineTo(a[c],a[c+1]);f&&h.closePath();return d}function Rha(a,b,c,d,e){var f;var h=0;for(f=d.length;h<f;++h)c=$I(a,b,c,d[h],e,!0);return c}g=WI.prototype;
g.Tf=function(a){if(gl(this.o,a.Y())){if(this.j||this.g){this.j&&YI(this,this.j);this.g&&ZI(this,this.g);var b=(b=a.flatCoordinates)?bn(b,0,b.length,a.stride,this.P,this.O):null;var c=b[2]-b[0],d=b[3]-b[1];c=Math.sqrt(c*c+d*d);d=this.l;d.beginPath();d.arc(b[0],b[1],c,0,2*Math.PI);this.j&&d.fill();this.g&&d.stroke()}""!==this.Ob&&XI(this,Xo(a),2,2)}};g.zb=function(a){this.Dc(a.lb(),a.kb());this.Mf(a.Pa());this.Vd(a.mb())};
g.Jh=function(a){switch(a.T()){case "Point":this.lh(a);break;case "LineString":this.jh(a);break;case "Polygon":this.mg(a);break;case "MultiPoint":this.kh(a);break;case "MultiLineString":this.Ng(a);break;case "MultiPolygon":this.lg(a);break;case "GeometryCollection":this.em(a);break;case "Circle":this.Tf(a)}};g.Ih=function(a,b){(a=(0,b.Re)(a))&&gl(this.o,a.Y())&&(this.zb(b),this.Jh(a))};g.em=function(a){a=a.g;var b;var c=0;for(b=a.length;c<b;++c)this.Jh(a[c])};
g.lh=function(a){var b=a.flatCoordinates;a=a.stride;this.wa&&Qha(this,b,b.length);""!==this.Ob&&XI(this,b,b.length,a)};g.kh=function(a){var b=a.flatCoordinates;a=a.stride;this.wa&&Qha(this,b,b.length);""!==this.Ob&&XI(this,b,b.length,a)};g.jh=function(a){if(gl(this.o,a.Y())){if(this.g){ZI(this,this.g);var b=this.l,c=a.flatCoordinates;b.beginPath();$I(this,c,0,c.length,a.stride,!1);b.stroke()}""!==this.Ob&&(a=Lo(a),XI(this,a,2,2))}};
g.Ng=function(a){var b=a.Y();if(gl(this.o,b)){if(this.g){ZI(this,this.g);b=this.l;var c=a.flatCoordinates,d=0,e=a.zd(),f=a.stride;b.beginPath();var h;var k=0;for(h=e.length;k<h;++k)d=$I(this,c,d,e[k],f,!1);b.stroke()}""!==this.Ob&&(a=Po(a),XI(this,a,a.length,2))}};
g.mg=function(a){if(gl(this.o,a.Y())){if(this.g||this.j){this.j&&YI(this,this.j);this.g&&ZI(this,this.g);var b=this.l;b.beginPath();Rha(this,a.Md(),0,a.zd(),a.stride);this.j&&b.fill();this.g&&b.stroke()}""!==this.Ob&&(a=sp(a),XI(this,a,2,2))}};
g.lg=function(a){if(gl(this.o,a.Y())){if(this.g||this.j){this.j&&YI(this,this.j);this.g&&ZI(this,this.g);var b=this.l,c=a.Md(),d=0,e=a.Jc,f=a.stride,h;b.beginPath();var k=0;for(h=e.length;k<h;++k)d=Rha(this,c,d,e[k],f);this.j&&b.fill();this.g&&b.stroke()}""!==this.Ob&&(a=xp(a),XI(this,a,a.length,2))}};function YI(a,b){var c=a.l,d=a.oa;d?d.fillStyle!=b.fillStyle&&(d.fillStyle=c.fillStyle=b.fillStyle):(c.fillStyle=b.fillStyle,a.oa={fillStyle:b.fillStyle})}
function ZI(a,b){var c=a.l,d=a.sa;d?(d.lineCap!=b.lineCap&&(d.lineCap=c.lineCap=b.lineCap),nn&&(Xl(d.lineDash,b.lineDash)||c.setLineDash(d.lineDash=b.lineDash),d.lineDashOffset!=b.lineDashOffset&&(d.lineDashOffset=c.lineDashOffset=b.lineDashOffset)),d.lineJoin!=b.lineJoin&&(d.lineJoin=c.lineJoin=b.lineJoin),d.lineWidth!=b.lineWidth&&(d.lineWidth=c.lineWidth=b.lineWidth),d.miterLimit!=b.miterLimit&&(d.miterLimit=c.miterLimit=b.miterLimit),d.strokeStyle!=b.strokeStyle&&(d.strokeStyle=c.strokeStyle=
b.strokeStyle)):(c.lineCap=b.lineCap,nn&&(c.setLineDash(b.lineDash),c.lineDashOffset=b.lineDashOffset),c.lineJoin=b.lineJoin,c.lineWidth=b.lineWidth,c.miterLimit=b.miterLimit,c.strokeStyle=b.strokeStyle,a.sa={lineCap:b.lineCap,lineDash:b.lineDash,lineDashOffset:b.lineDashOffset,lineJoin:b.lineJoin,lineWidth:b.lineWidth,miterLimit:b.miterLimit,strokeStyle:b.strokeStyle})}
g.Dc=function(a,b){a?(a=a.Ja(),this.j={fillStyle:Xm(a?a:Lm)}):this.j=null;if(b){a=b.Ja();var c=b.u,d=b.j,e=b.o,f=b.A,h=b.g;b=b.B;this.g={lineCap:void 0!==c?c:"round",lineDash:d?d:Mm,lineDashOffset:e?e:0,lineJoin:void 0!==f?f:"round",lineWidth:this.A*(void 0!==h?h:1),miterLimit:void 0!==b?b:10,strokeStyle:Xm(a?a:Nm)}}else this.g=null};
g.Mf=function(a){if(a){var b=a.Ri(),c=a.Pa(1),d=a.Lk(),e=a.Ef();this.U=b[0];this.pa=b[1];this.aa=e[1];this.wa=c;this.K=a.Nb();this.Ia=d[0];this.cb=d[1];this.ib=a.I;this.jb=a.l;this.u=a.j()*this.A;this.pb=a.O;this.Ea=e[0]}else this.wa=null};
g.Vd=function(a){if(a){var b=a.lb();b?(b=b.Ja(),this.B={fillStyle:Xm(b?b:Lm)}):this.B=null;var c=a.kb();if(c){b=c.Ja();var d=c.u,e=c.j,f=c.o,h=c.A,k=c.g;c=c.B;this.G={lineCap:void 0!==d?d:"round",lineDash:e?e:Mm,lineDashOffset:f?f:0,lineJoin:void 0!==h?h:"round",lineWidth:void 0!==k?k:1,miterLimit:void 0!==c?c:10,strokeStyle:Xm(b?b:Nm)}}else this.G=null;b=a.Ae();d=a.ng;e=a.o;f=a.u;h=a.A;k=a.j;c=a.mb();var l=a.g;a=a.l;this.ka={font:void 0!==b?b:"10px sans-serif",textAlign:void 0!==l?l:"center",textBaseline:void 0!==
a?a:"middle"};this.Ob=void 0!==c?c:"";this.Eb=void 0!==d?this.A*d:0;this.Vb=void 0!==e?this.A*e:0;this.gc=void 0!==f?f:!1;this.Hc=void 0!==h?h:0;this.I=this.A*(void 0!==k?k:1)}else this.Ob=""};function aJ(a){var b={pixelRatio:1},c=a.canvas,d=b?b:{};b=d.pixelRatio||mn;if(d=d.size)c.width=d[0]*b,c.height=d[1]*b,c.style.width=d[0]+"px",c.style.height=d[1]+"px";c=[0,0,c.width,c.height];d=Im(Bm(),b,b);return new WI(a,b,c,d,0)};function bJ(a,b){this.start=a<b?a:b;this.end=a<b?b:a}function cJ(a){return new bJ(a[0],a[1])}bJ.prototype.clone=function(){return new bJ(this.start,this.end)};bJ.prototype.getLength=function(){return this.end-this.start};function dJ(a,b){return a==b?!0:a&&b?a.start==b.start&&a.end==b.end:!1}function Sha(a,b){var c=Math.max(a.start,b.start);a=Math.min(a.end,b.end);return c<=a?new bJ(c,a):null};function eJ(){this.g=[]}function fJ(a,b){return a==b||!!(a&&b&&yb(a.g,b.g,dJ))}g=eJ.prototype;g.clone=function(){for(var a=new eJ,b=this.g.length;b--;)a.g[b]=this.g[b].clone();return a};g.add=function(a){if(!(a.end<=a.start)){a=a.clone();for(var b=0,c;c=this.g[b];b++)if(a.start<=c.end){a.start=Math.min(a.start,c.start);break}for(var d=b;(c=this.g[b])&&!(a.end<c.start);b++)a.end=Math.max(a.end,c.end);this.g.splice(d,b-d,a)}};
g.remove=function(a){if(!(a.end<=a.start)){for(var b=0,c;(c=this.g[b])&&!(a.start<c.end);b++);if(c&&!(a.end<c.start)){var d=b;a.start>c.start&&(d++,a.end<c.end&&jb(this.g,new bJ(a.end,c.end),d),c.end=a.start);for(b=d;(c=this.g[b])&&!(c.start=Math.max(a.end,c.start),a.end<c.end);b++);this.g.splice(d,b-d)}}};g.contains=function(a){if(a.end<=a.start)return!1;for(var b=0,c;c=this.g[b];b++)if(a.start<c.end){if(a.end>=c.start)return c.start<=a.start&&c.end>=a.end;break}return!1};
function gJ(a,b){for(var c=0,d;d=a.g[c];c++)if(b<d.end){if(b>=d.start)return!0;break}return!1}g.union=function(a){a=a.clone();for(var b=0,c;c=this.g[b];b++)a.add(c);return a};g.difference=function(a){for(var b=this.clone(),c=0,d;d=a.g[c];c++)b.remove(d);return b};g.slice=function(a){var b=new eJ;if(a.start>=a.end)return b;for(var c=0,d;d=this.g[c];c++)if(!(d.end<=a.start)){if(d.start>a.end)break;b.add(new bJ(Math.max(a.start,d.start),Math.min(a.end,d.end)))}return b};
g.inverse=function(a){var b=new eJ;b.add(a);for(var c=0,d;d=this.g[c];c++)if(!(a.start>=d.end)){if(a.end<d.start)break;b.remove(d)}return b};function hJ(a){if(a.g.length){var b=a.g;a=new bJ(a.g[0].start,b[b.length-1].end)}else a=null;return a}g.isEmpty=function(){return 0==this.g.length};g.clear=function(){this.g.length=0};g.we=function(){var a=0,b=this.g,c=new Pg;c.next=function(){if(a>=b.length)throw Og;return b[a++].clone()};return c};function iJ(){this.Sb=this.key_="";this.children=null;this.items=[];this.id=""}g=iJ.prototype;g.Ar=function(a){this.items.push(a)};g.Br=function(a){a=this.items.indexOf(a);-1<a&&this.items.splice(a,1)};g.clear=function(){this.items.length=0};g.getItems=function(){return this.items};g.getKey=function(){return this.key_};g.uh=function(a){this.key_=a};g.ba=function(){return this.Sb};g.Da=function(a){this.id=this.Sb=a};g.na=function(){return this.children};g.Bc=function(a){this.children=a};g.D=function(){return this.id};function jJ(){this.ja="";this.type="Unique";this.Pf=null;this.g=!1}g=jJ.prototype;g.getValue=function(a){a=this.Pf?this.Pf(a,this.ja):a[this.ja];if(null!=a){a=a.toString();if(a===Tba)return"Invalid Value";if(0<a.length)return a}return"No "+this.ja};g.qd=function(){return this.ja};g.sp=function(a){return a.toString()};g.Hp=function(a){return 1E18===Number(a)?"No "+this.ja:a.toString()};g.ra=function(a){a||(a={});a.type=this.type;a.field=this.qd();a.arrayKeys=this.g;return a};
g.restore=function(a){var b=a.field;"string"===typeof b&&(this.ja=b);a=a.arrayKeys;"boolean"!==typeof a&&"string"!==typeof a||Tha(this,a)};g.clone=function(){var a=new this.constructor;a.restore(this.ra());a.Pf=this.Pf;return a};g.ny=function(a){return Uha.bind(this,a)};function Tha(a,b){"string"===typeof b&&(b=!!b);a.g=b}function Uha(a,b){return!!a&&0<=a.indexOf(b)};function kJ(){jJ.call(this);this.type="Numeric";this.width=10;this.l=this.offset=0}w(kJ,jJ);g=kJ.prototype;g.getValue=function(a){a=this.Pf?this.Pf(a,this.ja):a[this.ja];var b=NaN,c=typeof a;null==a?b=1E18:"number"==c?b=a:a instanceof Date?b=a.getTime():a instanceof lg?b=a.Sa():"string"==c&&(b=(a=a.trim())?$b(a):1E18);return isNaN(b)?9999999998:b};g.ec=function(){return this.offset};
g.sp=function(a){"string"==typeof a&&(a=(a=a.trim())?$b(a):1E18);return 1E18===a||9999999998===a?a:a===lJ(this,1E18)?1E18:a!==lJ(this,9999999998)&&"number"===typeof a?lJ(this,a):9999999998};g.Hp=function(a){var b=this.width,c=this.l;return 1E18===a?"No "+this.ja:9999999998===a||"number"!=typeof a?"Not a Number":a.toFixed(c)+" to "+(a+b).toFixed(c)};function lJ(a,b){var c=a.width;a=a.ec();return Math.floor((b-a)/c)*c+a}
function mJ(a){a=a.toFixed(14);var b=a.indexOf(".");return-1<b?(a=a.substring(b+1),a=a.replace(/0+$/,""),a.length):0}g.ra=function(a){a=kJ.C.ra.call(this,a)||{};a.width=this.width;a.offset=this.ec();return a};g.restore=function(a){kJ.C.restore.call(this,a);var b=a.width;null==b||isNaN(b)||(this.width=Number(b),this.l=Math.max(mJ(this.width),mJ(this.ec())));a=a.offset;null==a||isNaN(a)||(this.offset=Number(a),this.l=Math.max(mJ(this.width),mJ(this.ec())))};g.ny=function(a){return Vha.bind(this,a)};
function Vha(a,b){for(var c=0;c<a.length;c++)if(b>=a[c]&&b<=a[c]+this.width)return!0;return!1};function Wha(a,b,c){var d;c=!!c;b/=25;b=Vp([a[0]/1E6,a[1]/1E6],b,.66*b,-45);for(var e=0;e<b.length-1;e++)b[e][0]*=1E6,b[e][1]*=1E6;b=new qp([b]);c?d=new Zo([b,new hp(a)]):d=b;return d};var nJ={bgColor:"#333333",bold:!0,fontSize:16,showVector:!0,showVectorType:!0,showCount:!1,showTile:!0,showBackground:!0,opacity:1,version:0},Xha=new ds({stroke:new Zr({color:"#111",lineJoin:"bevel",width:3})}),Yha=new ds({fill:new cs({color:"#fff"}),stroke:new Zr({color:"#000",width:1})}),Zha=new cs({color:"#fff"}),$ha=new Zr({color:"#000",width:2}),aia=/^([\d.+-]+) to [\d.+-]+$/,oJ=[];
function bia(a){a.priority=a.priority||0;oJ.push(a);oJ.sort(cia);if(a.defaultSettings){var b=pJ(),c;for(c in a.defaultSettings)null==b[c]&&(b[c]=a.defaultSettings[c]);M.set("os.legend.options",b)}}function cia(a,b){return-xb(a.priority||0,b.priority||0)}function pJ(){var a=M.get("os.legend.options");a&&0==a.version||(a=nJ,M.set("os.legend.options",a));return fi(a)}function dia(a){return F(a,"os.legend.ILegendRenderer")&&a.Kf!==wa}
function eia(a){var b=a.fontSize+"px";a.font=(a.bold?"bold ":"")+b+"/"+b+" sans-serif";a.Zj=[];a.maxRowWidth=0;a.offsetX=0;a.offsetY=0}
function fia(a,b,c){var d=pJ();d.maxHeight=b||Infinity;d.maxWidth=c||Infinity;d.showCount=null==d.showCount?nJ.showCount:d.showCount;d.nt=null==d.nt?nJ.nt:d.nt;d.showVectorType=null==d.showVectorType?nJ.showVectorType:d.showVectorType;if(a){var e=a.getContext("2d");if(e){eia(d);gia(d);var f=d.maxRowWidth;c=Dg(L.s());c=c.filter(dia);for(b=0;b<c.length;b++){var h=c[b];h.Kf(d);oJ.forEach(function(a){null!=a.render&&a.render(h,d)})}1==d.Zj.length&&hia(d);d.TA&&iia(d);0<d.maxRowWidth&&(a.width=Math.min(d.maxWidth,
d.maxRowWidth+25),a.height=d.offsetY-Math.round(d.fontSize/2));e.globalAlpha=d.opacity||nJ.opacity;c=aJ(e);if(null!=d.showBackground?d.showBackground:nJ.showBackground)e.fillStyle=d.bgColor||nJ.bgColor,e.fillRect(2,2,a.width-4,a.height-4),b=new hq(up([2,2,a.width-2,a.height-2])),c.Ih(b,Xha);d.Zj[0].vq.Ob.ng=a.width/2-f/2;for(b=0;b<d.Zj.length;b++){a=d.Zj[b];if(a.feature&&a.style){f=a.style.Pa();if(f instanceof eA&&(e=f.Fe(),2>e)){0==e&&f.load();f.Vh(jia,f);continue}c.Ih(a.feature,a.style)}(a.Ov||
a.feature)&&a.vq&&c.Ih(a.Ov||a.feature,a.vq)}}}}function jia(){this.Bl(jia,this);3>this.Fe()&&N.dispatchEvent("legend:update")}function gia(a){a.offsetX=2+Math.floor(a.fontSize/10);a.offsetY=5+a.fontSize/2;var b=new hq(new hp([a.offsetX,a.offsetY])),c=UH("Legend",a);VH(a,void 0,void 0,b,c);a.offsetX=10+Math.round(a.fontSize/4)}function iia(a){a.offsetX=2+Math.floor(a.fontSize/10);var b=new hq(new hp([a.offsetX,a.offsetY])),c=UH("- Too many legend items -",a);VH(a,void 0,void 0,b,c)}
function hia(a){var b=new hq(new hp([a.offsetX,a.offsetY])),c=UH("Nothing to Display",a,void 0,0);VH(a,void 0,void 0,b,c)}function TH(a){return!a.TA&&!(a.TA=a.maxHeight<a.offsetY+a.fontSize+5)}function VH(a,b,c,d,e){var f=0,h=d||b;h&&(h=dl(h.Z().Y()),f+=h[0]+a.fontSize);if(e){var k=e.mb();k&&(h=k.Ae(),k=k.mb(),h&&k&&(h=Bk(k,"feature-label",h),f+=h.width))}a.maxRowWidth=Math.max(f,a.maxRowWidth);a.Zj.push({feature:b,style:c,Ov:d,vq:e});a.offsetY+=a.fontSize+5}
function qJ(a){return a instanceof Rz&&a.yb()&&0<a.dg()}function kia(a,b){a=a.match(aia);b=b.match(aia);if(a||b){if(!a)return 1;if(!b)return-1}else return 0;a=Number(a[1]);b=Number(b[1]);return a>b?1:a<b?-1:0}
function rJ(a,b,c,d,e){if(TH(b)){c=UH(c,b);d=[b.offsetX+d,b.offsetY];if(e){var f=b.fontSize/3;e=f/3;d=up([d[0]-f,d[1]-e,d[0]+f,d[1]+e]);f=Yha}else Yy.test(a.shape)?(e=az[a.shape],d=Wha(d,b.fontSize,e),e&&(a.image.type="circle"),a.image.radius=me(b.fontSize/12,1.5,4),a.stroke.width=me(b.fontSize/8,1.5,4)):(d=new hp(d),xz(a)&&(a.image.scale=b.fontSize/24,a.image.anchor=[.5,.5]));f||(f=Az(wz.s(),a));a=new hq(d);VH(b,a,f,void 0,c)}}
function lia(a,b){var c=vz(wz.s(),a.D())||Sy;c=fi(c);ai(c,["image","radius"],Math.round(b.fontSize/3));b=a.Jd;c.shape=b;var d=Wy[b];d&&d.config&&d.config.image&&nz(d.config,c);az[b]&&(a=Wy[a.Sf])&&a.config&&a.config.image&&nz(a.config,c);return c}function UH(a,b,c,d){return new ds({text:new Qt({text:a,font:null!=c?c:b.font,textAlign:"left",textBaseline:"middle",fill:Zha,offsetX:null!=d?d:b.offsetX,stroke:$ha})})};var mia={sS:"Unique",RQ:"Minute",VP:"Hour",WP:"Hour of Day",YP:"Hour of Week",XP:"Hour of Month",ZP:"Hour of Year",xP:"Day",yP:"Day of Week",HS:"Week",UQ:"Month",KS:"Year"},nia={"Hour of Day":!0,"Hour of Week":!0,"Hour of Month":!0,"Hour of Year":!0,"Day of Week":!0,Unique:!1,Hour:!1,Day:!1,Week:!1,Month:!1,Year:!1};function sJ(){jJ.call(this);this.type="Date";this.j="Hour of Day"}w(sJ,jJ);var tJ=moment.utc("0867-05-03T09:00:00Z").valueOf();g=sJ.prototype;
g.getValue=function(a){var b=tJ;a=this.Pf?this.Pf(a,this.ja):a[this.ja];if(null!=a)if("object"==typeof a)try{b=a.Sa();var c=a.Ya();c=c&&c!==b?c:void 0}catch(f){try{b=a.getTime()}catch(h){}}else"string"===typeof a&&(a=moment(a).valueOf(),isNaN(a)||(b=a));if(b!==tJ){a=new Date(b+UF);var d=null;c&&this.g&&(d=new Date(c+UF));switch(this.j){case "Hour of Day":b=a.getUTCHours();if(!d)return this.g?[b]:b;c=d.getUTCHours();return uJ(this,b,c,23);case "Hour of Week":b=24*a.getUTCDay()+a.getUTCHours();if(!d)return this.g?
[b]:b;c=24*d.getUTCDay()+d.getUTCHours();return uJ(this,b,c,167);case "Hour of Month":b=24*a.getUTCDate()+a.getUTCHours();if(!d)return this.g?[b]:b;c=24*d.getUTCDate()+d.getUTCHours();a=23+24*(new Date(a.getUTCFullYear(),a.getMonth()+1,0)).getDate();return uJ(this,b,c,a);case "Hour of Year":var e=new Date(a.getUTCFullYear(),0);b=24*Math.floor((a-e)/864E5)+a.getUTCHours();if(!d)return this.g?[b]:b;c=24*Math.floor((a-e)/864E5)+d.getUTCHours();a=(new Date(a.getUTCFullYear()+1,0)-e)/864E5*24;return uJ(this,
b,c,a);case "Day of Week":b=a.getUTCDay();if(!d)return this.g?[b]:b;c=d.getUTCDay();return uJ(this,b,c,6);case "Minute":return KF(a,"min").getTime();case "Hour":return KF(a,"hour").getTime();case "Day":return KF(a,"day").getTime();case "Week":return KF(a,"week").getTime();case "Month":return KF(a,"month").getTime();case "Year":return KF(a,"year").getTime()}}return b};
function uJ(a,b,c,d){if(b==c)return a.g?[b]:b;if(b<c){a=Array(c-b);var e=0;for(d=c-b;e<=d;e++)a[e]=b+e}else{a=Array(d-b+(c+1));e=c;for(d=d-b+c;e<=d;e++)a[e+1]=b+e-c;for(b=0;b<=c;b++)a[b]=b}return a}g.sp=function(a){return Array.isArray(a)?a:Number(a)};
g.Hp=function(a){if(void 0!==a&&a!=tJ)switch(this.j){case "Hour of Day":return Sb(a,2)+"00";case "Day of Week":return moment().isoWeekday(a).format("dddd");case "Minute":return moment.utc(a).format("YYYY-MM-DD HH:mm");case "Hour":return moment.utc(a).format("YYYY-MM-DD HH");case "Day":return moment.utc(a).format("YYYY-MM-DD");case "Week":return moment.utc(a).day(0).format("YYYY-MM-DD");case "Month":return moment.utc(a).format("YYYY-MM");case "Year":return moment.utc(a).format("YYYY");case "Hour of Week":case "Hour of Month":case "Hour of Year":return a.toString();
default:return pg(a)}return"Invalid Date"};g.ra=function(a){a=sJ.C.ra.call(this,a)||{};a.binType=this.j;return a};g.restore=function(a){sJ.C.restore.call(this,a);(a=a.binType)&&mc(mia,a)&&(this.j=a)};var vJ={Unique:jJ,Date:sJ,Numeric:kJ};var SI="animationEnabled",RI="animationFrame",KI="cleared",LI="features",QI="featureVisibility",TI="geometryShape",UI="geometryCenterShape",PI="highlightedItems",MH="loading",NH="refreshInterval";function oia(a){return $e(a,!0)}function wJ(a){C.call(this);this.g=null;this.o=0;this.l={};this.j={};this.A={};this.G=a||oia}w(wJ,C);wJ.prototype.J=function(){this.oi(-1);wJ.C.J.call(this);pia(this,null)};function pia(a,b){if(a.g){a.g.M("change",a.u,!1,a);a.g.M("histo:binChange",a.B,!1,a);var c=a.g;c.j--;0>=c.j&&c.dispose()}a.g=b;a.g&&(a.g.H("change",a.u,!1,a),a.g.H("histo:binChange",a.B,!1,a),a.g.j++)}wJ.prototype.B=function(){this.l={}};wJ.prototype.pe=function(){return this.g?this.g.pe():[]};
wJ.prototype.oi=function(a,b,c){1!==a&&(this.j={});a!=this.o&&(this.l={});if(1==a&&q(b)&&c)for(var d=0,e=b.length;d<e;d++){var f=b[d].ba();this.l[f]=c;this.j[f]=c}this.o=1===a?this.o:a;this.u()};wJ.prototype.setColorMethod=wJ.prototype.oi;
wJ.prototype.u=function(){var a=this.A;this.A={};switch(this.o){case -1:this.o=0;if(this.g){(a=this.g.N())&&xJ(this,a.La(),void 0);try{var b=this.g.u}catch(k){b=!1}b&&(a=this.g,a.u=!0,a.g&&"Date"==a.g.type&&nia[a.g.j]&&Tha(a.g,!0),yJ(a),a.update(),a.dispatchEvent("change"))}break;case 2:qia(this);ria(this,a);break;case 3:this.l={};if((b=this.pe())&&0<b.length){for(var c=0,d=0,e=b.length;d<e;d++)c=Math.max(c,b[d].items.length);var f=$e(101);d=0;for(e=b.length;d<e;d++){var h=hz(f[Math.floor(b[d].items.length/
c*100)]);this.l[b[d].ba()]=h;xJ(this,b[d].getItems(),h)}}ria(this,a)}if(!pc(this.j))for(a=this.pe(),b=0,c=a.length;b<c;b++)d=a[b].ba(),d in this.j&&(d=this.j[d],this.l[a[b].ba()]=d,xJ(this,a[b].getItems(),d));this.dispatchEvent(new K("style"))};function qia(a){a.l={};var b=a.pe();!pc(a.j)&&(b=ab(b,function(a){return!this.j[a.ba()]},a));if(b&&0<b.length)for(var c=a.G(b.length),d=0,e=b.length;d<e;d++){var f=hz(c[d]);a.l[b[d].ba()]=f;xJ(a,b[d].getItems(),f)}}
function ria(a,b){var c=[],d;for(d in b)d in a.A||c.push(b[d]);xJ(a,c,void 0)}function xJ(a,b,c){if(b&&0<b.length){for(var d=0,e=b.length;d<e;d++){var f=Gy(b[d],null,null);if(f!=c){b[d].la.color=c;var h=Gy(b[d],null,null)||void 0;N.dispatchEvent(new Zx("feature:color",b[d].id,h,f))}c&&(a.A[b[d].id]=b[d])}uz(b)}}wJ.prototype.ra=function(a){a=a||{};a.colorMethod=this.o;a.manualColors=vc(this.j);if(this.g){var b=this.g.g;b&&(a.binMethod=b.ra())}return a};
wJ.prototype.restore=function(a){if(this.g&&a.binMethod){var b=a.binMethod;if(b){var c=b.type;if(c&&(c=vJ[c])){var d=new c;d.restore(b)}}if(b=d)b.Pf=By,this.g.bt(b)}this.oi(a.colorMethod);a.manualColors&&(a=vc(a.manualColors),Fa(a),this.j=a,this.u())};function zJ(a){iJ.call(this);this.j=ef(a);this.g={}}w(zJ,iJ);zJ.prototype.Ja=function(){for(var a in this.g)return this.g[a]==this.items.length?a:"";return this.j};zJ.prototype.Ar=function(a){zJ.C.Ar.call(this,a);sia(this,Gy(a)||void 0)};zJ.prototype.Br=function(a){zJ.C.Br.call(this,a);tia(this,Gy(a)||void 0)};function tia(a,b){(b=b?ef(b):a.j)&&b in a.g&&(a.g[b]--,0==a.g[b]&&delete a.g[b])}function sia(a,b){(b=b?ef(b):a.j)&&(b in a.g?a.g[b]++:a.g[b]=1)};function AJ(a,b){C.call(this);this.ma="sourcehisto"+uia++;this.log=via;this.j=0;this.g=null;this.source=a;this.A=[];this.ya=null;this.o=a.o;this.u=!1;this.B=new Fh(this.uK,25,this);this.l={};N.H("feature:color",this.Sw,!1,this);this.df(b||null);this.update()}w(AJ,C);var via=E.V("os.data.histo.SourceHistogram"),uia=0;g=AJ.prototype;
g.dispose=function(){this.j--;0>=this.j?(E.ta(this.log,"Disposing histogram "+this.ma+"."),AJ.C.dispose.call(this)):E.ta(this.log,"Skipping histogram dispose for id = "+this.ma+" (ref count = "+this.j+")")};g.J=function(){AJ.C.J.call(this);N.M("feature:color",this.Sw,!1,this);this.df(null);this.source=null;this.B.dispose();this.B=null;this.bt(null);this.A.length=0};g.D=function(){return this.ma};g.getParent=function(){return this.ya};
g.df=function(a){if(this.ya){this.ya.M("change",this.update,!1,this);this.ya.M("histo:cascadeChange",this.update,!1,this);var b=this.ya;b.j--;0>=b.j&&b.dispose()}else yf(this.source,"propertychange",this.iy,this);this.ya=a;this.Xa()||(this.ya?(this.ya.H("change",this.update,!1,this),this.ya.H("histo:cascadeChange",this.update,!1,this),this.ya.j++):H(this.source,"propertychange",this.iy,this))};
g.bt=function(a){var b=null;a&&a.type in vJ&&(b=new vJ[a.type],b.restore(a.ra()));if(this.g=b)this.g.Pf=By,this.u=this.g.g||!1;yJ(this);this.update();this.dispatchEvent("histo:binChange")};AJ.prototype.setBinMethod=AJ.prototype.bt;function yJ(a){if(a.o&&(a.o.kl(a.ma),a.g)){var b=a.g.getValue.bind(a.g),c="Date"==a.g.type?nia[a.g.j]:!1;c=a.u?c:!1;a.o.yr(a.ma,b,c)}}
function wia(a){for(a=a.getParent();a;){var b=a.g,c=a.D();if(b){var d=d||{};d[c]=b.ny([])}else{d={};d[c]=void 0;break}a=a.getParent()}return d}AJ.prototype.pe=function(){return this.A};AJ.prototype.getResults=AJ.prototype.pe;
function xia(a){var b=[];if(a.o&&a.g){a.source&&a.source.Zd();var c=wia(a);if(c)for(var d in c)if(null!=c[d])a.o.Tk(d,c[d]);else{a.A=[];return}b=a.o.Zp(a.ma,a.g.sp.bind(a.g),a.vN.bind(a),a.xN.bind(a),a.wN.bind(a));if(c)for(d in c)a.o.Tk(d,void 0);b=b.map(a.map,a).filter(function(a){return void 0!=a})}a.A=b}AJ.prototype.map=function(a){var b=a.value,c=b.getItems();if(!c||!c.length)return null;b.uh(a.key);b.Da(this.g.Hp(a.key));return b};
AJ.prototype.oi=function(a,b,c){if(this.source){var d=this.source.G;if(0<a){var e={};d&&(e=d.l);if(!d||d.g!=this){d=this.source.fp(this);BJ(this.source,d);var f=d;Fa(e);f.j=e;f.u()}d.oi(a,b,c)}else null!=d&&d.oi(a,b,c),BJ(this.source,null)}};AJ.prototype.setColorMethod=AJ.prototype.oi;g=AJ.prototype;g.N=function(){return this.source};
g.iy=function(a){a=a.j;"color"===a||a===LI||"replaceStyle"===a||"timeEnabled"===a?this.update():a===QI?this.update(100):"timeFilter"===a?(this.source.Zd(),this.update()):"data"===a&&(yJ(this),this.update())};g.update=function(a){this.B&&this.B.start(a)};g.uK=function(){for(var a in this.l){var b=this.l[a];b&&b.clear()}this.l={};xia(this);this.dispatchEvent("change")};g.vN=function(a,b){this.l[b.id]=a;a.Ar(b);return a};g.xN=function(a,b){this.l[b.id]=void 0;a.Br(b);return a};g.wN=function(){return new zJ(this.source.Ja())};
g.Sw=function(a){a.id&&this.l[a.id]&&(tia(this.l[a.id],a.u),sia(this.l[a.id],a.l))};var MI="selectedItemsAdded",OI="selectedItemsChanged",NI="selectedItemsRemoved";function Ry(a,b,c,d){hq.call(this,a);this.l=b||wa;this.g=c||wa;this.o=d||wa}w(Ry,hq);Ry.prototype.clone=function(){var a=new Ry(void 0,this.l,this.g,this.o);a.qc(this.la,!0);Zu(a,this.de);var b=this.Z();null!=b&&a.tb(b.clone());a.ga(this.D());return a};function CJ(){this.u="#ffffff";this.j=this.l=this.ma=void 0;this.A=!1;this.o=null}g=CJ.prototype;g.Ja=function(){return this.u};g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.S=function(){return this.j};g.Ta=function(a){this.j=a};g.yb=function(){return this.A};g.dc=function(a){this.A=a};g.Ud=function(a){this.o=a};function DJ(){CJ.call(this);this.g={}}w(DJ,CJ);function EJ(a){a=void 0!==a?a:{};this.j=[];this.l=new Su({features:this.j,useSpatialIndex:!1});this.g=new FJ({renderOrder:null,source:this.l,updateWhileAnimating:!0,updateWhileInteracting:!0,zIndex:a.zIndex});null!=a.opacity&&this.xd(a.opacity);null!=a.style&&this.zb(a.style);null!=a.features&&q(a.features)&&Mx(this,rb(a.features));null!=a.map&&this.setMap(a.map)}w(EJ,x);g=EJ.prototype;
g.J=function(){EJ.C.J.call(this);this.setMap(null);this.j.length=0;this.l.dispose();this.l=null;this.g.dispose();this.g=null};g.ia=function(){this.l&&!L.s().Qa()&&this.l.ia()};g.La=function(){return this.j};function Mx(a,b){a.j.length=0;if(b&&0<b.length){a.j.length=b.length;for(var c=0,d=b.length;c<d;c++)a.j[c]=b[c]}a.ia()}g.setMap=function(a){this.g&&this.g.setMap(a)};g.zb=function(a){this.g&&this.g.zb(a)};g.xd=function(a){this.g&&this.g.xd(a)};g.Of=function(a){this.g&&this.g.Of(a)};
function FJ(a){iu.call(this,a)}w(FJ,iu);FJ.prototype.setMap=function(a){this.eh&&(sf(this.eh),this.eh=null);a||this.ia();this.fh&&(sf(this.fh),this.fh=null);a&&(this.eh=H(a,"precompose",function(a){var b=Rf(this);b.managed=!1;b.zIndex+=1E5;a.frameState.layerStatesArray.push(b);a.frameState.layerStates[J(this)]=b},this),this.fh=H(this,"change",a.render,a),this.ia())};function GJ(a){A.call(this,a)}w(GJ,A);function HJ(a,b){this.id=a;this.start=Ia();this.count=0;this.title=b||null}HJ.prototype.S=function(){return this.title};HJ.prototype.Ta=function(a){this.title=a};function IJ(){C.call(this);this.log=yia;this.g={}}w(IJ,C);xa(IJ);var yia=E.V("os.load.LoadingManager");function JJ(){qG.call(this);this.g="RADIUS";this.j="Radius";this.o="RADIUS_UNITS";this.u=zia;this.Fb=Aia;this.units="nmi"}w(JJ,qG);hy(fy.s(),"Radius",JJ);var Aia=/(^|[^A-Za-z0-9]+)(cep|radius)($|[^A-Za-z0-9]+)/i,zia=/(^|[^A-Za-z0-9]+)(cep|radius)(_units)($|[^A-Za-z0-9]+)/i;g=JJ.prototype;g.Tc=function(){return this.units};g.cd=function(a){this.units=a};g.D=function(){return this.j};g.ba=function(){return this.g||null};
g.Fa=function(a){if(this.ja&&this.g){var b=Pq(ay(a,this.ja));isNaN(b)||(this.units&&(b*=Bp[this.units]),by(a,this.g,b),this.units&&this.o&&by(a,this.o,this.units))}};g.Wd=function(a){if(a)for(var b=a.length;b--;){var c=a[b],d=cy(c,this.Fb);if(d)return a=new this.constructor,a.ja=d,this.u&&(d=cy(c,this.u))&&(c=ay(c,d),"string"==typeof c&&(c=c.toLowerCase(),c in Bp&&a.cd(c))),a}return null};g.clone=function(){var a=JJ.C.clone.call(this);a.cd(this.Tc());return a};
g.ra=function(a){a=JJ.C.ra.call(this,a);a.units=this.Tc();return a};g.restore=function(a){JJ.C.restore.call(this,a);this.cd(a.units)};g.sc=function(){var a=JJ.C.sc.call(this);Z("units",a,this.Tc());return a};g.fd=function(a){JJ.C.fd.call(this,a);this.cd(pG(a,"units"))};function KJ(){JJ.call(this);this.g="SEMI_MAJOR (nmi)*";this.o="SEMI_MAJ_UNITS";this.u=Bia;this.Fb=Cia;this.j="SemiMajor"}w(KJ,JJ);hy(fy.s(),"SemiMajor",KJ);var Cia=/s(e(m(i)?)?)?[\W_]*maj(o(r)?)?/i,Bia=/s(e(m(i)?)?)?[\W_]*maj(o(r)?)?_units/i;function LJ(){JJ.call(this);this.g="SEMI_MINOR (nmi)*";this.o="SEMI_MINOR_UNITS";this.u=Dia;this.Fb=Eia;this.j="SemiMinor"}w(LJ,JJ);hy(fy.s(),"SemiMinor",LJ);var Eia=/s(e(m(i)?)?)?[\W_]*min(o(r)?)?/i,Dia=/s(e(m(i)?)?)?[\W_]*min(o(r)?)?_units/i;Q.directive("descriptioninfo",[function(){return{restrict:"E",replace:!0,scope:{description:"="},templateUrl:"v1541734487/views/descriptioninfo.html",controller:MJ,controllerAs:"info"}}]);function MJ(a,b){this.v=a;this.L=b;b=Ak(this.v.description||"");if(!Hb(Tb(b))){b=b.replace(/<a /g,'<a target="_blank" ');var c=this.L.find("iframe")[0];c&&(c=c.contentWindow.document,c.open(),c.write(b),c.close())}a.$on("$destroy",this.g.bind(this))}MJ.$inject=["$scope","$element"];
MJ.prototype.g=function(){this.L=this.v=null};function Fia(a,b,c){var d="Description";c&&(d+=" for "+c);a=Ub("descriptionInfo",a);ix(a)?hx(a):fx({id:a,label:d,icon:"fa fa-newspaper-o",x:"center",y:"center",width:"800","min-width":"800","max-width":"800",height:"600","min-height":"600","max-height":"600","show-close":"true"},'<descriptioninfo description="description"></descriptioninfo>',void 0,void 0,void 0,{description:b})}Ja("os.ui.launchDescriptionInfo",Fia);
function Gia(a,b,c,d){if(!c||"string"!==typeof c)return"";d.asyncPostRender=Hia;return'<div class="location-properties-link">Show</div>'}function Hia(a,b,c){if(c){var d=String(c.D()).replace(/[\W]/g,"_"),e=c.get("DESCRIPTION");e||(e=c.get("description"));if(null!=e&&"string"===typeof d){b=$(a);a=a.ownerDocument;var f=a.defaultView||a.parentWindow;b.click(function(){Ci(f)?Fia(d,e):f.os.ui.launchDescriptionInfo(d,e)})}}};Q.directive("propertyinfo",[function(){return{restrict:"E",replace:!0,scope:{feature:"="},templateUrl:"v1541734487/views/propertyinfo.html",controller:NJ,controllerAs:"info"}}]);function NJ(a){this.v=a;this.v.gridCols=Iia;this.v.gridOptions={enableColumnReorder:!1,forceFitColumns:!0,multiColumnSort:!1,multiSelect:!1,defaultFormatter:Bx,enableAsyncPostRender:!0};a.$watch("feature",this.j.bind(this));a.$on("$destroy",this.g.bind(this))}NJ.$inject=["$scope"];
var Iia=[{id:"field",field:"field",name:"Field",sortable:!0,width:40},{id:"value",field:"value",name:"Value",sortable:!0}];NJ.prototype.g=function(){this.v=null};NJ.prototype.j=function(a){this.v.lon=void 0;this.v.lat=void 0;this.v.description=void 0;this.v.properties=[];if(a){a=this.v.feature;for(var b in a)this.v.properties.push({id:b,field:b,value:a[b]})}};
function OJ(a,b,c){var d="Property Info";c&&(d+=" for "+c);a=Ub("propertyInfo",a);ix(a)?hx(a):fx({id:a,label:d,icon:"fa fa-map-marker",x:"center",y:"center",width:"500","min-width":"200","max-width":"800",height:"400","min-height":"200","max-height":"600","show-close":"true"},'<propertyinfo feature="feature"></propertyinfo>',void 0,void 0,void 0,{feature:b})}Ja("os.ui.launchPropertyInfo",OJ);
function Jia(a,b,c,d){if(!c)return"";if("string"===typeof c)return c;d.asyncPostRender=Kia;return'<div class="btn btn-link">Show Properties</div>'}function Kia(a,b,c){if(c){var d=c.get("ID").toString(),e=c.get("PROPERTIES");if(e instanceof Object&&"string"===typeof d){b=$(a);a=a.ownerDocument;var f=a.defaultView||a.parentWindow;fc(e,Lia);b.click(function(){Ci(f)?OJ(d,e):f.os.ui.launchPropertyInfo(d,e)})}}}function Lia(a,b,c){Ba(a)&&delete c[b]};function Mia(a,b,c){a=new Wv(b||a,a);a.sortable=!0;a.temp=c||!1;Dx(a);return a}function Nia(a){return"string"===typeof a?Mia(a):a}
function Oia(a){var b=!1,c=!1,d=!1,e=!1,f=!1,h=!1,k=!1,l=!1,m=!1,n=!1,p=!1,r=!1,u=!1;a.getColumns().forEach(function(a){var v=a.name;v&&(b|=Gb(v,"ID"),f|=Gb(v,"LAT_DDM"),h|=Gb(v,"LON_DDM"),k|=Gb(v,"LAT_DMS"),l|=Gb(v,"LON_DMS"),d|=Gb(v,"LAT"),e|=Gb(v,"LON"),c|=eda.test(v),m|=Gb(v,"recordTime"));if(a=a.field)n|=Dp.test(a),p|=Aia.test(a),r|=Cia.test(a),u|=Eia.test(a)});!c&&d&&e&&PJ(a,"MGRS");!k&&d&&PJ(a,"LAT_DMS");!l&&e&&PJ(a,"LON_DMS");!f&&d&&PJ(a,"LAT_DDM");!h&&e&&PJ(a,"LON_DDM");!m&&a.Qc&&PJ(a,"recordTime",
"TIME");n&&(PJ(a,"ALTITUDE (m)*"),PJ(a,"ALTITUDE_UNITS"));p&&PJ(a,"RADIUS");r&&PJ(a,"SEMI_MAJOR (nmi)*");u&&PJ(a,"SEMI_MINOR (nmi)*");b||PJ(a,"ID")};function QJ(a){A.call(this,a);this.l=null}w(QJ,A);QJ.prototype.toString=function(){return this.l?this.l.toISOString():QJ.C.toString.call(this)};function RJ(a,b){b=void 0!==b?b:"auto";var c=SJ(a);"auto"==b?24174E5<=c?TJ(a,6048E5,"week"):4302E5<=c?TJ(a,864E5,"day"):(UJ(a,c),VJ(a,"day")):"week"==b||"month"==b?TJ(a,6048E5,"week"):"day"==b&&TJ(a,864E5,"day");a.Gd(WJ(a).start+a.ec())}function UJ(a,b){if(a){var c=b/24-b/24%1E3;0==c&&(c=b/24);var d=hJ(a.j).getLength();c<d/24&&(c=Math.min(b/2,d/24));XJ(a,c);YJ(a,c/2)}}function TJ(a,b,c){XJ(a,b);YJ(a,b);VJ(a,c)};function vg(){C.call(this);this.U=M.get(["tlc","fps"],2);this.g=0;this.K="day";this.B=this.O=!1;this.A=this.G=1E3;this.oa=Number.MAX_VALUE;this.aa=!1;this.ka=null;this.I=new je(1E3/this.U);this.I.H("tick",this.Bw,!1,this);this.Ia=new Fh(this.hL,50,this);this.j=new eJ;ZJ(this,new bJ(0,0));this.P=new eJ;this.o=new eJ;this.l=new eJ;this.u=new eJ;this.sa=null;this.Ca=!1;var a=YF(new Date);a=KF(a,"day");var b=MF(a,"day",1);this.aa=!0;this.Ud($J(a.getTime(),b.getTime()));VJ(this,"day");XJ(this,SJ(this));
aK(this,!1);bK(this,!1);this.Gd(b.getTime());this.aa=!1;UJ(this,SJ(this))}w(vg,C);xa(vg);g=vg.prototype;g.Bd=function(){return null!=this.I&&this.I.enabled};g.Gd=function(a){this.g!==a&&(this.oa=this.g,this.g=a,cK(this))};function VJ(a,b){a.K!=b&&(a.K=b,dK(a),Pia(a),a.dispatchEvent("timeline.durationChange"))}g.Ya=function(){return hJ(this.j).end};function aK(a,b){a.O=b;a.dispatchEvent("timeline.fadeToggle")}function bK(a,b){a.B=b;a.dispatchEvent("timeline.lockToggle")}
function eK(a,b){var c=a.Bd();a.I&&a.I.dispose();a.U=b;a.I=new je(1E3/a.U);a.I.H("tick",a.Bw,!1,a);c&&a.I.start();M.set(["tlc","fps"],b);a.dispatchEvent("timeline.fpsChange")}function SJ(a){a=a.l.isEmpty()?fK(a):a.l;var b=[];Rg(a.we(!1),function(a){b.push(a.getLength())});wb(b);return b[0]}g.ec=function(){return this.G};function XJ(a,b){var c=a.G;a.G=Math.max(b,0);c!=a.G&&cK(a)}
function yF(a,b){b=KF(new Date(b),a.K).getTime();var c=MF(new Date(b),a.K,1).getTime();a.aa=!0;a.Ud($J(b,c));a.aa=!1;a.Gd(c)}function $J(a,b){return new bJ(a,b)}g.Ud=function(a){1==Sg(this.j).length&&Qia(this.j,a)||(Ria(this),ZJ(this,a))};function Sia(a,b,c){var d=new bJ(0,0);b+=c*a.A;a=b-a.ec();d.start=Math.min(b,a);d.end=Math.max(b,a);return d}function Tia(a){var b=new bJ(0,0),c=a.g-a.ec();b.start=Math.min(a.g,c);b.end=Math.max(a.g,c);return b}function YJ(a,b){a.A=Math.max(b,-1)}g.Sa=function(){return hJ(this.j).start};
function WJ(a){if(a.l.isEmpty()){var b=fK(a);return b.isEmpty()?hJ(a.j):hJ(b)}return hJ(a.l)}function gK(a){var b=WJ(a);if(a.g>b.end&&a.oa>=b.end||a.oa<=b.start+a.G&&a.g<=b.start||a.B&&0===a.G)0<a.g-a.oa?a.first():a.last()}g.play=function(){this.I&&!this.I.enabled&&(this.I.start(),this.dispatchEvent("timeline.play"))};g.stop=function(){this.I&&this.I.enabled&&(this.I.stop(),this.dispatchEvent("timeline.stop"))};g.first=function(){var a=WJ(this);this.B&&XJ(this,this.A);this.Gd(a.start+this.G)};
g.last=function(){var a=WJ(this);this.B&&XJ(this,a.getLength());this.Gd(a.end)};function Uia(a){if(a.Ca)return a.Ca=!1;var b=WJ(a),c=Sia(a,a.g,1);c.start<b.end&&c.end>=b.end&&(a.Ca=!0);return c.start<b.end}g.next=function(){hK(this,1);gK(this)};g.prev=function(){hK(this,-1);gK(this)};g.Bw=function(){hK(this,1);gK(this)};g.hL=function(){this.dispatchEvent(new QJ("timeline.reset"))};
function cK(a){if(!a.aa){var b=new QJ("timeline.show"),c=a.g,d=a.g-a.G;b.O=a.O;b.l=new qg(d,c);a.dispatchEvent(b);a.ka=b}}function iK(a){a.Ia.start()}function jK(a,b,c){var d=null,e;try{var f=Sg(a);if(0>b)for(e=f.length-1;0<=e;--e){var h=f[e];if(h.end<=c){d=h;break}}else for(e=0;e<f.length;e+=1)if(h=f[e],h.start>=c){d=h;break}return d}catch(k){throw Error("findNextNearestRange_ exception:"+k.message);}}
function hK(a,b){var c=a.g,d=Sia(a,a.g,b);d=0<b&&!a.B?d.start:d.end;if(a.l.isEmpty()){var e=fK(a);e.isEmpty()||gJ(e,d)||(f=jK(e,b,a.g)||hJ(e),dJ(a.sa,f)&&(f=jK(e,b,d)||hJ(e)),a.g=0<b?a.B?f.start:f.start+(a.G-a.A):f.end+a.A,e=Tia(a),e.start<=f.start&&e.end>=f.end&&(a.g=0<b?f.start:f.end),a.sa=f,a.B&&(hJ(a.j).end===f.end&&0<a.A+d-f.end?a.g=c:XJ(a,a.g-d+a.G+a.A*b)))}else if(!gJ(a.l,d)){var f=jK(a.l,b,a.g)||hJ(a.j);dJ(a.sa,f)&&(f=jK(a.l,b,d)||hJ(a.j));a.g=0<b?a.B?f.start-a.A:f.start+(a.G-a.A):f.end+a.A;
e=Tia(a);e.start<=f.start&&e.end>=f.end&&(a.g=0<b?f.start:f.end);a.sa=f;a.B&&(hJ(a.j).end===f.end&&0<a.A+d-f.end?a.g=c:XJ(a,a.g-d+a.G+a.A*b))}a.B?(c=a.G+b*a.A,a.Gd(a.g+b*a.A),XJ(a,c)):a.Gd(a.g+b*a.A)}g.ra=function(a){a=a||{};a.start=this.Sa();a.end=this.Ya();a.duration=this.K;a.current=this.g;a.offset=this.ec();a.fade=this.O;a.lock=this.B;a.skip=this.A;a.playing=this.Bd();a.sliceRanges=this.o.clone();a.loadRanges=this.j.clone();a.animateRanges=this.l.clone();a.holdRanges=this.u.clone();return a};
g.restore=function(a){this.Ud($J(a.start,a.end));VJ(this,a.duration);XJ(this,a.offset);aK(this,a.fade);bK(this,a.lock);YJ(this,a.skip);this.Gd(a.current);kK(this,a.sliceRanges);Via(this,a.loadRanges);lK(this,a.animateRanges);mK(this,a.holdRanges);UJ(this,SJ(this));a.playing?this.play():this.stop()};
function Wia(a,b){var c=new bJ(0,1);c.start=b.start;c.end=b.end;if(b=nK(c))c=a.o.clone(),b.start>b.end&&(a.o.add(new bJ(0,b.end)),b=new bJ(b.start,864E5)),a.o.add(b.clone()),fJ(c,a.o)||(a.P.clear(),a.dispatchEvent("timeline.slice.rangeChanged"),a.dispatchEvent("timleline.rangeChanged"),c.isEmpty()&&!a.o.isEmpty()&&a.dispatchEvent("timeline.refreshLoad"),cK(a),iK(a))}
function nK(a){if(864E5<=a.end-a.start)return rj(qj.s(),"Slice size must be less than a day, setting to largest allowable",Th),new bJ(0,864E5);var b=new bJ(0,1);b.start=a.start;b.end=a.end;864E5<a.start&&(b.start=a.start%864E5);864E5<a.end&&(b.end=a.end%864E5);return b}
function kK(a,b){if(b){var c=a.o.clone();a.o=b.clone();a.P.clear();a.dispatchEvent("timeline.slice.rangeChanged");a.dispatchEvent("timleline.rangeChanged");(!c.isEmpty()&&a.o.isEmpty()||c.isEmpty()&&!a.o.isEmpty())&&a.dispatchEvent("timeline.refreshLoad");cK(a);iK(a)}}
function fK(a){var b=a.j.clone();if(!a.o.isEmpty()){if(a.P.isEmpty()){b=new eJ;for(var c=Sg(a.o),d=Sg(a.j),e=0;e<d.length;e++){var f=Math.ceil((d[e].end-d[e].start)/864E5);d[e].end%864E5<d[e].start%864E5+1&&f++;for(var h=d[e].start-d[e].start%864E5,k=0;k<f;k++)for(var l=h+864E5*k,m=Sha($J(l,l+864E5-1E3),d[e]),n=0;n<c.length;n++){var p=Sha($J(l+c[n].start,l+c[n].end),m);p&&b.add(p)}}a.P=b}b=a.P.clone()}return b}function Ria(a){a.j.isEmpty()||(a.j.clear(),a.P.clear())}
function ZJ(a,b){var c=a.j.clone();a.j.add(b.clone());fJ(c,a.j)||(a.P.clear(),a.dispatchEvent("timeline.slice.rangeChanged"),a.dispatchEvent("timleline.rangeChanged"),b=Sg(c).length,c=Sg(a.j).length,(1===b&&1<c||1===c)&&a.dispatchEvent("timeline.refreshLoad"),cK(a),iK(a))}function Qia(a,b){return Hba(Gba(a,function(a){return a.start===b.start&&a.end===b.end}))}
function Via(a,b){if(b){var c=Sg(a.j).length,d=Sg(b).length;(1===c&&1!=d||1<c&&1===d)&&a.dispatchEvent("timeline.refreshLoad");a.j=b.clone();a.P.clear();a.dispatchEvent("timeline.slice.rangeChanged");a.dispatchEvent("timleline.rangeChanged");cK(a);iK(a)}}function dK(a){a.l.isEmpty()||(a.l.clear(),a.dispatchEvent("timeline.animate.rangeChanged"),cK(a))}function oK(a,b){var c=a.l.clone();a.l.add(b.clone());fJ(c,a.l)||(a.dispatchEvent("timeline.animate.rangeChanged"),cK(a))}
function Xia(a,b){var c=a.l.clone();a.l.remove(b);fJ(c,a.l)||(a.dispatchEvent("timeline.animate.rangeChanged"),cK(a))}function lK(a,b){b&&(a.l=b.clone(),a.dispatchEvent("timeline.animate.rangeChanged"),cK(a))}function mK(a,b){b&&(a.u=b.clone(),a.dispatchEvent("timeline.animate.holdRangeChanged"),cK(a))}function Yia(a,b){var c=a.u.clone();a.u.remove(b);fJ(c,a.u)||(a.dispatchEvent("timeline.animate.holdRangeChanged"),cK(a))}
function Pia(a){a.u.isEmpty()||(a.u.clear(),a.dispatchEvent("timeline.animate.holdRangeChanged"),cK(a))}function Zia(a,b){var c=a.u.clone();a.u.add(b.clone());fJ(c,a.u)||(a.dispatchEvent("timeline.animate.holdRangeChanged"),cK(a))}function Nx(a,b){return b&&!a.u.isEmpty()?b.Sa()===b.Ya()?gJ(a.u,b.Sa()):a.u.contains(new bJ(b.Sa(),b.Ya())):!1};function $ia(){try{var a=document.createElement("canvas");if(en(a,{failIfMajorPerformanceCaveat:!0}))return!1;if(en(a))return!0}catch(b){}return null}var Nq="absolute";function Rz(a){a=a?vc(a):{};delete a.url;this.log=aja;this.sa=this.aa=!1;this.columns=[];this.ma="";this.lj=!1;this.Jd=Ky;this.Sf="Point";this.Hk=0;this.I=this.qf=!1;this.sf=this.tf=0;this.j="";this.oa={};this.oa[vH]=!0;this.oa[uH]=!0;this.oa[pK]=!0;this.oa[qK]=!0;this.oa[rK]=!0;this.Qc=!1;this.o=new tg(qfa,rfa);this.G=null;this.visible=!0;this.fj=null;this.ee=[];this.Vb={};this.ka={};this.BB=!1;this.ib=[];this.U=new Fh(this.wJ,250,this);this.jg=[];this.pb=new Fh(this.tK,250,this);this.u=vg.s();this.g=
null;this.pa={};this.cb={};this.Ca={};this.Cf=this.O=TF;this.nd=!0;this.Hc=0;this.Ne=a.hoverHandler||void 0;this.Is=!1;this.Eb=Nq;this.Ea=0;this.A=null;this.yf=!1;this.gc=this.Df=null;this.Ia={};this.hB=!1;a.disableAreaSelection||(N.H(sK,this.If,!1,this),N.H(tK,this.If,!1,this),N.H(uK,this.If,!1,this),N.H(vK,this.If,!1,this),N.H(wK,this.If,!1,this));this.u.H("timeline.fadeToggle",this.Ku,!1,this);this.u.H("timeline.animate.holdRangeChanged",this.Rn,!1,this);Su.call(this,a)}w(Rz,Su);F(Rz,"os.hist.IHistogramProvider");
F(Rz,"os.source.ISource");jg["os.source.Vector"]=Rz;var aja=E.V("os.source.Vector");g=Rz.prototype;
g.J=function(){Rz.C.J.call(this);this.A&&(this.A.M("tick",this.Uk,!1,this),this.A=null);N.M(sK,this.If,!1,this);N.M(uK,this.If,!1,this);N.M(tK,this.If,!1,this);N.M(vK,this.If,!1,this);N.M(wK,this.If,!1,this);this.u.M("timeline.show",this.Pk,!1,this);this.u.M("timeline.fadeToggle",this.Ku,!1,this);this.u.M("timeline.animate.holdRangeChanged",this.Rn,!1,this);this.u=null;bja(this);z(this.U);this.U=null;this.ib.length=0;z(this.pb);this.pb=null;this.jg.length=0;this.o&&(this.o.dispose(),this.o=null);
this.G&&(this.G.dispose(),this.G=null);this.vh(!1);this.clear()};g.ia=function(){this.sa||(Rz.C.ia.call(this),this.g&&this.g.ia())};g.kt=function(a,b){this.Xf[a]=[H(b,"change",this.aq,this)]};
g.clear=function(){if(!this.I){xK(this);this.ka={};this.sf=this.tf=0;this.o&&this.o.clear();if(this.Ab){this.Ab.forEach(this.ki,this);for(var a in this.Xc)this.ki(this.Xc[a])}this.ke&&this.ke.clear();this.Ab&&this.Ab.clear();this.Cq.clear();this.Xc={};this.dispatchEvent(new Vu("clear"));this.ia();yK(this);this.U&&this.ib&&(this.U.stop(),this.ib.length=0);zK(this);this.dispatchEvent(new K(KI))}};g.clearQueue=function(){this.Df&&(this.Ge(this.Df),this.Df=null)};g.refresh=wa;g.ah=function(){return this.yf};
g.Sg=function(){return this.Ea};g.ef=function(a){this.Ea!=a&&(this.Ea=a,this.A&&(this.A.M("tick",this.Uk,!1,this),this.A.be()||this.A.stop()),this.A=null,0<this.Ea&&(this.A=Lx[a],this.A||(this.A=new je(1E3*a),Lx[a]=this.A),this.A.H("tick",this.Uk,!1,this),this.A.start()),this.dispatchEvent(new K(NH)))};g.Uk=function(){this.ah()&&!this.ob()&&this.refresh()};g.getColumns=function(){return this.columns};g.setColumns=function(a){this.lj=!0;this.columns=a.map(Nia);Oia(this);cja(this,this.Jd);dja(this)};
Rz.prototype.setColumns=Rz.prototype.setColumns;function PJ(a,b,c,d,e){AK(a,b)||(b=Mia(b,c,d),a.columns.push(b),e&&a.dispatchEvent(new K("columnAdded",b)))}
function dja(a){if(a.columns){ub(a.columns,a.columns,Uba());var b=Y.Ka(a.D());if(b){var c=b.getColumns();c&&mfa(c,a.columns)}a.columns.forEach(function(a){var b=a.field;"SEMI_MAJOR (nmi)*"==b?(a.toolTip="Derived Column",a.derivedFrom="SEMI_MAJOR"):"SEMI_MINOR (nmi)*"==b?(a.toolTip="Derived Column",a.derivedFrom="SEMI_MINOR"):"ALTITUDE (m)*"==b&&(a.toolTip="Derived Column",a.derivedFrom="ALTITUDE");if(b=a.field)-1<b.indexOf("PROPERTIES")&&(a.formatter=Jia),Rx.test(b)&&(a.formatter=Gia);if(!pc(this.Ia)&&
(b=this.Ia[a.name]))if(rc(b,"empty"),1==gc(b)){a:{for(c in b)break a;var c=void 0}a.type=c}else 2==gc(b)&&lc(b,"integer")&&lc(b,"decimal")&&(a.type="decimal")},a);b&&b.setColumns(a.columns);a.columns.some(Kx)||(a.columns.sort(Ex),a.columns.forEach(function(a){var b=a.field;if("ALTITUDE_UNITS"==b||"SEMI_MINOR_UNITS"==b||"SEMI_MAJ_UNITS"==b||"BEARING"==b||"BEARING"==b||"ALTITUDE"==b||"SEMI_MINOR"==b||"SEMI_MAJOR"==b)a.visible=!1}));AK(a,"BEARING")&&(b=vz(wz.s(),a.D()))&&!b.rotationColumn&&(b.rotationColumn=
"BEARING");a.dispatchEvent(new K("columns",a.columns))}}function AK(a,b){var c=null;"string"===typeof b?c=b:Ba(b)&&(c=b.field);if(c)for(b=a.columns.length;b--;)if(a.columns[b].field==c)return!0;return!1}
function eja(a,b){var c=a.Jd;a.Jd=b;cja(a,b);var d=Yy.test(b);b=Xy.test(b);c=Yy.test(c)||Xy.test(c);if(d||b||c){c=a.La();var e=vz(wz.s(),a.D());e={fu:e.arrowSize,gu:e.arrowUnits,hu:e.lobBearingColumn,So:e.lobBearingError,iu:e.lobBearingErrorColumn,su:e.lobColumnLength,length:e.lobLength,Aq:e.lobLengthType,Qv:e.lobLengthColumn,Tv:e.lobLengthUnits,zq:e.lobLengthError,Rv:e.lobLengthErrorColumn,Sv:e.lobLengthErrorUnits,MA:e.showArrow,NA:e.showEllipse,OA:e.showError};for(var f=0,h=c.length;f<h;f++){var k=
[c[f].Z()];d&&(xy(c[f]),k.push(c[f].get("ellipse")));b&&zy(c[f],!0,e);tz(a,c[f])}}}var BK=Ok();function tz(a,b){if(b){var c=b.Ib();c=Array.isArray(c)?c:[c];BK[0]=Infinity;BK[1]=Infinity;BK[2]=-Infinity;BK[3]=-Infinity;for(var d=0,e=c.length;d<e;d++){var f=(0,c[d].Re)(b);f&&(f=To(f))&&Yk(BK,f)}al(BK)||(J(b)in a.Ab.g?a.Ab.update(BK,b):a.Ab.Bf(BK,b))}}g=Rz.prototype;
g.eB=function(a){return!Yy.test(a)||AK(this,"RADIUS")||AK(this,"SEMI_MAJOR")&&AK(this,"SEMI_MINOR")||AK(this,"SEMI_MAJOR (nmi)*")&&AK(this,"SEMI_MINOR (nmi)*")?!0:!1};g.Jv=function(a){return!Yy.test(a)&&!$y.test(a)&&!Xy.test(a)};
function cja(a,b){var c=qj.s(),d=Ia();0<a.columns.length&&Yy.test(b)&&(AK(a,"SEMI_MAJOR (nmi)*")&&AK(a,"SEMI_MINOR (nmi)*")||AK(a,"RADIUS")?!(0==a.Hk||3E5<d-a.Hk)||AK(a,"SEMI_MAJ_UNITS")&&AK(a,"SEMI_MINOR_UNITS")||AK(a,"RADIUS")||(rj(c,"The "+b+" style assumes that the SEMI_MAJOR, SEMI_MINOR or RADIUS/CEP fields are in nautical miles. If the values are greater than or equal to 250, they are assumed to be in meters.",Th,a.log,1),a.Hk=d):rj(c,"The "+b+" style assumes that the SEMI_MAJOR & SEMI_MINOR fields or RADIUS/CEP exist. If not, a point will be shown instead.",
Rh,a.log,1))}g.D=function(){return this.ma};g.ga=function(a){if(this.ma!==a){var b=this.ma;this.ma=a;this.dispatchEvent(new K("id",a,b))}};g.ob=function(){return this.qf};
g.Wa=function(a){if(this.qf!==a){var b=this.qf;this.qf=a;this.dispatchEvent(new K(MH,a,b));b=IJ.s();if(a){var c=this.D(),d=this.S(),e=!pc(b.g);b.g[c]?(E.ta(b.log,"Incrementing load count for task ID: "+c),b.g[c].count++):(E.ta(b.log,"Adding new loading task with ID: "+c),d=new HJ(c,d),d.count++,b.g[c]=d,b.dispatchEvent(new GJ("load:add",d)));e||e===!pc(b.g)||b.dispatchEvent(new K("loadingManager:loading",!0,!1))}else if(c=this.D(),e=b.g[c])E.ta(b.log,"Decrementing load count for task ID: "+c),e.count--,
0>=e.count&&(E.ta(b.log,"Removing load task with ID: "+c),delete b.g[c],b.dispatchEvent(new GJ("load:remove",e))),!pc(b.g)||b.dispatchEvent(new K("loadingManager:loading",!1,!0));!a&&this.U&&(this.U.start(),this.dispatchEvent("load"))}};g.Ja=function(){var a=vz(wz.s(),this.D());return Iy(a)||"rgba(255,255,255,1)"};function fja(a,b){var c=a.Eb;a.Eb=b;a.dispatchEvent(new K("altitude",b,c))}g.gj=function(){return this.Is};g.vh=function(a){var b=this.I;this.I=a;this.dispatchEvent(new K("lock",a,b))};
g.qk=function(){return this.tf};g.eg=function(){return this.sf};g.S=function(a){var b=L.s().W(this.D());return(a=!a&&b?b.cg():"")?this.j+" "+a:this.j};g.Ta=function(a){if(this.j!==a){var b=this.j;this.j=a;this.dispatchEvent(new K("title",a,b))}};g.Xn=function(a){this.aa!==a&&(this.aa=a,gja(this),this.dispatchEvent(new K(QI)))};function CK(a,b){(a.sa=b)||a.ia();a.g&&(b?(a.g.setMap(null),Dc(function(){DK(this,void 0,this.g.La())},a)):(DK(a,a.g.La()),a.g.setMap(L.s().X()),a.g.ia()))}
function EK(a,b){a.Qc!==b&&(a.Qc=b,gja(a),FK(a),a.dispatchEvent(new K("timeEnabled",b,!b)))}function GK(a,b,c){(b=b||TF)&&a.O!=b&&(a.O=b,(null!=c?c:1)&&a.o&&xg(a.o,b,!1,!1))}function wF(a,b){a.nd!=b&&(a.nd=b,a.dispatchEvent(new K("timeFilter",b,!b)))}g.sq=function(){return!1};
function gja(a){if(a.aa&&a.Qc){var b=a.u.ka;GK(a,b?b.l:TF,!1);if(!a.g){var c=L.s().W(a.D());b=c.Nb();c=c.Ac();a.g=new EJ({map:a.sa?null:L.s().X(),opacity:b,zIndex:c});a.dispatchEvent(new K(SI,!0));for(var d in a.pa)if(b=a.pa[d])b.l(b),hja(a,b)}a.u.H("timeline.show",a.Pk,!1,a);a.u.H("timeline.play",a.cn,!1,a);a.u.H("timeline.stop",a.cn,!1,a)}else GK(a,TF),a.u.M("timeline.show",a.Pk,!1,a),a.u.M("timeline.play",a.cn,!1,a),a.u.M("timeline.stop",a.cn,!1,a),bja(a)}
g.ly=function(a){var b=a.start,c=a.end,d=a.interval;if(0<d){var e=this.o;if(e&&this.yb()&&this.Qc){var f={},h=e.aa;for(b=Math.floor(b/d)*d;b<=c;){var k=b+d,l=xg(e,new qg(b,k),!1,!0).length;f[b]=l;b=k}h&&xg(e,h,!1,!0);if(0<gc(f))return c=new DJ,c.ga(this.D()),d=ef(this.Ja()),c.u=d,c.g=f,c.l=a,c.Ta(this.S()),c.dc(this.yb()),c.Ud(e.B||ug),c}}return null};g.Au=function(a){return new AJ(this,a)};Rz.prototype.createHistogram=Rz.prototype.Au;
Rz.prototype.fp=function(a,b){b=new wJ(b);pia(b,a||this.Au());return b};Rz.prototype.createColorModel=Rz.prototype.fp;Rz.prototype.aE=function(){return this.G};Rz.prototype.getColorModel=Rz.prototype.aE;function BJ(a,b){b!==a.G&&(a.G&&(a.G.dispose(),a.G=null),a.G=b,a.G&&a.G.H("propertychange",a.xH,!1,a),a.dispatchEvent(new K("colorModel")))}g=Rz.prototype;g.xH=function(a){"style"===a.j&&(this.dispatchEvent(new K("style")),this.ia())};
g.Rn=function(){this.o&&(this.Ca={},this.o.clear(),this.o.add(this.La()),FK(this),this.dispatchEvent(new K("timeModel")))};g.Zd=function(a){if(this.yb()){var b=!this.nd||this.u.Bd(),c=(a=null!=a?a:b)?TF:this.O,d=xg(this.o,c,!0);a!=b&&(c=b?TF:this.O,xg(this.o,c,!0));return d}return[]};g.Xe=function(a){return!this.ka["string"==typeof a?a:a.ma]};g.yb=function(){return this.visible};g.dc=function(a){a!==this.visible&&(this.visible=a,FK(this),zK(this),this.dispatchEvent(new K("visible",a,!a)))};g.cc=function(a){this.zc([a])};
g.zc=function(a){this.clearQueue();if(a&&0<a.length){yK(this);var b=vF(kF.s()),c=CH();b+a.length>=c&&(a.length=Math.max(c-b,0),sfa(c));this.Hc+=a.length;this.Ia={};b=0;for(c=a.length;b<c;b++)a[b].hc=!1,this.Hs(a[b]),a[b].hc=!0;this.dispatchEvent(new K("preprocessFeatures",a));this.U&&(this.ib=this.ib.concat(a),this.sa&&this.ob()||this.U.start());b=this.Ab;this.Ab=null;Rz.C.zc.call(this,a);this.Ab=b}};
g.Bb=function(a,b){var c=J(a).toString();c in this.Xc?delete this.Xc[c]:!b&&this.Ab&&this.Ab.remove(a);this.ki(a);this.ia()};g.Ge=function(a){for(var b=1E4<a.length,c=0,d=a.length;c<d;c++)try{this.Bb(a[c],b)}catch(k){}if(b&&this.Ab){d=[];var e=[],f=[],h=this.La();c=0;for(b=h.length;c<b;c++)a=h[c],void 0!==this.Uc[a.ma.toString()]&&e.push(a);c=0;for(b=e.length;c<b;c++)if(a=e[c],h=a.Z())h=h.Y(),d.push(h),f.push(a);this.Ab.clear();this.Ab.load(d,f)}};
g.ki=function(a){if(a){this.U&&this.U.isActive()&&Gh(this.U);this.Hc=Math.max(this.Hc-1,0);a.hc=!1;var b=a.ma;this.ka[b]=void 0;a instanceof Ry&&(ija(this,a),a.g(a,!0),this.pa[b]=void 0);a.hc=!0;this.pb&&(this.jg.push(a),b=this.pb,b.isActive()||b.start(void 0));b=J(a).toString();this.Xf[b].forEach(sf);this.Xf[b]=void 0;void 0!==a.ma?this.Uc[a.ma.toString()]=void 0:this.jf[b]=void 0}};g.dg=function(){return this.Hc};
g.Hs=function(a){void 0===a.ma&&a.ga(J(a));var b=a.ma;this.ka[b]=!0;a.la.sourceId=this.D();var c=a.Z();if(c){c.Y().some(isNaN)&&a.tb(null);var d=c.T();"Point"===d?(Yy.test(this.Jd)&&xy(a),Ay(a)):"LineString"===d||"MultiLineString"===d?(c.toLonLat(),c=oq(c),Ap(c),a.tb(c)):c.get("_normalized")||(c.toLonLat(),kq(c),Ap(c))}Ps(a);null==a.la.ID&&(a.la.ID=b);null==a.la.showLabels&&(a.la.showLabels=!1);a instanceof Ry&&(this.pa[b]=a,this.g&&(a.l(a),hja(this,a)));sz(a,this);tz(this,a);this.hB&&jja(this,a)};
function jja(a,b){b.Xb().forEach(function(a){var c=b.la[a],e=typeof c;""===c?e="empty":"number"===e?e=Math.floor(c)===c?"integer":"decimal":"string"===e&&Aq.test(String(c))&&(c=parseFloat(c),e=Math.floor(c)===c?"integer":"decimal",b.la[a]=c);a in this.Ia||(this.Ia[a]={});e in this.Ia[a]||(this.Ia[a][e]=0);this.Ia[a][e]++},a)}g.wJ=function(){var a=this.ib;this.ib=[];a&&0<a.length&&this.Fs(a)};
g.Fs=function(a){E.ta(this.log,this.S()+" processing "+a.length+" new features.");if(!this.lj&&0<a.length){for(var b=!1,c,d=0;d<a.length;d++){c=a[d];c=c.la;for(var e in c)AK(this,e)||Px(e)?"recordTime"!==e||AK(this,"recordTime")||AK(this,"TIME")||(PJ(this,"recordTime","TIME"),b=!0):(PJ(this,e),b=!0)}b&&dja(this)}this.o&&(this.o.add(a),b=this.o.B||ug,this.tf=b.Sa(),this.sf=b.Ya());this.Ca={};zK(this);this.dispatchEvent(new K(LI,a));this.g&&this.u.ka&&this.Pk(this.u.ka);(a=Ww.s())&&$w(a,"v1541734487/onboarding/features.json")};
g.tK=function(){var a=this.jg;this.jg=[];if(a&&0<a.length){E.ta(this.log,this.S()+" unprocessing "+a.length+" features.");this.Ca={};this.ka=Yh(this.ka);this.Uc=Yh(this.Uc);this.jf=Yh(this.jf);this.pa=Yh(this.pa);this.cb=Yh(this.cb);HK(this,a,!0);if(this.o){var b=this.o,c=this.La();b.clear();b.add(c);b=this.o.B||ug;this.tf=b.Sa();this.sf=b.Ya()}zK(this);this.g&&this.u.ka&&this.Pk(this.u.ka);this.dispatchEvent(new K(LI,void 0,a))}};function yK(a){a.pb&&a.pb.isActive()&&Gh(a.pb)}
g.Pk=function(a){this.aa&&(this.Cf=this.O,GK(this,a.l,!1),FK(this),zK(this),!this.u.Bd()&&this.nd&&this.dispatchEvent(new K(QI)))};g.cn=function(){this.nd&&this.dispatchEvent(new K(QI))};g.Ku=function(){if(!this.u.O&&this.BB&&this.g){var a=this.g.La();Qy(a,1,this);this.sa&&DK(this,void 0,this.g.La())}this.BB=this.u.O};
function FK(a){if(a.g)if(a.visible){var b,c;var d=c=b=TF;var e=a.O.Sa(),f=a.O.Ya();var h=.25*(f-e);var k=!1;a.u.O&&a.Cf!=TF&&(a.Cf.Ya()<a.O.Ya()?(b=new qg(a.O.Sa()-h,a.O.Sa()),c=new qg(b.Sa()-h,b.Sa()),d=new qg(c.Sa()-h,c.Sa()),e=d.Sa(),k=!0):a.Cf.Sa()>a.O.Sa()&&(b=new qg(a.O.Ya(),a.O.Ya()+h),c=new qg(b.Ya(),b.Ya()+h),d=new qg(c.Ya(),c.Ya()+h),f=d.Ya(),k=!0));a.u.Bd()?(h=a.O.toISOString(),h in a.Ca||(a.Ca[h]=xg(a.o,a.O,!0)),h=a.Ca[h]):h=xg(a.o,a.O,!0);k&&(k=a.g.La(),Qy(k,1,a),b=xg(a.o,b),c=xg(a.o,
c),d=xg(a.o,d),Qy(b,.75,a),Qy(c,.5,a),Qy(d,.25,a),h=h.concat(b,c,d));d=!1;for(var l in a.pa)if(c=a.pa[l])d=!0,(b=c.get("recordTime"))&&(b.Sa()>f||b.Ya()<e)&&!a.Xe(c)&&h.push(c);a.sa&&(DK(a,void 0,a.g.La()),DK(a,a.g.La(),h));Mx(a.g,h);for(l in a.pa)(c=a.pa[l])&&c.o(c,f);d&&a.dispatchEvent(new K("data"))}else Mx(a.g,void 0),a.sa&&DK(a,a.La(),[])}
function DK(a,b,c){var d={};if(b)for(var e=0,f=b.length;e<f;e++)d[b[e].ma]=!1;if(c)for(e=0,f=c.length;e<f;e++)b=c[e].ma,b in d&&!a.u.O?delete d[b]:d[b]=!0;a.dispatchEvent(new K(RI,d))}function bja(a){if(a.g){var b=!1,c;for(c in a.pa){var d=a.pa[c];d&&(b=!0,ija(a,d),d.g(d,void 0))}a.cb={};b&&a.dispatchEvent(new K("data"));a.u&&a.u.O&&(b=a.La(),Qy(b,1,a),a.sa&&DK(a,void 0,a.g.La()));a.g.dispose();a.g=null;a.Ca={};a.dispatchEvent(new K(SI,!1))}}
function hja(a,b){var c=b.ma;if(b.Z()){var d=a.cb[c];d&&sf(d);a.cb[c]=H(b,"propertychange",a.cI,a)}}function ija(a,b){b=b.ma;var c=a.cb[b];c&&(sf(c),a.cb[b]=void 0)}g.cI=function(a){a instanceof K&&"change:originalGeometry"===a.j&&(a=a.target)&&(a.g(a,!0),FK(this))};
function IK(a,b){if(b!==a.fj){var c=a.fj;if(c){for(var d=0,e=c.length;d<e;d++)c[d].set("_highlightStyle",null);uz(c,a)}if(a.fj=b){var f=!1;0<b.length&&(f=(d=Hy(b[0],a))?d.replaceStyle:!1);d=0;for(e=b.length;d<e;d++){var h=b[d].get("_customHighlightStyle");b[d].set("_highlightStyle",f?dz:h||dz)}uz(b,a)}a.dispatchEvent(new K(PI,b,c,a));a.ia()}}
g.If=function(a){var b=a.getContext();if(b&&tH){b=q(b)?b:[b];for(var c=[],d=0,e=b.length;d<e;d++)if(a.type==vK){var f=b[d].feature;f&&this.Uc[f.ma]&&c.push(f)}else(f=b[d].geometry)&&(c=c.concat(TB(this,f)));if(0<c.length)switch(a.type){case sK:JK(this,c);break;case tK:KK(this,c);break;case uK:HK(this,c);break;case vK:case wK:c&&this.Ge(c)}}};g.om=function(a){return this.yb()?Rz.C.om.call(this,a):[]};
function TB(a,b,c){var d=b.Y(),e=!1;if(!c)if(a.aa&&a.Qc)c=a.Zd(!1);else switch(c=a.om(d),b.T()){case "LineString":e=b.getCoordinates();e=$p(e,d);break;case "Polygon":e=b.getCoordinates(),e=1==e.length&&$p(e[0],d)}var f=[];if((b=kv(jv.s(),b))&&0<c.length){var h=b.getCoordinates().length;if(100<h){var k=c.length;d=Math.max(bl(d),cl(d))*(1E5<k?.01:5E4<k?.005:1E4<k?.0025:0);0<d&&(E.ta(a.log,"Simplifying geometry with "+h+" vertices and threshold "+d),b=jsts.simplify.DouglasPeuckerSimplifier.simplify(b,
d),E.ta(a.log,"New geometry: "+b.getCoordinates().length+" vertices"))}h=[];if("MultiPolygon"==b.getGeometryType())for(k=b.getNumGeometries(),d=0;d<k;d++){var l=b.getGeometryN(d);l&&h.push(l)}else h.push(b);d=0;for(k=h.length;d<k;d++){l=h[d].getCoordinates();h[d].nVert=l.length;h[d].vertX=[];h[d].vertY=[];for(var m=0;m<h[d].nVert;m++)h[d].vertX.push(l[m].x),h[d].vertY.push(l[m].y)}d=0;for(k=c.length;d<k;d++)(h=c[d].Z())&&LK(a,b,h,e)&&f.push(c[d])}return f}
function LK(a,b,c,d){var e=!1;switch(c.T()){case "GeometryCollection":if(d=c.g){c=0;for(var f=d.length;c<f;c++){var h=d[c];if(h&&LK(a,b,h,!1)){e=!0;break}}}break;case "MultiPoint":if(d=kp(c))for(c=0,f=d.length;c<f;c++)if((h=d[c])&&LK(a,b,h,!1)){e=!0;break}break;case "MultiPolygon":if(d=yp(c))for(c=0,f=d.length;c<f;c++)if((h=d[c])&&LK(a,b,h,!1)){e=!0;break}break;case "LineString":case "LinearRing":case "Polygon":case "Circle":case "MultiLineString":c=kv(jv.s(),c);e=null!=c&&(b.contains(c)||b.crosses(c)||
b.overlaps(c));break;case "Point":a=c.flatCoordinates[0];h=c.flatCoordinates[1];var k=[];if("MultiPolygon"==b.getGeometryType())for(f=b.getNumGeometries(),c=0;c<f;c++){var l=b.getGeometryN(c);l&&k.push(l)}else k.push(b);c=0;for(f=k.length;c<f;c++){if(!(b=d)){b=k[c].vertX;e=k[c].vertY;l=k[c].nVert;for(var m=!1,n=0,p=l-1;n<l;p=n++)e[n]>h!=e[p]>h&&a<(b[p]-b[n])*(h-e[n])/(e[p]-e[n])+b[n]&&(m=!m);b=m}if(b){e=!0;break}e=!1}}return e}g.rq=function(a){return("object"==typeof a?a.id:a)in this.Vb};
g.Nu=function(a){this.La().forEach(a,void 0)};function KK(a,b){q(b)||(b=[b]);if(a.ee!==b){var c=a.ee.slice();a.ee.length=0;for(var d=c.length;d--;)kja(a,c[d]);if(b&&0<b.length)for(d=b.length;d--;)a.select(b[d]);uz(c,a);uz(a.ee,a);a.dispatchEvent(new K(OI,a.ee,c));a.ia()}}function JK(a,b){q(b)||(b=[b]);if(b&&0<b.length){for(var c=[],d=0,e=b.length;d<e;d++){var f=b[d];a.select(f)&&c.push(f)}0<c.length&&(uz(c,a),a.dispatchEvent(new K(MI,c)),a.ia())}}
function HK(a,b,c){q(b)||(b=[b]);if(b&&0<b.length){for(var d=[],e=0,f=b.length;e<f;e++){var h=b[e];kja(a,h)&&d.push(h)}0<d.length&&(!0!==c&&uz(d,a),a.dispatchEvent(new K(NI,d)),a.ia())}}g.selectAll=function(){for(var a=[],b=this.Zd(),c=0,d=b.length;c<d;c++)this.select(b[c])&&a.push(b[c]);0<a.length&&(uz(a,this),this.dispatchEvent(new K(MI,a)),this.ia())};
function xK(a){var b=a.ee.length;if(0<b){var c=a.ee.slice();a.ee.length=0;for(a.Vb={};b--;)c[b].set("_selectStyle",null);uz(c,a);a.dispatchEvent(new K(NI,c));a.ia()}}g.select=function(a){if(a){var b=a.id;if(null!=b&&!this.Vb[b]&&null!=a.ma&&this.Uc[a.ma]&&this.ka[a.ma])return zb(this.ee,a,Vy),this.Vb[b]=!0,a.set("_selectStyle",cz),!0}return!1};
function kja(a,b){if(b){var c=b.id;if(null!=c&&a.Vb[c]){var d=a.ee,e=vb(d,Vy||xb,!1,b);0<=e&&nb(d,e);delete a.Vb[c];b.set("_selectStyle",null);return!0}}return!1}function MK(a,b){q(b)||(b=[b]);a.yo(b,!1)}g.wl=function(a){q(a)||(a=[a]);this.yo(a,!0)};function lja(a){var b=a.ka;return a.La().filter(function(a){return a&&!b[a.ma]})}function mja(a){return a.Zd().filter(function(a){return a&&!this.rq(a)},a)}
g.yo=function(a,b){for(var c=[],d=[],e=b,f=0,h=a.length;f<h;f++){var k=a[f],l=k.ma;null!=l&&b!=this.ka[l]&&(this.ka[l]=b,b?k.la._lastShowLabels&&(Ny(k),k.la._lastShowLabels=void 0,e=!0):(My(k)&&(e=k.la._lastShowLabels=!0),d.push(k)),c.push(k))}0<d.length&&HK(this,d);0<c.length&&(this.o&&(this.o.yr("hidden",this.Xe.bind(this)),this.o.Tk("hidden",!1),this.Ca={},FK(this)),e&&zK(this),this.dispatchEvent(new K(QI,c)))};function zK(a){(a=vz(wz.s(),a.D()))&&a.labels&&a.showLabels&&VB()}
function nja(a,b){var c=a.gc;a.gc=b;a.dispatchEvent(new K("uniqueId",b,c))}g.ra=function(a){a=a||{};a.shapeName=this.Jd;a.centerShapeName=this.Sf;a.timeEnabled=this.Qc;a.altitudeMode=this.Eb;a.refreshInterval=this.Ea;this.gc&&(a.uniqueId=this.gc.ra());this.G&&(a.colorModel=this.G.ra());return a};
g.restore=function(a){a.shapeName&&eja(this,a.shapeName);a.centerShapeName&&(this.Sf=a.centerShapeName);void 0!=a.timeEnabled&&EK(this,a.timeEnabled);void 0!=a.altitudeMode&&fja(this,a.altitudeMode);a.refreshInterval&&this.ef(a.refreshInterval);if(a.colorModel){var b=this.fp();b.restore(a.colorModel);BJ(this,b)}a.uniqueId&&(b=new Wv,b.restore(a.uniqueId),nja(this,b));a.detectColumnTypes&&(this.hB=a.detectColumnTypes)};function NK(a){Rz.call(this,a);this.log=oja;this.yf=!0;this.l=this.B=null;this.Us=0;this.ws=!1;N.H(Qx,this.Dy,!1,this)}w(NK,Rz);F(NK,"os.source.IImportSource");jg["os.source.Request"]=NK;var oja=E.V("os.source.Request");g=NK.prototype;g.clear=function(){this.zj();this.B&&this.B.reset();NK.C.clear.call(this)};g.J=function(){NK.C.J.call(this);N.M(Qx,this.Dy,!1,this);OK(this,null);this.pi(null)};g.Dy=function(){this.zj()};g.zj=function(){this.ob()&&(this.Wa(!1),this.l&&this.l.abort())};
function PK(a){if(a.l&&!a.I){5E4<a.dg()?a.clear():a.Df=a.La().slice();a.zj();a.Us=Ia();a.Wa(!0);try{a.l.load(!1),a.ws&&a.vh(!0)}catch(b){QK(a,"There was an error loading the request. Please see the log for more details.")}}}g.vh=function(a){var b=this.I;NK.C.vh.call(this,a);b&&!a&&this.refresh();this.ws=!1};g.refresh=function(){this.I||(this.B&&this.B.reset(),this.l&&PK(this))};g.Mr=function(){return this.B};
g.pi=function(a){a!==this.B&&(this.B&&(this.B.M(RK,this.tn,!1,this),this.B.M("complete",this.sn,!1,this),this.B.reset()),this.B=a)&&(this.B.H(RK,this.tn,!1,this),this.B.H("complete",this.sn,!1,this))};function OK(a,b){b!==a.l&&(a.l&&(a.l.M("success",a.lr,!1,a),a.l.M("error",a.xx,!1,a),a.ob()&&a.Wa(!1),a.l.dispose()),a.l=b,a.l&&(a.l.H("success",a.lr,!1,a),a.l.H("error",a.xx,!1,a)))}
g.lr=function(a){var b="Request complete for "+this.S()+pja(this)+qja(this);E.info(this.log,b);a=a.target;b=a.g;Ri(a);rja(this,b)};g.xx=function(){QK(this,"There was an error loading the data source: "+this.l.u.join(" "))};function QK(a,b){rj(qj.s(),b,Qh);E.error(a.log,b,void 0);a.Wa(!1)}function rja(a,b){a.B?(a.Wa(!0),SK(a.B,b)):(b='No importer set on source "'+a.S()+'"!',QK(a,b))}g.tn=function(){this.B&&this.zc(this.B.getData())};
g.sn=function(a){this.tn(a);this.Wa(!1);a="Import complete for "+this.S()+pja(this)+qja(this);E.info(this.log,a)};function qja(a){var b=Ia(),c=" in "+$F(new Date(b-a.Us));a.Us=b;return c}function pja(a){var b="";a.l&&a.l.j&&(b+=" ("+a.l.j.toString()+")");return b};function TK(a,b){this.scope=a;this.element=b;this.scope&&this.scope.items&&0<this.scope.items.length&&this.g(null,this.scope.items[0].data);this.scope.$on("os.ui.feature.FeatureInfoCtrl.updateTabs",this.g.bind(this));this.scope.$on("$destroy",t(this.destroy,this))}TK.prototype.destroy=function(){this.element=this.scope=null};Q.directive("descriptiontab",[function(){return{restrict:"E",scope:!1,replace:!0,templateUrl:"v1541734487/views/feature/tab/descriptiontab.html",controller:UK,controllerAs:"descctrl"}}]);function UK(a,b){TK.call(this,a,b)}w(UK,TK);UK.$inject=["$scope","$element"];
UK.prototype.g=function(a,b){b&&b&&(b=b.Yb(),(a=b._htmlDescription)||(a=oc(b,function(a,b){return Rx.test(b)&&!Hb(Tb(a))})||""),null!=a&&""!=a&&(a=a.replace(/<a /g,'<a target="_blank" '),b=this.element.find("iframe")[0]))&&(b=b.contentWindow.document,b.open(),b.write(a),b.close())};function VK(a){this.g=a}VK.prototype.S=function(){return this.g};VK.prototype.j=function(){return this.g};Q.directive("featureinfocell",[function(){return{restrict:"E",scope:{property:"="},replace:!0,templateUrl:"v1541734487/views/feature/featureinfocell.html",controller:WK,controllerAs:"cell"}}]);
function WK(a,b,c){this.v=a;this.L=b;this.j=c;this.g="";b=this.v.property;c=b.value;this.v.type="";c&&(this.v.ca=new VK(b.field),this.v.actions=xx.s().Qi(null,this.v.ca,c),"PROPERTIES"==b.field&&"object"===typeof c?this.v.type="prop":0<this.v.actions.length?(this.v.type="ca",1==this.v.actions.length&&(this.v.action=this.v.actions[0].mm(c),this.v.description=this.v.actions[0].qb())):Rx.test(b.field)?this.v.type="desc":(this.g=this.v.property.value,this.v.property.value=this.j.trustAsHtml("<span>"+
yx(c)+"</span>"),this.L.parent().dblclick(this.l.bind(this))));a.$on("$destroy",this.o.bind(this))}WK.$inject=["$scope","$element","$sce"];WK.prototype.o=function(){this.j=this.L=this.v=null};WK.prototype.ot=function(){this.v.$emit("os.ui.feature.FeatureInfoCtrl.showDescription")};WK.prototype.showDescription=WK.prototype.ot;WK.prototype.XO=function(){var a=this.v.property.feature,b=a.get("PROPERTIES");a=a.get("ID");b instanceof Object&&"string"===typeof a&&OJ(a,b)};WK.prototype.viewProperties=WK.prototype.XO;
WK.prototype.vM=function(){wx(this.v.actions,this.v.property.value,this.v.ca)};WK.prototype.pickColumnAction=WK.prototype.vM;WK.prototype.l=function(){ND(this.g)};Q.directive("propertiestab",[function(){return{restrict:"E",replace:!0,scope:!1,templateUrl:"v1541734487/views/feature/tab/propertiestab.html",controller:XK,controllerAs:"propctrl"}}]);function XK(a,b){a.columnToOrder="field";a.reverse=!1;a.selected=null;TK.call(this,a,b)}w(XK,TK);XK.$inject=["$scope","$element"];
XK.prototype.g=function(a,b){if(b&&(this.scope.properties=[],b)){a=b.Yb();var c=b.get("recordTime");c&&(this.scope.properties.push({id:"TIME",field:"TIME",value:c}),delete a.TIME);for(var d in a)"GEOTAG"===d?this.scope.properties.push({id:"GEOTAG",field:"GEOTAG",value:a.sourceId,CX:!0}):"PROPERTIES"===d?this.scope.properties.push({id:d,field:d,value:a[d],feature:b}):!Px(d)&&$h(a[d])&&this.scope.properties.push({id:d,field:d,value:a[d]})}this.order()};
XK.prototype.order=function(a){a&&(a===this.scope.columnToOrder?this.scope.reverse=!this.scope.reverse:this.scope.columnToOrder=a);var b=this.scope.columnToOrder,c=this.scope.reverse;this.scope.properties.sort(function(a,e){return Lb(a[b].toString(),e[b].toString())*(c?-1:1)})};XK.prototype.order=XK.prototype.order;XK.prototype.select=function(a,b){this.scope.selected=this.scope.selected==b&&a.ctrlKey?null:b};XK.prototype.select=XK.prototype.select;function sja(a,b,c,d,e){this.id=a;this.label=b;this.icon=c;this.template=d;this.data=e||null};function YK(a,b,c,d,e,f){sja.call(this,a,b,c,d,e);this.isShown=!0;this.enableFunc=f}w(YK,sja);function tja(){this.registeredTabs=uja}xa(tja);var uja=[new YK("props","Properties","fa-th","propertiestab"),new YK("desc","Description","fa-newspaper-o","descriptiontab",null,function(a){if(a){a=a.Yb();var b=a._htmlDescription;b||(b=oc(a,function(a,b){return Rx.test(b)&&!Hb(Tb(a))})||"");if(null!=b&&""!=b)return!0}return!1})];Q.directive("featureinfo",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/feature/featureinfo.html",controller:ZK,controllerAs:"info"}}]);
function ZK(a,b){x.call(this);this.scope=a;this.tabs=tja.s().registeredTabs;this.numTabsShown=1;this.getUi=t(this.j,this);this.element=b;this.g=null;vja(this);au.s().H("propertychange",this.El,!1,this);N.H("feature:valueChange",this.Ty,!1,this);a.$watch("items",this.BL.bind(this));a.$on("os.ui.feature.FeatureInfoCtrl.showDescription",this.ot.bind(this));a.$on("$destroy",this.dispose.bind(this))}w(ZK,x);ZK.$inject=["$scope","$element"];g=ZK.prototype;
g.J=function(){ZK.C.J.call(this);this.g&&(sf(this.g),this.g=null);au.s().M("propertychange",this.El,!1,this);N.M("feature:valueChange",this.Ty,!1,this);this.scope=this.element=null};g.Ty=function(a){if(a&&this.scope){var b=this.scope.items[0];b&&b.id===a.id&&(this.El(),$K(this),R(this.scope))}};g.oI=function(){this.El();$K(this);R(this.scope)};g.BL=function(a){this.Xa()||(this.g&&(sf(this.g),this.g=null),this.El(),$K(this),a&&(a=a[0])&&(this.g=H(a,"change",this.oI,this)),R(this.scope))};
g.El=function(){if(this.scope){this.scope.lon=void 0;this.scope.lat=void 0;this.scope.alt=void 0;var a=this.scope.items[0];if(a&&(a=a.Z(),a instanceof hp&&(a=Bo(a),(a=Ml(a,S))&&1<a.length&&(this.scope.lon=a[0],this.scope.lat=a[1],2<a.length)))){var b=au.s();this.scope.alt=du(b,a[2],2)}}};g.Zs=function(a){this.scope.activeTab=a};ZK.prototype.setActiveTab=ZK.prototype.Zs;function vja(a){0<a.tabs.length&&a.Zs(a.tabs[0])}ZK.prototype.j=function(a){a.data=this.scope.items[0];return a.template};
function $K(a){for(var b=0,c=a.scope.items[0],d=0;d<a.tabs.length;d++){var e=a.tabs[d];null!=e.enableFunc&&(e.isShown=e.enableFunc.call(e,c));e.isShown&&b++}a.numTabsShown=b;!1===a.scope.activeTab.isShown&&vja(a);a.scope.$broadcast("os.ui.feature.FeatureInfoCtrl.updateTabs",c)}ZK.prototype.ot=function(){var a=this.tabs.findIndex(function(a){return"desc"==a.id});-1<a&&this.Zs(this.tabs[a])};Q.directive("multifeatureinfo",[function(){return{restrict:"E",replace:!0,scope:{features:"="},templateUrl:"v1541734487/views/feature/multifeatureinfo.html",controller:aL,controllerAs:"multiCtrl"}}]);
function aL(a,b){x.call(this);this.scope=a;this.element=b;this.g=new Fh(this.o,250,this);this.term=null;b=new Wv("Time","recordTime");var c=new Wv;c.id="_color";c.field="COLOR";c.internal=!0;c.focusable=!1;c.cssClass="color";c.formatter=ifa;c.resizable=!1;c.selectable=!1;c.sortable=!1;c.visible=!0;c.width=20;c.minWidth=20;c.maxWidth=20;this.columns=[c,b];this.options={dataItemColumnValueExtractor:this.l.bind(this),multiColumnSort:!0,multiSelect:!1,defaultFormatter:Bx,enableAsyncPostRender:!0,forceFitColumns:!0};
this.getUi=this.j.bind(this);a.selected=null;a.features&&(a.features.sort(Bfa),a.selected=a.features[0],a.filteredFeatures=a.features.slice());a.$on("$destroy",this.dispose.bind(this))}w(aL,x);aL.$inject=["$scope","$element"];aL.prototype.J=function(){aL.C.J.call(this);z(this.g);this.scope=this.element=null};aL.prototype.j=function(){if(this.scope.selected){var a=Dy(this.scope.selected);if(a&&a instanceof Vz)return a.pb||"featureinfo"}return"featureinfo"};aL.prototype.search=function(){this.g.start()};
aL.prototype.search=aL.prototype.search;aL.prototype.o=function(){var a=[];a=this.term?this.scope.features.filter(function(a){for(var b in a.la){var d=a.la[b];if(d)try{var e=String(d);if("string"===typeof e&&Qb(e.toLowerCase(),this.term.toLowerCase()))return!0}catch(f){}}},this):this.scope.features.slice();this.scope.filteredFeatures=a;R(this.scope)};aL.prototype.l=function(a,b){return"_color"==b.id?((a=Gy(a,this.source))&&(a=ef(a)),a||"#ffffff"):a.la[b.field||b]||"No time"};
function bL(a,b){a=q(a)?a:[a];fx({id:"featureInfo",label:b||"Feature Info",icon:"fa fa-map-marker",key:"featureinfo",x:"center",y:"center",width:600,"min-width":500,"max-width":0,height:350,"min-height":200,"max-height":0,"show-close":!0},'<multifeatureinfo features="features"></multifeatureinfo>',void 0,void 0,void 0,{features:a})};function cL(a,b,c){Tz.call(this,a,b,c)}w(cL,Tz);cL.prototype.nh=function(a){return a?vz(wz.s(),a.D()):null};cL.prototype.g=function(){var a=Fy.N(this.Oa);uz(a.La());a.u.O&&FK(a)};cL.prototype.finish=function(){var a=L.s().W(this.Oa);Gz(a)};function dL(a,b,c){Tz.call(this,a,b,c);this.title="Change Center Style";this.qa="layers.features.changeVectorCenterShape#"+(b?b.replace(/ /g,"_"):"Unknown")}w(dL,cL);dL.prototype.j=function(){var a,b=Fy.N(this.Oa);b&&(a=b.Sf);return a||"Point"};dL.prototype.g=function(a,b){var c=Fy.N(this.Oa);c&&b&&(c.Sf=b,"Icon"!=b||kz(a)||lz(a,HB()));dL.C.g.call(this,a,b)};dL.prototype.finish=function(a){Fy.N(this.Oa).dispatchEvent(new K(UI,this.value,this.oldValue));dL.C.finish.call(this,a)};function eL(a,b,c){Tz.call(this,a,b,c);this.title="Change Color";this.qa="layers.features.changeVectorColor";!b&&(a=L.s().W(this.Oa))&&(b=(b=a.Va())&&b.baseColor||"rgba(255,255,255,1)");this.value=hz(b)}w(eL,cL);eL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a?Iy(a):"rgba(255,255,255,1)"};eL.prototype.g=function(a,b){var c=hz(b);jz(a,c);Pz(this.Oa,c);eL.C.g.call(this,a,b)};
eL.prototype.finish=function(a){var b=Fy.N(this.Oa);b.dispatchEvent(new K("color",this.value));b instanceof Rz&&BJ(b,null);eL.C.finish.call(this,a)};function fL(a,b,c){Tz.call(this,a,b,c);this.title="Change Icon";this.qa="layers.features.changeVectorIcon"}w(fL,cL);fL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return kz(a)||HB()};fL.prototype.g=function(a,b){b&&lz(a,b);fL.C.g.call(this,a,b)};fL.prototype.finish=function(a){var b=Fy.N(this.Oa);b&&b.dispatchEvent(new K(TI));fL.C.finish.call(this,a)};function gL(a,b,c){Tz.call(this,a,b,c);this.title="Change Label";this.qa="layers.features.labelColumnSelect";this.value=b||[Cz()]}w(gL,cL);gL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.labels||[Cz()]};gL.prototype.g=function(a,b){a.labels=b;gL.C.g.call(this,a,b)};gL.prototype.finish=function(a){Fy.N(this.Oa).dispatchEvent(new K("label",this.value));VB();gL.C.finish.call(this,a)};function hL(a,b,c){Tz.call(this,a,b,c);this.title="Change Label Color";this.qa="layers.features.changeLabelColor";""!=b&&(this.value=hz(b))}w(hL,cL);hL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.labelColor||""};hL.prototype.g=function(a,b){a.labelColor=b;hL.C.g.call(this,a,b)};function iL(a,b,c){Tz.call(this,a,b,c);this.title="Change Label Size";this.qa="layers.features.changeLabelSize"}w(iL,cL);iL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a?a.labelSize:void 0};iL.prototype.g=function(a,b){a.labelSize=b;iL.C.g.call(this,a,b)};iL.prototype.finish=function(a){VB();iL.C.finish.call(this,a)};function jL(a,b){Tz.call(this,a,b,void 0);this.title="Force Layer Color";this.qa="layers.features.forceLayerColor"}w(jL,cL);jL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a?!!a.replaceStyle:!1};jL.prototype.g=function(a,b){a.replaceStyle=b;jL.C.g.call(this,a,b);a=Fy.N(this.Oa);IK(a,a.fj)};jL.prototype.finish=function(a){Fy.N(this.Oa).dispatchEvent(new K("replaceStyle",this.value));jL.C.finish.call(this,a)};function kL(a,b,c){Tz.call(this,a,b,c)}w(kL,cL);kL.prototype.g=function(a,b){var c=Fy.N(this.Oa);if(c){c=c.La();for(var d=0,e=c.length;d<e;d++)c[d].la.lineOfBearing=null,c[d].la.lineOfBearingErrorHigh=null,c[d].la.lineOfBearingErrorLow=null,c[d].la.ellipse=null}kL.C.g.call(this,a,b)};kL.prototype.finish=function(a){var b=Fy.N(this.Oa);b&&b.dispatchEvent(new K(TI,b.Jd));kL.C.finish.call(this,a)};function lL(a,b,c){Tz.call(this,a,b,c);this.title="Change icon rotation column";this.value=b||"";this.qa="layers.features.changeVectorRotationColumn"}w(lL,kL);lL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.rotationColumn||""};lL.prototype.g=function(a,b){a.rotationColumn=b;lL.C.g.call(this,a,b)};function mL(a,b,c){Tz.call(this,a,b,c);this.title="Change Style";this.qa="layers.features.changeVectorShape#"+(b?b.replace(/ /g,"_"):"Unknown")}w(mL,cL);mL.prototype.j=function(){var a,b=Fy.N(this.Oa);b&&(a=b.Jd);return a||Ky};mL.prototype.g=function(a,b){var c=Fy.N(this.Oa);c&&b&&(eja(c,b),"Icon"!=b||kz(a)||lz(a,HB()));mL.C.g.call(this,a,b)};mL.prototype.finish=function(a){Fy.N(this.Oa).dispatchEvent(new K(TI,this.value,this.oldValue));mL.C.finish.call(this,a)};function nL(a,b,c){Tz.call(this,a,b,c);this.qa="layers.features.changeLabelToggle";this.value=b||!1;this.title=b?"Show Labels":"Hide Labels"}w(nL,cL);nL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.showLabels||!1};nL.prototype.g=function(a,b){a.showLabels=b;if(!b){var c=Fy.N(this.Oa),d=[];c.Nu(function(a){My(a)&&d.push(a)});0<d.length&&(uz(d),c.dispatchEvent(new K("style",d)))}nL.C.g.call(this,a,b)};nL.prototype.finish=function(a){VB();nL.C.finish.call(this,a)};function oL(a,b,c){Tz.call(this,a,b,c);this.qa="layers.features.changeVectorShowRotation";this.value=!!b;this.title=b?"Enable Icon Rotation":"Disable Icon Rotation"}w(oL,kL);oL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return null!=a&&a.showRotation||!1};oL.prototype.g=function(a,b){a.showRotation=b;oL.C.g.call(this,a,b)};function pL(a,b,c){Tz.call(this,a,b,c);this.title="Change Size";this.qa="layers.features.changeVectorSize"}w(pL,cL);pL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return oz(a)};pL.prototype.g=function(a,b){pz(a,b);pL.C.g.call(this,a,b)};function qL(a,b,c){Tz.call(this,a,b,c);this.title="Change Unique ID";this.qa="layers.features.labelColumnSelect";this.value=b}w(qL,cL);qL.prototype.j=function(){return this.W().N().gc};qL.prototype.setValue=function(a){var b=this.W();b=this.nh(b);this.g(b,a);this.finish(b)};qL.prototype.g=function(a,b){nja(this.W().N(),b)};function rL(){HG.call(this);this.add({id:"google_icons",name:"Google Icons",html:'<iconpalette accept-callback="acceptCallback" selected="selected" icon-set="iconSet" icon-src="iconSrc"></iconpalette>'})}w(rL,HG);xa(rL);Q.directive("iconpalette",[function(){return{restrict:"E",scope:{selected:"=",acceptCallback:"=",iconSet:"=",iconSrc:"=?"},replace:!0,templateUrl:"v1541734487/views/icon/iconpalette.html",controller:sL,controllerAs:"palette"}}]);function sL(a){this.v=a;var b=this.v.iconSet?this.v.iconSet:[];if(this.v.selected&&b){var c=this.v.selected;if(c&&c.path)for(var d=0;d<b.length;d++)if(b[d].path==c.path){this.pick(b[d].path);break}}a.$on("$destroy",this.g.bind(this))}sL.$inject=["$scope"];
sL.prototype.g=function(){this.v=null};sL.prototype.pE=function(a){return this.v&&this.v.iconSrc?this.v.iconSrc(a):a};sL.prototype.getIconSrc=sL.prototype.pE;sL.prototype.pick=function(a){this.v.selected.path=a;R(this.scope)};sL.prototype.pick=sL.prototype.pick;Q.directive("iconselector",[function(){return{restrict:"E",scope:{selected:"=",acceptCallback:"=",iconSet:"=",iconSrc:"=?"},replace:!0,templateUrl:"v1541734487/views/icon/iconselector.html",controller:tL,controllerAs:"selector"}}]);
function tL(a,b){this.v=a;this.L=b;this.v.tabs=JG(rL.s());this.v.showtabs=1===this.v.tabs.length?!1:!0;this.v.activeTab=0<this.v.tabs.length?this.v.tabs[0].name:"";for(b=0;b<this.v.tabs.length;b++){var c='<div class="d-flex flex-fill" ng-if="activeTab == \''+this.v.tabs[b].name+"'\">"+this.v.tabs[b].html+"</div>";yca(c)||Fk("js-nav-icon__selectors",c,201)}this.v.$emit("window.ready");a.$on("$destroy",this.g.bind(this))}w(tL,C);tL.$inject=["$scope","$element"];
tL.prototype.g=function(){this.L=this.v=null};tL.prototype.isValid=function(){return this.v.selected&&!!this.v.selected.path};tL.prototype.isValid=tL.prototype.isValid;tL.prototype.cancel=function(){kx(this.L)};tL.prototype.cancel=tL.prototype.cancel;tL.prototype.LG=function(){this.v.acceptCallback&&this.v.acceptCallback(this.v.selected);kx(this.L)};tL.prototype.okay=tL.prototype.LG;tL.prototype.it=function(a){this.v.activeTab=a};tL.prototype.setTab=tL.prototype.it;
tL.prototype.Te=function(a){return GB.test(a)?IB(a):a};tL.prototype.getPath=tL.prototype.Te;Q.directive("iconpicker",[function(){return{restrict:"AE",replace:!0,scope:{disabled:"=",ngModel:"=",iconSet:"=",iconSrc:"=?"},templateUrl:"v1541734487/views/icon/iconpicker.html",controller:uL,controllerAs:"iconPicker"}}]);function uL(a){this.scope=a;this.disabled=this.scope.disabled||!this.scope.iconSet}uL.$inject=["$scope"];uL.prototype.g=function(a){this.scope&&(this.scope.ngModel=a,this.scope.$emit("icon:change",a))};
uL.prototype.show=function(){var a={acceptCallback:this.g.bind(this),icon:fi(this.scope.ngModel),iconSet:this.scope.iconSet,iconSrc:this.scope.iconSrc};ix("iconselector")?hx("iconselector"):fx({id:"iconselector",label:"Choose an Icon",icon:"fa fa-flag",x:"center",y:"center",width:"600","min-width":"400","max-width":"1200",height:"600","min-height":"400","max-height":"1200","show-close":"true",modal:"true"},'<iconselector class="d-flex flex-fill" accept-callback="acceptCallback" selected="icon" icon-set="iconSet" icon-src="iconSrc"> </iconselector>',
void 0,void 0,void 0,a)};uL.prototype.Te=function(a){return GB.test(a)?IB(a):a};uL.prototype.getPath=uL.prototype.Te;function vL(a,b,c){Tz.call(this,a,b,c);this.qa="layers.features.changeVectorEllipsoid";this.value=!!b;this.title=b?"Enable Ellipsoids":"Disable Ellipsoids"}w(vL,cL);vL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return null!=a&&a.showEllipsoids||!1};vL.prototype.g=function(a,b){a.showEllipsoids=b;vL.C.g.call(this,a,b)};vL.prototype.finish=function(a){var b=Fy.N(this.Oa);b&&b.dispatchEvent(new K(TI,b.Jd));vL.C.finish.call(this,a)};function wL(a,b,c){Tz.call(this,a,b,c);this.qa="layers.features.changeVectorGroundReference";this.value=!!b;this.title=b?"Enable Ground Reference":"Disable Ground Reference"}w(wL,kL);wL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return null!=a&&a.showGroundRef||!1};wL.prototype.g=function(a,b){a.showGroundRef=b;wL.C.g.call(this,a,b)};Q.directive("ellipseoptions",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/layer/ellipseoptions.html",controller:xL,controllerAs:"ctrl"}}]);function xL(a,b){ME.call(this,a,b);this.showGroundReference=this.showEllipsoids=!1}w(xL,ME);xL.$inject=["$scope","$element"];xL.prototype.J=function(){xL.C.J.call(this);this.element=this.scope=null};
xL.prototype.sd=function(){xL.C.sd.call(this);if(!this.Xa()){var a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=!!a.showEllipsoids;break a}a=!1}this.showEllipsoids=a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=!!a.showGroundRef;break a}a=!1}this.showGroundReference=a}};xL.prototype.UJ=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.showEllipsoids;this.xb(function(a){return new vL(a.D(),b)})}};xL.prototype.onShowEllipsoidsChange=xL.prototype.UJ;
xL.prototype.WJ=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.showGroundReference;this.xb(function(a){return new wL(a.D(),b)})}};xL.prototype.onShowGroundReferenceChange=xL.prototype.WJ;Q.directive("iconstylecontrols",[function(){return{restrict:"E",replace:!0,scope:{columns:"=",showRotation:"=?",rotationColumn:"=?"},templateUrl:"v1541734487/views/layer/iconstylecontrols.html",controller:yL,controllerAs:"ctrl"}}]);function yL(a){x.call(this);this.scope=a;null==this.scope.showRotation&&(this.scope.showRotation=!0);null==this.scope.rotationColumn&&(this.scope.rotationColumn="");a.$on("$destroy",t(this.dispose,this))}w(yL,x);yL.$inject=["$scope"];
yL.prototype.J=function(){this.scope=null};yL.prototype.EO=function(){this.scope&&this.scope.$emit(zL,this.scope.showRotation)};yL.prototype.toggleShowRotation=yL.prototype.EO;yL.prototype.mr=function(){this.scope&&this.scope.$emit(AL,this.scope.rotationColumn)};yL.prototype.onRotationColumnChange=yL.prototype.mr;Q.directive("labelcontrols",[function(){return{restrict:"E",replace:!0,scope:{labels:"=",columns:"=",labelColor:"=",labelSize:"=",showLabels:"=?",required:"=?",alwaysShowLabels:"@"},templateUrl:"v1541734487/views/layer/labelcontrols.html",controller:BL,controllerAs:"labelCtrl"}}]);
function BL(a,b,c){x.call(this);this.scope=a;this.element=b;this.g=-1;this.maxSize=24;this.minSize=8;this.labelLimit=M.get(["maxLabels"],5);this.element.find(".js-label-container").sortable({items:"tr",handle:".js-handle",axis:"y",containment:"parent",snap:!0,tolerance:"pointer",start:this.o.bind(this),stop:this.l.bind(this)});c(this.j.bind(this));a.$on("$destroy",this.dispose.bind(this))}w(BL,x);BL.$inject=["$scope","$element","$timeout"];
BL.prototype.J=function(){BL.C.J.call(this);this.element=this.scope=null};BL.prototype.qj=function(){if(this.scope){if(this.scope&&this.scope.labels){for(var a=this.scope.labels,b=a.length;b--;)null==a[b].column&&a.push(a.splice(b,1)[0]);R(this.scope)}this.j();this.scope.$emit("labelcontrols:columnChange")}};BL.prototype.onColumnChange=BL.prototype.qj;BL.prototype.pr=function(){this.scope&&this.scope.$emit("labelcontrols:showLabelsChange",this.scope.showLabels)};BL.prototype.onShowLabelsChange=BL.prototype.pr;
BL.prototype.No=function(){this.scope.labels.push(Cz());this.qj();O(P.s(),"layers.features.labelColumnAdd",1)};BL.prototype.addLabel=BL.prototype.No;BL.prototype.BN=function(a){mb(this.scope.labels,a);this.qj();O(P.s(),"layers.features.labelColumnRemove",1)};BL.prototype.removeLabel=BL.prototype.BN;
BL.prototype.j=function(){if(this.scope&&this.scope.labels){var a=this.scope.labelForm;a&&(this.scope.required?a.$setValidity("columnRequired",this.scope.labels.some(function(a){return!!a.column})):a.$setValidity("columnRequired",!0));R(this.scope)}};
BL.prototype.o=function(a,b){(a=this.element.find(".c-labelcontainer").sortable("instance"))&&a.containment&&(a.containment[3]+=3);b.helper&&b.placeholder&&b.placeholder.height(b.helper.height());b.item&&(b.item.find(".handle").addClass("moving"),this.g=b.item.index())};BL.prototype.l=function(a,b){b.item&&(b.item.find(".handle").removeClass("moving"),a=b.item.index(),this.g!=a&&(Db(this.scope.labels,this.g,a),R(this.scope),this.qj()))};function CL(a,b,c){Tz.call(this,a,b,c);this.title="Change Line of Bearing arrow size";this.value=b;this.qa="layers.features.changeVectorArrowSize"}w(CL,kL);CL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a?a.arrowSize:100};CL.prototype.g=function(a,b){a.arrowSize=b;CL.C.g.call(this,a,b)};function DL(a,b,c){Tz.call(this,a,b,c);this.title="Change arrow units";this.value=b||"m";this.qa="layers.features.changeVectorArrowUnits"}w(DL,kL);DL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.arrowUnits||"m"};DL.prototype.g=function(a,b){a.arrowUnits=b;DL.C.g.call(this,a,b)};function EL(a,b,c){Tz.call(this,a,b,c);this.title="Change bearing column";this.value=b||"";this.qa="layers.features.changeVectorLineOfBearingBearingColumn"}w(EL,kL);EL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.lobBearingColumn||""};EL.prototype.g=function(a,b){a.lobBearingColumn=b;EL.C.g.call(this,a,b)};function FL(a,b,c){Tz.call(this,a,b,c);this.title="Change Line of Bearing error multiplier";this.value=b;this.qa="layers.features.changeVectorLineOfBearingBearingError"}w(FL,kL);FL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a?a.lobBearingError:1};FL.prototype.g=function(a,b){a.lobBearingError=b;FL.C.g.call(this,a,b)};function GL(a,b,c){Tz.call(this,a,b,c);this.title="Change bearing error column";this.value=b||"";this.qa="layers.features.changeVectorLineOfBearingBearingErrorColumn"}w(GL,kL);GL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.lobBearingErrorColumn||""};GL.prototype.g=function(a,b){a.lobBearingErrorColumn=b;GL.C.g.call(this,a,b)};function HL(a,b,c){Tz.call(this,a,b,c);this.title="Change Line of Bearing column length";this.value=b;this.qa="layers.features.changeVectorLineOfBearingColumnLength"}w(HL,kL);HL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a?a.lobColumnLength:1E3};HL.prototype.g=function(a,b){a.lobColumnLength=b;HL.C.g.call(this,a,b)};function IL(a,b,c){Tz.call(this,a,b,c);this.title="Change Line of Bearing bearing error column";this.value=b||"";this.qa="layers.features.changeVectorLineOfBearingLengthErrorColumn"}w(IL,kL);IL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.lobLengthErrorColumn||""};IL.prototype.g=function(a,b){a.lobLengthErrorColumn=b;IL.C.g.call(this,a,b)};function JL(a,b,c){Tz.call(this,a,b,c);this.title="Change Line of Bearing length";this.value=b;this.qa="layers.features.changeVectorLineOfBearingLength"}w(JL,kL);JL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a?a.lobLength:1E3};JL.prototype.g=function(a,b){a.lobLength=b;JL.C.g.call(this,a,b)};function KL(a,b,c){Tz.call(this,a,b,c);this.title="Change Line of Bearing length error column multiplier";this.value=b;this.qa="layers.features.changeVectorLineOfBearingLengthError"}w(KL,kL);KL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a?a.lobLengthError:1};KL.prototype.g=function(a,b){a.lobLengthError=b;KL.C.g.call(this,a,b)};function LL(a,b,c){Tz.call(this,a,b,c);this.title="Change length error units";this.value=b||"m";this.qa="layers.features.changeVectorLineOfBearingLengthErrorUnits"}w(LL,kL);LL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.lobLengthErrorUnits||"m"};LL.prototype.g=function(a,b){a.lobLengthErrorUnits=b;LL.C.g.call(this,a,b)};function ML(a,b,c){Tz.call(this,a,b,c);this.title="Change length units";this.value=b||"m";this.qa="layers.features.changeVectorLineOfBearingLengthUnits"}w(ML,kL);ML.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.lobLengthUnits||"m"};ML.prototype.g=function(a,b){a.lobLengthUnits=b;ML.C.g.call(this,a,b)};function NL(a,b,c){Tz.call(this,a,b,c);this.title="Change Line of Bearing length column";this.value=b||"";this.qa="layers.features.changeVectorLineOfBearingLengthColumn"}w(NL,kL);NL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.lobLengthColumn||""};NL.prototype.g=function(a,b){a.lobLengthColumn=b;NL.C.g.call(this,a,b)};function OL(a,b,c){Tz.call(this,a,b,c);this.title="Change Line of Bearing length type (manual or column)";this.value=b||"manual";this.qa="layers.features.changeVectorLineOfBearingLengthType"}w(OL,kL);OL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return a&&a.lobLengthType||"manual"};OL.prototype.g=function(a,b){a.lobLengthType=b;OL.C.g.call(this,a,b)};function PL(a,b,c){Tz.call(this,a,b,c);this.qa="layers.features.changeVectorShowArrow";this.value=!!b;this.title=b?"Enable Arrow":"Disable Arrow"}w(PL,kL);PL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return null!=a&&a.showArrow||!1};PL.prototype.g=function(a,b){a.showArrow=b;PL.C.g.call(this,a,b)};function QL(a,b,c){Tz.call(this,a,b,c);this.qa="layers.features.changeVectorShowEllipse";this.value=!!b;this.title=b?"Enable Show Ellipse":"Disable Show Ellipse"}w(QL,kL);QL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return null!=a&&a.showEllipse||!1};QL.prototype.g=function(a,b){a.showEllipse=b;QL.C.g.call(this,a,b)};function RL(a,b,c){Tz.call(this,a,b,c);this.qa="layers.features.changeVectorShowError";this.value=!!b;this.title=b?"Enable Show Error":"Disable Show Error"}w(RL,kL);RL.prototype.j=function(){var a=vz(wz.s(),this.Oa);return null!=a&&a.showError||!1};RL.prototype.g=function(a,b){a.showError=b;RL.C.g.call(this,a,b)};Q.directive("loboptions",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/layer/loboptions.html",controller:SL,controllerAs:"ctrl"}}]);
function SL(a,b){ME.call(this,a,b);this.showEllipse=this.showError=this.showArrow=!1;this.lengthType="manual";this.bearingErrorColumn=this.bearingColumn=this.lengthErrorColumn=this.lengthColumn="";this.lengthErrorUnits=this.arrowUnits=this.lengthUnits="m";this.units=[];this.scope.maxSize={};this.scope.maxSliderSize={};for(var c in Kt)this.units.push(Kt[c]),this.scope.maxSize[Kt[c]]=Ot(19E6,Kt[c],"m"),this.scope.maxSliderSize[Kt[c]]=Ot(1E3,Kt[c],"nmi");this.scope.columnLength=1E3;this.scope.length=
1E3;this.scope.size=100;this.scope.lengthErrorMultiplier=1;this.scope.bearingErrorMultiplier=1;this.u=new Fh(this.G,1E3,this);this.A=new Fh(this.I,1E3,this);this.o=new Fh(this.B,1E3,this);this.O=new Fh(this.K,1E3,this);this.helpText='<div><p>Line of Bearing Error allows you to show a +/- error range on the line length and orientation with arcs. Absence of bearing error shows lines instead of arcs. Absence of length error shows a single arc. Note that the bearing error is not accurate for line lengths greater than 10,000km!</p><img class="c-loboptions-popover__image" src="v1541734487//images/loberror.png"></img></div>';
a.$on("length.slidestop",this.ix.bind(this))}w(SL,ME);SL.$inject=["$scope","$element"];
SL.prototype.sd=function(){SL.C.sd.call(this);if(!this.Xa()){this.columns=this.getValue(IH);var a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=!!a.showArrow;break a}a=!1}this.showArrow=a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=!!a.showError;break a}a=!1}this.showError=a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=!!a.showEllipse;break a}a=!1}this.showEllipse=a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=
a.lobLengthType;break a}a="manual"}this.lengthType=a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=a.lobLengthColumn;break a}a=""}this.lengthColumn=a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=a.lobLengthUnits;break a}a="m"}this.lengthUnits=a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=a.arrowUnits;break a}a="m"}this.arrowUnits=a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=a.lobLengthErrorColumn;break a}a=""}this.lengthErrorColumn=
a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=a.lobLengthErrorUnits;break a}a="m"}this.lengthErrorUnits=a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=a.lobBearingColumn;break a}a=""}this.bearingColumn=a;a:{if((a=this.scope.items)&&0<a.length&&(a=vz(wz.s(),a[0].D()))){a=a.lobBearingErrorColumn;break a}a=""}this.bearingErrorColumn=a;a=this.scope;var b;a:{if((b=this.scope.items)&&0<b.length&&(b=vz(wz.s(),b[0].D()))){b=b.lobLength;break a}b=1E3}a.length=b;
a=this.scope;a:{if((b=this.scope.items)&&0<b.length&&(b=vz(wz.s(),b[0].D()))){b=b.lobColumnLength;break a}b=1E3}a.columnLength=b;a=this.scope;a:{if((b=this.scope.items)&&0<b.length&&(b=vz(wz.s(),b[0].D()))){b=b.arrowSize;break a}b=100}a.size=b;a=this.scope;a:{if((b=this.scope.items[0].W())&&(b=b.N())&&kg(b,"os.source.Vector")){b=AK(b,"RADIUS")||AK(b,"SEMI_MAJOR")&&AK(b,"SEMI_MINOR")||AK(b,"SEMI_MAJOR (nmi)*")&&AK(b,"SEMI_MINOR (nmi)*")?!0:!1;break a}b=!1}a.ellipseSupport=b;a=this.scope;a:{if((b=this.scope.items)&&
0<b.length&&(b=vz(wz.s(),b[0].D()))){b=b.lobLengthError;break a}b=1}a.lengthErrorMultiplier=b;a=this.scope;a:{if((b=this.scope.items)&&0<b.length&&(b=vz(wz.s(),b[0].D()))){b=b.lobBearingError;break a}b=1}a.bearingErrorMultiplier=b}};SL.prototype.SJ=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.showArrow;this.xb(function(a){return new PL(a.D(),b)})}};SL.prototype.onShowArrowChange=SL.prototype.SJ;
SL.prototype.VJ=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.showError;this.xb(function(a){return new RL(a.D(),b)})}};SL.prototype.onShowErrorChange=SL.prototype.VJ;SL.prototype.TJ=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.showEllipse;this.xb(function(a){return new QL(a.D(),b)})}};SL.prototype.onShowEllipseChange=SL.prototype.TJ;SL.prototype.pg=function(){this.Xa()||this.O.start()};SL.prototype.onSizeChange=SL.prototype.pg;
SL.prototype.K=function(){var a=t(function(a){return new CL(a.D(),this.scope.size)},this);this.xb(a)};SL.prototype.ix=function(a,b){a&&a.stopPropagation();a=void 0!==b?b:this.scope.length;this.scope.length=0==a?1:a;a=t(function(a){return new JL(a.D(),this.scope.length)},this);this.xb(a)};SL.prototype.onLengthChange=SL.prototype.ix;SL.prototype.BH=function(){this.Xa()||this.u.start()};SL.prototype.onColumnLengthChange=SL.prototype.BH;
SL.prototype.G=function(){var a=t(function(a){return new HL(a.D(),this.scope.columnLength)},this);this.xb(a)};SL.prototype.mH=function(){this.Xa()||this.o.start()};SL.prototype.onBearingErrorChange=SL.prototype.mH;SL.prototype.B=function(){var a=t(function(a){return new FL(a.D(),this.scope.bearingErrorMultiplier)},this);this.xb(a)};SL.prototype.cJ=function(){this.Xa()||this.A.start()};SL.prototype.onLengthErrorChange=SL.prototype.cJ;
SL.prototype.I=function(){var a=t(function(a){return new KL(a.D(),this.scope.lengthErrorMultiplier)},this);this.xb(a)};SL.prototype.bJ=function(){var a=t(function(a){return new NL(a.D(),this.lengthColumn)},this);this.xb(a)};SL.prototype.onLengthColumnChange=SL.prototype.bJ;SL.prototype.dJ=function(){var a=t(function(a){return new IL(a.D(),this.lengthErrorColumn)},this);this.xb(a)};SL.prototype.onLengthErrorColumnChange=SL.prototype.dJ;
SL.prototype.fJ=function(){var a=t(function(a){return new OL(a.D(),this.lengthType)},this);this.xb(a)};SL.prototype.onLengthTypeChange=SL.prototype.fJ;SL.prototype.lH=function(){var a=t(function(a){return new EL(a.D(),this.bearingColumn)},this);this.xb(a)};SL.prototype.onBearingColumnChange=SL.prototype.lH;SL.prototype.nH=function(){var a=t(function(a){return new GL(a.D(),this.bearingErrorColumn)},this);this.xb(a)};SL.prototype.onBearingErrorColumnChange=SL.prototype.nH;
SL.prototype.gJ=function(){var a=t(function(a){return new ML(a.D(),this.lengthUnits)},this);this.xb(a)};SL.prototype.onLengthUnitChange=SL.prototype.gJ;SL.prototype.iH=function(){var a=t(function(a){return new DL(a.D(),this.arrowUnits)},this);this.xb(a)};SL.prototype.onArrowUnitChange=SL.prototype.iH;SL.prototype.eJ=function(){var a=t(function(a){return new LL(a.D(),this.lengthErrorUnits)},this);this.xb(a)};SL.prototype.onLengthErrorUnitChange=SL.prototype.eJ;SL.prototype.eE=function(){return"ellipseoptions"};
SL.prototype.getEllipseUI=SL.prototype.eE;var zL="vector:showRotationChange",AL="vector:rotationColumnChange";Q.directive("vectorstylecontrols",[function(){return{restrict:"E",replace:!0,scope:{color:"=",opacity:"=",icon:"=?",centerIcon:"=?",iconSet:"=?",iconSrc:"=?",showIcon:"=?",showCenterIcon:"=?",size:"=",shape:"=",shapes:"=",centerShape:"=?",centerShapes:"=?",showColorReset:"=?"},templateUrl:"v1541734487/views/layer/vectorstylecontrols.html",controller:TL,controllerAs:"ctrl"}}]);
function TL(a){x.call(this);this.scope=a;null==this.scope.showIcon&&(this.scope.showIcon=!0);null==this.scope.showCenterIcon&&(this.scope.showCenterIcon=!0);a.$on("$destroy",t(this.dispose,this))}w(TL,x);TL.$inject=["$scope"];TL.prototype.J=function(){this.scope=null};TL.prototype.uj=function(){this.scope&&this.scope.$emit("vector:shapeChange",this.scope.shape)};TL.prototype.onShapeChange=TL.prototype.uj;TL.prototype.FF=function(){return this.scope&&this.scope.shape?az[this.scope.shape]:!1};
TL.prototype.hasCenter=TL.prototype.FF;TL.prototype.pj=function(a){this.scope&&(this.scope.$emit("vector:centerShapeChange",a),this.scope.centerShape=a)};TL.prototype.onCenterShapeChange=TL.prototype.pj;Q.directive("vectorlayerui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/layer/vector.html",controller:UL,controllerAs:"vector"}}]);
function UL(a,b,c){this.iconSet=JB;this.iconSrc=IB;this.replaceStyle=this.showReplaceStyle=!1;this.getShapeUI=this.B.bind(this);this.showRotation=!1;this.rotationColumn="";this.altitudeModes=[];this.showAltitudeModes=!1;QE.call(this,a,b,c);this.o="colorControl:picker";this.j.push("lock");On.H("propertychange",this.lx,!1,this);a.$on("size.slidestop",this.pg.bind(this));a.$on("color.change",this.A.bind(this));a.$on("color.reset",this.G.bind(this));a.$on("icon:change",this.og.bind(this));a.$on("vector:shapeChange",
this.uj.bind(this));a.$on("vector:centerShapeChange",this.pj.bind(this));a.$on("labelColor.change",this.ex.bind(this));a.$on("labelColor.reset",this.NL.bind(this));a.$on("labelSize.spinstop",this.XI.bind(this));a.$on("labelcontrols:columnChange",this.WI.bind(this));a.$on("labelcontrols:showLabelsChange",this.pr.bind(this));a.$on(zL,this.OL.bind(this));a.$on(AL,this.mr.bind(this))}w(UL,QE);UL.$inject=["$scope","$element","$timeout"];
UL.prototype.sd=function(){UL.C.sd.call(this);if(this.scope){this.scope.color=wja(this);var a=this.scope,b=this.scope.items,c;if(b)for(var d=0,e=b.length;d<e;d++)try{if(b[d].W()){var f=vz(wz.s(),b[0].D());f&&(c=oz(f))}}catch(U){}a.size=c||3;a=this.scope;b=this.scope.items;c=null;if(b&&0<b.length)try{var h=kF.s().N(b[0].D());if(h&&"Icon"==h.Jd){var k=vz(wz.s(),b[0].D());c=kz(k)||HB()}}catch(U){}a.icon=c;h=this.scope;k=this.scope.items;a=null;if(k&&0<k.length)try{var l=kF.s().N(k[0].D());if(l&&"Icon"==
l.Sf){var m=vz(wz.s(),k[0].D());a=kz(m)||HB()}}catch(U){}h.centerIcon=a;l=this.scope;m=this.scope.items;var n;if(m&&0<m.length)try{var p=Fy.N(m[0].D());p&&(n=p.Jd)}catch(U){}l.shape=n||Ky;n=this.scope;p=this.scope.items;l=jc(Wy);if(p&&0<p.length)for(m=0,h=p.length;m<h;m++)try{var r=Fy.N(p[m].D());r&&r instanceof Rz&&(l=ab(l,r.eB,r))}catch(U){}n.shapes=l;r=this.scope;n=this.scope.items;var u;if(n&&0<n.length)try{var v=Fy.N(n[0].D());if(v){var y=v.Sf;Yy.test(y)||$y.test(y)||(u=y)}}catch(U){}r.centerShape=
u||"Point";u=this.scope;v=this.scope.items;y=jc(Wy);if(v&&0<v.length)for(r=0,n=v.length;r<n;r++)try{var B=Fy.N(v[r].D());B&&B instanceof Rz&&(y=ab(y,B.Jv,B))}catch(U){}u.centerShapes=y;B=this.scope;this.lock=!1;u=!0;if((v=this.scope.items)&&0<v.length)for(y=0,r=v.length;y<r;y++)try{var G=Fy.N(v[y].D());if(G&&G instanceof Rz&&!G.gj()){u=!1;break}else this.lock=G.I}catch(U){u=!1}B.lockable=u;G=Nq;if((B=this.scope.items)&&0<B.length)for(u=0,v=B.length;u<v;u++)try{var D=Fy.N(B[u].D());if(D&&D instanceof
Rz){G=D.Eb;break}}catch(U){}this.altitudeMode=G;this.columns=this.getValue(IH);a:{if((D=this.scope.items)&&0<D.length&&(D=vz(wz.s(),D[0].D()))){D=!!D.showRotation;break a}D=!1}this.showRotation=D;a:{if((D=this.scope.items)&&0<D.length&&(D=vz(wz.s(),D[0].D()))){D=D.rotationColumn;break a}D=""}this.rotationColumn=D;xja(this);if(this.scope.items&&1==this.scope.items.length){if(this.scope.columns=this.getValue(IH),this.uniqueId=this.getValue(hha),yja(this),this.scope.showLabels!==this.getValue(aha)&&
(this.scope.showLabels=this.getValue(aha)),this.scope.labelColor!==this.getValue(bha)&&(this.scope.labelColor=this.getValue(bha)),this.scope.labelSize!==this.getValue(cha)||14!==this.scope.labelSize)this.scope.labelSize=this.getValue(cha)||14}else this.scope.columns=null,this.scope.column=null,this.scope.showLabels=!1,this.scope.labelColor="",this.scope.labelSize=0;if(D=On.g)this.altitudeModes=D.Ru(),this.showAltitudeModes=0<this.altitudeModes.length&&On.Qa();this.scope.$broadcast("uiSwitch:update")}};
UL.prototype.B=function(){if(null!=this.scope){var a=this.scope.shape||"";if(Yy.test(a))return"ellipseoptions";if(Xy.test(a))return"loboptions"}};UL.prototype.qt=function(){if(null!=this.scope){var a=this.scope.shape||"",b=this.scope.centerShape||"";return"Icon"==a||Zy.test(a)&&"Icon"==b}return!1};UL.prototype.showRotationOption=UL.prototype.qt;function yja(a){var b=a.getValue($ga,[]),c=[];$a(b,function(a){c.push(Cz(a))},a);0===c.length&&c.push(Cz());a.scope.labels=c}
UL.prototype.A=function(a,b){a.stopPropagation();this.xb(function(a){return new eL(a.D(),b)})};UL.prototype.G=function(a){a.stopPropagation();this.A(a,"");this.scope.color=wja(this)};UL.prototype.pg=function(a,b){a.stopPropagation();this.xb(function(a){return new pL(a.D(),b)})};UL.prototype.og=function(a,b){a.stopPropagation();b&&this.xb(function(a){return new fL(a.D(),b)})};UL.prototype.onIconChange=UL.prototype.og;
UL.prototype.uj=function(a,b){a.stopPropagation();b&&this.xb(function(a){return new mL(a.D(),b)})};UL.prototype.onShapeChange=UL.prototype.uj;UL.prototype.pj=function(a,b){a.stopPropagation();b&&this.xb(function(a){return new dL(a.D(),b)})};UL.prototype.onCenterShapeChange=UL.prototype.pj;g=UL.prototype;g.ex=function(a,b){a.stopPropagation();this.xb(function(a){return new hL(a.D(),b)})};
g.NL=function(a){a.stopPropagation();var b=this.scope.items;b&&0<b.length&&(b=b[0].W())&&(b=vz(wz.s(),b.D()),this.scope.labelColor=Iy(b));this.ex(a,"")};g.XI=function(a,b){a.stopPropagation();this.xb(function(a){return new iL(a.D(),b)})};g.WI=function(a){a.stopPropagation();(a=this.scope.items)&&1===a.length&&(a=t(function(a){return new gL(a.D(),this.scope.labels)},this),this.xb(a))};
g.pr=function(a,b){a.stopPropagation();(a=this.scope.items)&&1===a.length&&this.xb(function(a){return new nL(a.D(),b)})};function wja(a){if(a=a.scope.items)for(var b=0,c=a.length;b<c;b++)try{if(a[b].W()){var d=vz(wz.s(),a[0].D());if(d){var e=Iy(d,!0);return e?re(e):e}}}catch(f){}return null}g.hJ=function(){var a=this.scope.items;if(a&&0<a.length)for(var b=0,c=a.length;b<c;b++)try{var d=Fy.N(a[b].D());d&&d instanceof Rz&&d.gj()&&d.vh(this.lock)}catch(e){}};UL.prototype.onLockChange=UL.prototype.hJ;
function xja(a){a.showReplaceStyle=!1;a.replaceStyle=!1;var b=NE(a);if(b&&0<b.length){var c;a.showReplaceStyle=db(b,function(a){a=a.W();if(F(a,"os.layer.ILayer")){var b=a.Va();if(b&&b.showForceColor)return null==c&&(a=vz(wz.s(),a.D()))&&(c=!!a.replaceStyle),!0}return!1});null!=c&&(a.replaceStyle=c)}}UL.prototype.GJ=function(){var a=this.scope.items;if(a&&0<a.length){var b=this.replaceStyle;this.xb(function(a){return new jL(a.D(),b)})}};UL.prototype.onReplaceStyleChange=UL.prototype.GJ;
UL.prototype.fH=function(){var a=this.scope.items;if(a&&0<a.length)for(var b=0,c=a.length;b<c;b++)try{var d=Fy.N(a[b].D());d&&d instanceof Rz&&fja(d,this.altitudeMode)}catch(e){}};UL.prototype.onAltitudeModeChange=UL.prototype.fH;UL.prototype.sK=function(){var a=NE(this);if(a&&0<a.length){var b=this.uniqueId;this.xb(function(a){return new qL(a.D(),b)})}};UL.prototype.onUniqueIdChange=UL.prototype.sK;g=UL.prototype;
g.OL=function(a,b){(a=this.scope.items)&&0<a.length&&this.xb(function(a){return new oL(a.D(),b)})};g.mr=function(a,b){(a=this.scope.items)&&0<a.length&&(a=t(function(a){return new lL(a.D(),b)},this),this.xb(a))};g.lx=function(a){"map:change:view3d"==a.j&&(this.showAltitudeModes=a.o&&0<this.altitudeModes.length,R(this.scope))};g.J=function(){On.M("propertychange",this.lx,!1,this);UL.C.J.call(this)};
g.xG=function(a){switch(a){case Nq:return"Absolute";case "clampToGround":return"Clamp to Ground";case "relativeToGround":return"Relative to Ground";case "clampToSeaFloor":return"Clamp to Sea Floor";case "relativeToSeaFloor":return"Relative to Sea Floor";default:return""}};UL.prototype.mapAltitudeModeToName=UL.prototype.xG;function Vz(a){iu.call(this,a);this.ma=Vb();this.pa="Feature Layers";this.Ea="Features";this.j="New Layer";this.K=!1;this.jb=this.Ia=null;this.cb=!0;this.oa=null;this.Ca="<defaultlayernodeui></defaultlayernodeui>";this.sa="vectorlayerui";this.A=!0;this.U=this.aa=!1;zja.bind(this);this.I=this.o=null;this.P=!1;this.ib="vector";this.ka=!1;this.set("renderOrder",null);L.s().H("propertychange",this.sy,!1,this)}w(Vz,iu);F(Vz,"os.layer.ILayer");F(Vz,"os.filter.IFilterable");F(Vz,"os.legend.ILegendRenderer");
jg["os.layer.Vector"]=Vz;g=Vz.prototype;g.J=function(){Vz.C.J.call(this);L.s().M("propertychange",this.sy,!1,this);this.Wa(!1);var a=this.N();a&&a.dispose();a=wz.s();var b=this.D();b in a.g&&delete a.g[b]};g.Cb=function(a){var b=this.N();b&&b instanceof Rz&&(yf(b,"propertychange",this.Cx,this),CK(b,!1));Vz.C.Cb.call(this,a);a&&a instanceof Rz&&(H(a,"propertychange",this.Cx,this),CK(a,L.s().Qa()))};g.sy=function(a){if("map:change:view3d"==a.j){a=a.o;Aja(this);var b=this.N();b instanceof Rz&&CK(b,a)}};
g.Cx=function(a){var b=a.j;switch(b){case QI:b=this.N();if(a=a.o)for(var c=0,d=a.length;c<d;c++){var e=a[c],f=L.s(),h=e;f.ha&&(b.Xe(e)?f.ha.QA(h):f.ha.rB(h))}break;case MH:this.Wa(a.o);break;case "visible":this.Hd(a.o);break;case SI:this.aa=a.o;Aja(this);break;case "timeEnabled":b=new K("timeEnabled",a.o,a.u);this.dispatchEvent(b);break;case "style":b=new K("style",a.o,a.u);this.dispatchEvent(b);break;case "lock":b=new K("lock",a.o,a.u);this.dispatchEvent(b);break;case NH:b=new K("refreshInterval",
a.o,a.u);this.dispatchEvent(b);break;case "colorModel":b=new K("colorModel",a.o,a.u);this.dispatchEvent(b);break;case "columns":case "columnAdded":this.dispatchEvent(new K(b));break;case "altitude":b=new K("altitude",a.o,a.u),this.dispatchEvent(b)}};function Aja(a){a.aa&&!L.s().Qa()?(a.U=!0,0!=a.yb()&&a.dc(!1)):(a.U=!1,a.yb()!=a.A&&a.dc(a.A))}g.D=function(){return this.ma};g.ga=function(a){this.ma=a};
g.gd=function(){var a=vz(wz.s(),this.D());if(a){a=Iy(a,!0);var b=this.D(),c=['<image xlink:href="v1541734487/images/features-base.png" x="0" y="0" width="16px" height="16px"><title>Feature layer</title></image>'],d=this.N();d instanceof Rz&&(d.Qc&&c.push('<image class="time-icon" xlink:href="v1541734487/images/time-base.png" x="0" y="0" width="16px" height="16px"><title>This layer supports animation over time</title></image>'),d.I&&c.push('<image xlink:href="v1541734487/images/lock_tiny_white.png" x="0" y="0" width="16px" height="16px"><title>This layer is locked.</title></image>'));
d=[];var e=this.N();e instanceof Rz&&e.G&&d.push('<i class="fa fa-tint" title="This layer has auto/manual coloring rules applied"></i>');return Nz(b,c,d,a)}a=['<img src="v1541734487/images/features-base.png" title="Feature layer"/>'];b=this.N();b instanceof Rz&&(b.Qc&&a.push('<img class="time-icon" src="v1541734487/images/time-base.png" title="This layer supports animation over time"/>'),b.I&&a.push('<i class="fa fa-lock" title="This layer is locked."></i>'),b.G&&a.push('<i class="fa fa-tint" title="This layer has auto/manual coloring rules applied"></i>'));
return a.join("")};g.Va=function(){return this.oa};g.ql=function(a){this.oa=a};g.ob=function(){return this.K};g.Wa=function(a){if(this.K!==a){var b=this.K;this.K=a;this.dispatchEvent(new K("loading",a,b))}};g.rb=function(){return this.Ia};g.Ec=function(a){this.Ia=a};g.De=function(){return this.cb};g.Ag=function(a){this.cb=a};g.getTags=function(){return this.jb};g.vb=function(a){this.jb=a};g.S=function(){return this.j};
g.Ta=function(a){if(this.j!==a){var b=this.j;this.j=a;this.dispatchEvent(new K("title",a,b))}};g.Sc=function(){return this.pa};g.he=function(a){this.pa=a};g.cg=function(){return this.Ea};g.ve=function(a){this.Ea=a};g.hd=function(){return this.A};g.Hd=function(a){a=!!a;if(a!=this.A){this.A=a;this.U||this.dc(a);this.dispatchEvent(new K("visible",a,!a));var b=this.N();b instanceof Rz&&b.dc(a)}};g.yg=function(a){this.dc(a)};g.hk=function(){return this.yb()};g.Ld=function(){return this.Ca};
g.Nf=function(a){this.Ca=a};g.xd=function(a){var b=this.N();b instanceof Rz&&(b.g&&b.g.xd(a),b.set("opacity",a,!0));Vz.C.xd.call(this,a)};g.Of=function(a){var b=this.N();b instanceof Rz&&(b.g&&b.g.Of(a),b.set("zIndex",a,!0));Vz.C.Of.call(this,a);VB()};function Bja(a){var b=a.N();b instanceof Rz?nfa(b):Ag(a)}
g.Ei=function(a){var b=this.N();if(tH)switch(a){case uH:Bja(this);break;case rK:b instanceof Rz&&xK(b);break;case VL:b instanceof Rz&&EK(b,!1);break;case WL:b instanceof Rz&&EK(b,!0);break;case RH:!xF(Y,this.D())&&b instanceof Rz&&(a=b.o)&&(a=(a.B||ug).Ya(),0<a&&a<ng&&yF(vg.s(),a));break;case yH:b instanceof NK&&b.refresh();break;case XL:case YL:b instanceof Rz&&b.gj()&&b.vh(a==XL);break;case xH:a=new Tv("removeLayer",this.D());N.dispatchEvent(a);break;case wH:rH(this);break;case ZL:b instanceof Rz&&
BJ(b,null)}};g.mk=function(){return this.sa};g.zg=function(a){this.sa=a};g.rm=function(){return null};g.Zg=function(){return null!=this.o};g.uf=function(){var a=this.Va(),b=Y.Ka(a.id);if(F(b,"os.filter.IFilterable"))return b.uf();b=a.url;a=(a=a.params)?a.get("typename"):null;return b&&a?b+"!!"+a:null};g.pm=function(){return[this.D()]};g.hj=function(){null!=this.o&&this.o(this)};g.Se=function(){return null!=this.I?this.I(this):null};
g.yl=function(a,b){var c=this.N(),d=c instanceof Rz;if(tH)switch(a){case vH:case uH:case SH:return!0;case wH:return!!b&&za(b)&&1===b.length;case pK:case qK:case rK:return d&&c.oa[a];case VL:return d&&c.Qc;case WL:return d&&!c.Qc;case RH:return a=NaN,d&&(d=Y.Ka(this.D()),null!=d&&(a=d.eg()),(isNaN(a)||0>=a)&&(c=c.o)&&(a=(c.B||ug).Ya())),0<a&&a<ng;case xH:return this.De();case yH:return"Reference Layers"!==this.pa&&d&&c.ah();case XL:return d&&c.gj()&&!c.I;case YL:return d&&c.gj()&&c.I;case ZL:return d&&
null!=c.G;default:return d&&c.oa[a]}return!1};g.wk=function(){return this.ib};g.sl=function(a){this.ib=a};g.lk=function(){return this.ka};g.ao=function(a){this.ka=a};g.Kf=function(a){if(a.showVector&&TH(a)){var b=this.N();if(b&&qJ(b)){var c=lia(b,a),d=b.S(!a.showVectorType);a.showCount&&(d+=" ("+b.dg()+")");rJ(c,a,d,0)}}};
g.ra=function(a){a=a||{};a.visible=this.hd();a.opacity=this.Nb();a.minResolution=this.oe();a.maxResolution=this.ne();var b=vz(wz.s(),this.D());b&&(a.arrowSize=b.arrowSize,a.arrowUnits=b.arrowUnits,a.color=Iy(b),a.replaceStyle=b.replaceStyle,a.size=oz(b),a.icon=kz(b),a.labels=b.labels,a.labelColor=b.labelColor,a.labelSize=b.labelSize,a.lobColumnLength=b.lobColumnLength,a.lobLength=b.lobLength,a.lobLengthType=b.lobLengthType,a.lobLengthColumn=b.lobLengthColumn,a.lobLengthError=b.lobLengthError,a.lobLengthErrorColumn=
b.lobLengthErrorColumn,a.lobLengthErrorUnits=b.lobLengthErrorUnits,a.lobLengthUnits=b.lobLengthUnits,a.lobBearingColumn=b.lobBearingColumn,a.lobBearingError=b.lobBearingError,a.lobBearingErrorColumn=b.lobBearingErrorColumn,a.rotationColumn=b.rotationColumn,a.showRotation=b.showRotation,a.showArrow=b.showArrow,a.showEllipse=b.showEllipse,a.showError=b.showError,a.showLabels=b.showLabels,a.showEllipsoids=b.showEllipsoids,a.showGroundRef=b.showGroundRef);(b=this.N())&&F(b,"os.source.ISource")&&(a=b.ra(a));
return a};
g.restore=function(a){null!=a.id&&this.ga(a.id);var b=XB(wz.s(),this.D());null!=a.provider&&this.Ec(a.provider);null!=a.tags&&this.vb(a.tags);null!=a.title&&this.Ta(a.title);null!=a.layerType&&this.he(a.layerType);null!=a.explicitType&&this.ve(a.explicitType);null!=a.visible&&this.Hd(a.visible);null!=a.featureDirective&&(this.pb=a.featureDirective);null!=a.layerUI&&this.zg(a.layerUI);null!=a.nodeUI&&this.Nf(a.nodeUI);var c=a.alpha||a.opacity;null!=c&&this.xd(c);this.Lj(a.minResolution||this.oe());
this.Kj(a.maxResolution||this.ne());null!=a.color&&jz(b,hz(a.color));null!=a.replaceStyle&&(b.replaceStyle=a.replaceStyle);null!=a.size&&pz(b,a.size);null!=a.icon&&lz(b,a.icon);null!=a.showArrow&&(b.showArrow=a.showArrow);null!=a.showError&&(b.showError=a.showError);null!=a.showEllipse&&(b.showEllipse=a.showEllipse);null!=a.showEllipsoids&&(b.showEllipsoids=a.showEllipsoids);null!=a.showGroundRef&&(b.showGroundRef=a.showGroundRef);null!=a.showRotation&&(b.showRotation=a.showRotation);b.arrowSize=
a.arrowSize||100;b.arrowUnits=a.arrowUnits||"m";b.lobColumnLength=a.lobColumnLength||1E3;b.lobLength=a.lobLength||1E3;b.lobLengthError=a.lobLengthError||1;b.lobLengthType=a.lobLengthType||"manual";b.lobLengthColumn=a.lobLengthColumn||"";b.lobLengthErrorColumn=a.lobLengthErrorColumn||"";b.lobBearingColumn=a.lobBearingColumn||"";b.lobLengthErrorUnits=a.lobLengthErrorUnits||"m";b.lobLengthUnits=a.lobLengthUnits||"m";b.lobBearingError=a.lobBearingError||1;b.lobBearingErrorColumn=a.lobBearingErrorColumn||
"";b.rotationColumn=a.rotationColumn||"";b.labels=a.labels||[Cz()];b.labelColor=a.labelColor;b.labelSize=a.labelSize||14;b.showLabels=a.showLabels||!1;(b=this.N())&&F(b,"os.source.ISource")&&b.restore(a)};function zja(a){if(a){var b=Cy(a)||this.S();bL(a,b)}};function $L(){this.alpha=1;this.color="rgba(255,255,255,1)";this.columns=null;this.id="";this.params=null;this.size=3;this.title="New Layer";this.url="";this.visible=!0;this.log=Cja}var Cja=E.V("os.layer.config.LayerConfig");
$L.prototype.ac=function(a){this.id=a.id||Vb();this.columns=a.columns||null;null!=a.title&&(this.title=a.title);null!=a.url&&(this.url=a.url);if("string"===typeof a.params)this.params=new ch(a.params);else if(a.params){var b=a.params,c=Mg(b);if("undefined"==typeof c)throw Error("Keys are undefined");var d=new ch(null,void 0);b=Lg(b);for(var e=0;e<c.length;e++){var f=c[e],h=b[e];q(h)?mh(d,f,h):d.add(f,h)}this.params=d}this.alpha=me(a.alpha||a.opacity||1,0,1);null!=a.size&&(this.size=a.size);null!=
a.color&&(this.color=a.color);"string"===typeof this.color&&(this.color=this.color.replace(/^0x/,"#"));null!=a.visible&&(this.visible=a.visible)};function aM(a){Vz.call(this,a)}w(aM,Vz);jg["rustbucket.RustbucketLayer"]=aM;aM.prototype.wk=function(){return"rustbucket"};function bM(a){Rz.call(this,a);this.log=Dja;this.yf=!0;EK(this,!0);this.ids=[];this.data=[];RustBucketAPI.setMetadata("twitter",{DATE_TIME:RustBucket.Type.STRING,LON:RustBucket.Type.NUMBER,LAT:RustBucket.Type.NUMBER,GEOM:RustBucket.Type.STRING,SECLAB:RustBucket.Type.STRING,FR24_ID:RustBucket.Type.STRING,FLIGHT_NUMBER:RustBucket.Type.STRING,TAIL_NUMBER:RustBucket.Type.STRING,CALLSIGN:RustBucket.Type.STRING,ICAO_3A_CODE:RustBucket.Type.NUMBER,ACFT_MODEL:RustBucket.Type.STRING,AID:RustBucket.Type.STRING,
ORIGIN_CODE:RustBucket.Type.STRING,ORIGIN_AFLD_CALC:RustBucket.Type.STRING,ORIGIN_CTRY_CALC:RustBucket.Type.STRING,DEST_CODE:RustBucket.Type.STRING,DEST_AFLD_CODE:RustBucket.Type.STRING,DEST_CTRY_CODE:RustBucket.Type.STRING,ALT:RustBucket.Type.NUMBER,BEARING:RustBucket.Type.NUMBER,SPEED_KTS:RustBucket.Type.NUMBER,TIME:RustBucket.Type.STRING,when:RustBucket.Type.NUMBER})}w(bM,Rz);F(bM,"os.source.IImportSource");jg["rustbucket.RustbucketSource"]=bM;var Dja=E.V("rustbucket.RustbucketSource");g=bM.prototype;
g.clear=function(){this.I||(this.ids=[],this.data=[],this.dispatchEvent(new K(LI,this.data)))};g.refresh=function(){this.I||(this.clear(),this.zc([]))};g.zc=function(){this.data=RustBucket.populate_sample_data(1E6);for(var a=0,b=this.data.length-1;a<b;a+=4)this.ids.push(this.data[a]);this.dispatchEvent(new K(LI,this.data))};g.Ad=function(a){var b=RustBucketAPI.getData("twitter",parseInt(a,10));b=new hq(b);b.ga(a);return b};g.dg=function(){return this.ids.length};g.Zd=function(){return this.ids};
g.La=function(){return[]};g.Xe=function(){return!1};g.ly=function(a){var b=a.start,c=a.end,d=a.interval;if(0<d&&this.yb()&&this.Qc){for(var e={},f=Math.floor(b/d)*d;f<=c;){var h=f+d,k=RustBucketAPI.getDataByTime("twitter",{start:f,end:h}).length;e[f]=k;f=h}if(0<gc(e))return d=new DJ,d.ga(this.D()),f=ef(this.Ja()),d.u=f,d.g=e,d.l=a,d.Ta(this.S()),d.dc(this.yb()),d.Ud(new qg(b,c)),d}return null};function cM(){$L.call(this);this.log=cM.g;this.animate=!1}w(cM,$L);cM.prototype.ac=function(a){cM.C.ac.call(this,a);this.animate=!0};cM.prototype.Me=function(a){this.ac(a);var b=this.N(a);b.ga(this.id);b.Ta(this.title);EK(b,this.animate);var c=this.W(b,a);c.restore(a);null!=a.explicitType&&c.ve(a.explicitType);b.refresh();return c};cM.prototype.W=function(a){return new aM({source:a})};cM.prototype.N=function(){return new bM};function dM(a){x.call(this);this.Ba=null;this.nb=!1;this.state="ready";this.title="Add/Remove Layer";this.g=a||null}w(dM,x);dM.prototype.J=function(){dM.C.J.call(this);this.g=null};
function Eja(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):!a.g||pc(a.g)?(a.state="error",a.Ba="Layer configuration not provided.",!1):"id"in a.g?"type"in a.g?!0:(a.state="error",a.Ba='Field "type" must be provided in layer configuration.',!1):(a.state="error",a.Ba='Field "id" must be provided in layer configuration.',!1)}
dM.prototype.add=function(a){if(!a)return this.state="error",this.Ba="Layer configuration not provided.",!1;a=zg(a);if(a instanceof Sf){if(!L.s().W(a.D()))return eM(L.s(),a),O(P.s(),"addData.add-layer-command",1),!0;this.state="error";this.Ba="Layer already on the map: "+a.S();return!1}this.state="error";this.Ba="Unable to create layer.";return!1};
dM.prototype.remove=function(a){if(!a||!a.id)return this.state="error",this.Ba="Layer configuration not provided.",!1;L.s().removeLayer(a.id);O(P.s(),"addData.remove-layer-command",1);return!0};function fM(a){dM.call(this,a);this.title="Add Layer"}w(fM,dM);fM.prototype.Fa=function(){return Eja(this)&&(this.state="executing",this.add(this.g))?(this.state="success",!0):!1};fM.prototype.Db=function(){this.state="reverting";return this.remove(this.g)?(this.state="ready",!0):!1};function gM(a){dM.call(this,a);this.title="Remove Layer"}w(gM,dM);gM.prototype.Fa=function(){return Eja(this)&&(this.state="executing",this.remove(this.g))?(this.state="success",!0):!1};gM.prototype.Db=function(){this.state="reverting";return this.add(this.g)?(this.state="ready",!0):!1};function hM(){C.call(this);this.ma="";this.md=this.g=this.qf=this.yf=this.j=this.Ia=this.tf=null;this.ud=this.Mg=this.aa=this.U=NaN;this.nd=this.sf=this.G=this.pb=!1;this.ie=null;this.o="base";this.Ze=null;this.log=Fja}w(hM,C);F(hM,"os.data.IDataDescriptor");var Fja=E.V("os.data.BaseDescriptor");hM.prototype.D=function(){return this.ma};hM.prototype.getId=hM.prototype.D;g=hM.prototype;g.ga=function(a){this.ma=a};g.Lh=function(){return[this.D()]};g.ag=function(){return this.o};g.rb=function(){return this.tf};
g.Ec=function(a){this.tf=a};g.ik=function(){if(this.Ze)return this.Ze;var a=Y,b=this.D();return b&&(b=b.split("#"),b.length)?a.rb(b[0]):null};g.S=function(){return this.j};hM.prototype.getTitle=hM.prototype.S;g=hM.prototype;g.Ta=function(a){var b=this.j;this.j=a;this.dispatchEvent(new K("title",a,b))};g.wp=function(){return null};g.uk=function(){return this.T()};g.T=function(){return this.yf};g.Ub=function(a){this.yf=a};g.getColumns=function(){return this.g};g.setColumns=function(a){this.g=a};
g.Ja=function(){return this.qf};g.Yc=function(a){this.qf=a};g.qb=function(){return this.md};hM.prototype.getDescription=hM.prototype.qb;g=hM.prototype;g.gd=function(){return null};g.fb=function(a){this.md=a};g.eg=function(){return this.U};g.qk=function(){return this.aa};g.isActive=function(){return this.pb};
g.setActive=function(a){if(this.isActive()!==a){this.pb=a;try{this.xg()&&iM(this)}catch(b){E.error(this.log,"Error setting descriptor activation state",b),this.pb=!1,iM(this)}this.dispatchEvent(new K("active",a,!a))}};g.xg=function(){return!0};function iM(a){a.isActive()&&(a.ud=Ia());var b=a.isActive()?"descriptor.activate":"descriptor.de-activate";O(P.s(),b+"."+a.ag(),1);b=a.isActive()?"descriptorActivated":"descriptorDeactivated";a.dispatchEvent(b);N.dispatchEvent(new dF(b,a))}g.clearData=function(){};
g.isLocal=function(){return this.nd};g.ob=function(){return this.sf};g.Wa=function(a){this.sf=a};g.getTags=function(){return this.ie};g.vb=function(a){this.ie=a};g.qe=function(){var a=this.getTags();return this.S()+" "+this.T()+" "+this.qb()+" "+this.rb()+(a&&a.length?a.join(" "):"")};g.Ld=function(){return""};g.gh=function(){return!1};
g.ra=function(a){a||(a={});a.id=this.D();a.provider=this.rb();a.providerType=this.Ia;a.title=this.S();a.type=this.T();a.color=this.Ja();a.description=this.qb();a.maxDate=this.eg();a.minDate=this.qk();a.lastActive=this.ud;a.deleteTime=this.Mg;a.tags=this.getTags();a.dType=this.ag();a.active=this.isActive();if(this.g&&0<this.g.length)try{for(var b=[],c=0,d=this.g.length;c<d;c++)this.g[c].temp||b.push(this.g[c].ra());a.columns=b}catch(e){}return a};
g.restore=function(a){this.ga(a.id);this.Ec(a.provider);this.Ia=a.providerType;this.Ta(a.title);this.Ub(a.type);this.Yc(a.color);this.fb(a.description);this.U=a.maxDate||NaN;this.aa=a.minDate||NaN;this.ud=a.lastActive||NaN;this.Mg=a.deleteTime||NaN;this.vb(a.tags);this.G=a.active;if((a=a.columns)&&0<a.length)try{for(var b=[],c=0,d=a.length;c<d;c++){var e=new Wv;e.restore(a[c]);b.push(e)}this.setColumns(b)}catch(f){}};
function Gja(a){var b="Layer Name: "+a.S()+"<br>",c=a.rb();c&&(b+="Provider: "+c+"<br>");c=a.T()||"";Fb(c,"s")&&(c=c.substring(0,c.length-1));c&&(b+="Type: "+c+"<br>");if(!isNaN(a.qk())&&!isNaN(a.eg())){c=new ig;c.g.setTime(a.qk());var d=new ig;d.g.setTime(a.eg());b+="Time: "+c.xi(!0,!0)+" to "+d.xi(!0,!0)+"<br>"}b+="<br>";c=a.qb();b=b+((c?c:"No description provided")+"<br><br>")+("Tags: "+(a.getTags()?a.getTags().join(", "):"(none)"));return b+"<br><br>"}
g.yh=function(){!0===this.G&&Dc(this.setActive.bind(this,this.G));this.G=void 0};function Hja(a,b){return Kb(a.S(),b.S())}function Ija(a,b){return isNaN(b.ud)&&isNaN(a.ud)?0:isNaN(b.ud)&&!isNaN(a.ud)?1:!isNaN(b.ud)&&isNaN(a.ud)?-1:xb(b.ud,a.ud)};function jM(){C.call(this);this.g=!1;this.init()}w(jM,C);xa(jM);jM.prototype.init=function(){this.g=navigator.onLine;window.addEventListener("online",this.j.bind(this));window.addEventListener("offline",this.j.bind(this))};jM.prototype.j=function(a){a&&"online"==a.type?(this.g=!0,N.dispatchEvent("online")):"offline"==a.type&&(this.g=!1,N.dispatchEvent("offline"))};jM.prototype.Ue=function(){return this.g};
function Jja(a){var b=navigator.onLine;if(a.g!=b){var c=new Event(b?"online":"offline");a.j(c)}a.g=b;return a.g};function LE(){hM.call(this);this.log=Kja;this.layers=[];this.ka=[];this.B={};this.Ne=jM.s();N.H("addLayer",this.by,!1,this);N.H("removeLayer",this.ey,!1,this)}w(LE,hM);var Kja=E.V("os.data.LayerSyncDescriptor"),Lja=["opacity","contrast","brightness","saturation"],Mja=["minResolution","maxResolution"];function Nja(a){return a.id||""}g=LE.prototype;g.J=function(){LE.C.J.call(this);N.M("addLayer",this.by,!1,this);N.M("removeLayer",this.ey,!1,this);Oja(this)};
function kM(a,b){a.ka=(b||lM(a)).map(Nja)}function lM(a){var b=a.Va();return b?(q(b)||(b=[b]),b.map(a.TC,a)):b}g.xg=function(){if(this.isActive()){var a=lM(this);kM(this,a);if(a)for(var b=0;b<a.length;b++){var c=a[b],d=c.id||"";d&&((d=L.s().W(d))?Pja(this,d):(d=zg(c))&&eM(L.s(),d))}}else Oja(this);Qja(this);return!0};function Pja(a,b){-1===a.layers.indexOf(b)&&(H(b,"propertychange",a.Zh,a),a.layers.push(b),a.setActive(!0))}
g.removeLayer=function(a){if(-1<this.layers.indexOf(a)){var b=mM(this);jc(b).forEach(function(a){Zh(this.B[a],b[a],!0)},this);yf(a,"propertychange",this.Zh,this);mb(this.layers,a)}this.layers.length||this.setActive(!1)};g.by=function(a){"string"!==typeof a.layer&&(a=a.layer,this.ka.length||kM(this),-1<this.ka.indexOf(a.D())&&Pja(this,a))};g.ey=function(a){"string"!==typeof a.layer&&(a=a.layer,this.ka.length||kM(this),-1<this.ka.indexOf(a.D())&&-1<this.layers.indexOf(a)&&this.removeLayer(a))};
function Oja(a){a.B=mM(a);for(var b=a.layers.length-1;0<=b;b--){var c=a.layers[b];c&&L.s().removeLayer(c)}a.Wa(!1)}g.TC=function(a){var b={};Zh(a,b,!0);this.B&&(a=a.id)&&a in this.B&&Zh(this.B[a],b,!0);return b};var Rja=["style","refreshInterval","timeEnabled","visible"];g=LE.prototype;g.Zh=function(a){a instanceof K?(a=a.j||"","loading"==a?Qja(this):-1<Rja.indexOf(a)?this.bn():nM(this)):a instanceof Kf&&(-1<Lja.indexOf(a.key)?this.bn():-1<Mja.indexOf(a.key)&&nM(this))};
function Qja(a){var b=a.layers;if(b)for(var c=0,d=b.length;c<d;c++)if(b[c].ob()){a.Wa(!0);return}a.Wa(!1)}g.bn=function(){nM(this)};function nM(a){a.B=mM(a);Y.Bs()}g.ra=function(a){a||(a={});a.layer=mM(this);return LE.C.ra.call(this,a)};g.restore=function(a){this.B=a.layer||{};LE.C.restore.call(this,a)};function mM(a){var b={};a=a.layers;for(var c=0,d=a.length;c<d;c++)b[a[c].D()]=a[c].ra();return b}g.Ld=function(){return"<defaultlayernodeui></defaultlayernodeui>"};function Sja(){this.columns=[];this.color="#ffffff";this.title=this.tags=this.description="";this.mappings=[];this.preview=[];this.previewSelection=null};function oM(a){Sja.call(this);this.file=a||null;this.replace=!1}w(oM,Sja);function pM(a){C.call(this);this.nb=!0;this.title="Activate/Deactivate Descriptor";this.Ba=null;this.state="ready";this.id=a.D();this.log=Tja}w(pM,C);var Tja=E.V("os.data.AbstractDescriptor");pM.prototype.J=function(){pM.C.J.call(this);qM(this)};pM.prototype.Ka=function(){return this.id?Y.Ka(this.id):null};function Uja(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.Ka()?!0:(a.state="error",a.Ba="Descriptor unavailable.",!1)}
function Vja(a){try{var b=a.Ka();b&&!b.isActive()?(b.Ua("descriptorActivated",a.g,!1,a),b.Ua("descriptorDeactivated",a.l,!1,a),b.setActive(!0),O(P.s(),"addData.add-layer-command",1)):a.g()}catch(c){return E.error(a.log,"Unable to activate descriptor: "+c.message,c),qM(a),a.state="error",!1}return!0}function Wja(a){var b=a.Ka();b&&b.isActive()?(b.Ua("descriptorDeactivated",a.j,!1,a),b.setActive(!1),O(P.s(),"addData.remove-layer-command",1)):a.j();return!0}
function qM(a){var b=a.Ka();b&&(b.M("descriptorActivated",a.g,!1,a),b.M("descriptorDeactivated",a.j,!1,a),b.M("descriptorDeactivated",a.l,!1,a))}pM.prototype.l=function(){qM(this);this.state="error";this.dispatchEvent(new A("executed"))};function rM(a){pM.call(this,a);this.log=Xja;var b=a.T();this.title="Add "+(b?b+" ":"")+'"'+a.S()+'"'}w(rM,pM);var Xja=E.V("os.data.ActivateDescriptor");rM.prototype.Fa=function(){return Uja(this)?(this.state="executing",Vja(this)):!1};rM.prototype.Db=function(){this.state="reverting";return Wja(this)};rM.prototype.g=function(){qM(this);this.state="success";this.dispatchEvent(new A("executed"))};rM.prototype.j=function(){qM(this);this.state="ready";this.dispatchEvent(new A("reverted"))};Q.directive("fileexists",[function(){return{restrict:"E",templateUrl:"v1541734487/views/im/fileexists.html",controller:Yja,controllerAs:"fileExists"}}]);function Yja(a){a.$watch("confirmValue",function(b,c){b!=c&&(a.$parent.confirmValue=b)});a.application=Wh("the application");a.$emit("window.ready")}Yja.$inject=["$scope"];var Zja=[[239,187,191],[255,254],[254,255]],$ja=E.V("os.file.mime.text");function Dw(a,b){if(a){a:{if(b){var c=b.u;if(c){var d=aka(a,c);break a}}d=void 0}if(!d){var e="";c=new Uint8Array(a);for(var f=Math.min(c.length,16384),h=0;h<f;h++)e+=String.fromCharCode(c[h]);if(e=jschardet.detect(e).encoding){h=0;for(d=Zja.length;h<d;h++)if(f=Zja[h],c.length>=f.length&&yb(c.slice(0,f.length),f)){a=a.slice(f.length);break}d=aka(a,e);b&&(b.u=e)}}d&&(d=d.replace(/(^\x00+)|(\x00+$)/g,""));return d}}
function bka(a){try{return(new TextEncoder).encode(a).buffer}catch(b){E.error($ja,"Failed to create ArrayBuffer from string.",b)}}lw("text/plain",function(a,b){return Sc(Dw(a,b))},1E3);function aka(a,b){try{return(new TextDecoder(b.toLowerCase())).decode(new DataView(a))}catch(c){E.error($ja,"No TextDecoder could be found for the encoding "+b.toLowerCase())}};function sM(){this.g=[]}xa(sM);
function cka(a,b){var c=a.Pb(),d=a.o;if(c||d){c&&"string"===typeof c&&(c=bka(c));var e=function(b){if(b){var c=xw(b);c&&-1<c.indexOf("text/plain")&&Cw(a);a.Ub(b)}return b};c&&c instanceof ArrayBuffer?ww(c.slice(0,16384),a).then(e).then(b):d instanceof Blob?th(iw(d.slice(0,16384)),function(c){ww(c,a).then(e).then(b)}):E.error(dka,"Failed to detect content type. The content was not a string or ArrayBuffer.")}else(c=a.T())||E.error(dka,"The content or original File instance must be present on the os.file.File for content type detection to work"),b(c)}
var dka=E.V("os.file.FileManager");sM.prototype.j=function(){return!0};function eka(a){var b=new tM(!1);gb(a.g,b)||(a.g.push(b),a.g.sort(a.l))}sM.prototype.l=function(a,b){return xb(b.zr(),a.zr())};Q.directive("urlimport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/file/urlimport.html",controller:uM,controllerAs:"urlImport"}}]);function uM(a,b){this.v=a;this.L=b;this.loading=this.l=!1;this.url="";this.L.find('input[name="url"]').focus();a.$emit("window.ready");a.$on("$destroy",this.o.bind(this))}uM.$inject=["$scope","$element"];
uM.prototype.o=function(){if(!this.l){var a=this.v.method;a&&(a.M("complete",this.g,!1,this),a.M("cancel",this.g,!1,this),a.M("error",this.j,!1,this),a.dispatchEvent("cancel"))}this.L=this.v=null};uM.prototype.accept=function(){if(!this.v.urlForm.$invalid&&this.v.method){this.loading=!0;var a=this.v.method;a.Mb(this.url);a.Ua("complete",this.g,!1,this);a.Ua("cancel",this.g,!1,this);a.Ua("error",this.j,!1,this);a.Dk()}else this.close()};uM.prototype.accept=uM.prototype.accept;
uM.prototype.close=function(){this.L&&kx(this.L)};uM.prototype.close=uM.prototype.close;uM.prototype.g=function(a){a=a.target;a.M("complete",this.g,!1,this);a.M("cancel",this.g,!1,this);a.M("error",this.j,!1,this);this.l=!0;this.loading=!1;this.close()};uM.prototype.j=function(a){a=a.target;a.M("complete",this.g,!1,this);a.M("cancel",this.g,!1,this);a.M("error",this.j,!1,this);this.loading=!1;R(this.v)};function vM(){C.call(this);this.log=wM;this.ab=this.g=this.j=null}w(vM,C);var wM=E.V("os.ui.file.method.UrlMethod");g=vM.prototype;g.J=function(){vM.C.J.call(this);this.Xj();z(this.g);this.g=null};g.Ma=function(){return this.ab};g.Mb=function(a){this.ab=a};g.zr=function(){return 0};g.Xj=function(){this.j=null};g.clone=function(){return new this.constructor};
g.Dk=function(){this.Xj();this.ab?this.jj():fx({id:"urlimport",label:"Import URL",icon:"fa fa-cloud-download",x:"center",y:"center",width:"400","min-width":"400","max-width":"400",height:"auto",modal:!0,"show-close":!0,"no-scroll":!0},"<urlimport></urlimport>",void 0,void 0,void 0,{method:this})};
g.jj=function(){if(this.ab){this.g&&(this.g.dispose(),this.g=null);var a=this.ab.lastIndexOf("?file=");-1!=a&&(this.ab=this.ab.substring(a+6));this.g=new Ni(this.ab);Si(this.g,"*/*");if(!od||Bd(10))this.g.B="arraybuffer";this.g.H("success",this.FL,!1,this);this.g.H("error",this.EL,!1,this);this.g.load()}else E.error(wM,"URL cannot be null!"),this.dispatchEvent("cancel")};
g.FL=function(){var a=this.g.j.toString(),b=a.indexOf("?"),c=a.lastIndexOf("/")+1;b=decodeURI(a.substring(-1==c?0:c,-1==b?a.length:b));if(c=this.g.I)if(c=c["Content-Disposition"]||c["content-disposition"]){var d=/filename="(.*?)"/.exec(c);d&&d[1]?b=d[1]:(c=c.split("filename="),0<c.length&&c[1]&&(b=c[1]))}c=this.g.g;this.g.dispose();this.g=null;this.j=Fw(b,a,void 0,c);this.dispatchEvent("complete");N.dispatchEvent(new Ei("userUrl",a))};
g.EL=function(){var a='<strong>Unable to load URL "'+this.ab+'"!</strong><br>Please check that it was entered correctly.';this.g.dispose();this.g=null;rj(tj,a,Qh,wM);this.dispatchEvent("error")};function xM(){qG.call(this);this.ja="ALTITUDE";this.g="ALTITUDE (m)*";this.type=this.j="Altitude";this.P=this.o="ALTITUDE_UNITS";this.units="m";this.K=Dp;this.u=bda;this.O=cda;this.I=dda;this.G=this.B=!1}w(xM,qG);hy(fy.s(),"Altitude",xM);g=xM.prototype;g.Tc=function(){return this.units};g.cd=function(a){this.units=a;"m"!=this.units&&(this.G=!0)};g.D=function(){return this.j};g.ba=function(){return this.type};
g.Fa=function(a){if(a&&this.ja){var b=this.g||this.ja;if(a&&null!=a.la.GEOM_ALT)by(a,b,Math.round(a.la.GEOM_ALT));else{var c=Number(ay(a,this.ja));if(isNaN(c))c=0;else{"m"!==this.units&&(c=Ot(c,"m",this.units));if(!this.G){var d=cy(a,this.B?this.I:this.u);d&&(this.o=d);var e=ay(a,this.o);e&&(d=null,e=ac(e.toLowerCase()),lc(Lt,e)?d=kc(Lt,e):mc(Kt,e.toLowerCase())&&(d=e.toLowerCase()),e=d);e&&(c=Ot(c,"m",e))}c=Math.round(c);this.B&&(c=-c)}by(a,b,c);d=b||"ALTITUDE";b=a.Z();b instanceof hp&&(c=b.flatCoordinates,
3>c.length||0===c[2])&&(a=Number(a.get(d)||0),isNaN(a)&&(a=0),c[2]=a,ip(b,"XYZ",c))}}};g.hf=function(){return!0};g.Wd=function(a){if(a)for(var b=a.length;b--;){var c=a[b],d=cy(c,this.K);if(d)this.B=!1;else if(d=cy(c,this.O))this.B=!0;if(d){a=new this.constructor;a.ja=d;a.B=this.B;if(c=cy(c,this.B?this.I:this.u))a.o=c;a.units=this.units;a.G=this.G;return a}}return null};g.clone=function(){var a=xM.C.clone.call(this);a.cd(this.Tc());a.o=this.o;a.P=this.P;a.G=this.G;a.B=this.B;return a};function yM(){C.call(this)}w(yM,C);yM.prototype.wc=function(){this.dispatchEvent(new A("error"))};yM.prototype.gi=function(){this.dispatchEvent(new A("complete"))};var RK="threadProgress";function zM(a){A.call(this,a)}w(zM,A);function fka(){A.call(this,RK)}w(fka,A);function AM(a){C.call(this);this.j=a;this.g=new Fh(this.l,5,this)}w(AM,C);var gka=E.V("os.thread.Thread");AM.prototype.J=function(){AM.C.J.call(this);this.j=null;this.g.dispose();this.g=null};AM.prototype.start=function(){this.g.start();this.dispatchEvent(new zM("threadStart",this.j))};AM.prototype.stop=function(){this.g.stop();this.dispatchEvent(new zM("threadStop",this.j))};
AM.prototype.l=function(){this.g.stop();try{var a=this.j,b=Ia();E.ta(BM,"processing new chunk");for(var c=0,d=Ia();hka(a)&&250>d-b;){var e=a;try{var f=e.j.Zc(),h=f;if(h)if(q(h))for(var k=0,l=h.length;k<l;k++)h[k]&&e.Kl(h[k]);else e.Kl(h)}catch(p){E.error(BM,"Error while parsing record",p)}d=Ia();c++}var m=Ia()-b;E.ta(BM,"finished processing chunk of "+c+" items in "+m+" ms.");a.dispatchEvent(new A(RK));var n=!hka(a);this.dispatchEvent(new fka(-1,-1));n?(this.g.stop(),this.dispatchEvent(new zM("threadComplete",
this.j))):this.g.start()}catch(p){this.Xa()||this.stop(),E.error(gka,"Thread execution error!",p),this.dispatchEvent(new zM("threadError",this.j))}};function CM(a){C.call(this);this.j=a;this.P=!1;this.o=this.u=null;a=iy.s().g;this.l=vc(a);this.U={};this.A=!1;this.aa=0;this.I=[]}w(CM,C);var BM=E.V("os.im.Importer");g=CM.prototype;g.J=function(){this.reset();this.j&&(this.j.pc(),z(this.j),this.j=null);CM.C.J.call(this)};function DM(a,b){if(b){var c=vc(a.l);a.l={};for(var d=0;d<b.length;d++){var e=b[d];lc(c,e)&&(a.l[e]=uc(c,e))}}a.A=!0}function EM(a,b){a.l={};b&&b.length&&(b.forEach(function(a){this.l[a.D()]=a},a),a.A=!0)}
function FM(a,b){b&&b.forEach(function(a){var b=a.D();this.U[b]=a;b in this.l&&rc(this.l,b);ika(this,a)},a)}function SK(a,b){try{N.dispatchEvent("importer:startImport"),a.j instanceof yM?(a.j.Ua("complete",a.sj,!1,a),a.j.Ua("error",a.an,!1,a),a.j.Cb(b)):(a.j.Cb(b),a.sj())}catch(c){E.error(BM,"Error while configuring parser.",c),a.an()}}
g.sj=function(){this.j instanceof yM&&(this.j.M("complete",this.sj,!1,this),this.j.M("error",this.an,!1,this));try{this.u||(this.P=!1,this.u=new AM(this),this.u.Ua("threadComplete",this.Nk,!1,this),this.u.start())}catch(a){E.error(BM,"Error while importing data.",a),this.Nk()}};g.an=function(){this.j instanceof yM&&(this.j.M("complete",this.sj,!1,this),this.j.M("error",this.an,!1,this));rj(tj,"Error while parsing data. Please see the log for more details.",Qh,BM);this.Nk()};
g.Nk=function(){this.u&&(z(this.u),this.u=null);N.dispatchEvent("importer:stopImport");this.dispatchEvent(new A("complete"));this.j&&this.j.pc()};function hka(a){try{return!a.P&&a.j.Cd()}catch(b){E.error(BM,"Error while checking for next record",b)}return!1}g.Kl=function(a){this.As(a);this.I.push(a)};g.getData=function(a){var b=this.I;if(null!=a?a:1)this.I=[];return b};
g.As=function(a){if(this.A){this.aa++;if(this.l)for(var b in this.l)if(!(b in this.U)){var c=this.l[b].Wd([a]);c&&(rc(this.l,b),ika(this,c))}100<=this.aa&&(this.A=!1)}if(a&&this.o)for(b=0,c=this.o.length;b<c;b++){var d=this.o[b];try{d.Fa(a)}catch(e){E.error(BM,'Error applying mapping "'+d.ja+" > "+d.ba()+'"! ',e)}}};g.reset=function(){this.stop();this.j.pc();this.I=[]};g.stop=function(){this.P=!0};
function ika(a,b){if(a.o){var c=a.o.length-1;a.o[c]instanceof xM?a.o.splice(c,0,b):a.o.push(b)}else a.o=[b]};function GM(){this.g={};this.u={};this.l={};this.o=[];this.j=[];jka(this,"default",CM)}xa(GM);var HM=E.V("os.ui.im.ImportManager");function kka(a,b){return b&&(b=b.toLowerCase(),b in a.g)?a.g[b]:null}GM.prototype.Ep=function(){var a=this.o.slice();0<this.j.length&&a.unshift("Supported data formats: "+this.j.join(", ")+".");return a};function lka(){var a=GM.s(),b=[];fc(a.g,function(a){b.push(a)});ub(b,null,function(a){return a.Jb.toString()});return b}
function IM(a){var b=GM.s();return a&&(a=a.toLowerCase(),a in b.l)?new b.l[a](void 0):null}function JM(a,b,c){c?(a.j.push(b),a.j.sort(xb)):(a.o.push(b),a.o.sort(xb))}function KM(a,b,c){b=b.toLowerCase();b in a.g&&E.hb(HM,'The import UI "'+b+'" has already been registered with the import manager!');a.g[b]=c}function jka(a,b,c){b=b.toLowerCase();b in a.u?E.info(HM,'The importer type "'+b+'" has already been registered with the import manager!'):a.u[b]=c}
function LM(a,b,c){b=b.toLowerCase();b in a.l?E.info(HM,'The parser type "'+b+'" has already been registered with the import manager!'):a.l[b]=c};Q.directive("filesupport",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/im/filesupport.html",controller:MM,controllerAs:"ctrl"}}]);
function MM(a,b){x.call(this);this.v=a;this.L=b;this.l=this.v.file;this.j=this.v.confirm;this.g=this.v.cancel;this.o=new ft(document);this.o.H("key",this.u,!1,this);this.application=Wh("the application");this.supportsUpload=!1;this.supportContact=Bq(Xh("your system administrator"));this.choice="local";a.$on("$destroy",this.dispose.bind(this));this.l?a.$emit("window.ready"):(this.g&&this.g("Local file could not be loaded."),kx(this.L))}w(MM,x);MM.$inject=["$scope","$element"];
MM.prototype.J=function(){MM.C.J.call(this);z(this.o);this.l=this.v=this.L=null};MM.prototype.cancel=function(){this.g&&this.g("cancel");kx(this.L)};MM.prototype.cancel=MM.prototype.cancel;MM.prototype.confirm=function(){this.j&&this.j();kx(this.L)};MM.prototype.confirm=MM.prototype.confirm;MM.prototype.u=function(a){27==a.keyCode&&this.cancel()};
function mka(a){return new Kc(function(b,c){fx({label:"Unable to Store File",headerClass:"bg-warning u-bg-warning-text",icon:"fa fa-warning",x:"center",y:"center",width:550,"min-width":400,"max-width":800,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0},"<filesupport></filesupport>",void 0,void 0,void 0,{file:a,confirm:b,cancel:c})})};function NM(a,b){this.g=null;this.log=nka;this.j=null;this.B=a||GM.s();this.G=b||sM.s();this.A=b?!1:!0;this.u=this.l=null;this.o=!1}var nka=E.V("os.ui.im.ImportProcess");g=NM.prototype;g.ct=function(a){this.u=a};function OM(a){a.l=new nh;a.g?a.g&&cka(a.g,a.Uw.bind(a)):a.j&&a.j.Dk({manager:a.B})}
function PM(a,b){a.g=b.l;a.o=!1;a.u=b.config;a.g||(b&&"importUrl"==b.type?(a.j=new vM,b.url&&a.j.Mb(b.url)):(b=a.G,b=(b=eb(b.g,b.j))?b.clone():null,a.j=b),a.j&&(a.j.Ua("complete",a.Wy,!1,a),a.j.Ua("cancel",a.Yq,!1,a)))}function QM(a,b){a.j&&(b?(a.j.dispose(),a.j=null):(a.j.M("complete",a.Wy,!1,a),a.j.M("cancel",a.Yq,!1,a),a.j.Xj()))}g.Uw=function(a){a&&this.g?(E.info(this.log,'Detected file with type "'+a+'"'),Jw(this.g)?this.ds()?this.Wm():this.Wg():this.Et()?this.dn():this.Wg()):oka(this)};
function oka(a){a.Ke('Could not determine the file type for "'+a.g.getFileName()+'".')}
g.Wg=function(a){a&&this.ct(a);if(this.g){var b=this.g.T();if(a=kka(this.B,b)){if(Jw(this.g)&&this.A&&a.j&&!this.o&&!(eB.s().g instanceof bB))return this.o=!0,mka(this.g).then(this.sI,this.rI,this),null;if(a.j&&!this.g.Pb()&&(b=Zea(this.g)))return uh(b,this.Wg,this.Ke,this),null;this.l&&this.l.callback(this.g);try{a.Jb(this.g,this.u)}catch(c){oka(this)}}else this.Ke('No import UI was registered for file type "'+b+'"!')}else this.Ke("Unable to import file!");return null};
g.sI=function(a){if(a&&this.g){this.g.Mb(a);var b=this.u;b&&b.descriptor&&(b=b.descriptor,F(b,"os.data.IUrlDescriptor")&&b.Mb(a))}this.Wg()};g.rI=function(a){"cancel"===a?this.Yq():this.Ke("string"==typeof a?a:void 0)};g.Ke=function(a){var b=a;if(!b){b="Failed to import file";if(this.g){var c=this.g.getFileName()||this.g.Ma();c&&(b+=' "'+c+'"')}b+="!"}E.error(this.log,b);rj(qj.s(),b,Qh);this.l&&this.l.Gb(a);QM(this);return null};
g.Wy=function(){this.g=this.j.j;this.o=!1;QM(this);this.g?this.g&&cka(this.g,this.Uw.bind(this)):this.Ke("Failed loading file!")};g.Yq=function(){E.info(this.log,"Import cancelled by user.");QM(this,!0)};g.ds=function(){return this.g&&this.A?gB(eB.s(),this.g):!1};g.Et=function(){return!1};g.Wm=function(){this.Ke('File named "'+this.g.getFileName()+'" already exists!')};g.dn=function(){this.Ke('File with URL "'+this.g.Ma()+'" already exists!')};Q.directive("urlexists",[function(){return{restrict:"E",templateUrl:"v1541734487/views/im/urlexists.html",controller:pka,controllerAs:"urlExists"}}]);function pka(a){a.$watch("confirmValue",function(b,c){b!=c&&(a.$parent.confirmValue=b)});a.$emit("window.ready")}pka.$inject=["$scope"];function RM(){NM.call(this);this.log=qka}w(RM,NM);var qka=E.V("os.ui.im.DuplicateImportProcess");g=RM.prototype;g.ds=function(){return this.g?RM.C.ds.call(this)&&this.Et():!1};g.Et=function(){if(this.g){var a=this.g.Ma();return!!a&&null!=SM(a)}return!1};
g.Wm=function(){var a={confirm:this.ZH.bind(this),confirmValue:"saveNew",prompt:"<fileexists></fileexists>",windowOptions:{label:"File Exists!",icon:"fa fa-exclamation-triangle",x:"center",y:"center",width:400,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0}},b={fileName:this.g.getFileName()};gD(a,b)};
g.dn=function(){var a=this.g.Ma(),b=SM(a).S(),c=this.aI.bind(this);gD({confirm:c,confirmValue:"activate",prompt:"<urlexists></urlexists>",windowOptions:{label:"URL Exists!",icon:"fa fa-exclamation-triangle",x:"center",y:"center",width:450,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0}},{current:b,url:a})};
g.ZH=function(a){var b=this.g;"saveNew"==a?(iB(eB.s(),b),this.Wg()):"replace"==a?uh(jB(eB.s(),b),this.tJ,this.LL,this):"replaceAndImport"==a?this.cs():this.Ke("Unknown choice for duplicate file: "+a)};g.tJ=function(){var a=SM(this.g.Ma());if(a){var b=a.isActive();a.setActive(!1);a=new rM(a);b?a.Fa():AE(BE,a)}};g.LL=function(){this.Ke('Failed to store local file "'+this.g.getFileName()+'"! Cancelling import.')};
g.aI=function(a){var b=this.g.Ma();"activate"==a?SM(b).setActive(!0):"reimport"==a?this.cs():"createNew"==a?this.Wg():this.Ke("Unknown choice for duplicate URL: "+a)};g.cs=function(){this.Wg()};function SM(a){for(var b=Qw(Y),c=0,d=b.length;c<d;c++)if(b[c].gh(a))return b[c];return null};function TM(){RM.call(this)}w(TM,RM);TM.prototype.Wm=function(){TM.C.Wm.call(this)};TM.prototype.dn=function(){TM.C.dn.call(this)};TM.prototype.cs=function(){var a=SM(this.g.Ma()),b=new oM;a instanceof UM&&(b=a.l);b.descriptor=a;b.replace=!0;(a=vz(wz.s(),a.D()))&&(b.color=Iy(a));this.Wg(b)};function VM(){LE.call(this);this.o="config";this.l=null}w(VM,LE);F(VM,"os.data.IReimport");g=VM.prototype;g.D=function(){return this.get("id")||VM.C.D.call(this)};g.S=function(){return this.get("title")||VM.C.S.call(this)};g.T=function(){return this.get("layerType")||VM.C.T.call(this)};g.rb=function(){return this.get("provider")||VM.C.rb.call(this)};g.qb=function(){return this.get("description")||VM.C.qb.call(this)};g.getTags=function(){return this.get("tags")||VM.C.getTags.call(this)};
g.ag=function(){return this.get("descriptorType")||VM.C.ag.call(this)};g.gd=function(){return this.get("icons")||VM.C.gd.call(this)};g.uk=function(){var a=this.T();a&&(a=a.replace(/s$/,"").toLowerCase());return a};g.get=function(a){return a in this.l?this.l[a]:null};g.Va=function(){return this.l||{}};g.gh=function(a){if(a){var b=this.get("url");if(a==b)return!0;b=this.get("urls");if(Array.isArray(b)&&-1<b.indexOf(a))return!0}return!1};g.Ld=function(){return this.l&&this.l.nodeUi?this.l.nodeUi:"<defaultlayernodeui></defaultlayernodeui>"};
g.ra=function(a){a||(a={});var b={},c;for(c in this.l){var d=this.l[c];if("object"!==ya(d)||d.prototype===Object.prototype)b[c]=d}a.base=b;return VM.C.ra.call(this,a)};g.restore=function(a){this.l=a.base;VM.C.restore.call(this,a);kc(a,"base","delayUpdateActive")||this.yh()};function WM(a){pM.call(this,a);this.log=rka;var b=a.T();this.title="Remove "+(b?b+" ":"")+'"'+a.S()+'"'}w(WM,pM);var rka=E.V("os.data.DeactivateDescriptor");WM.prototype.Fa=function(){return Uja(this)?(this.state="executing",Wja(this)):!1};WM.prototype.Db=function(){this.state="reverting";return Vja(this)};WM.prototype.g=function(){qM(this);this.state="ready";this.dispatchEvent(new A("reverted"))};WM.prototype.j=function(){qM(this);this.state="success";this.dispatchEvent(new A("executed"))};function XM(){ko.call(this);this.g=null}w(XM,ko);g=XM.prototype;g.Ga=function(a){var b=this.getState();XM.C.Ga.call(this,a);a=this.getState();b!=a&&this.g&&(b="on"===a,b!==this.g.isActive()&&(b=b?new rM(this.g):new WM(this.g),AE(BE,b)||XM.C.Ga.call(this,"off")))};g.Ka=function(){return this.g};
function YM(a,b){if(b!==a.g){a.g&&a.g.M("propertychange",a.l,!1,a);var c=a.g;a.g=b;a.g.H("propertychange",a.l,!1,a);a.ga(a.g.D());a.Da(a.g.S());po(a,a.g.qb()||"");a.j=a.g.Ld();a.Ga(a.g.isActive()?"on":"off");a.dispatchEvent(new K("descriptor",b,c))}}g.J=function(){this.g&&this.g.M("propertychange",this.l,!1,this);XM.C.J.call(this)};g.D=function(){return this.g?this.g.D():XM.C.D.call(this)};g.ba=function(){return this.g?this.g.S():XM.C.D.call(this)};g.qe=function(){return this.g?this.g.qe():""};
g.getTags=function(){return this.g?this.g.getTags():[]};g.Kc=function(){var a=null;this.g&&(a=this.g.gd());return a?a:XM.C.Kc.call(this)};g.ob=function(){return this.g?this.g.ob():!1};XM.prototype.isLoading=XM.prototype.ob;XM.prototype.l=function(a){var b=a.j;if("active"==b)this.Ga(this.g.isActive()?"on":"off");else if("loading"==b)this.dispatchEvent(new K("loading",a.u,a.o));else if("icons"==b)this.dispatchEvent(new K(b));else if("title"==b||"explicitTitle"==b)this.Da(this.g.S()),this.dispatchEvent(new K("label"))};
XM.prototype.nc=function(a){YM(this,a.Ka());XM.C.nc.call(this,a)};function ZM(){fF.call(this)}w(ZM,fF);function $M(a,b,c,d){d=(null!=d?d:1)?ska(a,b):null;d||(d=new XM,YM(d,b),a.R(d));if(null!=c?c:1)a=b.isActive(),b.setActive(!1),b=new rM(b),a?b.Fa():AE(BE,b)}function tka(a,b,c){var d=ska(a,b);d&&a.removeChild(d);b.setActive(!1);c&&b.clearData()}function ska(a,b){var c=null;if((a=a.na())&&0<a.length)for(var d=a.length;d--;){var e=a[d];if(e.Ka()==b||e.Ka().D()==b.D()){c=e;break}}return c}ZM.prototype.Wb=function(){this.Ga("off");this.Pe=!1;this.Za(!0)};
ZM.prototype.load=function(){this.Bc(null);for(var a=Qw(Y,this.D()+"#"),b=0,c=a.length;b<c;b++)$M(this,a[b],!1,!1);this.dispatchEvent(new bF("dataProviderLoaded",this))};function aN(){fF.call(this)}w(aN,ZM);xa(aN);aN.prototype.Wb=function(a){this.ga("rustbucket");this.Da("Rustbucket");aN.C.Wb.call(this,a);this.Ck=!1};
aN.prototype.load=function(){var a=new VM;a.l={id:"rustbucket",type:"rustbucket",layerType:"Feature Layers",title:"Twitter",description:"The Rustbucket test layer.",icons:'<img src="v1541734487/images/tiles-base.png" title="Tile layer"/><img src="v1541734487/images/features-base.png" title="Feature layer"/><img class="time-icon" src="v1541734487/images/time-base.png" title="This layer supports animation over time"/>'};pF(Y,a);$M(this,a,!1);this.dispatchEvent(new bF("dataProviderLoaded",this))};function bN(a,b){x.call(this);this.Oe={};this.Hi={};this.Yf={};this.jc={};this.od={};this.Wc={};this.dd={};this.ff={};this.Og=new CI(this.qp,25,this);this.layer=a;this.source=a.N();this.map=b;this.view=T(b)}w(bN,x);g=bN.prototype;g.J=function(){bN.C.J.call(this);z(this.Og);this.clearData()};g.Vu=function(a){return this.Yf[a]};g.Fj=function(){this.Oe=Yh(this.Oe);this.Hi=Yh(this.Hi);this.Yf=Yh(this.Yf);this.jc=Yh(this.jc);this.od=Yh(this.od);At=Yh(At)};g.Kv=function(a){a=Ct(a);return null!=a&&!!this.Yf[a]};
function cN(a,b){if(b&&b.length){var c=Sr(b,"float");Strata.GeometryAPI.addRustPoints(c,b.length/4);c=[];for(var d=0,e=b.length-1;d<e;d+=4)c.push(b[d]);b=0;for(d=c.length;b<d;b++)if(e=c[b],a.Fk(e),e=a.Oe[e])for(var f=0,h=e.length;f<h;f++){var k=e[f];a.Ai(k,a.source instanceof Rz?!a.source.Xe(k)&&(!a.source.Qc||!a.source.aa):!1)}a.Og.Pd()}}g.clearData=function(){var a=[],b;for(b in this.Yf)this.Yf[b]&&a.push(Number(b));Ft(a);this.Oe={};this.Hi={};this.Yf={};this.od={}};
g.removeData=function(a){if(a){for(var b=[],c=0;c<a.length;c++){var d=a[c],e=this.Oe[d],f=d;if(d=this.Oe[f])for(this.Oe[f]=void 0,this.Hi[f]=void 0,f=d.length;f--;){var h=d[f],k=this.jc[h];null!=k&&d.push(k);this.Yf[h]=void 0;this.jc[h]=void 0;this.od[h]=void 0;At[h]=void 0}e&&e.length&&Array.prototype.push.apply(b,e)}Ft(b);this.Fj()}};g.oA=function(a){a=Ct(a);if(null!=a){var b=this.jc[a];null!=b&&(null!=this.Wc[b]?this.Wc[b]=void 0:Ft([b]),this.jc[a]=void 0)}};
g.Ai=function(a,b){this.Hi[a]!==b&&(this.Hi[a]=b,this.Oe[a].forEach(function(a){this.zl(a,b);a=this.jc[a];null!=a&&this.zl(a,b)},this),this.Og.Pd())};g.zl=function(a,b){this.ff[a]=void 0!==this.ff[a]?void 0:b};g.zh=function(a,b){b=Dt(b);null!=b&&this.od[a]!==b&&(b in this.dd||(this.dd[b]=[]),this.dd[b].push(a),this.od[a]=b)};g.lA=function(a){a in this.Wc&&(a=this.jc[a],null!=a&&(this.Wc[a]=void 0));return!1};
g.qp=function(){var a=Ct(this.layer);if(!pc(this.Wc)){var b=[],c=[],d=[],e;for(e in this.Wc){var f=this.Wc[e];f&&(c.push(Number(e)),d.push(f.label),Array.prototype.push.apply(b,f.coordinate))}pha(b,d,c,a);this.Wc={}}pc(this.dd)||(Ht(this.dd),this.dd={});pc(this.ff)||(jI(this.ff),this.ff={})};g.Wz=function(a,b,c,d){var e=Ct(d);null!=e&&null==this.jc[a]&&2<=b.length?(2===b.length&&b.push(0),this.jc[a]=e,this.Wc[e]={id:e,coordinate:b,label:c},a=EI(d),this.Ao(e,a)):this.jc[a]=void 0};
g.Ao=function(a,b){this.od[a]!==b&&(b in this.dd||(this.dd[b]=[]),this.dd[b].push(a),this.od[a]=b)};g.Fk=function(a){this.Oe[a]=this.Oe[a]||[];this.Oe[a].push(a);this.Yf[a]=a;At[a]=this};g.av=function(a){a=Ct(a);if(null!=a)return this.jc[a]};function dN(a,b){gI.call(this,a,b);this.context=void 0;this.source=this.layer.N()}w(dN,gI);var uka=["labelVisibility","style"];g=dN.prototype;g.J=function(){dN.C.J.call(this);vka(this);this.source=void 0};
g.rc=function(){vka(this);!this.context&&this.layer&&this.source&&(this.context=new bN(this.layer,this.map),this.Ts(),cN(this.context,this.source.data),H(this.layer,"change:visible",this.Ts,this),H(this.layer,"propertychange",this.xA,this),this.source instanceof Rz&&H(this.source,"propertychange",this.yA,this))};g.reset=function(){};
function vka(a){a.layer&&(yf(a.layer,"change:visible",a.Ts,a),yf(a.layer,"propertychange",a.xA,a));a.source instanceof Rz&&yf(a.source,"propertychange",a.yA,a);a.context&&(z(a.context),a.context=void 0)}g.Ts=function(){var a=Ct(this.layer);if(null!=a){var b={};jI((b[a]=this.layer.yb(),b))}};g.xA=function(a){if(this.l&&this.context&&this.layer instanceof Vz&&a instanceof K){var b=a.j;this.source&&b&&-1<uka.indexOf(b)&&(a=a.o||this.source.data)&&cN(this.context,a)}};
g.yA=function(a){try{var b=a.j}catch(h){return}var c=this.source;switch(b){case KI:this.context&&this.context.clearData();break;case LI:this.context&&((c=a.o)&&c.length&&cN(this.context,c),(c=a.u)&&c.length&&this.context.removeData(c));break;case MI:case NI:case OI:case PI:var d=a.u;d&&cN(this.context,d);(a=a.o)&&cN(this.context,a);break;case QI:if(!c.Qc||!c.aa)if(d=a.o){b=0;for(var e=d.length;b<e;b++){var f=d[b];f&&(a=!c.Xe(f),this.context.Ai(f,a))}}break;case RI:if(c=a.o)for(d in c)a=c[d],this.context.Ai(parseInt(d,
10),a);break;case TI:case UI:if(d=a.u,a=a.o,Yy.test(a)||Yy.test(d)||Xy.test(a)||Xy.test(d))d=c.data,this.context.removeData(d),cN(this.context,d)}};function eN(){Kg.call(this);this.id="rustbucket"}w(eN,Kg);eN.prototype.init=function(){mF(Y,new eF(this.id,aN,this.id,this.id));Yf(Uf.s(),"rustbucket",cM);Kk(Jk.s(),this.id,dN)};Tj(Rj.s(),new eN);function fN(a,b){this.g=a;this.u=b};function gN(a){fN.call(this,a,{mousedown:this.mousedown,mousemove:this.mousemove,mouseup:this.mouseup,mouseover:this.mouseover,mouseout:this.mouseout});this.j=a.j;this.l=[]}I(gN,fN);function hN(a,b){a=a.l;var c=b.clientX;b=b.clientY;for(var d=0,e=a.length,f;d<e&&(f=a[d]);d++){var h=Math.abs(b-f[1]);if(25>=Math.abs(c-f[0])&&25>=h)return!0}return!1}
function iN(a){var b=jN(a,a),c=b.preventDefault;b.preventDefault=function(){a.preventDefault();c()};b.pointerId=1;b.isPrimary=!0;b.pointerType="mouse";return b}g=gN.prototype;g.mousedown=function(a){if(!hN(this,a)){(1).toString()in this.j&&this.cancel(a);var b=iN(a);this.j[(1).toString()]=a;this.g.fireEvent("pointerdown",b,a)}};g.mousemove=function(a){if(!hN(this,a)){var b=iN(a);this.g.fireEvent("pointermove",b,a)}};
g.mouseup=function(a){if(!hN(this,a)){var b=this.j[(1).toString()];b&&b.button===a.button&&(b=iN(a),this.g.fireEvent("pointerup",b,a),delete this.j[(1).toString()])}};g.mouseover=function(a){if(!hN(this,a)){var b=iN(a);kN(this.g,b,a)}};g.mouseout=function(a){if(!hN(this,a)){var b=iN(a);lN(this.g,b,a)}};g.cancel=function(a){var b=iN(a);this.g.cancel(b,a);delete this.j[(1).toString()]};function mN(a){fN.call(this,a,{MSPointerDown:this.FG,MSPointerMove:this.GG,MSPointerUp:this.JG,MSPointerOut:this.HG,MSPointerOver:this.IG,MSPointerCancel:this.EG,MSGotPointerCapture:this.CG,MSLostPointerCapture:this.DG});this.j=a.j;this.l=["","unavailable","touch","pen","mouse"]}I(mN,fN);function nN(a,b){var c=b;"number"===typeof b.pointerType&&(c=jN(b,b),c.pointerType=a.l[b.pointerType]);return c}g=mN.prototype;
g.FG=function(a){this.j[a.pointerId.toString()]=a;var b=nN(this,a);this.g.fireEvent("pointerdown",b,a)};g.GG=function(a){var b=nN(this,a);this.g.fireEvent("pointermove",b,a)};g.JG=function(a){var b=nN(this,a);this.g.fireEvent("pointerup",b,a);delete this.j[a.pointerId.toString()]};g.HG=function(a){var b=nN(this,a);lN(this.g,b,a)};g.IG=function(a){var b=nN(this,a);kN(this.g,b,a)};g.EG=function(a){var b=nN(this,a);this.g.cancel(b,a);delete this.j[a.pointerId.toString()]};
g.DG=function(a){this.g.dispatchEvent(new oN("lostpointercapture",a,a))};g.CG=function(a){this.g.dispatchEvent(new oN("gotpointercapture",a,a))};function pN(a){fN.call(this,a,{pointerdown:this.UM,pointermove:this.VM,pointerup:this.YM,pointerout:this.WM,pointerover:this.XM,pointercancel:this.TM,gotpointercapture:this.UE,lostpointercapture:this.wG})}I(pN,fN);g=pN.prototype;g.UM=function(a){qN(this.g,a)};g.VM=function(a){qN(this.g,a)};g.YM=function(a){qN(this.g,a)};g.WM=function(a){qN(this.g,a)};g.XM=function(a){qN(this.g,a)};g.TM=function(a){qN(this.g,a)};g.wG=function(a){qN(this.g,a)};g.UE=function(a){qN(this.g,a)};function oN(a,b,c){Cf.call(this,a);this.originalEvent=b;a=c?c:{};this.buttons=wka(a);this.pressure=xka(a,this.buttons);this.bubbles="bubbles"in a?a.bubbles:!1;this.cancelable="cancelable"in a?a.cancelable:!1;this.view="view"in a?a.view:null;this.detail="detail"in a?a.detail:null;this.screenX="screenX"in a?a.screenX:0;this.screenY="screenY"in a?a.screenY:0;this.clientX="clientX"in a?a.clientX:0;this.clientY="clientY"in a?a.clientY:0;this.ctrlKey="ctrlKey"in a?a.ctrlKey:!1;this.altKey="altKey"in a?
a.altKey:!1;this.shiftKey="shiftKey"in a?a.shiftKey:!1;this.metaKey="metaKey"in a?a.metaKey:!1;this.button="button"in a?a.button:0;this.relatedTarget="relatedTarget"in a?a.relatedTarget:null;this.pointerId="pointerId"in a?a.pointerId:0;this.width="width"in a?a.width:0;this.height="height"in a?a.height:0;this.tiltX="tiltX"in a?a.tiltX:0;this.tiltY="tiltY"in a?a.tiltY:0;this.pointerType="pointerType"in a?a.pointerType:"";this.isPrimary="isPrimary"in a?a.isPrimary:!1;b.preventDefault&&(this.preventDefault=
function(){b.preventDefault()})}I(oN,Cf);function wka(a){if(a.buttons||yka)a=a.buttons;else switch(a.which){case 1:a=1;break;case 2:a=4;break;case 3:a=2;break;default:a=0}return a}function xka(a,b){var c=0;a.pressure?c=a.pressure:c=b?.5:0;return c}var yka=!1;try{yka=1===(new MouseEvent("click",{buttons:1})).buttons}catch(a){};function rN(a,b){fN.call(this,a,{touchstart:this.JO,touchmove:this.IO,touchend:this.HO,touchcancel:this.GO});this.j=a.j;this.B=b;this.l=void 0;this.A=0;this.o=void 0}I(rN,fN);g=rN.prototype;g.qA=function(){this.A=0;this.o=void 0};
function zka(a,b,c){b=jN(b,c);b.pointerId=c.identifier+2;b.bubbles=!0;b.cancelable=!0;b.detail=a.A;b.button=0;b.buttons=1;b.width=c.webkitRadiusX||c.radiusX||0;b.height=c.webkitRadiusY||c.radiusY||0;b.pressure=c.webkitForce||c.force||.5;b.isPrimary=a.l===c.identifier;b.pointerType="touch";b.clientX=c.clientX;b.clientY=c.clientY;b.screenX=c.screenX;b.screenY=c.screenY;return b}
function sN(a,b,c){function d(){b.preventDefault()}var e=Array.prototype.slice.call(b.changedTouches),f=e.length,h;for(h=0;h<f;++h){var k=zka(a,b,e[h]);k.preventDefault=d;c.call(a,b,k)}}
g.JO=function(a){var b=a.touches,c=Object.keys(this.j),d=c.length;if(d>=b.length){var e=[],f;for(f=0;f<d;++f){var h=c[f];var k=this.j[h];var l;if(!(l=1==h))a:{for(var m=b.length,n=0;n<m;n++)if(l=b[n],l.identifier===h-2){l=!0;break a}l=!1}l||e.push(k.out)}for(f=0;f<e.length;++f)this.To(a,e[f])}b=a.changedTouches[0];c=Object.keys(this.j).length;if(0===c||1===c&&(1).toString()in this.j)this.l=b.identifier,void 0!==this.o&&clearTimeout(this.o);Aka(this,a);this.A++;sN(this,a,this.pM)};
g.pM=function(a,b){this.j[b.pointerId]={target:b.target,out:b,vz:b.target};this.g.Dn(b,a);this.g.enter(b,a);this.g.fireEvent("pointerdown",b,a)};g.IO=function(a){a.preventDefault();sN(this,a,this.BG)};g.BG=function(a,b){var c=this.j[b.pointerId];if(c){var d=c.out,e=c.vz;this.g.fireEvent("pointermove",b,a);d&&e!==b.target&&(d.relatedTarget=b.target,b.relatedTarget=e,d.target=e,b.target?(lN(this.g,d,a),kN(this.g,b,a)):(b.target=e,b.relatedTarget=null,this.To(a,b)));c.out=b;c.vz=b.target}};
g.HO=function(a){Aka(this,a);sN(this,a,this.KO)};g.KO=function(a,b){this.g.fireEvent("pointerup",b,a);this.g.out(b,a);tN(this.g,b,a);delete this.j[b.pointerId];b.isPrimary&&(this.l=void 0,this.o=setTimeout(this.qA.bind(this),200))};g.GO=function(a){sN(this,a,this.To)};g.To=function(a,b){this.g.cancel(b,a);this.g.out(b,a);tN(this.g,b,a);delete this.j[b.pointerId];b.isPrimary&&(this.l=void 0,this.o=setTimeout(this.qA.bind(this),200))};
function Aka(a,b){var c=a.B.l;b=b.changedTouches[0];if(a.l===b.identifier){var d=[b.clientX,b.clientY];c.push(d);setTimeout(function(){var a=c.indexOf(d);-1<a&&c.splice(a,1)},2500)}};function uN(a){Df.call(this);this.L=a;this.j={};this.l={};this.g=[];Sca?vN(this,new pN(this)):Tca?vN(this,new mN(this)):(a=new gN(this),vN(this,a),on&&vN(this,new rN(this,a)));a=this.g.length;for(var b,c=0;c<a;c++)b=this.g[c],Bka(this,Object.keys(b.u))}I(uN,Df);function vN(a,b){var c=Object.keys(b.u);c&&(c.forEach(function(a){var c=b.u[a];c&&(this.l[a]=c.bind(b))},a),a.g.push(b))}g=uN.prototype;g.pw=function(a){var b=this.l[a.type];b&&b(a)};
function Bka(a,b){b.forEach(function(a){H(this.L,a,this.pw,this)},a)}function Cka(a,b){b.forEach(function(a){yf(this.L,a,this.pw,this)},a)}function jN(a,b){for(var c={},d,e=0,f=wN.length;e<f;e++)d=wN[e][0],c[d]=a[d]||b[d]||wN[e][1];return c}g.enter=function(a,b){a.bubbles=!1;this.fireEvent("pointerenter",a,b)};function tN(a,b,c){b.bubbles=!1;a.fireEvent("pointerleave",b,c)}g.Dn=function(a,b){a.bubbles=!0;this.fireEvent("pointerover",a,b)};
g.out=function(a,b){a.bubbles=!0;this.fireEvent("pointerout",a,b)};g.cancel=function(a,b){this.fireEvent("pointercancel",a,b)};function lN(a,b,c){a.out(b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||tN(a,b,c)}function kN(a,b,c){a.Dn(b,c);var d=b.target,e=b.relatedTarget;d&&e&&d.contains(e)||a.enter(b,c)}g.fireEvent=function(a,b,c){this.dispatchEvent(new oN(a,c,b))};function qN(a,b){a.dispatchEvent(new oN(b.type,b,b))}
g.J=function(){for(var a=this.g.length,b,c=0;c<a;c++)b=this.g[c],Cka(this,Object.keys(b.u));Df.prototype.J.call(this)};
var wN=[["bubbles",!1],["cancelable",!1],["view",null],["detail",null],["screenX",0],["screenY",0],["clientX",0],["clientY",0],["ctrlKey",!1],["altKey",!1],["shiftKey",!1],["metaKey",!1],["button",0],["relatedTarget",null],["buttons",0],["pointerId",0],["width",0],["height",0],["pressure",0],["tiltX",0],["tiltY",0],["pointerType",""],["hwTimestamp",0],["isPrimary",!1],["type",""],["target",null],["currentTarget",null],["which",0]];function xN(a,b){Df.call(this);this.ha=a;this.u=0;this.A=!1;this.l=[];this.O=b?b*mn:mn;this.j=null;a=this.ha.g;this.K=0;this.I={};this.o=new uN(a);this.g=null;this.B=H(this.o,"pointerdown",this.rF,this);this.G=H(this.o,"pointermove",this.zN,this)}I(xN,Df);
function Dka(a,b){var c=new Xs("click",a.ha,b);a.dispatchEvent(c);0!==a.u?(clearTimeout(a.u),a.u=0,c=new Xs("dblclick",a.ha,b),a.dispatchEvent(c)):a.u=setTimeout(function(){this.u=0;var a=new Xs("singleclick",this.ha,b);this.dispatchEvent(a)}.bind(a),250)}function Eka(a,b){"pointerup"==b.type||"pointercancel"==b.type?delete a.I[b.pointerId]:"pointerdown"==b.type&&(a.I[b.pointerId]=!0);a.K=Object.keys(a.I).length}g=xN.prototype;
g.pv=function(a){Eka(this,a);var b=new Xs("pointerup",this.ha,a);this.dispatchEvent(b);b.Vz||this.A||0!==a.button||Dka(this,this.j);0===this.K&&(this.l.forEach(sf),this.l.length=0,this.A=!1,this.j=null,this.g.dispose(),this.g=null)};g.rF=function(a){Eka(this,a);var b=new Xs("pointerdown",this.ha,a);this.dispatchEvent(b);this.j=a;0===this.l.length&&(this.g=new uN(document),this.l.push(H(this.g,"pointermove",this.sF,this),H(this.g,"pointerup",this.pv,this),H(this.o,"pointercancel",this.pv,this)))};
g.sF=function(a){if(Fka(this,a)){this.A=!0;var b=new Xs("pointerdrag",this.ha,a,this.A);this.dispatchEvent(b)}a.preventDefault()};g.zN=function(a){this.dispatchEvent(new Xs(a.type,this.ha,a,!(!this.j||!Fka(this,a))))};function Fka(a,b){return Math.abs(b.clientX-a.j.clientX)>a.O||Math.abs(b.clientY-a.j.clientY)>a.O}
g.J=function(){this.G&&(sf(this.G),this.G=null);this.B&&(sf(this.B),this.B=null);this.l.forEach(sf);this.l.length=0;this.g&&(this.g.dispose(),this.g=null);this.o&&(this.o.dispose(),this.o=null);Df.prototype.J.call(this)};var cI="size";var zI=2,AI=3,tI=4;function yN(a,b){this.I=a;this.o=b;this.g=[];this.l=[];this.j={}}yN.prototype.clear=function(){this.g.length=0;this.l.length=0;pf(this.j)};yN.prototype.dequeue=function(){var a=this.g,b=this.l,c=a[0];1==a.length?(a.length=0,b.length=0):(a[0]=a.pop(),b[0]=b.pop(),Gka(this,0));a=this.o(c);delete this.j[a];return c};yN.prototype.u=function(a){Mf(!(this.o(a)in this.j),31);var b=this.I(a);return Infinity!=b?(this.g.push(a),this.l.push(b),this.j[this.o(a)]=!0,Hka(this,0,this.g.length-1),!0):!1};
yN.prototype.isEmpty=function(){return 0===this.g.length};function Gka(a,b){for(var c=a.g,d=a.l,e=c.length,f=c[b],h=d[b],k=b;b<e>>1;){var l=2*b+1,m=2*b+2;l=m<e&&d[m]<d[l]?m:l;c[b]=c[l];d[b]=d[l];b=l}c[b]=f;d[b]=h;Hka(a,k,b)}function Hka(a,b,c){var d=a.g;a=a.l;for(var e=d[c],f=a[c];c>b;){var h=c-1>>1;if(a[h]>f)d[c]=d[h],a[c]=a[h],c=h;else break}d[c]=e;a[c]=f}
function Ika(a){var b=a.I,c=a.g,d=a.l,e=0,f=c.length,h;for(h=0;h<f;++h){var k=c[h];var l=b(k);Infinity==l?delete a.j[a.o(k)]:(d[e]=l,c[e++]=k)}c.length=e;d.length=e;for(b=(a.g.length>>1)-1;0<=b;b--)Gka(a,b)};function zN(a,b){yN.call(this,function(b){return a.apply(null,b)},function(a){return a[0].getKey()});this.K=b;this.B=0;this.A={}}I(zN,yN);zN.prototype.u=function(a){var b=yN.prototype.u.call(this,a);b&&H(a[0],"change",this.G,this);return b};zN.prototype.G=function(a){a=a.target;var b=a.getState();if(b===zI||b===AI||b===tI||5===b)yf(a,"change",this.G,this),a=a.getKey(),a in this.A&&(delete this.A[a],--this.B),this.K()};var AN=[],BN=[];function CN(a,b){switch(a){case "MAP_RENDERER":a=AN;a.push(b);break;case "LAYER_RENDERER":a=BN;a.push(b);break;default:throw Error("Unsupported plugin type: "+a);}}function Jka(a){for(var b=0,c=a.length;b<c;++b)CN("LAYER_RENDERER",a[b])};function DN(a){Hf.call(this);var b=Kka(a);this.ib=void 0!==a.loadTilesWhileAnimating?a.loadTilesWhileAnimating:!1;this.jb=void 0!==a.loadTilesWhileInteracting?a.loadTilesWhileInteracting:!1;this.oa=void 0!==a.pixelRatio?a.pixelRatio:mn;this.pb=b.logos;this.aa=function(){this.u=void 0;this.QG.call(this)}.bind(this);this.Ia=Bm();this.Eb=Bm();this.cb=0;this.K=this.P=this.U=this.o=this.j=null;this.g=document.createElement("DIV");this.g.className="ol-viewport"+(on?" ol-touch":"");this.g.style.position=
"relative";this.g.style.overflow="hidden";this.g.style.width="100%";this.g.style.height="100%";this.g.style.msTouchAction="none";this.g.style.touchAction="none";this.B=document.createElement("DIV");this.B.className="ol-overlaycontainer";this.g.appendChild(this.B);this.A=document.createElement("DIV");this.A.className="ol-overlaycontainer-stopevent";for(var c="click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" "),d=0,e=c.length;d<e;++d)H(this.A,c[d],uba);this.g.appendChild(this.A);
this.ka=new xN(this,a.moveTolerance);for(var f in Ys)H(this.ka,Ys[f],this.mv,this);this.Ea=b.keyboardEventTarget;this.I=null;H(this.g,"wheel",this.Vg,this);H(this.g,"mousewheel",this.Vg,this);this.controls=b.controls||new ju;this.interactions=b.interactions||new ju;this.O=b.overlays;this.wz={};this.ge=b.mapRendererPlugin.create(this.g,this);this.pa=null;this.sa=[];this.Ca=new zN(this.IE.bind(this),this.BF.bind(this));this.G={};H(this,Jf("layergroup"),this.hF,this);H(this,Jf("view"),this.DF,this);
H(this,Jf(cI),this.xF,this);H(this,Jf("target"),this.AF,this);this.qc(b.values);this.controls.forEach(function(a){a.setMap(this)},this);H(this.controls,"add",function(a){a.element.setMap(this)},this);H(this.controls,"remove",function(a){a.element.setMap(null)},this);this.interactions.forEach(function(a){a.setMap(this)},this);H(this.interactions,"add",function(a){a.element.setMap(this)},this);H(this.interactions,"remove",function(a){a.element.setMap(null)},this);this.O.forEach(this.Zt,this);H(this.O,
"add",function(a){this.Zt(a.element)},this);H(this.O,"remove",function(a){var b=a.element.D();void 0!==b&&delete this.wz[b.toString()];a.element.setMap(null)},this)}I(DN,Hf);function Lka(a,b){a.sk().push(b)}g=DN.prototype;g.Zt=function(a){var b=a.D();void 0!==b&&(this.wz[b.toString()]=a);a.setMap(this)};
g.J=function(){this.ka.dispose();yf(this.g,"wheel",this.Vg,this);yf(this.g,"mousewheel",this.Vg,this);void 0!==this.l&&(window.removeEventListener("resize",this.l,!1),this.l=void 0);this.u&&(cancelAnimationFrame(this.u),this.u=void 0);this.set("target",null);Hf.prototype.J.call(this)};
g.Yh=function(a,b,c){if(this.j)return a=this.getCoordinateFromPixel(a),c=void 0!==c?c:{},this.ge.tc(a,this.j,void 0!==c.hitTolerance?c.hitTolerance*this.j.pixelRatio:0,b,null,void 0!==c.layerFilter?c.layerFilter:wo,null)};function Yr(a,b){a=a.g.getBoundingClientRect();b=b.changedTouches?b.changedTouches[0]:b;return[b.clientX-a.left,b.clientY-a.top]}function EN(a){a=a.get("target");return void 0!==a?"string"===typeof a?document.getElementById(a):a:null}
g.getCoordinateFromPixel=function(a){var b=this.j;return b?Gm(b.pixelToCoordinateTransform,a.slice()):null};g.sk=function(){return this.O};function dI(a){return a.get("layergroup")}function Ov(a){return Pv(dI(a))}g.getPixelFromCoordinate=function(a){var b=this.j;return b?Gm(b.coordinateToPixelTransform,a.slice(0,2)):null};g.Wi=function(){return this.ge};function Xn(a){return a.get(cI)}function T(a){return a.get("view")}
g.IE=function(a,b,c,d){var e=this.j;if(!(e&&b in e.wantedTiles&&e.wantedTiles[b][a.getKey()]))return Infinity;a=c[0]-e.focus[0];c=c[1]-e.focus[1];return 65536*Math.log(d)+Math.sqrt(a*a+c*c)/d};g.Vg=function(a,b){a=new Xr(b||a.type,this,a);this.mv(a)};g.mv=function(a){if(this.j){this.pa=a.coordinate;a.frameState=this.j;var b=this.interactions.g,c;if(!1!==this.dispatchEvent(a))for(c=b.length-1;0<=c;c--){var d=b[c];if(d.get("active")&&!d.handleEvent(a))break}}};
g.uF=function(){var a=this.j,b=this.Ca;if(!b.isEmpty()){var c=16,d=c;if(a){var e=a.viewHints;e[0]&&(c=this.ib?8:0,d=2);e[1]&&(c=this.jb?8:0,d=2)}if(b.B<c){Ika(b);e=0;for(var f=!1,h,k,l;b.B<c&&e<d&&0<b.g.length;)k=b.dequeue()[0],l=k.getKey(),h=k.getState(),5===h?f=!0:0!==h||l in b.A||(b.A[l]=!0,++b.B,++e,k.load());0===e&&f&&b.K()}}b=this.sa;c=0;for(d=b.length;c<d;++c)b[c](this,a);b.length=0};g.xF=function(){this.render()};
g.AF=function(){var a;this.get("target")&&(a=EN(this));if(this.I){for(var b=0,c=this.I.length;b<c;++b)sf(this.I[b]);this.I=null}if(a){a.appendChild(this.g);var d=this.Ea?this.Ea:a;this.I=[H(d,"keydown",this.Vg,this),H(d,"keypress",this.Vg,this)];this.l||(this.l=this.lf.bind(this),window.addEventListener("resize",this.l,!1))}else{a=this.ge;for(d in a.o)Mka(a,d).dispose();wm(this.g);void 0!==this.l&&(window.removeEventListener("resize",this.l,!1),this.l=void 0)}this.lf()};g.BF=function(){this.render()};
g.tv=function(){this.render()};g.DF=function(){this.U&&(sf(this.U),this.U=null);this.P&&(sf(this.P),this.P=null);var a=T(this);a&&(this.g.setAttribute("data-view",J(a)),this.U=H(a,"propertychange",this.tv,this),this.P=H(a,"change",this.tv,this));this.render()};g.hF=function(){this.K&&(this.K.forEach(sf),this.K=null);var a=dI(this);a&&(this.K=[H(a,"propertychange",this.render,this),H(a,"change",this.render,this)]);this.render()};g.renderSync=function(){this.u&&cancelAnimationFrame(this.u);this.aa()};
g.render=function(){void 0===this.u&&(this.u=requestAnimationFrame(this.aa))};g.removeLayer=function(a){return Pv(dI(this)).remove(a)};
g.QG=function(){var a=Date.now(),b,c=Xn(this),d=T(this),e=Ok(),f=this.j,h=null;if(void 0!==c&&0<c[0]&&0<c[1]&&d&&qs(d)){h=zs(d,this.j?this.j.viewHints:void 0);var k=dI(this).Ip(),l={};var m=0;for(b=k.length;m<b;++m)l[J(k[m].layer)]=k[m];m=d.getState();d=m.center;b=m.resolution/this.oa;d[0]=Math.round(d[0]/b)*b;d[1]=Math.round(d[1]/b)*b;h={animate:!1,coordinateToPixelTransform:this.Ia,extent:e,focus:this.pa?this.pa:d,index:this.cb++,layerStates:l,layerStatesArray:k,logos:of({},this.pb),pixelRatio:this.oa,
pixelToCoordinateTransform:this.Eb,postRenderFunctions:[],size:c,skippedFeatureUids:this.G,tileQueue:this.Ca,time:a,usedTiles:{},viewState:m,viewHints:h,wantedTiles:{}}}h&&(h.extent=el(m.center,m.resolution,m.rotation,h.size,e));this.j=h;this.ge.mj(h);h&&(h.animate&&this.render(),Array.prototype.push.apply(this.sa,h.postRenderFunctions),!f||this.o&&(al(this.o)||Xk(h.extent,this.o))||(this.dispatchEvent(new Wr("movestart",this,f)),this.o=Vk(this.o)),!this.o||h.viewHints[0]||h.viewHints[1]||Xk(h.extent,
this.o)||(this.dispatchEvent(new Wr("moveend",this,h)),Rk(h.extent,this.o)));this.dispatchEvent(new Wr("postrender",this,h));setTimeout(this.uF.bind(this),0)};g.setSize=function(a){this.set(cI,a)};g.QA=function(a){a=J(a).toString();this.G[a]=!0;this.render()};
g.lf=function(){var a=EN(this);if(a){var b=getComputedStyle(a);this.setSize([a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)])}else this.setSize(void 0)};g.rB=function(a){a=J(a).toString();delete this.G[a];this.render()};var Nka=["canvas","webgl"];
function Kka(a){var b=null;void 0!==a.keyboardEventTarget&&(b="string"===typeof a.keyboardEventTarget?document.getElementById(a.keyboardEventTarget):a.keyboardEventTarget);var c={},d={};if(void 0===a.logo||"boolean"===typeof a.logo&&a.logo)d["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAA3NCSVQICAjb4U/gAAAACXBIWXMAAAHGAAABxgEXwfpGAAAAGXRFWHRTb2Z0d2FyZQB3d3cuaW5rc2NhcGUub3Jnm+48GgAAAhNQTFRF////AP//AICAgP//AFVVQECA////K1VVSbbbYL/fJ05idsTYJFtbbcjbJllmZszWWMTOIFhoHlNiZszTa9DdUcHNHlNlV8XRIVdiasrUHlZjIVZjaMnVH1RlIFRkH1RkH1ZlasvYasvXVsPQH1VkacnVa8vWIVZjIFRjVMPQa8rXIVVkXsXRsNveIFVkIFZlIVVj3eDeh6GmbMvXH1ZkIFRka8rWbMvXIFVkIFVjIFVkbMvWH1VjbMvWIFVlbcvWIFVla8vVIFVkbMvWbMvVH1VkbMvWIFVlbcvWIFVkbcvVbMvWjNPbIFVkU8LPwMzNIFVkbczWIFVkbsvWbMvXIFVkRnB8bcvW2+TkW8XRIFVkIlZlJVloJlpoKlxrLl9tMmJwOWd0Omh1RXF8TneCT3iDUHiDU8LPVMLPVcLPVcPQVsPPVsPQV8PQWMTQWsTQW8TQXMXSXsXRX4SNX8bSYMfTYcfTYsfTY8jUZcfSZsnUaIqTacrVasrVa8jTa8rWbI2VbMvWbcvWdJObdcvUdszUd8vVeJaee87Yfc3WgJyjhqGnitDYjaarldPZnrK2oNbborW5o9bbo9fbpLa6q9ndrL3ArtndscDDutzfu8fJwN7gwt7gxc/QyuHhy+HizeHi0NfX0+Pj19zb1+Tj2uXk29/e3uLg3+Lh3+bl4uXj4ufl4+fl5Ofl5ufl5ujm5+jmySDnBAAAAFp0Uk5TAAECAgMEBAYHCA0NDg4UGRogIiMmKSssLzU7PkJJT1JTVFliY2hrdHZ3foSFhYeJjY2QkpugqbG1tre5w8zQ09XY3uXn6+zx8vT09vf4+Pj5+fr6/P39/f3+gz7SsAAAAVVJREFUOMtjYKA7EBDnwCPLrObS1BRiLoJLnte6CQy8FLHLCzs2QUG4FjZ5GbcmBDDjxJBXDWxCBrb8aM4zbkIDzpLYnAcE9VXlJSWlZRU13koIeW57mGx5XjoMZEUqwxWYQaQbSzLSkYGfKFSe0QMsX5WbjgY0YS4MBplemI4BdGBW+DQ11eZiymfqQuXZIjqwyadPNoSZ4L+0FVM6e+oGI6g8a9iKNT3o8kVzNkzRg5lgl7p4wyRUL9Yt2jAxVh6mQCogae6GmflI8p0r13VFWTHBQ0rWPW7ahgWVcPm+9cuLoyy4kCJDzCm6d8PSFoh0zvQNC5OjDJhQopPPJqph1doJBUD5tnkbZiUEqaCnB3bTqLTFG1bPn71kw4b+GFdpLElKIzRxxgYgWNYc5SCENVHKeUaltHdXx0dZ8uBI1hJ2UUDgq82CM2MwKeibqAvSO7MCABq0wXEPiqWEAAAAAElFTkSuQmCC"]=
"https://openlayers.org/";else{var e=a.logo;"string"===typeof e?d[e]="":e instanceof HTMLElement?d[J(e).toString()]=e:e&&(Mf("string"==typeof e.href,44),Mf("string"==typeof e.src,45),d[e.src]=e.href)}e=a.layers instanceof Rv?a.layers:new Rv({layers:a.layers});c.layergroup=e;c.target=a.target;c.view=void 0!==a.view?a.view:new ps;var f;void 0!==a.renderer?(Array.isArray(a.renderer)?f=a.renderer:"string"===typeof a.renderer?f=[a.renderer]:Mf(!1,46),0<=f.indexOf("dom")&&(f=f.concat(Nka))):f=Nka;e=0;var h=
f.length;a:for(;e<h;++e)for(var k=f[e],l=0,m=AN.length;l<m;++l){var n=AN[l];if(n.handles(k)){var p=n;break a}}if(!p)throw Error("Unable to create a map renderer for types: "+f.join(", "));if(void 0!==a.controls)if(Array.isArray(a.controls))var r=new ju(a.controls.slice());else Mf(a.controls instanceof ju,47),r=a.controls;if(void 0!==a.interactions)if(Array.isArray(a.interactions))var u=new ju(a.interactions.slice());else Mf(a.interactions instanceof ju,48),u=a.interactions;void 0!==a.overlays?Array.isArray(a.overlays)?
a=new ju(a.overlays.slice()):(Mf(a.overlays instanceof ju,49),a=a.overlays):a=new ju;return{controls:r,interactions:u,keyboardEventTarget:b,logos:d,overlays:a,mapRendererPlugin:p,values:c}};function FN(a){Hf.call(this);this.element=a.element?a.element:null;this.ha=this.I=null;this.o=[];this.render=a.render?a.render:Af;a.target&&(a=a.target,this.I="string"===typeof a?document.getElementById(a):a)}I(FN,Hf);FN.prototype.J=function(){wm(this.element);Hf.prototype.J.call(this)};FN.prototype.X=function(){return this.ha};
FN.prototype.setMap=function(a){this.ha&&wm(this.element);for(var b=0,c=this.o.length;b<c;++b)sf(this.o[b]);this.o.length=0;if(this.ha=a)(this.I?this.I:a.A).appendChild(this.element),this.render!==Af&&this.o.push(H(a,"postrender",this.render,this)),a.render()};function GN(a){a=a?a:{};this.g=document.createElement("UL");this.u=document.createElement("LI");this.g.appendChild(this.u);this.u.style.display="none";this.l=void 0!==a.collapsed?a.collapsed:!0;this.G=void 0!==a.collapsible?a.collapsible:!0;this.G||(this.l=!1);var b=void 0!==a.className?a.className:"ol-attribution",c=void 0!==a.tipLabel?a.tipLabel:"Attributions",d=void 0!==a.collapseLabel?a.collapseLabel:"\u00bb";"string"===typeof d?(this.B=document.createElement("span"),this.B.textContent=d):this.B=
d;d=void 0!==a.label?a.label:"i";"string"===typeof d?(this.Sb=document.createElement("span"),this.Sb.textContent=d):this.Sb=d;var e=this.G&&!this.l?this.B:this.Sb;d=document.createElement("button");d.setAttribute("type","button");d.title=c;d.appendChild(e);H(d,"click",this.RG,this);c=document.createElement("div");c.className=b+" ol-unselectable ol-control"+(this.l&&this.G?" ol-collapsed":"")+(this.G?"":" ol-uncollapsible");c.appendChild(this.g);c.appendChild(d);FN.call(this,{element:c,render:a.render?
a.render:Oka,target:a.target});this.A=[];this.j=!0;this.K={}}I(GN,FN);g=GN.prototype;g.Kp=function(a){for(var b={},c=[],d=a.layerStatesArray,e=a.viewState.resolution,f=0,h=d.length;f<h;++f){var k=d[f];if(Tf(k,e)&&(k=k.layer.N())&&(k=k.Ol)&&(k=k(a)))if(Array.isArray(k))for(var l=0,m=k.length;l<m;++l)k[l]in b||(c.push(k[l]),b[k[l]]=!0);else k in b||(c.push(k),b[k]=!0)}return c};function Oka(a){this.gw(a.frameState)}
g.gw=function(a){if(a){var b=this.Kp(a);if(!Xl(b,this.A)){for(;this.g.lastChild!==this.u;)this.g.removeChild(this.g.lastChild);for(var c=0,d=b.length;c<d;++c){var e=document.createElement("LI");e.innerHTML=b[c];this.g.appendChild(e)}0===b.length&&0<this.A.length?this.element.classList.add("ol-logo-only"):0===this.A.length&&0<b.length&&this.element.classList.remove("ol-logo-only");c=0<b.length||!rf(a.logos);this.j!=c&&(this.element.style.display=c?"":"none",this.j=c);this.A=b;this.Dv(a)}}else this.j&&
(this.element.style.display="none",this.j=!1)};g.Dv=function(a){a=a.logos;var b=this.K;for(e in b)e in a||(wm(b[e]),delete b[e]);var c;for(c in a){var d=a[c];d instanceof HTMLElement&&(this.u.appendChild(d),b[c]=d);if(!(c in b)){var e=new Image;e.src=c;if(""===d)var f=e;else f=document.createElement("a"),f.href=d,f.appendChild(e);this.u.appendChild(f);b[c]=f}}this.u.style.display=rf(a)?"none":""};g.RG=function(a){a.preventDefault();Pka(this)};
function Pka(a){a.element.classList.toggle("ol-collapsed");a.l?vm(a.B,a.Sb):vm(a.Sb,a.B);a.l=!a.l}g.Fd=function(a){this.G&&this.l!==a&&Pka(this)};function HN(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-rotate",c=void 0!==a.label?a.label:"\u21e7";this.Sb=null;"string"===typeof c?(this.Sb=document.createElement("span"),this.Sb.className="ol-compass",this.Sb.textContent=c):(this.Sb=c,this.Sb.classList.add("ol-compass"));var d=a.tipLabel?a.tipLabel:"Reset rotation";c=document.createElement("button");c.className=b+"-reset";c.setAttribute("type","button");c.title=d;c.appendChild(this.Sb);H(c,"click",HN.prototype.B,this);d=document.createElement("div");
d.className=b+" ol-unselectable ol-control";d.appendChild(c);b=a.render?a.render:Qka;this.u=a.resetNorth?a.resetNorth:void 0;FN.call(this,{element:d,render:b,target:a.target});this.A=void 0!==a.duration?a.duration:250;this.j=void 0!==a.autoHide?a.autoHide:!0;this.g=void 0;this.j&&this.element.classList.add("ol-hidden")}I(HN,FN);HN.prototype.B=function(a){a.preventDefault();void 0!==this.u?this.u():this.l()};
HN.prototype.l=function(){var a=T(this.X());a&&void 0!==ss(a)&&(0<this.A?a.animate({rotation:0,duration:this.A,easing:ms}):us(a,0))};function Qka(a){if(a=a.frameState){a=a.viewState.rotation;if(a!=this.g){var b="rotate("+a+"rad)";if(this.j){var c=this.element.classList.contains("ol-hidden");c||0!==a?c&&0!==a&&this.element.classList.remove("ol-hidden"):this.element.classList.add("ol-hidden")}this.Sb.style.msTransform=b;this.Sb.style.webkitTransform=b;this.Sb.style.transform=b}this.g=a}};function IN(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-zoom",c=void 0!==a.delta?a.delta:1,d=void 0!==a.zoomInLabel?a.zoomInLabel:"+",e=void 0!==a.zoomOutLabel?a.zoomOutLabel:"\u2212",f=void 0!==a.zoomInTipLabel?a.zoomInTipLabel:"Zoom in",h=void 0!==a.zoomOutTipLabel?a.zoomOutTipLabel:"Zoom out",k=document.createElement("button");k.className=b+"-in";k.setAttribute("type","button");k.title=f;k.appendChild("string"===typeof d?document.createTextNode(d):d);H(k,"click",IN.prototype.l.bind(this,
c));d=document.createElement("button");d.className=b+"-out";d.setAttribute("type","button");d.title=h;d.appendChild("string"===typeof e?document.createTextNode(e):e);H(d,"click",IN.prototype.l.bind(this,-c));c=document.createElement("div");c.className=b+" ol-unselectable ol-control";c.appendChild(k);c.appendChild(d);FN.call(this,{element:c,target:a.target});this.j=void 0!==a.duration?a.duration:250}I(IN,FN);IN.prototype.l=function(a,b){b.preventDefault();this.g(a)};
IN.prototype.g=function(a){var b=T(this.X());if(b){var c=b.bb();c&&(a=b.constrainResolution(c,a),0<this.j?(0<b.g[0]&&vs(b),b.animate({resolution:a,duration:this.j,easing:ms})):Tq(b,a))}};function JN(){this.g=[];this.j=this.l=0}function KN(a){a.g.length=0;a.l=0;a.j=0}JN.prototype.update=function(a,b){this.g.push(a,b,Date.now())};JN.prototype.end=function(){if(6>this.g.length)return!1;var a=Date.now()-100,b=this.g.length-3;if(this.g[b+2]<a)return!1;for(var c=b-3;0<c&&this.g[c+2]>a;)c-=3;a=this.g[b+2]-this.g[c+2];if(a<1E3/60)return!1;var d=this.g[b]-this.g[c];b=this.g[b+1]-this.g[c+1];this.l=Math.atan2(b,d);this.j=Math.sqrt(d*d+b*b)/a;return.05<this.j};function LN(a){a=a?a:{};this.g=a.delta?a.delta:1;lt.call(this,{handleEvent:Rka});this.j=void 0!==a.duration?a.duration:250}I(LN,lt);function Rka(a){var b=!1,c=a.originalEvent;if("dblclick"==a.type){b=a.coordinate;c=c.shiftKey?-this.g:this.g;var d=T(a.map);ot(d,c,b,this.j);a.preventDefault();b=!0}return!b};function MN(a){qt.call(this,{handleDownEvent:Ska,handleDragEvent:Tka,handleUpEvent:Uka});a=a?a:{};this.g=a.kinetic;this.l=null;this.A=a.condition?a.condition:$s;this.o=!1}I(MN,qt);
function Tka(a){var b=this.j,c=st(b);if(b.length==this.u){if(this.g&&this.g.update(c[0],c[1]),this.l){var d=this.l[0]-c[0],e=c[1]-this.l[1];a=T(a.map);var f=a.getState();e=d=[d,e];var h=f.resolution;e[0]*=h;e[1]*=h;ls(d,f.rotation);ks(d,f.center);d=a.j.center(d);Sq(a,d)}}else this.g&&KN(this.g);this.l=c;this.u=b.length}
function Uka(a){var b=a.map;a=T(b);if(0===this.j.length){if(!this.o&&this.g&&this.g.end()){var c=(.05-this.g.j)/-.005;var d=this.g.l,e=rs(a);e=b.getPixelFromCoordinate(e);b=b.getCoordinateFromPixel([e[0]-c*Math.cos(d),e[1]-c*Math.sin(d)]);a.animate({center:a.j.center(b),duration:500,easing:ms})}ts(a,1,-1);return!1}this.g&&KN(this.g);this.l=null;return!0}
function Ska(a){if(0<this.j.length&&this.A(a)){var b=T(a.map);this.l=null;this.K||ts(b,1,1);0<b.g[0]&&Sq(b,a.frameState.viewState.center);this.g&&KN(this.g);this.o=1<this.j.length;return!0}return!1}MN.prototype.U=xo;function NN(a){a=a?a:{};qt.call(this,{handleDownEvent:Vka,handleDragEvent:Wka,handleUpEvent:Xka});this.l=a.condition?a.condition:hea;this.g=void 0;this.o=void 0!==a.duration?a.duration:250}I(NN,qt);function Wka(a){if(ct(a)){var b=a.map,c=T(b);if(c.j.rotation!==hs){b=Xn(b);a=a.pixel;a=Math.atan2(b[1]/2-a[1],a[0]-b[0]/2);if(void 0!==this.g){b=a-this.g;var d=ss(c);nt(c,d-b)}this.g=a}}}
function Xka(a){if(!ct(a))return!0;a=T(a.map);ts(a,1,-1);var b=ss(a),c=this.o;b=a.constrainRotation(b,0);nt(a,b,void 0,c);return!1}function Vka(a){return ct(a)&&Zs(a)&&this.l(a)?(ts(T(a.map),1,1),this.g=void 0,!0):!1}NN.prototype.U=xo;function ON(a){this.Kd=null;this.L=document.createElement("div");this.L.style.position="absolute";this.L.className="ol-box "+a;this.g=this.j=this.ha=null}I(ON,Bf);ON.prototype.J=function(){this.setMap(null)};function Yka(a){var b=a.j,c=a.g;a=a.L.style;a.left=Math.min(b[0],c[0])+"px";a.top=Math.min(b[1],c[1])+"px";a.width=Math.abs(c[0]-b[0])+"px";a.height=Math.abs(c[1]-b[1])+"px"}
ON.prototype.setMap=function(a){if(this.ha){this.ha.B.removeChild(this.L);var b=this.L.style;b.left=b.top=b.width=b.height="inherit"}(this.ha=a)&&this.ha.B.appendChild(this.L)};function Zka(a){var b=a.j,c=a.g;b=[b,[b[0],c[1]],c,[c[0],b[1]]].map(a.ha.getCoordinateFromPixel,a.ha);b[4]=b[0].slice();a.Kd?a.Kd.ic([b]):a.Kd=new qp([b])}ON.prototype.Z=function(){return this.Kd};function PN(a){qt.call(this,{handleDownEvent:$ka,handleDragEvent:ala,handleUpEvent:bla});a=a?a:{};this.g=new ON(a.className||"ol-dragbox");this.A=void 0!==a.minArea?a.minArea:64;this.l=null;this.B=a.condition?a.condition:wo;this.u=a.boxEndCondition?a.boxEndCondition:cla}I(PN,qt);function cla(a,b,c){a=c[0]-b[0];b=c[1]-b[1];return a*a+b*b>=this.A}function ala(a){if(ct(a)){var b=this.g,c=a.pixel;b.j=this.l;b.g=c;Zka(b);Yka(b);this.dispatchEvent(new QN(dla,a.coordinate,a))}}PN.prototype.Z=function(){return this.g.Z()};
PN.prototype.o=Af;function bla(a){if(!ct(a))return!0;this.g.setMap(null);this.u(a,this.l,a.pixel)&&(this.o(a),this.dispatchEvent(new QN(ela,a.coordinate,a)));return!1}function $ka(a){if(ct(a)&&Zs(a)&&this.B(a)){this.l=a.pixel;this.g.setMap(a.map);var b=this.g,c=this.l;b.j=this.l;b.g=c;Zka(b);Yka(b);this.dispatchEvent(new QN(fla,a.coordinate,a));return!0}return!1}var fla="boxstart",dla="boxdrag",ela="boxend";function QN(a,b,c){Cf.call(this,a);this.coordinate=b;this.mapBrowserEvent=c}I(QN,Cf);function RN(a){a=a?a:{};var b=a.condition?a.condition:at;this.G=void 0!==a.duration?a.duration:200;this.I=void 0!==a.out?a.out:!1;PN.call(this,{condition:b,className:a.className||"ol-dragzoom"})}I(RN,PN);
RN.prototype.o=function(){var a=this.X(),b=T(a),c=Xn(a),d=this.Z().Y();if(this.I){var e=As(b,c);d=[a.getPixelFromCoordinate([d[0],d[1]]),a.getPixelFromCoordinate([d[2],d[3]])];a=Vk(void 0);var f;var h=0;for(f=d.length;h<f;++h)Pk(a,d[h]);d=Bs(b,a,c);hl(e,1/d);d=e}c=b.constrainResolution(Bs(b,d,c));e=dl(d);e=b.j.center(e);b.animate({resolution:c,center:e,duration:this.G,easing:ms})};function SN(a){lt.call(this,{handleEvent:gla});a=a||{};this.u=function(a){return $s(a)&&bt(a)};this.g=void 0!==a.condition?a.condition:this.u;this.j=void 0!==a.duration?a.duration:100;this.o=void 0!==a.pixelDelta?a.pixelDelta:128}I(SN,lt);
function gla(a){var b=!1;if("keydown"==a.type){var c=a.originalEvent.keyCode;if(this.g(a)&&(40==c||37==c||39==c||38==c)){b=T(a.map);var d=b.bb()*this.o,e=0,f=0;40==c?f=-d:37==c?e=-d:39==c?e=d:f=d;c=[e,f];ls(c,ss(b));mt(b,c,this.j);a.preventDefault();b=!0}}return!b};function TN(a){lt.call(this,{handleEvent:hla});a=a?a:{};this.g=a.condition?a.condition:bt;this.j=a.delta?a.delta:1;this.l=void 0!==a.duration?a.duration:100}I(TN,lt);function hla(a){var b=!1;if("keydown"==a.type||"keypress"==a.type){var c=a.originalEvent.charCode;!this.g(a)||43!=c&&45!=c||(b=43==c?this.j:-this.j,c=T(a.map),ot(c,b,void 0,this.l),a.preventDefault(),b=!0)}return!b};function UN(a){lt.call(this,{handleEvent:ila});a=a||{};this.j=0;this.G=void 0!==a.duration?a.duration:250;this.Na=void 0!==a.timeout?a.timeout:80;this.P=void 0!==a.useAnchor?a.useAnchor:!0;this.O=a.constrainResolution||!1;this.g=null;this.u=this.o=this.B=this.l=void 0;this.I=300}I(UN,lt);
function ila(a){var b=a.type;if("wheel"!==b&&"mousewheel"!==b)return!0;a.preventDefault();b=a.map;var c=a.originalEvent;this.P&&(this.g=a.coordinate);if("wheel"==a.type){var d=c.deltaY;Qca&&c.deltaMode===WheelEvent.DOM_DELTA_PIXEL&&(d/=mn);c.deltaMode===WheelEvent.DOM_DELTA_LINE&&(d*=40)}else"mousewheel"==a.type&&(d=-c.wheelDeltaY,hn&&(d/=3));if(0===d)return!1;a=Date.now();void 0===this.l&&(this.l=a);if(!this.o||400<a-this.l)this.o=4>Math.abs(d)?jla:kla;if(this.o===jla){b=T(b);this.u?clearTimeout(this.u):
ts(b,1,1);this.u=setTimeout(this.K.bind(this),400);c=b.bb()*Math.pow(2,d/this.I);var e=b.oe(),f=b.ne(),h=0;c<e?(c=Math.max(c,e/1.5),h=1):c>f&&(c=Math.min(c,1.5*f),h=-1);if(this.g){var k=ws(b,c,this.g);Sq(b,b.j.center(k))}Tq(b,c);0===h&&this.O&&b.animate({resolution:b.constrainResolution(c,0<d?-1:1),easing:ms,anchor:this.g,duration:this.G});0<h?b.animate({resolution:e,easing:ms,anchor:this.g,duration:500}):0>h&&b.animate({resolution:f,easing:ms,anchor:this.g,duration:500});this.l=a;return!1}this.j+=
d;d=Math.max(this.Na-(a-this.l),0);clearTimeout(this.B);this.B=setTimeout(this.A.bind(this,b),d);return!1}UN.prototype.K=function(){this.u=void 0;ts(T(this.X()),1,-1)};UN.prototype.A=function(a){a=T(a);0<a.g[0]&&vs(a);ot(a,-Nf(this.j,-1,1),this.g,this.G);this.o=void 0;this.j=0;this.g=null;this.B=this.l=void 0};var jla="trackpad",kla="wheel";function VN(a){qt.call(this,{handleDownEvent:lla,handleDragEvent:mla,handleUpEvent:nla});a=a||{};this.l=null;this.o=void 0;this.g=!1;this.u=0;this.B=void 0!==a.threshold?a.threshold:.3;this.A=void 0!==a.duration?a.duration:250}I(VN,qt);
function mla(a){var b=0,c=this.j[0],d=this.j[1];c=Math.atan2(d.clientY-c.clientY,d.clientX-c.clientX);void 0!==this.o&&(b=c-this.o,this.u+=b,!this.g&&Math.abs(this.u)>this.B&&(this.g=!0));this.o=c;a=a.map;c=T(a);if(c.j.rotation!==hs){d=a.g.getBoundingClientRect();var e=st(this.j);e[0]-=d.left;e[1]-=d.top;this.l=a.getCoordinateFromPixel(e);this.g&&(d=ss(c),a.render(),nt(c,d+b,this.l))}}
function nla(a){if(2>this.j.length){a=T(a.map);ts(a,1,-1);if(this.g){var b=ss(a),c=this.l,d=this.A;b=a.constrainRotation(b,0);nt(a,b,c,d)}return!1}return!0}function lla(a){return 2<=this.j.length?(a=a.map,this.l=null,this.o=void 0,this.g=!1,this.u=0,this.K||ts(T(a),1,1),!0):!1}VN.prototype.U=xo;function WN(a){qt.call(this,{handleDownEvent:ola,handleDragEvent:pla,handleUpEvent:qla});a=a?a:{};this.u=a.constrainResolution||!1;this.l=null;this.A=void 0!==a.duration?a.duration:400;this.g=void 0;this.o=1}I(WN,qt);
function pla(a){var b=1,c=this.j[0],d=this.j[1],e=c.clientX-d.clientX;c=c.clientY-d.clientY;e=Math.sqrt(e*e+c*c);void 0!==this.g&&(b=this.g/e);this.g=e;a=a.map;e=T(a);d=e.bb();var f=e.ne(),h=e.oe();c=d*b;c>f?(b=f/d,c=f):c<h&&(b=h/d,c=h);1!=b&&(this.o=b);b=a.g.getBoundingClientRect();d=st(this.j);d[0]-=b.left;d[1]-=b.top;this.l=a.getCoordinateFromPixel(d);a.render();pt(e,c,this.l)}
function qla(a){if(2>this.j.length){a=T(a.map);ts(a,1,-1);var b=a.bb();if(this.u||b<a.oe()||b>a.ne()){var c=this.l,d=this.A;b=a.constrainResolution(b,0,this.o-1);pt(a,b,c,d)}return!1}return!0}function ola(a){return 2<=this.j.length?(a=a.map,this.l=null,this.g=void 0,this.o=1,this.K||ts(T(a),1,1),!0):!1}WN.prototype.U=xo;function XN(a,b,c,d){Df.call(this);this.extent=a;this.l=c;this.resolution=b;this.state=d}I(XN,Df);XN.prototype.ia=function(){this.dispatchEvent("change")};XN.prototype.Y=function(){return this.extent};XN.prototype.bb=function(){return this.resolution};XN.prototype.getState=function(){return this.state};function YN(a,b,c,d,e){this.Kb=void 0!==e?e:null;XN.call(this,a,b,c,void 0!==e?0:2);this.o=d;this.g=null}I(YN,XN);YN.prototype.getError=function(){return this.g};YN.prototype.j=function(a){a?(this.g=a,this.state=3):this.state=2;this.ia()};YN.prototype.load=function(){0==this.state&&(this.state=1,this.ia(),this.Kb(this.j.bind(this)))};YN.prototype.Pa=function(){return this.o};function ZN(a){Ef.call(this);this.sa=a}I(ZN,Ef);ZN.prototype.tc=Af;ZN.prototype.A=function(a,b,c){return function(d,e){return rla(a,b,d,e,function(a){c[d]||(c[d]={});c[d][a.fc.toString()]=a})}};ZN.prototype.W=function(){return this.sa};ZN.prototype.oa=function(a){2===a.target.getState()&&$N(this)};function sla(a,b){var c=b.getState();2!=c&&3!=c&&H(b,"change",a.oa,a);0==c&&(b.load(),c=b.getState());return 2==c}function $N(a){var b=a.W();b.yb()&&"ready"==b.Lp()&&a.ia()}
function tla(a,b){b.Kg()&&(b=function(a,b,e){b=J(a).toString();b in e.usedTiles&&a.Li(e.viewState.projection,e.usedTiles[b])}.bind(null,b),a.postRenderFunctions.push(b))}function aO(a,b){b=b.vG;void 0!==b&&("string"===typeof b?a.logos[b]="":b&&(Mf("string"==typeof b.href,44),Mf("string"==typeof b.src,45),a.logos[b.src]=b.href))}function ula(a,b,c,d){b=J(b).toString();c=c.toString();b in a?c in a[b]?a[b][c].extend(d):a[b][c]=d:(a[b]={},a[b][c]=d)}
function vla(a,b,c,d,e,f,h,k,l,m){var n=J(b).toString();n in a.wantedTiles||(a.wantedTiles[n]={});var p=a.wantedTiles[n];a=a.tileQueue;var r,u,v;for(v=c.minZoom;v<=h;++v){var y=cm(c,f,v,y);var B=c.bb(v);for(r=y.minX;r<=y.maxX;++r)for(u=y.minY;u<=y.maxY;++u)if(h-v<=k){var G=sI(b,v,r,u,d,e);0==G.getState()&&(p[G.getKey()]=!0,G.getKey()in a.j||a.u([G,n,hm(c,G.fc),B]));void 0!==l&&l.call(m,G)}else b.zB(v,r,u,e)}};function bO(a){ZN.call(this,a);this.pa=Bm()}I(bO,ZN);function wla(a,b,c){var d=b.pixelRatio,e=b.size[0]*d,f=b.size[1]*d,h=b.viewState.rotation,k=[c[0],c[3]],l=[c[2],c[3]],m=[c[2],c[1]];c=[c[0],c[1]];Gm(b.coordinateToPixelTransform,k);Gm(b.coordinateToPixelTransform,l);Gm(b.coordinateToPixelTransform,m);Gm(b.coordinateToPixelTransform,c);a.save();Um(a,-h,e/2,f/2);a.beginPath();a.moveTo(k[0]*d,k[1]*d);a.lineTo(l[0]*d,l[1]*d);a.lineTo(m[0]*d,m[1]*d);a.lineTo(c[0]*d,c[1]*d);a.clip();Um(a,h,e/2,f/2)}
function cO(a,b,c,d,e){var f=a.W();if(f.be(b)){var h=d.size[0]*d.pixelRatio,k=d.size[1]*d.pixelRatio,l=d.viewState.rotation;Um(c,-l,h/2,k/2);a=void 0!==e?e:dO(a,d,0);f.dispatchEvent(new Pt(b,new WI(c,d.pixelRatio,d.extent,a,d.viewState.rotation),d,c,null));Um(c,l,h/2,k/2)}}bO.prototype.In=function(a,b,c,d){cO(this,"postcompose",a,b,d)};function dO(a,b,c){var d=b.viewState,e=b.pixelRatio,f=e/d.resolution;return Km(a.pa,e*b.size[0]/2,e*b.size[1]/2,f,-f,-d.rotation,-d.center[0]+c,-d.center[1])};function eO(a){bO.call(this,a);this.o=Bm()}I(eO,bO);eO.prototype.Mq=function(a,b,c){cO(this,"precompose",c,a,void 0);var d=this.Pa();if(d){var e=b.extent,f=void 0!==e&&!Tk(e,a.extent)&&gl(e,a.extent);f&&wla(c,a,e);e=this.u();var h=c.globalAlpha;c.globalAlpha=b.opacity;c.drawImage(d,0,0,+d.width,+d.height,Math.round(e[4]),Math.round(e[5]),Math.round(d.width*e[0]),Math.round(d.height*e[3]));c.globalAlpha=h;f&&c.restore()}this.In(c,a,b)};
eO.prototype.tc=function(a,b,c,d,e){var f=this.W();return f.N().tc(a,b.viewState.resolution,b.viewState.rotation,c,b.skippedFeatureUids,function(a){return d.call(e,a,f)})};function fO(a){eO.call(this,a);this.wa=null;this.j=Bm();this.B=[];this.g=null}I(fO,eO);fO.handles=function(a,b){return"canvas"===a&&("IMAGE"===b.T()||"VECTOR"===b.T()&&"image"===b.ll)};fO.create=function(a,b){var c=new fO(b);if("VECTOR"===b.T())for(var d=0,e=BN.length;d<e;++d){var f=BN[d];f!==fO&&f.handles("canvas",b)&&(f=f.create(a,b),c.g=f)}return c};fO.prototype.Pa=function(){return this.wa?this.wa.Pa():null};fO.prototype.u=function(){return this.j};
fO.prototype.nj=function(a,b){var c=a.pixelRatio,d=a.size,e=a.viewState,f=e.center,h=e.resolution,k=this.W().N(),l=a.viewHints,m=a.extent;void 0!==b.extent&&(m=fl(m,b.extent));if(!l[0]&&!l[1]&&!al(m))if(l=e.projection,e=this.g){l=e.context;var n=of({},a,{size:[bl(m)/h,cl(m)/h],viewState:of({},a.viewState,{rotation:0})}),p=Object.keys(n.skippedFeatureUids).sort();!e.nj(n,b)||!e.o&&Xl(p,this.B)||(l.canvas.width=n.size[0]*c,l.canvas.height=n.size[1]*c,e.Mq(n,b,l),this.wa=new YN(m,h,c,l.canvas),this.B=
p)}else(e=k.Pa(m,h,c,l))&&sla(this,e)&&(this.wa=e);this.wa&&(e=this.wa,m=e.Y(),b=e.bb(),e=e.l,l=c*b/(h*e),m=Km(this.j,c*d[0]/2,c*d[1]/2,l,l,0,e*(m[0]-f[0])/b,e*(f[1]-m[3])/b),Km(this.o,c*d[0]/2-m[4],c*d[1]/2-m[5],c/h,-c/h,0,-f[0],-f[1]),aO(a,k),this.l=b*c/e);return!!this.wa};fO.prototype.tc=function(a,b,c,d,e){return this.g?this.g.tc(a,b,c,d,e):eO.prototype.tc.call(this,a,b,c,d,e)};function gO(a,b){this.ha=b;this.o={};this.G={}}I(gO,Bf);function xla(a){var b=a.viewState,c=a.coordinateToPixelTransform,d=a.pixelToCoordinateTransform;Km(c,a.size[0]/2,a.size[1]/2,1/b.resolution,-1/b.resolution,-b.rotation,-b.center[0],-b.center[1]);a=Fm(d,c);b=a[0]*a[3]-a[1]*a[2];Mf(0!==b,32);c=a[0];d=a[1];var e=a[2],f=a[3],h=a[4],k=a[5];a[0]=f/b;a[1]=-d/b;a[2]=-e/b;a[3]=c/b;a[4]=(e*k-f*h)/b;a[5]=-(c*k-d*h)/b}function yla(){$z(aA)}g=gO.prototype;
g.tc=function(a,b,c,d,e,f,h){function k(a,c){var f=J(a).toString(),h=b.layerStates[J(c)].managed;if(!(f in b.skippedFeatureUids)||h)return d.call(e,a,h?c:null)}var l,m=b.viewState,n=m.resolution,p=m.projection;m=a;if(p.g){p=p.Y();var r=bl(p),u=a[0];if(u<p[0]||u>p[2])m=[u+r*Math.ceil((p[0]-u)/r),a[1]]}p=b.layerStatesArray;for(r=p.length-1;0<=r;--r){var v=p[r];u=v.layer;if(Tf(v,n)&&f.call(h,u)&&(v=hO(this,u),u.N()&&(l=v.tc(u.N().Go?m:a,b,c,k,e)),l))return l}};
function hO(a,b){var c=J(b).toString();if(c in a.o)return a.o[c];for(var d,e=a.T(),f=0,h=BN.length;f<h;++f){var k=BN[f];if(k.handles(e,b)){d=k.create(a,b);break}}if(d)a.o[c]=d,a.G[c]=H(d,"change",a.iF,a);else throw Error("Unable to create renderer for layer: "+b.T());return d}g.X=function(){return this.ha};g.iF=function(){this.ha.render()};function Mka(a,b){var c=a.o[b];delete a.o[b];sf(a.G[b]);delete a.G[b];return c}g.mj=Af;g.EN=function(a,b){for(var c in this.o)b&&c in b.layerStates||Mka(this,c).dispose()};
function zla(a,b){for(var c in a.o)if(!(c in b.layerStates)){b.postRenderFunctions.push(a.EN.bind(a));break}}function Ala(a,b){return a.zIndex-b.zIndex};function iO(a,b){gO.call(this,a,b);this.l=um();this.g=this.l.canvas;this.g.style.width="100%";this.g.style.height="100%";this.g.style.display="block";this.g.className="ol-unselectable";a.insertBefore(this.g,a.childNodes[0]||null);this.j=!0;this.u=Bm()}I(iO,gO);iO.handles=function(a){return"canvas"===a};iO.create=function(a,b){return new iO(a,b)};
function Bla(a,b,c){var d=a.X(),e=a.l;if(d.be(b)){var f=c.extent,h=c.pixelRatio,k=c.viewState.rotation,l=c.viewState,m=c.pixelRatio/l.resolution;a=Km(a.u,a.g.width/2,a.g.height/2,m,-m,-l.rotation,-l.center[0],-l.center[1]);d.dispatchEvent(new Pt(b,new WI(e,h,f,a,k),c,e,null))}}iO.prototype.T=function(){return"canvas"};
iO.prototype.mj=function(a){if(a){var b=this.l,c=a.pixelRatio,d=Math.round(a.size[0]*c),e=Math.round(a.size[1]*c);this.g.width!=d||this.g.height!=e?(this.g.width=d,this.g.height=e):b.clearRect(0,0,d,e);c=a.viewState.rotation;xla(a);Bla(this,"precompose",a);var f=a.layerStatesArray;Yl(f,Ala);c&&(b.save(),Um(b,c,d/2,e/2));d=a.viewState.resolution;var h;e=0;for(h=f.length;e<h;++e){var k=f[e];var l=k.layer;l=hO(this,l);Tf(k,d)&&"ready"==k.sourceState&&l.nj(a,k)&&l.Mq(a,k,b)}c&&b.restore();Bla(this,"postcompose",
a);this.j||(this.g.style.display="",this.j=!0);zla(this,a);a.postRenderFunctions.push(yla)}else this.j&&(this.g.style.display="none",this.j=!1)};function jO(a){eO.call(this,a);this.context=null===this.context?null:um();this.g=null;this.j=[];this.P=Ok();this.Ea=new Rl(0,0,0,0);this.B=Bm();this.U=0}I(jO,eO);jO.handles=function(a,b){return"canvas"===a&&"TILE"===b.T()};jO.create=function(a,b){return new jO(b)};function Cla(a,b){b=b.getState();a=AH(a.W());return b==zI||b==tI||b==AI&&!a}
jO.prototype.nj=function(a,b){var c=a.pixelRatio,d=a.size,e=a.viewState,f=e.projection,h=e.resolution;e=e.center;var k=this.W(),l=k.N(),m=l.Tb,n=l.Od(f),p=jm(n,h,this.U),r=n.bb(p),u=Math.round(h/r)||1,v=a.extent;void 0!==b.extent&&(v=fl(v,b.extent));if(al(v))return!1;var y=cm(n,v,p),B=Ica(n,p,y),G=l.aj(c),D={};D[p]={};var U=this.A(l,f,D),ja=this.P,ea=this.Ea,ca=!1,aa,ka;for(aa=y.minX;aa<=y.maxX;++aa)for(ka=y.minY;ka<=y.maxY;++ka){var Ha=sI(l,p,aa,ka,c,f);Ha.getState()==AI&&(AH(k)?0<k.get("preload")&&
(ca=!0):Ha.Ga(zI));Cla(this,Ha)||(Ha=Dla(Ha));if(Cla(this,Ha)){var Oa=J(this);if(Ha.getState()==zI){D[p][Ha.fc.toString()]=Ha;var tc=Ha.l?-1!==Ha.B[Oa]:!1;ca||!tc&&-1!==this.j.indexOf(Ha)||(ca=!0)}if(1===Ela(Ha,Oa,a.time))continue}Oa=em(n,Ha.fc,ea,ja);tc=!1;Oa&&(tc=U(p+1,Oa));tc||am(n,Ha.fc,U,ea,ja)}Ha=r*c/G*u;aa=a.viewHints;aa=aa[0]||aa[1];if(!(this.l&&16<Date.now()-a.time&&aa||!ca&&this.g&&Tk(this.g,v)&&this.renderedRevision==m&&u==this.K&&(aa||Ha==this.l))){if(Ha=this.context)ka=kO(l,p,c,f),aa=
Math.round((y.maxX-y.minX+1)*ka[0]/u),ka=Math.round((y.maxY-y.minY+1)*ka[1]/u),ca=Ha.canvas,ca.width!=aa||ca.height!=ka?(this.K=u,ca.width=aa,ca.height=ka):(this.g&&!Xk(B,this.g)&&Ha.clearRect(0,0,aa,ka),u=this.K);this.j.length=0;ca=Object.keys(D).map(Number);ca.sort(function(a,b){return a===p?1:b===p?-1:a>b?1:a<b?-1:0});Oa=0;for(tc=ca.length;Oa<tc;++Oa){ea=ca[Oa];U=kO(l,ea,c,f);Ha=n.bb(ea);var Ua=Ha/r;var la=G*l.Ap(f);var Yb=D[ea];for(var jn in Yb){Ha=Yb[jn];ka=bm(n,Ha.fc,ja);aa=(ka[0]-B[0])/r*G/
u;ka=(B[3]-ka[3])/r*G/u;var Gs=U[0]*Ua/u;var Vh=U[1]*Ua/u;this.mp(Ha,a,b,aa,ka,Gs,Vh,la,p===ea);this.j.push(Ha)}}this.renderedRevision=m;this.l=r*c/G*u;this.g=B}b=this.l/h;b=Km(this.B,c*d[0]/2,c*d[1]/2,b,b,0,(this.g[0]-e[0])/this.l*c,(e[1]-this.g[3])/this.l*c);Km(this.o,c*d[0]/2-b[4],c*d[1]/2-b[5],c/h,-c/h,0,-e[0],-e[1]);ula(a.usedTiles,l,p,y);vla(a,l,n,c,f,v,p,k.get("preload"));tla(a,l);aO(a,l);return 0<this.j.length};
jO.prototype.mp=function(a,b,c,d,e,f,h,k,l){if(c=a.Pa(this.W())){var m=J(this),n=l?Ela(a,m,b.time):1;1!==n||this.W().N().rk(b.viewState.projection)||this.context.clearRect(d,e,f,h);var p=n!==this.context.globalAlpha;p&&(this.context.save(),this.context.globalAlpha=n);this.context.drawImage(c,k,k,c.width-2*k,c.height-2*k,d,e,f,h);p&&this.context.restore();1!==n?b.animate=!0:l&&a.l&&(a.B[m]=-1)}};jO.prototype.Pa=function(){var a=this.context;return a?a.canvas:null};jO.prototype.u=function(){return this.B};function Fla(){};function lO(a,b,c,d,e,f){wn.call(this,a,b,c,d,e,f);this.wa=this.Ia=this.aa=null;this.P=this.O=this.K=this.I=this.G=this.pa=this.U=this.B=this.A=this.o=this.l=void 0}I(lO,wn);
lO.prototype.lh=function(a,b){if(this.wa){Dn(this,b);var c=a.flatCoordinates,d=this.coordinates.length;a=An(this,c,0,c.length,a.stride,!1,!1);this.j.push([6,d,a,this.wa,this.l,this.o,this.aa,this.A,this.B,this.U,this.pa,this.G,this.I,this.K*this.pixelRatio,this.O,this.P]);this.g.push([6,d,a,this.Ia,this.l,this.o,this.aa,this.A,this.B,this.U,this.pa,this.G,this.I,this.K,this.O,this.P]);En(this,b)}};
lO.prototype.kh=function(a,b){if(this.wa){Dn(this,b);var c=a.flatCoordinates,d=this.coordinates.length;a=An(this,c,0,c.length,a.stride,!1,!1);this.j.push([6,d,a,this.wa,this.l,this.o,this.aa,this.A,this.B,this.U,this.pa,this.G,this.I,this.K*this.pixelRatio,this.O,this.P]);this.g.push([6,d,a,this.Ia,this.l,this.o,this.aa,this.A,this.B,this.U,this.pa,this.G,this.I,this.K,this.O,this.P]);En(this,b)}};
lO.prototype.finish=function(){Hn(this);this.o=this.l=void 0;this.wa=this.Ia=null;this.P=this.O=this.I=this.G=this.pa=this.U=this.B=this.K=this.A=void 0};lO.prototype.Mf=function(a,b){var c=a.Ri(),d=a.Ef(),e=a.Pq(),f=a.Pa(1),h=a.Lk();this.l=c[0];this.o=c[1];this.aa=b;this.Ia=e;this.wa=f;this.A=d[1];this.B=a.Nb();this.U=h[0];this.pa=h[1];this.G=a.I;this.I=a.l;this.K=a.j();this.O=a.O;this.P=d[0]};function mO(a,b,c,d,e,f){wn.call(this,a,b,c,d,e,f)}I(mO,wn);function Gla(a,b,c,d,e){var f=a.coordinates.length;b=An(a,b,c,d,e,!1,!1);f=[9,f,b];a.j.push(f);a.g.push(f);return d}mO.prototype.jh=function(a,b){var c=this.state,d=c.lineWidth;void 0!==c.strokeStyle&&void 0!==d&&(Jn(this,c,this.Ci),Dn(this,b),this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset],[1]),c=a.flatCoordinates,Gla(this,c,0,c.length,a.stride),this.g.push([12]),En(this,b))};
mO.prototype.Ng=function(a,b){var c=this.state,d=c.lineWidth;if(void 0!==c.strokeStyle&&void 0!==d){Jn(this,c,this.Ci);Dn(this,b);this.g.push([11,c.strokeStyle,c.lineWidth,c.lineCap,c.lineJoin,c.miterLimit,c.lineDash,c.lineDashOffset],[1]);c=a.zd();d=a.flatCoordinates;a=a.stride;var e=0,f;var h=0;for(f=c.length;h<f;++h)e=Gla(this,d,e,c[h],a);this.g.push([12]);En(this,b)}};
mO.prototype.finish=function(){var a=this.state;void 0!=a.lastStroke&&a.lastStroke!=this.coordinates.length&&this.j.push([12]);Hn(this);this.state=null};mO.prototype.Ci=function(a){void 0!=a.lastStroke&&a.lastStroke!=this.coordinates.length&&(this.j.push([12]),a.lastStroke=this.coordinates.length);a.lastStroke=0;wn.prototype.Ci.call(this,a);this.j.push([1])};function nO(a,b,c,d,e,f){wn.call(this,a,b,c,d,e,f);this.Ob="";this.G=this.U=0;this.pa=void 0;this.aa=0;this.o=null;this.O={};this.l=null;this.jb={};this.A={};this.I={};this.Ia=this.K=this.B="";for(this.Eb={};Pm.Kg();)Pm.pop()}I(nO,wn);
nO.prototype.pf=function(a,b){var c=this.o,d=this.l,e=this.A;if(""!==this.Ob&&e&&(c||d)){c=this.coordinates.length;var f=a.T();d=null;var h=2,k=2;if("line"===e.placement){if(!gl(Bn(this),a.Y()))return;d=a.flatCoordinates;k=a.stride;if("LineString"==f)var l=[d.length];else if("MultiLineString"==f)l=a.zd();else if("Polygon"==f)l=a.zd().slice(0,1);else if("MultiPolygon"==f)for(a=a.Jc,l=[],h=0,f=a.length;h<f;++h)l.push(a[h][0]);Dn(this,b);a=e.textAlign;var m=0,n;f=0;for(var p=l.length;f<p;++f){if(void 0==
a){for(var r,u,v=void 0,y=void 0,B=h=u=r=void 0,G=n=m,D=0,U=0,ja=m;m<l[f];m+=k){var ea=d[m],ca=d[m+1];void 0!==u&&(u=ea-u,r=ca-r,h=Math.sqrt(u*u+r*r),void 0!==y&&(U+=B,v=Math.acos((y*u+v*r)/(B*h)),v>e.maxAngle&&(U>D&&(D=U,n=ja,G=m),U=0,ja=m-k)),B=h,y=u,v=r);u=ea;r=ca}h=U+h>D?[ja,m]:[n,G];m=h[0];n=h[1]}else n=l[f];for(h=m;h<n;h+=k)this.coordinates.push(d[h],d[h+1]);h=this.coordinates.length;m=l[f];Hla(this,c,h,this.P);c=h}}else{l=this.Pa(this.Ob,this.B,this.K,this.Ia);p=l.width/this.pixelRatio;switch(f){case "Point":case "MultiPoint":d=
a.flatCoordinates;h=d.length;break;case "LineString":d=Lo(a);break;case "Circle":d=Xo(a);break;case "MultiLineString":d=Po(a);h=d.length;break;case "Polygon":d=sp(a);if(!e.overflow&&d[2]/this.resolution<p)return;k=3;break;case "MultiPolygon":n=xp(a);d=[];h=0;for(f=n.length;h<f;h+=3)(e.overflow||n[h+2]/this.resolution>=p)&&d.push(n[h],n[h+1]);h=d.length;if(0==h)return}h=An(this,d,0,h,k,!1,!1);Dn(this,b);if(e.backgroundFill||e.backgroundStroke)this.Dc(e.backgroundFill,e.backgroundStroke),In(this,this.state,
this.du,a),Jn(this,this.state,this.Ci);Ila(this,l,c,h)}En(this,b)}};
nO.prototype.Pa=function(a,b,c,d){var e=d+b+a+c+this.pixelRatio;if(!zm(Pm,e)){var f=d?this.jb[d]||this.l:null,h=c?this.O[c]||this.o:null,k=this.I[b]||this.A,l=k.scale*this.pixelRatio,m=vn[k.textAlign||"center"];b=d&&f.lineWidth?f.lineWidth:0;a=a.split("\n");var n=a.length,p=[],r=k.font;var u=a.length;var v=0;var y;for(y=0;y<u;++y){var B=Tm(r,a[y]);v=Math.max(v,B);p.push(B)}u=v;r=Pca(k.font);u=um(Math.ceil((u+b)*l),Math.ceil((r*n+b)*l));v=u.canvas;Pm.set(e,v);1!=l&&u.scale(l,l);u.font=k.font;d&&(u.strokeStyle=
f.strokeStyle,u.lineWidth=b*(hn?l:1),u.lineCap=f.lineCap,u.lineJoin=f.lineJoin,u.miterLimit=f.miterLimit,nn&&f.lineDash.length&&(u.setLineDash(f.lineDash),u.lineDashOffset=f.lineDashOffset));c&&(u.fillStyle=h.fillStyle);u.textBaseline="middle";u.textAlign="center";f=.5-m;h=m*v.width/l+f*b;if(d)for(d=0;d<n;++d)u.strokeText(a[d],h+f*p[d],.5*(b+r)+d*r);if(c)for(d=0;d<n;++d)u.fillText(a[d],h+f*p[d],.5*(b+r)+d*r)}return Pm.get(e)};
function Ila(a,b,c,d){var e=a.A,f=a.l,h=a.pixelRatio,k=vn[e.textAlign||"center"],l=vn[e.textBaseline];f=f&&f.lineWidth?f.lineWidth:0;k=k*b.width/h+2*(.5-k)*f;l=l*b.height/h+2*(.5-l)*f;a.j.push([6,c,d,b,(k-a.U)*h,(l-a.G)*h,a.P,b.height,1,0,0,a.pa,a.aa,1,!0,b.width,e.padding==Om?Om:e.padding.map(function(a){return a*h}),!!e.backgroundFill,!!e.backgroundStroke]);a.g.push([6,c,d,b,(k-a.U)*h,(l-a.G)*h,a.P,b.height,1,0,0,a.pa,a.aa,1/h,!0,b.width,e.padding,!!e.backgroundFill,!!e.backgroundStroke])}
function Hla(a,b,c,d){var e=a.l,f=a.A,h=a.o,k=a.Ia;e&&(k in a.jb||(a.jb[k]={strokeStyle:e.strokeStyle,lineCap:e.lineCap,lineDashOffset:e.lineDashOffset,lineWidth:e.lineWidth,lineJoin:e.lineJoin,miterLimit:e.miterLimit,lineDash:e.lineDash}));var l=a.B;a.B in a.I||(a.I[a.B]={font:f.font,textAlign:f.textAlign||"center",scale:f.scale});var m=a.K;h&&(m in a.O||(a.O[m]={fillStyle:h.fillStyle}));var n=a.pixelRatio;h=vn[f.textBaseline];var p=a.G*n,r=a.Ob,u=f.font,v=f.scale;e=e?e.lineWidth*v/2:0;var y=a.Eb[u];
y||(a.Eb[u]=y={});a.j.push([5,b,c,h,d,f.overflow,m,f.maxAngle,function(a){var b=y[a];b||(b=y[a]=Tm(u,a));return b*v*n},p,k,e*n,r,l,1]);a.g.push([5,b,c,h,d,f.overflow,m,f.maxAngle,function(a){var b=y[a];b||(b=y[a]=Tm(u,a));return b*v},p,k,e,r,l,1/n])}
nO.prototype.Vd=function(a,b){var c,d;if(a){this.P=b;(d=a.lb())?(b=this.o,b||(b=this.o={}),b.fillStyle=Xm(d.Ja()||Lm)):b=this.o=null;if(c=a.kb()){d=this.l;d||(d=this.l={});var e=c.j,f=c.o,h=c.g,k=c.B;d.lineCap=c.u||"round";d.lineDash=e?e.slice():Mm;d.lineDashOffset=void 0===f?0:f;d.lineJoin=c.A||"round";d.lineWidth=void 0===h?1:h;d.miterLimit=void 0===k?10:k;d.strokeStyle=Xm(c.Ja()||Nm)}else d=this.l=null;c=this.A;e=a.Ae()||"10px sans-serif";Oca(e);f=a.j;c.overflow=a.I;c.font=e;c.maxAngle=a.G;c.placement=
a.K;c.textAlign=a.g;c.textBaseline=a.l||"middle";c.backgroundFill=a.O;c.backgroundStroke=a.P;c.padding=a.U||Om;c.scale=void 0===f?1:f;e=a.ng;f=a.o;h=a.u;k=a.A;this.Ob=a.mb()||"";this.U=void 0===e?0:e;this.G=void 0===f?0:f;this.pa=void 0===h?!1:h;this.aa=void 0===k?0:k;this.Ia=d?("string"==typeof d.strokeStyle?d.strokeStyle:J(d.strokeStyle))+d.lineCap+d.lineDashOffset+"|"+d.lineWidth+d.lineJoin+d.miterLimit+"["+d.lineDash.join()+"]":"";this.B=c.font+c.scale+(c.textAlign||"?");this.K=b?"string"==typeof b.fillStyle?
b.fillStyle:"|"+J(b.fillStyle):""}else this.Ob=""};function oO(a,b,c,d,e,f,h){this.g=f;this.j=null;this.G=a;this.l=b;this.En=e;this.A=d;this.B=c;this.He=h;this.Ee={};this.o=um(1,1);this.u=Bm()}I(oO,Fla);var pO={0:[[!0]]};function qO(a,b,c){var d,e=Math.floor(a.length/2);if(b>=e)for(d=e;d<b;d++)a[d][c]=!0;else if(b<e)for(d=b+1;d<e;d++)a[d][c]=!0}
function Jla(a){if(void 0!==pO[a])return pO[a];for(var b=2*a+1,c=Array(b),d=0;d<b;d++)c[d]=Array(b);b=a;for(var e=d=0;b>=d;)qO(c,a+b,a+d),qO(c,a+d,a+b),qO(c,a-d,a+b),qO(c,a-b,a+d),qO(c,a-b,a-d),qO(c,a-d,a-b),qO(c,a+d,a-b),qO(c,a+b,a-d),d++,e+=1+2*d,0<2*(e-b)+1&&(--b,e+=1-2*b);return pO[a]=c}g=oO.prototype;g.mf=function(a){var b=null;this.g&&(a?(b=this.j,b[4]++):(b=this.j=Ok(),b.push(1)));return b};g.finish=function(){for(var a in this.Ee){var b=this.Ee[a],c;for(c in b)b[c].finish()}};
g.tc=function(a,b,c,d,e,f,h){d=Math.round(d);var k=2*d+1,l=Km(this.u,d+.5,d+.5,1/b,-1/b,-c,-a[0],-a[1]),m=this.o;m.canvas.width!==k||m.canvas.height!==k?(m.canvas.width=k,m.canvas.height=k):m.clearRect(0,0,k,k);if(void 0!==this.He){var n=Ok();Pk(n,a);Qk(n,b*(this.He+d),n)}var p=Jla(d),r;this.g&&(r=this.g.all().map(function(a){return a.value}));return Kla(this,m,l,c,e,function(a){for(var b=m.getImageData(0,0,k,k).data,c=0;c<k;c++)for(var d=0;d<k;d++)if(p[c][d]&&0<b[4*(d*k+c)+3]){var e;r&&-1===r.indexOf(a)||
(e=f(a));if(e)return e;m.clearRect(0,0,k,k);return}},n,h)};function Lla(a,b){var c=a.l;a=c[0];var d=c[1],e=c[2];c=c[3];a=[a,d,a,c,e,c,e,d];bn(a,0,8,2,b,a);return a}g.oc=function(a,b){var c=void 0!==a?a.toString():"0";a=this.Ee[c];void 0===a&&(a={},this.Ee[c]=a);c=a[b];void 0===c&&(c=new Mla[b](this.G,this.l,this.B,this.A,this.En,this.g),a[b]=c);return c};g.isEmpty=function(){return rf(this.Ee)};
g.xc=function(a,b,c,d,e,f){var h=Object.keys(this.Ee).map(Number);h.sort(Ul);a.save();var k=Lla(this,b);a.beginPath();a.moveTo(k[0],k[1]);a.lineTo(k[2],k[3]);a.lineTo(k[4],k[5]);a.lineTo(k[6],k[7]);a.clip();e=e?e:un;var l,m;k=0;for(l=h.length;k<l;++k){var n=h[k].toString();var p=this.Ee[n];var r=0;for(m=e.length;r<m;++r){var u=e[r];var v=p[u];void 0!==v&&(!f||"Image"!=u&&"Text"!=u?v.xc(a,b,c,d):(u=f[n])?u.push(v,b.slice(0)):f[n]=[v,b.slice(0)])}}a.restore()};
function Kla(a,b,c,d,e,f,h,k){var l=Object.keys(a.Ee).map(Number);l.sort(Ul);var m,n;for(m=l.length-1;0<=m;--m){var p=l[m].toString();var r=a.Ee[p];for(n=un.length-1;0<=n;--n){var u=un[n];var v=r[u];if(void 0!==v)if(!k||"Image"!=u&&"Text"!=u){u=b;var y=c,B=e,G=f,D=h;v.cb=d;if(v=Gn(v,u,y,B,v.g,G,D))return v}else(u=k[p])?u.push(v,c.slice(0)):k[p]=[v,c.slice(0)]}}}var Mla={Circle:Kn,Default:wn,Image:lO,LineString:mO,Polygon:Kn,Text:nO};function Nla(a,b){return J(a)-J(b)}function rO(a,b){a=.5*a/b;return a*a}function sO(a,b,c,d,e,f){var h=!1,k;if(k=c.Pa()){var l=k.Fe();2==l||3==l?k.Bl(e,f):(0==l&&k.load(),k.Vh(e,f),h=!0)}if(e=(0,c.Re)(b))if(d=e.wm(d),c.Wi())Ola(a,d,c,b);else(0,Pla[d.T()])(a,d,c,b);return h}function Ola(a,b,c,d){if("GeometryCollection"==b.T()){b=dp(b);for(var e=0,f=b.length;e<f;++e)Ola(a,b[e],c,d)}else a.oc(c.Ac(),"Default").Eu(b,d,c.Wi())}
var Pla={Point:function(a,b,c,d){var e=c.Pa();if(e){if(2!=e.Fe())return;var f=a.oc(c.Ac(),"Image");f.Mf(e,a.mf(!1));f.lh(b,d)}if(f=c.mb())c=a.oc(c.Ac(),"Text"),c.Vd(f,a.mf(!!e)),c.pf(b,d)},LineString:function(a,b,c,d){var e=c.kb();if(e){var f=a.oc(c.Ac(),"LineString");f.Dc(null,e);f.jh(b,d)}if(e=c.mb())c=a.oc(c.Ac(),"Text"),c.Vd(e,a.mf(!1)),c.pf(b,d)},Polygon:function(a,b,c,d){var e=c.lb(),f=c.kb();if(e||f){var h=a.oc(c.Ac(),"Polygon");h.Dc(e,f);h.mg(b,d)}if(e=c.mb())c=a.oc(c.Ac(),"Text"),c.Vd(e,
a.mf(!1)),c.pf(b,d)},MultiPoint:function(a,b,c,d){var e=c.Pa();if(e){if(2!=e.Fe())return;var f=a.oc(c.Ac(),"Image");f.Mf(e,a.mf(!1));f.kh(b,d)}if(f=c.mb())c=a.oc(c.Ac(),"Text"),c.Vd(f,a.mf(!!e)),c.pf(b,d)},MultiLineString:function(a,b,c,d){var e=c.kb();if(e){var f=a.oc(c.Ac(),"LineString");f.Dc(null,e);f.Ng(b,d)}if(e=c.mb())c=a.oc(c.Ac(),"Text"),c.Vd(e,a.mf(!1)),c.pf(b,d)},MultiPolygon:function(a,b,c,d){var e=c.lb(),f=c.kb();if(f||e){var h=a.oc(c.Ac(),"Polygon");h.Dc(e,f);h.lg(b,d)}if(e=c.mb())c=
a.oc(c.Ac(),"Text"),c.Vd(e,a.mf(!1)),c.pf(b,d)},GeometryCollection:function(a,b,c,d){b=b.g;var e;var f=0;for(e=b.length;f<e;++f)(0,Pla[b[f].T()])(a,b[f],c,d)},Circle:function(a,b,c,d){var e=c.lb(),f=c.kb();if(e||f){var h=a.oc(c.Ac(),"Circle");h.Dc(e,f);h.Tf(b,d)}if(e=c.mb())c=a.oc(c.Ac(),"Text"),c.Vd(e,a.mf(!1)),c.pf(b,d)}};function tO(a){bO.call(this,a);this.l=a.jp?Mu.ji(9):null;this.j=!1;this.I=-1;this.G=NaN;this.u=Ok();this.g=this.B=null;this.o=!0;this.context=um();H(Pm,"clear",this.qw,this)}I(tO,bO);tO.handles=function(a,b){return"canvas"===a&&"VECTOR"===b.T()};tO.create=function(a,b){return new tO(b)};g=tO.prototype;g.J=function(){yf(Pm,"clear",this.qw,this);bO.prototype.J.call(this)};
g.Mq=function(a,b,c){var d=a.extent,e=a.pixelRatio,f=b.managed?a.skippedFeatureUids:{},h=a.viewState,k=h.projection,l=h.rotation,m=k.Y(),n=this.W().N(),p=dO(this,a,0);cO(this,"precompose",c,a,p);var r=b.extent;(h=void 0!==r)&&wla(c,a,r);var u=this.g;if(u&&!u.isEmpty()){this.l&&this.l.clear();var v=this.W(),y=r=0,B=1!==b.opacity;v=v.be("render");if(B||v){var G=c.canvas.width;var D=c.canvas.height;if(l){var U=Math.round(Math.sqrt(G*G+D*D));r=(U-G)/2;y=(U-D)/2;G=D=U}this.context.canvas.width=G;this.context.canvas.height=
D;G=this.context}else G=c;D=G.globalAlpha;B||(G.globalAlpha=b.opacity);G!=c&&G.translate(r,y);U=a.size[0]*e;e*=a.size[1];Um(G,-l,U/2,e/2);u.xc(G,p,l,f);if(n.Go&&k.g&&!Tk(m,d)){k=d[0];n=bl(m);for(var ja=0;k<m[0];)--ja,p=n*ja,p=dO(this,a,p),u.xc(G,p,l,f),k+=n;ja=0;for(k=d[2];k>m[2];)++ja,p=n*ja,p=dO(this,a,p),u.xc(G,p,l,f),k-=n;p=dO(this,a,0)}Um(G,l,U/2,e/2);G!=c&&(v&&cO(this,"render",G,a,p),B?(d=c.globalAlpha,c.globalAlpha=b.opacity,c.drawImage(G.canvas,-r,-y),c.globalAlpha=d):c.drawImage(G.canvas,
-r,-y),G.translate(-r,-y));B||(G.globalAlpha=D)}h&&c.restore();this.In(c,a,b,p)};g.tc=function(a,b,c,d,e){if(this.g){var f=b.viewState.resolution;b=b.viewState.rotation;var h=this.W(),k={};return this.g.tc(a,f,b,c,{},function(a){var b=J(a).toString();if(!(b in k))return k[b]=!0,d.call(e,a,h)},null)}};g.qw=function(){var a=this.W();a.yb()&&this.g&&a.ia()};g.rw=function(){$N(this)};
g.nj=function(a){var b=this.W(),c=b.N();aO(a,c);var d=a.viewHints[0],e=a.viewHints[1],f=b.vB,h=b.wB;if(!this.j&&!f&&d||!h&&e)return!0;f=a.extent;var k=a.viewState;h=k.projection;var l=k.resolution,m=a.pixelRatio;d=b.Tb;var n=b.He;e=b.get("renderOrder");void 0===e&&(e=Nla);f=Qk(f,n*l);n=k.projection.Y();c.Go&&k.projection.g&&!Tk(n,a.extent)&&(a=Math.max(bl(f)/2,bl(n)),f[0]=n[0]-a,f[2]=n[2]+a);if(!this.j&&this.G==l&&this.I==d&&this.B==e&&Tk(this.u,f))return this.o=!1,!0;this.g=null;this.j=!1;var p=
new oO(.5*l/m,f,l,m,c.En,this.l,b.He);Yu(c,f,l,h);a=function(a){var c=a.Nd();if(c)var d=c.call(a,l);else(c=b.Nd())&&(d=c(a,l));if(d){if(d){c=!1;if(Array.isArray(d))for(var e=0,f=d.length;e<f;++e)c=sO(p,a,d[e],rO(l,m),this.rw,this)||c;else c=sO(p,a,d,rO(l,m),this.rw,this);a=c}else a=!1;this.j=this.j||a}}.bind(this);if(e){var r=[];Wu(c,f,function(a){r.push(a)},this);r.sort(e);c=0;for(h=r.length;c<h;++c)a(r[c])}else Wu(c,f,a,this);p.finish();this.G=l;this.I=d;this.B=e;this.u=f;this.g=p;return this.o=
!0};function uO(a){this.context=null;jO.call(this,a);this.G=a.jp?Mu.ji(9):null;this.I=!1;this.aa=Bm();this.U="vector"==a.ll?1:0;H(Pm,"clear",this.sw,this)}I(uO,jO);uO.handles=function(a,b){return"canvas"===a&&"VECTOR_TILE"===b.T()};uO.create=function(a,b){return new uO(b)};var Qla={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"]},Rla={image:["Default"],hybrid:["Image","Text","Default"],vector:un};g=uO.prototype;g.J=function(){yf(Pm,"clear",this.sw,this);jO.prototype.J.call(this)};
g.nj=function(a,b){var c=this.W(),d=c.Tb;this.O!=d&&(this.j.length=0,c=c.ll,this.context||"vector"==c||(this.context=um()),this.context&&"vector"==c&&(this.context=null));this.O=d;return jO.prototype.nj.apply(this,arguments)};
g.mp=function(a,b,c,d,e,f,h,k,l){var m=a,n=b,p=this.W(),r=n.pixelRatio;n=n.viewState.projection;var u=p.Tb,v=p.get("renderOrder")||null,y=m.yE(p);if(y.dirty||y.renderedRevision!=u||y.renderedRenderOrder!=v){var B=p.N(),G=B.tileGrid,D=B.Od(n),U=D.bb(m.fc[0]);D=bm(D,m.Ft);for(var ja=0,ea=m.vi.length;ja<ea;++ja){var ca=sI(m,m.vi[ja]);if(ca.getState()!=AI){var aa=bm(G,ca.fc),ka=fl(D,aa),Ha=Xk(aa,ka)?null:Qk(ka,p.He*U),Oa=ca.Ra(),tc=!1;Nl(n,Oa)||(tc=!0,ca.co(n));y.dirty=!1;ka=new oO(0,ka,U,r,B.En,this.G,
p.He);var Ua=rO(U,r),la=ca.La();v&&v!==y.renderedRenderOrder&&la.sort(v);for(var Yb,jn=0,Gs=la.length;jn<Gs;++jn)if(Yb=la[jn],tc&&("tile-pixels"==Oa.Tc()&&(Oa.Fo=aa,Oa.Cc(ca.Y())),Yb.Z().transform(Oa,n)),!Ha||gl(Ha,Yb.Z().Y())){var Vh=void 0,sl=Yb.Nd();sl?Vh=sl.call(Yb,U):(sl=p.Nd())&&(Vh=sl(Yb,U));if(Vh){sl=Ua;var yB=ka;if(Vh){var mw=!1;if(Array.isArray(Vh))for(var nw=0,Hs=Vh.length;nw<Hs;++nw)mw=sO(yB,Yb,Vh[nw],sl,this.tw,this)||mw;else mw=sO(yB,Yb,Vh,sl,this.tw,this);Yb=mw}else Yb=!1;this.I=this.I||
Yb;y.dirty=y.dirty||Yb}}ka.finish();for(var Gp in ka.Ee);ca.dT(p,m.fc.toString(),ka)}}y.renderedRevision=u;y.renderedRenderOrder=v}if(this.context){v=b;p=this.W();Gp=m.yE(p);n=p.Tb;if((r=Qla[p.ll])&&Gp.renderedTileRevision!==n)for(Gp.renderedTileRevision=n,y=m.Ft,G=y[0],Gp=v.pixelRatio,U=p.N(),B=U.Od(v.viewState.projection),n=B.bb(G),u=m.getContext(p),v=kO(U,G,Gp,v.viewState.projection),u.canvas.width=v[0],u.canvas.height=v[1],v=bm(B,y),y=0,B=m.vi.length;y<B;++y)G=sI(m,m.vi[y]),G.getState()!=AI&&
(U=Gp/n,D=Cm(this.aa),Im(D,U,-U),Jm(D,-v[0],-v[3]),G.cv(p,m.fc.toString()).xc(u,D,0,{},r));jO.prototype.mp.apply(this,arguments)}};
g.tc=function(a,b,c,d,e){var f=b.viewState.resolution,h=b.viewState.rotation;c=void 0==c?0:c;var k=this.W(),l={},m=this.j;b=k.N().Od(b.viewState.projection);var n;var p=0;for(n=m.length;p<n;++p){var r=m[p];var u=r.Ft;u=bm(b,u,this.P);var v=Qk(u,c*f,v);if(Sk(v,a)){u=0;for(var y=r.vi.length;u<y;++u){var B=sI(r,r.vi[u]);if(B.getState()!=AI){B=B.cv(k,r.fc.toString());var G=G||B.tc(a,f,h,c,{},function(a){var b=J(a).toString();if(!(b in l))return l[b]=!0,d.call(e,a,k)},null)}}}}return G};
g.sw=function(){var a=this.W();a.yb()&&void 0!==this.O&&a.ia()};g.tw=function(){$N(this)};
g.In=function(a,b,c){var d=this.W(),e=d.jp?{}:null,f=d.N(),h=d.ll,k=Rla[h],l=b.pixelRatio,m=b.viewState.rotation,n=b.size;if(m){var p=Math.round(l*n[0]/2);var r=Math.round(l*n[1]/2);Um(a,-m,p,r)}e&&this.G.clear();l=this.j;f=f.Od(b.viewState.projection);n=[];for(var u=[],v=l.length-1;0<=v;--v){var y=l[v];if(5!=y.getState())for(var B=y.fc,G=bm(f,B)[0]-bm(f,y.Ft)[0],D=void 0,U=0,ja=y.vi.length;U<ja;++U){var ea=sI(y,y.vi[U]);if(ea.getState()!=AI){var ca=ea.cv(d,B.toString()),aa;if(!(aa="vector"==h))a:{aa=
void 0;for(aa in ca.Ee)for(var ka=ca.Ee[aa],Ha=0,Oa=k.length;Ha<Oa;++Ha)if(k[Ha]in ka){aa=!0;break a}aa=!1}if(aa){D||(D=dO(this,b,G));ea=ea.fc[0];aa=Lla(ca,D);a.save();a.globalAlpha=c.opacity;ka=0;for(Ha=n.length;ka<Ha;++ka)Oa=n[ka],ea<u[ka]&&(a.beginPath(),a.moveTo(aa[0],aa[1]),a.lineTo(aa[2],aa[3]),a.lineTo(aa[4],aa[5]),a.lineTo(aa[6],aa[7]),a.moveTo(Oa[6],Oa[7]),a.lineTo(Oa[4],Oa[5]),a.lineTo(Oa[2],Oa[3]),a.lineTo(Oa[0],Oa[1]),a.clip());ca.xc(a,D,m,{},k,e);a.restore();n.push(aa);u.push(ea)}}}}if(e)for(d=
a,h=Object.keys(e).map(Number).sort(Ul),k={},l=0,f=h.length;l<f;++l)for(n=e[h[l].toString()],u=0,v=n.length;u<v;)y=n[u++],B=n[u++],y.xc(d,B,m,k);m&&Um(a,m,p,r);jO.prototype.In.apply(this,arguments)};function vO(a){this.g=a}vO.prototype.N=function(){return this.g};function wO(a){this.g=a}I(wO,vO);wO.prototype.T=function(){return 35632};function xO(a){this.g=a}I(xO,vO);xO.prototype.T=function(){return 35633};var Sla=new wO("precision mediump float;\nvarying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_fillColor;\nuniform vec4 u_strokeColor;\nuniform vec2 u_size;\n\nvoid main(void) {\n  vec2 windowCenter = vec2((v_center.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_center.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  vec2 windowOffset = vec2((v_offset.x + 1.0) / 2.0 * u_size.x * v_pixelRatio,\n      (v_offset.y + 1.0) / 2.0 * u_size.y * v_pixelRatio);\n  float radius = length(windowCenter - windowOffset);\n  float dist = length(windowCenter - gl_FragCoord.xy);\n  if (dist > radius + v_halfWidth) {\n    if (u_strokeColor.a == 0.0) {\n      gl_FragColor = u_fillColor;\n    } else {\n      gl_FragColor = u_strokeColor;\n    }\n    gl_FragColor.a = gl_FragColor.a - (dist - (radius + v_halfWidth));\n  } else if (u_fillColor.a == 0.0) {\n    // Hooray, no fill, just stroke. We can use real antialiasing.\n    gl_FragColor = u_strokeColor;\n    if (dist < radius - v_halfWidth) {\n      gl_FragColor.a = gl_FragColor.a - (radius - v_halfWidth - dist);\n    }\n  } else {\n    gl_FragColor = u_fillColor;\n    float strokeDist = radius - v_halfWidth;\n    float antialias = 2.0 * v_pixelRatio;\n    if (dist > strokeDist) {\n      gl_FragColor = u_strokeColor;\n    } else if (dist >= strokeDist - antialias) {\n      float step = smoothstep(strokeDist - antialias, strokeDist, dist);\n      gl_FragColor = mix(u_fillColor, u_strokeColor, step);\n    }\n  }\n  gl_FragColor.a = gl_FragColor.a * u_opacity;\n  if (gl_FragColor.a <= 0.0) {\n    discard;\n  }\n}\n"),
Tla=new xO("varying vec2 v_center;\nvarying vec2 v_offset;\nvarying float v_halfWidth;\nvarying float v_pixelRatio;\n\n\nattribute vec2 a_position;\nattribute float a_instruction;\nattribute float a_radius;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  v_center = vec4(u_projectionMatrix * vec4(a_position, 0.0, 1.0)).xy;\n  v_pixelRatio = u_pixelRatio;\n  float lineWidth = u_lineWidth * u_pixelRatio;\n  v_halfWidth = lineWidth / 2.0;\n  if (lineWidth == 0.0) {\n    lineWidth = 2.0 * u_pixelRatio;\n  }\n  vec2 offset;\n  // Radius with anitaliasing (roughly).\n  float radius = a_radius + 3.0 * u_pixelRatio;\n  // Until we get gl_VertexID in WebGL, we store an instruction.\n  if (a_instruction == 0.0) {\n    // Offsetting the edges of the triangle by lineWidth / 2 is necessary, however\n    // we should also leave some space for the antialiasing, thus we offset by lineWidth.\n    offset = vec2(-1.0, 1.0);\n  } else if (a_instruction == 1.0) {\n    offset = vec2(-1.0, -1.0);\n  } else if (a_instruction == 2.0) {\n    offset = vec2(1.0, -1.0);\n  } else {\n    offset = vec2(1.0, 1.0);\n  }\n\n  gl_Position = u_projectionMatrix * vec4(a_position + offset * radius, 0.0, 1.0) +\n      offsetMatrix * vec4(offset * lineWidth, 0.0, 0.0);\n  v_offset = vec4(u_projectionMatrix * vec4(a_position.x + a_radius, a_position.y,\n      0.0, 1.0)).xy;\n\n  if (distance(v_center, v_offset) > 20000.0) {\n    gl_Position = vec4(v_center, 0.0, 1.0);\n  }\n}\n\n\n");function Ula(a,b){this.l=a.getUniformLocation(b,"u_projectionMatrix");this.u=a.getUniformLocation(b,"u_offsetScaleMatrix");this.o=a.getUniformLocation(b,"u_offsetRotateMatrix");this.Ea=a.getUniformLocation(b,"u_lineWidth");this.ka=a.getUniformLocation(b,"u_pixelRatio");this.j=a.getUniformLocation(b,"u_opacity");this.pa=a.getUniformLocation(b,"u_fillColor");this.sa=a.getUniformLocation(b,"u_strokeColor");this.oa=a.getUniformLocation(b,"u_size");this.g=a.getAttribLocation(b,"a_position");this.B=a.getAttribLocation(b,
"a_instruction");this.P=a.getAttribLocation(b,"a_radius")};function Vla(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function yO(a,b){a[0]=b[0];a[1]=b[1];a[4]=b[2];a[5]=b[3];a[12]=b[4];a[13]=b[5];return a};function zO(a,b){this.origin=dl(b);this.Hc=Bm();this.Vb=Bm();this.gc=Bm();this.Ia=Vla();this.g=[];this.A=null;this.l=[];this.o=[];this.j=[];this.G=null;this.u=void 0}I(zO,tn);
zO.prototype.xc=function(a,b,c,d,e,f,h,k,l,m,n){var p=a.g;if(this.u){var r=p.isEnabled(p.STENCIL_TEST);var u=p.getParameter(p.STENCIL_FUNC);var v=p.getParameter(p.STENCIL_VALUE_MASK);var y=p.getParameter(p.STENCIL_REF);var B=p.getParameter(p.STENCIL_WRITEMASK);var G=p.getParameter(p.STENCIL_FAIL);var D=p.getParameter(p.STENCIL_PASS_DEPTH_PASS);var U=p.getParameter(p.STENCIL_PASS_DEPTH_FAIL);p.enable(p.STENCIL_TEST);p.clear(p.STENCIL_BUFFER_BIT);p.stencilMask(255);p.stencilFunc(p.ALWAYS,1,255);p.stencilOp(p.KEEP,
p.KEEP,p.REPLACE);this.u.xc(a,b,c,d,e,f,h,k,l,m,n);p.stencilMask(0);p.stencilFunc(p.NOTEQUAL,1,255)}AO(a,34962,this.G);AO(a,34963,this.A);f=this.ho(p,a,e,f);var ja=Cm(this.Hc);Im(ja,2/(c*e[0]),2/(c*e[1]));Hm(ja,-d);Jm(ja,-(b[0]-this.origin[0]),-(b[1]-this.origin[1]));b=Cm(this.gc);Im(b,2/e[0],2/e[1]);e=Cm(this.Vb);0!==d&&Hm(e,-d);p.uniformMatrix4fv(f.l,!1,yO(this.Ia,ja));p.uniformMatrix4fv(f.u,!1,yO(this.Ia,b));p.uniformMatrix4fv(f.o,!1,yO(this.Ia,e));p.uniform1f(f.j,h);if(void 0===l)this.ak(p,a,
k,!1);else{m?a=this.fm(p,a,k,l,n):(p.clear(p.COLOR_BUFFER_BIT|p.DEPTH_BUFFER_BIT),this.ak(p,a,k,!0),a=(a=l(null))?a:void 0);var ea=a}this.no(p,f);this.u&&(r||p.disable(p.STENCIL_TEST),p.clear(p.STENCIL_BUFFER_BIT),p.stencilFunc(u,y,v),p.stencilMask(B),p.stencilOp(G,U,D));return ea};function BO(a,b,c,d){a.drawElements(4,d-c,b.A?5125:5123,c*(b.A?4:2))};var CO=[0,0,0,1],DO=[],EO=[0,0,0,1];function FO(a,b,c,d,e,f){a=(c-a)*(f-b)-(e-a)*(d-b);return a<=GO&&a>=-GO?void 0:0<a}var GO=Number.EPSILON||2.220446049250313E-16;function HO(a){this.g=void 0!==a?a:[];this.j=Wla}var Wla=35044;function IO(a,b){zO.call(this,a,b);this.I=null;this.B=[];this.K=[];this.O=0;this.xa={fillColor:null,strokeColor:null,lineDash:null,lineDashOffset:void 0,lineWidth:void 0,ia:!1}}I(IO,zO);g=IO.prototype;
g.Tf=function(a,b){var c=Yo(a),d=a.stride;if(c){this.l.push(this.g.length);this.o.push(b);this.xa.ia&&(this.K.push(this.g.length),this.xa.ia=!1);this.O=c;a=a.flatCoordinates;a=cn(a,0,2,d,-this.origin[0],-this.origin[1]);b=this.j.length;c=this.g.length;var e=b/4,f;for(f=0;2>f;f+=d)this.j[b++]=a[f],this.j[b++]=a[f+1],this.j[b++]=0,this.j[b++]=this.O,this.j[b++]=a[f],this.j[b++]=a[f+1],this.j[b++]=1,this.j[b++]=this.O,this.j[b++]=a[f],this.j[b++]=a[f+1],this.j[b++]=2,this.j[b++]=this.O,this.j[b++]=a[f],
this.j[b++]=a[f+1],this.j[b++]=3,this.j[b++]=this.O,this.g[c++]=e,this.g[c++]=e+1,this.g[c++]=e+2,this.g[c++]=e+2,this.g[c++]=e+3,this.g[c++]=e,e+=4}else this.xa.ia&&(this.B.pop(),this.B.length&&(d=this.B[this.B.length-1],this.xa.fillColor=d[0],this.xa.strokeColor=d[1],this.xa.lineWidth=d[2],this.xa.ia=!1))};g.finish=function(){this.G=new HO(this.j);this.A=new HO(this.g);this.l.push(this.g.length);0===this.K.length&&0<this.B.length&&(this.B=[]);this.g=this.j=null};
g.se=function(a){var b=this.G,c=this.A;return function(){JO(a,b);JO(a,c)}};g.ho=function(a,b,c,d){var e=KO(b,Sla,Tla);if(this.I)var f=this.I;else this.I=f=new Ula(a,e);LO(b,e);a.enableVertexAttribArray(f.g);a.vertexAttribPointer(f.g,2,5126,!1,16,0);a.enableVertexAttribArray(f.B);a.vertexAttribPointer(f.B,1,5126,!1,16,8);a.enableVertexAttribArray(f.P);a.vertexAttribPointer(f.P,1,5126,!1,16,12);a.uniform2fv(f.oa,c);a.uniform1f(f.ka,d);return f};
g.no=function(a,b){a.disableVertexAttribArray(b.g);a.disableVertexAttribArray(b.B);a.disableVertexAttribArray(b.P)};
g.ak=function(a,b,c){if(rf(c)){var d=this.l[this.l.length-1];for(c=this.K.length-1;0<=c;--c){var e=this.K[c];var f=this.B[c];a.uniform4fv(this.I.pa,f[0]);MO(this,a,f[1],f[2]);BO(a,b,e,d);d=e}}else{var h=this.l.length-2;f=d=this.l[h+1];for(e=this.K.length-1;0<=e;--e){var k=this.B[e];a.uniform4fv(this.I.pa,k[0]);MO(this,a,k[1],k[2]);for(k=this.K[e];0<=h&&this.l[h]>=k;){var l=this.l[h];var m=this.o[h];m=J(m).toString();c[m]&&(d!==f&&BO(a,b,d,f),f=l);h--;d=l}d!==f&&BO(a,b,d,f);d=f=k}}};
g.fm=function(a,b,c,d,e){var f,h;var k=this.l.length-2;var l=this.l[k+1];for(f=this.K.length-1;0<=f;--f){var m=this.B[f];a.uniform4fv(this.I.pa,m[0]);MO(this,a,m[1],m[2]);for(h=this.K[f];0<=k&&this.l[k]>=h;){m=this.l[k];var n=this.o[k];var p=J(n).toString();if(void 0===c[p]&&n.Z()&&(void 0===e||gl(e,n.Z().Y()))&&(a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),BO(a,b,m,l),l=d(n)))return l;k--;l=m}}};function MO(a,b,c,d){b.uniform4fv(a.I.sa,c);b.uniform1f(a.I.Ea,d)}
g.Dc=function(a,b){if(b){var c=b.j;this.xa.lineDash=c?c:DO;c=b.o;this.xa.lineDashOffset=c?c:0;c=b.Ja();c instanceof CanvasGradient||c instanceof CanvasPattern?c=EO:c=om(c).map(function(a,b){return 3!=b?a/255:a})||EO;b=b.g;b=void 0!==b?b:1}else c=[0,0,0,0],b=0;a=a?a.Ja():[0,0,0,0];a instanceof CanvasGradient||a instanceof CanvasPattern?a=CO:a=om(a).map(function(a,b){return 3!=b?a/255:a})||CO;this.xa.strokeColor&&Xl(this.xa.strokeColor,c)&&this.xa.fillColor&&Xl(this.xa.fillColor,a)&&this.xa.lineWidth===
b||(this.xa.ia=!0,this.xa.fillColor=a,this.xa.strokeColor=c,this.xa.lineWidth=b,this.B.push([a,c,b]))};var Xla=new wO("precision mediump float;\nvarying vec2 v_texCoord;\nvarying float v_opacity;\n\nuniform float u_opacity;\nuniform sampler2D u_image;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_image, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  float alpha = texColor.a * v_opacity * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),Yla=new xO("varying vec2 v_texCoord;\nvarying float v_opacity;\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nattribute vec2 a_offsets;\nattribute float a_opacity;\nattribute float a_rotateWithView;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  mat4 offsetMatrix = u_offsetScaleMatrix;\n  if (a_rotateWithView == 1.0) {\n    offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  }\n  vec4 offsets = offsetMatrix * vec4(a_offsets, 0.0, 0.0);\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0) + offsets;\n  v_texCoord = a_texCoord;\n  v_opacity = a_opacity;\n}\n\n\n");function Zla(a,b){this.l=a.getUniformLocation(b,"u_projectionMatrix");this.u=a.getUniformLocation(b,"u_offsetScaleMatrix");this.o=a.getUniformLocation(b,"u_offsetRotateMatrix");this.j=a.getUniformLocation(b,"u_opacity");this.g=a.getAttribLocation(b,"a_position");this.aa=a.getAttribLocation(b,"a_texCoord");this.K=a.getAttribLocation(b,"a_offsets");this.O=a.getAttribLocation(b,"a_opacity");this.U=a.getAttribLocation(b,"a_rotateWithView")};function NO(a,b){this.B=a;this.g=b;this.j={};this.o={};this.l={};this.I=this.K=this.u=this.G=null;(this.A=0<=nf.indexOf("OES_element_index_uint"))&&b.getExtension("OES_element_index_uint");H(this.B,"webglcontextlost",this.O,this);H(this.B,"webglcontextrestored",this.P,this)}I(NO,Bf);
function AO(a,b,c){var d=a.g,e=c.g,f=String(J(c));if(f in a.j)d.bindBuffer(b,a.j[f].buffer);else{var h=d.createBuffer();d.bindBuffer(b,h);var k;34962==b?k=new Float32Array(e):34963==b&&(k=a.A?new Uint32Array(e):new Uint16Array(e));d.bufferData(b,k,c.j);a.j[f]={buf:c,buffer:h}}}function JO(a,b){var c=a.g;b=String(J(b));var d=a.j[b];c.isContextLost()||c.deleteBuffer(d.buffer);delete a.j[b]}
NO.prototype.J=function(){zf(this.B);var a=this.g;if(!a.isContextLost()){for(var b in this.j)a.deleteBuffer(this.j[b].buffer);for(b in this.l)a.deleteProgram(this.l[b]);for(b in this.o)a.deleteShader(this.o[b]);a.deleteFramebuffer(this.u);a.deleteRenderbuffer(this.I);a.deleteTexture(this.K)}};
function $la(a){if(!a.u){var b=a.g,c=b.createFramebuffer();b.bindFramebuffer(b.FRAMEBUFFER,c);var d=ama(b,1,1),e=b.createRenderbuffer();b.bindRenderbuffer(b.RENDERBUFFER,e);b.renderbufferStorage(b.RENDERBUFFER,b.DEPTH_COMPONENT16,1,1);b.framebufferTexture2D(b.FRAMEBUFFER,b.COLOR_ATTACHMENT0,b.TEXTURE_2D,d,0);b.framebufferRenderbuffer(b.FRAMEBUFFER,b.DEPTH_ATTACHMENT,b.RENDERBUFFER,e);b.bindTexture(b.TEXTURE_2D,null);b.bindRenderbuffer(b.RENDERBUFFER,null);b.bindFramebuffer(b.FRAMEBUFFER,null);a.u=
c;a.K=d;a.I=e}return a.u}function bma(a,b){var c=String(J(b));if(c in a.o)return a.o[c];var d=a.g,e=d.createShader(b.T());d.shaderSource(e,b.N());d.compileShader(e);return a.o[c]=e}function KO(a,b,c){var d=J(b)+"/"+J(c);if(d in a.l)return a.l[d];var e=a.g,f=e.createProgram();e.attachShader(f,bma(a,b));e.attachShader(f,bma(a,c));e.linkProgram(f);return a.l[d]=f}NO.prototype.O=function(){pf(this.j);pf(this.o);pf(this.l);this.I=this.K=this.u=this.G=null};NO.prototype.P=function(){};
function LO(a,b){if(b==a.G)return!1;a.g.useProgram(b);a.G=b;return!0}function cma(a,b,c){var d=a.createTexture();a.bindTexture(a.TEXTURE_2D,d);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR);a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR);void 0!==b&&a.texParameteri(3553,10242,b);void 0!==c&&a.texParameteri(3553,10243,c);return d}function ama(a,b,c){var d=cma(a,void 0,void 0);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,b,c,0,a.RGBA,a.UNSIGNED_BYTE,null);return d}
function dma(a,b){var c=cma(a,33071,33071);a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,b);return c};function OO(a,b){zO.call(this,a,b);this.U=this.P=void 0;this.K=[];this.O=[];this.Ea=this.aa=this.height=void 0;this.sa=null;this.width=this.scale=this.rotation=this.rotateWithView=this.oa=this.ka=this.opacity=void 0}I(OO,zO);g=OO.prototype;g.se=function(a){var b=this.G,c=this.A,d=this.Np(!0),e=a.g;return function(){if(!e.isContextLost()){var f;var h=0;for(f=d.length;h<f;++h)e.deleteTexture(d[h])}JO(a,b);JO(a,c)}};
function PO(a,b,c,d){var e=a.P,f=a.U,h=a.height,k=a.aa,l=a.Ea,m=a.opacity,n=a.ka,p=a.oa,r=a.rotateWithView?1:0,u=-a.rotation,v=a.scale,y=a.width,B=Math.cos(u);u=Math.sin(u);var G=a.g.length,D=a.j.length,U;for(U=0;U<c;U+=d){var ja=b[U]-a.origin[0];var ea=b[U+1]-a.origin[1];var ca=D/8;var aa=-v*e;var ka=-v*(h-f);a.j[D++]=ja;a.j[D++]=ea;a.j[D++]=aa*B-ka*u;a.j[D++]=aa*u+ka*B;a.j[D++]=n/l;a.j[D++]=(p+h)/k;a.j[D++]=m;a.j[D++]=r;aa=v*(y-e);ka=-v*(h-f);a.j[D++]=ja;a.j[D++]=ea;a.j[D++]=aa*B-ka*u;a.j[D++]=
aa*u+ka*B;a.j[D++]=(n+y)/l;a.j[D++]=(p+h)/k;a.j[D++]=m;a.j[D++]=r;aa=v*(y-e);ka=v*f;a.j[D++]=ja;a.j[D++]=ea;a.j[D++]=aa*B-ka*u;a.j[D++]=aa*u+ka*B;a.j[D++]=(n+y)/l;a.j[D++]=p/k;a.j[D++]=m;a.j[D++]=r;aa=-v*e;ka=v*f;a.j[D++]=ja;a.j[D++]=ea;a.j[D++]=aa*B-ka*u;a.j[D++]=aa*u+ka*B;a.j[D++]=n/l;a.j[D++]=p/k;a.j[D++]=m;a.j[D++]=r;a.g[G++]=ca;a.g[G++]=ca+1;a.g[G++]=ca+2;a.g[G++]=ca;a.g[G++]=ca+2;a.g[G++]=ca+3}}
function QO(a,b,c,d){var e,f=b.length;for(e=0;e<f;++e){var h=b[e];var k=J(h).toString();k in c?h=c[k]:(h=dma(d,h),c[k]=h);a[e]=h}}
g.ho=function(a,b){var c=KO(b,Xla,Yla);if(this.sa)var d=this.sa;else this.sa=d=new Zla(a,c);LO(b,c);a.enableVertexAttribArray(d.g);a.vertexAttribPointer(d.g,2,5126,!1,32,0);a.enableVertexAttribArray(d.K);a.vertexAttribPointer(d.K,2,5126,!1,32,8);a.enableVertexAttribArray(d.aa);a.vertexAttribPointer(d.aa,2,5126,!1,32,16);a.enableVertexAttribArray(d.O);a.vertexAttribPointer(d.O,1,5126,!1,32,24);a.enableVertexAttribArray(d.U);a.vertexAttribPointer(d.U,1,5126,!1,32,28);return d};
g.no=function(a,b){a.disableVertexAttribArray(b.g);a.disableVertexAttribArray(b.K);a.disableVertexAttribArray(b.aa);a.disableVertexAttribArray(b.O);a.disableVertexAttribArray(b.U)};
g.ak=function(a,b,c,d){var e=d?this.Dp():this.Np();d=d?this.O:this.K;if(rf(c)){var f;c=0;var h=e.length;for(f=0;c<h;++c){a.bindTexture(3553,e[c]);var k=d[c];BO(a,b,f,k);f=k}}else for(f=h=0,k=e.length;f<k;++f){a.bindTexture(3553,e[f]);for(var l=0<f?d[f-1]:0,m=d[f],n=l;h<this.l.length&&this.l[h]<=m;){var p=J(this.o[h]).toString();void 0!==c[p]?(n!==l&&BO(a,b,n,l),l=n=h===this.l.length-1?m:this.l[h+1]):l=h===this.l.length-1?m:this.l[h+1];h++}n!==l&&BO(a,b,n,l)}};
g.fm=function(a,b,c,d,e){var f,h,k=this.l.length-1,l=this.Dp();for(f=l.length-1;0<=f;--f){a.bindTexture(3553,l[f]);var m=0<f?this.O[f-1]:0;for(h=this.O[f];0<=k&&this.l[k]>=m;){var n=this.l[k];var p=this.o[k];var r=J(p).toString();if(void 0===c[r]&&p.Z()&&(void 0===e||gl(e,p.Z().Y()))&&(a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),BO(a,b,n,h),h=d(p)))return h;h=n;k--}}};
g.finish=function(){this.Ea=this.aa=this.height=this.U=this.P=void 0;this.g=null;this.scale=this.rotation=this.rotateWithView=this.oa=this.ka=this.opacity=void 0;this.j=null;this.width=void 0};function RO(a,b){OO.call(this,a,b);this.I=[];this.B=[];this.Ca=[];this.pa=[]}I(RO,OO);g=RO.prototype;g.kh=function(a,b){this.l.push(this.g.length);this.o.push(b);b=a.flatCoordinates;PO(this,b,b.length,a.stride)};g.lh=function(a,b){this.l.push(this.g.length);this.o.push(b);b=a.flatCoordinates;PO(this,b,b.length,a.stride)};
g.finish=function(a){var b=a.g;this.K.push(this.g.length);this.O.push(this.g.length);this.G=new HO(this.j);this.A=new HO(this.g);var c={};QO(this.Ca,this.I,c,b);QO(this.pa,this.B,c,b);this.B=this.I=null;OO.prototype.finish.call(this,a)};
g.Mf=function(a){var b=a.Ri(),c=a.Pa(1),d=a.tm(),e=a.Pq(),f=a.Nb(),h=a.Lk(),k=a.I,l=a.l,m=a.Ef();a=a.j();if(0===this.I.length)this.I.push(c);else{var n=this.I[this.I.length-1];J(n)!=J(c)&&(this.K.push(this.g.length),this.I.push(c))}0===this.B.length?this.B.push(e):(n=this.B[this.B.length-1],J(n)!=J(e)&&(this.O.push(this.g.length),this.B.push(e)));this.P=b[0];this.U=b[1];this.height=m[1];this.aa=d[1];this.Ea=d[0];this.opacity=f;this.ka=h[0];this.oa=h[1];this.rotation=l;this.rotateWithView=k;this.scale=
a;this.width=m[0]};g.Np=function(a){return a?this.Ca.concat(this.pa):this.Ca};g.Dp=function(){return this.pa};function SO(a,b,c){var d=b-c;return a[0]===a[d]&&a[1]===a[d+1]&&3<(b-0)/c?!!ep(a,0,b,c):!1};var ema=new wO("precision mediump float;\nvarying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\n\nuniform float u_opacity;\nuniform vec4 u_color;\nuniform vec2 u_size;\nuniform float u_pixelRatio;\n\nvoid main(void) {\n  if (v_round > 0.0) {\n    vec2 windowCoords = vec2((v_roundVertex.x + 1.0) / 2.0 * u_size.x * u_pixelRatio,\n        (v_roundVertex.y + 1.0) / 2.0 * u_size.y * u_pixelRatio);\n    if (length(windowCoords - gl_FragCoord.xy) > v_halfWidth * u_pixelRatio) {\n      discard;\n    }\n  }\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),
fma=new xO("varying float v_round;\nvarying vec2 v_roundVertex;\nvarying float v_halfWidth;\n\n\nattribute vec2 a_lastPos;\nattribute vec2 a_position;\nattribute vec2 a_nextPos;\nattribute float a_direction;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\nuniform float u_lineWidth;\nuniform float u_miterLimit;\n\nbool nearlyEquals(in float value, in float ref) {\n  float epsilon = 0.000000000001;\n  return value >= ref - epsilon && value <= ref + epsilon;\n}\n\nvoid alongNormal(out vec2 offset, in vec2 nextP, in float turnDir, in float direction) {\n  vec2 dirVect = nextP - a_position;\n  vec2 normal = normalize(vec2(-turnDir * dirVect.y, turnDir * dirVect.x));\n  offset = u_lineWidth / 2.0 * normal * direction;\n}\n\nvoid miterUp(out vec2 offset, out float round, in bool isRound, in float direction) {\n  float halfWidth = u_lineWidth / 2.0;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_nextPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n  offset = normal * direction * miterLength;\n  round = 0.0;\n  if (isRound) {\n    round = 1.0;\n  } else if (miterLength > u_miterLimit + u_lineWidth) {\n    offset = halfWidth * tmpNormal * direction;\n  }\n}\n\nbool miterDown(out vec2 offset, in vec4 projPos, in mat4 offsetMatrix, in float direction) {\n  bool degenerate = false;\n  vec2 tangent = normalize(normalize(a_nextPos - a_position) + normalize(a_position - a_lastPos));\n  vec2 normal = vec2(-tangent.y, tangent.x);\n  vec2 dirVect = a_lastPos - a_position;\n  vec2 tmpNormal = normalize(vec2(-dirVect.y, dirVect.x));\n  vec2 longOffset, shortOffset, longVertex;\n  vec4 shortProjVertex;\n  float halfWidth = u_lineWidth / 2.0;\n  if (length(a_nextPos - a_position) > length(a_lastPos - a_position)) {\n    longOffset = tmpNormal * direction * halfWidth;\n    shortOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_nextPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_lastPos, 0.0, 1.0);\n  } else {\n    shortOffset = tmpNormal * direction * halfWidth;\n    longOffset = normalize(vec2(dirVect.y, -dirVect.x)) * direction * halfWidth;\n    longVertex = a_lastPos;\n    shortProjVertex = u_projectionMatrix * vec4(a_nextPos, 0.0, 1.0);\n  }\n  //Intersection algorithm based on theory by Paul Bourke (http://paulbourke.net/geometry/pointlineplane/).\n  vec4 p1 = u_projectionMatrix * vec4(longVertex, 0.0, 1.0) + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p2 = projPos + offsetMatrix * vec4(longOffset, 0.0, 0.0);\n  vec4 p3 = shortProjVertex + offsetMatrix * vec4(-shortOffset, 0.0, 0.0);\n  vec4 p4 = shortProjVertex + offsetMatrix * vec4(shortOffset, 0.0, 0.0);\n  float denom = (p4.y - p3.y) * (p2.x - p1.x) - (p4.x - p3.x) * (p2.y - p1.y);\n  float firstU = ((p4.x - p3.x) * (p1.y - p3.y) - (p4.y - p3.y) * (p1.x - p3.x)) / denom;\n  float secondU = ((p2.x - p1.x) * (p1.y - p3.y) - (p2.y - p1.y) * (p1.x - p3.x)) / denom;\n  float epsilon = 0.000000000001;\n  if (firstU > epsilon && firstU < 1.0 - epsilon && secondU > epsilon && secondU < 1.0 - epsilon) {\n    shortProjVertex.x = p1.x + firstU * (p2.x - p1.x);\n    shortProjVertex.y = p1.y + firstU * (p2.y - p1.y);\n    offset = shortProjVertex.xy;\n    degenerate = true;\n  } else {\n    float miterLength = abs(halfWidth / dot(normal, tmpNormal));\n    offset = normal * direction * miterLength;\n  }\n  return degenerate;\n}\n\nvoid squareCap(out vec2 offset, out float round, in bool isRound, in vec2 nextP,\n    in float turnDir, in float direction) {\n  round = 0.0;\n  vec2 dirVect = a_position - nextP;\n  vec2 firstNormal = normalize(dirVect);\n  vec2 secondNormal = vec2(turnDir * firstNormal.y * direction, -turnDir * firstNormal.x * direction);\n  vec2 hypotenuse = normalize(firstNormal - secondNormal);\n  vec2 normal = vec2(turnDir * hypotenuse.y * direction, -turnDir * hypotenuse.x * direction);\n  float length = sqrt(v_halfWidth * v_halfWidth * 2.0);\n  offset = normal * length;\n  if (isRound) {\n    round = 1.0;\n  }\n}\n\nvoid main(void) {\n  bool degenerate = false;\n  float direction = float(sign(a_direction));\n  mat4 offsetMatrix = u_offsetScaleMatrix * u_offsetRotateMatrix;\n  vec2 offset;\n  vec4 projPos = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n  bool round = nearlyEquals(mod(a_direction, 2.0), 0.0);\n\n  v_round = 0.0;\n  v_halfWidth = u_lineWidth / 2.0;\n  v_roundVertex = projPos.xy;\n\n  if (nearlyEquals(mod(a_direction, 3.0), 0.0) || nearlyEquals(mod(a_direction, 17.0), 0.0)) {\n    alongNormal(offset, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 5.0), 0.0) || nearlyEquals(mod(a_direction, 13.0), 0.0)) {\n    alongNormal(offset, a_lastPos, -1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 23.0), 0.0)) {\n    miterUp(offset, v_round, round, direction);\n  } else if (nearlyEquals(mod(a_direction, 19.0), 0.0)) {\n    degenerate = miterDown(offset, projPos, offsetMatrix, direction);\n  } else if (nearlyEquals(mod(a_direction, 7.0), 0.0)) {\n    squareCap(offset, v_round, round, a_nextPos, 1.0, direction);\n  } else if (nearlyEquals(mod(a_direction, 11.0), 0.0)) {\n    squareCap(offset, v_round, round, a_lastPos, -1.0, direction);\n  }\n  if (!degenerate) {\n    vec4 offsets = offsetMatrix * vec4(offset, 0.0, 0.0);\n    gl_Position = projPos + offsets;\n  } else {\n    gl_Position = vec4(offset, 0.0, 1.0);\n  }\n}\n\n\n");function gma(a,b){this.l=a.getUniformLocation(b,"u_projectionMatrix");this.u=a.getUniformLocation(b,"u_offsetScaleMatrix");this.o=a.getUniformLocation(b,"u_offsetRotateMatrix");this.Ea=a.getUniformLocation(b,"u_lineWidth");this.sa=a.getUniformLocation(b,"u_miterLimit");this.j=a.getUniformLocation(b,"u_opacity");this.pa=a.getUniformLocation(b,"u_color");this.oa=a.getUniformLocation(b,"u_size");this.ka=a.getUniformLocation(b,"u_pixelRatio");this.G=a.getAttribLocation(b,"a_lastPos");this.g=a.getAttribLocation(b,
"a_position");this.I=a.getAttribLocation(b,"a_nextPos");this.A=a.getAttribLocation(b,"a_direction")};function TO(a,b){zO.call(this,a,b);this.I=null;this.K=[];this.B=[];this.xa={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:void 0,miterLimit:void 0,ia:!1}}I(TO,zO);
function UO(a,b,c,d){var e,f=a.j.length,h=a.g.length,k="bevel"===a.xa.lineJoin?0:"miter"===a.xa.lineJoin?1:2,l="butt"===a.xa.lineCap?0:"square"===a.xa.lineCap?1:2,m=SO(b,c,d),n=h,p=1;for(e=0;e<c;e+=d){var r=f/7;var u=v;var v=y||[b[e],b[e+1]];if(0===e){var y=[b[e+d],b[e+d+1]];if(c-0===2*d&&Xl(v,y))break;if(m){u=[b[c-2*d],b[c-2*d+1]];var B=y}else{l&&(f=VO(a,[0,0],v,y,p*hma*l,f),f=VO(a,[0,0],v,y,-p*hma*l,f),a.g[h++]=r+2,a.g[h++]=r,a.g[h++]=r+1,a.g[h++]=r+1,a.g[h++]=r+3,a.g[h++]=r+2);f=VO(a,[0,0],v,y,
p*ima*(l||1),f);f=VO(a,[0,0],v,y,-p*ima*(l||1),f);n=f/7-1;continue}}else if(e===c-d){m?y=B:(u=u||[0,0],f=VO(a,u,v,[0,0],p*jma*(l||1),f),f=VO(a,u,v,[0,0],-p*jma*(l||1),f),a.g[h++]=r,a.g[h++]=n-1,a.g[h++]=n,a.g[h++]=n,a.g[h++]=r+1,a.g[h++]=r,l&&(f=VO(a,u,v,[0,0],p*kma*l,f),f=VO(a,u,v,[0,0],-p*kma*l,f),a.g[h++]=r+2,a.g[h++]=r,a.g[h++]=r+1,a.g[h++]=r+1,a.g[h++]=r+3,a.g[h++]=r+2));break}else y=[b[e+d],b[e+d+1]];var G=FO(u[0],u[1],v[0],v[1],y[0],y[1])?-1:1;f=VO(a,u,v,y,G*lma*(k||1),f);f=VO(a,u,v,y,G*mma*
(k||1),f);f=VO(a,u,v,y,-G*nma*(k||1),f);0<e&&(a.g[h++]=r,a.g[h++]=n-1,a.g[h++]=n,a.g[h++]=r+2,a.g[h++]=r,a.g[h++]=0<p*G?n:n-1);a.g[h++]=r;a.g[h++]=r+2;a.g[h++]=r+1;n=r+2;p=G;k&&(f=VO(a,u,v,y,G*oma*k,f),a.g[h++]=r+1,a.g[h++]=r+3,a.g[h++]=r)}m&&(r=r||f/7,G=mp([u[0],u[1],v[0],v[1],y[0],y[1]],0,6,2)?1:-1,f=VO(a,u,v,y,G*lma*(k||1),f),VO(a,u,v,y,-G*nma*(k||1),f),a.g[h++]=r,a.g[h++]=n-1,a.g[h++]=n,a.g[h++]=r+1,a.g[h++]=r,a.g[h++]=0<p*G?n:n-1)}
function VO(a,b,c,d,e,f){a.j[f++]=b[0];a.j[f++]=b[1];a.j[f++]=c[0];a.j[f++]=c[1];a.j[f++]=d[0];a.j[f++]=d[1];a.j[f++]=e;return f}function pma(a,b,c,d){c-=b;return c<2*d?!1:c===2*d?!Xl([a[b],a[b+1]],[a[b+d],a[b+d+1]]):!0}g=TO.prototype;g.jh=function(a,b){var c=a.flatCoordinates;a=a.stride;pma(c,0,c.length,a)&&(c=cn(c,0,c.length,a,-this.origin[0],-this.origin[1]),this.xa.ia&&(this.B.push(this.g.length),this.xa.ia=!1),this.l.push(this.g.length),this.o.push(b),UO(this,c,c.length,a))};
g.Ng=function(a,b){var c=this.g.length,d=a.zd();d.unshift(0);var e=a.flatCoordinates;a=a.stride;var f;if(1<d.length){var h=1;for(f=d.length;h<f;++h)if(pma(e,d[h-1],d[h],a)){var k=cn(e,d[h-1],d[h],a,-this.origin[0],-this.origin[1]);UO(this,k,k.length,a)}}this.g.length>c&&(this.l.push(c),this.o.push(b),this.xa.ia&&(this.B.push(c),this.xa.ia=!1))};
function qma(a,b,c,d){SO(b,b.length,d)||(b.push(b[0]),b.push(b[1]));UO(a,b,b.length,d);if(c.length){var e;b=0;for(e=c.length;b<e;++b)SO(c[b],c[b].length,d)||(c[b].push(c[b][0]),c[b].push(c[b][1])),UO(a,c[b],c[b].length,d)}}function rma(a,b,c){c=void 0===c?a.g.length:c;a.l.push(c);a.o.push(b);a.xa.ia&&(a.B.push(c),a.xa.ia=!1)}g.finish=function(){this.G=new HO(this.j);this.A=new HO(this.g);this.l.push(this.g.length);0===this.B.length&&0<this.K.length&&(this.K=[]);this.g=this.j=null};
g.se=function(a){var b=this.G,c=this.A;return function(){JO(a,b);JO(a,c)}};
g.ho=function(a,b,c,d){var e=KO(b,ema,fma);if(this.I)var f=this.I;else this.I=f=new gma(a,e);LO(b,e);a.enableVertexAttribArray(f.G);a.vertexAttribPointer(f.G,2,5126,!1,28,0);a.enableVertexAttribArray(f.g);a.vertexAttribPointer(f.g,2,5126,!1,28,8);a.enableVertexAttribArray(f.I);a.vertexAttribPointer(f.I,2,5126,!1,28,16);a.enableVertexAttribArray(f.A);a.vertexAttribPointer(f.A,1,5126,!1,28,24);a.uniform2fv(f.oa,c);a.uniform1f(f.ka,d);return f};
g.no=function(a,b){a.disableVertexAttribArray(b.G);a.disableVertexAttribArray(b.g);a.disableVertexAttribArray(b.I);a.disableVertexAttribArray(b.A)};
g.ak=function(a,b,c,d){var e=a.getParameter(a.DEPTH_FUNC),f=a.getParameter(a.DEPTH_WRITEMASK);d||(a.enable(a.DEPTH_TEST),a.depthMask(!0),a.depthFunc(a.NOTEQUAL));if(rf(c)){var h=this.l[this.l.length-1];for(c=this.B.length-1;0<=c;--c){var k=this.B[c];var l=this.K[c];WO(this,a,l[0],l[1],l[2]);BO(a,b,k,h);a.clear(a.DEPTH_BUFFER_BIT);h=k}}else{var m=this.l.length-2;l=h=this.l[m+1];for(k=this.B.length-1;0<=k;--k){var n=this.K[k];WO(this,a,n[0],n[1],n[2]);for(n=this.B[k];0<=m&&this.l[m]>=n;){var p=this.l[m];
var r=this.o[m];r=J(r).toString();c[r]&&(h!==l&&(BO(a,b,h,l),a.clear(a.DEPTH_BUFFER_BIT)),l=p);m--;h=p}h!==l&&(BO(a,b,h,l),a.clear(a.DEPTH_BUFFER_BIT));h=l=n}}d||(a.disable(a.DEPTH_TEST),a.clear(a.DEPTH_BUFFER_BIT),a.depthMask(f),a.depthFunc(e))};
g.fm=function(a,b,c,d,e){var f,h;var k=this.l.length-2;var l=this.l[k+1];for(f=this.B.length-1;0<=f;--f){var m=this.K[f];WO(this,a,m[0],m[1],m[2]);for(h=this.B[f];0<=k&&this.l[k]>=h;){m=this.l[k];var n=this.o[k];var p=J(n).toString();if(void 0===c[p]&&n.Z()&&(void 0===e||gl(e,n.Z().Y()))&&(a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),BO(a,b,m,l),l=d(n)))return l;k--;l=m}}};function WO(a,b,c,d,e){b.uniform4fv(a.I.pa,c);b.uniform1f(a.I.Ea,d);b.uniform1f(a.I.sa,e)}
g.Dc=function(a,b){a=b.u;this.xa.lineCap=void 0!==a?a:"round";a=b.j;this.xa.lineDash=a?a:DO;a=b.o;this.xa.lineDashOffset=a?a:0;a=b.A;this.xa.lineJoin=void 0!==a?a:"round";a=b.Ja();a instanceof CanvasGradient||a instanceof CanvasPattern?a=EO:a=om(a).map(function(a,b){return 3!=b?a/255:a})||EO;var c=b.g;c=void 0!==c?c:1;b=b.B;b=void 0!==b?b:10;this.xa.strokeColor&&Xl(this.xa.strokeColor,a)&&this.xa.lineWidth===c&&this.xa.miterLimit===b||(this.xa.ia=!0,this.xa.strokeColor=a,this.xa.lineWidth=c,this.xa.miterLimit=
b,this.K.push([a,c,b]))};var ima=3,jma=5,hma=7,kma=11,lma=13,mma=17,nma=19,oma=23;var sma=new wO("precision mediump float;\n\n\n\nuniform vec4 u_color;\nuniform float u_opacity;\n\nvoid main(void) {\n  gl_FragColor = u_color;\n  float alpha = u_color.a * u_opacity;\n  if (alpha == 0.0) {\n    discard;\n  }\n  gl_FragColor.a = alpha;\n}\n"),tma=new xO("\n\nattribute vec2 a_position;\n\nuniform mat4 u_projectionMatrix;\nuniform mat4 u_offsetScaleMatrix;\nuniform mat4 u_offsetRotateMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0.0, 1.0);\n}\n\n\n");function uma(a,b){this.l=a.getUniformLocation(b,"u_projectionMatrix");this.u=a.getUniformLocation(b,"u_offsetScaleMatrix");this.o=a.getUniformLocation(b,"u_offsetRotateMatrix");this.pa=a.getUniformLocation(b,"u_color");this.j=a.getUniformLocation(b,"u_opacity");this.g=a.getAttribLocation(b,"a_position")};function XO(){this.g=this.j=this.l=void 0;this.o=0}function YO(a){var b=a.g;if(b){var c=b.next,d=b.prev;c&&(c.prev=d);d&&(d.next=c);a.g=c||d;a.l===a.j?(a.g=void 0,a.l=void 0,a.j=void 0):a.l===b?a.l=a.g:a.j===b&&(a.j=d?a.g.prev:a.g);a.o--}}function ZO(a){a.g=a.l;if(a.g)return a.g.data}function $O(a){if(a.g&&a.g.next)return a.g=a.g.next,a.g.data}function aP(a){if(a.g&&a.g.next)return a.g.next.data}function bP(a){if(a.g&&a.g.prev)return a.g=a.g.prev,a.g.data}
function cP(a){if(a.g&&a.g.prev)return a.g.prev.data}function dP(a){if(a.g)return a.g.data}XO.prototype.concat=function(a){if(a.g){if(this.g){var b=this.g.next;this.g.next=a.l;a.l.prev=this.g;b.prev=a.j;a.j.next=b;this.o+=a.o}else this.g=a.g,this.l=a.l,this.j=a.j,this.o=a.o;a.g=void 0;a.l=void 0;a.j=void 0;a.o=0}};XO.prototype.getLength=function(){return this.o};function eP(a,b){zO.call(this,a,b);this.u=new TO(a,b);this.I=null;this.K=[];this.B=[];this.xa={fillColor:null,ia:!1}}I(eP,zO);
function vma(a,b,c,d){var e=new XO,f=new Nu;wma(a,b,d,e,f,!0);b=xma(e);if(c.length){var h,k=[];var l=0;for(h=c.length;l<h;++l){var m={list:new XO,hh:void 0,Ss:new Nu};k.push(m);wma(a,c[l],d,m.list,m.Ss,!1);fP(m.list,m.Ss,!0);m.hh=xma(m.list)}k.sort(function(a,b){return b.hh[0]===a.hh[0]?a.hh[1]-b.hh[1]:b.hh[0]-a.hh[0]});for(l=0;l<k.length;++l){c=k[l].list;h=d=ZO(c);do{if(gP(h,f).length){var n=!0;break}h=$O(c)}while(d!==h);!n&&yma(c,k[l].hh[0],e,b[0],f)&&(f.concat(k[l].Ss),fP(e,f,!1))}}else fP(e,f,
!1);hP(a,e,f)}
function wma(a,b,c,d,e,f){var h,k=a.j.length/2,l=[],m=[];if(f===mp(b,0,b.length,c)){var n=f=iP(a,b[0],b[1],k++);var p=c;for(h=b.length;p<h;p+=c){var r=iP(a,b[p],b[p+1],k++);m.push(jP(n,r,d));l.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.max(n.x,r.x),Math.max(n.y,r.y)]);n=r}}else for(p=b.length-c,n=f=iP(a,b[p],b[p+1],k++),p-=c,h=0;p>=h;p-=c)r=iP(a,b[p],b[p+1],k++),m.push(jP(n,r,d)),l.push([Math.min(n.x,r.x),Math.min(n.y,r.y),Math.max(n.x,r.x),Math.max(n.y,r.y)]),n=r;m.push(jP(r,f,d));l.push([Math.min(n.x,
r.x),Math.min(n.y,r.y),Math.max(n.x,r.x),Math.max(n.y,r.y)]);e.load(l,m)}function xma(a){var b=ZO(a),c=b,d=[c.p0.x,c.p0.y];do c=$O(a),c.p0.x>d[0]&&(d=[c.p0.x,c.p0.y]);while(c!==b);return d}function fP(a,b,c){var d=ZO(a),e=d,f=$O(a),h=!1;do{var k=c?FO(f.p1.x,f.p1.y,e.p1.x,e.p1.y,e.p0.x,e.p0.y):FO(e.p0.x,e.p0.y,e.p1.x,e.p1.y,f.p1.x,f.p1.y);void 0===k?(zma(e,f,a,b),h=!0,f===d&&(d=aP(a)),f=e,bP(a)):e.p1.reflex!==k&&(e.p1.reflex=k,h=!0);e=f;f=$O(a)}while(e!==d);return h}
function yma(a,b,c,d,e){for(var f=ZO(a);f.p1.x!==b;)f=$O(a);b=f.p1;d={x:d,y:b.y,i:-1};var h=Infinity,k;var l=gP({p0:b,p1:d},e,!0);var m=0;for(k=l.length;m<k;++m){var n=l[m],p=kP(b,d,n.p0,n.p1,!0),r=Math.abs(b.x-p[0]);if(r<h&&void 0!==FO(b.x,b.y,n.p0.x,n.p0.y,n.p1.x,n.p1.y)){h=r;var u={x:p[0],y:p[1],i:-1};f=n}}if(Infinity===h)return!1;l=f.p1;if(0<h&&(f=Ama(b,u,f.p1,e),f.length))for(u=Infinity,m=0,k=f.length;m<k;++m)if(h=f[m],n=Math.atan2(b.y-h.y,d.x-h.x),n<u||n===u&&h.x<l.x)u=n,l=h;for(f=ZO(c);f.p1.x!==
l.x||f.p1.y!==l.y;)f=$O(c);d={x:b.x,y:b.y,i:b.i,reflex:void 0};m={x:f.p1.x,y:f.p1.y,i:f.p1.i,reflex:void 0};aP(a).p0=d;jP(b,f.p1,a,e);jP(m,d,a,e);f.p1=m;a.g&&(a.l=a.g,a.j=a.g.prev);c.concat(a);return!0}
function hP(a,b,c){for(var d=!1,e=Bma(b,c);3<b.getLength();)if(e){if(!Cma(a,b,c,e,d)&&!fP(b,c,d)&&!Dma(a,b,c,!0))break}else if(!Cma(a,b,c,e,d)&&!fP(b,c,d)&&!Dma(a,b,c))if(e=Bma(b,c)){d=b;var f=2*d.getLength(),h=Array(f),k=ZO(d),l=k,m=0;do h[m++]=l.p0.x,h[m++]=l.p0.y,l=$O(d);while(l!==k);d=!mp(h,0,f,2);fP(b,c,d)}else{e=a;d=b;f=h=ZO(d);do{k=gP(f,c);if(k.length){h=k[0];k=kP(f.p0,f.p1,h.p0,h.p1);k=iP(e,k[0],k[1],e.j.length/2);l=new XO;m=new Nu;jP(k,f.p1,l,m);f.p1=k;c.update([Math.min(f.p0.x,k.x),Math.min(f.p0.y,
k.y),Math.max(f.p0.x,k.x),Math.max(f.p0.y,k.y)],f);for(f=$O(d);f!==h;)jP(f.p0,f.p1,l,m),c.remove(f),YO(d),f=dP(d);jP(h.p0,k,l,m);h.p0=k;c.update([Math.min(h.p1.x,k.x),Math.min(h.p1.y,k.y),Math.max(h.p1.x,k.x),Math.max(h.p1.y,k.y)],h);fP(d,c,!1);hP(e,d,c);fP(l,m,!1);hP(e,l,m);break}f=$O(d)}while(f!==h);break}3===b.getLength()&&(e=a.g.length,a.g[e++]=cP(b).p0.i,a.g[e++]=dP(b).p0.i,a.g[e++]=aP(b).p0.i)}
function Cma(a,b,c,d,e){var f=a.g.length,h=ZO(b),k=cP(b),l=h,m=$O(b),n=aP(b),p=!1;do{var r=l.p0;var u=l.p1;var v=m.p1;if(!1===u.reflex){var y=d?0===Ama(r,u,v,c,!0).length:e?Ema(n.p1,v,u,r,k.p0):Ema(k.p0,r,u,v,n.p1);!d&&0!==gP({p0:r,p1:v},c).length||!y||!d&&!1!==r.reflex&&!1!==v.reflex&&mp([k.p0.x,k.p0.y,r.x,r.y,u.x,u.y,v.x,v.y,n.p1.x,n.p1.y],0,10,2)!==!e||(a.g[f++]=r.i,a.g[f++]=u.i,a.g[f++]=v.i,zma(l,m,b,c),m===h&&(h=n),p=!0)}k=cP(b);l=dP(b);m=$O(b);n=aP(b)}while(l!==h&&3<b.getLength());return p}
function Dma(a,b,c,d){var e=ZO(b);$O(b);var f=e,h=$O(b),k=!1;do{var l=kP(f.p0,f.p1,h.p0,h.p1,d);if(l){k=a.g.length;var m=a.j.length/2,n=bP(b);YO(b);c.remove(n);var p=n===e;d?(l[0]===f.p0.x&&l[1]===f.p0.y?(bP(b),l=f.p0,h.p0=l,c.remove(f),p=p||f===e):(l=h.p1,f.p1=l,c.remove(h),p=p||h===e),YO(b)):(l=iP(a,l[0],l[1],m),f.p1=l,h.p0=l,c.update([Math.min(f.p0.x,f.p1.x),Math.min(f.p0.y,f.p1.y),Math.max(f.p0.x,f.p1.x),Math.max(f.p0.y,f.p1.y)],f),c.update([Math.min(h.p0.x,h.p1.x),Math.min(h.p0.y,h.p1.y),Math.max(h.p0.x,
h.p1.x),Math.max(h.p0.y,h.p1.y)],h));a.g[k++]=n.p0.i;a.g[k++]=n.p1.i;a.g[k++]=l.i;k=!0;if(p)break}f=cP(b);h=$O(b)}while(f!==e);return k}function Bma(a,b){var c=ZO(a),d=c;do{if(gP(d,b).length)return!1;d=$O(a)}while(d!==c);return!0}function iP(a,b,c,d){var e=a.j.length;a.j[e++]=b;a.j[e++]=c;return{x:b,y:c,i:d,reflex:void 0}}
function jP(a,b,c,d){var e={p0:a,p1:b},f={prev:void 0,next:void 0,data:e},h=c.g;if(h){var k=h.next;f.prev=h;f.next=k;h.next=f;k&&(k.prev=f);h===c.j&&(c.j=f)}else c.l=f,c.j=f,f.next=f,f.prev=f;c.g=f;c.o++;d&&d.Bf([Math.min(a.x,b.x),Math.min(a.y,b.y),Math.max(a.x,b.x),Math.max(a.y,b.y)],e);return e}function zma(a,b,c,d){dP(c)===b&&(YO(c),a.p1=b.p1,d.remove(b),d.update([Math.min(a.p0.x,a.p1.x),Math.min(a.p0.y,a.p1.y),Math.max(a.p0.x,a.p1.x),Math.max(a.p0.y,a.p1.y)],a))}
function Ama(a,b,c,d,e){var f,h,k=[],l=Pu(d,[Math.min(a.x,b.x,c.x),Math.min(a.y,b.y,c.y),Math.max(a.x,b.x,c.x),Math.max(a.y,b.y,c.y)]);d=0;for(f=l.length;d<f;++d)for(h in l[d]){var m=l[d][h];"object"!==typeof m||e&&!m.reflex||m.x===a.x&&m.y===a.y||m.x===b.x&&m.y===b.y||m.x===c.x&&m.y===c.y||-1!==k.indexOf(m)||!Io([a.x,a.y,b.x,b.y,c.x,c.y],0,6,2,m.x,m.y)||k.push(m)}return k}
function gP(a,b,c){var d=a.p0,e=a.p1;b=Pu(b,[Math.min(d.x,e.x),Math.min(d.y,e.y),Math.max(d.x,e.x),Math.max(d.y,e.y)]);var f=[],h;var k=0;for(h=b.length;k<h;++k){var l=b[k];a!==l&&(c||l.p0!==e||l.p1!==d)&&kP(d,e,l.p0,l.p1,c)&&f.push(l)}return f}
function kP(a,b,c,d,e){var f=(d.y-c.y)*(b.x-a.x)-(d.x-c.x)*(b.y-a.y);if(0!==f&&(d=((d.x-c.x)*(a.y-c.y)-(d.y-c.y)*(a.x-c.x))/f,c=((b.x-a.x)*(a.y-c.y)-(b.y-a.y)*(a.x-c.x))/f,!e&&d>GO&&d<1-GO&&c>GO&&c<1-GO||e&&0<=d&&1>=d&&0<=c&&1>=c))return[a.x+d*(b.x-a.x),a.y+d*(b.y-a.y)]}
function Ema(a,b,c,d,e){if(void 0===b.reflex||void 0===d.reflex)return!1;var f=(c.x-d.x)*(b.y-d.y)>(c.y-d.y)*(b.x-d.x);e=(e.x-d.x)*(b.y-d.y)<(e.y-d.y)*(b.x-d.x);a=(a.x-b.x)*(d.y-b.y)>(a.y-b.y)*(d.x-b.x);c=(c.x-b.x)*(d.y-b.y)<(c.y-b.y)*(d.x-b.x);b=b.reflex?c||a:c&&a;return(d.reflex?e||f:e&&f)&&b}g=eP.prototype;
g.lg=function(a,b){var c=a.Jc,d=a.stride,e=this.g.length,f=this.u.g.length;a=a.flatCoordinates;var h,k,l;var m=k=0;for(h=c.length;m<h;++m){var n=c[m];if(0<n.length){var p=cn(a,k,n[0],d,-this.origin[0],-this.origin[1]);if(p.length){var r=[];k=1;for(l=n.length;k<l;++k)if(n[k]!==n[k-1]){var u=cn(a,n[k-1],n[k],d,-this.origin[0],-this.origin[1]);r.push(u)}qma(this.u,p,r,d);vma(this,p,r,d)}}k=n[n.length-1]}this.g.length>e&&(this.l.push(e),this.o.push(b),this.xa.ia&&(this.B.push(e),this.xa.ia=!1));this.u.g.length>
f&&rma(this.u,b,f)};g.mg=function(a,b){var c=a.zd(),d=a.stride;if(0<c.length){a=a.flatCoordinates.map(Number);var e=cn(a,0,c[0],d,-this.origin[0],-this.origin[1]);if(e.length){var f=[],h;var k=1;for(h=c.length;k<h;++k)if(c[k]!==c[k-1]){var l=cn(a,c[k-1],c[k],d,-this.origin[0],-this.origin[1]);f.push(l)}this.l.push(this.g.length);this.o.push(b);this.xa.ia&&(this.B.push(this.g.length),this.xa.ia=!1);rma(this.u,b);qma(this.u,e,f,d);vma(this,e,f,d)}}};
g.finish=function(a){this.G=new HO(this.j);this.A=new HO(this.g);this.l.push(this.g.length);this.u.finish(a);0===this.B.length&&0<this.K.length&&(this.K=[]);this.g=this.j=null};g.se=function(a){var b=this.G,c=this.A,d=this.u.se(a);return function(){JO(a,b);JO(a,c);d()}};g.ho=function(a,b){var c=KO(b,sma,tma);if(this.I)var d=this.I;else this.I=d=new uma(a,c);LO(b,c);a.enableVertexAttribArray(d.g);a.vertexAttribPointer(d.g,2,5126,!1,8,0);return d};g.no=function(a,b){a.disableVertexAttribArray(b.g)};
g.ak=function(a,b,c,d){var e=a.getParameter(a.DEPTH_FUNC),f=a.getParameter(a.DEPTH_WRITEMASK);d||(a.enable(a.DEPTH_TEST),a.depthMask(!0),a.depthFunc(a.NOTEQUAL));if(rf(c)){var h=this.l[this.l.length-1];for(c=this.B.length-1;0<=c;--c){var k=this.B[c];var l=this.K[c];a.uniform4fv(this.I.pa,l);BO(a,b,k,h);h=k}}else{var m=this.l.length-2;l=h=this.l[m+1];for(k=this.B.length-1;0<=k;--k){var n=this.K[k];a.uniform4fv(this.I.pa,n);for(n=this.B[k];0<=m&&this.l[m]>=n;){var p=this.l[m];var r=this.o[m];r=J(r).toString();
c[r]&&(h!==l&&(BO(a,b,h,l),a.clear(a.DEPTH_BUFFER_BIT)),l=p);m--;h=p}h!==l&&(BO(a,b,h,l),a.clear(a.DEPTH_BUFFER_BIT));h=l=n}}d||(a.disable(a.DEPTH_TEST),a.clear(a.DEPTH_BUFFER_BIT),a.depthMask(f),a.depthFunc(e))};
g.fm=function(a,b,c,d,e){var f,h;var k=this.l.length-2;var l=this.l[k+1];for(f=this.B.length-1;0<=f;--f){var m=this.K[f];a.uniform4fv(this.I.pa,m);for(h=this.B[f];0<=k&&this.l[k]>=h;){m=this.l[k];var n=this.o[k];var p=J(n).toString();if(void 0===c[p]&&n.Z()&&(void 0===e||gl(e,n.Z().Y()))&&(a.clear(a.COLOR_BUFFER_BIT|a.DEPTH_BUFFER_BIT),BO(a,b,m,l),l=d(n)))return l;k--;l=m}}};
g.Dc=function(a,b){a=a?a.Ja():[0,0,0,0];a instanceof CanvasGradient||a instanceof CanvasPattern?a=CO:a=om(a).map(function(a,b){return 3!=b?a/255:a})||CO;this.xa.fillColor&&Xl(a,this.xa.fillColor)||(this.xa.fillColor=a,this.xa.ia=!0,this.K.push(a));b?this.u.Dc(null,b):this.u.Dc(null,new Zr({color:[0,0,0,0],lineWidth:0}))};function lP(a,b){this.g=b;this.j=[{x:0,y:0,width:a,height:a}];this.o={};this.l=um(a,a);this.u=this.l.canvas}lP.prototype.get=function(a){return this.o[a]||null};
lP.prototype.add=function(a,b,c,d,e){var f;var h=0;for(f=this.j.length;h<f;++h){var k=this.j[h];if(k.width>=b+this.g&&k.height>=c+this.g)return f={offsetX:k.x+this.g,offsetY:k.y+this.g,image:this.u},this.o[a]=f,d.call(e,this.l,k.x+this.g,k.y+this.g),a=h,b+=this.g,d=c+this.g,k.width-b>k.height-d?(c={x:k.x+b,y:k.y,width:k.width-b,height:k.height},b={x:k.x,y:k.y+d,width:b,height:k.height-d},Fma(this,a,c,b)):(c={x:k.x+b,y:k.y,width:k.width-b,height:d},b={x:k.x,y:k.y+d,width:k.width,height:k.height-d},
Fma(this,a,c,b)),f}return null};function Fma(a,b,c,d){b=[b,1];0<c.width&&0<c.height&&b.push(c);0<d.width&&0<d.height&&b.push(d);a.j.splice.apply(a.j,b)};function mP(a){a=a||{};this.j=void 0!==a.initialSize?a.initialSize:256;this.l=void 0!==a.maxSize?a.maxSize:void 0!==mf?mf:2048;this.g=void 0!==a.space?a.space:1;this.A=[new lP(this.j,this.g)];this.o=this.j;this.u=[new lP(this.o,this.g)]}mP.prototype.Fp=function(a){var b=Gma(this.A,a);if(!b)return null;a=Gma(this.u,a);return Hma(b,a)};function Gma(a,b){var c;var d=0;for(c=a.length;d<c;++d){var e=a[d];if(e=e.get(b))return e}return null}
function Hma(a,b){return{offsetX:a.offsetX,offsetY:a.offsetY,image:a.image,hitImage:b.image}}mP.prototype.add=function(a,b,c,d,e,f){if(b+this.g>this.l||c+this.g>this.l)return null;d=Ima(this,!1,a,b,c,d,f);if(!d)return null;a=Ima(this,!0,a,b,c,void 0!==e?e:Af,f);return Hma(d,a)};
function Ima(a,b,c,d,e,f,h){var k=b?a.u:a.A,l;var m=0;for(l=k.length;m<l;++m){var n=k[m];if(n=n.add(c,d,e,f,h))return n;n||m!==l-1||(b?(n=Math.min(2*a.o,a.l),a.o=n):(n=Math.min(2*a.j,a.l),a.j=n),n=new lP(n,a.g),k.push(n),++l)}return null};function nP(a,b){OO.call(this,a,b);this.B=[];this.pb=[];this.Eb=um(0,0).canvas;this.xa={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0};this.Ob="";this.cb=this.Ca=this.jb=this.ib=void 0;this.pa={};this.I=void 0;this.opacity=this.scale=1}I(nP,OO);g=nP.prototype;
g.pf=function(a,b){if(this.Ob){var c=null,d=2,e=2;switch(a.T()){case "Point":case "MultiPoint":c=a.flatCoordinates;d=c.length;e=a.stride;break;case "Circle":c=Xo(a);break;case "LineString":c=Lo(a);break;case "MultiLineString":c=Po(a);d=c.length;break;case "Polygon":c=sp(a);break;case "MultiPolygon":c=xp(a),d=c.length}this.l.push(this.g.length);this.o.push(b);a=this.I;b=this.Ob.split("\n");var f=Jma(this,b),h,k,l,m=Math.round(f[0]*this.ib-this.Ca),n=Math.round(f[1]*this.jb-this.cb),p=this.xa.lineWidth/
2*this.xa.scale;f=0;for(h=b.length;f<h;++f){var r=0;var u=a.height*f;var v=b[f].split("");var y=0;for(k=v.length;y<k;++y){if(l=a.atlas.Fp(v[y])){var B=l.image;this.P=m-r;this.U=n-u;this.ka=0===y?l.offsetX-p:l.offsetX;this.oa=l.offsetY;this.height=a.height;this.width=0===y||y===v.length-1?a.width[v[y]]+p:a.width[v[y]];this.aa=B.height;this.Ea=B.width;0===this.B.length?this.B.push(B):(l=this.B[this.B.length-1],J(l)!=J(B)&&(this.K.push(this.g.length),this.B.push(B)));l=c;var G=d,D=e;for(B=0;B<G;B+=D)PO(this,
l,G,D)}r+=this.width}}}};function Jma(a,b){var c=a.I,d=b.length*c.height;return[b.map(function(b){var d=0,e;var k=0;for(e=b.length;k<e;++k){var l=b[k];c.width[l]||Kma(a,l);d+=c.width[l]?c.width[l]:0}return d}).reduce(function(a,b){return Math.max(a,b)}),d]}
function Kma(a,b){if(1===b.length){var c=a.I,d=a.xa;a=a.Eb.getContext("2d");a.font=d.font;a=Math.ceil(a.measureText(b).width*d.scale);c.atlas.add(b,a,c.height,function(a,c,h){a.font=d.font;a.fillStyle=d.fillColor;a.strokeStyle=d.strokeColor;a.lineWidth=d.lineWidth;a.lineCap=d.lineCap;a.lineJoin=d.lineJoin;a.miterLimit=d.miterLimit;a.textAlign="left";a.textBaseline="top";nn&&d.lineDash&&(a.setLineDash(d.lineDash),a.lineDashOffset=d.lineDashOffset);1!==d.scale&&a.setTransform(d.scale,0,0,d.scale,0,
0);d.strokeColor&&a.strokeText(b,c,h);d.fillColor&&a.fillText(b,c,h)})&&(c.width[b]=a)}}
g.finish=function(a){var b=a.g;this.K.push(this.g.length);this.O=this.K;this.G=new HO(this.j);this.A=new HO(this.g);QO(this.pb,this.B,{},b);this.xa={strokeColor:null,lineCap:void 0,lineDash:null,lineDashOffset:void 0,lineJoin:void 0,lineWidth:0,miterLimit:void 0,fillColor:null,font:void 0,scale:void 0};this.Ob="";this.cb=this.Ca=this.jb=this.ib=void 0;this.B=null;this.pa={};this.I=void 0;OO.prototype.finish.call(this,a)};
g.Vd=function(a){var b=this.xa,c=a.lb(),d=a.kb();if(a&&a.mb()&&(c||d)){c?(c=c.Ja(),b.fillColor=Xm(c?c:CO)):b.fillColor=null;d?(c=d.Ja(),b.strokeColor=Xm(c?c:EO),b.lineWidth=d.g||1,b.lineCap=d.u||"round",b.lineDashOffset=d.o||0,b.lineJoin=d.A||"round",b.miterLimit=d.B||10,d=d.j,b.lineDash=d?d.slice():DO):(b.strokeColor=null,b.lineWidth=0);b.font=a.Ae()||"10px sans-serif";b.scale=a.j||1;this.Ob=a.mb();d=vn[a.g];c=vn[a.l];this.ib=void 0===d?.5:d;this.jb=void 0===c?.5:c;this.Ca=a.ng||0;this.cb=a.o||0;
this.rotateWithView=!!a.u;this.rotation=a.A||0;a=[];for(var e in b)if(b[e]||0===b[e])Array.isArray(b[e])?a=a.concat(b[e]):a.push(b[e]);c="";e=0;for(d=a.length;e<d;++e)c+=a[e];e=c;this.pa[e]||(a=this.Eb.getContext("2d"),a.font=b.font,a=Math.ceil((1.5*a.measureText("M").width+b.lineWidth/2)*b.scale),this.pa[e]={atlas:new mP({space:b.lineWidth+1}),width:{},height:a});this.I=this.pa[e]}else this.Ob=""};g.Np=function(){return this.pb};g.Dp=function(){return this.pb};function oP(a,b,c){this.j=b;this.l=a;this.He=c;this.g={}}I(oP,Fla);g=oP.prototype;g.mf=function(){};function Lma(a,b){var c=[],d;for(d in a.g){var e=a.g[d],f;for(f in e)c.push(e[f].se(b))}return function(){for(var a=c.length,b,d=0;d<a;d++)b=c[d].apply(this,arguments);return b}}g.finish=function(a){for(var b in this.g){var c=this.g[b],d;for(d in c)c[d].finish(a)}};
g.oc=function(a,b){var c=void 0!==a?a.toString():"0";a=this.g[c];void 0===a&&(a={},this.g[c]=a);c=a[b];void 0===c&&(c=new Mma[b](this.l,this.j),a[b]=c);return c};g.isEmpty=function(){return rf(this.g)};g.xc=function(a,b,c,d,e,f,h,k){var l=Object.keys(this.g).map(Number);l.sort(Ul);var m,n;var p=0;for(m=l.length;p<m;++p){var r=this.g[l[p].toString()];var u=0;for(n=un.length;u<n;++u){var v=r[un[u]];void 0!==v&&v.xc(a,b,c,d,e,f,h,k,void 0,!1)}}};
function Nma(a,b,c,d,e,f,h,k,l,m){var n=Oma,p=Object.keys(a.g).map(Number);p.sort(function(a,b){return b-a});var r,u;var v=0;for(r=p.length;v<r;++v){var y=a.g[p[v].toString()];for(u=un.length-1;0<=u;--u){var B=y[un[u]];if(void 0!==B&&(B=B.xc(b,c,d,e,n,f,h,k,l,!0,m)))return B}}}
g.tc=function(a,b,c,d,e,f,h,k,l,m){var n=b.g;n.bindFramebuffer(n.FRAMEBUFFER,$la(b));var p;void 0!==this.He&&(p=Qk(Wk(a),d*this.He));return Nma(this,b,a,d,e,h,k,l,function(a){var b=new Uint8Array(4);n.readPixels(0,0,1,1,n.RGBA,n.UNSIGNED_BYTE,b);if(0<b[3]&&(a=m(a)))return a},p)};var Oma=[1,1],Mma={Circle:IO,Image:RO,LineString:TO,Polygon:eP,Text:nP};function pP(a,b,c,d,e,f,h){this.g=a;this.l=b;this.o=f;this.u=h;this.G=e;this.B=d;this.A=c;this.j=this.I=this.K=this.O=null}I(pP,tn);function qP(a,b,c){var d=a.g;b=b.oc(0,"Text");b.Vd(a.j);b.pf(c,null);b.finish(d);b.xc(a.g,a.l,a.A,a.B,a.G,a.u,1,{},void 0,!1);b.se(d)()}g=pP.prototype;g.zb=function(a){this.Dc(a.lb(),a.kb());this.Mf(a.Pa());this.Vd(a.mb())};
g.Jh=function(a){switch(a.T()){case "Point":this.lh(a,null);break;case "LineString":this.jh(a,null);break;case "Polygon":this.mg(a,null);break;case "MultiPoint":this.kh(a,null);break;case "MultiLineString":this.Ng(a,null);break;case "MultiPolygon":this.lg(a,null);break;case "GeometryCollection":this.em(a);break;case "Circle":this.Tf(a,null)}};g.Ih=function(a,b){(a=(0,b.Re)(a))&&gl(this.o,a.Y())&&(this.zb(b),this.Jh(a))};g.em=function(a){a=a.g;var b;var c=0;for(b=a.length;c<b;++c)this.Jh(a[c])};
g.lh=function(a,b){var c=this.g,d=new oP(1,this.o),e=d.oc(0,"Image");e.Mf(this.O);e.lh(a,b);e.finish(c);e.xc(this.g,this.l,this.A,this.B,this.G,this.u,1,{},void 0,!1);e.se(c)();this.j&&qP(this,d,a)};g.kh=function(a,b){var c=this.g,d=new oP(1,this.o),e=d.oc(0,"Image");e.Mf(this.O);e.kh(a,b);e.finish(c);e.xc(this.g,this.l,this.A,this.B,this.G,this.u,1,{},void 0,!1);e.se(c)();this.j&&qP(this,d,a)};
g.jh=function(a,b){var c=this.g,d=new oP(1,this.o),e=d.oc(0,"LineString");e.Dc(null,this.I);e.jh(a,b);e.finish(c);e.xc(this.g,this.l,this.A,this.B,this.G,this.u,1,{},void 0,!1);e.se(c)();this.j&&qP(this,d,a)};g.Ng=function(a,b){var c=this.g,d=new oP(1,this.o),e=d.oc(0,"LineString");e.Dc(null,this.I);e.Ng(a,b);e.finish(c);e.xc(this.g,this.l,this.A,this.B,this.G,this.u,1,{},void 0,!1);e.se(c)();this.j&&qP(this,d,a)};
g.mg=function(a,b){var c=this.g,d=new oP(1,this.o),e=d.oc(0,"Polygon");e.Dc(this.K,this.I);e.mg(a,b);e.finish(c);e.xc(this.g,this.l,this.A,this.B,this.G,this.u,1,{},void 0,!1);e.se(c)();this.j&&qP(this,d,a)};g.lg=function(a,b){var c=this.g,d=new oP(1,this.o),e=d.oc(0,"Polygon");e.Dc(this.K,this.I);e.lg(a,b);e.finish(c);e.xc(this.g,this.l,this.A,this.B,this.G,this.u,1,{},void 0,!1);e.se(c)();this.j&&qP(this,d,a)};
g.Tf=function(a,b){var c=this.g,d=new oP(1,this.o),e=d.oc(0,"Circle");e.Dc(this.K,this.I);e.Tf(a,b);e.finish(c);e.xc(this.g,this.l,this.A,this.B,this.G,this.u,1,{},void 0,!1);e.se(c)();this.j&&qP(this,d,a)};g.Mf=function(a){this.O=a};g.Dc=function(a,b){this.K=a;this.I=b};g.Vd=function(a){this.j=a};var Pma=new wO("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform float u_opacity;\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  vec4 texColor = texture2D(u_texture, v_texCoord);\n  gl_FragColor.rgb = texColor.rgb;\n  gl_FragColor.a = texColor.a * u_opacity;\n}\n"),Qma=new xO("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\n\nuniform mat4 u_texCoordMatrix;\nuniform mat4 u_projectionMatrix;\n\nvoid main(void) {\n  gl_Position = u_projectionMatrix * vec4(a_position, 0., 1.);\n  v_texCoord = (u_texCoordMatrix * vec4(a_texCoord, 0., 1.)).st;\n}\n\n\n");function Rma(a,b){this.A=a.getUniformLocation(b,"u_texCoordMatrix");this.o=a.getUniformLocation(b,"u_projectionMatrix");this.l=a.getUniformLocation(b,"u_opacity");this.u=a.getUniformLocation(b,"u_texture");this.g=a.getAttribLocation(b,"a_position");this.j=a.getAttribLocation(b,"a_texCoord")};function rP(a,b){ZN.call(this,b);this.g=a;this.ka=new HO([-1,-1,0,0,1,-1,1,0,-1,1,0,1,1,1,1,1]);this.o=this.texture=null;this.u=void 0;this.O=Bm();this.P=Bm();this.U=Vla();this.G=null}I(rP,ZN);
function Sma(a,b,c){var d=a.g.l;if(void 0===a.u||a.u!=c){var e=function(a,b,c){a.isContextLost()||(a.deleteFramebuffer(b),a.deleteTexture(c))}.bind(null,d,a.o,a.texture);b.postRenderFunctions.push(e);b=ama(d,c,c);e=d.createFramebuffer();d.bindFramebuffer(36160,e);d.framebufferTexture2D(36160,36064,3553,b,0);a.texture=b;a.o=e;a.u=c}else d.bindFramebuffer(36160,a.o)}
rP.prototype.uw=function(a,b,c){Tma(this,"precompose",c,a);AO(c,34962,this.ka);var d=c.g,e=KO(c,Pma,Qma);if(this.G)var f=this.G;else this.G=f=new Rma(d,e);LO(c,e)&&(d.enableVertexAttribArray(f.g),d.vertexAttribPointer(f.g,2,5126,!1,16,0),d.enableVertexAttribArray(f.j),d.vertexAttribPointer(f.j,2,5126,!1,16,8),d.uniform1i(f.u,0));d.uniformMatrix4fv(f.A,!1,yO(this.U,this.O));d.uniformMatrix4fv(f.o,!1,yO(this.U,this.P));d.uniform1f(f.l,b.opacity);d.bindTexture(3553,this.texture);d.drawArrays(5,0,4);
Tma(this,"postcompose",c,a)};function Tma(a,b,c,d){a=a.W();if(a.be(b)){var e=d.viewState;a.dispatchEvent(new Pt(b,new pP(c,e.center,e.resolution,e.rotation,d.size,d.extent,d.pixelRatio),d,null,c))}}rP.prototype.I=function(){this.o=this.texture=null;this.u=void 0};function sP(a,b){rP.call(this,a,b);this.wa=null}I(sP,rP);sP.handles=function(a,b){return"webgl"===a&&"IMAGE"===b.T()};sP.create=function(a,b){return new sP(a,b)};function Uma(a,b){b=b.Pa();return dma(a.g.l,b)}sP.prototype.tc=function(a,b,c,d,e){var f=this.W();return f.N().tc(a,b.viewState.resolution,b.viewState.rotation,c,b.skippedFeatureUids,function(a){return d.call(e,a,f)})};
sP.prototype.Nq=function(a,b){var c=this.g.l,d=a.pixelRatio,e=a.viewState,f=e.center,h=e.resolution,k=e.rotation,l=this.wa,m=this.texture,n=this.W().N(),p=a.viewHints,r=a.extent;void 0!==b.extent&&(r=fl(r,b.extent));p[0]||p[1]||al(r)||(b=n.Pa(r,h,d,e.projection))&&sla(this,b)&&(l=b,m=Uma(this,b),this.texture&&(c=function(a,b){a.isContextLost()||a.deleteTexture(b)}.bind(null,c,this.texture),a.postRenderFunctions.push(c)));l&&(c=this.g.getContext().B,Vma(this,c.width,c.height,d,f,h,k,l.Y()),d=this.O,
Cm(d),Im(d,1,-1),Jm(d,0,-1),this.wa=l,this.texture=m,aO(a,n));return!!l};function Vma(a,b,c,d,e,f,h,k){b*=f;c*=f;a=a.P;Cm(a);Im(a,2*d/b,2*d/c);Hm(a,-h);Jm(a,k[0]-e[0],k[1]-e[1]);Im(a,(k[2]-k[0])/2,(k[3]-k[1])/2);Jm(a,1,1)};function tP(a,b){gO.call(this,a,b);this.g=document.createElement("CANVAS");this.g.style.width="100%";this.g.style.height="100%";this.g.style.display="block";this.g.className="ol-unselectable";a.insertBefore(this.g,a.childNodes[0]||null);this.O=this.P=0;this.U=um();this.B=!0;this.l=en(this.g,{antialias:!0,depth:!0,failIfMajorPerformanceCaveat:!0,preserveDrawingBuffer:!1,stencil:!0});this.I=new NO(this.g,this.l);H(this.g,"webglcontextlost",this.YG,this);H(this.g,"webglcontextrestored",this.ZG,this);
this.j=new ym;this.K=null;this.A=new yN(function(a){var b=a[1];a=a[2];var c=b[0]-this.K[0];b=b[1]-this.K[1];return 65536*Math.log(a)+Math.sqrt(c*c+b*b)/a}.bind(this),function(a){return a[0].getKey()});this.pa=function(){if(!this.A.isEmpty()){Ika(this.A);var a=this.A.dequeue();Wma(this,a[0],a[3],a[4])}return!1}.bind(this);this.u=0;Xma(this)}I(tP,gO);tP.handles=function(a){return fn&&"webgl"===a};tP.create=function(a,b){return new tP(a,b)};
function Wma(a,b,c,d){var e=a.l,f=b.getKey();if(zm(a.j,f))a=a.j.get(f),e.bindTexture(3553,a.texture),9729!=a.magFilter&&(e.texParameteri(3553,10240,9729),a.magFilter=9729),9729!=a.minFilter&&(e.texParameteri(3553,10241,9729),a.minFilter=9729);else{var h=e.createTexture();e.bindTexture(3553,h);if(0<d){var k=a.U.canvas,l=a.U;a.P!==c[0]||a.O!==c[1]?(k.width=c[0],k.height=c[1],a.P=c[0],a.O=c[1]):l.clearRect(0,0,c[0],c[1]);l.drawImage(b.Pa(),d,d,c[0],c[1],0,0,c[0],c[1]);e.texImage2D(3553,0,6408,6408,5121,
k)}else e.texImage2D(3553,0,6408,6408,5121,b.Pa());e.texParameteri(3553,10240,9729);e.texParameteri(3553,10241,9729);e.texParameteri(3553,10242,33071);e.texParameteri(3553,10243,33071);a.j.set(f,{texture:h,magFilter:9729,minFilter:9729})}}function Yma(a,b,c){var d=a.X();if(d.be(b)){a=a.I;var e=c.viewState;d.dispatchEvent(new Pt(b,new pP(a,e.center,e.resolution,e.rotation,c.size,c.extent,c.pixelRatio),c,null,a))}}g=tP.prototype;
g.J=function(){var a=this.l;a.isContextLost()||this.j.forEach(function(b){b&&a.deleteTexture(b.texture)});this.I.dispose();gO.prototype.J.call(this)};g.HD=function(a,b){a=this.l;for(var c;1024<this.j.l-this.u;){if(c=this.j.j.value_)a.deleteTexture(c.texture);else if(+this.j.j.key_==b.index)break;else--this.u;this.j.pop()}};g.getContext=function(){return this.I};g.T=function(){return"webgl"};g.YG=function(a){a.preventDefault();this.j.clear();this.u=0;a=this.o;for(var b in a)a[b].I()};
g.ZG=function(){Xma(this);this.X().render()};function Xma(a){a=a.l;a.activeTexture(33984);a.blendFuncSeparate(770,771,1,771);a.disable(2884);a.disable(2929);a.disable(3089);a.disable(2960)}
g.mj=function(a){var b=this.getContext(),c=this.l;if(c.isContextLost())return!1;if(!a)return this.B&&(this.g.style.display="none",this.B=!1),!1;this.K=a.focus;this.j.set((-a.index).toString(),null);++this.u;Yma(this,"precompose",a);var d=[],e=a.layerStatesArray;Yl(e,Ala);var f=a.viewState.resolution,h;var k=0;for(h=e.length;k<h;++k){var l=e[k];if(Tf(l,f)&&"ready"==l.sourceState){var m=hO(this,l.layer);m.Nq(a,l,b)&&d.push(l)}}e=a.size[0]*a.pixelRatio;f=a.size[1]*a.pixelRatio;if(this.g.width!=e||this.g.height!=
f)this.g.width=e,this.g.height=f;c.bindFramebuffer(36160,null);c.clearColor(0,0,0,0);c.clear(16384);c.enable(3042);c.viewport(0,0,this.g.width,this.g.height);k=0;for(h=d.length;k<h;++k)l=d[k],m=hO(this,l.layer),m.uw(a,l,b);this.B||(this.g.style.display="",this.B=!0);xla(a);1024<this.j.l-this.u&&a.postRenderFunctions.push(this.HD.bind(this));this.A.isEmpty()||(a.postRenderFunctions.push(this.pa),a.animate=!0);Yma(this,"postcompose",a);zla(this,a);a.postRenderFunctions.push(yla)};
g.tc=function(a,b,c,d,e,f,h){if(this.l.isContextLost())return!1;var k=b.viewState,l=b.layerStatesArray,m;for(m=l.length-1;0<=m;--m){var n=l[m];var p=n.layer;if(Tf(n,k.resolution)&&f.call(h,p)&&(n=hO(this,p).tc(a,b,c,d,e)))return n}};var Zma=new wO("precision mediump float;\nvarying vec2 v_texCoord;\n\n\nuniform sampler2D u_texture;\n\nvoid main(void) {\n  gl_FragColor = texture2D(u_texture, v_texCoord);\n}\n"),$ma=new xO("varying vec2 v_texCoord;\n\n\nattribute vec2 a_position;\nattribute vec2 a_texCoord;\nuniform vec4 u_tileOffset;\n\nvoid main(void) {\n  gl_Position = vec4(a_position * u_tileOffset.xy + u_tileOffset.zw, 0., 1.);\n  v_texCoord = a_texCoord;\n}\n\n\n");function ana(a,b){this.o=a.getUniformLocation(b,"u_tileOffset");this.l=a.getUniformLocation(b,"u_texture");this.g=a.getAttribLocation(b,"a_position");this.j=a.getAttribLocation(b,"a_texCoord")};function uP(a,b){rP.call(this,a,b);this.aa=Zma;this.Ca=$ma;this.j=null;this.pa=new HO([0,0,0,1,1,0,1,1,0,1,0,0,1,1,1,0]);this.K=this.l=null;this.B=-1;this.Ea=[0,0]}I(uP,rP);uP.handles=function(a,b){return"webgl"===a&&"TILE"===b.T()};uP.create=function(a,b){return new uP(a,b)};uP.prototype.J=function(){JO(this.g.getContext(),this.pa);rP.prototype.J.call(this)};
uP.prototype.A=function(a,b,c){var d=this.g;return function(e,f){return rla(a,b,e,f,function(a){var b=zm(d.j,a.getKey());b&&(c[e]||(c[e]={}),c[e][a.fc.toString()]=a);return b})}};uP.prototype.I=function(){rP.prototype.I.call(this);this.j=null};
uP.prototype.Nq=function(a,b,c){var d=this.g,e=c.g,f=a.viewState,h=f.projection,k=this.W(),l=k.N(),m=l.Od(h),n=jm(m,f.resolution),p=m.bb(n),r=kO(l,n,a.pixelRatio,h),u=r[0]/Mk(fm(m,n),this.Ea)[0],v=p/u,y=l.aj(u)*l.Ap(h),B=f.center,G=a.extent,D=cm(m,G,n);if(this.l&&this.l.equals(D)&&this.B==l.Tb)v=this.K;else{var U=[D.maxX-D.minX+1,D.maxY-D.minY+1],ja=wba(Math.max(U[0]*r[0],U[1]*r[1]));U=v*ja;var ea=dm(m,n),ca=ea[0]+D.minX*r[0]*v;v=ea[1]+D.minY*r[1]*v;v=[ca,v,ca+U,v+U];Sma(this,a,ja);e.viewport(0,0,
ja,ja);e.clearColor(0,0,0,0);e.clear(16384);e.disable(3042);ja=KO(c,this.aa,this.Ca);LO(c,ja);this.j||(this.j=new ana(e,ja));AO(c,34962,this.pa);e.enableVertexAttribArray(this.j.g);e.vertexAttribPointer(this.j.g,2,5126,!1,16,0);e.enableVertexAttribArray(this.j.j);e.vertexAttribPointer(this.j.j,2,5126,!1,16,8);e.uniform1i(this.j.l,0);c={};c[n]={};var aa=this.A(l,h,c),ka=AH(k);ja=!0;ca=Ok();var Ha=new Rl(0,0,0,0),Oa,tc;for(Oa=D.minX;Oa<=D.maxX;++Oa)for(tc=D.minY;tc<=D.maxY;++tc){ea=sI(l,n,Oa,tc,u,h);
if(void 0!==b.extent){var Ua=bm(m,ea.fc,ca);if(!gl(Ua,b.extent))continue}Ua=ea.getState();(Ua=Ua==zI||Ua==tI||Ua==AI&&!ka)||(ea=Dla(ea));Ua=ea.getState();if(Ua==zI){if(zm(d.j,ea.getKey())){c[n][ea.fc.toString()]=ea;continue}}else if(Ua==tI||Ua==AI&&!ka)continue;ja=!1;Ua=am(m,ea.fc,aa,Ha,ca);Ua||(ea=em(m,ea.fc,Ha,ca))&&aa(n+1,ea)}b=Object.keys(c).map(Number);b.sort(Ul);aa=new Float32Array(4);var la;ka=0;for(Ha=b.length;ka<Ha;++ka)for(la in Oa=c[b[ka]],Oa)ea=Oa[la],Ua=bm(m,ea.fc,ca),aa[0]=2*(Ua[2]-
Ua[0])/U,aa[1]=2*(Ua[3]-Ua[1])/U,aa[2]=2*(Ua[0]-v[0])/U-1,aa[3]=2*(Ua[1]-v[1])/U-1,e.uniform4fv(this.j.o,aa),Wma(d,ea,r,y*u),e.drawArrays(5,0,4);ja?(this.l=D,this.K=v,this.B=l.Tb):(this.K=this.l=null,this.B=-1,a.animate=!0)}ula(a.usedTiles,l,n,D);var Yb=d.A;vla(a,l,m,u,h,G,n,k.get("preload"),function(a){var b;(b=a.getState()!=zI||zm(d.j,a.getKey()))||(b=a.getKey()in Yb.j);b||Yb.u([a,hm(m,a.fc),m.bb(a.fc[0]),r,y*u])},this);tla(a,l);aO(a,l);e=this.O;Cm(e);Jm(e,(Math.round(B[0]/p)*p-v[0])/(v[2]-v[0]),
(Math.round(B[1]/p)*p-v[1])/(v[3]-v[1]));0!==f.rotation&&Hm(e,f.rotation);Im(e,a.size[0]*f.resolution/(v[2]-v[0]),a.size[1]*f.resolution/(v[3]-v[1]));Jm(e,-.5,-.5);return!0};function vP(a,b){rP.call(this,a,b);this.l=!1;this.Ea=-1;this.aa=NaN;this.K=Ok();this.B=this.j=this.pa=null}I(vP,rP);vP.handles=function(a,b){return"webgl"===a&&"VECTOR"===b.T()};vP.create=function(a,b){return new vP(a,b)};g=vP.prototype;g.uw=function(a,b,c){this.B=b;var d=a.viewState,e=this.j,f=a.size,h=a.pixelRatio,k=this.g.l;e&&!e.isEmpty()&&(k.enable(k.SCISSOR_TEST),k.scissor(0,0,f[0]*h,f[1]*h),e.xc(c,d.center,d.resolution,d.rotation,f,h,b.opacity,b.managed?a.skippedFeatureUids:{}),k.disable(k.SCISSOR_TEST))};
g.J=function(){var a=this.j;if(a){var b=this.g.getContext();Lma(a,b)();this.j=null}rP.prototype.J.call(this)};g.tc=function(a,b,c,d,e){if(this.j&&this.B){c=this.g.getContext();var f=b.viewState,h=this.W(),k={};return this.j.tc(a,c,f.center,f.resolution,f.rotation,b.size,b.pixelRatio,this.B.opacity,{},function(a){var b=J(a).toString();if(!(b in k))return k[b]=!0,d.call(e,a,h)})}};g.vw=function(){$N(this)};
g.Nq=function(a,b,c){function d(a){var b=a.Nd();if(b)var c=b.call(a,m);else(b=e.Nd())&&(c=b(a,m));if(c){if(c){b=!1;if(Array.isArray(c))for(var d=c.length-1;0<=d;--d)b=sO(r,a,c[d],rO(m,n),this.vw,this)||b;else b=sO(r,a,c,rO(m,n),this.vw,this)||b;a=b}else a=!1;this.l=this.l||a}}var e=this.W();b=e.N();aO(a,b);var f=a.viewHints[0],h=a.viewHints[1],k=e.vB,l=e.wB;if(!this.l&&!k&&f||!l&&h)return!0;h=a.extent;k=a.viewState;f=k.projection;var m=k.resolution,n=a.pixelRatio;k=e.Tb;var p=e.He;l=e.get("renderOrder");
void 0===l&&(l=Nla);h=Qk(h,p*m);if(!this.l&&this.aa==m&&this.Ea==k&&this.pa==l&&Tk(this.K,h))return!0;this.j&&a.postRenderFunctions.push(Lma(this.j,c));this.l=!1;var r=new oP(.5*m/n,h,e.He);Yu(b,h,m,f);if(l){var u=[];Wu(b,h,function(a){u.push(a)},this);u.sort(l);u.forEach(d,this)}else Wu(b,h,d,this);r.finish(c);this.aa=m;this.Ea=k;this.pa=l;this.K=h;this.j=r;return!0};CN("MAP_RENDERER",iO);Jka([fO,jO,tO,uO]);CN("MAP_RENDERER",tP);Jka([sP,uP,vP]);
function wP(a){a=of({},a);if(!a.controls){var b=a,c={},d=new ju;(void 0!==c.zoom?c.zoom:1)&&d.push(new IN(c.zoomOptions));(void 0!==c.rotate?c.rotate:1)&&d.push(new HN(c.rotateOptions));(void 0!==c.attribution?c.attribution:1)&&d.push(new GN(c.attributionOptions));b.controls=d}if(!a.interactions){b=a;c={};d=new ju;var e=new JN;(void 0!==c.altShiftDragRotate?c.altShiftDragRotate:1)&&d.push(new NN);(void 0!==c.doubleClickZoom?c.doubleClickZoom:1)&&d.push(new LN({delta:c.zoomDelta,duration:c.zoomDuration}));
(void 0!==c.dragPan?c.dragPan:1)&&d.push(new MN({kinetic:e}));(void 0!==c.pinchRotate?c.pinchRotate:1)&&d.push(new VN);(void 0!==c.pinchZoom?c.pinchZoom:1)&&d.push(new WN({constrainResolution:c.constrainResolution,duration:c.zoomDuration}));if(void 0!==c.keyboard?c.keyboard:1)d.push(new SN),d.push(new TN({delta:c.zoomDelta,duration:c.zoomDuration}));(void 0!==c.mouseWheelZoom?c.mouseWheelZoom:1)&&d.push(new UN({constrainResolution:c.constrainResolution,duration:c.zoomDuration}));(void 0!==c.shiftDragZoom?
c.shiftDragZoom:1)&&d.push(new RN({duration:c.zoomDuration}));b.interactions=d}DN.call(this,a)}I(wP,DN);function xP(a){wP.call(this,a)}w(xP,wP);g=xP.prototype;g.Y=function(){var a=L.s();if(a.Qa()&&(a=yP(a))&&(a=a.Y()))return Ql(a,"EPSG:4326",S);a=Xn(this);return As(T(this),a||[0,0])};g.getCoordinateFromPixel=function(a){if(L.s().Qa()){var b=L.s().g;return(a=b?b.getCoordinateFromPixel(a):null)?Kl(a,S):null}a=xP.C.getCoordinateFromPixel.call(this,a);b=T(this).Ra().Y();return a&&(a[1]<b[1]||a[1]>b[3])?null:a};
g.getPixelFromCoordinate=function(a){if(L.s().Qa()&&a){a=Ml(a,S);var b=L.s().g;return b?b.getPixelFromCoordinate(a):null}return xP.C.getPixelFromCoordinate.call(this,a)};function zP(a,b){return xP.C.getPixelFromCoordinate.call(a,b)}g.Yh=function(a,b,c){if(L.s().Qa()){var d=L.s().g;return d?d.lz(a,b,c):null}return this.getCoordinateFromPixel(a)?xP.C.Yh.call(this,a,b,c):null};function zt(a,b){a=L.s();a.Qa()&&(a=a.g)&&a.us(b)}
g.Vg=function(a,b){if(!a.defaultPrevented){var c=a.target;c.tagName==="INPUT".toString()||c.tagName==="TEXTAREA".toString()||document.querySelector(".modal-backdrop,.window-modal-bg")||xP.C.Vg.call(this,a,b)}};
g.lf=function(){var a=EN(this);if(a){var b=getComputedStyle(a);if(b)if(!od||0!=a.offsetWidth&&0!=a.offsetHeight)this.setSize([a.offsetWidth-parseFloat(b.borderLeftWidth)-parseFloat(b.paddingLeft)-parseFloat(b.paddingRight)-parseFloat(b.borderRightWidth),a.offsetHeight-parseFloat(b.borderTopWidth)-parseFloat(b.paddingTop)-parseFloat(b.paddingBottom)-parseFloat(b.borderBottomWidth)]);else{a=document.getElementsByClassName("navbar");for(var c=b=0;c<a.length;c++)b+=a[0].offsetHeight;a=document.documentElement.clientHeight-
b;this.setSize([document.documentElement.clientWidth,0<a?a:0])}else this.setSize(void 0)}else this.setSize(void 0)};var tH={},uH="identify",vH="goTo",RH="mostRecent",yH="refresh",XL="layer:lock",YL="layer:unlock",xH="layer:remove",wH="rename",VL="layer:disableTime",WL="layer:enableTime",SH="showDescription",rK="clearSelection",pK="bufferSelected",ZL="resetColor",sK="select",tK="selectExclusive",uK="deselect",vK="spatial:removeFeature",wK="spatial:removeFeatures",qK="export";function AP(){x.call(this);this.Ba=null;this.nb=!1;this.state="ready";this.title=""}w(AP,x);AP.prototype.finish=function(a){this.detail=a||null;this.state="success";return!0};AP.prototype.Db=function(){this.state="ready";this.Ba=null;return!0};function BP(a,b,c){AP.call(this);this.title="Fit Map to Extent";this.l=a;this.A=void 0;this.j=b||1.5;a=15;null!=c&&(a=0>c?25:me(c,2,25));this.g=a}w(BP,AP);BP.prototype.Fa=function(){this.state="executing";var a=L.s();this.A=RB(a).slice();a.Pi(this.l,this.j,this.g);return this.finish()};BP.prototype.Db=function(){this.state="reverting";this.A&&L.s().Pi(this.A);return BP.C.Db.call(this)};function CP(){C.call(this);this.Ba=null;this.nb=!0;this.state="ready";this.title=""}w(CP,C);CP.prototype.finish=function(a){this.detail=a||null;this.state="success";this.dispatchEvent("executed");return!0};function bna(a,b){var c="reverting"==a.state?"reverted":"executed";a.state="error";a.Ba=b;a.dispatchEvent(c)}CP.prototype.Db=function(){this.state="ready";this.Ba=null;this.dispatchEvent("reverted");return!0};function DP(a,b){CP.call(this);this.Ba=null;this.nb=!0;this.state="ready";this.title="Switch to "+(a?"3D":"2D")+" Mode";this.j=a;this.g=null!=b?b:!1}w(DP,CP);function cna(a,b){return!b&&!a.g&&(a=vF(Y),b=CH("2d"),a>b)?!1:!0}DP.prototype.Fa=function(){this.state="executing";var a=this.j;if(cna(this,a))return EP(L.s(),a,this.g),this.finish();dna().then(function(){EP(L.s(),a,this.g);this.finish()},function(){bna(this,this.title+" cancelled by user.")},this);return!0};
DP.prototype.Db=function(){this.state="reverting";var a=!this.j;if(cna(this,a))return EP(L.s(),a,this.g),DP.C.Db.call(this);dna().then(function(){EP(L.s(),a,this.g);this.state="ready";this.Ba=null;this.dispatchEvent("reverted")},function(){bna(this,this.title+" cancelled by user.")},this);return!0};function FP(a){a=a||{};this.L=dr("DIV",{"class":(void 0!==a.className?a.className:"ol-zoom-level")+" ol-unselectable"});this.l=dr("SPAN",{"class":"altitude-text mr-1"});this.L.appendChild(this.l);var b=dr("SPAN",{"class":"separator mr-1"}),c=pk("|");b.innerHTML=ok(c);this.L.appendChild(b);this.A=dr("SPAN",{"class":"zoom-text mr-1"});this.L.appendChild(this.A);this.j=this.g=void 0;this.u=null;FN.call(this,{element:this.L,render:ena,target:a.target});a=au.s();this.set(GP,a.g);a.H("propertychange",this.B,
!1,this)}w(FP,FN);FP.prototype.J=function(){FP.C.J.call(this);au.s().M("propertychange",this.B,!1,this)};FP.prototype.reset=function(){this.j=this.g=void 0;fna(this);gna(this)};FP.prototype.B=function(a){a=a.o;"string"===typeof a&&a!=this.get(GP)&&(this.set(GP,a),this.reset())};function ena(a){a=a.frameState;null===a?this.u=null:this.u=a.viewState;fna(this);gna(this)}function HP(a){IP(a.l,!1);a.g=void 0}function JP(a){IP(a.A,!1);a.j=void 0}
function fna(a){var b,c=L.s();if(c.Qa()){var d=yP(c);if(!d){HP(a);return}d=d.Ff();d!=a.g&&(a.g=b=d)}else{d=a.u;if(!d){HP(a);return}d.resolution!=a.g&&(a.g=d.resolution,b=Xn(c.X()),b=Vn([b[0],b[1]],d.resolution))}null!=b&&(isNaN(b)&&HP(a),d=au.s(),a.l&&(b=pk("Altitude: "+du(d,b,3)),a.l.innerHTML=ok(b),IP(a.l,!0)))}
function gna(a){var b=a.u;if(b){var c=L.s();if(c.Qa()){c=yP(c);if(!c){JP(a);return}var d=c.Ff();if(a.j!=d){a.j=d;var e=c.Eh(d,0)}}else b.resolution!=a.j&&(e=a.j=b.resolution);null!=e&&(b=Rn(e,b.projection),null==b||Infinity==b||isNaN(b)?JP(a):(b=pk("Zoom: "+b.toFixed(1)),a.A.innerHTML=ok(b),IP(a.A,!0)))}else JP(a)}var GP="units";FP.prototype.ub=function(){return this.L};function hna(a,b){if(a instanceof hq&&!1!==a.get("_node")&&(b||(b=Dy(a)),b))return{feature:a,layer:b}}function ina(a,b){L.s().Qa()?(a=a?.5:.9,b&&(a=1/a)):(a=a?1:.2,b&&(a=-a));return a}function jna(a){return a instanceof iu};function KP(a){x.call(this);this.g=a;var b=lE;this.entries=a.D()?b.getEntries(null,a.D()):[];this.j=1<gH(b,a);this.l=0!==gH(b,a)%2;this.append=!0}w(KP,x);g=KP.prototype;g.nb=!1;g.title="Add/Remove Area";g.Ba=null;g.state="ready";g.Cj=function(){return"ready"!==this.state?(this.Ba="Command not in ready state.",!1):this.g?!0:(this.Ba="No area provided.",!1)};function LP(a,b){KP.call(this,a);this.o=b;this.title="Toggle area "+(b?"on":"off")}w(LP,KP);LP.prototype.Fa=function(){return this.Cj()?(this.state="executing",TG.toggle(this.g,this.o),this.state="success",!0):!1};LP.prototype.Db=function(){this.state="reverting";TG.toggle(this.g,!this.o);this.state="ready";return!0};function MP(a){KP.call(this,a);this.title="Remove area";a&&(a=a.get("title"))&&(this.title+=' "'+a+'"')}w(MP,KP);MP.prototype.Fa=function(){if(this.Cj()){this.state="executing";var a=TG,b=lE;this.entries&&VG(b,this.entries);a.remove(this.g);this.state="success";return!0}return!1};MP.prototype.Db=function(){this.state="reverting";var a=lE;TG.add(this.g);oE(a,this.entries);this.state="ready";return!0};Q.directive("areanodeui",[function(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-click="nodeUi.edit()"><i class="fa fa-fw c-glyph" ng-class="nodeUi.getTemp() ? \'fa-save\' : \'fa-pencil\'" title="{{nodeUi.getTemp() ? \'Save\' : \'Edit\'}}"></i></span><span ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the area"></i></span></span>',controller:NP,controllerAs:"nodeUi"}}]);
function NP(a,b){FE.call(this,a,b)}w(NP,FE);NP.$inject=["$scope","$element"];NP.prototype.GE=function(){return this.scope.item.me().get("temp")};NP.prototype.getTemp=NP.prototype.GE;NP.prototype.remove=function(){var a=this.scope.item.me();a&&(a=new MP(a),AE(OE.s(),a))};NP.prototype.remove=NP.prototype.remove;NP.prototype.Rc=function(){var a=this.scope.item.me();a&&XG(a)};NP.prototype.edit=NP.prototype.Rc;function OP(a){var b=null;if(a){a=jr(a);b=[];for(var c=0,d=a.length;c<d;c++)b.push(su(a[c],!0).trim())}return b};function PP(a){ko.call(this);this.g=null;a&&this.Bj(a)}w(PP,ko);g=PP.prototype;g.J=function(){PP.C.J.call(this);this.Bj(null)};g.me=function(){return this.g};g.Bj=function(a){this.g&&yf(this.g,"toggle",this.Um,this);this.g=a;QP(this);this.g&&H(this.g,"toggle",this.Um,this)};function QP(a){a.ga(a.D());a.Da(a.ba());a.g&&(po(a,a.g.get("description")||""),a.Ga(a.g.get("shown")?"on":"off"))}
g.Ga=function(a){if("both"!==a){var b=this.getState();PP.C.Ga.call(this,a);a=this.getState();b!=a&&this.g&&(b="off"!==a,a=this.g.get("shown"),b!==a&&(this.g.set("shown",b),this.g.dispatchEvent("toggle")))}};g.Um=function(){this.Ga(this.g.get("shown")?"on":"off")};g.D=function(){return this.g?this.g.D():PP.C.D.call(this)};g.ba=function(){return this.g?this.g.get("title")||"":PP.C.ba.call(this)};
g.qe=function(){var a="";this.g&&(a+=this.g.get("title")||"",a+=" "+(this.g.get("description")||""),a+=" "+(this.g.get("tags")||""));return a};g.getTags=function(){if(this.g){var a=this.g.get("tags");if(a)return a?Jb(a).split(/\s*,\s*/):null}return null};g.Dj=function(){TG.X()&&(this.g.zb(NG),TG.X().cc(this.g))};g.ii=function(){TG.X()&&TG.X().Bb(this.g)};g.ob=function(){return!1};PP.prototype.isLoading=PP.prototype.ob;PP.prototype.nc=function(a){this.Bj(a.me());PP.C.nc.call(this,a)};function RP(a){PP.call(this,a);lE.H("propertychange",this.Yx,!1,this)}w(RP,PP);F(RP,"os.ui.menu.IMenuSupplier");g=RP.prototype;g.J=function(){RP.C.J.call(this);lE.M("propertychange",this.Yx,!1,this)};g.Xx=function(){return SP};g.Bj=function(a){if(a!==this.g){this.g&&yf(this.g,"toggle",this.Um,this);var b=this.g;this.g=a;QP(this);this.g?(this.j="<areanodeui></areanodeui>",H(this.g,"toggle",this.Um,this)):this.j="";this.dispatchEvent(new K("area",a,b))}else QP(this)};g.Yx=function(){this.dispatchEvent(new K("icons"))};
g.Ga=function(a){if("both"!==a){var b=this.getState();oo(this,a);a=this.getState();b!=a&&this.g&&(b="off"!==a,a=this.g.get("shown"),b!==a&&(b=new LP(this.g,b),AE(OE.s(),b)))}};g.Dj=function(){TG.iq(this.g)};g.ii=function(){TG.uo(this.g)};
g.Kc=function(){var a=this.me();a=gH(lE,a.D());if(1==a){a="fa-ban text-danger";var b="This area is an exclusion"}else 2==a?(a="fa-circle u-text-yellow",b="This area is querying features"):3==a?(a="fa-times-circle text-warning",b="This area is being used for queries and exclusions"):(a="fa-circle-o",b="This area is being displayed on the map");return a?' <i class="fa '+a+'" title="'+b+'"></i> ':RP.C.Kc.call(this)};function TP(){C.call(this)}w(TP,ZB);g=TP.prototype;g.mc=-1;
g.bc=function(a){TP.C.bc.call(this,a);this.mc=-1;this.state="ready";var b=a.length;if(!(0>=b)){for(var c=0;c<b;c++){var d=a[c];if("ready"===d.state&&0>this.mc)this.mc=c;else if("success"===d.state||"error"===d.state){if(0<=this.mc&&c>=this.mc)throw Error("os.command.SequenceCommand: illegal state: the first ready sub-command must follow all executed sub-commands: first ready command ["+this.mc+"]:"+a[this.mc].title+" precedes "+d.state+"command ["+c+"]:"+a[c].title);"error"!==this.state&&(this.state=
d.state)}}0<=this.mc&&this.mc<a.length&&"error"!==this.state?this.state="ready":this.mc=a.length}};g.Fa=function(){if("ready"!==this.state)return!1;this.state="executing";return this.Rx()};g.Db=function(){if("success"!==this.state)return!1;this.mc--;this.state="reverting";return this.Sx()};
g.Rx=function(){for(var a=this.nf,b=a.length;this.mc<b&&"executing"===this.state;){var c=a[this.mc],d=null;c.nb&&(d=c,d.Ua("executed",this.Kw,!1,this));var e=!1;try{(e=c.Fa())||UP(this)}catch(f){this.Ba="Error executing command "+c.title+": "+String(f)}if(!e)return d&&d.M("executed",this.Kw,!1,this),this.state="error",this.dispatchEvent(new A("executed")),!1;if(c.nb)return!0;this.mc++}this.state="success";this.Ba=null;this.dispatchEvent(new A("executed"));return!0};
g.Kw=function(){"executing"===this.state&&(UP(this),"success"!==this.nf[this.mc].state?(this.state="error",this.dispatchEvent(new A("executed"))):(this.mc++,ke(this.Rx.bind(this))))};
g.Sx=function(){for(;-1<this.mc&&"reverting"===this.state;){var a=this.nf[this.mc];if(a.nb){var b=a;b.Ua("reverted",this.NK,!1,this)}b=!1;try{(b=a.Db())||UP(this)}catch(c){this.Ba="Error reverting command "+a.title+": "+String(c)}if(!b)return this.state="error",this.dispatchEvent(new A("reverted")),!1;if(a.nb)return!0;this.mc--}this.mc=0;this.state="ready";this.Ba=null;this.dispatchEvent(new A("reverted"));return!0};
g.NK=function(){"reverting"===this.state&&(UP(this),"ready"!==this.nf[this.mc].state?(this.state="error",this.dispatchEvent(new A("reverted"))):(this.mc--,ke(this.Sx.bind(this))))};function UP(a){var b=a.nf[a.mc];"executing"===a.state?a.Ba="error"===b.state?b.Ba||"Command "+(b.title||a.title+"["+a.mc+"]")+" failed":"Executing":"reverting"===a.state?a.Ba="error"===b.state?b.Ba||"Reverting command "+(b.title||a.title+"["+a.mc+"]")+" failed":"Reverting":a.Ba=null};var kna={Point:hp,LineString:Jo,LinearRing:gp,Polygon:qp,MultiPoint:jp,MultiLineString:Mo,MultiPolygon:vp,Circle:Wo};function VP(a,b){var c=new hq,d=a.de;Zu(c,d);var e=a.Z();null!=e&&c.tb(WP(e));if(b){e=0;for(var f=b.length;e<f;e++){var h=b[e];null!=a.la[h]&&h!=d&&(c.la[h]=a.la[h])}}return c}function WP(a){var b=a.T();b=kna[b];return!b||a instanceof b?a.clone():b.prototype.clone.call(a)};function XP(a,b,c,d,e){TG.get(a)||(a=VP(a,tG));KP.call(this,a);this.entries=a.D()?lE.getEntries(null,a.D(),null,null,!0):[];this.j=void 0!==b?b:this.j;this.l=void 0!==c?c:this.l;this.append=void 0!==d?d:this.append;this.title="Add "+(this.j?"query ":this.l?"exclusion ":"")+"area";a&&(a=a.get("title"))&&(this.title+=' "'+a+'"');this.u=void 0!==e?e:["*"];this.o=!1}w(XP,KP);
XP.prototype.Fa=function(){if(this.Cj()){this.state="executing";var a=TG,b=lE;this.entries&&VG(b,this.entries);a.get(this.g)||(this.o=a.add(this.g));(this.j||this.l)&&$a(this.u,function(a){eH(b,a,this.g.D(),"*",this.j)},this);this.state="success";return!0}return!1};XP.prototype.Db=function(){this.state="reverting";var a=TG,b=lE;(this.j||this.l)&&nE(b,void 0,this.g.D());this.entries&&this.entries.length&&oE(b,this.entries);this.o&&a.remove(this.g);this.state="ready";return!0};Q.directive("basicinfo",[function(){return{restrict:"E",replace:!0,scope:{config:"=",columns:"=?",help:"=?"},templateUrl:"v1541734487/views/im/basicinfo.html",controller:YP,controllerAs:"info"}}]);function YP(a){this.scope=a;this.tagsSample=this.descSample=this.titleSample="";a.$watch("columns",this.g.bind(this))}YP.$inject=["$scope"];var lna=/(name|title)$/i,mna=/^desc(r(i(p(t(i(o(n)?)?)?)?)?)?)$/i;
YP.prototype.g=function(a){this.scope&&this.scope.config&&(a?(ZP(this,"titleColumn",a,lna),ZP(this,"descColumn",a,mna),ZP(this,"tagsColumn",a)):(this.scope.config.titleColumn=null,this.scope.config.descColumn=null,this.scope.config.tagsColumn=null),this.tB())};
function ZP(a,b,c,d){if(a.scope&&a.scope.config){if(a.scope.config[b]){var e=Ga(Jx,"field",a.scope.config[b].field);c.some(e)||(a.scope.config[b]=null)}if(!a.scope.config[b]&&d)for(e=0;e<c.length;e++){var f=c[e];d.test(f.name)&&(!a.scope.config[b]||f.name.length<a.scope.config[b].name.length)&&(a.scope.config[b]=f)}}}
YP.prototype.tB=function(){this.scope&&this.scope.config&&(this.titleSample=$P(this,this.scope.config.titleColumn),this.descSample=$P(this,this.scope.config.descColumn),this.tagsSample=$P(this,this.scope.config.tagsColumn))};YP.prototype.updateSampleText=YP.prototype.tB;
function $P(a,b){if(b&&b.field&&a.scope.config){var c="<no data>";if((a=a.scope.config.features||a.scope.config.preview)&&0<a.length)for(var d=Math.min(a.length,100),e=0;e<d;e++){var f=ay(a[e],b.field);if(f){c=f;break}}return c}return""};function aQ(a,b,c){this.scope=a;this.element=b;this.config=a.config;this.loading=!1;this.help=sG;a.$on("$destroy",this.dispose.bind(this));c(function(){a.$emit("window.ready")})}w(aQ,x);aQ.$inject=["$scope","$element","$timeout"];aQ.prototype.J=function(){aQ.C.J.call(this);this.element=this.scope=null};aQ.prototype.close=function(){kx(this.element)};aQ.prototype.close=aQ.prototype.close;aQ.prototype.finish=function(){this.loading=!0};aQ.prototype.finish=aQ.prototype.finish;Q.directive("editarea",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/query/editarea.html",controller:bQ,controllerAs:"ctrl"}}]);
function bQ(a,b,c){aQ.call(this,a,b,c);this.config=a.config={title:null,description:null,tags:null};if(b=this.scope.feature)this.config.features=[b],b.get("title")?this.config.title=b.get("title"):this.config.title=b.get("name"),this.config.description=b.get("description"),this.config.tags=b.get("tags");c(function(){a.$emit("window.ready")})}w(bQ,aQ);bQ.$inject=["$scope","$element","$timeout"];
bQ.prototype.accept=function(){var a=this.scope.feature;if(a){var b=vG(this.config);uG(a,b);a.set("temp",void 0);b=OG.s();b.get(a)?b.add(a):(a=new XP(a),AE(OE.s(),a))}this.close()};bQ.prototype.accept=bQ.prototype.accept;Q.directive("mergeareas",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/query/mergeareas.html",controller:cQ,controllerAs:"ctrl"}}]);
function cQ(a,b,c){bQ.call(this,a,b,c);this.log=nna;this.help={title:"Title given to the merged area.",description:"Description applied to the merged area.",tags:"Comma-delimited list of tags to apply to the merged area. Tags can be used to group or search areas in the Areas tab of the Layers window.",replace:"If checked, selected areas will be removed from Areas and replaced with the merged area."};this.replace=!1;this.g=null;if(a=a.features)try{var d=a.map(cv).filter($u),e=uv(d);e&&(this.g=L.s().cc(new hq(e),
ez))}catch(f){E.error(this.log,"Failed merging features:",f)}}w(cQ,bQ);cQ.$inject=["$scope","$element","$timeout"];var nna=E.V("os.query.ui.MergeAreasCtrl");cQ.prototype.J=function(){cQ.C.J.call(this);this.g&&(L.s().Bb(this.g),this.g=null)};
cQ.prototype.accept=function(){var a=this.scope.features;if(a&&0<a.length){var b=a.map(function(a){return a.Z()}).filter($u),c=uv(b);if(c){b=[];if(this.replace)for(var d=0;d<a.length;d++)b.push(new MP(a[d]));a=this.scope.feature=new hq(c);c=vG(this.config);uG(a,c);b.push(new XP(a));1<b.length?(a=new TP,a.bc(b),a.title="Merge Areas into "+this.config.title,AE(OE.s(),a)):AE(OE.s(),b[0])}else rj(tj,"Merging areas failed! Please see the log for more details.",Qh)}else rj(tj,"Merging areas failed! List of areas to merge is empty.",
Qh);this.close()};cQ.prototype.accept=cQ.prototype.accept;function dQ(a,b){KP.call(this,a);this.u=this.o=void 0;TG.get(a)&&(this.o=b,this.u=a.Z());this.title="Modify area";a&&(a=a.get("title"))&&(this.title+=' "'+a+'"')}w(dQ,KP);dQ.prototype.Fa=function(){return this.Cj()?(this.state="executing",this.g.set("_originalGeometry",void 0),this.g.tb(this.o),TG.remove(this.g),TG.add(this.g),this.state="success",!0):!1};
dQ.prototype.Db=function(){this.state="reverting";this.g.set("_originalGeometry",void 0);this.g.tb(this.u);TG.remove(this.g);TG.add(this.g);this.state="ready";return!0};dQ.prototype.Cj=function(){return this.u?this.o?dQ.C.Cj.call(this):(this.Ba="No new area provided.",!1):(this.Ba="Original area unknown.",!1)};function ona(){return{restrict:"E",replace:!0,scope:{area:"=",targetArea:"=?",op:"=?"},templateUrl:"v1541734487/views/query/modifyarea.html",controller:eQ,controllerAs:"modarea"}}Q.directive("modifyarea",[ona]);
function eQ(a,b){this.scope=a;this.element=b;this.log=pna;this.l=void 0;this.o=null;this.help={area1:"The base area to be modified. A preview of the result will be shown on the map in blue, and this area can either be replaced or you can create a new area.",area2:"The area that will be used to modify the base area.",mapArea:"The area to add to/remove from the base area. This area was drawn/selected using the map. If you would like to choose a saved area, click Clear and select one from the dropdown.",
operation:"How the area should be modified.",addOp:"The selected area will be combined with the Area to Modify.",removeOp:"The selected area will be cut out of the Area to Modify.",intersectOp:"The new area will only include intersecting portions of the selected areas.",replace:"If checked, the Area to Modify will be replaced with the area indicated by the preview. Otherwise a new area will be created with the provided title.",title:"The title to give to the new area"};this.loading=!1;this.replace=
!0;this.title="New Area";a.op=a.op||fQ;a.$watch("area",this.Rq.bind(this));a.$watch("op",this.wb.bind(this));a.$watch("targetArea",this.sr.bind(this));a.$on("$destroy",this.dispose.bind(this));a.$emit("window.ready")}w(eQ,x);eQ.$inject=["$scope","$element"];var pna=E.V("os.ui.query.ui.ModifyAreaCtrl");g=eQ.prototype;g.J=function(){eQ.C.J.call(this);this.bo(void 0);this.element=this.scope=null};
g.Zb=function(){this.error=null;if(this.scope)if(this.scope.area)if(this.scope.targetArea)if(this.scope.area==this.scope.targetArea)this.error="Please select two different areas.";else if(this.o)switch(this.o.message){case "Result geometry is empty":this.error=this.scope.op==gQ?"Area to Remove cannot fully contain the Area to Modify, or the result will be empty.":this.scope.op==hQ?"Areas do not have an intersection.":this.scope.op+" failed. Please check the log for details.";break;case "Result geometry is unchanged":this.error=
this.scope.op==gQ?"Area to Remove will not remove anything from the Area to Modify.":"Area to Add will not add anything to the Area to Modify.";break;default:this.error=this.scope.op+" failed. Please check the log for details."}else this.l||(this.error=this.scope.op+" failed. Please check the log for details.");else this.error="Please choose an area to "+this.scope.op+".";else this.error="Please choose an area to modify."};
g.Rq=function(){this.scope.fixArea=this.scope.area&&!TG.contains(this.scope.area);this.wb()};g.sr=function(){this.scope.fixTargetArea=this.scope.targetArea&&!TG.contains(this.scope.targetArea);this.wb()};g.wb=function(){this.bo(qna(this));this.Zb()};g.bo=function(a){this.l=a};
function qna(a){a.o=null;if(a.scope.area&&a.scope.targetArea)try{switch(a.scope.op){case fQ:var b=rv(a.scope.area,a.scope.targetArea);break;case gQ:b=tv(a.scope.area,a.scope.targetArea);break;case hQ:var c=a.scope.area,d=a.scope.targetArea,e=null;if(c&&d){var f=c.Z(),h=d.Z();if(f&&h){var k=jv.s(),l=kv(k,f),m=kv(k,h);e=new hq;if(m.intersects(l)){var n=l.intersection(m);if(n&&!n.isEmpty()){var p=k.write(n);p&&(p=sv(p),p.set("_normalized",!0));e.tb(p)}else throw Error("Result geometry is empty");}else throw Error("Result geometry is empty");
}}b=e;break;default:E.error(a.log,"Unsupported operation: "+a.scope.op)}}catch(r){a.o=r}b&&b.set("_node",!1);return b}g.cancel=function(){kx(this.element)};eQ.prototype.cancel=eQ.prototype.cancel;eQ.prototype.confirm=function(){var a=qna(this),b=a?a.Z():null;a&&b?(this.replace?a=new dQ(this.scope.area,b):(a.set("title",this.title),a=new XP(a)),a&&AE(OE.s(),a)):rj(tj,"Failed modifying area! Please see the log for more details.",Qh,this.log);kx(this.element)};eQ.prototype.confirm=eQ.prototype.confirm;
eQ.prototype.vE=function(a){switch(a){case fQ:return"Add Area";case gQ:return"Remove Area";case hQ:return"Area Intersection"}return"Area Help"};eQ.prototype.getPopoverTitle=eQ.prototype.vE;eQ.prototype.uE=function(a){switch(a){case fQ:return this.help.addOp;case gQ:return this.help.removeOp;case hQ:return this.help.intersectOp}return"Area Help"};eQ.prototype.getPopoverContent=eQ.prototype.uE;var fQ="Add",gQ="Remove",hQ="Intersect";Q.directive("osModifyarea",[function(){var a=ona();a.controller=iQ;return a}]);function iQ(a,b){eQ.call(this,a,b);this.log=rna;this.j=this.g=null}w(iQ,eQ);iQ.$inject=["$scope","$element"];var rna=E.V("os.query.ui.ModifyAreaCtrl");iQ.prototype.J=function(){iQ.C.J.call(this);this.g&&(L.s().Bb(this.g),this.g=null);this.j&&(L.s().Bb(this.j),this.j=null)};
iQ.prototype.Rq=function(a,b){this.g&&L.s().Bb(this.g);this.g=null;a instanceof hq&&a.Z()&&(this.g=VP(a),this.g.set("_node",!1),L.s().cc(this.g));iQ.C.Rq.call(this,a,b)};iQ.prototype.sr=function(a,b){this.j&&L.s().Bb(this.j);this.j=null;a instanceof hq&&a.Z()&&(this.j=VP(a),this.j.set("_node",!1),L.s().cc(this.j));iQ.C.sr.call(this,a,b)};iQ.prototype.bo=function(a){this.l&&L.s().Bb(this.l);iQ.C.bo.call(this,a);this.l&&this.l.Z()&&L.s().cc(this.l,ez)};function jQ(){return{replace:!0,restrict:"E",templateUrl:"v1541734487/views/file/exportdialog.html",controller:kQ,controllerAs:"exportdialog"}}Q.directive("exportdialog",[jQ]);
function kQ(a,b,c){this.scope=a;a.itemText="item";this.element=b;this.l=c;this.g=this.scope.options;this.exporters={};a.exporter=this.g.ek;a.initialExporter=!!a.exporter;if(!a.exporter){var d=sna(lQ);if(d&&0<d.length)for(a.exporter=d[0],b=0,c=d.length;b<c;b++)this.exporters[d[b].ba()]=d[b]}this.persisters={};a.persister=this.g.dl;a.initialPersister=!!a.persister;if(!a.persister&&(d=mQ(lQ))&&0<d.length)for(a.persister=d[0],b=0,c=d.length;b<c;b++)this.persisters[d[b].ba()]=d[b];b=this.element.find(".js-custom-ui");
(c=this.o())?(b.html(c),this.l(b.contents())(this.scope)):b.remove();a.$emit("window.ready");a.$watch("exporter",this.j.bind(this));a.$watch("persister",this.A.bind(this));a.$on("$destroy",this.destroy.bind(this))}kQ.$inject=["$scope","$element","$compile"];kQ.prototype.destroy=function(){this.l=this.element=this.scope=null};kQ.prototype.iE=function(){return this.scope&&this.scope.exporter?this.scope.exporter.ba():null};kQ.prototype.getExporterLabel=kQ.prototype.iE;
kQ.prototype.jE=function(){return this.scope&&this.scope.exporter?this.scope.exporter.Ug():null};kQ.prototype.getExporterUI=kQ.prototype.jE;kQ.prototype.o=function(){return null};kQ.prototype.Xb=function(a){return null!=a?Object.keys(a):[]};kQ.prototype.getKeys=kQ.prototype.Xb;kQ.prototype.j=function(a){if(a){this.g.ek=a;var b=this.element.find(".js-export-ui__container");b.children().remove();(a=a.Ug())&&this.scope&&(b.html(a),this.l(b.contents())(this.scope))}};
kQ.prototype.A=function(a){a&&(this.g.dl=a)};kQ.prototype.cancel=function(){kx(this.element)};kQ.prototype.cancel=kQ.prototype.cancel;kQ.prototype.confirm=function(){nQ(this.g.items,this.g.fields,this.g.title,this.g.ek,this.g.dl);kx(this.element)};kQ.prototype.confirm=kQ.prototype.confirm;Q.directive("areaexport",[function(){var a=jQ();a.controller=oQ;return a}]);function oQ(a,b,c){kQ.call(this,a,b,c);a.itemText="area";a.simple=!0;a.allowMultiple=!0;$a(this.g.items,function(a){a.set("mapVisualizationType","ANNOTATION_REGIONS")})}w(oQ,kQ);oQ.$inject=["$scope","$element","$compile"];
function tna(a){a||(a=[]);ub(a);var b=1==a.length?a[0].get("title"):null;fx({id:"areaExport",label:"Export Areas",icon:"fa fa-download",x:"center",y:"center",width:"400",height:"auto","show-close":"true",modal:"true"},"<areaexport></areaexport>",void 0,void 0,void 0,{options:{ek:null,fields:[],items:a,dl:null,title:b}})}
oQ.prototype.j=function(a,b){oQ.C.j.call(this,a,b);this.g.fields.length=0;b=["name","title","description","tags","interpolationMethod"];a instanceof pQ?(a.Ca=["title"],b.push("mapVisualizationType")):a instanceof qQ&&this.element.find(".js-export-ui__wrapper").children().remove();b&&0<b.length&&(this.g.fields=this.g.fields.concat(b))};function rQ(a){px.call(this,a)}w(rQ,px);rQ.prototype.open=function(a,b,c){if(q(a)){var d=L.s();a=a.map(function(a){var b=null;a instanceof RP?b=a.me():a instanceof sQ&&(b=a.getFeature());return b?{feature:b,geometry:b.Z(),layer:d.W(b.get("sourceId")),map:d.X()}:a});a.length?1===a.length&&(a=a[0]):a=void 0}a&&rQ.C.open.call(this,a,b,c)};var SP=void 0;function tQ(a){return a&&(a=(q(a)?a:[a]).map(function(a){var b=a.geometry;b||(a=a.feature)&&(b=a.Z());return b}).filter($u),a.length)?a:[]}
function uQ(a){return a&&(a=(q(a)?a:[a]).map(function(a){return a.feature}).filter($u),a.length)?a:[]}function una(a){if(!vQ(a))return!1;a:if(a=uQ(a),0<a.length){for(var b=0,c=a.length;b<c;b++){var d=a[b];if(!d||!TG.get(d)){a=!1;break a}}a=!0}else a=!1;return a}function vQ(a){a=tQ(a);if(a.length){for(var b=0;b<a.length;b++)if(!aq(a[b]))return!1;return!0}return!1}function vna(a){this.visible=!!(a&&1<a.length)&&vQ(a)}function wQ(a){this.visible=vQ(a)}function wna(a){this.visible=xna(a)}
function xna(a){if(Array.isArray(a)){for(var b=0,c=a.length;b<c;b++)if(!xna(a[b]))return!1;return!0}b=xQ.s();return!!a&&!!a.feature&&!!a.layer&&!b.contains(a.feature)}function yna(a){a=a.getContext();Array.isArray(a)||(a=[a]);a.forEach(function(a){if(a.layer){var b=a.layer.N();b&&b.Bb(a.feature)}})}function zna(a){if(TG&&a&&(1===a.length||!q(a))&&vQ(a)){var b=2;a=uQ(a);a.length&&!TG.get(a[0])&&(b=1);this.visible=JG(TG).length>=b}else this.visible=!1}function yQ(a){this.visible=una(a)}
function Ana(a){this.visible=vQ(a)&&!una(a)}function Bna(a){a=uQ(a);if(a.length){for(var b=0,c=a.length;b<c;b++){var d=a[b];if(!TG.get(d)||!1===d.get("shown")){this.visible=!1;return}}this.visible=!0}else this.visible=!1}function Cna(a){a=uQ(a);if(a.length){for(var b=0,c=a.length;b<c;b++){var d=a[b];if(!TG.get(d)||d.get("shown")){this.visible=!1;return}}this.visible=!0}else this.visible=!1}
function zQ(a,b){var c=a.getContext();if(c){q(c)||(c=[c]);for(var d=[],e=[],f=0,h=c.length;f<h;f++){var k=c[f].feature,l=c[f].geometry;if(l){var m=TG,n=lE;k=k||new hq(l);switch(a.type){case "load":case "add":e.push(k);d.push(new XP(k,!0,!1,"add"===a.type,b));break;case "exclude":case "add_exclude":e.push(k);d.push(new XP(k,!1,!0,"add_exclude"===a.type,b));break;case "save":case "edit":if(l=Ey(k)){var p=l.getColumns();k=k.clone();k.set("_sourceName",l.S(),!0)}XG(k,p);break;case "enable":case "disable":d.push(new LP(k,
"enable"===a.type));break;case "removeArea":d.push(new MP(k));break;case "area:modify":l={ui:"os-modifyarea"};m.get(k)?l.area=k:(l.targetArea=k,l.op=fQ);if(ix("modifyArea")){var r=$(".js-window#modifyArea .modal-body").scope();r&&(yc(r,l),R(r));hx("modifyArea")}else r=l.ui||"modifyarea",fx({id:"modifyArea",label:"Modify Area...",icon:"fa fa-edit",x:"center",y:"center",width:400,height:"auto","show-close":!0,"no-scroll":!0},"<"+r+' area="area" target-area="targetArea" op="op"></'+r+">",void 0,void 0,
void 0,{area:l.area||null,op:l.op,targetArea:l.targetArea||null});break;case "area:merge":case qK:case "featureInfo":e.push(k)}}}}if(e.length){switch(a.type){case "load":case "add":case "exclude":case "add_exclude":f=0;for(h=e.length;f<h;f++)(b=m.get(e[f]))&&!b.get("shown")&&d.push(new LP(b,!0));break;case "featureInfo":f=(f=c[0].layer)?f.S():void 0,bL(e,f)}if("area:merge"===a.type)fx({label:"Merge Areas",x:"center",y:"center",width:400,height:"auto","show-close":!0,modal:!1},"<mergeareas></mergeareas>",
void 0,void 0,void 0,{features:e});else if(a.type===qK)a.preventDefault(),a.stopPropagation(),tna(e);else if("load"===a.type||"exclude"===a.type)for(m=JG(m),f=0,h=m.length;f<h;f++)(b=m[f])&&b.get("shown")&&(c=gH(n,b),"load"===a.type&&1<c&&-1===e.indexOf(b)&&d.push(new LP(b,!1)),"exclude"!==a.type||1!==c&&3!==c||b==k||d.push(new LP(b,!1)))}d.length&&(1===d.length?AE(OE.s(),d[0]):(a=new TP,a.bc(d),a.title=d[d.length-1].title.replace("Add","Set"),AE(OE.s(),a)))}
function AQ(a){var b=WG(lE),c=[],d=!0;void 0!==a&&(d=0<lE.getEntries("*",a,null).length)&&(a=void 0);for(var e in b){var f=L.s().W(e);try{f&&(void 0!==a&&(d=0<lE.getEntries(e,a,null).length),c.push({id:e,label:b[e],type:f.cg()?f.cg():"other",enabled:d}))}catch(h){}}c.sort(function(a,b){return Kb(a.label,b.label)});return c}
function Dna(a){var b=this.find("Query"),c=this.find("Exclude");if(b&&c){for(;b.removeChild("Choose Layers"););for(;c.removeChild("Choose Layers"););if(vQ(a)){a=AQ();for(var d={},e=0,f=0;f<a.length;f++){var h=a[f].type;d[h]||(d[h]=0,e++);d[h]++}0<e&&b&&c&&(Ena(b,"add",d),Ena(c,"add_exclude",d))}}}
function Ena(a,b,c){var d=a.R({label:"Choose Layers",type:"submenu",sort:10}),e=d.R({type:"group",label:"By Layer Type",sort:0}),f=0,h;for(h in c){var k=ac(h);e.R({label:k+" ("+c[h]+")",eventType:b+":"+h,za:Fna,tooltip:a.label+" area for layes of type ("+k+")",sort:f++})}d.R({label:"Custom...",eventType:b+":custom",za:Fna,sort:f})}Q.directive("layerchooser",[function(){return{restrict:"E",templateUrl:"v1541734487/views/action/layerchooser.html",controller:BQ,controllerAs:"layerchooser"}}]);
function BQ(a,b){this.v=a;this.L=b}BQ.$inject=["$scope","$element"];BQ.prototype.valid=function(){return!eb(this.v.layers,function(a){return a.enabled})};BQ.prototype.valid=BQ.prototype.valid;BQ.prototype.accept=function(){this.v.event.type=this.v.action;var a=[];$a(this.v.layers,function(b){b.enabled&&a.push(b.id)});zQ(this.v.event,a);this.close()};BQ.prototype.accept=BQ.prototype.accept;BQ.prototype.close=function(){kx(this.L)};BQ.prototype.close=BQ.prototype.close;
function Fna(a){var b=a.type.split(":"),c=b[0],d=b[1];b=null;b=(b=a.getContext())&&b.feature?AQ(b.feature.D()):AQ();if("custom"==d)fx({id:"spatiallayerchooser",label:"Choose Layers",icon:"fa fa-align-justify",x:"center",y:"center",width:"350",height:"500","min-width":"300","max-width":"1000","min-height":"250","max-height":"1000",modal:"true","show-close":"true"},'<layerchooser class="flex-fill d-flex"></layerchooser>',void 0,void 0,void 0,{event:a,action:c,layers:b});else{var e=[];fc(b,function(a){a.type==
d&&e.push(a.id)});a.type=c;zQ(a,e)}};Q.directive("drawingfeaturenodeui",[function(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()"><span ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph"title="Remove the feature"></i></span></span>',controller:CQ,controllerAs:"nodeUi"}}]);function CQ(a,b){FE.call(this,a,b)}w(CQ,FE);CQ.$inject=["$scope","$element"];CQ.prototype.remove=function(){var a=this.scope.item,b=a.getFeature();b&&(a.getParent().removeChild(a),L.s().Bb(b))};CQ.prototype.remove=CQ.prototype.remove;function sQ(a){ko.call(this);this.j="<drawingfeaturenodeui></drawingfeaturenodeui>";this.g=null;this.l=!1;this.Lf(a)}w(sQ,ko);F(sQ,"os.ui.menu.IMenuSupplier");g=sQ.prototype;g.Xx=function(){return SP};g.Ga=function(a){sQ.C.Ga.call(this,a);this.g&&(a=Dy(this.g).N(),"off"===this.getState()?(this.g.la.opacity=0,this.l&&this.g.kf("_highlightStyle",!0),sz(this.g)):(this.g.la.opacity=void 0,this.l?sz(this.g):this.g.zb(this.g.get("_originalStyle"))),Oy(this.g,a))};g.getFeature=function(){return this.g};
g.Lf=function(a){this.g!==a&&(this.g=a,this.g.hc=!0,a.get("_style")||this.g.get("_originalStyle")||(a=this.g.Ib(),this.g.set("_originalStyle",q(a)?a:[a],!0)));if(a=this.g)this.l=!!a.get("_style"),this.Da(a.get("title")||a.get("label")||a.get("name")||String(a.D())),a=a.get("opacity"),this.Ga(0===a?"off":"on")};g.Kc=function(){return this.g?this.g.get("icons")||this.g.get("icon")||"":""};
g.Dj=function(){if(this.g&&"off"!==this.getState()){if(this.l)this.g.set("_highlightStyle",dz,!0),sz(this.g);else{var a=this.g.get("_originalStyle").map(Gna);this.g.zb(a)}(a=Dy(this.g))&&Gz(a,[this.g])}};function Gna(a){if(a){a=a.clone();var b=[0,255,255,.5],c=[0,255,255,1],d;var e=a.Pa();if(e instanceof bs||e instanceof as){if(d=e.lb())d.g=b,d.j=void 0;if(e=e.kb())e.G=c,e.l=void 0}if(e=a.kb())e.G=c,e.l=void 0;if(d=a.lb())c=d,c.g=b,c.j=void 0;return a}return null}
g.ii=function(){if(this.g&&"off"!==this.getState()){this.l?(this.g.kf("_highlightStyle",!0),sz(this.g)):this.g.zb(this.g.get("_originalStyle"));var a=Dy(this.g);a&&Gz(a,[this.g])}};Q.directive("featurecount",[function(){return{restrict:"AE",replace:!0,template:"<span></span>",controller:DQ,controllerAs:"featureCount"}}]);function DQ(a,b){this.g=null;this.L=b;"item"in a&&(b=a.item.W().N())&&b instanceof Rz&&(this.g=b,H(this.g,"propertychange",this.j,this));a.$on("$destroy",this.l.bind(this));this.L.html(Hna(this))}DQ.$inject=["$scope","$element"];DQ.prototype.l=function(){this.g&&yf(this.g,"propertychange",this.j,this);this.L=null};
DQ.prototype.j=function(a){a=a.j;a!=LI&&a!=QI&&a!=MH&&"visible"!=a&&"timeEnabled"!==a&&"timeFilter"!=a||this.L.html(Hna(this))};function Hna(a){try{if(a.g&&!a.g.Xa()){if(a.g.ob())return"(Loading...)";var b=a.g.Zd().length,c=a.g.dg();return"("+(b==c?c:b+"/"+c)+")"}}catch(d){}return""};Q.directive("layertype",[function(){return{restrict:"AE",replace:!0,template:"<span>{{layerType.getType()}}</span>",controller:EQ,controllerAs:"layerType"}}]);function EQ(a){this.v=a}EQ.$inject=["$scope","$element"];EQ.prototype.T=function(){if(M.get(["ui","layers","showLayerTypes"],!0)){var a=this.v.item;if(a&&(a=a.W()))return a.cg()}return""};EQ.prototype.getType=EQ.prototype.T;Q.directive("tileloading",[function(){return{restrict:"AE",replace:!0,template:"<span></span>",controller:FQ,controllerAs:"tileLoading"}}]);function FQ(a,b){this.L=b;this.g=null;"item"in a&&(b=a.item.W().N())&&b instanceof PH&&(this.g=b,H(this.g,"propertychange",this.j,this));this.L.html(this.mb());a.$on("$destroy",this.l.bind(this))}FQ.$inject=["$scope","$element"];FQ.prototype.l=function(){this.g&&yf(this.g,"propertychange",this.j,this);this.L=null};
FQ.prototype.j=function(a){a.G&&(a=a.j,"tileCount"!=a&&a!=MH||this.L.html(this.mb()))};FQ.prototype.mb=function(){try{if(this.g){var a=this.g.get("tileCount");if(null!=a)return"("+a+" In View)"}}catch(b){}return""};function ev(){ko.call(this);this.g=null}w(ev,ko);g=ev.prototype;g.J=function(){ev.C.J.call(this);this.ii();this.Ie(null)};g.Y=function(){var a=null,b=this.W();b instanceof Vz&&(a=b.N().Y());return a};g.Ga=function(a){var b=this.na();if("both"!==a||b&&b.length){b=this.getState();ev.C.Ga.call(this,a);var c=this.getState();b!=c&&"both"!==a&&this.g&&this.g.Hd("off"!==c)}};g.W=function(){return this.g};
g.Ie=function(a){if(a!==this.g){this.g&&yf(this.g,"propertychange",this.B,this);var b=this.g;if(this.g=a){H(a,"propertychange",this.B,this);this.ga(a.D());this.Da(a.S());var c=void 0;if(a instanceof IE)for(var d=a.g,e=0,f=d.length;e<f;e++)if(void 0===c)c=d[e].hd();else{if(c!=d[e].hd()){this.Ga("both");c=void 0;break}}else c=a.hd();void 0!==c&&this.Ga(c?"on":"off");this.j=a.Ld()}this.dispatchEvent(new K("layer",a,b))}};g.D=function(){return this.g?this.g.D():ev.C.D.call(this)};
g.ba=function(){return this.g?this.g.S():ev.C.D.call(this)};g.qe=function(){var a="";if(this.g){a+=this.g.S();a+=this.getTags()?" "+this.getTags().join(" "):"";a+=" "+this.g.Sc();var b=Y.Ka(this.g.D());b&&(a+=" "+b.qe())}return a};g.getTags=function(){return this.g?this.g.getTags():null};g.Kc=function(){var a=null;this.g&&(a=this.g.gd());return a?a:ev.C.Kc.call(this)};g.ob=function(){return this.g?this.g.ob():!1};ev.prototype.isLoading=ev.prototype.ob;
ev.prototype.B=function(a){if(a instanceof K)switch(a.j){case "loading":this.dispatchEvent(new K("loading",a.u,a.o));break;case "visible":this.Ga(a.o?"on":"off");this.dispatchEvent(new K("loading"));break;case "title":this.Da(this.g.S());this.dispatchEvent(new K("label"));break;case "colorModel":case "error":case "icons":case "lock":case "style":case "timeEnabled":this.dispatchEvent(new K("icons"))}};ev.prototype.nc=function(a){this.Ie(a.W());ev.C.nc.call(this,a)};
ev.prototype.fk=function(a){a=ev.C.fk.call(this,a);var b=this.W();b instanceof IE?a+=" ("+this.W().rb()+")":(a+=" <layertype></layertype>",b instanceof Vz?a+=" <featurecount></featurecount>":b instanceof Uz&&(a+=" <tileloading></tileloading>"));return a};function GQ(){ev.call(this);this.aa=!1;this.l=new Fh(this.ZJ,50,this)}w(GQ,ev);g=GQ.prototype;g.J=function(){this.l.dispose();GQ.C.J.call(this)};g.getState=function(){var a=this.na();return a&&0!==a.length?GQ.C.getState.call(this):"on"};
g.Ie=function(a){var b=this.W(),c=null,d=xQ.s();a!==b&&b&&(c=b.N(),yf(c,"addfeature",this.Rw,this),yf(c,"removefeature",this.Tw,this),d.M("propertychange",this.Zx,!1,this),this.Bc(null));GQ.C.Ie.call(this,a);a!==b&&a&&(c=a.N(),H(c,"addfeature",this.Rw,this),H(c,"removefeature",this.Tw,this),d.H("propertychange",this.Zx,!1,this),a=JG(d).map(HQ),c=c.La().filter(function(a){return!d.contains(a)&&!IQ(a)}).map(HQ),c=a.concat(c).filter($u),c.sort(Ina),this.Bc(c))};
g.Zx=function(a){var b=a.o;a=a.j;"add"===a||"add/edit"===a?this.cc(b):"remove"===a&&this.Bb(b)};g.Rw=function(a){this.cc(a.feature)};g.cc=function(a){if(a&&!IQ(a)){var b=!1,c=this.Wj[""+a.D()]||null;if(c instanceof PP)c.Bj(a),b=!0;else if(c instanceof sQ)c.Lf(a),b=!0;else if(c&&this.removeChild(c),c=HQ(a))this.R(c),b=!0;b&&this.l.start()}};g.ZJ=function(){var a=this.na();a&&(a.sort(Ina),this.dispatchEvent(new K("children",a,null)))};
function Ina(a,b){if(a instanceof RP&&!(b instanceof RP))return-1;if(!(a instanceof RP)&&b instanceof RP)return 1;var c=Mb(a.ba()||"",b.ba()||"");0===c&&(c=Mb(a.D(),b.D()));return c}function HQ(a){if(!IQ(a)){var b=xQ.s().contains(a)?new RP(a):new sQ(a);b.ga(""+a.D());return b}return null}g.Tw=function(a){this.Bb(a.feature)};g.Bb=function(a){var b=xQ.s();!a||IQ(a)||b.contains(a)||(a=this.Wj[""+a.D()]||null)&&this.removeChild(a)};function IQ(a){a=a.get("_node");return!(void 0===a||a)};function JQ(a){Vz.call(this,a);N.H(vK,this.g,!1,this)}w(JQ,Vz);JQ.prototype.Rp=function(){var a=new GQ;a.collapsed=!0;a.Ie(this);return a};JQ.prototype.D=function(){return"draw"};JQ.prototype.g=function(a){a=a.getContext();if(kg(a.feature,"ol.Feature")){a=a.feature;var b=this.N();b&&b.Ad(a.D())===a&&b.Bb(a)}};function KQ(a){a=a?a:{};var b=document.createElement("DIV");b.className=void 0!==a.className?a.className:"ol-mouse-position";FN.call(this,{element:b,render:a.render?a.render:Jna,target:a.target});H(this,Jf(LQ),this.vF,this);a.coordinateFormat&&this.set(MQ,a.coordinateFormat);a.projection&&this.co(a.projection);this.K=void 0!==a.undefinedHTML?a.undefinedHTML:"";this.G=b.innerHTML;this.l=this.A=this.u=null}I(KQ,FN);
function Jna(a){a=a.frameState;a?this.u!=a.viewState.projection&&(this.u=a.viewState.projection,this.A=null):this.u=null;this.Fl(this.l)}g=KQ.prototype;g.vF=function(){this.A=null};g.Ra=function(){return this.get(LQ)};g.dj=function(a){this.l=Yr(this.X(),a);this.Fl(this.l)};g.hw=function(){this.Fl(null);this.l=null};g.setMap=function(a){FN.prototype.setMap.call(this,a);a&&(a=a.g,this.o.push(H(a,"mousemove",this.dj,this),H(a,"mouseout",this.hw,this)))};g.co=function(a){this.set(LQ,Cl(a))};
g.Fl=function(a){var b=this.K;if(a&&this.u){if(!this.A){var c=this.Ra();this.A=c?Dl(this.u,c):Pl}if(a=this.X().getCoordinateFromPixel(a))this.A(a,a),b=(b=this.get(MQ))?b(a):a.toString()}this.G&&b==this.G||(this.G=this.element.innerHTML=b)};var LQ="projection",MQ="coordinateFormat";var NQ=null;function Kna(a){if("success"===a.type){var b=cof2Obj(a.target.g);NQ=geoMagFactory(b)}z(a.target)}function Lna(a,b,c){if("magnetic"==M.get("bearing.type","trueNorth")&&NQ){a:{if(NQ&&(b=Ml(b,S))){c=NQ(b[1],b[0],3.28084*(b[2]||0),c);break a}c={}}a-=c.dec}return 0>a?360+a:a}function Mna(a,b){b=void 0!==b?b:5;var c="trueNorth"==M.get("bearing.type","trueNorth")?"T":"M";return a.toFixed(null!=b?b:3)+"\u00b0 "+c};function Nna(){uo.call(this);this.Da("Location Format");this.fb("Set Your Location Format");this.vb(["Latitude","Longitude"]);this.yc("fa fa-location-arrow");this.ld="location-setting"}w(Nna,uo);Q.directive("locationSetting",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/config/locationsettings.html",controller:OQ,controllerAs:"locSet"}}]);
function OQ(a){this.v=a;M.H("locationFormat",this.g,!1,this);this.format=M.get("locationFormat","deg");this.v.$watch("locSet.format",this.update.bind(this));this.v.$on("$destroy",this.j.bind(this))}OQ.$inject=["$scope"];OQ.prototype.j=function(){M.M("locationFormat",this.g,!1,this)};OQ.prototype.g=function(a){a&&"string"==typeof a.l&&a.l!==a.u&&(this.format=a.l,R(this.v))};OQ.prototype.update=function(a,b){M&&a&&b&&a!==b&&M.set("locationFormat",a)};OQ.prototype.update=OQ.prototype.update;function PQ(a){a=a||{};a.undefinedHTML="No coordinate";KQ.call(this,a);this.Lc="deg";this.j=Ona;this.g=null;a&&a.WO&&(M.H("locationFormat",this.wy,!1,this),this.Lc=M.get("locationFormat","deg"));QQ(this,this.Lc);this.B=null;this.element&&(this.B=Yd(this.element,"click",this.mJ,!1,this));au.s().H("propertychange",this.Ix,!1,this);M.H("bearing.type",this.vy,!1,this)}w(PQ,KQ);
var Ona={deg:function(a){if(!a)return"No coordinate";var b=dq(Vo(a[0]),!0,5);a=dq(a[1],!1,5);10>b.length&&(b="+"+b);9>a.length&&(a="+"+a);return a+", "+b+" (DD)"},dms:function(a){return(eq(a[1],!1,!1)+" "+eq(Vo(a[0]),!0,!1)+" (DMS)").replace(/\u00b0/g,"&deg;")},ddm:function(a){return(fq(a[1],!1,!1)+" "+fq(Vo(a[0]),!0,!1)+" (DDM)").replace(/\u00b0/g,"&deg;")},mgrs:function(a){return osasm.toMGRS(a)+" (MGRS)"}};g=PQ.prototype;
g.J=function(){M.M("locationFormat",this.wy,!1,this);this.B&&(ee(this.B),this.B=null);au.s().M("propertychange",this.Ix,!1,this);M.M("bearing.type",this.vy,!1,this);PQ.C.J.call(this)};g.wy=function(a){a&&"string"==typeof a.l&&QQ(this,a.l)};g.Ix=function(){QQ(this,this.Lc)};function QQ(a,b){b in a.j||(b="deg");a.set(MQ,a.j[b]);b!==a.Lc&&(a.Lc=b,-1<ic(zda).indexOf(a.Lc)&&M.set("locationFormat",a.Lc));a.g&&PQ.C.dj.call(a,a.g)}g.dj=function(a){PQ.C.dj.call(this,a);this.g=a};
g.Fl=function(a){var b=this.X();b&&0>=zs(T(b))[1]&&PQ.C.Fl.call(this,a)};g.hw=function(){};g.mJ=function(){var a=jc(this.j),b=a.indexOf(this.Lc);b>a.length&&(b=0);QQ(this,a[b+1]);this.g&&PQ.C.dj.call(this,this.g)};g.vy=function(){this.g&&this.dj(this.g)};g.ub=function(){return this.element};function Pna(a){this.j=S;this.g=Cl(a)}g=Pna.prototype;g.state="ready";g.nb=!1;g.title="Switch map view";g.Ba=null;function Qna(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.j?a.g?!0:(a.state="error",a.Ba="New projection is not defined",!1):(a.state="error",a.Ba="Old projection is not defined",!1)}
g.Fa=function(){if(Qna(this)){this.state="executing";var a=L.s(),b=Rna(this.g);if(a.ha){var c=T(a.ha);c&&yf(c,"propertychange",a.en,a);a.ha.set("view",b);b&&H(b,"propertychange",a.en,a)}this.state="success";return!0}return!1};function Rna(a){var b=T(L.s().X()),c=rs(b);c&&(c=Ll(c,b.Ra(),a));if(b=b.bb())var d=Rn(b,S);S=a;lm(S,42,[512,512]);Tn=Sn(25,S);Un=Sn(2,S);M.set("baseProjection",S.Rb);c&&!Sk(S.Y(),c)&&(d=c=void 0);return new ps({projection:S,center:c||[0,0],zoom:d||3,minZoom:2,maxZoom:25})}
g.Db=function(){this.state="reverting";var a=L.s().X(),b=Rna(this.j);a.set("view",b);this.state="ready";return!0};function RQ(a,b){this.source=a;this.target=b}g=RQ.prototype;g.state="ready";g.nb=!1;g.title="Transform all vectors";g.Ba=null;function Sna(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.source?a.target?!0:(a.state="error",a.Ba="Target projection is not defined",!1):(a.state="error",a.Ba="Source projection is not defined",!1)}g.Fa=function(){if(Sna(this)){this.state="executing";var a=Cl(this.source),b=Cl(this.target);a&&b&&this.transform(a,b);this.state="success";return!0}return!1};
g.transform=function(a,b){var c=Dg(L.s());a=Tna.bind(null,a,b);b=0;for(var d=c.length;b<d;b++){var e=c[b];if(e instanceof iu&&(e=e.N())){var f=e.La();if(f.length){e.clear(!0);for(var h=[],k=0,l=f.length;k<l;k++){var m=f[k].Z();if(m){h.push(m);var n=f[k].get("_originalGeometry");n!==m&&h.push(n)}h.push(f[k].get("ellipse"));h.push(f[k].get("lineOfBearing"));if(m=f[k].Ib()){q(m)||(m=[m]);n=0;for(var p=m.length;n<p;n++)h.push(m[n].Z())}}h.forEach(a);e.zc(f)}}}};
function Tna(a,b,c){c&&c instanceof yo&&(c.transform(a,"EPSG:4326"),kq(c),c.transform("EPSG:4326",b))}g.Db=function(){this.state="reverting";var a=Cl(this.source),b=Cl(this.target);a&&b&&this.transform(b,a);this.state="ready";return!0};var SQ=!0,TQ=null;
function Una(a){var b=UQ.s();if(!a.title||0===a.title.indexOf("Switch projection"))return!0;if(a instanceof ZB){var c=a.nf,d=!TQ;d&&(TQ=a);a=!0;for(var e=0,f=c.length;e<f&&a;e++)a=Una(c[e]);d&&(TQ=null);return a}c=null;a instanceof fM?c=a.g:a instanceof rM&&(a=a.Ka(),a instanceof LE&&(c=lM(a)));var h=!0;c&&(c=q(c)?c:[c],c.forEach(function(a){var c=a.projections||[];!c.length&&a.projection&&c.push(a.projection);if(c.length){var d=S;e=0;for(f=c.length;e<f;e++){var k=Cl(c[e]);if(k&&(SQ||Nl(d,k))){h=
!0;return}}b.start(c[0]);b.o.push(a);h=!1}}));return h}function VQ(){this.l=new Fh(this.j,500,this);this.g=[]}xa(VQ);VQ.prototype.j=function(){var a=1<this.g.length;a="The tile layer"+(a?"s ":" ")+this.g.join(", ")+(a?" are":" is")+" being locally re-projected because the remote services do not support the current projection.";rj(qj.s(),a,Rh);this.g.length=0};function UQ(){C.call(this);this.u=new Fh(this.eN,200,this);this.l=[];this.o=[];this.g=this.j=null}w(UQ,C);xa(UQ);g=UQ.prototype;
g.start=function(a){this.j||(this.j=S);!this.g&&(a=Cl(a))&&(this.g=a);this.j&&this.g&&this.u.start()};
g.eN=function(){var a=Vna(this),b=this.g.Rb,c="<p>You have attempted to "+(this.l.length?"enable layers that are in a different projection":"change projections")+"</p><ul><li>Current Projection: "+this.j.Rb+"</li><li>New Projection: "+b+"</li></ul>";c+="<p>Switching to the new projection will cause the following actions:</p>";var d=a.add.slice();d=[{title:"removed",layers:a.remove},{title:"added",layers:d},{title:"reconfigured",layers:a.hl}];for(var e=0,f=d.length;e<f;e++){var h=d[e].title,k=d[e].layers;
k.length&&(k=k.map(Wna),c+="<p>These layers will be <strong>"+h+"</strong></p><ul><li>"+k.join("</li><li>")+"</li></ul>")}"EPSG:4326"!=b&&"EPSG:3857"!=b&&L.s().Qa()&&(c+="<p>The 3D view does not support the new projection. The view will be switched to 2D.</p>");gD({confirm:this.uM.bind(this,a),cancel:this.eD.bind(this),prompt:c,yesText:"Switch",yesIcon:"fa fa-exchange",windowOptions:{label:this.l.length?"Differing Projections":"Projection Change",icon:"fa fa-warning",x:"center",y:"center",width:"500",
"min-width":"300","max-width":"600",height:"auto",modal:"true",headerClass:"bg-warning u-bg-warning-text"}})};g.eD=function(){for(var a=Y,b=0,c=this.l.length;b<c;b++){var d=a.Ka(this.l[b].D());d&&d.setActive(!1);this.l[b].dispose()}this.clear()};
g.uM=function(a){var b=[];if(this.j&&this.g){var c=L.s().Qa();c&&b.push(new DP(!1,!0));WQ(a.remove,!0,b);WQ(a.hl,!0,b);b.push(new Pna(this.g));b.push(new RQ(this.j,this.g));WQ(a.hl,!1,b);WQ(a.add,!1,b);c&&b.push(new DP(c,!0));this.dispatchEvent(new Xna(b));a=OE.s();c=new TP;c.title="Switch projection from "+this.j.Rb+" to "+this.g.Rb;c.bc(b);AE(a,c)}this.clear()};
function WQ(a,b,c){var d=[];b||a.reverse();for(var e=0,f=a.length;e<f;e++){var h=b?new gM(a[e]):new fM(a[e]);d.push(h)}d.length&&(h=new TP,h.bc(d),c.push(h))}g.clear=function(){this.l.length=0;this.o.length=0;this.g=this.j=null};function Wna(a){return a.title}
function Vna(a){for(var b=Dg(L.s()),c={remove:[],gT:[],hl:[],add:a.l.map(function(a){return a.Va()}).concat(a.o)},d=b.length;d--;){var e=b[d],f=e.Va();if(e instanceof zH&&F(e,"os.layer.ILayer"))if(e=f.projections||[],!e.length&&f.projection&&e.push(f.projection),e.length){for(var h=!1,k=0,l=e.length;k<l;k++){var m=Cl(e[k]);if(m&&(SQ||Nl(m,a.g))){c.hl.push(f);h=!0;break}}h||c.remove.push(f)}else c.hl.push(f)}a.dispatchEvent(new Yna(c));return c}function Yna(a){A.call(this,"load");this.layers=a}
w(Yna,A);function Xna(a){A.call(this,"submit");this.l=a}w(Xna,A);var Zna={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",19:"pause",20:"caps-lock",27:"esc",32:"space",33:"pg-up",34:"pg-down",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"delete",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:"semicolon",61:"equals",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",
93:"context",96:"num-0",97:"num-1",98:"num-2",99:"num-3",100:"num-4",101:"num-5",102:"num-6",103:"num-7",104:"num-8",105:"num-9",106:"num-multiply",107:"num-plus",109:"num-minus",110:"num-period",111:"num-division",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",186:"semicolon",187:"equals",189:"dash",188:",",190:".",191:"/",192:"`",219:"open-square-bracket",220:"\\",221:"close-square-bracket",222:"single-quote",224:"win"};Q.directive("controlshelp",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/help/controls.html",controller:XQ,controllerAs:"controlsHelp"}}]);function XQ(){var a=YQ.s().g;wb(a,function(a,b){return a.order>b.order?1:a.order<b.order?-1:0});var b=a.length/2+1;this.controls={left:tb(a,0,b),right:tb(a,b,a.length)}}XQ.$inject=["$scope"];XQ.prototype.getKey=function(a){return 91===a&&Bi()?"Command":ac(Zna[a])};XQ.prototype.getKey=XQ.prototype.getKey;
XQ.prototype.rE=function(a){return(a=$na[a])?a:null};XQ.prototype.getMouse=XQ.prototype.rE;XQ.prototype.Ae=function(a){return ZQ[a]?ZQ[a].font:null};XQ.prototype.getFont=XQ.prototype.Ae;XQ.prototype.lE=function(a){return ZQ[a]?ZQ[a]["class"]:null};XQ.prototype.getFontClass=XQ.prototype.lE;function YQ(){this.g=[]}xa(YQ);
var $na={LEFT_MOUSE:"v1541734487/images/MouseLeft.png",MIDDLE_MOUSE:"v1541734487/images/MouseMiddle.png",RIGHT_MOUSE:"v1541734487/images/MouseRight.png"},ZQ={HORIZONTAL:{font:"fa fa-arrows-h","class":"control-drag"},VERTICAL:{font:"fa fa-arrows-v","class":"control-drag"},ALL:{font:"fa fa-arrows","class":"control-drag"},LEFT:{font:"fa fa-long-arrow-left","class":"control-key"},RIGHT:{font:"fa fa-long-arrow-right","class":"control-key"},UP:{font:"fa fa-long-arrow-up","class":"control-key"},DOWN:{font:"fa fa-long-arrow-down",
"class":"control-key"}};function $Q(a,b,c,d,e,f){var h=eb(a.g,function(a){return a.section==b});h||(h={section:b,order:c,controls:[]},a.g.push(h));h.controls.push({text:d,keys:e,other:f})};Q.directive("webglperfcaveat",[function(){return{restrict:"E",templateUrl:"v1541734487/views/help/webglperfcaveat.html"}}]);Q.directive("webglsupport",[function(){return{restrict:"E",replace:!0,link:aoa,templateUrl:"v1541734487/views/help/webglsupport.html"}}]);function aoa(a){a.$emit("window.ready")}
function boa(){var a={hideCancel:!0};a.appName=Wh("the application");a.supportText=Xh("your system administrator");od&&11==xd?a.showIEHelp=!0:qd&&Bd(10)?a.showFFHelp=!0:rd&&Bd(28)&&(a.showGCHelp=!0);gD({prompt:"<webglsupport></webglsupport>",windowOptions:{label:"3D Globe Not Supported",headerClass:"bg-warning u-bg-warning-text",icon:"fa fa-frown-o",x:"center",y:"center",width:525,"min-width":300,"max-width":1E3,height:"auto","min-height":200,"max-height":1E3,modal:!0}},a)};Q.directive("copyPosition",[function(){return{restrict:"AE",replace:!0,scope:{value:"="},templateUrl:"v1541734487/views/plugin/position/positionplugin.html",controller:aR,controllerAs:"copyPosition"}}]);function aR(a,b){x.call(this);this.L=b;this.g=new ft(document);this.g.H("key",this.j,!1,this);a.$emit("window.ready");a.$on("$destroy",this.l.bind(this))}w(aR,x);aR.$inject=["$scope","$element"];aR.prototype.l=function(){z(this.g);this.L=null};aR.prototype.close=function(){kx(this.L)};
aR.prototype.j=function(a){13==a.keyCode&&this.close()};function L(){C.call(this);this.ha=null;this.g=void 0;this.o=!1;this.A=this.l=void 0;this.K=new Fh(this.CF,500,this);this.G=this.B=this.j=this.u=null;this.I=new bw;this.O=!1;N.H("zoom",this.Px,!1,this);N.H("resetView",this.Tn,!1,this);N.H("resetRotation",this.nl,!1,this);N.H("toggleView",this.Hx,!1,this);N.H("removeLayer",this.wx,!1,this);N.H("map:render",this.render,!1,this);N.H("map:renderSync",this.renderSync,!1,this);M.H("bgColor",this.Ax,!1,this)}w(L,C);xa(L);
(function(){for(var a=["ms","moz","webkit","o"],b=0,c;c=a[b]&&!ra.requestAnimationFrame;++b)ra.requestAnimationFrame=ra[c+"RequestAnimationFrame"],ra.cancelAnimationFrame=ra[c+"CancelAnimationFrame"]||ra[c+"CancelRequestAnimationFrame"];if(!ra.requestAnimationFrame){var d=0;ra.requestAnimationFrame=function(a){var b=(new Date).getTime(),c=Math.max(0,16-(b-d));d=b+c;return ra.setTimeout(function(){a(b+c)},c)};ra.cancelAnimationFrame||(ra.cancelAnimationFrame=function(a){clearTimeout(a)})}})();
var bR=E.V("os.MapContainer");g=L.prototype;
g.J=function(){z(this.I);this.I=null;z(this.K);this.K=null;z(this.u);this.u=null;if(this.ha){var a=T(this.ha);a&&yf(a,"propertychange",this.en,this);this.ha.dispose();this.ha=null}N.M("zoom",this.Px,!1,this);N.M("resetView",this.Tn,!1,this);N.M("resetRotation",this.nl,!1,this);N.M("toggleView",this.Hx,!1,this);N.M("removeLayer",this.wx,!1,this);N.M("map:render",this.render,!1,this);N.M("map:renderSync",this.renderSync,!1,this);M.M("bgColor",this.Ax,!1,this);L.C.J.call(this)};
function Oha(a,b){if(a.g){if(a.g.tg()){E.error(bR,"A WebGL renderer has already been set and initialized on the map.");return}a.g.setMap(void 0)}a.g=b;a.g&&a.g.setMap(a.ha)}function yP(a){return a.g?a.g.mz():void 0}g.Ax=function(a){switch(a.type){case "bgColor":a=a.l,df(a)&&coa(a)}};function RB(a){return a.ha?a.ha.Y():Ok()}g.en=function(){this.K.start()};
g.CF=function(){if("last"==M.get("os.map.cameraMode"))try{var a=Kq(this);M.set("os.map.cameraState",JSON.stringify(a))}catch(b){E.error(bR,"Error persisting camera state:",b)}VB();this.dispatchEvent("map:viewChange")};g.render=function(){var a=this.X();a&&a.render()};g.renderSync=function(){var a=this.X();a&&a.renderSync()};g.lf=function(){this.ha&&(xf(this.ha,"postrender",function(){var a=this.ha;Ck(function(){a.lf();N.dispatchEvent("map:glRepaint")})},this),this.ha.setSize([0,0]),N.dispatchEvent("map:glRepaint"))};
g.X=function(){return this.ha};function doa(a){return a instanceof zH}function cR(a){return a instanceof iu&&!eoa(a)}function eoa(a){return a instanceof Vv||a instanceof Vz&&"Image"===a.Sc()}function foa(){var a=L.s();a.Qa()?(a=yP(a))&&a.nz():(a=(a=a.X())?T(a):void 0)&&vs(a)}
function dR(a,b){var c=a.X();if(c){O(P.s(),"map.features.flyTo",1);c=T(c);var d=b.destination||b.center||rs(c),e=b.duration||1E3;if(a.Qa()){if(c=yP(a))void 0===b.altitude&&void 0!==b.zoom&&(b.altitude=c.Rf(Jq(a,b.zoom),Of(d[1])),delete b.zoom),c.Cn(b)}else d={center:d,duration:e},void 0!==b.zoom?d.zoom=me(b.zoom,2,25):b.positionCamera||void 0===b.range?void 0!==b.altitude&&(a=Wn(a.X(),b.altitude,0),d.resolution=me(a,Tn,Un)):(a=Wn(a.X(),b.range,0),d.resolution=me(a,Tn,Un)),"smooth"===b.flightMode&&
(d.easing=ns),c.animate(d)}}
g.Pi=function(a,b,c){if(a&&-1!=a.indexOf(Infinity)||-1!=a.indexOf(-Infinity))E.ta(bR,"Attempted to fly to infinite extent.");else{var d=this.X();if(d){O(P.s(),"map.features.flyToExtent",1);var e=T(d);if(a)if(a=a.slice(),b&&0<b?hl(a,b):.025>bl(a)&&.025>cl(a)&&(a=Qk(a,.025)),this.Qa()){b=yP(this);var f=Xn(d);b&&f&&(d=dl(a),a=Bs(e,a,f),null!=c&&(c=Math.min(c,Lq(this,a)),a=Jq(this,c)),c=b.Rf(a,0),b.Cn({center:d,altitude:c,duration:1E3}))}else b=Ml(rs(e).slice(),S),a=Ql(a,S,"EPSG:4326"),a[0]=Vo(a[0],b[0]-
180,b[0]+180),a[2]=Vo(a[2],b[0]-180,b[0]+180),a[2]<a[0]&&(a[2]+=360),a=Ql(a,"EPSG:4326",S),Cs(e,a,{duration:1E3,maxZoom:c,constrainResolution:!0})}}};g.Px=function(a){try{var b=a.getContext(),c=null!=b.feature?void 0:-1;q(b)||(b=[b]);var d=b.reduce(Bea,Ok());al(d)||AE(BE,new BP(d,void 0,c))}catch(e){E.error(bR,"Zoom action failed:",e)}};
g.Tn=function(){var a=T(this.X());us(a,0);Sq(a,Pn);Tq(a,a.constrainResolution(a.o,3-a.u,0));this.Qa()&&(a=yP(this))&&(a.tl(0),a.wg());O(P.s(),"map.features.resetView",1)};function goa(a){a.Qa()&&(a=yP(a))&&a.tl(0);O(P.s(),"map.features.resetTilt",1)}function hoa(a){a.Qa()?(a=yP(a))&&a.et(0):us(T(a.X()),0);O(P.s(),"map.features.resetRoll",1)}g.nl=function(){goa(this);hoa(this);O(P.s(),"map.features.resetRotation",1)};g.QD=function(){document.activeElement&&document.activeElement!==document.body&&document.activeElement.blur()};
g.init=function(){for(var a=Nn(),b=0,c=a.length;b<c;b++){var d=a[b].code,e=a[b].proj4;if(d&&e&&(proj4.defs(d,e),e=Cl(d))){var f=e,h=!!a[b].isGlobal;f.j=h;f.g=!(!h||!f.l);(f=a[b].extent)&&e.Cc(f);if(f=a[b].worldExtent)e.Fo=f;Hl(vl,[e],Ol("EPSG:4326",d),Ol(d,"EPSG:4326"));Hl(ql,[e],Ol("EPSG:3857",d),Ol(d,"EPSG:3857"))}}OE.s().G.push(Una);Ls(M.get("interpolation"));this.j=new JQ({source:new Su});this.j.Ta("Drawing Layer");this.j.ga("draw");this.j.Ec(Wh()||null);this.j.zb(Az(wz.s(),Sy));this.j.he("Reference Layers");
this.j.ve("");this.j.Ag(!1);this.j.Nf("");this.j.zg("");this.j.P=!0;this.j.sl("draw");this.j.Kf=wa;a=new Uv;a.l=-2;a.j=doa;a.he("Tile Layers");b=new Uv({layers:[this.j]});b.j=cR;b.he("Feature Layers");c=new Uv({hidden:!0});c.j=eoa;c.he("Image");d=new Uv;d.l=100;d.he("Reference Layers");S=Cl(M.get("baseProjection",S.Rb));lm(S,42,[512,512]);Tn=Sn(25,S);Un=Sn(2,S);SQ=M.get("enableReprojection",!0);e=new ps({projection:S,center:Pn,zoom:3,minZoom:2,maxZoom:25});this.ha=new xP({controls:this.B?this.B():
void 0,interactions:this.G?this.G():void 0,layers:new ju([a,b,d,c]),loadTilesWhileAnimating:!0,renderer:"canvas",target:"map-container",view:e,keyboardEventTarget:document});H(e,"propertychange",this.en,this);window.pfc=this.ha.getPixelFromCoordinate.bind(this.ha);window.cfp=this.ha.getCoordinateFromPixel.bind(this.ha);window.fte=this.Pi.bind(this);this.I.H("resize",this.lf,!1,this);Dc(this.lf,this);a=this.X().g;Yd(a,"contextmenu",GD,!0);Yd(a,"click",this.QD,!1,this);a=M.get("bgColor","#000000");
coa(a);this.dispatchEvent("map:ready");ioa(this);a=YQ.s();$Q(a,"General Map Controls",1,"Draw Geometry",[16,"+"],["LEFT_MOUSE","+","ALL"]);$Q(a,"General Map Controls",1,"Context Menu",null,["RIGHT_MOUSE"]);$Q(a,"General Map Controls",1,"Reset View",[86]);$Q(a,"General Map Controls",1,"Reset Rotation",[82]);$Q(a,"General Map Controls",1,"Copy Coordinates",[190]);$Q(a,"Map Movement Controls",2,"Pan View",null,["LEFT_MOUSE","+","ALL"]);$Q(a,"Map Movement Controls",2,"Pan View",null,"LEFT or RIGHT or UP or DOWN".split(" "));
$Q(a,"Map Zoom Controls",3,"Zoom to Box",[17,"+"],["LEFT_MOUSE","+","ALL"]);$Q(a,"Map Zoom Controls",3,"Smooth Zoom In/Out",[17,"+"],["RIGHT_MOUSE","+","VERTICAL"]);$Q(a,"Map Zoom Controls",3,"Zoom About Mouse",null,["Mouse Wheel"]);$Q(a,"Map Zoom Controls",3,"Zoom In",null,["Double Left Click"]);$Q(a,"Map Zoom Controls",3,"Zoom Out",[17,"+"],["Double Left Click"]);$Q(a,"Map Zoom Controls",3,"Large Zoom In/Out",[33,"or",34]);$Q(a,"Map Zoom Controls",3,"Zoom In/Out",null,"+ / = or - / _".split(" "));
this.vc()&&!eR(this)&&(a=YQ.s(),$Q(a,"3D Controls",4,"Tilt Globe",null,["MIDDLE_MOUSE","or","RIGHT_MOUSE","+","VERTICAL"]),$Q(a,"3D Controls",4,"Roll Globe",null,["MIDDLE_MOUSE","or","RIGHT_MOUSE","+","HORIZONTAL"]),$Q(a,"3D Controls",4,"Tilt Globe",[16,"+"],["UP","or","DOWN"]),$Q(a,"3D Controls",4,"Roll Globe",[16,"+"],["LEFT","or","RIGHT"]),$Q(a,"3D Controls",4,"Reset Roll",[78]),$Q(a,"3D Controls",4,"Reset Tilt",[85]));Mi("pos",joa);Mi("extent",koa);Mi("extent2",loa)};
function moa(a,b){if(a=(a=a.ha?a.ha.g:void 0)?a.querySelector("canvas"):void 0)a.style.visibility=b?"":"hidden"}function ioa(a){if(Sba&&Cda){M.H("os.map.mapMode",a.KK,!1,a);var b=M.get("os.map.mapMode","3d");"3d"===b||"auto"===b?(moa(a,!1),Xc(EP(a,!0,!0),function(){moa(this,!0);noa(this)},a)):noa(a)}}function noa(a){var b=M.get("os.map.cameraState");if(b)try{b=JSON.parse(b)}catch(c){E.error(bR,"Failed restoring camera state:",c),b=void 0}b&&fR(a,b)}
g.KK=function(a){"string"===typeof a.l?(a=a.l,a="3d"===a||"auto"===a?!0:!1,a!=this.Qa()&&EP(this,a)):E.hb(bR,"Unrecognized map mode change value: "+a.l)};
g.Hx=function(){if(!this.o){var a=!this.Qa();if(a&&eR(this)){var b=M.get("webgl.performanceCaveat.preventOverride",!1)?void 0:this.qM.bind(this);b={confirmCallback:wa,cancelCallback:b||wa,hideCancel:!b,supportLink:M.get("webgl.performanceCaveat.supportLink"),yesText:"Got it!",yesIcon:"fa fa-thumbs-up",yesButtonTitle:"Cancel and continue using 2D.",yesButtonClass:"btn-primary",noText:"Use 3D",noIcon:"fa fa-warning",noButtonTitle:"Switch to 3D, but you may experience poor performance on this browser.",
noButtonClass:"btn-danger"};b.appName=Wh("the application");b.supportText=Xh("your system administrator");fx({label:"3D Globe Performance Issue",icon:"fa fa-frown-o",x:"center",y:"center",width:"425","min-width":"300","max-width":"600",height:"200","min-height":"200","max-height":"500",modal:"true"},"<confirm><webglperfcaveat></webglperfcaveat></confirm>",void 0,void 0,void 0,b)}b=S.Rb;a&&"EPSG:4326"!==b&&"EPSG:3857"!==b||(a=new DP(a),AE(OE.s(),a))}};g.qM=function(){this.O=!0;EP(this,!0)};
g.MN=function(){M.set("os.map.mapMode",this.Qa()?"3d":"2d")};function Kq(a){if(a.Qa()){var b=yP(a);if(b)return b.ra()}var c=T(a.X());b=rs(c)||Pn;"EPSG:4326"!=S&&(b=Ml(b,S),b[0]=Vo(b[0]));var d=c.bb(),e=Xn(a.X());e=Vn([e[0],e[1]],d);a=Lq(a,d,1);c=180*(ss(c)||0)/Math.PI;return{center:b,altitude:e,heading:c,roll:0,tilt:0,zoom:a}}function fR(a,b){a.u&&z(a.u);a.u=new ij(a.IN.bind(a,b));a.u.start(100,5E3)}
g.IN=function(a){try{if(this.Qa()){var b=yP(this);if(b)return b.restore(a),!0}var c=T(this.X()),d=a.zoom;if(null==d){var e=RB(this);if(Xk(e,Qn))return!1;var f=Wn(this.X(),a.altitude);if(isNaN(f))return!1;d=Lq(this,f)}var h=Kl(a.center,S);Sq(c,h);us(c,oe(a.heading));Tq(c,c.constrainResolution(c.o,d-c.u,0))}catch(k){E.error(bR,"Error restoring camera state:",k)}return!0};function gR(a,b){a.o!=b&&(a.o=b,a.dispatchEvent(new K("map:change:init3d",b)))}
function EP(a,b,c){var d=S.Rb;b=b&&("EPSG:4326"===d||"EPSG:3857"===d);if(b!=a.Qa()&&a.g&&!a.o){if(b&&a.vc()&&!eR(a)&&!a.g.tg())return gR(a,!0),a.g.Bn().then(function(){gR(this,!1);EP(this,b,c)},function(){gR(this,!1);this.l=!1;EP(this,b,c)},a);ooa(a,b);b?Eda(a.g):a.nl();a.dispatchEvent("mapmode")}a.Qa()==b||eR(a)||a.o||c||(a.l=!1,boa(),O(P.s(),"map.stats.error-webglInitFailed",1));setTimeout(a.MN.bind(a),0);return Sc()}
function ooa(a,b){if(a.g&&a.g.tg()&&a.l){a.g.Za(b);var c=b?"map.features.mapMode-3d":"map.features.mapMode-2d";O(P.s(),c,1);a.dispatchEvent(new K("map:change:view3d",b))}}g.Qa=function(){return!!this.g&&this.g.kc()};
g.vc=function(){void 0==this.l&&((this.l=Modernizr.webgl?od?Modernizr.webglextensions.ANGLE_instanced_arrays&&Modernizr.webglextensions.EXT_texture_filter_anisotropic&&Modernizr.webglextensions.OES_element_index_uint&&Modernizr.webglextensions.OES_texture_float&&Modernizr.webglextensions.OES_texture_float_linear&&Modernizr.webglextensions.WEBGL_compressed_texture_s3tc:!0:!1)||O(P.s(),"map.stats.error-webglUnsupported",1));return this.l&&null!=this.g};
function eR(a){if(a.O)return!1;void 0==a.A&&(a.A=M.get("webgl.performanceCaveat.failIf",!1)?$ia():!1,a.A&&O(P.s(),"map.stats.error-webglPerfCaveat",1));return a.A}function coa(a){$("#map-container").css("background",a)}
function eM(a,b){var c;if(c=a.ha&&b instanceof Sf)a:{if(c=b.N()){c=c.Ra();var d=S;if(b instanceof zH&&c&&d&&!Nl(c,d))if(SQ)c=VQ.s(),d=b.S(),c.g.push(d),c.l.start();else{c=UQ.s();c.j||(c.j=S);c.g||(c.g=b.N().Ra());-1===c.l.indexOf(b)&&c.l.push(b);c.u.start();c=!1;break a}}c=!0}if(c){d=Ov(a.ha);for(var e=0,f=d.getLength();e<f;e++)if(c=d.item(e),c instanceof Uv){var h=c.j;if(h&&h(b)){Pv(c).push(b);d=new Tv("addLayer",b);a.dispatchEvent(d);N.dispatchEvent(d);poa(a,!0);b instanceof hR&&(a=Ww.s())&&"Reference Layers"!=
c.Sc()&&$w(a,"v1541734487/onboarding/loaddata.json");a=Kv.s();if("Feature Layers"==c.Sc())a:{if(d=void 0,c=a,b=b.D(),c.g){for(d in c.g){h=c.g[d];e=!1;for(f=0;f<h.length;f++)if(h[f].id==b){e=!0;break}if(e){c.update();break a}}var k=Ov(c.X()).g;h=void 0;f=0;for(var l=k.length;f<l;f++){var m=k[f];var n=c.g[m.Sc()||""]||[];var p=Pv(m).g,r=0;for(d=p.length;r<d;r++){var u=p[r];e=!1;for(var v=0,y=n.length;v<y;v++)if(n[v].id==u.D()){e=!0;n[v].time=Ia();break}e||n.push({id:u.D(),time:Ia()});if(u.D()==b){h=
m;break}}if(null!=h)break}if(null!=h){e=void 0;f=Pv(h).g;for(d=f.length-2;0<=d;d--)if(h=f[d],!h.P){e=h.D();break}void 0===e?(d=f[0].D(),Qv(c,b,d,!1)):Qv(c,b,e,!0);c.update()}}}else a.update();a.save();return}}E.hb(bR,"No layer group was found to support "+b)}}function poa(a,b){b?O(P.s(),"map.features.addLayer",1):O(P.s(),"map.features.removeLayer",1);O(P.s(),"map.features.layerCount",Ov(a.ha).getLength())}
function qoa(){var a=L.s(),b=new roa;if(a.ha){a=Ov(a.ha);var c=iaa(a.g,function(a){return xb(b.l,a.l)});0>c&&(c=Math.abs(c+1),nu(a,c,b))}}g.removeLayer=function(a,b){b=null!=b?b:!0;a="string"===typeof a?this.W(a):a;if(a instanceof Sf){var c=!0;try{c=a.De()}catch(d){}c&&(a=this.W(a,null,!0))&&(c=new Tv("removeLayer",a),this.dispatchEvent(c),N.dispatchEvent(c),b&&a.dispose(),poa(this,!1))}};
g.wx=function(a){if(a&&a.layer&&(a=this.W(a.layer))){var b=Y.Ka(a.D());if(b)if(b.isActive())var c=new WM(b);else E.hb(bR,'Descriptor for removed layer "'+a.S()+'" is already inactive.'),this.removeLayer(a);var d;if(!c&&(d=a.Va())&&"id"in d){c=new gM(d);try{c.title+=' "'+a.S()+'"'}catch(e){}}c?d&&d.loadOnce?c.Fa():AE(OE.s(),c):this.removeLayer(a)}};
g.cc=function(a,b){if(void 0!=a&&(O(P.s(),"map.features.addFeature",1),a instanceof hq||(a=VP(a)),"object"===typeof b&&(b=b instanceof Object?b:fi(b),a.set("_style",b),sz(a)),b=this.W("draw"))&&(a.D()||a.ga(J(a)),a.set("sourceId",b.D()),b=b.N(),b instanceof Su))return Ps(a),b.cc(a),a};L.prototype.addFeature=L.prototype.cc;L.prototype.zc=function(a,b){var c=[];O(P.s(),"map.features.addFeatures",1);for(var d=0,e=a.length;d<e;d++)this.cc(a[d],b)&&c.push(a[d]);return c};L.prototype.addFeatures=L.prototype.zc;
L.prototype.Bb=function(a,b){if(null!=a){O(P.s(),"map.features.removeFeature",1);var c=this.W("draw").N();a="string"===typeof a||"number"===typeof a?c.Ad(a):c.Ad(a.D()+"");null!=a&&(c.Bb(a),b&&a.dispose())}};L.prototype.removeFeature=L.prototype.Bb;function Py(a,b){return null!=b&&(a=a.W("draw"))?(a=a.N(),!("string"===typeof b||"number"===typeof b?!a.Ad(b):!a.Ad(b.D()+""))):!1}L.prototype.Ge=function(a,b){O(P.s(),"map.features.removeFeatures",1);for(var c=0,d=a.length;c<d;c++)this.Bb(a[c],b)};
L.prototype.removeFeatures=L.prototype.Ge;L.prototype.La=function(){return this.j?this.j.N().La():[]};function Dg(a){var b=[];if(a.ha){a=Ov(a.ha).g;for(var c=0,d=a.length;c<d;c++)kg(a[c],"ol.layer.Group")?b=b.concat(Pv(a[c]).g):b.push(a[c])}b.reverse();return b}function YH(a,b){return Dg(a).reduce(function(a,d){return d instanceof b?a+1:a},0)}
L.prototype.W=function(a,b,c){null==c&&(c=!1);!b&&this.ha&&(b=Ov(this.ha));var d=null;if(this.ha)for(var e=0,f=b.getLength();e<f;e++){var h=b.item(e);if(h instanceof Uv)d=this.W(a,Pv(h),c);else try{if("string"===typeof a){if(h.D()==a){d=h;c&&pu(b,e);break}}else if(a===h){d=h;c&&pu(b,e);break}else if(a instanceof hq){var k=h.N();k instanceof Su&&k.Ad(a.D()||"")&&(d=h)}}catch(l){}if(d)break}return d};function Jq(a,b){a=T(a.X()).Ra();return Sn(b,a)}
function Lq(a,b,c){a=T(a.X()).Ra();return Rn(b,a,c)}function joa(a,b){(a=rs(T(L.s().X())))&&(a=Ml(a,S));return(-1<b.indexOf("a")?a[1]:a[0]).toString()}function koa(a,b){a=Ql(L.s().X().Y(),S,"EPSG:4326");return soa(a,b)}function soa(a,b){switch(b.toLowerCase()){case "north":return Math.max(a[1],a[3]).toString();case "south":return Math.min(a[1],a[3]).toString();case "east":return Math.max(a[0],a[2]).toString();case "west":return Math.min(a[0],a[2]).toString();default:return a.join(",")}}
function loa(a,b){a=L.s().X().Y();a=Ql(a,S,"EPSG:4326");a[0]=Vo(a[0]);a[2]=Vo(a[2]);return soa(a,b)}
function dna(){return new Kc(function(a,b){gD({confirm:a,cancel:b,prompt:"<p>Switching to 2D mode with the current data volume may degrade performance considerably or crash the browser. Click OK to switch to 2D, or Cancel to stay in 3D.</p><p>If you would like to switch to 2D mode safely, please consider narrowing your time range, applying filters, shrinking your query areas, or removing some feature layers.</p>",windowOptions:{label:"Feature Limit Exceeded",icon:"fa fa-warning",x:"center",y:"center",
width:"425",height:"auto",modal:"true",headerClass:"bg-warning u-bg-warning-text"}})})};Q.directive("popover",[function(){return{restrict:"AE",replace:!0,scope:{title:"=",popoverclass:"=",content:"=?",pos:"=",icon:"=?"},template:'<i ng-class="popoverctrl.icon"></i>',controller:iR,controllerAs:"popoverctrl"}}]);function iR(a,b,c){this.v=a;this.L=b;this.Na=c;this.icon="fa fa-question-circle";this.g=null;this.j();this.v.$watch("icon",this.j.bind(this));this.v.$watch("content",this.j.bind(this));this.v.$on("$destroy",this.l.bind(this))}iR.$inject=["$scope","$element","$timeout"];
iR.prototype.l=function(){this.g&&(this.g.off("mouseenter").off("mouseleave"),this.g.popover("dispose"),this.g=null);this.Na=this.L=this.v=null};
iR.prototype.j=function(){this.v.content&&(this.g&&(this.g.popover("dispose"),this.g=null),this.icon=this.v.icon?this.v.icon:"fa fa-question-circle",null!=this.v.title&&25<this.v.title.length&&(this.v.title=Pb(this.v.title,25)),this.g=this.L.popover({html:!0,placement:this.v.pos?this.v.pos:"bottom",trigger:"manual",title:this.v.title,content:this.v.content,template:'<div class="popover '+(this.v.popoverclass?this.v.popoverclass:"")+'" role="tooltip"><div class="arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',
boundary:"window",container:"body"}),this.g.on("mouseenter",function(){this.L.popover("show");$(".popover").on("mouseleave",function(){this.L.popover("hide")}.bind(this))}.bind(this)),this.g.on("mouseleave",function(){this.Na(function(){$(".popover:hover").length||this.L.popover("hide")}.bind(this))}.bind(this)));R(this.v)};function toa(){uo.call(this);this.Da("Bearing");vo(this);this.fb("Choose whether bearings are displayed with as true north or magnetic north");this.vb(["bearing","north","true","magnetic"]);this.yc("fa fa-compass");this.ld="bearing-setting";if(!NQ){var a="v1541734487/"+M.get("bearing.cofUrl");a=new Ni(a);a.Ua("success",Kna);a.Ua("error",Kna);a.load()}}w(toa,uo);
Q.directive("bearingSetting",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/config/bearingsettings.html",controller:jR,controllerAs:"ctrl"}}]);function jR(a){this.v=a;M.H("bearing.type",this.g,!1,this);this.format=M.get("bearing.type","trueNorth");a=M.get("bearing.cofVersion","2015-2020");var b=M.get("bearing.magneticNorthHelpUrl");this.v.cofVersion=a;this.v.helpUrl=b;this.v.$watch("ctrl.format",t(this.update,this));this.v.$on("$destroy",t(this.j,this))}jR.$inject=["$scope"];
jR.prototype.j=function(){M.M("bearing.type",this.g,!1,this)};jR.prototype.g=function(a){"string"==typeof a.l&&a.l!==a.u&&(this.format=a.l,R(this.v))};jR.prototype.update=function(a,b){a&&b&&a!==b&&M.set("bearing.type",a)};jR.prototype.update=jR.prototype.update;Q.directive("checklist",[function(){return{restrict:"E",replace:!0,scope:{allowMultiple:"=",items:"=",name:"@"},templateUrl:"v1541734487/views/checklist.html",controller:kR,controllerAs:"checklist"}}]);function kR(a,b,c){this.v=a;this.L=b;this.allCheckbox=!1;c(function(){lR(this)}.bind(this));a.$watch("allowMultiple",this.dH.bind(this));a.$watch("items",this.bx.bind(this));a.$watch("items.length",this.bx.bind(this));a.$on("$destroy",this.iL.bind(this))}kR.$inject=["$scope","$element","$timeout"];
g=kR.prototype;g.iL=function(){this.L=this.v=null};g.dH=function(a,b){if(a!==b&&!a){a=!0;b=!1;for(var c=this.v.items,d=0,e=c.length;d<e;d++)c[d].enabled&&a?a=!1:c[d].enabled&&(c[d].enabled=!1,b=!0);b&&(mR(this),lR(this))}};function mR(a){if(a.v){var b="checklist:change";a.v.name&&(b+=":"+a.v.name);a.v.$emit(b)}}g.bx=function(){this.v.items&&this.v.items.sort(this.iG);lR(this)};
g.iG=function(a,b){return a.label&&b.label?a.label.localeCompare(b.label,void 0,{sensitivity:"base",numeric:!0}):xb(a.label,b.label)};g.yi=function(){if(this.v&&this.v.allowMultiple){var a=this.v.items;if(a&&0<a.length){for(var b=0,c=a.length;b<c;b++)a[b].enabled=this.allCheckbox;mR(this)}}};kR.prototype.toggleAll=kR.prototype.yi;kR.prototype.SI=function(a){if(this.v){if(this.v.allowMultiple)lR(this);else if(a.enabled)for(var b=this.v.items,c=0,d=b.length;c<d;c++)b[c]!==a&&(b[c].enabled=!1);mR(this)}};
kR.prototype.onItemChange=kR.prototype.SI;function lR(a){if(a.v){var b=!1,c=!1,d=a.v.items;if(d&&0<d.length){for(var e=0,f=d.length;e<f;e++)d[e].enabled?b=!0:c=!0;d=a.L.find(".js-checklist__all");b&&c?(d.prop("checked",!0),d.prop("indeterminate",!0),a.allCheckbox=!0):(d.prop("checked",b),d.prop("indeterminate",!1),a.allCheckbox=b)}}};Q.directive("exportoptions",[function(){return{restrict:"E",scope:{allowMultiple:"=",showLabels:"=",initSources:"&",showCount:"@"},templateUrl:"v1541734487/views/ex/exportoptions.html",controller:nR,controllerAs:"exportoptions"}}]);
function nR(a){x.call(this);this.scope=a;a.showCount="true"===a.showCount;this.count=0;this.sourceItems=[];this.useSelected=!0;for(var b=this.scope.initSources()||[],c=SB(Fy),d=0,e=c.length;d<e;d++){var f=c[d];if(this.lq(f)){if(f.yb()){var h="all"==b||gb(b,f);this.sourceItems.push(oR(f,h))}H(f,"propertychange",this.xn,this)}}this.Cg();b=Y;b.H("dataSourceAdded",this.Ry,!1,this);b.H("dataSourceRemoved",this.Sy,!1,this);this.scope.$on("checklist:change:sourcelist",this.bK.bind(this));this.scope.$watch("showLabels",
this.Cg.bind(this));a.$on("$destroy",this.dispose.bind(this))}w(nR,x);nR.$inject=["$scope"];var uoa=[LI,QI,"visible","timeFilter"],voa=[MI,OI,NI];g=nR.prototype;g.J=function(){nR.C.J.call(this);this.scope=null;var a=Y;a.M("dataSourceAdded",this.Ry,!1,this);a.M("dataSourceRemoved",this.Sy,!1,this);a=SB(Fy);for(var b=0,c=a.length;b<c;b++)yf(a[b],"propertychange",this.xn,this)};function oR(a,b){return{enabled:void 0!==b?b:!1,label:a.S(),item:a}}g.lq=function(){return!0};
g.bK=function(a){a.stopPropagation();this.Cg()};g.xn=function(a){var b=a.A||a.target;if(b){var c=pR(this,b);a=a.j;"visible"===a?b.yb()?c||(this.sourceItems.push(oR(b,this.scope.allowMultiple)),this.Cg()):pR(this,b,!0):"label"===a?this.Cg():c&&c.enabled&&(gb(uoa,a)?this.Cg():this.useSelected&&gb(voa,a)&&this.Cg())}};g.Ry=function(a){(a=a.source)&&this.lq(a)&&(H(a,"propertychange",this.xn,this),!pR(this,a)&&a.yb()&&(this.sourceItems.push(oR(a,this.scope.allowMultiple)),R(this.scope)))};
g.Sy=function(a){if(a=a.source)yf(a,"propertychange",this.xn,this),pR(this,a,!0)};function pR(a,b,c){if(b)for(var d=0,e=a.sourceItems.length;d<e;d++)if(a.sourceItems[d].item===b){var f=a.sourceItems[d];c&&(a.sourceItems.splice(d,1),f.enabled?a.Cg():R(a.scope));break}return f}
g.Cg=function(){this.count=0;if(this.scope){for(var a=[],b=[],c=0;c<this.sourceItems.length;c++){var d=this.sourceItems[c];d.detailText="";if(d.enabled){var e=d.item;b.push(e);var f=e.Zd();var h=f.length;if(this.useSelected){var k=e.ee.slice();e=k.length;f=0<e?k.slice():f;d.detailText="("+String(f.length);d.detailText=0<e&&e!=h?d.detailText+(" of "+h+" features)"):d.detailText+(" "+(1!=h?"features":"feature")+")")}else d.detailText="("+String(h)+" "+(1!=h?"features":"feature")+")";if(this.scope.showLabels&&
(h=[],e=d.item.D(),e=vz(wz.s(),e),e.labels&&0<f.length&&!woa(f))){for(k=0;k<e.labels.length;k++)e.labels[k].column&&h.push(e.labels[k].column);0==h.length&&h.push("None");e=Ob(h.join("/"));k=Ob("Columns that will be used for labels in the exported file: "+h.join(", "));d.detailText+='<div class="nowrap" title="'+k+'">Label'+(1<h.length?"s":"")+": "+e+"</div>"}f&&0<f.length&&(a=a.concat(f))}}this.count=a.length;this.scope.$emit("exportoptions:change",a,b);R(this.scope)}};nR.prototype.updateItems=nR.prototype.Cg;
function woa(a){return a?a.some(function(a){return!!a.get("_style")}):!1};Q.directive("bufferform",[function(){return{restrict:"E",scope:{config:"=",showSourcePicker:"=",warningMessage:"=?",initSources:"&"},templateUrl:"v1541734487/views/buffer/bufferform.html",controller:qR,controllerAs:"buffer"}}]);
function qR(a,b){nR.call(this,a);this.units=vc(Lt);this.columns=[];this.descSample=this.titleSample="";this.liveAllowed=xoa(this.scope.config);this.liveEnabled=!1;this.liveAllowed&&this.scope.config&&this.scope.config.features&&1==this.scope.config.features.length&&(this.liveEnabled=!0);this.help={distance:"Distance around selected features to create the buffer region.",outside:"Create a buffer region outside the original area.",inside:"Create a buffer region inside the original area.",title:"Custom title given to all new buffer areas.",
titleColumn:"Column used to apply titles to all new buffer areas. If a selected item doesn't have this field defined, a generic title will be given. You may also choose to apply a custom title to new areas.",description:"Description applied to all new buffer areas.",descColumn:"Column used to apply descriptions to all new buffer areas. If a selected item doesn't have this field defined, the description will be left blank. You may also choose to apply a custom description to new areas.",tags:"Comma-delimited list of tags to apply to all new buffer areas. Tags can be used to group or search areas in the Areas tab of the Layers window.",
tagsColumn:"Column used to apply tags to all new buffer areas. Tags can be used to group or search areas in the Areas tab of the Layers window.  If an item doesn't have this field defined, the tags will be left blank. You may also choose to provide your own custom tags.",units:"Unit of measure for the buffer distance."};this.g=void 0;this.j=!1;a.$on("exportoptions:change",this.l.bind(this));b(function(){a.$emit("window.ready")})}w(qR,nR);qR.$inject=["$scope","$timeout"];
qR.prototype.J=function(){qR.C.J.call(this);this.g&&(L.s().Ge(this.g),this.g=void 0)};
qR.prototype.l=function(a,b,c){a.stopPropagation();this.scope&&this.scope.config&&(a=this.scope.config,a.features&&this.scope.showSourcePicker&&(a.features.length=0,b&&0<b.length&&(a.features=a.features.concat(b))),this.columns=c&&0<c.length?c[0].getColumns().slice():[],this.columns.sort(Fx),(this.liveAllowed=xoa(this.scope.config))?(this.livePreviewContent="Shows a live preview of buffer area(s) on the map for up to "+rR+" features, or "+sR+" vertices.",this.livePreviewIcon=""):(this.livePreviewContent=
"Live preview disabled for performance reasons. This is only allowed for up to "+rR+" features, or "+sR+" vertices.",this.livePreviewIcon="fa fa-warning text-warning"),this.wb())};
qR.prototype.wb=function(a){if(this.liveAllowed&&this.liveEnabled||a)this.j=!1,this.g&&(L.s().Ge(this.g),this.g=void 0),this.scope&&this.scope.config&&(this.scope.config.outside||this.scope.config.inside)&&((a=yoa(this.scope.config,!0))&&0<a.length&&(this.g=L.s().zc(a,zoa)),this.j=!this.g||!this.g.length);this.scope&&(this.scope.warningMessage=Aoa(this))};qR.prototype.updatePreview=qR.prototype.wb;
function Aoa(a){if(a.scope&&a.scope.config){var b=a.scope.config;if(!b.distance||0>b.distance)return"Distance must be greater than zero.";if(!b.outside&&!b.inside)return"Please select at least one of Buffer Outside/Inside.";var c=b.features;if(c&&c.length){var d=Ot(b.distance,"m",b.units);if(b.inside){var e=c[0].Z();if(e=e?e.Y():void 0)if(e=Ql(e,S,"EPSG:4326"),0>yv(e,-d))return"The current buffer distance cannot be used to produce an accurate inner buffer. Please reduce the buffer distance."}if(b.outside&&
663469.9375<d&&c.some(function(a){return"Point"!==a.Z().T()}))return"The current buffer distance cannot be used to produce an accurate outer buffer. Please reduce the buffer distance."}if(a.j)return a="Buffer creation failed. Please try reducing the buffer distance",b.inside&&(a+=" or disable the inner buffer"),a+"."}return""}qR.prototype.nO=function(){if(this.scope&&this.scope.config){var a=this.scope.config.features;if(a&&1===a.length)return aq(a[0].Z())}return!1};
qR.prototype.supportsBidirectional=qR.prototype.nO;Q.directive("bufferdialog",[function(){return{restrict:"E",templateUrl:"v1541734487/views/buffer/bufferdialog.html",controller:tR,controllerAs:"buffer"}}]);
function tR(a,b){this.L=b;this.config=a.config={distance:M.get("bufferRegion.distance",5),units:M.get("bufferRegion.units","km"),outside:!0,inside:!1,title:"Buffer Region",description:"",tags:"",features:[]};this.warningMessage="";if(a.features&&0<a.features.length){if(this.config.features=a.features,this.showSourcePicker=!1,b=Ey(this.config.features[0])){for(var c=0;c<this.config.features.length;c++)if(Ey(this.config.features[0])!=b){b=null;break}a.sources=b?[b]:void 0}}else this.showSourcePicker=
!0;a.title&&(this.config.title=a.title);a.$on("$destroy",this.g.bind(this));a.$emit("window.ready")}tR.$inject=["$scope","$element"];tR.prototype.g=function(){this.L=null};tR.prototype.cancel=function(){kx(this.L)};tR.prototype.cancel=tR.prototype.cancel;tR.prototype.confirm=function(){yoa(this.config);this.cancel()};tR.prototype.confirm=tR.prototype.confirm;
tR.prototype.Ue=function(){if(!this.showSourcePicker)return"";if(!this.Fv())return"No features chosen.";var a=this.config.features.length;return a+" feature"+(1<a?"s":"")+" chosen."};tR.prototype.getStatus=tR.prototype.Ue;tR.prototype.Fv=function(){return!this.showSourcePicker||this.config&&this.config.features&&0<this.config.features.length};tR.prototype.isDataReady=tR.prototype.Fv;var zoa={fill:{color:"rgba(0,255,255,.15)"},stroke:{width:3,color:"rgba(0,255,255,1)"}},rR=rd?500:100,sR=rd?5E3:2E3;function xoa(a){if(a.features){if(a.features.length>rR)return!1;for(var b=0,c=0;c<a.features.length&&b<sR;c++){var d=a.features[c].Z();d&&(b+=d.flatCoordinates.length/d.stride)}return b<sR}return!0}
function yoa(a,b){if(a.features&&0<a.features.length&&null!=a.distance){for(var c=Ot(a.distance,"m",a.units),d=[],e=0;e<a.features.length;e++){var f=a.features[e],h="Buffer Region";a.titleColumn?(h=f.get(a.titleColumn.field))||(h="No "+a.titleColumn.name):a.title&&(h=a.title,1<a.features.length&&(h+=" "+(e+1)));var k=f.Z();if(k){k="GeometryCollection"==k.T()?k.g:[k];for(var l=0,m=k.length;l<m;l++){var n=Math.abs(c),p;if(a.outside&&a.inside){var r=wv(k[l],n);n=wv(k[l],-n);r&&n&&(r=tv(new hq(r),new hq(n)))&&
(p=r.Z())}else a.outside?p=wv(k[l],n):a.inside&&(p=wv(k[l],-n));p&&(r=new hq(p),r.ga(e),r.set("title",""+h),r.set("description",a.descColumn?f.get(a.descColumn.field):a.description),r.set("tags",a.tagsColumn?f.get(a.tagsColumn.field):a.tags),r.set("_node",!1),(n=Ey(f))&&r.set("_sourceName",n.S(),!0),d.push(r))}}}if(0<d.length){if(!b){a=[];for(e=0;e<d.length;e++)r=new XP(d[e]),a.push(r);e=new $B;e.bc(a);e.title="Add buffer region"+(1<a.length?"s":"");AE(OE.s(),e)}return d}}return null}
function uR(a){ix("Buffer")?hx("Buffer"):fx({id:"Buffer",label:"Create Buffer Region"+(a.features?"":"s"),icon:"fa fa-dot-circle-o",x:"center",y:"center",width:"425","min-width":"300","max-width":"800",height:"auto","show-close":"true"},"<bufferdialog></bufferdialog>",void 0,void 0,void 0,a)};function vR(a,b){A.call(this,a);this.l=b}w(vR,A);vR.prototype.Yd=function(){return this.l};function wR(){C.call(this);this.ma=Vb();this.j=this.description=this.name=null;this.g=[]}w(wR,C);var Boa=E.V("os.column.ColumnMapping");g=wR.prototype;g.D=function(){return this.ma};g.ga=function(a){this.ma=a||Vb()};g.getName=function(){return this.name};g.ri=function(a){this.name=a};g.qb=function(){return this.description};g.fb=function(a){this.description=a};function xR(a,b,c){b={column:c,layer:b,units:""};a.g.push(b);a.dispatchEvent(new vR("columnAdded",b))}
function Coa(a,b){b=mb(a.g,b)?b:null;a.dispatchEvent(new vR("columnRemoved",b))}g.getColumns=function(){return this.g};g.Yd=function(a){return eb(this.g,function(b){return b.layer===a})};
function Doa(a){var b="",c=a.name||"New Association",d=a.j||"string",e=a.description||"";try{b+='<columnMapping name="'+c+'" type="'+d+'" description="'+e+'">';c=0;for(var f=a.g.length;c<f;c++){var h=a.g[c];b+='<column layer="'+h.layer+'">'+h.column+"</column>"}b+="</columnMapping>"}catch(k){return E.error(Boa,"Failed to write column mapping: "+a.getName()),""}return b}g.ra=function(a){a=a||{};a.id=this.D();a.columnMapping=Doa(this);return a};
g.restore=function(a){this.ga(a.id);if(a=a.columnMapping){var b=Wx(a);try{if(b){var c=kr(b);if(c&&"columnMapping"===c.tagName){var d=c.getAttribute("type"),e=c.getAttribute("name");this.j=d;this.ri(e);var f=c.getAttribute("description");this.fb(f);var h=c.querySelectorAll("column");if(h){c=0;for(var k=h.length;c<k;c++){var l=h[c],m=l.getAttribute("layer"),n=l.textContent;m&&n&&xR(this,m,n)}}}}}catch(p){E.error(Boa,"Failed to load column mapping: "+a)}}};
g.clone=function(){var a=new wR,b=this.ra();a.restore(b);return a};function yR(){HG.call(this);this.log=Eoa;this.g={};this.o=new Fh(this.uH,100,this);this.load()}w(yR,HG);xa(yR);var Eoa=E.V("os.column.ColumnMappingManager");g=yR.prototype;g.D=function(a){return a.D()||""};g.save=function(){E.info(this.log,"Saving column associations.");for(var a=JG(this),b=[],c=0,d=a.length;c<d;c++)b.push(a[c].ra());M.set("columnMappings",b);return Ch()};g.load=function(){E.info(this.log,"Loading column associations...");var a=M.get("columnMappings");return th(Ch(a),this.jJ,this)};
g.jJ=function(a){var b=[];if(a){a="string"===typeof a?JSON.parse(a):a;for(var c=0,d=a.length;c<d;c++){var e=a[c],f=new wR;f.restore(e);b.push(f)}}Foa(this,b);E.info(this.log,"Loaded "+b.length+" associations(s) from storage.");return b};function Foa(a,b){for(var c=0,d=b.length;c<d;c++)a.add(b[c])}g.add=function(a){for(var b=a.getColumns(),c=a.D(),d=0,e=b.length;d<e;d++)this.g[zR(b[d])]=c;a.H("columnAdded",this.Hw,!1,this);a.H("columnRemoved",this.Jw,!1,this);this.jd();return yR.C.add.call(this,a)};
g.remove=function(a){if(a=this.get(a)){for(var b=a.getColumns(),c=0,d=b.length;c<d;c++)delete this.g[zR(b[c])];a.M("columnAdded",this.Hw,!1,this);a.M("columnRemoved",this.Jw,!1,this)}this.jd();return yR.C.remove.call(this,a)};g.Hw=function(a){var b=a.target.D();(a=a.Yd())&&(this.g[zR(a)]=b)};g.Jw=function(a){(a=a.Yd())&&delete this.g[zR(a)]};function AR(a,b){return a.get("string"===typeof b?a.g[b]:a.g[zR(b)])}g.jd=function(){this.o.start()};g.uH=function(){this.save();this.dispatchEvent("mappingsChange")};
g.clear=function(){for(var a=JG(this),b=[],c=0,d=a.length;c<d;c++)this.remove(a[c]),b.push(a[c]);return b};function zR(a){return a.layer+"#"+a.column};function Goa(){this.g=null}g=Goa.prototype;g.nb=!1;g.title="Clear Map Position";g.Ba=null;g.state="ready";g.Fa=function(){this.state="executing";var a=L.s();this.g=Kq(a);a.Tn();this.state="success";return!0};g.Db=function(){this.state="reverting";return this.g?(fR(L.s(),this.g),this.state="ready",!0):!1};function BR(){this.g={};this.value=!0}g=BR.prototype;g.nb=!1;g.title="Clear query areas";g.Ba=null;g.state="ready";g.Fa=function(){this.state="executing";for(var a=xQ.s(),b=JG(a),c=0,d=b.length;c<d;c++)b[c].get("shown")&&(this.g[b[c].D()]=!0,a.toggle(b[c],!1));this.state="success";return!0};g.Db=function(){this.state="reverting";for(var a=xQ.s(),b=JG(a),c=0,d=b.length;c<d;c++)b[c].D()in this.g&&a.toggle(b[c],!0);this.g={};this.state="ready";return!0};function CR(){BR.call(this);this.value=!1}w(CR,BR);CR.prototype.title="Clear exclusion areas";function DR(){C.call(this);this.title="Clear Layers";this.bc([])}w(DR,TP);DR.prototype.bc=function(a){DR.C.bc.call(this,a);this.nb=!0};
DR.prototype.Fa=function(){for(var a=[],b=[],c=[],d=Dg(L.s()),e=0,f=d.length;e<f;e++){var h=d[e];try{var k=h.Va();if(h.De()&&k&&!k.noClear){var l=Y.Ka(h.D());l instanceof LE&&l.isActive()?-1==b.indexOf(l)&&b.push(l):k.loadOnce?L.s().removeLayer(k.id):c.push(k)}}catch(m){}}for(e=0;e<b.length;e++)a.push(new WM(b[e]));for(e=0;e<c.length;e++)a.push(new gM(c[e]));if(0<a.length)return this.bc(a),DR.C.Fa.call(this);this.state="success";this.Ba=null;this.dispatchEvent("executed");return!0};function Hoa(){this.g=[]}g=Hoa.prototype;g.nb=!1;g.title="Clear Non-query Features";g.Ba=null;g.state="ready";g.Fa=function(){this.state="executing";var a=L.s().La(),b=[],c=TG;if(0<a.length)for(var d=0;d<a.length;d++){var e=a[d];c.get(e)||b.push(e)}L.s().Ge(b);this.g=b;this.state="success";return!0};g.Db=function(){this.state="reverting";L.s().zc(this.g);this.g.length=0;this.state="ready";return!0};function ER(a,b){RQ.call(this,a,b)}w(ER,RQ);ER.prototype.transform=function(a,b){for(var c=JG(xQ.s()),d=0,e=c.length;d<e;d++){var f=c[d];if(f&&!f.get("shown")){var h=f.Z();h&&h.transform(a,b);(f=f.get("_originalGeometry"))&&f.transform(a,b)}}};Q.directive("metriccompletion",[function(){return{restrict:"AE",replace:!0,template:'<span class="pl-1 c-slick-grid__hover-color" ng-style="mc.style" ng-bind-html="mc.getCompleted()" />',controller:FR,controllerAs:"mc"}}]);function FR(a){this.g=null;this.style="";a.item instanceof GR&&(this.g=a.item);a.$on("$destroy",this.j.bind(this))}FR.$inject=["$scope","$element"];FR.prototype.j=function(){this.g=null};
FR.prototype.bE=function(){try{if(this.g&&this.g.We()){if(this.g)if(this.g.We()){for(var a=bo(this.g),b=a.length,c=0,d=0;d<b;d++)a[d].g&&c++;var e=Math.round(c/b*100)}else e=this.g.g?100:0;else e=0;var f=pba(e/100*255);3==f.length&&f.push(1);this.style={color:qm(f)};return"<strong>("+e+"% Explored)</strong>"}}catch(h){}return""};FR.prototype.getCompleted=FR.prototype.bE;function GR(a){ko.call(this);qo(this,!1);this.key_=a;this.l=void 0;this.icon=null;this.g=!1;this.key_&&(a=P.s(),HR(this,a.j?eC(this.key_,a.l):!1),a.H(this.key_,this.mx,!1,this),a.H("metrics:reset",this.nx,!1,this))}w(GR,ko);g=GR.prototype;g.J=function(){GR.C.J.call(this);if(this.key_){var a=P.s();a.M(this.key_,this.mx,!1,this);a.M("metrics:reset",this.nx,!1,this)}};g.mx=function(a){"number"==typeof a.l&&HR(this,0<a.l)};g.nx=function(){if(this.key_){var a=P.s();HR(this,a.j?eC(this.key_,a.l):!1)}};
g.qb=function(){return this.l};g.fb=function(a){this.l=a};function HR(a,b){b!=a.g&&(a.g=b,a.dispatchEvent(new K("visited",b,!b)),a.dispatchEvent(new K("label")))}g.qe=function(){return[this.ba()||"",this.qb()||"",this.getTags()||""].join(" ")};g.getTags=function(){return null};g.Kc=function(){return this.We()?this.icon||"&nbsp;":this.g?'<i class="fa fa-check"></i>':'<i class="fa fa-times"></i>'};g.fk=function(a){return GR.C.fk.call(this,a)+"<metriccompletion></metriccompletion>"};g.kc=function(){return!0};
g.ob=function(){return!1};function PR(){this.g=null;this.label="Change Me!";this.j=[];this.description="";this.ie=[];this.icon="";this.collapsed=!1;this.ld=null}w(PR,x);g=PR.prototype;g.J=function(){PR.C.J.call(this);z(this.g);this.g=null};g.D=function(){return((0<this.j.length?this.j.join(".")+".":"")+this.label).replace(" ","_").toLowerCase()};function QR(a){a.g||(a.g=new GR,a.g.collapsed=a.collapsed,a.g.icon=a.icon,a.g.Da(a.ba()),a.g.fb(a.qb()),qo(a.g,!1));return a.g}g.qb=function(){return this.description};
g.fb=function(a){this.description=a};g.Fd=function(a){this.collapsed=a;this.g&&(this.g.collapsed=this.collapsed)};g.Rg=function(){return this.icon||'<i class="fa fa-gear"></i>'};g.yc=function(a){this.icon=['<i class="',a,'"></i> '].join("");this.g&&(this.g.icon=this.icon)};g.ba=function(){return this.label};g.Da=function(a){this.label=a};g.getTags=function(){return this.ie};g.vb=function(a){this.ie=a};g.Ug=function(){return this.ld};
g.R=function(a,b){var c=new GR(b.key);c.Da(b.label);c.fb(b.description);c.collapsed=b.collapsed||!1;c.icon=b.icon||null;a.R(c);return c};g.Tj=function(a,b){a.collapsed=!0;for(var c=0;c<b.length;c++)this.R(a,b[c])};function Ioa(){PR.call(this);this.Da("Map");this.fb("Start application in 2D or 3D mode");this.vb(["2D","3D","Dimension"]);this.yc("fa fa-globe");this.Fd(!0);var a=QR(this);this.R(a,{label:"2D Mode",key:"map.features.mapMode-2d"});this.R(a,{label:"3D Mode",key:"map.features.mapMode-3d"});this.R(a,{label:"Save State",key:"map.features.saveState"});this.R(a,{label:"Import State",key:"map.features.importState"});this.R(a,{label:"Clear State",key:"map.features.clearState"});this.R(a,{label:"Save Screen Shot",
key:"map.features.screenCapture"});this.R(a,{label:"Draw",key:"map.feature.draw"});this.R(a,{label:"Measure",key:"map.feature.measureToolToggle"});this.R(a,{label:"Show Legend",key:"map.features.showLedgend"});this.R(a,{label:"Show Layer Window",key:"map.features.layers"});var b=this.R(a,{label:"Context Menu"});this.R(b,{label:"Reset View",key:"map.features.resetView"});this.R(b,{label:"Reset Rotation",key:"map.features.resetRotation"});this.R(b,{label:"Toggle 2D/3D View",key:"map.features.toggleMode"});
this.R(b,{label:"Show Legend",key:"map.features.showLedgendContext"});this.R(b,{label:"Clear Selection",key:"map.features.clearSelection"});this.R(b,{label:"Set Background Color",key:"map.features.setBackGroundColor"});a=this.R(a,{label:"Units Menu"});this.R(a,{label:"Use Imperial Units",key:"map.units.imperial"});this.R(a,{label:"Use Metric Units",key:"map.units.metric"});this.R(a,{label:"Use Nautical Units",key:"map.units.nautical"});this.R(a,{label:"Use Miles Only Units",key:"map.units.mile"});
this.R(a,{label:"Use Nautical Miles Only Units",key:"map.units.nauticalmile"});this.R(a,{label:"Use Yards Only Units",key:"map.units.yard"});this.R(a,{label:"Use Feet Only Units",key:"map.units.feet"})}w(Ioa,PR);function Joa(a,b,c,d){function e(b){var c=Op(b);null!=c&&90<Math.abs(c.lat)&&(c=null);var e=!0;if(null!=c)e=!0;else try{var f=osasm.toLonLat(b);e=q(f)&&2===f.length}catch(m){e=!1}d.$pristine||d.$setValidity("pos",e);a.$watch("required",function(a){a?d.$setValidity("pos",e):b?d.$setValidity("pos",e):d.$setValidity("pos",!0)});return b}d.$formatters.unshift(e);d.$parsers.unshift(e)}Q.directive("geo",[function(){return{require:"ngModel",link:Joa}}]);Q.directive("position",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/geo/position.html",scope:{disabled:"=?",required:"=?",order:"=?",form:"=",geom:"=",label:"@",mapSupport:"@",name:"@",hideHint:"=",showLabel:"=?",bulk:"=?",col:"=?"},controller:RR,controllerAs:"posCtrl"}}]);
function RR(a){this.v=a;this.g=null;this.label=void 0!==a.label?a.label:"Position";"false"==this.label&&(this.label=null);this.mapEnabled=!1;null==this.v.required&&(this.v.required=!0);this.j=Math.pow(10,8);this.showLabel=null!=this.v.showLabel?this.v.showLabel:!0;this.col=null!=a.col?a.col:"2";a.popoverContent="Takes DD, DMS, DDM or MGRS. If Lat/Lon, the first coordinate is assumed to be latitude unless it is zero-padded (0683000.55 or 058.135), three-digits (105&deg;30'10.1&quot; or 105.3), or contains the direction (68 30 12 W or 105 E).";
a.$watch("posText",function(){this.v.required||this.v.$emit("positionText",this.v.geom,this.v.posText);this.o()}.bind(this));a.$watch("order",this.o.bind(this));a.$watch("geom.lon",this.l.bind(this));a.$watch("geom.lat",this.l.bind(this));a.$on("position:mapEnabled",this.B.bind(this));a.$on("resetForm",function(a){void 0!==a&&a!=this.v.name||SR(this,!1)}.bind(this));a.$on("$destroy",this.u.bind(this))}RR.$inject=["$scope","$element"];
RR.prototype.u=function(){this.g&&(this.g(),this.g=null);this.v=null};RR.prototype.o=function(){if(this.v.posText){var a=Op(this.v.posText,this.v.order);null!=a&&90<Math.abs(a.lat)&&(a=null);if(null==a)try{var b=osasm.toLonLat(this.v.posText);a={lon:b[0],lat:b[1]}}catch(c){}null!=a&&(this.v.geom.lat=a.lat,this.v.geom.lon=a.lon)}};
RR.prototype.l=function(){if(isNaN(this.v.geom.lat)||isNaN(this.v.geom.lon))this.v.posText="";else if(this.v.posText){var a=Op(this.v.posText,this.v.order);null!=a&&(1E-12<Math.abs(a.lat-this.v.geom.lat)||1E-12<Math.abs(a.lon-this.v.geom.lon))&&TR(this)}else TR(this)};function TR(a){var b=a.v.geom.lat,c=a.v.geom.lon;a.v.posText=""+Math.abs(b)+(0<=b?"N ":"S ")+Math.abs(c)+(0<=c?"E":"W")}RR.prototype.AO=function(){SR(this,!this.mapEnabled)};RR.prototype.toggleMapEnabled=RR.prototype.AO;
RR.prototype.A=function(a,b,c){!this.v.disabled&&b&&1<b.length&&(this.v.geom.lon=Math.round(b[0]*this.j)/this.j,this.v.geom.lat=Math.round(b[1]*this.j)/this.j,TR(this),c&&SR(this,!1),R(this.v))};RR.prototype.B=function(a,b,c){a.targetScope!==this.v&&null!=c&&null!=b&&c===this.v.name&&SR(this,b)};function SR(a,b){a.mapEnabled!==b&&(a.mapEnabled=b,a.g&&(a.g(),a.g=null),a.mapEnabled&&(a.g=a.v.$on("position:mapClick",a.A.bind(a))),a.v.$emit("position:mapEnabled",a.mapEnabled,a.v.name),R(a.v))};var Koa={jP:"bbox",mP:"circle",oR:"polygon"},UR={bbox:{name:"Bounding Box",icon:"fa-square-o",tooltip:"Define an area by bounding box corners."},circle:{name:"Circle",icon:"fa-circle-o",tooltip:"Define an area by center point and radius."},polygon:{name:"Polygon",icon:"fa-star-o",tooltip:"Define an area from a list of coordinates."}};Q.directive("userarea",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/query/area/userarea.html",controller:VR,controllerAs:"ctrl"}}]);
function VR(a,b,c){x.call(this);this.scope=a;this.element=b;this.g=a.area;this.l=new ft(document);this.l.H("key",this.o,!1,this);this.j=new Fh(this.u,250,this);this.area=void 0;this.areaType="bbox";this.areaTypes=this.scope.areaTypes||ic(Koa);this.name=this.g&&this.g.get("title")||"New Area";this.canEditGeometry=!0;this.errorMsg="";this.lonFirst=!1;this.coordOrder=void 0;this.corner1={};this.corner2={};this.coordinates="";this.center={};this.radius=void 0;this.radiusUnits="km";this.units=["nmi","mi",
"km","m"];this.customPopoverContent="Enter coordinates with spaces between latitude/longitude and commas separating coordinate pairs or MGRS values. The polygon will be validated/closed if necessary.<br><br>Takes DD, DMS, DDM or MGRS. If Lat/Lon, the first coordinate is assumed to be latitude unless it is zero-padded (0683000.55 or 058.135), three-digits (105&deg;30'10.1&quot; or 105.3), or contains the direction (68 30 12 W or 105 E).";this.numInvalidCoords=0;if(this.g){mb(this.areaTypes,"circle");
var d=this.g.Z();d&&(d=d.clone(),d.toLonLat(),b=d.Y(),"Polygon"==d.T()?(d=d.getCoordinates())&&1==d.length?(this.canEditGeometry=!0,this.areaType=$p(d[0],b)?"bbox":"polygon",this.corner1.lon=WR(b[0]),this.corner1.lat=WR(b[1]),this.corner2.lon=WR(b[2]),this.corner2.lat=WR(b[3]),this.coordinates=d[0].map(function(a){return WR(a[1])+" "+WR(a[0])},this).join(",")):this.canEditGeometry=!1:this.canEditGeometry=!1)}this.Je();a.$watch("ctrl.areaType",this.Je.bind(this));a.$watch("ctrl.corner1.lon",this.Je.bind(this));
a.$watch("ctrl.corner1.lat",this.Je.bind(this));a.$watch("ctrl.corner2.lon",this.Je.bind(this));a.$watch("ctrl.corner2.lat",this.Je.bind(this));a.$watch("ctrl.center.lon",this.Je.bind(this));a.$watch("ctrl.center.lat",this.Je.bind(this));M.H("interpolation",this.Je,!1,this);a.$on("$destroy",this.dispose.bind(this));c(function(){a.$emit("window.ready")})}w(VR,x);VR.$inject=["$scope","$element","$timeout"];
VR.prototype.J=function(){VR.C.J.call(this);M.M("interpolation",this.Je,!1,this);Loa(this,void 0);z(this.l);this.l=void 0;z(this.j);this.scope=this.element=this.j=void 0};VR.prototype.cancel=function(){this.scope&&this.scope.cancel&&this.scope.cancel("cancel");this.close()};VR.prototype.cancel=VR.prototype.cancel;
VR.prototype.confirm=function(){if(this.scope&&this.scope.confirm&&this.area){var a=this.g;if(a){var b=this.area.Z().clone();a.tb(b);a.set("_originalGeometry",b,!0);a.set("title",this.name,!0);b=this.area.get("interpolationMethod");a.set("interpolationMethod",b,!0)}else a=this.area,a.set("title",this.name,!0),a.kf("_node",!0);this.scope.confirm(a)}this.close()};VR.prototype.confirm=VR.prototype.confirm;VR.prototype.close=function(){this.element&&kx(this.element)};
VR.prototype.o=function(a){27==a.keyCode&&this.cancel()};VR.prototype.YD=function(a){return(a=UR[a])&&a.name?a.name:"Unspecified Type"};VR.prototype.getAreaTypeName=VR.prototype.YD;VR.prototype.XD=function(a){return(a=UR[a])&&a.icon?a.icon:"fa-calculator"};VR.prototype.getAreaTypeIcon=VR.prototype.XD;VR.prototype.ZD=function(a){return(a=UR[a])&&a.tooltip?a.tooltip:"Enter coordinates to define an area."};VR.prototype.getAreaTypeTooltip=VR.prototype.ZD;
function Loa(a,b){a.area&&On&&On.Bb(a.area);(a.area=b)&&On&&(a=On,a.cc(b,ez),a.Pi(b.Z().Y(),1.5))}VR.prototype.iJ=function(){this.coordOrder=this.lonFirst?1:void 0;this.Je()};VR.prototype.onLonFirstChange=VR.prototype.iJ;VR.prototype.Je=function(){this.j&&this.j.start()};VR.prototype.updateArea=VR.prototype.Je;
VR.prototype.u=function(){if(!this.Xa()){var a;if(this.scope.areaForm.$valid){var b=Fs().method;switch(this.areaType){case "bbox":var c;this.canEditGeometry||!this.scope.geometry?(a=this.Y())&&(c=up(a)):c=this.scope.geometry;a=c;b="rhumb";break;case "circle":c=new hp([this.center.lon,this.center.lat]);a=wv(c,Ot(this.radius,"m",this.radiusUnits),!0);b="none";break;case "polygon":a=Moa(this)}if(a){var d=new hq(a);d.set("_node",!1,!0);d.set("interpolationMethod",b,!0);d.set("title",this.name,!0);d.ga(J(a));
Ap(a)}}Loa(this,d);R(this.scope)}};VR.prototype.Y=function(){var a;null!=this.corner1.lon&&null!=this.corner1.lat&&null!=this.corner2.lon&&null!=this.corner2.lat&&(a=[this.corner1.lon,this.corner1.lat,this.corner2.lon,this.corner2.lat]);return a};
function Moa(a){a.numInvalidCoords=0;if(a.coordinates&&(a=a.coordinates.split(",").map(function(a){try{a=a.trim();var b=Op(a,this.coordOrder);b&&90<Math.abs(b.lat)&&(b=void 0);b?b=[b.lon,b.lat]:b=osasm.toLonLat(a)}catch(e){b=void 0}b||this.numInvalidCoords++;return b},a).filter($u),2<a.length&&(yb(a[0],a[a.length-1])||a.push(a[0]),3<a.length))){var b=new qp([a]);a=sv(b,!0);a!==b?b=a:b=void 0}return b}function WR(a){return a.toFixed(14).replace(/\.?0+$/,"")}
function Noa(){return new Kc(function(a,b){fx({x:"center",y:"center",label:"Enter Area Coordinates",icon:"fa fa-calculator",height:"auto",width:500,modal:!1,"no-scroll":!0,"show-close":!0},"<userarea></userarea>",void 0,void 0,void 0,{confirm:a,cancel:b,area:void 0,areaTypes:void 0})})};function XR(a,b){b=void 0!==b?b:!0;TG.toggle(a,b);AE(OE.s(),new XP(a,b));N.dispatchEvent(new $v("zoom",{feature:a,geometry:a.Z()}))}function YR(a,b){O(P.s(),"filters.import",1);var c=new NM(We,Xe);PM(c,new Mw("importFile",b,void 0,a));OM(c)}function ZR(){O(P.s(),"map.features.loadFromCoordinates",1);Noa().then(XR,wa)}
function Ooa(){O(P.s(),"map.features.loadFromArea",1);gD({confirm:XR,confirmValue:void 0,prompt:"<span>Please choose an area from the list:</span><choosearea></choosearea>",windowOptions:{label:"Choose Area",icon:"fa fa-list-ul",x:"center",y:"center",width:"400",height:"auto","show-close":"true","no-scroll":"true",modal:"true"}})}function $R(){var a=Poa.clone();if(a){O(P.s(),"map.features.queryWorld",1);var b=a.Z();Ap(b);b.set("_normalized",!0);a.set("interpolationMethod","none",!0);XR(a,!1)}}
function lq(a){if(aS&&a&&a instanceof qp){var b=Ql(Qoa,"EPSG:4326",S);b=$k(b);if(ne(a.me(),b)||0==a.me())return a.ic(aS.getCoordinates()),!0}return!1}var Qoa=[-179.9999999999999,-89.99999999999999,180,90],aS=up(Qoa),Poa=new hq({geometry:aS,title:"Whole World"});function xQ(){OG.call(this);this.g=void 0;bS.stroke.color=M.get(cS,dS);bS.stroke.width=parseInt(M.get(eS,fS),10);gS.stroke.color=M.get(hS,iS);gS.stroke.width=parseInt(M.get(jS,kS),10);M.H(cS,this.PO,!1,this);M.H(eS,this.QO,!1,this);M.H(hS,this.NO,!1,this);M.H(jS,this.OO,!1,this);UQ.s().H("submit",this.hK,!1,this)}w(xQ,OG);xa(xQ);yc(OG,{s:function(){return xQ.s()}});
var cS="os.area.inColor",eS="os.area.inWidth",hS="os.area.exColor",jS="os.area.exWidth",dS="rgba(255,255,0,1)",fS="2",iS="rgba(255,0,0,1)",kS="2",Roa={stroke:{color:"rgba(136,136,136,1)",lineCap:"square",width:2}},bS={stroke:{color:"rgba(255,255,0,1)",lineCap:"square",width:2}},gS={stroke:{color:"rgba(255,0,0,1)",lineCap:"square",width:2}},Soa={fill:{color:"rgba(0,255,255,0.15)"},stroke:{color:"rgba(0,255,255,1)",lineCap:"square",width:2}};g=xQ.prototype;g.X=function(){return L.s()};
g.load=function(){return th(Ch(Qga(this)),function(a){a&&RG(this,a,!1)},this)};g.save=function(){var a=new FG,b=JG(this),c=b.filter(Rga).map(Toa);c=EG(a,c,{featureProjection:S});a=EG(a,b,{featureProjection:S});M.set("areas",c);M.set("areasAll",a);return Ch()};function Toa(a){var b=a.get("_originalGeometry");b&&(a=a.clone(),a.tb(b),a.set("_originalGeometry",void 0));return a}g.BA=function(a){a.set("_highlightStyle",void 0,!0);a.set("_style",Roa,!0);sz(a)};
g.zh=function(a,b){var c=!1,d=lE.getEntries(null,a.D()),e=void 0,f=L.s().W("draw").N();d&&0<d.length&&(e=d[0].includeArea?bS:gS);d=a.get("_selectStyle");var h=a.D();d!==e&&h&&(a.set("_selectStyle",e),sz(a),f.Ad(h)&&(f.dispatchEvent(new Vu("changefeature",a)),c=!0));c&&!b&&f.ia();return c};g.Ps=function(a){var b=L.s().W("draw").N(),c=a.D();c&&b.Ad(c)&&b.dispatchEvent(new Vu("changefeature",a));b.ia()};g.uo=function(){this.g&&(L.s().Bb(this.g),this.g=void 0)};
g.iq=function(a){this.g&&(L.s().Bb(this.g),this.g=void 0);var b=this.get(a);a=L.s();b&&Py(a,b)&&(b=b.Z())&&(b=new hq(b.clone()),b.set("_node",!1),this.g=a.cc(b,Soa))};
g.Bh=function(a,b){if(a&&!a.get("interpolationMethod")){var c=a.get("_originalGeometry")||a.Z(),d=!1;if(c instanceof qp){var e=c.getCoordinates();1==e.length&&$p(e[0],c.Y())&&(a.set("interpolationMethod","rhumb",!0),d=!0)}d||a.set("interpolationMethod",Ds.method,!0);lq(c)&&a.set("interpolationMethod","none")}return xQ.C.Bh.call(this,a,b)?a.hc=!0:!1};g.fw=function(a){var b=a.Z();b.get("_normalized")||(b.toLonLat(),kq(b),Ap(b),a.tb(b))};function lS(a){return pm("string"===typeof a?ff(a):a)}
g.PO=function(a){a.l&&lS(a.l)!=bS.stroke.color&&(bS.stroke.color=lS(a.l),mS(this))};g.QO=function(a){a.l&&a.l!=bS.stroke.width&&(bS.stroke.width=parseInt(a.l,10),mS(this))};g.NO=function(a){a.l&&lS(a.l)!=gS.stroke.color&&(gS.stroke.color=lS(a.l),mS(this))};g.OO=function(a){a.l&&a.l!=gS.stroke.width&&(gS.stroke.width=parseInt(a.l,10),mS(this))};
function mS(a){var b=JG(a);$a(b,function(a){if(null!=a.Ib()){var b=QG.s().getEntries(null,a.D());b&&0<b.length&&(b=b[0].includeArea?wc(bS):wc(gS),a.set("_selectStyle",b),sz(a),this.Ps(a))}},a)}g.hK=function(a){var b=UQ.s(),c=b.j;b=b.g;c&&b&&a.l.push(new ER(c,b))};function Uoa(){uo.call(this);this.Da("Areas");vo(this);this.fb("Options for Areas");this.vb(["areas","color","width"]);this.yc("fa fa-globe");this.ld="areasettings"}w(Uoa,uo);Q.directive("areasettings",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/config/areasettings.html",controller:nS,controllerAs:"area"}}]);
function nS(a){this.v=a;M.H(cS,this.JA,!1,this);M.H(eS,this.KA,!1,this);M.H(hS,this.HA,!1,this);M.H(jS,this.IA,!1,this);this.inColor=M.get(cS,dS);this.inWidth=parseInt(M.get(eS,fS),10)||2;this.exColor=M.get(hS,iS);this.exWidth=parseInt(M.get(jS,kS),10)||2;this.v.$watch("area.inColor",this.LI.bind(this));this.v.$watch("area.inWidth",this.MI.bind(this));this.v.$watch("area.exColor",this.gI.bind(this));this.v.$watch("area.exWidth",this.hI.bind(this));a.$on("$destroy",this.OK.bind(this))}nS.$inject=["$scope"];
g=nS.prototype;g.OK=function(){M.M(cS,this.JA,!1,this);M.M(eS,this.KA,!1,this);M.M(hS,this.HA,!1,this);M.M(jS,this.IA,!1,this);this.v=null};g.LI=function(a){a&&(M.set(cS,this.inColor),oS(this),R(this.v))};g.MI=function(a){a&&(M.set(eS,this.inWidth),oS(this),R(this.v))};g.gI=function(a){a&&(M.set(hS,this.exColor),oS(this),R(this.v))};g.hI=function(a){a&&(M.set(jS,this.exWidth),oS(this),R(this.v))};g.JA=function(a){a.l&&a.l!=this.inColor&&(this.inColor=a.l,oS(this),R(this.v))};
g.KA=function(a){a.l&&a.l!=this.inWidth&&(this.inWidth=parseInt(a.l,10),oS(this),R(this.v))};g.HA=function(a){a.l&&a.l!=this.exColor&&(this.exColor=a.l,oS(this),R(this.v))};g.IA=function(a){a.l&&a.l!=this.exWidth&&(this.exWidth=parseInt(a.l,10),oS(this),R(this.v))};
function oS(a){bS.stroke.color=a.inColor;bS.stroke.width=a.inWidth;gS.stroke.color=a.exColor;gS.stroke.width=a.exWidth;var b=OG.s(),c=JG(b);$a(c,function(a){if(null!=a.Ib()){var c=lE.getEntries(null,a.D());c&&0<c.length&&(c=c[0].includeArea?wc(bS):wc(gS),a.set("_selectStyle",c),sz(a),b.Ps(a))}},a)}g.reset=function(){this.inColor=dS;this.inWidth=parseInt(fS,10)||2;this.exColor=iS;this.exWidth=parseInt(kS,10)||2;M.set(cS,dS);M.set(eS,fS);M.set(hS,iS);M.set(jS,kS);oS(this)};nS.prototype.reset=nS.prototype.reset;function Voa(){}g=Voa.prototype;g.state="ready";g.nb=!1;g.title="Interpolate all vectors";g.Ba=null;g.Fa=function(){if("ready"!==this.state){this.Ba="Command not in ready state.";var a=!1}else a=!0;return a?(this.state="executing",this.interpolate(),this.state="success",!0):!1};g.interpolate=function(){for(var a=Dg(L.s()),b=0,c=a.length;b<c;b++){var d=a[b];if(d instanceof iu&&(d=d.N())){var e=d.La();if(e.length){d.clear(!0);if(!(d instanceof Rz))for(var f=0,h=e.length;f<h;f++)Ps(e[f]);d.zc(e)}}}};
g.Db=function(){this.state="ready";return!0};function Woa(){uo.call(this);this.Da("Interpolation");vo(this);this.fb("Interpolation settings for line/polygon segments");this.vb(["interpolation","line","polygon","render"]);this.yc("fa fa-ellipsis-h");this.ld="interpolationsettings"}w(Woa,uo);Q.directive("interpolationsettings",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/config/interpolationsettings.html",controller:pS,controllerAs:"intCtrl"}}]);
function pS(a){this.v=a;this.g=new Fh(this.apply,400,this);M.H("propertychange",this.j,!1,this);a.$on("$destroy",this.l.bind(this));var b=this.g.start.bind(this.g);a.$watch("method",b);a.$watch("kilometers",b);this.update()}pS.$inject=["$scope"];pS.prototype.l=function(){M.M("propertychange",this.j,!1,this);this.g.dispose();this.v=null};pS.prototype.j=function(a){/^interpolation\.?/.test(a.j)&&this.update()};
pS.prototype.update=function(){var a=Fs();this.v.kilometers=a.distance/1E3;this.v.method=a.method};pS.prototype.apply=function(){var a=this.v.method,b=this.v.kilometers;if(a&&b){a={method:a,distance:1E3*b};b=!1;var c=Fs(),d;for(d in c)if(d in a&&a[d]!==c[d]){b=!0;break}b&&(Ls(a),M.set("interpolation",a),(new Voa).Fa())}};function qS(){x.call(this);this.sources=[];this.g={};this.o=new Fh(this.Qd,25,this);this.G=Xoa;this.I=Yoa}w(qS,x);var Yoa=[],Xoa=["title","visible"];g=qS.prototype;g.J=function(){qS.C.J.call(this);var a=Y;a&&(a.M("dataSourceAdded",this.gy,!1,this),a.M("dataSourceRemoved",this.hy,!1,this));for(var b in this.g)sf(this.g[b]);this.g={};this.sources.length=0};
g.init=function(){var a=Y;a.H("dataSourceAdded",this.gy,!1,this);a.H("dataSourceRemoved",this.hy,!1,this);a=SB(a);for(var b=0,c=a.length;b<c;b++){var d=a[b];d&&(rS(this,d),Zoa(this,a[b]))}};g.xj=function(a){mb(this.sources,a)};function Zoa(a,b){$oa(a,b);var c=b.D();a.g[c]=H(b,"propertychange",a.xr,a)}function $oa(a,b){b=b.D();b in a.g&&(sf(a.g[b]),delete a.g[b])}g.gy=function(a){a.source&&(rS(this,a.source),Zoa(this,a.source))};g.hy=function(a){a.source&&($oa(this,a.source),this.xj(a.source))};
function rS(a,b){if(b){a:{var c=0;for(var d=a.I.length;c<d;c++)if(!a.I[c](b)){c=!1;break a}c=!0}c?-1===a.sources.indexOf(b)&&a.sources.push(b):a.xj(b);a.o.start()}}g.xr=function(a){try{var b=a.j}catch(c){return}(a=a.target)&&b&&-1<this.G.indexOf(b)&&rS(this,a)};g.Qd=function(){};Q.directive("legendguide",[function(){return{restrict:"E",replace:!0,scope:{closeFlag:"=",widget:"@"},templateUrl:"v1541734487/views/legend.html",controller:sS,controllerAs:"legend"}}]);
function sS(a,b){qS.call(this);this.G=["color","colorModel",LI,QI,UI,TI,"style","title","visible"];this.K=["style","visible","title"];this.scope=a;this.scope.$on("$destroy",this.dispose.bind(this));this.element=b;this.l=new CI(this.DD,500,this);this.u=null;this.A=this.B=!1;this.j={};this.widget="true"==a.widget;this.init()}w(sS,qS);sS.$inject=["$scope","$element"];g=sS.prototype;
g.J=function(){sS.C.J.call(this);N.M("legend:update",this.Qd,!1,this);var a=L.s();a.M("addLayer",this.Iy,!1,this);a.M("removeLayer",this.Jy,!1,this);for(var b in this.j)sf(this.j[b]);z(this.l);this.l=null;this.widget&&(a=a.X())&&yf(a,"change:size",this.Qd,this);this.element=this.scope=this.u=null};
g.init=function(){sS.C.init.call(this);var a=this.element.find("canvas");a&&1==a.length&&(this.u=a[0]);N.H("legend:update",this.Qd,!1,this);a=L.s();a.H("addLayer",this.Iy,!1,this);a.H("removeLayer",this.Jy,!1,this);for(var b=Dg(a).filter(function(a){return a instanceof hR}),c=0;c<b.length;c++)apa(this,b[c]);this.widget&&((a=a.X())&&H(a,"change:size",this.Qd,this),a=M.get(tS,"15000px"),b=M.get(uS,"15000px"),this.element.css("left",a),this.element.css("top",b),this.element.draggable({containment:"#map-container",
start:this.oL.bind(this),stop:this.pL.bind(this)}),Dc(this.Qd,this))};g.Qd=function(){!this.A&&this.l&&this.l.Pd()};g.DD=function(){if(this.u){if(this.widget){var a=angular.element("#map-container");var b=a.height()-50;a=a.width()-50}else b=2E3;fia(this.u,b,a);vS(this)}};g.Iy=function(a){a.layer instanceof hR&&apa(this,a.layer);this.o.start()};g.Jy=function(a){a.layer instanceof hR&&bpa(this,a.layer);this.o.start()};function apa(a,b){bpa(a,b);var c=b.D();a.j[c]=H(b,"propertychange",a.mK,a)}
function bpa(a,b){b=b.D();b in a.j&&(sf(a.j[b]),delete a.j[b])}g.mK=function(a){try{var b=a.j}catch(c){return}b&&-1<this.K.indexOf(b)&&this.o.start()};g.oL=function(){angular.element("iframe").addClass("u-pointer-events-none");this.B=!0};
g.pL=function(){angular.element("iframe").removeClass("u-pointer-events-none");this.B=!1;if(this.element){this.element.height("auto");this.element.width("auto");if(!this.A&&this.element&&M){this.A=!0;var a=this.element.css("left"),b=this.element.css("top");M.set(tS,a);M.set(uS,b);this.A=!1}vS(this)}};
function vS(a,b){if(!a.B&&a.element&&a.widget){var c=a.element.css("left").replace("px",""),d=a.element.css("top").replace("px","");if(!isNaN(c)&&!isNaN(d)){var e=parseFloat(c),f=parseFloat(d);c=parseFloat(M.get(tS,c).replace("px",""));d=parseFloat(M.get(uS,d).replace("px",""));var h=parseFloat(a.element.css("width").replace("px","")),k=parseFloat(a.element.css("height").replace("px","")),l=angular.element("#map-container"),m=l.height(),n=l.width();l=l.offset().top;var p=!1;0>e?(a.element.css("left",
"5px"),p=!0):e+h>n&&(e=n-h,a.element.css("left",e+"px"),p=!0);f<l?(a.element.css("top",l+"px"),p=!0):f+k>l+m&&(f=l+m-k,a.element.css("top",f+"px"),p=!0);p||c==e&&d==f||(a.element.css("left",c+"px"),a.element.css("top",d+"px"),vS(a,b))}}}g.FK=function(){wS(xS.s(),"legend");N.dispatchEvent(new cw("toggleUI","settings",!0))};sS.prototype.openSettings=sS.prototype.FK;sS.prototype.close=function(){null!=this.scope.closeFlag?this.scope.closeFlag=!this.scope.closeFlag:(this.element.remove(),this.scope.$parent.$destroy())};
sS.prototype.close=sS.prototype.close;function yS(){uo.call(this);this.Da("Legend");vo(this);this.fb("Display a data legend when capturing a screenshot or animated GIF");this.yc("fa fa-map-signs");this.ld="legendsettings"}w(yS,uo);yS.prototype.D=function(){return"legend"};var uS="os.legend.position.top",tS="os.legend.position.left";Q.directive("legendsettings",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/config/legendsettings.html",controller:zS,controllerAs:"legend"}}]);
function zS(a,b,c){x.call(this);this.scope=a;this.scope.$on("$destroy",this.dispose.bind(this));this.element=b;this.g=c;this.options=pJ();-1===AS.indexOf(this.options.fontSize)&&(this.options.fontSize=nJ.fontSize);this.scope.$watch("legend.options.bgColor",this.j.bind(this));this.scope.$watch("legend.options.showBackground",this.o.bind(this));this.scope.$watch("legend.options.opacity",this.l.bind(this));cpa(this)}w(zS,x);zS.$inject=["$scope","$element","$compile"];var AS=[12,14,16,20,24,32,48,64];
zS.prototype.J=function(){zS.C.J.call(this);this.scope=this.element=this.g=null};function cpa(a){if(a.scope&&a.element&&a.g){var b=a.element.find(".js-legend-settings__plugin-options");b.children().remove();var c="";oJ.forEach(function(a){a.settingsUI&&(c=-1==a.settingsUI.indexOf("<")?c+("<"+a.settingsUI+"></"+a.settingsUI+">"):c+a.settingsUI)},a);b.html(c);a.g(b.contents())(a.scope)}}zS.prototype.DK=function(){N.dispatchEvent(new cw("toggleUI","legend",!0))};zS.prototype.openLegend=zS.prototype.DK;
zS.prototype.j=function(a,b){a!==b&&(M.set("os.legend.options.bgColor",this.options.bgColor),N.dispatchEvent("legend:update"))};zS.prototype.o=function(a,b){a!==b&&(M.set("os.legend.options.showBackground",this.options.showBackground),N.dispatchEvent("legend:update"))};zS.prototype.l=function(a,b){a!==b&&(M.set("os.legend.options.opacity",this.options.opacity),N.dispatchEvent("legend:update"))};zS.prototype.bD=function(){var a=AS;return a.indexOf(this.options.fontSize)<a.length-1};
zS.prototype.canIncreaseFontSize=zS.prototype.bD;zS.prototype.ZC=function(){return 0<AS.indexOf(this.options.fontSize)};zS.prototype.canDecreaseFontSize=zS.prototype.ZC;zS.prototype.RF=function(){var a=AS.indexOf(this.options.fontSize);-1!=a&&a<AS.length-1&&(this.options.fontSize=AS[++a],M.set("os.legend.options.fontSize",this.options.fontSize),N.dispatchEvent("legend:update"))};zS.prototype.increaseFontSize=zS.prototype.RF;
zS.prototype.tD=function(){var a=AS.indexOf(this.options.fontSize);-1!=a&&0<a&&(this.options.fontSize=AS[--a],M.set("os.legend.options.fontSize",this.options.fontSize),N.dispatchEvent("legend:update"))};zS.prototype.decreaseFontSize=zS.prototype.tD;zS.prototype.toggle=function(a){M.set("os.legend.options."+a,this.options[a]);N.dispatchEvent("legend:update")};zS.prototype.toggle=zS.prototype.toggle;zS.prototype.vO=function(){this.options.bold=!this.options.bold;this.toggle("bold")};
zS.prototype.toggleBold=zS.prototype.vO;function dpa(){uo.call(this);this.Da("Projection");vo(this);this.fb("The base projection for the application");this.vb(["projection","epsg","mercator","geographic"]);this.yc("fa fa-map-o");this.ld="projectionsettings"}w(dpa,uo);Q.directive("projectionsettings",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/config/projectionsettings.html",controller:BS,controllerAs:"projCtrl"}}]);
function BS(a){this.v=a;var b=L.s().X();H(b,"change:view",this.g,this);b=Nn(!0);b.sort(function(a,b){return Lb(a.code,b.code)});this.projections=b;epa(this);this.projection=this.appProjection;a.$on("$destroy",this.j.bind(this))}BS.$inject=["$scope"];BS.prototype.j=function(){var a=L.s().X();yf(a,"change:view",this.g,this);this.v=null};function epa(a){for(var b=a.projections,c=S.Rb,d=0,e=b.length;d<e;d++)if(b[d].code===c){a.appProjection=b[d];a.projection=a.appProjection;break}}
BS.prototype.g=function(){O(P.s(),"settings.projectionSwitch",1);epa(this);R(this.v)};BS.prototype.apply=function(){UQ.s().start(this.projection.code)};BS.prototype.apply=BS.prototype.apply;Q.directive("servers",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/config/servers.html",controller:CS,controllerAs:"servers"}}]);function CS(a){this.v=a;var b=Y;b.H("addDataProvider",this.zi,!1,this);b.H("removeDataProvider",this.zi,!1,this);this.zi();a.$on("$destroy",this.qL.bind(this))}CS.$inject=["$scope"];var DS=E.V("os.ui.ServersCtrl");g=CS.prototype;
g.qL=function(){if(this.v&&this.v.data)for(var a=this.v.data,b=0,c=a.length;b<c;b++)a[b].item.M("propertychange",this.dr,!1,this);a=Y;a.M("addDataProvider",this.zi,!1,this);a.M("removeDataProvider",this.zi,!1,this);this.v=null};
g.zi=function(){if(this.v){var a=Y.o.na();this.v.all=!0;var b=[];if(a)for(var c=0,d=0,e=a.length;d<e;d++){var f=a[d];f.Ck&&(b.push({id:c,enabled:f.kc(),edit:f.Pe,loading:!1,error:f.getError(),label:f.ba(),item:f}),f instanceof hF&&(b[b.length-1].loading=f.ob()),f.kc()||(this.v.all=!1),f.M("propertychange",this.dr,!1,this),f.H("propertychange",this.dr,!1,this),c++)}this.v.data=b;this.apply()}};g.dr=function(a){a=a.j;"loading"!==a&&"error"!==a||this.zi()};g.apply=function(){R(this.v)};
g.update=function(a){if(this.v){void 0===a&&(a=!0);var b=this.v.data;if(b){this.v.all=!0;for(var c=0,d=b.length;c<d;c++){var e=b[c].enabled,f=b[c].item;if(f.kc()!==e){if(!e&&a&&fpa(this,f,this.update.bind(this,!1),!1))continue;var h=Y,k=f.D(),l=e;if(k=h.rb(k))k.Za(l),h.dispatchEvent(new bF("editDataProvider",k));e&&f.load()}M.set([f.Pe?"userProviders":"providers",f.D(),"enabled"],e);e||(ES(f,!0),this.v.all=!1)}}}};CS.prototype.update=CS.prototype.update;
function fpa(a,b,c,d){var e=ES(b);return 0<e.length?(b='The "'+b.ba()+'" server is currently providing the following active layers:<ul><li>'+e.join("</li><li>")+"</li></ul>Disabling this server will remove these layers. Are you sure you wish to disable the server?",d&&(b=b.replace("Disabling","Removing"),b=b.replace("disable","remove")),gD({confirm:c,cancel:a.zi.bind(a),prompt:b,yesText:"Yes",noText:"No",noIcon:"fa fa-remove",windowOptions:{label:"Active Layers Exist",icon:"fa fa-warning",x:"center",
y:"center",width:"400",height:"auto",modal:"true",headerClass:"bg-warning u-bg-warning-text"}}),!0):!1}function ES(a,b){a=Qw(Y,a.D()+"#");var c=[];if(a)for(var d=0,e=a.length;d<e;d++)a[d].isActive()&&(c.push(a[d].S()),b&&a[d].setActive(!1));return c}CS.prototype.yi=function(){var a=this.v.data;if(a){for(var b=0,c=a.length;b<c;b++)a[b].enabled=this.v.all;this.update()}};CS.prototype.toggleAll=CS.prototype.yi;
CS.prototype.add=function(){O(P.s(),"servers.addServer",1);var a=new TM;PM(a,new Mw("importUrl"));OM(a)};CS.prototype.add=CS.prototype.add;CS.prototype.Rc=function(a){var b=GM.s();a:{var c=Y;for(var d in c.l){var e=c.l[d];if(e.g===a.constructor){c=e.type;break a}}c=null}b=kka(b,c);a.Pe?O(P.s(),"servers.edit",1):O(P.s(),"servers.view",1);b?b.Jb(null,{provider:a,type:c}):(a='There is no import UI defined for "'+c+'".',rj(qj.s(),a,Qh),E.error(DS,a))};CS.prototype.edit=CS.prototype.Rc;
CS.prototype.remove=function(a,b){void 0===b&&(b=!0);O(P.s(),"servers.delete",1);if(!(0<ES(a,!b).length&&b&&fpa(this,a,this.remove.bind(this,a,!1),!0))){b=M;var c=["userProviders",a.D()];"string"==typeof c&&(c=c.split("."));var d=b.get(c);di(b.o,c);var e=ni(c);di(b.j.user,e);"object"===ya(d)?Qj(c,void 0,d):ib(gi,li(c.join(".")));Ij(b,c,void 0,d);rF(Y,a.D());E.info(DS,'Removed provider "'+a.ba()+'"')}};CS.prototype.remove=CS.prototype.remove;
CS.prototype.refresh=function(a){E.info(DS,'Refreshing provider "'+a.ba()+'"');O(P.s(),"servers.refresh",1);a instanceof hF?a.ob()||a.load(!0):a.load(!0)};CS.prototype.refresh=CS.prototype.refresh;function FS(){uo.call(this);this.Da("Data Servers");this.fb("Add and configure data servers");this.vb(["servers","data","provider"]);this.yc("fa fa-database");this.ld="servers"}w(FS,uo);FS.prototype.D=function(){return"servers"};function gpa(){uo.call(this);this.Da("Theme");this.fb("Set Application Theme");this.vb(["Theme"]);this.yc("fa fa-paint-brush");this.ld="themesettings"}w(gpa,uo);var hpa={Default:"overrides_slate_compact"};Q.directive("themesettings",[function(){return{restrict:"E",templateUrl:"v1541734487/views/config/themesettings.html",controller:GS,controllerAs:"ctrl"}}]);
function GS(a){this.v=a;this.themes=M.get("themes",hpa);this.theme=M.get("theme","Default");M.H("theme",this.g,!1,this);a.$on("$destroy",this.j.bind(this))}GS.$inject=["$scope"];GS.prototype.j=function(){M.M("theme",this.g,!1,this);this.v=null};GS.prototype.g=function(a){a.l&&a.l!==this.theme&&(this.theme=a.l,R(this.v))};GS.prototype.kK=function(a){a!=this.theme&&M.set("theme",this.theme)};GS.prototype.onThemeChange=GS.prototype.kK;var HS=null;
function ipa(){return new Kc(function(a,b){var c=/(themes\/).*?(\..*\.css)/,d=$("[rel=stylesheet]");d=eb(d,function(a){return c.test(a.href)});var e=M.get("theme","Default"),f=M.get("themes",hpa);f[e]||(e="Default",M.set("theme",e));if(e=f[e]){var h=d.href.replace(c,"$1"+e+"$2");d.href!=h?(HS&&(HS.cancel(),HS=null),HS=jpa(h,e).then(function(){HS=null;kpa();a()},function(c){c instanceof $c?a():(HS=null,b('Failed loading the application theme: could not load CSS for "'+h+'".'))})):a()}else b("Failed loading the application theme: default theme is missing.")})}
function lpa(){ipa()}function jpa(a,b){return new Kc(function(c,d){var e=$('<link rel="stylesheet" type="text/css" href="'+a+'"></link>');$("head").append(e);e=new ij(mpa.bind(void 0,b));e.Ph=function(){zk?zk.get("$timeout")(function(){c()},200):c()};e.rj=function(){d()};e.start(50,15E3)})}
function mpa(a){var b=$(".u-loaded-theme");b&&b.length||(b=$('<div class="u-loaded-theme" style="position: absolute; left: -9999px"></div>'),$("body").append(b));return b&&b.length?window.getComputedStyle(b[0],":before").content.replace(/^['"](.*)['"]$/,"$1")===a:!1}function kpa(){var a=/(themes\/).*?(\..*\.css)/,b=$("[rel=stylesheet]");b=ab(b,function(b){return a.test(b.href)});for(var c=0;c<b.length-1;c++)$(b[c]).remove();N&&N.dispatchEvent(new A(IS))}var IS="theme.changed";function npa(){uo.call(this);this.Da("Units");vo(this);this.fb("Units of Measure");this.vb(["Metric","Imperial","Nautical"]);this.yc("fa fa-calculator");this.ld="unitsettings"}w(npa,uo);Q.directive("unitsettings",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/config/unitsettings.html",controller:JS,controllerAs:"unitsCtrl"}}]);
function JS(a){this.v=a;this.g=au.s();this.g.H("propertychange",this.j,!1,this);var b=this.g.l;this.allUnits=[];for(var c in b){var d=b[c].distance;d&&this.allUnits.push({title:d.S(),system:d.wf()})}this.units=this.g.g;this.v.$watch("unitsCtrl.units",this.o.bind(this));a.$on("$destroy",this.l.bind(this))}JS.$inject=["$scope"];JS.prototype.l=function(){this.g.M("propertychange",this.j,!1,this);this.v=this.g=null};JS.prototype.j=function(a){(a=a.o)&&a!==this.units&&(this.units=a,R(this.v))};
JS.prototype.o=function(a,b){this.g&&a&&b&&a!==b&&bu(this.g,a)};function opa(a){return function(b){b=Ak(b);b=b.replace(/\[([^|]+)\|([^\]]+)\]/g,"<a onclick=\"$(this).scope().$emit('dispatch','$2')\">$1</a>");return a.trustAsHtml(b)}}opa.$inject=["$sce"];Q.filter("alertlink",["$sce",opa]);Q.directive("alertPopup",[function(){return{replace:!0,restrict:"AE",scope:!0,templateUrl:"v1541734487/views/alert/alertpopup.html",controller:KS,controllerAs:"alertPopupCtrl"}}]);function KS(a){this.v=a;this.o=0;this.g=null;this.j=!1;this.l=null;this.alertPopups=[];tj||(tj=qj.s());sj(tj,"alertpopups",this.u,this);tj.H("alert",this.u,!1,this);tj.H("clearAlerts",this.Hh,!1,this);a.$on("dispatch",ppa);a.$on("$destroy",this.B.bind(this))}KS.$inject=["$scope"];
KS.prototype.B=function(){tj.M("alert",this.u,!1,this);tj.M("clearAlerts",this.Hh,!1,this);this.g&&(this.g.dispose(),this.g=null);this.v=this.Na=null};KS.prototype.u=function(a){if(this.l)if(a.l==this.l.l){this.g||(this.g=new Fh(this.A,1E4,this));this.g.start();this.o++;var b=a.O;this.o>=b&&!this.j&&(this.j=!0,5==b&&(b=new Uh("Too many duplicate alerts received! Open the alert window for details.",Rh),qpa(this,b)))}else this.A();this.l=a;this.j||qpa(this,a)};
KS.prototype.A=function(){this.o=0;this.j=!1;this.l=null;this.g&&(this.g.dispose(),this.g=null)};
function qpa(a,b){if(M.l?M.get(["showAlertPopups"],!0):1){var c=Vb(),d=function(a){if(this.v){var b=a.target.msg;a="";a=b?fb(this.alertPopups,function(a){return a.msg==b}):fb(this.alertPopups,function(a){return a.id==c});-1!=a&&(this.alertPopups.splice(a,1),R(this.v))}},e=b.K;if(!e){e=new C;var f=a.v,h=function(){f.hovered?setTimeout(h,1E3):e.dispatchEvent("dismissAlert")};setTimeout(h,1E4)}e.Ua("dismissAlert",d,!1,a);var k=b.l;b={id:c,msg:Pb(k,500),tooltip:k,severity:b.u.toString(),timeout:d};a.alertPopups.push(b);
R(a.v)}}KS.prototype.Hh=function(){if(this.alertPopups&&this.v){for(var a=0;a<this.alertPopups.length;a++)this.alertPopups[a].canClose&&clearTimeout(this.alertPopups[a].timeout);this.alertPopups=ab(this.alertPopups,function(a){return!a.canClose});R(this.v)}};KS.prototype.clearAlerts=KS.prototype.Hh;KS.prototype.wD=function(a,b){if(M.l?M.get(["showAlertPopups"],!0):1)this.alertPopups.splice(a,1),clearTimeout(b.timeout);N.dispatchEvent(new A("dismissAlert",b))};KS.prototype.dismissAlert=KS.prototype.wD;
function ppa(a,b){N.dispatchEvent(b)};function rpa(){var a=zk.get("$compile"),b=zk.get("$rootScope").$new();a=a("<alert-popup></alert-popup>")(b)[0];FN.call(this,{element:a})}w(rpa,FN);function LS(a){GN.call(this,a)}w(LS,GN);LS.prototype.Kp=function(a){for(var b={},c=[],d=a.layerStatesArray,e=a.viewState.resolution,f=0,h=d.length;f<h;++f){var k=d[f],l=k,m=e;if(l.layer.yb()&&m>=l.minResolution&&m<l.maxResolution&&(k=k.layer.N())&&(k=k.Ol)&&(k=k(a)))if(Array.isArray(k))for(l=0,m=k.length;l<m;++l)k[l]in b||(c.push(k[l]),b[k[l]]=!0);else k in b||(c.push(k),b[k]=!0)}return c};
LS.prototype.gw=function(a){if(a){if(a=this.Kp(a),!Xl(a,this.A)){ir(this.g);var b=1<a.length?tk("li",void 0,"Sources:"):tk("li",void 0,"Source:");var c=gr(b);this.g.appendChild(c);c=0;for(var d=a.length;c<d;++c)b=tk("li",void 0,a[c]),b=gr(b),this.g.appendChild(b);c=0<a.length;this.j!=c&&(this.element.style.display=c?"":"none",this.j=c);this.A=a}}else this.j&&(this.element.style.display="none",this.j=!1)};GN.prototype.Dv=wa;function MS(a){a=a?a:{};var b=null!=a.className?a.className:"ol-mapmode",c=null!=a.textClass?a.textClass:"ol-mapmode-text";this.j=a.tipLabel?a.tipLabel:"Toggle 2D/3D view";this.content=dr("SPAN",c);this.g=dr("I","fa fa-spin fa-spinner");this.button=dr("BUTTON",{"class":b+"-toggle",type:"button",title:this.j},this.content);H(this.button,"click",MS.prototype.l,this);b=dr("DIV",b+" ol-unselectable ol-control",this.button);FN.call(this,{element:b,target:a.target});spa(this);L.s().H("propertychange",this.u,
!1,this)}w(MS,FN);MS.prototype.J=function(){L.s().M("propertychange",this.u,!1,this);this.button&&(yf(this.button,"click",MS.prototype.l,this),this.button=void 0);this.g=this.content=void 0};MS.prototype.l=function(a){a.preventDefault();N.dispatchEvent("toggleView")};MS.prototype.u=function(a){a=a.j;"map:change:init3d"!==a&&"map:change:view3d"!==a||spa(this)};
function spa(a){if(a.button&&a.content&&a.g){var b=L.s();b.o?(or(a.content,""),a.content.appendChild(a.g),a.button.title="Initializing 3D view"):(Ik(a.g),or(a.content,b.Qa()?"3D":"2D"),a.button.title=a.j)}};function NS(a){a=a||{};a.autoHide=!1;a.render=tpa;HN.call(this,a)}w(NS,HN);NS.prototype.l=function(){var a=L.s();a.Qa()?a.nl():NS.C.l.call(this)};function tpa(a){var b=L.s();if(b.Qa()){a=yP(b);if(!a)return;a=a.Cp()}else{a=a.frameState;if(!a)return;a=a.viewState.rotation}if(a!=this.g){b="rotate("+a+"rad)";if(this.j){var c=this.element;0===a?qD(c,"ol-hidden"):rD(c,"ol-hidden")}this.Sb.style.msTransform=b;this.Sb.style.webkitTransform=b;this.Sb.style.transform=b}this.g=a};function OS(a){a=a?a:{};var b=void 0!==a.className?a.className:"ol-scale-line";this.j=document.createElement("DIV");this.j.className=b+"-inner";this.L=document.createElement("DIV");this.L.className=b+" ol-unselectable";this.L.appendChild(this.j);this.A=null;this.l=void 0!==a.minWidth?a.minWidth:64;this.g=!1;this.B=void 0;this.u="";FN.call(this,{element:this.L,render:a.render?a.render:upa,target:a.target});H(this,Jf(PS),this.G,this);this.cd(a.units||"metric")}I(OS,FN);var vpa=[1,2,5];
OS.prototype.Tc=function(){return this.get(PS)};function upa(a){(a=a.frameState)?this.A=a.viewState:this.A=null;this.Jq()}OS.prototype.G=function(){this.Jq()};OS.prototype.cd=function(a){this.set(PS,a)};
OS.prototype.Jq=function(){var a=this.A;if(a){var b=a.center,c=a.projection,d=this.Tc();a=Bl(c,a.resolution,b,"degrees"==d?"degrees":"m");"degrees"!=d&&(a*=ml(c));var e=this.l*a;b="";"degrees"==d?(b=kl.degrees,"degrees"==c.Tc()?e*=b:a/=b,e<b/60?(b="\u2033",a*=3600):e<b?(b="\u2032",a*=60):b="\u00b0"):"imperial"==d?.9144>e?(b="in",a/=.0254):1609.344>e?(b="ft",a/=.3048):(b="mi",a/=1609.344):"nautical"==d?(a/=1852,b="nm"):"metric"==d?.001>e?(b="\u03bcm",a*=1E6):1>e?(b="mm",a*=1E3):1E3>e?b="m":(b="km",
a/=1E3):"us"==d?.9144>e?(b="in",a*=39.37):1609.344>e?(b="ft",a/=.30480061):(b="mi",a/=1609.3472):Mf(!1,33);for(d=3*Math.floor(Math.log(this.l*a)/Math.log(10));;){e=vpa[(d%3+3)%3]*Math.pow(10,Math.floor(d/3));c=Math.round(e/a);if(isNaN(c)){this.L.style.display="none";this.g=!1;return}if(c>=this.l)break;++d}a=e+" "+b;this.u!=a&&(this.u=this.j.innerHTML=a);this.B!=c&&(this.j.style.width=c+"px",this.B=c);this.g||(this.L.style.display="",this.g=!0)}else this.g&&(this.L.style.display="none",this.g=!1)};
var PS="units";function QS(a){OS.call(this,a);a=au.s();this.cd(a.g);a.H("propertychange",this.Wx,!1,this)}w(QS,OS);g=QS.prototype;g.J=function(){au.s().M("propertychange",this.Wx,!1,this);QS.C.J.call(this)};g.Wx=function(a){a=a.o;"string"===typeof a&&a!=this.Tc()&&this.cd(a)};g.hide=function(){this.g&&(this.L.style.display="none",this.g=!1)};
g.Jq=function(){var a=this.A;if(a){var b=this.X(),c=b.getPixelFromCoordinate(a.center);if(c)if(c[0]+=1,b=b.getCoordinateFromPixel(c)){a=Ml(a.center,S);b=Ml(b,S);a=window.osasm?osasm.geodesicInverse(a,b).distance:NaN;c=this.l*a;b="";var d=this.Tc();"degrees"==d?(b=kl.degrees,a/=b,c<b/60?(b="\u2033",a*=3600):c<b?(b="\u2032",a*=60):b="\u00b0"):"imperial"==d?.9144>c?(b="in",a/=.0254):1609.344>c?(b="ft",a/=.3048):(b="mi",a/=1609.344):"nautical"==d||"nauticalmile"==d?(a/=1852,b="nmi"):"metric"==d?1>c?(b=
"mm",a*=1E3):1E3>c?b="m":(b="km",a/=1E3):"us"==d?.9144>c?(b="in",a*=39.37):1609.344>c?(b="ft",a/=.30480061):(b="mi",a/=1609.3472):"mile"==d?(b="mi",a/=1609.3472):"yard"==d?(b="yd",a*=1.09361):"feet"==d?(b="ft",a/=.30480061):Mf(!1,33);for(var e=3*Math.floor(Math.log(this.l*a)/Math.log(10));;){d=vpa[(e%3+3)%3]*Math.pow(10,Math.floor(e/3));c=Math.round(d/a);if(isNaN(c)){this.L.style.display="none";this.g=!1;return}if(c>=this.l)break;++e}a=d;if(.01>d||1E4<d)a=d.toExponential();a=a+" "+b;this.u!=a&&this.j&&
(b=pk(a),this.j.innerHTML=ok(b),this.u=a);this.B!=c&&(this.j.style.width=c+"px",this.B=c);this.g||(this.L.style.display="",this.g=!0)}else this.hide();else this.hide()}else this.hide()};g.ub=function(){return this.L};function RS(a){IN.call(this,a)}w(RS,IN);RS.prototype.g=function(a){var b=L.s();if(b.Qa()){if(b=yP(b))a=ina(!0,0>a),b.Jo(a)}else RS.C.g.call(this,a)};function wpa(){var a=[],b=new QS({className:"ol-scale-line",target:document.getElementById("scale-line")}),c=b.ub();c.className+=" position-relative";a.push(b);if(c=document.getElementById("mouse-position"))b=new PQ({projection:"EPSG:4326",className:"ol-mouse-position",target:c,undefinedHTML:"&nbsp;",WO:!0}),c=b.ub(),c.className+=" position-relative",a.push(b);b=new FP({target:document.getElementById("zoom-level")});c=b.ub();c.className+=" position-relative";a.push(b);c=new RS;a.push(c);c=new NS;
a.push(c);c=new MS;a.push(c);c=new rpa;a.push(c);c=new LS({collapsible:!1});a.push(c);return new ju(a)};function xpa(a,b){var c=a.N();if(c&&qJ(c)){a=lia(c,b);var d=c.G;if(d&&(b.showAuto||b.showManual)){var e=d.g?d.g.g:null;if(e){c=e.qd()+": ";var f={},h=d.j;if(b.showManual&&h)for(var k in h)f[k]=h[k];d=d.l;if(b.showAuto)for(k in d)k in h||(f[k]=d[k]);h=jc(f);!b.showColumn&&0<h.length&&(c="",a.image&&a.image.fill&&(a.image.fill.color="rgba(0,0,0,0)"),a.stroke&&(a.stroke.color="rgba(0,0,0,0)"),d=b.showVector?10:0,rJ(a,b,e.qd(),d,!0));if(0<h.length)for(h.sort(e instanceof kJ?kia:xb),e=0;e<h.length;e++)k=
h[e],a.image&&a.image.fill&&(a.image.fill.color=f[k]),a.stroke&&(a.stroke.color=f[k]),d=0,b.showVector&&(d+=10),b.showColumn||(d+=10),rJ(a,b,c+k,d)}}}}Q.directive("colormodellegendsettings",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/data/histo/colormodellegendsettings.html"}}]);lw("*/*",function(a){return Sc(!(!a||!a.byteLength))},1E6);lw("text/xml",function(a,b,c){var d;if(c&&"string"===typeof c){var e=xmlLexer.create(),f=["open-tag"],h="",k=!1,l=function(a){if(-1<f.indexOf(a.type))if("open-tag"===a.type){if(d)e.off("data",l);else{var b=a.value.indexOf(":"),m=a.value;-1<b&&(h=":"+a.value.substring(0,b),m=a.value.substring(b+1));d={content:c,vA:m,Rs:"",gD:a.value}}f.push("attribute-name")}else"attribute-name"===a.type?(f.pop(),a.value==="xmlns"+h&&(k=!0),f.push("attribute-value")):"attribute-value"===a.type&&(f.pop(),k&&(d.Rs=a.value),
k=!1,f.push("attribute-name"));else d=void 0};e.on("data",l);a=c.replace(/\s*\x3c!--[^]*?(--\x3e|$)\s*/g,"");e.write(a);d&&(b=a.indexOf("<"+d.gD),-1<b?(a=a.substring(0,b),a=a.replace(/^\s*<\?xml .*?\?>\s*/g,""),(a=a.replace(/^\s*<!.*?>\s*/g,"").trim())&&(d=void 0)):d=void 0)}return Sc(d)},0,"text/plain");
function SS(a,b){if(!a&&!b)throw Error("At least one of the [rootTagRegex, rootNSRegex] must be defined and not null");return function(c,d,e){var f;!e||b&&!b.test(e.Rs)||a&&!a.test(e.vA)||(f=e);return Sc(f)}};lw("text/xml; subtype=FILTER",SS(/^filters$/i,/\/state\//i),0,"text/xml");var ypa=[239,187,191];function TS(){}TS.prototype.ba=function(){return"File"};TS.prototype.save=function(a,b,c){return US(a,b,c)};function US(a,b,c){c=c||"text/plain;charset=utf-8";if("undefined"!=typeof saveAs){var d=[];"string"===typeof b&&b.startsWith("\ufeff")&&(d.push(new Uint8Array(ypa)),b=b.replace("\ufeff",""));d.push(b);saveAs(new Blob(d,{type:c}),a);return!0}return"undefined"!=typeof saveTextAs&&"string"===typeof b?(saveTextAs(b,a),!0):!1};function VS(){this.g=null;this.j={}}VS.prototype.Cb=function(a){a instanceof ArrayBuffer&&(a=Dw(a)||null);a instanceof Document?this.g=a:"string"===typeof a&&(this.g=Wx(a))};VS.prototype.pc=function(){this.j=this.g=null};VS.prototype.Cd=function(){return null!=this.g};
VS.prototype.Zc=function(){if(this.g){var a=null,b=kr(this.g),c=b.localName?b.localName.toLowerCase():"";this.g=null;if("filters"==c)a=zpa(this,b);else if("state"==c)a=zpa(this,b);else if("pqs"==c){a=b.querySelector("attributeFilter");c=b.querySelector("typeName");b=[];if(a&&c){a=jr(a)||[];c=c.textContent;for(var d=0;d<a.length;d++){a:{var e=a[d];var f=null;if(e){var h=e.getAttribute("namehint")||"",k=Xx(e);k=k.replace(/xmlns=("|')[^"']*("|')/g,"");k=k.replace(/ogc:/g,"");k=k.replace(/>\s+</g,"><");
if(this.j[k+h]){e=null;break a}this.j[k+h]=!0;f=new bC;f.rg(k);f.fb(e.getAttribute("description")||"");f.Ta(h)}e=f}e&&(e.type=c,b.push(e))}}a=b}return a}return null};
function zpa(a,b){b=b.querySelectorAll("filter");var c=[];if(b&&0<b.length)for(var d=0;d<b.length;d++){a:{var e=a,f=b[d];var h=[];var k=jr(f);if(k&&0<k.length){var l=f.getAttribute("title")||"",m=f.getAttribute("match"),n=f.getAttribute("type")||"";k=Xx(k[0]);k=k.replace(/xmlns=("|')[^"']*("|')/g,"");k=k.replace(/ogc:/g,"");k=k.replace(/>\s+</g,"><");if(e.j[k+l]){h=null;break a}e.j[k+l]=!0;e=new bC;e.rg(k);n=PC(n);if(0<n.length)for(e.fb(f.getAttribute("description")),e.Ta(l),e.Ub(n[0]),e.Za(!0),e.Xh=
m?"AND"==m.toUpperCase():!0,h.push(e),f=1,l=n.length;f<l;f++)m=e.clone(),m.ga(Vb()),m.Ub(n[f]),h.push(m)}h=0<h.length?h:null}h&&(c=c.concat(h))}return c};Q.directive("layerpicker",[function(){return{restrict:"AE",replace:!0,scope:{layer:"=?",layers:"=?",isRequired:"=?",layersFilter:"&?",maxNumLayers:"@?",formatter:"=?",matcher:"=?",placeholderText:"@?",emitName:"@?"},templateUrl:"v1541734487/views/layer/layerpicker.html",controller:WS,controllerAs:"pickerCtrl"}}]);
function WS(a,b,c){this.v=a;this.o=this.v.maxNumLayers?this.v.maxNumLayers:1;this.Mh=this.v.layersFilter?this.v.layersFilter:this.u;this.G=this.v.placeholderText||"Select Layer"+(this.multiple()?"s":"")+"...";this.l=null!=this.v.emitName?this.v.emitName:"layerpicker";this.layersList=this.Mh();var d=a.formatter||this.I,e=a.matcher||this.A;null==a.isRequired&&(a.isRequired=!0);this.Na=c;c(function(){this.g=b.find(".js-layer-picker");this.g.select2({placeholder:this.G,maximumSelectionSize:this.o,matcher:e,
formatSelection:d,formatResult:d});this.j()}.bind(this));this.v.$watch("layer",this.j.bind(this));this.v.$watch("layers",this.j.bind(this));this.v.$on("updateLayers",t(function(){this.layersList=this.Mh()},this));this.v.$on("$destroy",this.B.bind(this))}WS.$inject=["$scope","$element","$timeout"];WS.prototype.B=function(){this.g=this.v=null};WS.prototype.j=function(){void 0!==this.v.layer?Apa(this):Bpa(this)};
function Bpa(a){if(a.g){var b=[];a.v.layers&&$a(a.v.layers,function(a){var c=eb(this.layersList,function(b){return b.D()==a.D()});c&&b.push(c.$$hashKey)},a);a.g.select2("val",b)}}function Apa(a){if(a.g){var b=null;if(a.v.layer){var c=eb(a.layersList,function(a){return a.D()==this.v.layer.D()},a);c&&(b=c.$$hashKey)}a.g.select2("val",b)}}WS.prototype.u=function(){return Qw(Y)};WS.prototype.pG=function(a){this.v.layer=a;this.v.$emit(this.l+".layerselected",a)};WS.prototype.layerPicked=WS.prototype.pG;
WS.prototype.qG=function(a){this.v.layers=a;this.Na(function(){this.v.$emit(this.l+".layerschanged",a)}.bind(this))};WS.prototype.layersChanged=WS.prototype.qG;WS.prototype.multiple=function(){return 1!=this.o};WS.prototype.multiple=WS.prototype.multiple;
WS.prototype.I=function(a){if(a){a=Y.Ka(a.text);var b="";if(a){b=a.S()+" "+(a.wp()||"");var c=a.Ja();c=c?ef(c):"white";b='<span title="'+(a.qb()||"No Description")+'"><i class="fa fa-bars mr-1" style="color:'+c+';"></i>'+b;a.rb()&&(b+=" ("+a.rb()+")");b+="</span>"}return b}return""};WS.prototype.A=function(a,b){if(b=Y.Ka(b))if(b=b.S()+" "+(b.wp()||""))return Qb(b.toLowerCase(),a.toLowerCase());return!1};function XS(){return{restrict:"E",scope:{filterData:"=",layerId:"=?"},replace:!0,templateUrl:"v1541734487/views/filter/im/filterimport.html",controller:YS,controllerAs:"ctrl"}}Q.directive("filterimport",[XS]);
function YS(a,b,c){this.scope=a;this.element=b;this.o=c;this.u=a.filterData;this.columns=null;this.l="filter";this.found=this.layer=null;this.notFound=[];this.notFoundCount=this.foundCount=0;this.hasUnmatchedFilters=!1;this.showMatch=!0;this.groups=ZG;b=Qw(Y);c=[];for(var d=0,e=b.length;d<e;d++){var f=b[d];try{f.Zg()&&c.push(f)}catch(h){}}this.A=c;b=new CM(this.Vy());b.Ua("complete",this.JL,!1,this);SK(b,this.u);a.$watch("ctrl.layer",this.KL.bind(this));a.$on("$destroy",this.IL.bind(this))}
YS.$inject=["$scope","$element","$sce"];g=YS.prototype;g.IL=function(){this.o=this.element=this.scope=null};g.Vy=function(){return new VS};
g.JL=function(a){var b=a.target;a=b.getData();b.dispose();b={};for(var c=[],d=0,e=0,f=a.length;e<f;e++){var h=a[e],k=h.S(),l=h.T(),m=this.Wu(h),n=this.scope.layerId,p=OC.rd(l),r=!1;if(p){var u=ZS(k,h,m);b[l]?b[l].filterModels.push(u):(r=this.g(p),p=$S(this,p,l),r=aT(this,p,r,h.Xh,u),b[l]=r);d++;r=!0}if(n&&!r&&(p=OC.rd(n),u=p.Se(),h.matches(u))){var v=h.clone();v.ga(Vb());v.Ub(n);u=ZS(k,v,m);b[n]?b[n].filterModels.push(u):(r=this.g(p),p=$S(this,p,l),r=aT(this,p,r,v.Xh,u),b[n]=r);d++;r=!0}r||(u=ZS(h.S(),
h,m,l.replace(/_/g," "),!1),c.push(u))}this.found=b;this.notFound=c;this.foundCount=d;this.scope.layerId&&(this.layer=Y.Ka(this.scope.layerId));this.hasUnmatchedFilters=!this.layer&&!!this.notFound.length;R(this.scope)};function ZS(a,b,c,d,e){return{title:a,filter:b,tooltip:c,type:d,matches:e}}g.Wu=function(a){return KC(cC(a),1E3)};function aT(a,b,c,d,e){return{layerTitle:b,layerIcon:a.o.trustAsHtml(c),match:d,filterModels:[e]}}
g.KL=function(a){this.columns=[];try{if(F(a,"os.ui.ogc.IOGCDescriptor"))if(a.zk()){var b=a.ze();b&&(this.columns=b.getColumns())}else{var c=this.bF.bind(this,a);a.K=c}else F(a,"os.filter.IFilterable")&&(this.columns=a.Se())}catch(d){}finally{Cpa(this)}};g.bF=function(a){if(a=a.ze())this.columns=a.getColumns()||[],Cpa(this)};
function Cpa(a){a.hasMatchedFilters=!1;a.hasUnmatchedFilters=!1;for(var b=0,c=a.notFound.length;b<c;b++){var d=a.notFound[b];d.matches=a.columns?d.filter.matches(a.columns):!1;d.matches?a.hasMatchedFilters=!0:a.hasUnmatchedFilters=!0}R(a.scope)}g.Mh=function(){return this.A};YS.prototype.getLayersFunction=YS.prototype.Mh;YS.prototype.removeLayer=function(a){if(a&&this.found[a]){var b=this.found[a];b&&b.filterModels&&(this.foundCount-=b.filterModels.length);delete this.found[a]}};
YS.prototype.removeLayer=YS.prototype.removeLayer;YS.prototype.Oo=function(){var a=this.layer;if(F(a,"os.filter.IFilterable")){for(var b=this.notFound.length,c=0;b--;){var d=this.notFound[b];if(d.matches){this.notFound.splice(b,1);for(var e=a.pm(),f=0,h=e.length;f<h;f++){var k=e[f];d.filter.Ub(k);c++;if(this.found[k])this.found[k].filterModels.push(d);else{var l=this.g(a),m=$S(this,a,k);l=aT(this,m,l,d.filter.Xh,d);this.found[k]=l}}}}this.foundCount+=c}this.hasMatchedFilters=this.notFound.some(function(a){return!!a.matches})};
YS.prototype.addNotFound=YS.prototype.Oo;
YS.prototype.finish=function(){var a=0,b=[];this.Oo();for(var c in this.found){var d=this.found[c],e=d.filterModels;d=d.match;for(var f=0,h=e.length;f<h;f++){var k=e[f].filter;rE(OC,k);k={layerId:c,filterId:k.D(),areaId:"*",includeArea:!0,filterGroup:d};b.push(k);a++}e=lE.getEntries(c);f=0;for(h=e.length;f<h;f++)k=e[f],"*"!==k.filterId&&(k.filterGroup=d)}0<b.length&&oE(lE,b);b=qj.s();0<a?rj(b,"Successfully imported <b>"+a+(1==a?"</b> filter.":" filters."),Sh):rj(b,"No filters were imported!",Rh);
kx(this.element)};YS.prototype.finish=YS.prototype.finish;YS.prototype.cancel=function(){kx(this.element)};YS.prototype.cancel=YS.prototype.cancel;YS.prototype.yp=function(){return"fa-filter"};YS.prototype.getFilterIcon=YS.prototype.yp;YS.prototype.kE=function(a){return this.l+(1==a?"":"s")};YS.prototype.getFilterTitle=YS.prototype.kE;YS.prototype.j=function(a){var b=null;F(a,"os.data.IDataDescriptor")&&(b=a.rb());return b};
function $S(a,b,c){var d=b.S(),e=c.indexOf("#"),f=c.lastIndexOf("#");e!==f&&(d+=" "+ac(c.substring(f+1)));(a=a.j(b))&&(d+=" ("+a+")");return d}YS.prototype.g=function(a){var b="";F(a,"os.data.IDataDescriptor")&&(a=(a=a.Ja())?ef(a):"#fff",b='<i class="fa fa-bars" style="color:'+ef(a)+'"></i>');return b};Q.directive("osfilterimport",[function(){var a=XS();a.controller=bT;return a}]);function bT(a,b,c){YS.call(this,a,b,c)}w(bT,YS);bT.$inject=["$scope","$element","$sce"];bT.prototype.j=function(a){var b=bT.C.j.call(this,a);!b&&F(a,"os.layer.ILayer")&&(b=a.rb());return b};bT.prototype.g=function(a){if(F(a,"os.layer.ILayer")){var b=a.Va().color;if(b)return'<i class="fa fa-bars" style="color:'+ef(b)+'"></i>'}return bT.C.g.call(this,a)};function cT(){this.j=!1}cT.prototype.S=function(){return""};cT.prototype.g=function(a,b){b.color=a.color;b.description=a.description;b.mappings=a.mappings;b.tags=a.tags;b.title=a.title};function dT(){this.j=!0}w(dT,cT);dT.prototype.g=function(a,b){dT.C.g.call(this,a,b);b.descriptor=a.descriptor;b.file=a.file;b.oldFile=a.oldFile;b.replace=a.replace};dT.prototype.Jb=function(a){if(a){var b=a.T();b&&(b=xw(b))&&-1<b.indexOf("text/plain")&&Cw(a)}};function eT(){dT.call(this);this.label="Import Filters";this.j=!1}w(eT,dT);eT.prototype.Jb=function(a,b){eT.C.Jb.call(this,a,b);var c={label:this.label,icon:"fa fa-sign-in",x:"center",y:"center",width:"700","min-width":"500","max-width":"900",height:"600","min-height":"300","max-height":"700",modal:"true","show-close":"true"},d;b&&(d=b.layerId);fx(c,this.l(),void 0,void 0,void 0,{filterData:a.Pb(),layerId:d})};eT.prototype.l=function(){return'<filterimport filter-data="filterData" layer-id="layerId"></filterimport>'};function fT(){eT.call(this)}w(fT,eT);fT.prototype.l=function(){return'<osfilterimport class="flex-column d-flex flex-fill" filter-data="filterData"  layer-id="layerId"></osfilterimport>'};function gT(a){CM.call(this,a);this.K=!1;N.H(Qx,this.ka,!1,this)}w(gT,CM);var Dpa=E.V("os.im.FeatureImporter");gT.prototype.J=function(){N.M(Qx,this.ka,!1,this);gT.C.J.call(this)};
gT.prototype.Kl=function(a){var b;a instanceof hq&&(b=a);if(b){if(b.ma){var c=b.ma;b.ga(J(b)+"");b.la.ID=c}else b.ga(J(b)+"");if(c=b){var d=c.Z();if(d){var e=nq(d);e!=d&&c.tb(e)}}}a&&(this.Vs(a),gT.C.Kl.call(this,a));b&&(a=b.la.recordTime,null==a||F(a,"os.time.ITime")||(b.set("RECORDTIME",a),b.set("recordTime",void 0)),b.hc=!0)};var hT=null,Epa=/[<>]/;
gT.prototype.Vs=function(a){if(hT){a=a.la;for(var b in a){var c=a[b];if("string"===typeof c&&Epa.test(c)){this.K&&!a._htmlDescription&&Rx.test(b)&&(a._htmlDescription=c);try{a[b]=hT(c).trim()}catch(d){E.error(Dpa,"Could not sanitize value"),a[b]="Error: Could not sanitize value"}}}}};gT.prototype.ka=function(){this.reset()};function iT(){JJ.call(this);this.g="BEARING";this.Fb=Fpa;this.u=this.o=this.units=null;this.j="Bearing"}w(iT,JJ);var Fpa=/(bear(i(n(g)?)?)?)|(cour(s(e)?)|head(i(n(g)?)?)?)\b/i;hy(fy.s(),"Bearing",iT);function jT(){oG.call(this);this.l=void 0}w(jT,oG);g=jT.prototype;g.clone=function(){var a=jT.C.clone.call(this);a.l=this.l;return a};g.ra=function(a){a=jT.C.ra.call(this,a);a.customFormat=this.l;return a};g.restore=function(a){jT.C.restore.call(this,a);this.l=a.customFormat};g.sc=function(){var a=jT.C.sc.call(this);Z("customFormat",a,dy(this.l||null));return a};g.fd=function(a){jT.C.fd.call(this,a);this.l=(a=ey(pG(a,"customFormat")))?a:void 0};g.Rj=function(a){return this.hf(a)?a:null};function kT(){jT.call(this);this.j="Latitude";this.u="LAT";this.type="Latitude";this.Fb=Gpa}w(kT,jT);hy(fy.s(),"Latitude",kT);var Gpa=/(\b|_)lat(i(t(u(d(e)?)?)?)?)?(\b|_)/i;g=kT.prototype;g.D=function(){return this.type};g.ba=function(){return this.type};g.lc=function(){return this.type&&this.ja?0==this.type.toLowerCase().indexOf(this.ja.toLowerCase())?11:10:kT.C.lc.call(this)};g.tk=function(){return"geom"};
g.Fa=function(a){if(this.ja){var b=ay(a,this.ja);null!=b&&(b=String(b).replace(Ep,""),b=Sp(b,this.l),isNaN(b)||(by(a,this.u,b),Hpa(a)))}};g.hf=function(a){return a?(a=Sp(String(a)),null!=a&&!isNaN(a)):!1};g.Rj=function(a,b){return a&&(a=Sp(String(a),b),null!=a&&!isNaN(a))?a.toString():null};function Hpa(a){if(!a.Z()){var b=a.get("LAT"),c=a.get("LON");void 0===b||isNaN(b)||"number"!==typeof b||void 0===c||isNaN(c)||"number"!==typeof c||(b=new hp([c,b]),a.hc=!1,a.tb(Ap(b)),a.hc=!0)}}
g.Wd=function(a){var b=null;if(a)for(var c=a.length,d=void 0;c--;){var e=a[c];if(e.Z())return null;if(d=cy(e,this.Fb,d))b=new this.constructor,b.ja=d}return b};function lT(){kT.call(this);this.u="LON";this.type="Longitude";this.Fb=Ipa;this.j="Longitude"}w(lT,kT);hy(fy.s(),"Longitude",lT);var Ipa=/(\b|_)lon(g(i(t(u(d(e)?)?)?)?)?)?(\b|_)/i;lT.prototype.Fa=function(a){if(this.ja){var b=ay(a,this.ja);null!=b&&(b=String(b).replace(Ep,""),b=Rp(b,this.l),isNaN(b)||(by(a,this.u,b),Hpa(a)))}};lT.prototype.hf=function(a){return a?(a=Rp(String(a)),null!=a&&!isNaN(a)):!1};lT.prototype.Rj=function(a,b){return a&&(a=Rp(String(a),b),null!=a&&!isNaN(a))?a.toString():null};function mT(){JJ.call(this);this.g="ORIENTATION";this.Fb=Jpa;this.u=this.o=this.units=null;this.j="Orientation"}w(mT,JJ);hy(fy.s(),"Orientation",mT);var Jpa=/(tilt|strike|orient(a(t(i(o(n)?)?)?)?)?)/i;function nT(a){jT.call(this);this.u=void 0!==a?a:0}w(nT,jT);nT.prototype.Fa=function(a){if(this.ja){var b=ay(a,this.ja)||"";if(b=Jb(b.replace(Ep,""))){var c=Op(b,this.u,this.l);if(c)a[this.ja]=[c.lon,c.lat];else throw Error('Could not parse coordinate from "'+b+'"!');}}};nT.prototype.hf=function(a){return a?null!=Op(String(a),this.u,void 0):!1};nT.prototype.Rj=function(a,b){return a&&(a=Op(String(a),this.u,b),null!=a)?a.lat.toString()+" "+a.lon.toString():null};function oT(){nT.call(this)}w(oT,nT);hy(fy.s(),"LatLon",oT);oT.prototype.Fa=function(a){if(this.ja){var b=ay(a,this.ja)||"";if(b=Jb(b.replace(Ep,""))){var c=Op(b,this.u,this.l);if(c)b=Ap(new hp([c.lon,c.lat])),a.hc=!1,a.tb(b),a.hc=!0;else throw Error('Could not parse coordinate from "'+b+'"!');}}};function pT(){jT.call(this)}w(pT,jT);pT.prototype.Fa=function(a){if(this.ja){var b=ay(a,this.ja);if(b)if(b=b.replace(/\s/g,""),b=b.toUpperCase(),b.match(Cp))b=osasm.toLonLat(b),a[this.ja]=b;else throw Error('"'+b+'" does not appear to be a valid MGRS coordinate!');}};pT.prototype.hf=function(a){return a?(a=a.replace(/\s/g,""),a=a.toUpperCase(),null!=a.match(Cp)):!1};function qT(){jT.call(this)}w(qT,pT);hy(fy.s(),"MGRSMapping",qT);qT.prototype.Fa=function(a){if(this.ja){var b=ay(a,this.ja);if(b)if(b=b.replace(/\s/g,""),b=b.toUpperCase(),b.match(Cp))b=osasm.toLonLat(b),b=new hp(b),a.hc=!1,a.tb(Ap(b)),a.hc=!0;else throw Error('"'+b+'" does not appear to be a valid MGRS coordinate!');}};function rT(){jT.call(this);this.u=Kpa;this.type="Lat/Lon"}w(rT,jT);var Lpa=/(pos(i(t(i(o(n)?)?)?)?)?|mgrs|coord(i(n(a(t(e(s)?)?)?)?)?)?|geo(m(e(t(r(y)?)?)?)?)?|loc(a(t(i(o(n)?)?)?)?)?)/i,Kpa={};g=rT.prototype;g.D=function(){return"Position"};g.T=function(){return this.type};g.Ub=function(a){a&&a in this.u?this.type=a:this.type=null};g.ba=function(){return this.type};g.lc=function(){return"MGRS"==this.type?1:2};g.tk=function(){return"geom"};
g.Fa=function(a){this.type&&(this.u[this.type].ja=this.ja,this.u[this.type].l=this.l,this.u[this.type].Fa(a))};g.hf=function(a){return this.type?this.u[this.type].hf(a):!1};g.Rj=function(a,b){return this.type?this.u[this.type].Rj(a,b):null};g.Wd=function(a){if(a)for(var b=a.length;b--;){var c=a[b],d;for(d in c)if(d.match(Lpa))for(var e in this.u)if(this.u[e].hf(String(c[d])))return a=new rT,a.ja=d,a.Ub(e),a}return null};g.clone=function(){var a=rT.C.clone.call(this);a.Ub(this.type);return a};
g.ra=function(a){a=rT.C.ra.call(this,a);a.type=this.T();return a};g.restore=function(a){rT.C.restore.call(this,a);this.Ub(a.type)};g.sc=function(){var a=rT.C.sc.call(this);Z("subType",a,this.T());return a};g.fd=function(a){rT.C.fd.call(this,a);this.Ub(pG(a,"subType"))};function sT(){rT.call(this);this.j="Position";this.u=Mpa;this.type="Lat/Lon"}w(sT,rT);hy(fy.s(),"Position",sT);var Mpa={"Lat/Lon":new oT(0),"Lon/Lat":new oT(1),MGRS:new qT};sT.prototype.Wd=function(a){if(a)for(var b=a.length;b--;){var c=a[b];if(c.Z())break;c=c.Yb();for(var d in c)if(d.match(Lpa))for(var e in this.u)if(this.u[e].hf(String(c[d])))return a=new sT,a.ja=d,a.Ub(e),a}return null};function tT(){wG.call(this)}I(tT,wG);function uT(a){return"string"===typeof a?a:""}g=tT.prototype;g.T=function(){return"text"};g.Ls=function(a,b){b=yG(this,b);(a=vT(uT(a),b))?(b=new hq,b.tb(a),a=b):a=null;return a};g.vg=function(a,b){var c=yG(this,b);b=[];a=vT(uT(a),c);this.g&&"GeometryCollection"==a.T()?b=a.g:b=[a];c=[];for(var d=0,e=b.length;d<e;++d)a=new hq,a.tb(b[d]),c.push(a);return c};g.gl=function(a,b){return vT(uT(a),yG(this,b))};g.On=function(){return this.defaultDataProjection};
g.Ht=function(a,b){return Npa(a,yG(this,b))};g.It=function(a,b){b=yG(this,b);if(1==a.length)a=Npa(a[0],b);else{for(var c=[],d=0,e=a.length;d<e;++d)c.push(a[d].Z());a=new Zo(c);a=wT(zG(a,!0,b))}return a};function Opa(a){a=a?a:{};wG.call(this);this.g=void 0!==a.splitCollection?a.splitCollection:!1}I(Opa,tT);function Ppa(a){a=a.getCoordinates();return 0===a.length?"":a.join(" ")}function xT(a){a=a.getCoordinates();for(var b=[],c=0,d=a.length;c<d;++c)b.push(a[c].join(" "));return b.join(",")}function Qpa(a){var b=[];a=tp(a);for(var c=0,d=a.length;c<d;++c)b.push("("+xT(a[c])+")");return b.join(",")}
function wT(a){var b=a.T(),c=(0,Rpa[b])(a);b=b.toUpperCase();if(a instanceof zo){a=a.layout;var d="";if("XYZ"===a||"XYZM"===a)d+="Z";if("XYM"===a||"XYZM"===a)d+="M";a=d;0<a.length&&(b+=" "+a)}return 0===c.length?b+" EMPTY":b+"("+c+")"}
var Rpa={Point:Ppa,LineString:xT,Polygon:Qpa,MultiPoint:function(a){var b=[];a=kp(a);for(var c=0,d=a.length;c<d;++c)b.push("("+Ppa(a[c])+")");return b.join(",")},MultiLineString:function(a){var b=[];a=Oo(a);for(var c=0,d=a.length;c<d;++c)b.push("("+xT(a[c])+")");return b.join(",")},MultiPolygon:function(a){var b=[];a=yp(a);for(var c=0,d=a.length;c<d;++c)b.push("("+Qpa(a[c])+")");return b.join(",")},GeometryCollection:function(a){var b=[];a=dp(a);for(var c=0,d=a.length;c<d;++c)b.push(wT(a[c]));return b.join(",")}};
function vT(a,b){return(a=(new yT(new Spa(a))).parse())?zG(a,!1,b):null}function Npa(a,b){return(a=a.Z())?wT(zG(a,!0,b)):""}function Spa(a){this.j=a;this.g=-1}
function Tpa(a){var b=a.j.charAt(++a.g),c={position:a.g,value:b};if("("==b)c.type=2;else if(","==b)c.type=5;else if(")"==b)c.type=3;else if("0"<=b&&"9">=b||"."==b||"-"==b){c.type=4;b=a.g;var d=!1,e=!1;do{if("."==f)d=!0;else if("e"==f||"E"==f)e=!0;var f=a.j.charAt(++a.g)}while("0"<=f&&"9">=f||"."==f&&(void 0===d||!d)||!e&&("e"==f||"E"==f)||e&&("-"==f||"+"==f));a=parseFloat(a.j.substring(b,a.g--));c.value=a}else if("a"<=b&&"z">=b||"A"<=b&&"Z">=b){c.type=1;b=a.g;do f=a.j.charAt(++a.g);while("a"<=f&&
"z">=f||"A"<=f&&"Z">=f);a=a.j.substring(b,a.g--).toUpperCase();c.value=a}else{if(" "==b||"\t"==b||"\r"==b||"\n"==b)return Tpa(a);if(""===b)c.type=6;else throw Error("Unexpected character: "+b);}return c}function yT(a){this.l=a;this.j="XY"}function zT(a){a.g=Tpa(a.l)}g=yT.prototype;g.match=function(a){(a=this.g.type==a)&&zT(this);return a};g.parse=function(){zT(this);return Upa(this)};
function Upa(a){var b=a.g;if(a.match(1)){b=b.value;var c="XY",d=a.g;1==a.g.type&&(d=d.value,"Z"===d?c="XYZ":"M"===d?c="XYM":"ZM"===d&&(c="XYZM"),"XY"!==c&&zT(a));a.j=c;if("GEOMETRYCOLLECTION"==b){a:{if(a.match(2)){b=[];do b.push(Upa(a));while(a.match(5));if(a.match(3)){a=b;break a}}else if(AT(a)){a=[];break a}throw Error(BT(a));}return new Zo(a)}d=Vpa[b];c=Wpa[b];if(!d||!c)throw Error("Invalid geometry type: "+b);b=d.call(a);return new c(b,a.j)}throw Error(BT(a));}
g.ys=function(){if(this.match(2)){var a=CT(this);if(this.match(3))return a}else if(AT(this))return null;throw Error(BT(this));};g.xs=function(){if(this.match(2)){var a=Xpa(this);if(this.match(3))return a}else if(AT(this))return[];throw Error(BT(this));};g.zs=function(){if(this.match(2)){var a=Ypa(this);if(this.match(3))return a}else if(AT(this))return[];throw Error(BT(this));};
g.sM=function(){if(this.match(2)){var a;if(2==this.g.type)for(a=[this.ys()];this.match(5);)a.push(this.ys());else a=Xpa(this);if(this.match(3))return a}else if(AT(this))return[];throw Error(BT(this));};g.rM=function(){if(this.match(2)){var a=Ypa(this);if(this.match(3))return a}else if(AT(this))return[];throw Error(BT(this));};g.tM=function(){if(this.match(2)){for(var a=[this.zs()];this.match(5);)a.push(this.zs());if(this.match(3))return a}else if(AT(this))return[];throw Error(BT(this));};
function CT(a){for(var b=[],c=a.j.length,d=0;d<c;++d){var e=a.g;if(a.match(4))b.push(e.value);else break}if(b.length==c)return b;throw Error(BT(a));}function Xpa(a){for(var b=[CT(a)];a.match(5);)b.push(CT(a));return b}function Ypa(a){for(var b=[a.xs()];a.match(5);)b.push(a.xs());return b}function AT(a){var b=1==a.g.type&&"EMPTY"==a.g.value;b&&zT(a);return b}function BT(a){return"Unexpected `"+a.g.value+"` at position "+a.g.position+" in `"+a.l.j+"`"}
var Wpa={POINT:hp,LINESTRING:Jo,POLYGON:qp,MULTIPOINT:jp,MULTILINESTRING:Mo,MULTIPOLYGON:vp},Vpa={POINT:yT.prototype.ys,LINESTRING:yT.prototype.xs,POLYGON:yT.prototype.zs,MULTIPOINT:yT.prototype.sM,MULTILINESTRING:yT.prototype.rM,MULTIPOLYGON:yT.prototype.tM};var DT=new Opa;function ET(){jT.call(this);this.j="WKTGeometry"}w(ET,jT);hy(fy.s(),"WKTGeometry",ET);var Zpa=E.V("os.im.mapping.WKTMapping"),$pa=/^\s*(POINT|LINESTRING|LINEARRING|POLYGON|MULTIPOINT|MULTILINESTRING|MULTIPOLYGON|GEOMETRYCOLLECTION)\s*Z?[(]/i,aqa=/(center|centroid)/i;g=ET.prototype;g.D=function(){return"WKTGeometry"};g.ba=function(){return"WKTGeometry"};g.lc=function(){return 20};g.tk=function(){return"geom"};
g.Fa=function(a){if(this.ja){var b=ay(a,this.ja);b&&(b=DT.gl(String(b),{dataProjection:"EPSG:4326",featureProjection:S}))&&(a.hc=!1,a.set(this.ja,void 0),a.tb(b),a.hc=!0)}};g.Wd=function(a){if(a)for(var b=a.length;b--;){var c=a[b];if(c.Z())break;var d=c.Yb(),e=[],f;for(f in d)(d=c.get(f))&&$pa.test(String(d))&&(d=new ET,d.ja=f,e.push(d));if(0<e.length){a=e[0];for(b=0;b<e.length;b++)aqa.test(e[b].ja)||(a=e[b]);return a}}return null};
g.hf=function(a){var b=null;try{b=DT.gl(String(a))}catch(c){E.error(Zpa,"failed restoring descriptors from settings",c)}return null!=b};function FT(a,b){oG.call(this);this.j="DateTime";this.id=b||"DateTime";this.u=!0;this.format=QF[0];this.K=QF;this.I=Gga;this.O=Hga;this.type=a}w(FT,oG);hy(fy.s(),"DateTime",FT);FT.prototype.D=function(){return"start"==this.type?"Start "+this.id:"end"==this.type?"End "+this.id:this.id};FT.prototype.lc=function(){return 20};FT.prototype.tk=function(){return"time"};FT.prototype.ba=function(){return this.D()||null};var bqa=/(Z|UTC|[+-]\d\d+:?\d\d)$/;g=FT.prototype;
g.Fa=function(a){if(this.ja&&this.format){var b=ay(a,this.ja);var c=null;if(null!=b&&("number"===typeof b||""!=b))if("Timestamp"==this.format)try{c=parseFloat(b)}catch(d){}else"ISO"===this.format?(bqa.test(b)||(b+="Z"),c=moment(String(b)).valueOf()):c=bG(String(b),this.format).valueOf();isNaN(c)&&(c=null);b=c;this.u?(c=ay(a,"recordTime")||null,by(a,"recordTime",this.getTime(b,c))):b&&this.Cr(b,a)}};
g.Wd=function(a){if(a)for(var b=a.length,c=void 0;b--;){var d=ay(a[b],"recordTime");if(F(d,"os.time.ITime"))break;if(c=cy(a[b],this.O[this.type]||SF.instant,c))if(d=ay(a[b],c)){var e=this.K.concat(this.I);if(d=aG(String(d),e,!0))return a=this.clone(),a.ja=c,a.format=d,a}}return null};g.jk=function(){return this.format};g.T=function(){return this.type};g.Ub=function(a){this.type=a};g.Cr=function(a,b){this.ja&&by(b,this.ja,(new Date(a)).toISOString())};g.Do=function(a,b){return new Date(b)};
g.getTime=function(a,b){if(null==a)return F(b,"os.time.ITime")?b:null;"object"==typeof b&&F(b,"os.time.ITime")?"end"==this.type?(b instanceof qg||(b=new qg(b)),b.Ya()?b.un(this.Do(b.Ya(),a)):b.un(a)):b.Sa()?b.setStart(this.Do(b.Sa(),a)):b.setStart(a):b="start"==this.type?new qg(a,a):"end"==this.type?new qg(void 0,a):new lg(a);return b};g.clone=function(){var a=new this.constructor(this.type);a.ja=this.ja;a.format=this.format;a.u=this.u;return a};
g.ra=function(a){a=FT.C.ra.call(this,a);a.applyTime=this.u;a.format=this.jk();a.type=this.T();return a};g.restore=function(a){FT.C.restore.call(this,a);this.u=a.applyTime;this.format=a.format;this.Ub(a.type)};g.sc=function(){var a=FT.C.sc.call(this);Z("applyTime",a,this.u);var b;(b=this.jk())?(b=b.replace(/T/g,"'T'"),b=b.replace(/Y/g,"y"),b=b.replace(/D/g,"d"),b=b.replace(/ZZ/g,"Z")):b=null;Z("format",a,b);Z("subType",a,this.T());return a};
g.fd=function(a){FT.C.fd.call(this,a);var b=pG(a,"applyTime");this.u=null!=b?"true"===b?!0:!1:!1;(b=pG(a,"format"))?(b=b.replace(/'T'/g,"T"),b=b.replace(/y/g,"Y"),b=b.replace(/d/g,"D")):b=null;this.format=b;b=pG(a,"subType");null!=b&&this.Ub("start"===b?"start":"end"===b?"end":"pub"==b?"publication":"instant")};function GT(a){FT.call(this,a,"Date");this.format=PF[0];this.K=PF;this.I=[];this.O=Fga;this.j="Date"}w(GT,FT);hy(fy.s(),"Date",GT);GT.prototype.lc=function(){return 1};GT.prototype.Cr=function(a,b){this.ja&&by(b,this.ja,ZF(new Date(a),"day"))};GT.prototype.Do=function(a,b){a=new Date(a);b=new Date(b);a.setUTCFullYear(b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate());return a};function HT(a){FT.call(this,a,"Time");this.format=RF[0];this.K=RF;this.I=Iga;this.O=SF;this.j="Time"}w(HT,FT);hy(fy.s(),"Time",HT);HT.prototype.lc=function(){return 1};HT.prototype.Cr=function(a,b){this.ja&&by(b,this.ja,ZF(new Date(a)))};HT.prototype.Do=function(a,b){a=new Date(a);b=new Date(b);a.setUTCHours(b.getUTCHours(),b.getUTCMinutes(),b.getUTCSeconds(),b.getUTCMilliseconds());return a};function IT(){$L.call(this);this.log=cqa;this.animate=!1;this.data=null}w(IT,$L);var cqa=E.V("os.layer.config.StaticLayerConfig");g=IT.prototype;g.ac=function(a){IT.C.ac.call(this,a);this.animate=void 0!==a.animate?a.animate:!1;q(a.data)?this.data=a.data=a.data instanceof Array?a.data:rb(a.data):this.data=null};
g.Me=function(a){this.ac(a);var b=this.N(a);b.ga(this.id);b.Ta(this.title);EK(b,this.animate);var c=this.W(b,a);this.restore(c,a);null!=a.explicitType&&c.ve(a.explicitType);this.data&&b.zc(this.data);return c};g.restore=function(a,b){b&&a.restore(b)};g.W=function(a){return new Vz({source:a})};g.N=function(){return new Rz(void 0)};function JT(a,b,c,d){this.l=a;this.o=b;this.g=c;this.j=d}JT.prototype.clone=function(){return new JT(this.l,this.o,this.g,this.j)};JT.prototype.equals=function(a){return this.l==a.l&&this.o==a.o&&this.g==a.g&&this.j==a.j};function dqa(a){return!!a&&("pointerup"===a.type||"pointerdown"===a.type)&&!!a.g&&2===a.g.button};var KT=od||pd||rd&&Bd("525")?"keydown":"keypress";function eqa(a){return a}function fqa(a){if(a){var b=a.Z();if(aq(b))return a}return null};function LT(a){a=a||{};lt.call(this,{handleEvent:this.handleEvent.bind(this)});this.condition=a.condition||dqa;this.im=a.im;this.Nm=a.Nm;this.j=0;this.g=[0,0]}w(LT,lt);LT.prototype.handleEvent=function(a){if("pointerdown"===a.type)return this.j=Ia(),this.g=a.pixel||[0,0],!0;var b=Ia(),c=a.pixel||[0,0];c=new JT(c[0],c[1],this.g[0],this.g[1]);(b=500<b-this.j)||(b=c.g-c.l,c=c.j-c.o,b=10<Math.sqrt(b*b+c*c));if(b)return!0;a&&this.condition(a)&&this.l(a);return!0};
LT.prototype.l=function(a){var b;(b=a&&a.map&&a.pixel?a.map.Yh(a.pixel,fqa||eqa):null)&&TG.get(b)&&gqa(this,a,b)};LT.prototype.o=function(a,b){this.Nm&&(b=b||[0,0],this.Nm.open(a,{my:"left top",at:"left+"+b[0]+" top+"+b[1],of:"#map-container"}))};function gqa(a,b,c,d){a.im&&(c={geometry:c.Z(),feature:c,layer:d,map:b.map},b=b.pixel||[0,0],a.im.open(c,{my:"left top",at:"left+"+b[0]+" top+"+b[1],of:"#map-container"}))};function MT(a){LT.call(this,a);window.omcm=this.o.bind(this)}w(MT,LT);F(MT,"os.I3DSupport");MT.prototype.vc=function(){return!0};MT.prototype.l=function(a){if(a.map&&a.pixel){if(a.pixel){var b=a.map.Yh(a.pixel,hna);if(b){var c=b.feature;var d=b.layer}}if(c)gqa(this,a,c,d);else{c=a.pixel||[0,0];if(a=a.map.getCoordinateFromPixel(c))a=Ml(a,S),a[0]=Vo(a[0]),a=Kl(a,S);this.o(a,c)}}};function NT(){lt.call(this,{handleEvent:hqa})}w(NT,lt);F(NT,"os.I3DSupport");NT.prototype.vc=function(){return!0};function hqa(a){var b=a.map,c=[];if("dblclick"==a.type&&0==zs(T(b))[1])try{b.Yh(a.pixel,function(a,b){if(a instanceof hq&&(b&&b instanceof Vz||(b=Dy(a)),b instanceof Vz)){var d=b.D();b&&d&&ib(c,a)}},{drillPick:!0}),0<c.length&&bL(c)}catch(d){}return!c.length};function OT(a){LN.call(this,a)}w(OT,LN);F(OT,"os.I3DSupport");Rka=function(a){var b=!1;if("dblclick"==a.type){b=a.coordinate;var c=L.s();if(c.Qa()){if(c=yP(c)){var d=c.Ff();c.Cn({center:b,altitude:a.originalEvent.ctrlKey?2*d:d/2,duration:this.j})}}else c=a.originalEvent.ctrlKey?-this.g:this.g,(d=T(a.map))&&ot(d,c,b,this.j);a.preventDefault();b=!0}return!b};OT.prototype.vc=function(){return!0};function PT(a){a=a||{};yt.call(this,{color:a.color||"rgba(255,0,0,1)",condition:a.condition||kea});this.type="dragBox";this.setActive(!0)}w(PT,yt);F(PT,"os.I3DSupport");PT.prototype.vc=function(){return!0};PT.prototype.end=function(){var a=this.Z().Y();(new BP(a,void 0,-1)).Fa();this.cancel()};PT.prototype.Mv=function(){return!0};function QT(){Gv.call(this);this.handleEvent=iqa.bind(this);this.type="line";this.o=void 0}w(QT,Gv);QT.prototype.Z=function(){var a=null;this.coords.length=this.coords.length-1;1<this.coords.length&&(a=new Jo(this.coords),a.toLonLat(),kq(a),Ap(a));return a};QT.prototype.lt=function(a){if(2<this.coords.length&&null!=this.o){var b=this.o.pixel,c=a.pixel;if(b&&c)return a=c[0]-b[0],b=c[1]-b[1],b=Math.sqrt(a*a+b*b),a=Date.now()-this.o.time,5>b&&250>a}return!1};
QT.prototype.update=function(a){QT.C.update.call(this,a);"pointerdown"===a.type&&(this.o={time:Date.now(),pixel:a.pixel.slice()})};function iqa(a){return"dblclick"===a.type?!1:rt.call(this,a)};function RT(a){lt.call(this,{handleEvent:jqa});a=void 0!==a?a:{};this.condition=void 0!==a.condition?a.condition:jea;if(null!=a.layers)if(Ca(a.layers))a=a.layers;else{var b=a.layers;a=function(a){return gb(b,a)}}else a=jna;this.layerFilter=a;this.u=M.get("interaction.selectionBehavior",!0)}w(RT,lt);F(RT,"os.I3DSupport");RT.prototype.vc=function(){return!0};
function jqa(a){var b=a.map;if(!this.condition(a)||0<zs(T(b))[1])return!0;var c=this.u;try{var d,e=b.Yh(a.pixel,function(a,b){if(a instanceof hq&&(d=Ey(a,b),d instanceof Rz))return d.rq(a)?HK(d,[a]):c?JK(d,[a]):KK(d,a),a},{layerFilter:this.layerFilter})}catch(f){}if(!e)return!0;a=(a=e.Z())&&a.T()||null;return"Polygon"==a||"MultiPolygon"==a?!0:!1};function ST(a){RT.call(this,a);this.handleEvent=this.VK;a=void 0!==a?a:{};this.condition=void 0!==a.condition?a.condition:iea;this.l=new EJ;this.l.Of(2E5);a=Y;a.H("dataSourceAdded",this.WK,!1,this);a.H("dataSourceRemoved",this.XK,!1,this);this.o=!1;this.g=void 0;this.j=null}w(ST,RT);g=ST.prototype;
g.VK=function(a){var b=a.map;if(!this.condition(a))return!0;if(0<zs(T(b))[1])return this.g&&TT(this,void 0),!0;this.o=!0;var c,d=!1;a=b.Yh(a.pixel,function(a,b){a instanceof hq&&(c=Ey(a,b),a.Ib()&&c&&!b&&!d&&(b=c.fj)&&1===b.length&&b[0]===a&&(d=!0,a=c=null));return a},{layerFilter:this.layerFilter});d&&!a||TT(this,a,c);this.o=!1;return!0};g.ox=function(){TT(this,void 0)};
function TT(a,b,c){var d=c||null,e=L.s();c=e.W("draw").N();if(b!=a.g){if(a.g)if(TG.get(a.g)||Py(e,a.g)&&a.g.get("_interactive"))a.g.la._highlightStyle=null,sz(a.g),Oy(a.g,c);else{var f=Ey(a.g);!f||null!=f.Ne&&f.Ne(null)||IK(f,null)}a.g=b||void 0;f="auto";b&&(d instanceof Rz?(null!=d.Ne&&d.Ne(b)||IK(d,b?[b]:null),f="pointer"):TG.get(b)?(d=b.D(),0!==gH(lE,d)%2?b.la._highlightStyle=Dfa:b.la._highlightStyle=cz,sz(b),Oy(b,c),f="pointer"):Py(e,b)&&b.get("_interactive")&&(b.la._highlightStyle=cz,sz(b),Oy(b,
c),f="pointer"));a.j&&(a.j.style.cursor=f);Mx(a.l,b?[b]:null)}}g.setMap=function(a){this.j&&yf(this.j,"mouseout",this.ox,this);ST.C.setMap.call(this,a);(this.j=a?a.g:null)&&H(this.j,"mouseout",this.ox,this);this.l.setMap(a)};g.WK=function(a){H(a.source,"propertychange",this.py,this)};g.XK=function(a){yf(a.source,"propertychange",this.py,this)};g.py=function(a){!this.o&&a.G&&a.j===PI&&Mx(this.l,a.target.fj)};function UT(a){SN.call(this,a);this.l=0}w(UT,SN);F(UT,"os.I3DSupport");UT.prototype.vc=function(){return!1};gla=function(a){var b=!1;"keydown"==a.type&&(this.l=a.originalEvent.keyCode);if(a.type==KT){var c=this.l||a.originalEvent.keyCode;if(this.g(a)&&(40==c||37==c||39==c||38==c)){b=T(a.map);var d=b.bb()*this.o,e=0,f=0;40==c?f=-d:37==c?e=-d:39==c?e=d:f=d;c=[e,f];ls(c,ss(b));mt(b,c,this.j);a.preventDefault();b=!0}}return!b};function VT(a){a=a||{};lt.call(this,{handleEvent:kqa});this.j=0;this.g=null!=a.condition?a.condition:Ya($s,bt)}w(VT,lt);F(VT,"os.I3DSupport");function kqa(a){if(!L.s().Qa)return!1;"keydown"==a.type&&(this.j=a.originalEvent.keyCode);var b=!1;if(a.type==KT){var c=this.j||a.originalEvent.keyCode;if(37==c||39==c)this.g(a)?b=lqa(a):at(a)&&(b=this.rotate(a));else if(40==c||38==c)this.g(a)?b=lqa(a):at(a)&&(b=this.tilt(a))}b&&a.preventDefault();return!b}
VT.prototype.tilt=function(a){var b=!1,c=L.s(),d=yP(c);c.Qa()&&d&&(d.tl(d.Qp()+(40==a.originalEvent.keyCode?.05:-.05)),b=!0);return b};VT.prototype.rotate=function(a){var b=!1,c=L.s(),d=yP(c);c.Qa()&&d&&(37==a.originalEvent.keyCode?d.sz():d.uz(),b=!0);return b};
function lqa(a){var b=!1,c=L.s(),d=yP(c);if(c.Qa()&&d){a=a.originalEvent.keyCode;c=T(c.X()).getState();c=Ll([c.resolution,0],S,"EPSG:4326");c=oe(100*c[0]);switch(a){case 38:d.oz(c);break;case 40:d.rz(c);break;case 37:d.pz(c);break;case 39:d.qz(c)}b=!0}return b}VT.prototype.vc=function(){return!0};function WT(a){TN.call(this,a);this.o=0}w(WT,TN);F(WT,"os.I3DSupport");WT.prototype.vc=function(){return!0};
hla=function(a){var b=!1;"keydown"==a.type&&(this.o=a.originalEvent.keyCode);if(a.type==KT){var c=this.o||a.originalEvent.keyCode;if(this.g(a)){switch(c){case 189:case 173:var d=!1;var e=!0;break;case 187:case 61:e=d=!1;break;case 109:d=at(a);e=!0;break;case 107:d=at(a);e=!1;break;case 34:e=d=!0;break;case 33:d=!0,e=!1}null!=d&&null!=e&&(b=ina(d,e),c=a.map,c.render(),c=T(c),d=L.s(),d.Qa()?(c=yP(d))&&c.Jo(b):ot(c,b,void 0,this.l),a.preventDefault(),b=!0)}}return!b};function mqa(){L.s().La().filter(function(a){return(a=a.get("title"))&&-1<a.indexOf("Measure")}).forEach(zqa)}
function zqa(a){if(a){var b=a.get("_originalGeometry")||a.Z();if(b&&b instanceof Jo){b.toLonLat();var c=au.s(),d=b.getCoordinates(),e=new Date(vg.s().g);if(d){for(var f=0,h=1,k=d.length;h<k;h++){var l=d[h-1],m=osasm.geodesicInverse(l,d[h]),n=m.distance;f+=n;if(l){var p=Lna(m.initialBearing,l,e);p=Mna(p);p=du(c,n,3)+" Bearing: "+p}n=[a.Ib(),a.la._originalStyle];l=0;for(m=n.length;l<m;l++){if(h<n[l].length){var r=n[l][h];r&&(r=r.mb())&&r.wh(p)}if(h+1===k&&k<n[l].length){var u=du(c,f,3);(r=n[l][k])&&
(r=r.mb())&&r.wh(u)}}}Ap(b);(a=Dy(a))&&Gz(a)}}}};function XT(){Gv.call(this);this.color=[255,0,0,1];this.type="measure";this.Ea=0;this.O=[];this.o=[];this.zb(new ds({stroke:new Zr({color:this.color,lineCap:"square",width:2})}));this.u=[];au.s().H("propertychange",this.qy,!1,this);M.H("bearing.type",this.Hr,!1,this)}w(XT,Gv);var Aqa=0,YT=Ds.method;g=XT.prototype;g.J=function(){au.s().M("propertychange",this.qy,!1,this);M.M("bearing.type",this.Hr,!1,this);XT.C.J.call(this)};
g.Z=function(){this.coords.length=this.coords.length-1;var a=new Jo(this.coords);a.toLonLat();kq(a);Ap(a);return a};g.Yb=function(){var a={};a.interpolationMethod=YT;return a};g.lt=function(a){return 0<this.o.length&&!a.originalEvent.shiftKey};g.kd=function(a){this.g&&(this.g=null);XT.C.kd.call(this,a);this.o.length=0;this.O.length=0;this.Ea=this.u.length=0};
g.ku=function(){var a,b=this.coords.length;if(1<b){var c=this.coords.length-1,d=Ml(this.coords[c-1],S);c=Ml(this.coords[c],S);"geodesic"===YT?a=osasm.geodesicInverse(d,c):a=osasm.rhumbInverse(d,c)}this.Ea!=b?a&&(this.o.push(a.distance),this.O.push(a.initialBearing||a.bearing)):a&&0<this.o.length&&(this.o[this.o.length-1]=a.distance,this.O[this.O.length-1]=a.initialBearing||a.bearing);this.Ea=b};g.Ib=function(){return[XT.C.Ib.call(this)].concat(this.u)};
function Bqa(a){return new Qt({font:Fz(14),offsetX:5,text:a,textAlign:"left",fill:new cs({color:[255,255,255,1]}),stroke:new Zr({color:[0,0,0,1],width:2})})}g.al=function(){Fv(this);if(this.u.length===this.o.length)var a=this.u[this.u.length-1];else a=new ds({text:Bqa()}),this.u.push(a);var b=this.o.length-1;a.tb(new hp(this.coords[b]));a.mb().wh(ZT(this,b));this.g&&this.g.zb(this.Ib());XT.C.al.call(this)};
g.end=function(a){if(this.l){if(1<this.u.length){var b=au.s();b=du(b,Cqa(this),3);this.u.push(new ds({geometry:new hp(this.coords[this.coords.length-1]),text:Bqa(b)}));this.g.zb(this.Ib())}b=YT;b=b.substring(0,1).toUpperCase()+b.substring(1);Aqa++;this.g.set("title",b+" Measure "+Aqa);this.g.set("icons",' <i class="fa fa-arrows-h" title="Measure feature"></i> ');L.s().cc(this.g);XT.C.end.call(this,a)}};g.zA=wa;
function ZT(a,b){var c=a.o[b],d=a.u[b].Z().getCoordinates(),e=au.s();c=du(e,c,3);a=a.O[b];b=new Date(vg.s().g);void 0!==a&&d&&(a=Lna(a,d,b),d=Mna(a,3),c+=" Bearing: "+d);return c}function Cqa(a){for(var b=0,c=0;c<a.o.length;c++)b+=a.o[c];return b}g.qy=function(a){"unit:change"==a.j&&(this.Hr(),mqa())};g.Hr=function(){if(0<this.u.length){for(var a=this.u.length-1,b=1;b<a;b++){var c=ZT(this,b);this.u[b].mb().wh(c)}b=au.s();b=du(b,Cqa(this),3);this.u[a].mb().wh(b);this.g&&this.g.zb(this.Ib())}};function $T(){lt.call(this,{handleEvent:Dqa});this.g={}}w($T,lt);F($T,"os.I3DSupport");$T.prototype.vc=function(){return!0};$T.prototype.zoom=function(a){var b=0,c=a.coordinate,d=new Md(a.originalEvent);null!=this.g?(d.clientY<this.g.low?b=-.1:d.clientY>this.g.high&&(b=.1),c=rs(T(a.map))):this.g={low:d.clientY-5,high:d.clientY+5};if(0!=b){this.g={low:d.clientY-5,high:d.clientY+5};b=me(b,-1,1);a=a.map;d=T(a);var e=L.s();e.Qa()?(c=yP(e))&&c.Jo(0<b?1/.95:.95):(a.render(),ot(d,-b,c))}};
function Dqa(a){var b=!1;a.g&&2==a.g.buttons&&a.dragging&&a.originalEvent.ctrlKey?(this.zoom(a),b=!0):this.g=null;return!b};function aU(a){WN.call(this,a)}w(aU,WN);F(aU,"os.I3DSupport");aU.prototype.vc=function(){return!1};function bU(){lt.call(this,{handleEvent:Eqa});this.g=Ya($s,bt)}w(bU,lt);F(bU,"os.I3DSupport");function Eqa(a){var b=!1;if("keydown"==a.type&&this.g(a)){var c=a.originalEvent.keyCode;b=!0;switch(c){case 86:O(P.s(),"map.keyboard.resetView",1);L.s().Tn();break;case 78:O(P.s(),"map.keyboard.resetRoll",1);hoa(L.s());break;case 85:O(P.s(),"map.keyboard.resetTilt",1);goa(L.s());break;case 82:O(P.s(),"map.keyboard.resetRotation",1);L.s().nl();break;default:b=!1}}b&&a.preventDefault();return!b}
bU.prototype.vc=function(){return!0};function Fqa(a){var b={};a=String(a);var c="#"==a.charAt(0)?a:"#"+a;if(Gqa.test(c)){a=c;if(!Gqa.test(a))throw Error("'"+a+"' is not a valid alpha hex color");5==a.length&&(a=a.replace(Hqa,"#$1$1$2$2$3$3$4$4"));b.ej=a.toLowerCase();b.type="hex";return b}a:{var d=a.match(Iqa);if(d){c=Number(d[1]);var e=Number(d[2]);var f=Number(d[3]);d=Number(d[4]);if(0<=c&&255>=c&&0<=e&&255>=e&&0<=f&&255>=f&&0<=d&&1>=d){f=[c,e,f,d];break a}}f=[]}if(f.length){a=f[0];c=f[1];e=f[2];f=f[3];d=Math.floor(255*f);if(isNaN(d)||
0>d||255<d)throw Error('"('+a+","+c+","+e+","+f+'") is not a valid RGBA color');f=ue(d.toString(16));a=te(a,c,e)+f;b.ej=a;b.type="rgba";return b}a:{if(d=a.match(Jqa))if(c=Number(d[1]),e=Number(d[2]),f=Number(d[3]),d=Number(d[4]),0<=c&&360>=c&&0<=e&&100>=e&&0<=f&&100>=f&&0<=d&&1>=d){f=[c,e,f,d];break a}f=[]}if(f.length){a=f[0];c=f[1];e=f[2];f=f[3];d=Math.floor(255*f);if(isNaN(d)||0>d||255<d)throw Error('"('+a+","+c+","+e+","+f+'") is not a valid HSLA color');f=ue(d.toString(16));a=re(we(a,c/100,e/
100))+f;b.ej=a;b.type="hsla";return b}throw Error(a+" is not a valid color string");}var Hqa=/#(.)(.)(.)(.)/,Gqa=/^#(?:[0-9a-f]{4}){1,2}$/i,Iqa=/^(?:rgba)?\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2}),\s?(0|1|0\.\d{0,10})\)$/i,Jqa=/^(?:hsla)\((0|[1-9]\d{0,2}),\s?(0|[1-9]\d{0,2})%,\s?(0|[1-9]\d{0,2})%,\s?(0|1|0\.\d{0,10})\)$/i;function cU(a,b,c,d){this.top=a;this.right=b;this.bottom=c;this.left=d}g=cU.prototype;g.clone=function(){return new cU(this.top,this.right,this.bottom,this.left)};g.contains=function(a){return this&&a?a instanceof cU?a.left>=this.left&&a.right<=this.right&&a.top>=this.top&&a.bottom<=this.bottom:a.x>=this.left&&a.x<=this.right&&a.y>=this.top&&a.y<=this.bottom:!1};
g.expand=function(a,b,c,d){Ba(a)?(this.top-=a.top,this.right+=a.right,this.bottom+=a.bottom,this.left-=a.left):(this.top-=a,this.right+=Number(b),this.bottom+=Number(c),this.left-=Number(d));return this};g.ceil=function(){this.top=Math.ceil(this.top);this.right=Math.ceil(this.right);this.bottom=Math.ceil(this.bottom);this.left=Math.ceil(this.left);return this};
g.floor=function(){this.top=Math.floor(this.top);this.right=Math.floor(this.right);this.bottom=Math.floor(this.bottom);this.left=Math.floor(this.left);return this};g.round=function(){this.top=Math.round(this.top);this.right=Math.round(this.right);this.bottom=Math.round(this.bottom);this.left=Math.round(this.left);return this};g.translate=function(a,b){a instanceof Uq?(this.left+=a.x,this.right+=a.x,this.top+=a.y,this.bottom+=a.y):(this.left+=a,this.right+=a,ua(b)&&(this.top+=b,this.bottom+=b));return this};
g.scale=function(a,b){b=ua(b)?b:a;this.left*=a;this.right*=a;this.top*=b;this.bottom*=b;return this};function dU(a,b,c,d){this.left=a;this.top=b;this.width=c;this.height=d}g=dU.prototype;g.clone=function(){return new dU(this.left,this.top,this.width,this.height)};
g.difference=function(a){b:{var b=Math.max(this.left,a.left);var c=Math.min(this.left+this.width,a.left+a.width);if(b<=c){var d=Math.max(this.top,a.top),e=Math.min(this.top+this.height,a.top+a.height);if(d<=e){b=new dU(b,d,c-b,e-d);break b}}b=null}if(b&&b.height&&b.width){b=[];c=this.top;d=this.height;e=this.left+this.width;var f=this.top+this.height,h=a.left+a.width,k=a.top+a.height;a.top>this.top&&(b.push(new dU(this.left,this.top,this.width,a.top-this.top)),c=a.top,d-=a.top-this.top);k<f&&(b.push(new dU(this.left,
k,this.width,f-k)),d=k-c);a.left>this.left&&b.push(new dU(this.left,c,a.left-this.left,d));h<e&&b.push(new dU(h,c,e-h,d));a=b}else a=[this.clone()];return a};g.contains=function(a){return a instanceof Uq?a.x>=this.left&&a.x<=this.left+this.width&&a.y>=this.top&&a.y<=this.top+this.height:this.left<=a.left&&this.left+this.width>=a.left+a.width&&this.top<=a.top&&this.top+this.height>=a.top+a.height};
g.distance=function(a){var b=a.x<this.left?this.left-a.x:Math.max(a.x-(this.left+this.width),0);a=a.y<this.top?this.top-a.y:Math.max(a.y-(this.top+this.height),0);return Math.sqrt(b*b+a*a)};g.ceil=function(){this.left=Math.ceil(this.left);this.top=Math.ceil(this.top);this.width=Math.ceil(this.width);this.height=Math.ceil(this.height);return this};g.floor=function(){this.left=Math.floor(this.left);this.top=Math.floor(this.top);this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};
g.round=function(){this.left=Math.round(this.left);this.top=Math.round(this.top);this.width=Math.round(this.width);this.height=Math.round(this.height);return this};g.translate=function(a,b){a instanceof Uq?(this.left+=a.x,this.top+=a.y):(this.left+=a,ua(b)&&(this.top+=b));return this};g.scale=function(a,b){b=ua(b)?b:a;this.left*=a;this.width*=a;this.top*=b;this.height*=b;return this};function eU(a,b){var c=Xq(a);return c.defaultView&&c.defaultView.getComputedStyle&&(a=c.defaultView.getComputedStyle(a,null))?a[b]||a.getPropertyValue(b)||"":""}function fU(a,b){return eU(a,b)||(a.currentStyle?a.currentStyle[b]:null)||a.style&&a.style[b]}
function Kqa(a){try{var b=a.getBoundingClientRect()}catch(c){return{left:0,top:0,right:0,bottom:0}}od&&a.ownerDocument.body&&(a=a.ownerDocument,b.left-=a.documentElement.clientLeft+a.body.clientLeft,b.top-=a.documentElement.clientTop+a.body.clientTop);return b}function gU(a){var b=Xq(a),c=new Uq(0,0);var d=b?Xq(b):document;d=!od||Cd()||"CSS1Compat"==Vq(d).g.compatMode?d.documentElement:d.body;if(a==d)return c;a=Kqa(a);b=cr(Vq(b).g);c.x=a.left+b.x;c.y=a.top+b.y;return c}
function Lqa(a){var b=Mqa;if("none"!=fU(a,"display"))return b(a);var c=a.style,d=c.display,e=c.visibility,f=c.position;c.visibility="hidden";c.position="absolute";c.display="inline";a=b(a);c.display=d;c.position=f;c.visibility=e;return a}function Mqa(a){var b=a.offsetWidth,c=a.offsetHeight,d=rd&&!b&&!c;return sa(b)&&!d||!a.getBoundingClientRect?new Te(b,c):(a=Kqa(a),new Te(a.right-a.left,a.bottom-a.top))}function IP(a,b){a.style.display=b?"":"none"}
var hU=qd?"MozUserSelect":rd||pd?"WebkitUserSelect":null;function iU(a,b){var c=a.currentStyle?a.currentStyle[b]:null;if(c)if(/^\d+px?$/.test(c))a=parseInt(c,10);else{b=a.style.left;var d=a.runtimeStyle.left;a.runtimeStyle.left=a.currentStyle.left;a.style.left=c;c=a.style.pixelLeft;a.style.left=b;a.runtimeStyle.left=d;a=+c}else a=0;return a};function jU(){}xa(jU);jU.prototype.g=0;function kU(a){C.call(this);this.o=a||Vq();this.u=Nqa;this.ma=null;this.ce=!1;this.L=null;this.j=void 0;this.g=this.eb=this.ya=null}w(kU,C);kU.prototype.B=jU.s();var Nqa=null;function Oqa(a,b){switch(a){case 1:return b?"disable":"enable";case 2:return b?"highlight":"unhighlight";case 4:return b?"activate":"deactivate";case 8:return b?"select":"unselect";case 16:return b?"check":"uncheck";case 32:return b?"focus":"blur";case 64:return b?"open":"close"}throw Error("Invalid component state");}g=kU.prototype;
g.D=function(){return this.ma||(this.ma=":"+(this.B.g++).toString(36))};g.ga=function(a){this.ya&&this.ya.g&&(rc(this.ya.g,this.ma),sc(this.ya.g,a,this));this.ma=a};g.ub=function(){return this.L};function Pqa(a){a.j||(a.j=new NA(a));return a.j}g.df=function(a){if(this==a)throw Error("Unable to set parent component");var b;if(b=a&&this.ya&&this.ma){b=this.ya;var c=this.ma;b=b.g&&c?uc(b.g,c)||null:null}if(b&&this.ya!=a)throw Error("Unable to set parent component");this.ya=a;kU.C.ht.call(this,a)};
g.getParent=function(){return this.ya};g.ht=function(a){if(this.ya&&this.ya!=a)throw Error("Method not supported");kU.C.ht.call(this,a)};g.Wp=function(){this.L=this.o.g.createElement("DIV")};g.render=function(a){Qqa(this,a)};function Qqa(a,b,c){if(a.ce)throw Error("Component already rendered");a.L||a.Wp();b?b.insertBefore(a.L,c||null):a.o.g.body.appendChild(a.L);a.ya&&!a.ya.ce||a.bk()}g.bk=function(){this.ce=!0;lU(this,function(a){!a.ce&&a.ub()&&a.bk()})};
g.ck=function(){lU(this,function(a){a.ce&&a.ck()});this.j&&this.j.removeAll();this.ce=!1};g.J=function(){this.ce&&this.ck();this.j&&(this.j.dispose(),delete this.j);lU(this,function(a){a.dispose()});this.L&&Ik(this.L);this.ya=this.L=this.g=this.eb=null;kU.C.J.call(this)};
g.R=function(a,b){var c=this.eb?this.eb.length:0;if(a.ce&&(b||!this.ce))throw Error("Component already rendered");if(0>c||c>(this.eb?this.eb.length:0))throw Error("Child component index out of bounds");this.g&&this.eb||(this.g={},this.eb=[]);if(a.getParent()==this){var d=a.D();this.g[d]=a;mb(this.eb,a)}else sc(this.g,a.D(),a);a.df(this);jb(this.eb,a,c);a.ce&&this.ce&&a.getParent()==this?(b=this.Xp(),c=b.childNodes[c]||null,c!=a.ub()&&b.insertBefore(a.ub(),c)):b?(this.L||this.Wp(),c=this.eb?this.eb[c+
1]||null:null,Qqa(a,this.Xp(),c?c.L:null)):this.ce&&!a.ce&&a.L&&a.L.parentNode&&1==a.L.parentNode.nodeType&&a.bk()};g.Xp=function(){return this.L};g.We=function(){return!!this.eb&&0!=this.eb.length};function lU(a,b){a.eb&&$a(a.eb,b,void 0)}g.removeChild=function(a,b){if(a){var c=ta(a)?a:a.D();a=this.g&&c?uc(this.g,c)||null:null;c&&a&&(rc(this.g,c),mb(this.eb,a),b&&(a.ck(),a.L&&Ik(a.L)),a.df(null))}if(!a)throw Error("Child is not in parent component");return a};
g.kA=function(a){this.removeChild(this.eb?this.eb[a]||null:null,void 0)};var mU;zc("A AREA BUTTON HEAD INPUT LINK MENU META OPTGROUP OPTION PROGRESS STYLE SELECT SOURCE TEXTAREA TITLE TRACK".split(" "));
function nU(a,b,c){q(c)&&(c=c.join(" "));var d="aria-"+b;""===c||void 0==c?(mU||(mU={atomic:!1,autocomplete:"none",dropeffect:"none",haspopup:!1,live:"off",multiline:!1,multiselectable:!1,orientation:"vertical",readonly:!1,relevant:"additions text",required:!1,sort:"none",busy:!1,disabled:!1,hidden:!1,invalid:"false"}),c=mU,b in c?a.setAttribute(d,c[b]):a.removeAttribute(d)):a.setAttribute(d,c)};function oU(){}var pU;xa(oU);var Rqa={button:"pressed",checkbox:"checked",menuitem:"selected",menuitemcheckbox:"checked",menuitemradio:"checked",radio:"checked",tab:"selected",treeitem:"selected"};function Sqa(a,b,c){if(a=a.ub?a.ub():a){var d=[b];od&&!Bd("7")&&(d=Tqa(oD(a),b),d.push(b));(c?lga:mga)(a,d)}}function qU(a,b){var c;if(c=a.ub()){if(!b&&a.xa&32){try{c.blur()}catch(d){}a.xa&32&&a.kv(null)}(pr(c)&&qr(c))!=b&&(b?c.tabIndex=0:(c.tabIndex=-1,c.removeAttribute("tabIndex")))}}
oU.prototype.dc=function(a,b){IP(a,b);a&&nU(a,"hidden",!b)};oU.prototype.Ga=function(a,b,c){var d=a.ub();if(d){var e=Uqa(this,b);e&&Sqa(a,e,c);Vqa(d,b,c)}};function Vqa(a,b,c){pU||(pU={1:"disabled",8:"selected",16:"checked",64:"expanded"});b=pU[b];var d=a.getAttribute("role")||null;d&&(d=Rqa[d]||b,b="checked"==b||"selected"==b?d:b);b&&nU(a,b,c)}function rU(){return"goog-control"}
function Wqa(a,b){var c=rU(),d=[c],e=rU();e!=c&&d.push(e);c=b.getState();for(e=[];c;){var f=c&-c;e.push(Uqa(a,f));c&=~f}d.push.apply(d,e);(a=b.Ju)&&d.push.apply(d,a);od&&!Bd("7")&&d.push.apply(d,Tqa(d));return d}function Tqa(a,b){var c=[];b&&(a=pb(a,[b]));$a([],function(d){!db(d,Ga(gb,a))||b&&!gb(d,b)||c.push(d.join("_"))});return c}
function Uqa(a,b){if(!a.g){var c=rU();Qb(c.replace(/\xa0|\s/g," ")," ");a.g={1:c+"-disabled",2:c+"-hover",4:c+"-active",8:c+"-selected",16:c+"-checked",32:c+"-focused",64:c+"-open"}}return a.g[b]};var Xqa={};function sU(a,b,c){kU.call(this,c);if(!b){b=this.constructor;for(var d;b;){d=Da(b);if(d=Xqa[d])break;b=b.C?b.C.constructor:null}b=d?Ca(d.s)?d.s():new d:null}this.ge=b;this.Yp=sa(a)?a:null}w(sU,kU);g=sU.prototype;g.Yp=null;g.xa=0;g.ig=!0;g.Ju=null;g.Wi=function(){return this.ge};
g.Wp=function(){var a=this.o.Rh("DIV",Wqa(this.ge,this).join(" "),this.Pb());this.L=a;var b=od||nd?a.getElementsByTagName("*"):null;if(hU){var c="none";a.style&&(a.style[hU]=c);if(b)for(var d=0,e;e=b[d];d++)e.style&&(e.style[hU]=c)}else if(od||nd)if(c="on",a.setAttribute("unselectable",c),b)for(d=0;e=b[d];d++)e.setAttribute("unselectable",c);this.ig||this.ge.dc(a,!1)};g.Xp=function(){return this.ub()};
g.bk=function(){sU.C.bk.call(this);var a=this.L;this.ig||nU(a,"hidden",!this.ig);this.isEnabled()||Vqa(a,1,!this.isEnabled());null==this.u&&(this.u="rtl"==fU(this.ce?this.L:this.o.g.body,"direction"));this.u&&(a=this.ub(),Sqa(a,rU()+"-rtl",!0));this.isEnabled()&&qU(this,this.ig);a=Pqa(this);var b=this.ub();a.H(b,"mouseover",this.oF).H(b,"mousedown",this.nv).H(b,"mouseup",this.ov).H(b,"mouseout",this.TE);this.lv!=wa&&a.H(b,"contextmenu",this.lv);od&&(Bd(9)||a.H(b,"dblclick",this.aF),this.A||(this.A=
new tU(this),id(this,Ga(z,this.A))));if(a=this.ub())b=this.l||(this.l=new ft),gt(b,a),Pqa(this).H(b,"key",this.SE).H(a,"focus",this.dF).H(a,"blur",this.kv)};g.ck=function(){sU.C.ck.call(this);this.l&&this.l.detach();this.ig&&this.isEnabled()&&qU(this,!1)};g.J=function(){sU.C.J.call(this);this.l&&(this.l.dispose(),delete this.l);delete this.ge;this.A=this.Ju=this.Yp=null};g.Pb=function(){return this.Yp};
g.dc=function(a,b){if(b||this.ig!=a&&this.dispatchEvent(a?"show":"hide"))(b=this.ub())&&this.ge.dc(b,a),this.isEnabled()&&qU(this,a),this.ig=a};g.isEnabled=function(){return!(this.xa&1)};g.Za=function(a){var b=this.getParent();b&&"function"==typeof b.isEnabled&&!b.isEnabled()||!uU(this,1,!a)||(a||(this.setActive(!1),vU(this,!1)),this.ig&&qU(this,a),this.Ga(1,!a,!0))};function vU(a,b){uU(a,2,b)&&a.Ga(2,b)}g.isActive=function(){return!!(this.xa&4)};g.setActive=function(a){uU(this,4,a)&&this.Ga(4,a)};
g.rq=function(){return!!(this.xa&8)};g.Nj=function(a){uU(this,8,a)&&this.Ga(8,a)};g.getState=function(){return this.xa};g.Ga=function(a,b,c){c||1!=a?39&a&&b!=!!(this.xa&a)&&(this.ge.Ga(this,a,b),this.xa=b?this.xa|a:this.xa&~a):this.Za(!b)};function wU(a){return!!(255&a)&&!!(39&a)}function uU(a,b,c){return!!(39&b)&&!!(a.xa&b)!=c&&(!(0&b)||a.dispatchEvent(Oqa(b,c)))&&!a.Xa()}g.oF=function(a){!Yqa(a,this.ub())&&this.dispatchEvent("enter")&&this.isEnabled()&&wU(2)&&vU(this,!0)};
g.TE=function(a){!Yqa(a,this.ub())&&this.dispatchEvent("leave")&&(wU(4)&&this.setActive(!1),wU(2)&&vU(this,!1))};g.lv=wa;function Yqa(a,b){return!!a.relatedTarget&&nr(b,a.relatedTarget)}g.nv=function(a){if(this.isEnabled()&&(wU(2)&&vU(this,!0),Od(a))){wU(4)&&this.setActive(!0);var b;if(b=this.ge){var c;b=(c=this.ub())?pr(c)&&qr(c):!1}b&&this.ub().focus()}Od(a)&&a.preventDefault()};g.ov=function(a){this.isEnabled()&&(wU(2)&&vU(this,!0),this.isActive()&&xU(this,a)&&wU(4)&&this.setActive(!1))};
g.aF=function(a){this.isEnabled()&&xU(this,a)};function xU(a,b){if(wU(16)){var c=!(a.xa&16);uU(a,16,c)&&a.Ga(16,c)}wU(8)&&a.Nj(!0);wU(64)&&(c=!(a.xa&64),uU(a,64,c)&&a.Ga(64,c));c=new A("action",a);b&&(c.altKey=b.altKey,c.ctrlKey=b.ctrlKey,c.metaKey=b.metaKey,c.shiftKey=b.shiftKey,c.I=b.I);return a.dispatchEvent(c)}g.dF=function(){wU(32)&&uU(this,32,!0)&&this.Ga(32,!0)};g.kv=function(){wU(4)&&this.setActive(!1);wU(32)&&uU(this,32,!1)&&this.Ga(32,!1)};
g.SE=function(a){return this.ig&&this.isEnabled()&&13==a.keyCode&&xU(this,a)?(a.preventDefault(),a.stopPropagation(),!0):!1};if(!Ca(sU))throw Error("Invalid component class "+sU);if(!Ca(oU))throw Error("Invalid renderer class "+oU);var Zqa=Da(sU);Xqa[Zqa]=oU;function $qa(){return new sU(null)}if(!Ca($qa))throw Error("Invalid decorator function "+$qa);
function tU(a){x.call(this);this.j=a;this.g=!1;this.l=new NA(this);id(this,Ga(z,this.l));a=this.j.L;this.l.H(a,"mousedown",this.u).H(a,"mouseup",this.A).H(a,"click",this.o)}w(tU,x);var ara=!od||Cd();tU.prototype.u=function(){this.g=!1};tU.prototype.A=function(){this.g=!0};
function bra(a,b){if(!ara)return a.button=0,a.type=b,a;var c=document.createEvent("MouseEvents");c.initMouseEvent(b,a.bubbles,a.cancelable,a.view||null,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,0,a.relatedTarget||null);return c}tU.prototype.o=function(a){if(this.g)this.g=!1;else{var b=a.l,c=b.button,d=b.type,e=bra(b,"mousedown");this.j.nv(new Md(e,a.A));e=bra(b,"mouseup");this.j.ov(new Md(e,a.A));ara||(b.button=c,b.type=d)}};
tU.prototype.J=function(){this.j=null;tU.C.J.call(this)};var cra="#ffffff #cccccc #c0c0c0 #999999 #666666 #333333 #000000 #ffcccc #ff6666 #ff0000 #cc0000 #990000 #660000 #330000 #ffcc99 #ff9966 #ff9900 #ff6600 #cc6600 #993300 #663300 #ffff99 #ffff66 #ffcc66 #ffcc33 #cc9933 #996633 #663333 #ffffcc #ffff33 #ffff00 #ffcc00 #999900 #666600 #333300 #99ff99 #66ff99 #33ff33 #33cc00 #009900 #006600 #003300 #99ffff #33ffff #66cccc #00cccc #339999 #336666 #003333 #ccffff #66ffff #33ccff #3366ff #3333ff #000099 #000066 #ccccff #9999ff #6666cc #6633ff #6600cc #333399 #330099 #ffccff #ff99ff #cc66cc #cc33cc #993399 #663366 #330033".split(" ");Q.directive("colorpalette",[function(){return{restrict:"E",replace:!0,scope:{colors:"=?",value:"=",name:"@",columns:"@",showReset:"@"},templateUrl:"v1541734487/views/color/colorpalette.html",controller:yU,controllerAs:"palette"}}]);function yU(a){this.v=a;this.g=a.name||null;this.showReset="true"===a.showReset;for(var b=a.colors||cra,c=a.columns||7,d=[],e=0,f=b.length;e<f;e++)0==e%c&&d.push([]),d[d.length-1].push(b[e]);a.rows=d;a.$on("$destroy",this.j.bind(this))}yU.$inject=["$scope"];
yU.prototype.j=function(){this.v=null};yU.prototype.pick=function(a){this.v.value=a;this.v.$emit(zU("palette.change",this.g),a)};yU.prototype.pick=yU.prototype.pick;yU.prototype.reset=function(){this.v.value="";this.v.$emit(zU("palette.reset",this.g))};yU.prototype.reset=yU.prototype.reset;yU.prototype.S=function(a){return ef(a)};yU.prototype.getTitle=yU.prototype.S;function zU(a,b){return b?b+"."+a:a};Q.directive("colorpicker",[function(){return{restrict:"AE",replace:!0,scope:{color:"=",data:"=",disabled:"=",name:"@",showReset:"@"},template:'<button type="button" class="btn bg-transparent border js-color-picker" ng-click="colorPicker.togglePopup()" ng-disabled=disabled><i class="fa fa-square" ng-style="{\'color\': color}"></i></button>',controller:AU,controllerAs:"colorPicker"}}]);
function AU(a,b,c){this.scope=a;this.element=b;this.o=c;this.j=this.l=null;this.showPopup=!1;(b=this.scope.color)||(b="#ffffff");0!==b.indexOf("#")&&(b=(-1<b.indexOf("a(")?Fqa(b):$aa(b)).ej.substring(0,7));this.scope.color=b;this.g=this.scope.name;a.$on(zU("palette.change",this.g),this.xL.bind(this));a.$on(zU("palette.reset",this.g),this.HJ.bind(this));a.$on("$destroy",this.yL.bind(this))}AU.$inject=["$scope","$element","$compile"];g=AU.prototype;
g.yL=function(){dra(this);this.element=this.o=this.scope=null};function dra(a){a.j&&(a.j.remove(),a.j=null);a.l&&(de(document,"mousedown",a.wn,!1,a),de(document,"mousewheel",a.wn,!1,a),a.l.$destroy(),a.l=null)}g.xL=function(a,b){a.stopPropagation();this.scope.color=b;this.g?this.scope.$emit(this.g+".change",this.scope.color):this.scope.$emit("color.colorChanged",{color:this.scope.color,data:this.scope.data});this.so(!1)};g.HJ=function(a){a.stopPropagation();this.scope.$emit(this.g+".reset");this.so(!1)};
g.wn=function(a){var b=this.element[0];a.target==b||nr(b,a.target)||(b=this.j&&this.j[0])&&a.target!=b&&!nr(b,a.target)&&(this.so(!1),R(this.scope))};g.so=function(a){(this.showPopup=void 0!==a?a:!this.showPopup)?(this.l=this.scope.$new(),this.l.value=this.scope.color,this.j=this.o(era(this))(this.l),a=$(".color-picker-container"),a=a.length?a[0]:document.body,hr(a,this.j[0]),Yd(document,"mousedown",this.wn,!1,this),Yd(document,"mousewheel",this.wn,!1,this)):dra(this)};AU.prototype.togglePopup=AU.prototype.so;
function era(a){var b=a.element.offset();b.top+=a.element.outerHeight();return'<colorpalette class="position-fixed" value="value" '+(a.g?'name="'+a.g+'" ':"")+'show-reset="'+(void 0!==a.scope.showReset?a.scope.showReset:"false")+'" style="top:'+b.top+"px;left:"+b.left+'px;"></colorpalette>'};Q.directive("confirmcolor",[function(){return{restrict:"E",templateUrl:"v1541734487/views/window/confirmcolor.html",controller:fra,controllerAs:"confirmcolor"}}]);function fra(a){a.$watch("confirmValue",function(b,c){b!=c&&(a.$parent.confirmValue=b)})}fra.$inject=["$scope"];var BU=void 0;function gra(a){this.visible=!!(a&&1<a.length)}function hra(){var a=M.get("bgColor","#000000");this.da[0]='<i class="fa fa-fw fa-tint" style="color:'+a+'"></i>'}function ira(){N.dispatchEvent(new cw("toggleUI","legend",!0,null,"map.features.showLedgend"))}function jra(){for(var a=SB(Fy),b=0,c=a.length;b<c;b++){var d=a[b];d instanceof Rz&&xK(d)}}
function kra(){var a=M.get("bgColor","#000000");gD({confirm:lra,confirmValue:a||"#ffffff",prompt:"<confirmcolor></confirmcolor>",windowOptions:{label:"Choose Color",icon:"fa fa-tint",x:"center",y:"center",width:195,height:"auto",modal:"true","show-close":"false","no-scroll":"true"}})}function lra(a){M.set("bgColor",a)}function mra(){this.visible=L.s().Qa()&&Eq();this.selected=!!M.get("os.map.enableTerrain",!1)}function nra(){M.set("os.map.enableTerrain",!this.selected)};function CU(a){var b=a||{};b.timeout=null!=b.timeout?b.timeout:10;b.duration=null!=b.duration?b.duration:0;UN.call(this,a);this.I=100}w(CU,UN);CU.prototype.A=function(a){this.j&&(this.j=0<this.j?.2:-.2);CU.C.A.call(this,a)};function ora(){var a=new PT,b={delta:.2},c=new CU(b),d=new $T(b),e=new OT,f=new aU,h=new VT(b),k=new RT(b),l=new MN({kinetic:void 0,delta:.2}),m=new ST(b),n=new yt,p=new hu,r=new Gv,u=new QT,v=new NT,y=new XT,B=new UT;b=new WT(b);var G=new bU,D=new MT({im:SP,Nm:BU});return new ju([m,h,B,b,a,f,l,c,d,e,D,k,n,p,r,u,y,v,G])};function pra(){PR.call(this);this.Da("Add Data");this.fb("The Add Data window allows both feature and imagery data from an expanding pool of data providers to be added to the map.");this.vb(["data","providers","search"]);this.yc("fa fa-plus");this.Fd(!0);var a=QR(this);this.R(a,{label:"Open",description:"Open Add Data window.",key:"addData.open"});this.R(a,{label:"Add Data",icon:"fa fa-plus",description:"Add a data layer to the map.",key:"addData.add-layer-command"});this.R(a,{label:"Remove Data",
icon:"fa fa-plus",description:"Remove a data layer from the map",key:"addData.remove-layer-command"});this.R(a,{label:"Search",description:"Perform a search through the available data layers.",key:"addData.search"});this.R(a,{label:"Group By",description:"Group the available data layers by a facet.",key:"addData.groupBy"});this.R(a,{label:"Open File/URL",description:"Import data from a local file or URL.",key:"addData.import"});this.R(a,{label:"View Layer Info",description:"Click on a layer to see information about it.",
key:"addData.getInfo"})}w(pra,PR);function qra(){PR.call(this);this.Da("Filters");this.vb(["TODO"]);this.yc("fa fa-filter");this.Fd(!0);var a=QR(this);this.R(a,{label:"Group By",key:"filters.groupBy"});this.R(a,{label:"Search filters",key:"filters.search"});this.R(a,{label:"Copy filter",key:"filters.copy"});this.R(a,{label:"Edit filter",key:"filters.edit"});this.R(a,{label:"Remove filter",key:"filters.remove"});this.R(a,{label:"Import filter",key:"filters.import"});a=this.R(a,{label:"Advanced filter dialog"});this.R(a,{label:"Open Advanced Filter Dialog",
key:"filters.advancedOpen"});this.R(a,{label:"Select Layer",key:"filters.advanced.selectLayer"});this.R(a,{label:"Add Filter",key:"filters.new"});this.R(a,{label:"Advanced Toggle",key:"filters.advanced.advancedToggle"});this.R(a,{label:"Expand All",key:"filters.advanced.expandAll"});this.R(a,{label:"Collapse All",key:"filters.advanced.collapseAll"});this.R(a,{label:"Reset",key:"filters.advanced.reset"});this.R(a,{label:"Area Include/Exclude Toggle",key:"filters.advanced.areaIncludeToggle"});this.R(a,
{label:"Area Edit",key:"filters.advanced.areaEdit"});this.R(a,{label:"Area Remove",key:"filters.advanced.areaRemove"});this.R(a,{label:"Export",key:"filters.export"});this.R(a,{label:"Import",key:"filters.import"});this.R(a,{label:"Apply",key:"filters.advanced.apply"});this.R(a,{label:"Close",key:"filters.advanced.close"})}w(qra,PR);function rra(){PR.call(this);this.Da("Layers");this.fb("Layer controls for the map");this.vb("Add Layer Tile Feature Imagery Zoom Style Remove Rename Convolve Buffer Export".split(" "));this.yc("fa fa-bars");this.Fd(!0);var a=QR(this),b=this.R(a,{label:"Style Panel",collapsed:!0,description:"The layer style panel allows control over a layer's opacity, color and size."});this.R(b,{label:"Change Feature Layer Color",description:"The color used to render the data for this layer.",key:"layers.features.changeVectorColor"});
this.R(b,{label:"Change Feature Layer Shape",description:"The icon shape used for data points on this layer.",key:"layers.features.changeVectorShape"});this.R(b,{label:"Change Feature Layer Center Shape",description:"The icon shape used in the ellipse center for data points on this layer.",key:"layers.features.changeVectorCenterShape"});this.R(b,{label:"Change Feature Layer Size",description:"The icon size used for data points on this layer.",key:"layers.features.changeVectorSize"});this.R(b,{label:"Toggle Ellipsoid",
description:"Whether or not ellipses are rendered as ellipsoids.",key:"layers.features.changeVectorEllipsoid"});this.R(b,{label:"Toggle Ground Reference",description:"Whether or not ellipses are rendered with a ground reference line.",key:"layers.features.changeVectorGroundReference"});this.R(b,{label:"Toggle Line of Bearing Arrow",description:"Whether or not lines of bearing are rendered with arrows.",key:"layers.features.changeVectorShowArrow"});this.R(b,{label:"Toggle Line of Bearing Show Error",
description:"Whether or not lines of bearing are rendered with error arcs.",key:"layers.features.changeVectorShowError"});this.R(b,{label:"Toggle Line of Bearing Show Ellipse",description:"Whether or not lines of bearing are rendered with error ellipses.",key:"layers.features.changeVectorShowEllipse"});this.R(b,{label:"Line of Bearing Arrow Length",description:"The length of an arrow drawn with lines of bearing.",key:"layers.features.changeVectorArrowSize"});this.R(b,{label:"Line of Bearing Arrow Length Units",
description:"The units of the length of an arrow drawn with lines of bearing.",key:"layers.features.changeVectorArrowUnits"});this.R(b,{label:"Line of Bearing Length Multiplier",description:"The multiplier on the length of a line of bearing.",key:"layers.features.changeVectorLineOfBearingLength"});this.R(b,{label:"Line of Bearing Length Type",description:"The type of the length of a line of bearing (manual or column).",key:"layers.features.changeVectorLineOfBearingLengthType"});this.R(b,{label:"Line of Bearing Length",
description:"The length of a line of bearing. Can be defined by a column.",key:"layers.features.changeVectorLineOfBearingLengthColumn"});this.R(b,{label:"Line of Bearing Length Column Multiplier",description:"The multiplier on the length of a line of bearing, column option.",key:"layers.features.changeVectorLineOfBearingColumnLength"});this.R(b,{label:"Line of Bearing Length Units",description:"The units on the length of a line of bearing.",key:"layers.features.changeVectorLineOfBearingLengthUnits"});
this.R(b,{label:"Line of Bearing Length Error",description:"The length error of a line of bearing. Can be defined by a column.",key:"layers.features.changeVectorLineOfBearingLengthErrorColumn"});this.R(b,{label:"Line of Bearing Length Error Multiplier",description:"The multiplier on the error length of a line of bearing.",key:"layers.features.changeVectorLineOfBearingLengthError"});this.R(b,{label:"Line of Bearing Length Error Units",description:"The units of the length error of a line of bearing.",
key:"layers.features.changeVectorLineOfBearingLengthErrorUnits"});this.R(b,{label:"Line of Bearing Orientation",description:"The orientation of a line of bearing. Can be defined by a column.",key:"layers.features.changeVectorLineOfBearingBearingColumn"});this.R(b,{label:"Line of Bearing Orientation Error",description:"The orientation error of a line of bearing. Can be defined by a column.",key:"layers.features.changeVectorLineOfBearingBearingErrorColumn"});this.R(b,{label:"Line of Bearing Orientation Error Multiplier",
description:"The multipler on the orientation error of a line of bearing. Can be defined by a column.",key:"layers.features.changeVectorLineOfBearingBearingError"});this.R(b,{label:"Toggle Show Icon Rotation",description:"Whether or not icons are shown with rotation.",key:"layers.features.changeVectorShowRotation"});this.R(b,{label:"Icon Rotation Column",description:"The orientation of an icon. Can be defined by a column.",key:"layers.features.changeVectorRotationColumn"});this.R(b,{label:"Change Feature Auto Refresh",
description:"How often the layer will automatically refresh its data.",key:Sz});b=this.R(a,{label:"Label Panel",collapsed:!0,description:"The layer label panel allows control over a layer's. label settings, including label color and columns."});this.R(b,{label:"Change Label Color",description:'The color used for labels on this layer when "Always Show Labels" is checked. <br/>NOTE: The label color does not affect the label color used when hovering, which is alaways red.',key:"layers.features.changeLabelColor"});
this.R(b,{label:"Change Label Size",description:"The font size used for labels on this layer.",key:"layers.features.changeLabelSize"});this.R(b,{label:"Always Show Labels",description:"When checked, labels will be rendered for all features.",key:"layers.features.changeLabelToggle"});this.R(b,{label:"Select a label column",description:"Controls the data column used for labels on this layer.",key:"layers.features.labelColumnSelect"});this.R(b,{label:"Add a label column",description:"Add additional columns used for labels.",
key:"layers.features.labelColumnAdd"});this.R(b,{label:"Remove a label column",description:"Add remove columns used for the labels.",key:"layers.features.labelColumnRemove"});b=this.R(a,{label:"Layer Context Menu",collapsed:!0,description:"Layer right-click context menu commands."});this.R(b,{label:"Identify",key:"layers.contextMenu.identify"});this.R(b,{label:"Most Recent",key:"layers.contextMenu.mostRecent"});this.R(b,{label:"Refresh",key:"layers.contextMenu.refresh"});this.R(b,{label:"Remove",
key:"layers.contextMenu.remove",description:"Removes this layer."});this.R(b,{label:"Rename",key:"layers.contextMenu.rename"});a=this.R(a,{label:"Feature Layer Context Menu",collapsed:!0,description:"Layer right-click context menu commands."});this.R(a,{label:"Go to layer",description:"Zooms to data loaded by this layer.",key:"layers.contextMenu.featureLayer.goTo"});this.R(a,{label:"Identify",description:"Causes current layer to blink.",key:"layers.contextMenu.identify"});this.R(a,{label:"Clear Selection",
description:"Clear any selected data from layer.",key:"layers.contextMenu.featureLayer.clearSelection"});this.R(a,{label:"Most Recent",description:"Focuses time filter (in main menu bar) to most recent data available.",key:"layers.contextMenu.mostRecent"});this.R(a,{label:"Refresh",description:"Refreshes the layer form the server.",key:"layers.contextMenu.refresh"});this.R(a,{label:"Remove",description:"Removes this layer.",key:"layers.contextMenu.remove"});this.R(a,{label:"Rename",description:"Renames this layer.",
key:"layers.contextMenu.rename"});this.R(a,{label:"Generate 2D Heatmap",description:"Generate 2D Heatmap for this layer.",key:"layers.contextMenu.featureLayer.heatMap"});this.R(a,{label:"Export...",description:"Exports data from this layer.",key:"layers.contextMenu.export"});this.R(a,{label:"Create Buffer Region",description:"Creates buffered region from data in this layer.",key:"layers.contextMenu.createBuffer"})}w(rra,PR);function sra(){PR.call(this);this.Da("Places");this.yc("fa fa-circle-o");this.Fd(!0);var a=QR(this);this.R(a,{label:"Add Place",description:"Add a Place to your Places list.",key:"places.addPlace"});this.R(a,{label:"Add Folder",description:"Add a folder to your Places list.",key:"places.addFolder"});this.R(a,{label:"Export",description:"Export your Places list.",key:"places.export"});this.R(a,{label:"Expand All",description:"Click the expand all button on your Places list.",key:"places.expandAll"});
this.R(a,{label:"Collapse All",description:"Click the collapse all button on your Places list.",key:"places.collapseAll"});a=this.R(a,{label:"Places Context Menu"});this.R(a,{label:"Edit Folder",description:"Edit a Places folder.",key:"places.contextMenu.editFolder"});this.R(a,{label:"Edit Place",description:"Edit a Place.",key:"places.contextMenu.editPlacemark"});this.R(a,{label:"Export Node",description:"Export a Place or a folder from the Places list.",key:"places.contextMenu.export"})}w(sra,PR);function tra(){PR.call(this);this.Da("Servers");this.fb("The servers window can be accessed through the settings window. It shows all of the servers that are currently configured. It also allows you to add, edit, refresh and remove servers.");this.yc("fa fa-database");this.Fd(!0);var a=QR(this);this.R(a,{label:"Add Server",description:"Add a new server in the Servers section in settings.",key:"servers.addServer"});this.R(a,{label:"View Server",description:"View details about a server in the Servers section in settings.",
key:"servers.view"});this.R(a,{label:"Refresh a server in the Servers section in settings.",key:"servers.refresh"});this.R(a,{label:"Edit a server in the Servers section in settings.",key:"servers.edit"});this.R(a,{label:"Delete a server in the Servers section in settings.",key:"servers.delete"})}w(tra,PR);var ura=[{label:"Play",description:"The play or pause button animates loaded data over time.",key:"timeline.features.controls-playToggle"},{label:"Next Frame",description:"This button moves the blue time frame window to the next frame.",key:"timeline.features.controls-nextFrame"},{label:"Previous Frame",description:"This button moves the blue time frame window to the previous frame.",key:"timeline.features.controls-prevFrame"},{label:"First Frame",key:"timeline.features.controls-firstFrame"},{label:"Last Frame",
key:"timeline.features.controls-lastFrame"},{label:"Zoom In",key:"timeline.features.controls-zoomIn"},{label:"Zoom Out",key:"timeline.features.controls-zoomOut"},{label:"Mouse Wheel Zoom",description:"Zooms the timeline in or out",key:"timeline.features.controls-mouseZoom"},{label:"Record",key:"timeline.features.controls-record"},{label:"Reset",key:"timeline.features.controls-reset"},{label:"Chart Type",key:"timeline.features.controls-chartType"}],vra=[{label:"Load",description:"Queries a time range drawn on the timeline. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",
key:"timeline.features.timeRange-load"},{label:"Add",description:"Adds a time range drawn on the timeline. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",key:"timeline.features.timeRange-add"},{label:"Slice",description:"Adds a slice range drawn on the timeline. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",
key:"timeline.features.timeRange-slice"},{label:"Select",description:"Selects features in the drawn time range. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",key:"timeline.features.timeRange-select"},{label:"Select Exclusive",description:"Selects only features in the drawn time range, deselecting all other features. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",
key:"timeline.features.timeRange-selectExclusive"},{label:"Deselect",description:"Deselects all features in the drawn time range. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",key:"timeline.features.timeRange-deselect"},{label:"Zoom",description:"Zooms to the drawn time range. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",
key:"timeline.features.timeRange-zoom"},{label:"Animates this time range",description:"Animates data over the drawn time range. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag.",key:"timeline.features.timeRange-animate"}],wra=[{label:"Fade",description:"Fade in/out features based on the size of your timeline window and scroll direction",key:"timeline.features.settings-fade"},
{label:"Lock",description:"Locks start of view window during animation",key:"timeline.features.settings-lock"},{label:"Time Range",description:"Changes the load range from the timeline settings",key:"timeline.features.settings-timeRange"}];
function xra(){PR.call(this);this.Da("Timeline");this.fb("Animate data loaded in the application over a time range.");this.vb(["Animation"]);this.yc("fa fa-clock-o");this.Fd(!0);var a=QR(this);this.R(a,{label:"Open Timeline",description:'The <i class="fa fa-clock-o"></i> icon located at the top center of the screen opens the time-line control.',key:"timeline.features.open"});var b=this.R(a,{label:"Control Panel",description:"Controls displayed at the bottom of the timeline."});this.Tj(b,ura);b=this.R(a,
{label:"Time Range Menu",TS:"Actions that can be taken using a drawn time range. To start drawing a range on the timeline, hold Shift then click and drag on the timeline over the desired range. You can also click the time range button in the timeline controls, then click and drag."});this.Tj(b,vra);a=this.R(a,{label:"Settings",description:"Timeline settings available from the settings button in the control panel."});this.Tj(a,wra)}w(xra,PR);function DU(){this.g={};this.j=vg.s();this.j.H("timeline.reset",this.o,!1,this);Y.H("dataSourceRemoved",this.l,!1,this)}w(DU,x);xa(DU);DU.prototype.J=function(){DU.C.J.call(this);this.j.M("timeline.reset",this.o,!1,this);Y.M("dataSourceRemoved",this.l,!1,this)};DU.prototype.l=function(a){var b;if(b=a.source)b=a.source.D()in this.g;b&&(a=a.source.D(),delete this.g[a])};DU.prototype.o=function(){for(var a in this.g)EU(this.g[a],this.j)};function FU(a,b,c,d,e){A.call(this,a,e);this.u=c||[];this.l=b;this.K=void 0!==d?d:c?c.length:0}w(FU,A);FU.prototype.pe=function(){return this.u};function GU(){C.call(this);this.l="";this.g={};this.A=[];this.G={};this.j=[];this.o={};this.u=0;this.B=null;this.I=this.uD}w(GU,C);xa(GU);var yra=E.V("os.search.SearchManager");
function HU(a,b){if(b){var c=b.D();(c=a.g[c]||null)?E.error(yra,'Search provider already registered with id "'+c.D()+'". Existing name is "'+c.getName()+'", new name is "'+b.getName()+'".'):(a.g[b.D()]=b,b.H("success",a.gL,!1,a),b.H("error",a.wF,!1,a),b.H("autocomplete.success",a.WE,!1,a),b.H("autocomplete.error",a.VE,!1,a),a.dispatchEvent("change"))}}function IU(a,b){return ic(a.g).filter(function(a){return b?a.isEnabled()&&(b&&"string"===typeof b?!0:!1):a.isEnabled()})}g=GU.prototype;
g.search=function(a,b,c,d,e,f,h){this.l=a;this.G={};this.j=[];this.u=0;if((a||e)&&0!==c)if(e=IU(this,a),0<e.length){this.dispatchEvent(new FU("start",this.l,[],0));for(var k in this.o)this.o[k]&&this.g[k]&&this.g[k].cancel();this.o={};k=0;for(var l=e.length;k<l;k++)this.o[e[k].D()]=!0,O(P.s(),"type."+e[k].type,1);k=0;for(l=e.length;k<l;k++)e[k].search(a,b,c,d,f,h)}else 0==gc(this.g)?(a=Xh(),a="No search types are available. Please ensure you have appropriate permissions or contact "+(void 0!==a?"<b>"+
a+"</b>":"an administrator")+" for support.",rj(qj.s(),a,Qh)):(a="No search types are enabled that support requested search. Please enable at least one type in the search menu.",rj(qj.s(),a,Rh));else this.clear()};g.gL=function(a){var b=a.target;delete this.o[b.D()];var c=a.pe()||[];b.LA()&&zra(c);this.G[b.getName()+"_"+b.T()]={results:c,total:a.K};this.j=[];this.u=0;fc(this.G,function(a){this.j=this.j.concat(a.results);this.u+=a.total},this);this.l!==a.l&&(this.l=a.l||"");wb(this.j,this.ON);Ara(this)};
g.wF=function(a){delete this.o[a.target.D()];Ara(this)};function Ara(a){if(a.B)if(0===a.j.length)a.j.push(new a.B);else if(1<a.j.length)for(var b=0,c=a.j.length;b<c;b++)if(a.j[b]instanceof a.B){a.j.splice(b,1);break}b="success";pc(a.o)||(b="progress");a.dispatchEvent(new FU(b,a.l,a.j,a.u))}g.WE=function(a){if(a=a.pe())this.A=this.A.concat(a);this.dispatchEvent(new FU("autocomplete.success",this.l,this.A))};g.VE=function(){this.dispatchEvent(new A("autocomplete.error"))};
g.clear=function(a){this.l=a||"";this.G={};this.j=[];this.u=0;for(var b in this.g)this.g[b].cancel();this.o={};this.dispatchEvent(new FU("success",this.l,this.j,0))};g.pe=function(){return rb(this.j)};function zra(a){if(a.length){var b=a[0].lc();if(db(a,function(a){return b==a.lc()}))a.forEach(function(b,c){b.j=(c+1)/a.length*100});else{var c=Number.NEGATIVE_INFINITY;a.forEach(function(a){c=c<a.lc()?a.lc():c});a.forEach(function(a){var b=a.lc()/(c/100);a.j=b})}}}
g.ON=function(a,b){return-xb(a.lc(),b.lc())};g.uD=function(){return[]};var Bra=GU.s();function Cra(a){var b=a.localName;(a=a.getAttribute("type"))&&(b+="#"+a);return b}function Dra(a,b){return xb(b.priority,a.priority)}function Era(a,b){return xb(a.S(),b.S())};function JU(a){this.description=null;this.load=!1;this.ie=this.g=this.method=null;this.title=a};function KU(a,b){JU.call(this,a);this.te=b||null}w(KU,JU);function LU(a){oM.call(this,a);this.state=this.loadItems=null}w(LU,oM);Q.directive("defaultfilenodeui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/file/defaultfilenodeui.html",controller:MU,controllerAs:"nodeUi"}}]);function MU(a,b){FE.call(this,a,b);this.confirmRemove=!1}w(MU,FE);MU.$inject=["$scope","$element"];
MU.prototype.Al=function(){gD({confirm:this.remove.bind(this),cancel:wa,prompt:"Are you sure you want to remove this file from the application? <b>This action cannot be undone</b>, and will clear the application history.",yesText:"Remove",yesIcon:"fa fa-trash-o",yesButtonClass:"btn-danger",windowOptions:{label:"Remove File",icon:"fa fa-trash-o",headerClass:"bg-danger u-bg-danger-text",x:"center",y:"center",width:"325",height:"auto",modal:"true","no-scroll":"true"}})};MU.prototype.tryRemove=MU.prototype.Al;
MU.prototype.Ka=function(){return this.scope.item.Ka()};MU.prototype.remove=function(){var a=this.Ka(),b=Y;a&&a instanceof hM&&(Rw(b,a),(b=b.rb(a.ag()))&&b instanceof ZM&&tka(b,a,!0),a.dispose(),OE.s().Vo())};function Fra(a){JU.call(this,a)}w(Fra,JU);function NU(a,b,c,d){this.id=a;this.enabled=!1;this.label=b;this.tooltip=d||"Clear "+b;this.g=c}NU.prototype.xb=function(){return new this.g};function OU(){this.j=Gra;this.g={}}xa(OU);var Gra=E.V("os.ui.clear.ClearManager");OU.prototype.getEntries=function(){return this.g};function PU(a){var b=QU;if(a.id in b.g)E.error(b.j,"Clear type already exists: "+a.label);else{var c=M.get(["ui","clear",a.id],!1);a.enabled=c;b.g[a.id]=a}}
OU.prototype.clear=function(a,b){var c=[],d=[],e;for(e in this.g){var f=this.g[e];b&&b.length&&gb(b,e)||!f.enabled&&!a||(c.push(f.xb()),d.push(f.label))}0<c.length&&(1<c.length?(a=new TP,a.bc(c),a.title="Clear "+d.join(", ")):a=c[0],AE(OE.s(),a));for(var h in this.g)c=this.g[h],M.set(["ui","clear",c.id],c.enabled)};OU.prototype.reset=function(){for(var a in this.g){var b=this.g[a];b.enabled=M.get(["ui","clear",b.id],!1)}};var QU=OU.s();function Hra(a,b,c,d){function e(b){if(!d.$pristine||b){var c=!0;a.oldTitle!==b&&null==a.stateForm.persister&&(c=!RU.kz(b));d.$setValidity("title",c);d.$setDirty()}return b}d.$formatters.unshift(e);d.$parsers.unshift(e);a.$watch("stateForm.persister",function(){e(d.$modelValue)})}Q.directive("statetitle",[function(){return{require:"ngModel",link:Hra}}]);function SU(a,b){this.scope=a;this.element=b;this.all=!1;this.persister=null;this.persisters={};this.showOptions=!1;this.states=[];this.isSaving=!1;a.$on("$destroy",this.l.bind(this))}SU.$inject=["$scope","$element"];SU.prototype.l=function(){this.element=this.scope=null};SU.prototype.accept=function(){this.close()};SU.prototype.accept=SU.prototype.accept;SU.prototype.close=function(){kx(this.element)};SU.prototype.close=SU.prototype.close;
SU.prototype.yi=function(){for(var a=0,b=this.states.length;a<b;a++)this.states[a].Za(this.all)};SU.prototype.toggleAll=SU.prototype.yi;SU.prototype.qb=function(a){a=a.qb();this.isSaving||(a=a.replace("Saves","Sets"));return a};SU.prototype.getDescription=SU.prototype.qb;SU.prototype.S=function(a){return a.S()};SU.prototype.getTitle=SU.prototype.S;Q.directive("stateimport",[function(){return{restrict:"E",scope:!0,templateUrl:"v1541734487/views/window/stateimportexport.html",controller:TU,controllerAs:"stateForm"}}]);
function TU(a,b){SU.call(this,a,b);this.g=a.config;this.g.replace&&(this.scope.oldTitle=this.g.title);this.j=this.g.state;a.title=this.g.title;a.description=this.g.description;a.tags=this.g.tags;this.states=RU.Ml(this.j);this.all=db(this.states,function(a){return a.kc()},this);this.showClear=0<gc(QU.getEntries());this.clear=M.get("state.clear",!1);if(this.g.loadItems){this.showOptions=!0;b=0;for(var c=this.states.length;b<c;b++){var d=this.states[b];d.Za(gb(this.g.loadItems,d.toString()))}}a.$emit("window.ready")}
w(TU,SU);TU.$inject=["$scope","$element"];TU.prototype.l=function(){TU.C.l.call(this);qc(this.g);this.j=this.g=null};TU.prototype.accept=function(){this.showClear&&(M.set("state.clear",this.clear),this.clear&&QU.clear(!0,["mapPosition"]));var a=null;this.j instanceof Document?a=new KU(this.scope.title,this.j):a=new Fra(this.scope.title,this.j);a.description=this.scope.description;a.g=this.states;a.ie=this.scope.tags;a.load=!0;var b=this.g.file,c=RU,d=b.Ma();d&&Jw(d)?Ira(c,b,a):c.qs(b,a);TU.C.accept.call(this)};
TU.prototype.accept=TU.prototype.accept;function UU(){dT.call(this)}w(UU,dT);
UU.prototype.Jb=function(a,b){UU.C.Jb.call(this,a,b);var c=new LU;b&&this.g(b,c);c.file=a;b=null;Cw(a);var d=a.Pb(),e=a.l;if(d)if("string"===typeof d)if("application/json"==e)try{b=JSON.parse(d)}catch(f){b=void 0}else b=Wx(d);else if(d instanceof Document||Ba(d))b=d;c.state=b;b instanceof Document?(b&&((d=b.querySelector("state > title"))&&d.textContent&&(c.title=d.textContent),(d=b.querySelector("state > description"))&&d.textContent&&(c.description=d.textContent),b=b.querySelector("state > tags"))&&
(b=OP(b),c.tags=b?b.join(", "):""),Jra(a,c)):Ba(b)&&(b&&(c.title=b.title,c.description=b.description,c.tags=b.tags),Jra(a,c))};UU.prototype.g=function(a,b){UU.C.g.call(this,a,b);b.state=a.state;b.loadItems=a.loadItems};function Jra(a,b){b.title||(b.title=a.getFileName());fx({label:"Import State",icon:"fa fa-file-text",x:"center",y:"center",width:"400",height:"auto",modal:"true","show-close":"true"},"<stateimport></stateimport>",void 0,void 0,void 0,{config:b})};Q.directive("stateexport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/window/stateimportexport.html",controller:VU,controllerAs:"stateForm"}}]);
function VU(a,b,c){SU.call(this,a,b);this.appName=Wh();this.persister=null;if((b=mQ(WU.s()))&&0<b.length)for(var d=0,e=b.length;d<e;d++)this.persisters[b[d].ba()]=b[d];(b=a.defaultMethod||"File",b in this.persisters)&&(this.persister=this.persisters[b]);this.states=XU(RU);this.all=db(this.states,function(a){return a.kc()},this);this.isSaving=!0;c(function(){a.$emit("window.ready")})}w(VU,SU);VU.$inject=["$scope","$element","$timeout"];
VU.prototype.accept=function(){var a=this.persister||null,b=this.scope.title,c=this.scope.description,d=this.scope.tags;if(this.states&&0<this.states.length){var e=[];for(var f=0,h=this.states.length;f<h;f++){var k=this.states[f];k.kc()&&e.push(k)}}f=RU;var l=Wh("Unknown Application");var m=M.get("about.version","Unknown Version");h=Ux();k=hG("state",f.o,h);k.setAttribute("source",l+" ("+m+")");k.setAttribute("version",f.g);h.appendChild(k);Z("title",k,b);c&&Z("description",k,c);if(d){var n;"string"===
typeof d?n=d?Jb(d).split(/\s*,\s*/):null:d&&(n=d);if(n){l=ny("tags",h);m=0;for(var p=n.length;m<p;m++)Z("tag",l,n[m]);n=l}else n=null;n&&k.appendChild(n)}b=new KU(b,h);b.description=c||null;b.method=a;b.ie=d||null;e||(e=XU(f));if(e){b.g=e;a=new nh;c=0;for(d=e.length;c<d;c++)xh(a,e[c].save(b));uh(a,Ga(f.nr,b),f.yx,f).callback()}else f.yx("No state types selected");VU.C.accept.call(this)};VU.prototype.accept=VU.prototype.accept;var RU=null;function YU(){C.call(this);this.contentType="text/plain";this.u={};this.j={};this.g="";this.log=Kra}w(YU,C);xa(YU);var Kra=E.V("os.ui.state.StateManager");g=YU.prototype;g.rs=function(a){this.g=a};function ZU(a,b){return b in a.u?new a.u[b]:null}
function $U(a,b,c){if(!b)throw Error("version cannot be empty or null!");if(!c)throw Error("clazz cannot be empty or null!");try{b in a.j||(a.j[b]={});var d=(new c).toString();d in a.j[b]&&E.hb(a.log,"Replacing state implementation in version "+b+' for tag "'+d+'".');a.j[b][d]=c}catch(e){throw Error("clazz must be a state constructor!");}}g.ru=function(){};
function XU(a,b){var c=[];if(b)for(var d in a.j)for(e in b=a.j[d],b)c.push(new b[e]);else if(a.g in a.j){b=a.j[a.g];for(var e in b)c.push(new b[e])}c.sort(Era);return c}g.kz=function(){return!1};g.qs=function(){};function aV(){fx({id:"stateExport",label:"Save State",icon:"fa fa-floppy-o",x:"center",y:"center",width:"385",height:"auto",modal:"true","show-close":"true"},'<stateexport default-method="defaultMethod"></stateexport>',void 0,void 0,void 0,{defaultMethod:void 0})}
g.nr=function(a){var b=a.te?lG(a.te):null,c=a.te?a.te.querySelector("title").textContent+"_state.xml":null,d=a.method;if(d)d.save(c,b,a.contentType||this.contentType,a.title,a.description,a.ie);else try{var e=new Aw;e.j=c;e.Mb(Hw(c));e.g=b;e.l=this.contentType;iB(eB.s(),e);Ira(this,e,a)||E.error(this.log,"Failed saving state: unable to save locally")}catch(f){E.error(this.log,"error saving state file to local storage: "+f.message,f)}};g.yx=function(a){E.error(this.log,"Failed saving state: "+a)};
function Ira(a,b,c){uh(jB(eB.s(),b),Ga(a.qs,b,c),a.aM,a);return!0}g.aM=function(a){"string"===typeof a?E.error(this.log,"Unable to store state file locally: "+a):E.error(this.log,"Unable to store state file locally!")};function bV(){hM.call(this);this.o="state";this.log=Lra;this.Ub("Saved States");this.nd=!0;this.u=new LU;this.url=this.l=null}w(bV,hM);F(bV,"os.data.IUrlDescriptor");F(bV,"os.ui.data.IStateDescriptor");var Lra=E.V("os.ui.state.AbstractStateDescriptor");g=bV.prototype;g.xg=function(){if(this.isActive())cV(this);else for(var a=RU,b=this.D()+"-",c=XU(a,!0),d=0,e=c.length;d<e;d++)try{var f=c[d];f.remove(b)}catch(h){E.error(a.log,"Could not remove "+f.toString()+": "+h.message,h)}return!0};
function cV(a,b){try{if(b){a.Wa(!1);Cw(b);var c=b.Pb(),d=(/^\s*$/.test(c)?0:/^[\],:{}\s\u2028\u2029]*$/.test(c.replace(/\\["\\\/bfnrtu]/g,"@").replace(/(?:"[^"\\\n\r\u2028\u2029\x00-\x08\x0a-\x1f]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)[\s\u2028\u2029]*(?=:|,|]|}|$)/g,"]").replace(/(?:^|:|,)(?:[\s\u2028\u2029]*\[)+/g,"")))?JSON.parse(c):Wx(c),e=RU.Ml(d),f=a.l?a.l.slice():null;if(f){b=0;for(var h=e.length;b<h;b++){var k=e[b];k.Za(gb(f,k.toString()))}}RU.Bq(d,e,a.D()+"-",a.S())}else{var l=
a.Ma();if(l)if(a.Wa(!0),Jw(l))uh(hB(eB.s(),l),a.YL,a.XL,a);else{var m=new vM;m.Mb(l);m.H("complete",a.ZL,!1,a);m.H("cancel",a.jz,!1,a);m.H("error",a.jz,!1,a);m.jj()}else dV(a,"No URL provided for state file!")}}catch(n){dV(a,"Unable to activate state: "+n.message,n)}}g.YL=function(a){a?cV(this,a):dV(this,"State file not found in local storage!")};g.XL=function(a){dV(this,"string"===typeof a?"Unable to load state file from storage: "+a:"State file not found in local storage!")};
g.ZL=function(a){a=a.target;var b=a.j;a.dispose();b?cV(this,b):dV(this,"Unable to load state file from URL!")};g.jz=function(a){a.target.dispose();dV(this,"Unable to load state file from URL!")};function dV(a,b,c){E.error(a.log,b,c);a.Wa(!1);a.setActive(!1)}g.Ld=function(){return"<defaultfilenodeui></defaultfilenodeui>"};g.Ma=function(){return this.url};g.Mb=function(a){this.url=a};g.gh=function(a){return a==this.Ma()};g.Yc=function(a){this.u.color=a;bV.C.Yc.call(this,a)};
g.fb=function(a){this.u.description=a;bV.C.fb.call(this,a)};g.vb=function(a){this.u.tags=a?a.join(", "):"";bV.C.vb.call(this,a)};g.Ta=function(a){this.u.title=a;bV.C.Ta.call(this,a)};g.clearData=function(){var a=this.Ma();a&&Jw(a)&&fB(eB.s(),a)};g.ra=function(a){a=bV.C.ra.call(this,a);a.loadItems=this.l?this.l.slice():null;a.url=this.Ma();return a};g.restore=function(a){var b=a.loadItems||null;this.l=b;this.u.loadItems=b;this.url=a.url||null;bV.C.restore.call(this,a)};function eV(){bV.call(this);this.log=Mra}w(eV,bV);var Mra=E.V("os.state.StateDescriptor");eV.prototype.gd=function(){return'<i class="fa fa-bookmark" title="State file"/>'};function fV(){this.deferred=null;this.description="";this.enabled=!0;this.priority=0;this.j=null;this.g="state";this.title=""}g=fV.prototype;g.kc=function(){return this.enabled};g.Za=function(a){this.enabled=a};g.S=function(){return this.title};g.qb=function(){return this.description};g.save=function(a){this.deferred&&!this.deferred.g&&this.deferred.cancel(!0);this.deferred=new nh;this.bd(a,ny(this.g,a.te,void 0,this.j));return this.deferred};g.Td=function(a){this.deferred&&this.deferred.callback(a)};
function gV(a,b){a.deferred&&a.deferred.Gb(b)}g.toString=function(){var a=this.g,b=this.j;b&&b.type&&(a+="#"+b.type);return a};function hV(a,b){b=a+b;a=b.split("#");3<a.length&&(b=[],b[0]=a.shift(),b[2]=a.pop(),b[1]=a.join("-"),b=b.join("#"));return b};function iV(){fV.call(this);this.g="xml"}w(iV,fV);iV.prototype.N=function(a){if(a){for(a=a.parentElement||a;a.parentElement;)a=a.parentElement;return a.getAttribute("source")}return null};function jV(a){if("string"===typeof a){var b=Wx(a);if(b=kr(b))return b}return a}iV.prototype.Td=function(a,b){b&&kr(a.te).appendChild(b);iV.C.Td.call(this,a,b)};function kV(){iV.call(this);this.description="Saves the current filters";this.priority=90;this.g="filters";this.title="Filters"}w(kV,iV);
function lV(a){var b=a.querySelector("filters");a=a.querySelector("queryEntries");void 0!==b&&void 0!==a&&(a=a?a.getElementsByTagName("queryEntry"):[],$a(a,function(a){var c=a.getAttribute("filterId"),e=a.getAttribute("layerId"),f=c+"_"+e,h=b?b.getElementsByTagName("filter"):[];!eb(h,function(a){return a.getAttribute("id")==c&&a.getAttribute("type")==e||a.getAttribute("id")==f&&a.getAttribute("type")==e})&&(h=eb(h,function(a){return a.getAttribute("id")==c}))&&(h=kG(h,b),h.setAttribute("id",f),h.setAttribute("type",
e),a.setAttribute("filterId",f))}))}kV.prototype.bd=function(a,b){try{b.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:ogc","http://www.opengis.net/ogc");var c=this.sources;if(c)for(var d=0,e=c.length;d<e;d++)Nra(b,c[d].D());else Nra(b);this.Td(a,b)}catch(f){gV(this,f.message||"Unspecified error.")}};
function Nra(a,b){if(zE(OC,b))for(var c=yE(OC,b),d=0,e=c.length;d<e;d++){var f=c[d];if(f&&OC.isEnabled(f)){a:{var h=b;var k=lE,l=typeof f;l="string"==l||"number"==l?f:f.D();for(var m=0,n=k.entries.length;m<n;m++){var p=k.entries[m],r=p.filterId,u=p.layerId;if((!h||h===u)&&r===l){h=p.filterGroup;break a}}h=!0}h=h?"AND":"OR";(k=f.sb())&&(k=Wx(k))&&kr(k)&&(k=kr(k))&&(k=kG(k,a,"ogc","http://www.opengis.net/ogc"))&&Z("filter",a,void 0,{id:f.D(),active:!0,filterType:"single",title:f.S(),description:f.qb()||
"",type:b||f.T(),match:h}).appendChild(k)}}};function mV(){this.u=new XMLSerializer;wG.call(this)}I(mV,wG);g=mV.prototype;g.T=function(){return"xml"};g.Ls=function(a,b){return uu(a)?Ora(this,a,b):vu(a)?this.Ms(a,b):"string"===typeof a?(a=wu(a),Ora(this,a,b)):null};function Ora(a,b,c){a=nV(a,b,c);return 0<a.length?a[0]:null}g.Ms=function(){return null};g.vg=function(a,b){return uu(a)?nV(this,a,b):vu(a)?this.fl(a,b):"string"===typeof a?(a=wu(a),nV(this,a,b)):[]};
function nV(a,b,c){var d=[];for(b=b.firstChild;b;b=b.nextSibling)b.nodeType==Node.ELEMENT_NODE&&Wl(d,a.fl(b,c));return d}g.gl=function(a,b){if(uu(a))return null;if(vu(a))return this.aA(a,b);"string"===typeof a&&wu(a);return null};g.aA=function(){return null};g.On=function(a){return uu(a)?this.defaultDataProjection:vu(a)?this.Pn(a):"string"===typeof a?(wu(a),this.defaultDataProjection):null};g.Pn=function(){return this.defaultDataProjection};g.Ht=function(){return this.u.serializeToString(null)};
g.It=function(a,b){a=this.Ho(a,b);return this.u.serializeToString(a)};g.Ho=function(){return null};function oV(a){a=a?a:{};this.featureType=a.featureType;this.featureNS=a.featureNS;this.srsName=a.srsName;this.schemaLocation="";this.g={};this.g["http://www.opengis.net/gml"]={featureMember:zu(oV.prototype.Kn),featureMembers:zu(oV.prototype.Kn)};mV.call(this)}I(oV,mV);var Pra=/^[\s\xa0]*$/;g=oV.prototype;
g.Kn=function(a,b){var c=a.localName,d=null;if("FeatureCollection"==c)"http://www.opengis.net/wfs"===a.namespaceURI?d=Hu([],this.g,a,b,this):d=Hu(null,this.g,a,b,this);else if("featureMembers"==c||"featureMember"==c){var e=b[0],f=e.featureType,h=e.featureNS,k;if(!f&&a.childNodes){f=[];h={};var l=0;for(k=a.childNodes.length;l<k;++l){var m=a.childNodes[l];if(1===m.nodeType){var n=m.nodeName.split(":").pop();if(-1===f.indexOf(n)){var p="",r=0;m=m.namespaceURI;for(var u in h){if(h[u]===m){p=u;break}++r}p||
(p="p"+r,h[p]=m);f.push(p+":"+n)}}}"featureMember"!=c&&(e.featureType=f,e.featureNS=h)}"string"===typeof h&&(l=h,h={},h.p0=l);e={};f=Array.isArray(f)?f:[f];for(var v in h){n={};l=0;for(k=f.length;l<k;++l)(-1===f[l].indexOf(":")?"p0":f[l].split(":")[0])===v&&(n[f[l].split(":").pop()]="featureMembers"==c?yu(this.Yz,this):zu(this.Yz,this));e[h[v]]=n}"featureMember"==c?d=Hu(void 0,e,a,b):d=Hu([],e,a,b)}null===d&&(d=[]);return d};
function Qra(a,b,c){var d=c[0];d.srsName=b.firstElementChild.getAttribute("srsName");d.srsDimension=b.firstElementChild.getAttribute("srsDimension");if(a=Hu(null,a.Lt,b,c,a))return zG(a,!1,d)}
g.Yz=function(a,b){var c;(c=a.getAttribute("fid"))||(c=a.getAttributeNS("http://www.opengis.net/gml","id")||"");var d={},e;for(a=a.firstElementChild;a;a=a.nextElementSibling){var f=a.localName;if(0===a.childNodes.length||1===a.childNodes.length&&(3===a.firstChild.nodeType||4===a.firstChild.nodeType)){var h=su(a,!1);Pra.test(h)&&(h=void 0);d[f]=h}else"boundedBy"!==f&&(e=f),d[f]=Qra(this,a,b)}b=new hq(d);e&&Zu(b,e);c&&b.ga(c);return b};
g.fA=function(a,b){if(a=this.Ln(a,b))return b=new hp(null),ip(b,"XYZ",a),b};g.dA=function(a,b){if(a=Hu([],this.VB,a,b,this))return new jp(a)};g.cA=function(a,b){if(a=Hu([],this.UB,a,b,this))return b=new Mo(null),Qo(b,a),b};g.eA=function(a,b){if(a=Hu([],this.WB,a,b,this))return b=new vp(null),zp(b,a),b};g.Sz=function(a,b){Gu(this.aC,a,b,this)};g.Vv=function(a,b){Gu(this.RB,a,b,this)};g.Tz=function(a,b){Gu(this.bC,a,b,this)};g.Mn=function(a,b){if(a=this.Ln(a,b))return b=new Jo(null),Ko(b,"XYZ",a),b};
g.jN=function(a,b){if(a=Hu(null,this.Il,a,b,this))return a};g.bA=function(a,b){if(a=this.Ln(a,b))return b=new gp(null),Co(b,"XYZ",a),b.ia(),b};g.Nn=function(a,b){if((a=Hu([null],this.Ko,a,b,this))&&a[0]){b=new qp(null);var c=a[0],d=[c.length],e;var f=1;for(e=a.length;f<e;++f)Wl(c,a[f]),d.push(c.length);rp(b,"XYZ",c,d);return b}};g.Ln=function(a,b){return Hu(null,this.Il,a,b,this)};g.VB={"http://www.opengis.net/gml":{pointMember:yu(oV.prototype.Sz),pointMembers:yu(oV.prototype.Sz)}};
g.UB={"http://www.opengis.net/gml":{lineStringMember:yu(oV.prototype.Vv),lineStringMembers:yu(oV.prototype.Vv)}};g.WB={"http://www.opengis.net/gml":{polygonMember:yu(oV.prototype.Tz),polygonMembers:yu(oV.prototype.Tz)}};g.aC={"http://www.opengis.net/gml":{Point:yu(oV.prototype.Ln)}};g.RB={"http://www.opengis.net/gml":{LineString:yu(oV.prototype.Mn)}};g.bC={"http://www.opengis.net/gml":{Polygon:yu(oV.prototype.Nn)}};g.Jl={"http://www.opengis.net/gml":{LinearRing:zu(oV.prototype.jN)}};
g.aA=function(a,b){return(a=Qra(this,a,[xG(this,a,b?b:{})]))?a:null};g.fl=function(a,b){var c={featureType:this.featureType,featureNS:this.featureNS};b&&of(c,xG(this,a,b));return this.Kn(a,[c])||[]};g.Pn=function(a){return Cl(this.srsName?this.srsName:a.firstElementChild.getAttribute("srsName"))};function pV(a){a=su(a,!1);return qV(a)}function qV(a){if(a=/^\s*(true|1)|(false|0)\s*$/.exec(a))return void 0!==a[1]||!1}function rV(a){a=su(a,!1);a=Date.parse(a);return isNaN(a)?void 0:a/1E3}function sV(a){a=su(a,!1);return tV(a)}function tV(a){if(a=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(a))return parseFloat(a[1])}function uV(a){a=su(a,!1);return vV(a)}function vV(a){if(a=/^\s*(\d+)\s*$/.exec(a))return parseInt(a[1],10)}function wV(a){return su(a,!1).trim()}
function xV(a,b){yV(a,b?"1":"0")}function zV(a,b){a.appendChild(qu.createTextNode(b.toPrecision()))}function AV(a,b){a.appendChild(qu.createTextNode(b.toString()))}function yV(a,b){a.appendChild(qu.createTextNode(b))};function BV(a){a=a?a:{};oV.call(this,a);this.I=void 0!==a.surface?a.surface:!1;this.A=void 0!==a.curve?a.curve:!1;this.B=void 0!==a.multiCurve?a.multiCurve:!0;this.G=void 0!==a.multiSurface?a.multiSurface:!0;this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/3.1.1/profiles/gmlsfProfile/1.0.0/gmlsf.xsd";this.hasZ=void 0!==a.hasZ?a.hasZ:!1}I(BV,oV);g=BV.prototype;
g.mN=function(a,b){if(a=Hu([],this.TB,a,b,this))return b=new Mo(null),Qo(b,a),b};g.nN=function(a,b){if(a=Hu([],this.XB,a,b,this))return b=new vp(null),zp(b,a),b};g.Bu=function(a,b){Gu(this.JB,a,b,this)};g.gB=function(a,b){Gu(this.qC,a,b,this)};g.oN=function(a,b){return Hu([null],this.ZB,a,b,this)};g.qN=function(a,b){return Hu([null],this.fC,a,b,this)};g.pN=function(a,b){return Hu([null],this.Ko,a,b,this)};g.lN=function(a,b){return Hu([null],this.Il,a,b,this)};
g.VF=function(a,b){(a=Hu(void 0,this.Jl,a,b,this))&&b[b.length-1].push(a)};g.JD=function(a,b){(a=Hu(void 0,this.Jl,a,b,this))&&(b[b.length-1][0]=a)};g.gA=function(a,b){if((a=Hu([null],this.rC,a,b,this))&&a[0]){b=new qp(null);var c=a[0],d=[c.length],e;var f=1;for(e=a.length;f<e;++f)Wl(c,a[f]),d.push(c.length);rp(b,"XYZ",c,d);return b}};g.Xz=function(a,b){if(a=Hu([null],this.KB,a,b,this))return b=new Jo(null),Ko(b,"XYZ",a),b};
g.iN=function(a,b){a=Hu([null],this.NB,a,b,this);return Uk(a[1][0],a[1][1],a[2][0],a[2][1])};g.kN=function(a,b){var c=su(a,!1),d=/^\s*([+\-]?\d*\.?\d+(?:[eE][+\-]?\d+)?)\s*/;a=[];for(var e;e=d.exec(c);)a.push(parseFloat(e[1])),c=c.substr(e[0].length);if(""===c){b=b[0].srsName;c="enu";b&&(c=Cl(b).Ch);if("neu"===c)for(b=0,c=a.length;b<c;b+=3)d=a[b],a[b]=a[b+1],a[b+1]=d;b=a.length;2==b&&a.push(0);if(0!==b)return a}};
g.Ns=function(a,b){var c=su(a,!1).replace(/^\s*|\s*$/g,"");b=b[0];var d=b.srsName,e=b.srsDimension;b="enu";d&&(b=Cl(d).Ch);c=c.split(/\s+/);d=2;a.getAttribute("srsDimension")?d=vV(a.getAttribute("srsDimension")):a.getAttribute("dimension")?d=vV(a.getAttribute("dimension")):a.parentNode.getAttribute("srsDimension")?d=vV(a.parentNode.getAttribute("srsDimension")):e&&(d=vV(e));for(var f,h=[],k=0,l=c.length;k<l;k+=d)a=parseFloat(c[k]),e=parseFloat(c[k+1]),f=3===d?parseFloat(c[k+2]):0,"en"===b.substr(0,
2)?h.push(a,e,f):h.push(e,a,f);return h};g.Il={"http://www.opengis.net/gml":{pos:zu(BV.prototype.kN),posList:zu(BV.prototype.Ns)}};g.Ko={"http://www.opengis.net/gml":{interior:BV.prototype.VF,exterior:BV.prototype.JD}};
g.Lt={"http://www.opengis.net/gml":{Point:zu(oV.prototype.fA),MultiPoint:zu(oV.prototype.dA),LineString:zu(oV.prototype.Mn),MultiLineString:zu(oV.prototype.cA),LinearRing:zu(oV.prototype.bA),Polygon:zu(oV.prototype.Nn),MultiPolygon:zu(oV.prototype.eA),Surface:zu(BV.prototype.gA),MultiSurface:zu(BV.prototype.nN),Curve:zu(BV.prototype.Xz),MultiCurve:zu(BV.prototype.mN),Envelope:zu(BV.prototype.iN)}};g.TB={"http://www.opengis.net/gml":{curveMember:yu(BV.prototype.Bu),curveMembers:yu(BV.prototype.Bu)}};
g.XB={"http://www.opengis.net/gml":{surfaceMember:yu(BV.prototype.gB),surfaceMembers:yu(BV.prototype.gB)}};g.JB={"http://www.opengis.net/gml":{LineString:yu(oV.prototype.Mn),Curve:yu(BV.prototype.Xz)}};g.qC={"http://www.opengis.net/gml":{Polygon:yu(oV.prototype.Nn),Surface:yu(BV.prototype.gA)}};g.rC={"http://www.opengis.net/gml":{patches:zu(BV.prototype.oN)}};g.KB={"http://www.opengis.net/gml":{segments:zu(BV.prototype.qN)}};g.NB={"http://www.opengis.net/gml":{lowerCorner:yu(BV.prototype.Ns),upperCorner:yu(BV.prototype.Ns)}};
g.ZB={"http://www.opengis.net/gml":{PolygonPatch:zu(BV.prototype.pN)}};g.fC={"http://www.opengis.net/gml":{LineStringSegment:zu(BV.prototype.lN)}};function Rra(a,b,c){var d=c[c.length-1];c=d.hasZ;a.setAttribute("srsDimension",c?3:2);d=d.srsName;b=b.getCoordinates();for(var e=b.length,f=Array(e),h,k=0;k<e;++k){h=b[k];var l=k,m=c,n="enu";d&&(n=Cl(d).Ch);n="en"===n.substr(0,2)?h[0]+" "+h[1]:h[1]+" "+h[0];m&&(n+=" "+(h[2]||0));f[l]=n}yV(a,f.join(" "))}
g.mw=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=ru(a.namespaceURI,"pos");a.appendChild(d);c=c[c.length-1];a=c.hasZ;d.setAttribute("srsDimension",a?3:2);var e=c.srsName;c="enu";e&&(c=Cl(e).Ch);b=b.getCoordinates();c="en"===c.substr(0,2)?b[0]+" "+b[1]:b[1]+" "+b[0];a&&(c+=" "+(b[2]||0));yV(d,c)};var Sra={"http://www.opengis.net/gml":{lowerCorner:W(yV),upperCorner:W(yV)}};g=BV.prototype;
g.TG=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);Iu({node:a},Sra,Eu,[b[0]+" "+b[1],b[2]+" "+b[3]],c,["lowerCorner","upperCorner"],this)};g.jw=function(a,b,c){var d=c[c.length-1].srsName;d&&a.setAttribute("srsName",d);d=ru(a.namespaceURI,"posList");a.appendChild(d);Rra(d,b,c)};g.SG=function(a,b){a=b[b.length-1];b=a.node;var c=a.exteriorWritten;void 0===c&&(a.exteriorWritten=!0);return ru(b.namespaceURI,void 0!==c?"interior":"exterior")};
g.Qm=function(a,b,c){var d=c[c.length-1],e=d.hasZ;d=d.srsName;"PolygonPatch"!==a.nodeName&&d&&a.setAttribute("srsName",d);"Polygon"===a.nodeName||"PolygonPatch"===a.nodeName?(b=tp(b),Iu({node:a,hasZ:e,srsName:d},Tra,this.SG,b,c,void 0,this)):"Surface"===a.nodeName&&(e=ru(a.namespaceURI,"patches"),a.appendChild(e),a=ru(e.namespaceURI,"PolygonPatch"),e.appendChild(a),this.Qm(a,b,c))};
g.Pm=function(a,b,c){var d=c[c.length-1].srsName;"LineStringSegment"!==a.nodeName&&d&&a.setAttribute("srsName",d);"LineString"===a.nodeName||"LineStringSegment"===a.nodeName?(d=ru(a.namespaceURI,"posList"),a.appendChild(d),Rra(d,b,c)):"Curve"===a.nodeName&&(d=ru(a.namespaceURI,"segments"),a.appendChild(d),a=ru(d.namespaceURI,"LineStringSegment"),d.appendChild(a),this.Pm(a,b,c))};
g.lw=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.surface;f&&a.setAttribute("srsName",f);b=yp(b);Iu({node:a,hasZ:e,srsName:f,surface:d},Ura,this.o,b,c,void 0,this)};g.WG=function(a,b,c){var d=c[c.length-1],e=d.srsName;d=d.hasZ;e&&a.setAttribute("srsName",e);b=kp(b);Iu({node:a,hasZ:d,srsName:e},Vra,Cu("pointMember"),b,c,void 0,this)};
g.kw=function(a,b,c){var d=c[c.length-1],e=d.hasZ,f=d.srsName;d=d.curve;f&&a.setAttribute("srsName",f);b=Oo(b);Iu({node:a,hasZ:e,srsName:f,curve:d},Wra,this.o,b,c,void 0,this)};g.nw=function(a,b,c){var d=ru(a.namespaceURI,"LinearRing");a.appendChild(d);this.jw(d,b,c)};g.ow=function(a,b,c){var d=this.j(b,c);d&&(a.appendChild(d),this.Qm(d,b,c))};g.XG=function(a,b,c){var d=ru(a.namespaceURI,"Point");a.appendChild(d);this.mw(d,b,c)};
g.iw=function(a,b,c){var d=this.j(b,c);d&&(a.appendChild(d),this.Pm(d,b,c))};g.VG=function(a,b,c){var d=c[c.length-1],e=of({},d);e.node=a;var f;Array.isArray(b)?d.dataProjection?f=Ql(b,d.featureProjection,d.dataProjection):f=b:f=zG(b,!0,d);Iu(e,Xra,this.j,[f],c,void 0,this)};
g.UG=function(a,b,c){var d=b.D();d&&a.setAttribute("fid",d);d=c[c.length-1];var e=d.featureNS,f=b.de;d.ni||(d.ni={},d.ni[e]={});var h=b.Yb();b=[];var k=[];for(m in h){var l=h[m];null!==l&&(b.push(m),k.push(l),m==f||l instanceof yo?m in d.ni[e]||(d.ni[e][m]=W(this.VG,this)):m in d.ni[e]||(d.ni[e][m]=W(yV)))}var m=of({},d);m.node=a;Iu(m,d.ni,Cu(void 0,e),k,c,b)};
var Ura={"http://www.opengis.net/gml":{surfaceMember:W(BV.prototype.ow),polygonMember:W(BV.prototype.ow)}},Vra={"http://www.opengis.net/gml":{pointMember:W(BV.prototype.XG)}},Wra={"http://www.opengis.net/gml":{lineStringMember:W(BV.prototype.iw),curveMember:W(BV.prototype.iw)}},Tra={"http://www.opengis.net/gml":{exterior:W(BV.prototype.nw),interior:W(BV.prototype.nw)}},Xra={"http://www.opengis.net/gml":{Curve:W(BV.prototype.Pm),MultiCurve:W(BV.prototype.kw),Point:W(BV.prototype.mw),MultiPoint:W(BV.prototype.WG),
LineString:W(BV.prototype.Pm),MultiLineString:W(BV.prototype.kw),LinearRing:W(BV.prototype.jw),Polygon:W(BV.prototype.Qm),MultiPolygon:W(BV.prototype.lw),Surface:W(BV.prototype.Qm),MultiSurface:W(BV.prototype.lw),Envelope:W(BV.prototype.TG)}},Yra={MultiLineString:"lineStringMember",MultiCurve:"curveMember",MultiPolygon:"polygonMember",MultiSurface:"surfaceMember"};BV.prototype.o=function(a,b){return ru("http://www.opengis.net/gml",Yra[b[b.length-1].node.nodeName])};
BV.prototype.j=function(a,b){var c=b[b.length-1];b=c.multiSurface;var d=c.surface,e=c.curve;c=c.multiCurve;Array.isArray(a)?a="Envelope":(a=a.T(),"MultiPolygon"===a&&!0===b?a="MultiSurface":"Polygon"===a&&!0===d?a="Surface":"LineString"===a&&!0===e?a="Curve":"MultiLineString"===a&&!0===c&&(a="MultiCurve"));return ru("http://www.opengis.net/gml",a)};
BV.prototype.Ho=function(a,b){b=yG(this,b);var c=ru("http://www.opengis.net/gml","featureMembers");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation",this.schemaLocation);var d={srsName:this.srsName,hasZ:this.hasZ,curve:this.A,surface:this.I,multiSurface:this.G,multiCurve:this.B,featureNS:this.featureNS,featureType:this.featureType};b&&of(d,b);b=[d];var e=b[b.length-1];d=e.featureType;var f=e.featureNS,h={};h[f]={};h[f][d]=W(this.UG,this);e=of({},e);e.node=c;Iu(e,h,
Cu(d,f),a,b);return c};function CV(a){a=a?a:{};mV.call(this);DV||(EV=[255,255,255,1],FV=new cs({color:EV}),GV=[20,2],HV=IV="pixels",JV=[64,64],KV="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",LV=.5,MV=new eA({anchor:GV,anchorOrigin:"bottom-left",anchorXUnits:IV,anchorYUnits:HV,crossOrigin:"anonymous",rotation:0,scale:LV,size:JV,src:KV}),NV="NO_IMAGE",OV=new Zr({color:EV,width:1}),PV=new Zr({color:[51,51,51,1],width:2}),QV=new Qt({font:"bold 16px Helvetica",fill:FV,stroke:PV,scale:.8}),Zra=new ds({fill:FV,
image:MV,text:QV,stroke:OV,zIndex:0}),DV=[Zra]);this.defaultDataProjection=Cl("EPSG:4326");this.j=a.defaultStyle?a.defaultStyle:DV;this.o=void 0!==a.extractStyles?a.extractStyles:!0;this.B=void 0!==a.writeStyles?a.writeStyles:!0;this.g={};this.A=void 0!==a.showPointNames?a.showPointNames:!0}var DV,EV,FV,GV,IV,HV,JV,KV,LV,MV,NV,OV,PV,QV,Zra;I(CV,mV);
var RV=["http://www.google.com/kml/ext/2.2"],SV=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],$ra={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"};
function TV(a,b){var c=[0,0],d="start";if(a.Pa()){var e=a.Pa().tm();null===e&&(e=JV);2==e.length&&(d=a.Pa().j(),c[0]=d*e[0]/2,c[1]=-d*e[1]/2,d="left")}null!==a.mb()?(e=a.mb(),a=e.clone(),a.B=e.Ae()||QV.Ae(),a.j=e.j||QV.j,a.CA(e.lb()||QV.lb()),a.GA(e.kb()||PV)):a=QV.clone();a.wh(b);a.ng=c[0];a.o=c[1];a.g=d;return new ds({text:a})}
function asa(a,b,c,d,e){return function(){var f=e,h="";f&&this.Z()&&(f="Point"===this.Z().T());f&&(h=this.get("name"),f=f&&h);if(a)return f?(f=TV(a[0],h),a.concat(f)):a;if(b){var k=bsa(b,c,d);return f?(f=TV(k[0],h),k.concat(f)):k}return f?(f=TV(c[0],h),c.concat(f)):c}}function bsa(a,b,c){return Array.isArray(a)?a:"string"===typeof a?(!(a in c)&&"#"+a in c&&(a="#"+a),bsa(c[a],b,c)):b}
function UV(a){a=su(a,!1);if(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))return a=a[1],[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255]}function VV(a){a=su(a,!1);for(var b=[],c=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?))?\s*/i,d;d=c.exec(a);)b.push(parseFloat(d[1]),parseFloat(d[2]),d[3]?parseFloat(d[3]):0),a=a.substr(d[0].length);if(""===a)return b}
function WV(a){var b=su(a,!1).trim();a=a.baseURI;a&&"about:blank"!=a||(a=window.location.href);return a?(new URL(b,a)).href:b}function csa(a){return sV(a)}function dsa(a,b){return Hu(null,esa,a,b)}function fsa(a,b){b=b[b.length-1].flatCoordinates;a=su(a,!1);(a=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(a))?b.push(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]),0):b.push(0,0,0,0)}
function gsa(a,b){if(a=Hu([],hsa,a,b))return b=new Mo(null),Qo(b,a),b}function XV(a,b){if(b=Hu({flatCoordinates:[],whens:[]},isa,a,b)){a=b.flatCoordinates;b=b.whens;var c;var d=0;for(c=Math.min(a.length,b.length);d<c;++d)a[4*d+3]=b[d];b=new Jo(null);Ko(b,"XYZM",a);return b}}function jsa(a,b){var c=Hu({},YV,a,b);if(a=Hu(null,ZV,a,b))return b=new Jo(null),Ko(b,"XYZ",a),b.qc(c),b}function ksa(a,b){var c=Hu({},YV,a,b);if(a=Hu(null,ZV,a,b))return b=new qp(null),rp(b,"XYZ",a,[a.length]),b.qc(c),b}
function lsa(a,b){a=Hu([],msa,a,b);if(!a)return null;if(0===a.length)return new Zo(a);var c=!0,d=a[0].T(),e;var f=1;for(e=a.length;f<e;++f)if(b=a[f],b.T()!=d){c=!1;break}if(c)if("Point"==d){var h=a[0];c=h.layout;d=h.flatCoordinates;f=1;for(e=a.length;f<e;++f)b=a[f],Wl(d,b.flatCoordinates);b=h=new jp(null);Co(b,c,d);b.ia();$V(h,a)}else"LineString"==d?(h=new Mo(null),Qo(h,a),$V(h,a)):"Polygon"==d?(h=new vp(null),zp(h,a),$V(h,a)):"GeometryCollection"==d?h=new Zo(a):Mf(!1,37);else h=new Zo(a);return h}
function nsa(a,b){var c=Hu({},YV,a,b);if(a=Hu(null,ZV,a,b))return b=new hp(null),ip(b,"XYZ",a),b.qc(c),b}function osa(a,b){var c=Hu({},YV,a,b);if((a=Hu([null],psa,a,b))&&a[0]){b=new qp(null);var d=a[0],e=[d.length],f;var h=1;for(f=a.length;h<f;++h)Wl(d,a[h]),e.push(d.length);rp(b,"XYZ",d,e);b.qc(c);return b}}
function aW(a,b){b=Hu({},qsa,a,b);if(!b)return null;a="fillStyle"in b?b.fillStyle:FV;var c=b.fill;void 0===c||c||(a=null);c="imageStyle"in b?b.imageStyle:MV;c==NV&&(c=void 0);var d="textStyle"in b?b.textStyle:QV,e="strokeStyle"in b?b.strokeStyle:OV;b=b.outline;void 0===b||b||(e=null);return[new ds({fill:a,image:c,stroke:e,text:d,zIndex:void 0})]}
function $V(a,b){var c=b.length,d=Array(b.length),e=Array(b.length),f=Array(b.length),h,k,l;var m=k=l=!1;for(h=0;h<c;++h){var n=b[h];d[h]=n.get("extrude");e[h]=n.get("tessellate");f[h]=n.get("altitudeMode");m=m||void 0!==d[h];k=k||void 0!==e[h];l=l||f[h]}m&&a.set("extrude",d);k&&a.set("tessellate",e);l&&a.set("altitudeMode",f)}function rsa(a,b){Gu(ssa,a,b)}function tsa(a,b){Gu(usa,a,b)}
var vsa=X(SV,{displayName:V(wV),value:V(wV)}),ssa=X(SV,{Data:function(a,b){var c=a.getAttribute("name");Gu(vsa,a,b);a=b[b.length-1];null!==c?a[c]=a.value:null!==a.displayName&&(a[a.displayName]=a.value);delete a.value},SchemaData:function(a,b){Gu(wsa,a,b)}}),usa=X(SV,{LatLonAltBox:function(a,b){if(a=Hu({},xsa,a,b))b=b[b.length-1],b.extent=[parseFloat(a.west),parseFloat(a.south),parseFloat(a.east),parseFloat(a.north)],b.altitudeMode=a.altitudeMode,b.minAltitude=parseFloat(a.minAltitude),b.maxAltitude=
parseFloat(a.maxAltitude)},Lod:function(a,b){if(a=Hu({},ysa,a,b))b=b[b.length-1],b.minLodPixels=parseFloat(a.minLodPixels),b.maxLodPixels=parseFloat(a.maxLodPixels),b.minFadeExtent=parseFloat(a.minFadeExtent),b.maxFadeExtent=parseFloat(a.maxFadeExtent)}}),xsa=X(SV,{altitudeMode:V(wV),minAltitude:V(sV),maxAltitude:V(sV),north:V(sV),south:V(sV),east:V(sV),west:V(sV)}),ysa=X(SV,{minLodPixels:V(sV),maxLodPixels:V(sV),minFadeExtent:V(sV),maxFadeExtent:V(sV)}),YV=X(SV,{extrude:V(pV),tessellate:V(pV),altitudeMode:V(wV)}),
esa=X(SV,{coordinates:zu(VV)}),psa=X(SV,{innerBoundaryIs:function(a,b){(a=Hu(void 0,zsa,a,b))&&b[b.length-1].push(a)},outerBoundaryIs:function(a,b){(a=Hu(void 0,Asa,a,b))&&(b[b.length-1][0]=a)}}),isa=X(SV,{when:function(a,b){b=b[b.length-1].whens;a=su(a,!1);a=Date.parse(a);b.push(isNaN(a)?0:a)}},X(RV,{coord:fsa})),ZV=X(SV,{coordinates:zu(VV)}),Bsa=X(SV,{href:V(WV)},X(RV,{x:V(sV),y:V(sV),w:V(sV),h:V(sV)})),bW=X(SV,{Icon:V(function(a,b){return(a=Hu({},Bsa,a,b))?a:null}),heading:V(sV),hotSpot:V(function(a){var b=
a.getAttribute("xunits"),c=a.getAttribute("yunits");var d="insetPixels"!==b?"insetPixels"!==c?"bottom-left":"top-left":"insetPixels"!==c?"bottom-right":"top-right";return{x:parseFloat(a.getAttribute("x")),xunits:$ra[b],y:parseFloat(a.getAttribute("y")),yunits:$ra[c],origin:d}}),scale:V(csa)}),zsa=X(SV,{LinearRing:zu(dsa)}),cW=X(SV,{color:V(UV),scale:V(csa)}),Csa=X(SV,{color:V(UV),width:V(sV)}),msa=X(SV,{LineString:yu(jsa),LinearRing:yu(ksa),MultiGeometry:yu(lsa),Point:yu(nsa),Polygon:yu(osa)}),hsa=
X(RV,{Track:yu(XV)}),Dsa=X(SV,{ExtendedData:rsa,Region:tsa,Link:function(a,b){Gu(dW,a,b)},address:V(wV),description:V(wV),name:V(wV),open:V(pV),phoneNumber:V(wV),visibility:V(pV)}),dW=X(SV,{href:V(WV)}),Asa=X(SV,{LinearRing:zu(dsa)}),Esa=X(SV,{Style:V(aW),key:V(wV),styleUrl:V(WV)}),eW=X(SV,{ExtendedData:rsa,Region:tsa,MultiGeometry:V(lsa,"geometry"),LineString:V(jsa,"geometry"),LinearRing:V(ksa,"geometry"),Point:V(nsa,"geometry"),Polygon:V(osa,"geometry"),Style:V(aW),StyleMap:function(a,b){if(a=Hu(void 0,
Fsa,a,b))b=b[b.length-1],Array.isArray(a)?b.Style=a:"string"===typeof a?b.styleUrl=a:Mf(!1,38)},address:V(wV),description:V(wV),name:V(wV),open:V(pV),phoneNumber:V(wV),styleUrl:V(WV),visibility:V(pV)},X(RV,{MultiTrack:V(gsa,"geometry"),Track:V(XV,"geometry")})),Gsa=X(SV,{color:V(UV),fill:V(pV),outline:V(pV)}),wsa=X(SV,{SimpleData:function(a,b){var c=a.getAttribute("name");null!==c&&(a=wV(a),b[b.length-1][c]=a)}}),qsa=X(SV,{IconStyle:function(a,b){if(a=Hu({},bW,a,b)){b=b[b.length-1];var c="Icon"in
a?a.Icon:{},d=!("Icon"in a)||0<Object.keys(c).length,e,f=c.href;f?e=f:d&&(e=KV);f="bottom-left";var h=a.hotSpot;if(h){var k=[h.x,h.y];var l=h.xunits;var m=h.yunits;f=h.origin}else e===KV?(k=GV,l=IV,m=HV):/^http:\/\/maps\.(?:google|gstatic)\.com\//.test(e)&&(k=[.5,0],m=l="fraction");var n;h=c.x;var p=c.y;void 0!==h&&void 0!==p&&(n=[h,p]);var r;h=c.w;c=c.h;void 0!==h&&void 0!==c&&(r=[h,c]);var u;c=a.heading;void 0!==c&&(u=Of(c));a=a.scale;d?(e==KV&&(r=JV,void 0===a&&(a=LV)),e=new eA({anchor:k,anchorOrigin:f,
anchorXUnits:l,anchorYUnits:m,crossOrigin:"anonymous",offset:n,offsetOrigin:"bottom-left",rotation:u,scale:a,size:r,src:e}),b.imageStyle=e):b.imageStyle=NV}},LabelStyle:function(a,b){(a=Hu({},cW,a,b))&&(b[b.length-1].textStyle=new Qt({fill:new cs({color:"color"in a?a.color:EV}),scale:a.scale}))},LineStyle:function(a,b){(a=Hu({},Csa,a,b))&&(b[b.length-1].strokeStyle=new Zr({color:"color"in a?a.color:EV,width:"width"in a?a.width:1}))},PolyStyle:function(a,b){if(a=Hu({},Gsa,a,b)){b=b[b.length-1];b.fillStyle=
new cs({color:"color"in a?a.color:EV});var c=a.fill;void 0!==c&&(b.fill=c);a=a.outline;void 0!==a&&(b.outline=a)}}}),Fsa=X(SV,{Pair:function(a,b){if(a=Hu({},Esa,a,b)){var c=a.key;c&&"normal"==c&&((c=a.styleUrl)&&(b[b.length-1]=c),(a=a.Style)&&(b[b.length-1]=a))}}});g=CV.prototype;g.Ks=function(a,b){var c=X(SV,{Document:xu(this.Ks,this),Folder:xu(this.Ks,this),Placemark:yu(this.Kq,this),Style:this.sN.bind(this),StyleMap:this.rN.bind(this)});if(a=Hu([],c,a,b,this))return a};
g.Kq=function(a,b){var c=Hu({geometry:null},eW,a,b);if(c){var d=new hq;a=a.getAttribute("id");null!==a&&d.ga(a);b=b[0];(a=c.geometry)&&zG(a,!1,b);d.tb(a);delete c.geometry;this.o&&d.zb(asa(c.Style,c.styleUrl,this.j,this.g,this.A));delete c.Style;d.qc(c);return d}};g.sN=function(a,b){var c=a.getAttribute("id");null!==c&&(b=aW(a,b))&&(a=a.baseURI,a&&"about:blank"!=a||(a=window.location.href),c=a?(new URL("#"+c,a)).href:"#"+c,this.g[c]=b)};
g.rN=function(a,b){var c=a.getAttribute("id");null!==c&&(b=Hu(void 0,Fsa,a,b))&&(a=a.baseURI,a&&"about:blank"!=a||(a=window.location.href),c=a?(new URL("#"+c,a)).href:"#"+c,this.g[c]=b)};g.Ms=function(a,b){return 0<=SV.indexOf(a.namespaceURI)?(a=this.Kq(a,[xG(this,a,b)]))?a:null:null};
g.fl=function(a,b){if(!(0<=SV.indexOf(a.namespaceURI)))return[];var c=a.localName;if("Document"==c||"Folder"==c)return(c=this.Ks(a,[xG(this,a,b)]))?c:[];if("Placemark"==c)return(b=this.Kq(a,[xG(this,a,b)]))?[b]:[];if("kml"==c){c=[];for(a=a.firstElementChild;a;a=a.nextElementSibling){var d=this.fl(a,b);d&&Wl(c,d)}return c}return[]};
function fW(a,b){b=om(b);b=[255*(4==b.length?b[3]:1),b[2],b[1],b[0]];var c;for(c=0;4>c;++c){var d=parseInt(b[c],10).toString(16);b[c]=1==d.length?"0"+d:d}yV(a,b.join(""))}function gW(a,b,c){a={node:a};var d=b.T();if("GeometryCollection"==d){var e=dp(b);var f=hW}else"MultiPoint"==d?(e=kp(b),f=Hsa):"MultiLineString"==d?(e=Oo(b),f=Isa):"MultiPolygon"==d?(e=yp(b),f=Jsa):Mf(!1,39);Iu(a,Ksa,f,e,c)}function Lsa(a,b,c){Iu({node:a},Msa,Nsa,[b],c)}
function Osa(a,b,c){var d={node:a};b.D()&&a.setAttribute("id",b.D());a=b.Yb();var e={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};e[b.de]=1;var f=Object.keys(a||{}).sort().filter(function(a){return!e[a]});if(0<f.length){var h=Fu(a,f);Iu(d,iW,Psa,[{names:f,values:h}],c)}if(f=b.Nd())if(f=f.call(b,0))f=Array.isArray(f)?f[0]:f,this.B&&(a.Style=f),(f=f.mb())&&(a.name=f.mb());f=Qsa[c[c.length-1].node.namespaceURI];a=Fu(a,f);Iu(d,iW,Eu,a,c,f);a=c[0];(b=b.Z())&&(b=zG(b,!0,
a));Iu(d,iW,hW,[b],c)}function jW(a,b,c){var d=b.flatCoordinates;a={node:a};a.layout=b.layout;a.stride=b.stride;b=b.Yb();b.coordinates=d;d=Rsa[c[c.length-1].node.namespaceURI];b=Fu(b,d);Iu(a,Ssa,Eu,b,c,d)}function Tsa(a,b,c){b=tp(b);var d=b.shift();a={node:a};Iu(a,Usa,Vsa,b,c);Iu(a,Usa,Wsa,[d],c)}function Xsa(a,b){zV(a,Math.round(1E6*b)/1E6)}
var Ysa=X(SV,["Document","Placemark"]),ata=X(SV,{Document:W(function(a,b,c){Iu({node:a},Zsa,$sa,b,c,void 0,this)}),Placemark:W(Osa)}),Zsa=X(SV,{Placemark:W(Osa)}),kW=X(SV,{Data:W(function(a,b,c){a.setAttribute("name",b.name);a={node:a};b=b.value;"object"==typeof b?(null!==b&&b.displayName&&Iu(a,kW,Eu,[b.displayName],c,["displayName"]),null!==b&&b.value&&Iu(a,kW,Eu,[b.value],c,["value"])):Iu(a,kW,Eu,[b],c,["value"])}),value:W(function(a,b){yV(a,b)}),displayName:W(function(a,b){a.appendChild(qu.createCDATASection(b))})}),
lW={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},bta=X(SV,["href"],X(RV,["x","y","w","h"])),cta=X(SV,{href:W(yV)},X(RV,{x:W(zV),y:W(zV),w:W(zV),h:W(zV)})),dta=X(SV,["scale","heading","Icon","hotSpot"]),fta=X(SV,{Icon:W(function(a,b,c){a={node:a};var d=bta[c[c.length-1].node.namespaceURI],e=Fu(b,d);Iu(a,cta,Eu,e,c,d);d=bta[RV[0]];e=Fu(b,d);Iu(a,
cta,eta,e,c,d)}),heading:W(zV),hotSpot:W(function(a,b){a.setAttribute("x",b.x);a.setAttribute("y",b.y);a.setAttribute("xunits",b.xunits);a.setAttribute("yunits",b.yunits)}),scale:W(Xsa)}),gta=X(SV,["color","scale"]),hta=X(SV,{color:W(fW),scale:W(Xsa)}),ita=X(SV,["color","width"]),jta=X(SV,{color:W(fW),width:W(zV)}),Msa=X(SV,{LinearRing:W(jW)}),Ksa=X(SV,{LineString:W(jW),Point:W(jW),Polygon:W(Tsa),GeometryCollection:W(gW)}),Qsa=X(SV,"name open visibility address phoneNumber description styleUrl Style".split(" ")),
iW=X(SV,{ExtendedData:W(function(a,b,c){a={node:a};var d=b.names;b=b.values;for(var e=d.length,f=0;f<e;f++)Iu(a,kW,kta,[{name:d[f],value:b[f]}],c)}),MultiGeometry:W(gW),LineString:W(jW),LinearRing:W(jW),Point:W(jW),Polygon:W(Tsa),Style:W(function(a,b,c){a={node:a};var d={},e=b.lb(),f=b.kb(),h=b.Pa();b=b.mb();h instanceof eA&&(d.IconStyle=h);b&&(d.LabelStyle=b);f&&(d.LineStyle=f);e&&(d.PolyStyle=e);b=lta[c[c.length-1].node.namespaceURI];d=Fu(d,b);Iu(a,mta,Eu,d,c,b)}),address:W(yV),description:W(yV),
name:W(yV),open:W(xV),phoneNumber:W(yV),styleUrl:W(yV),visibility:W(xV)}),Rsa=X(SV,["extrude","tessellate","altitudeMode","coordinates"]),Ssa=X(SV,{extrude:W(xV),tessellate:W(xV),altitudeMode:W(yV),coordinates:W(function(a,b,c){c=c[c.length-1];var d=c.layout;c=c.stride;var e;"XY"==d||"XYM"==d?e=2:"XYZ"==d||"XYZM"==d?e=3:Mf(!1,34);var f,h=b.length,k="";if(0<h){k+=b[0];for(d=1;d<e;++d)k+=","+b[d];for(f=c;f<h;f+=c)for(k+=" "+b[f],d=1;d<e;++d)k+=","+b[f+d]}yV(a,k)})}),Usa=X(SV,{outerBoundaryIs:W(Lsa),
innerBoundaryIs:W(Lsa)}),nta=X(SV,{color:W(fW)}),lta=X(SV,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),mta=X(SV,{IconStyle:W(function(a,b,c){a={node:a};var d={},e=b.Ef(),f=b.tm(),h={href:b.g.l};if(e){h.w=e[0];h.h=e[1];var k=b.Ri(),l=b.Lk();l&&f&&0!==l[0]&&l[1]!==e[1]&&(h.x=l[0],h.y=f[1]-(l[1]+e[1]));!k||k[0]===e[0]/2&&k[1]===e[1]/2||(d.hotSpot={x:k[0],xunits:"pixels",y:e[1]-k[1],yunits:"pixels"})}d.Icon=h;e=b.j();1!==e&&(d.scale=e);b=b.l;0!==b&&(d.heading=b);b=dta[c[c.length-1].node.namespaceURI];
d=Fu(d,b);Iu(a,fta,Eu,d,c,b)}),LabelStyle:W(function(a,b,c){a={node:a};var d={},e=b.lb();e&&(d.color=e.Ja());(b=b.j)&&1!==b&&(d.scale=b);b=gta[c[c.length-1].node.namespaceURI];d=Fu(d,b);Iu(a,hta,Eu,d,c,b)}),LineStyle:W(function(a,b,c){a={node:a};var d={color:b.Ja(),width:b.g};b=ita[c[c.length-1].node.namespaceURI];d=Fu(d,b);Iu(a,jta,Eu,d,c,b)}),PolyStyle:W(function(a,b,c){Iu({node:a},nta,ota,[b.Ja()],c)})});function eta(a,b,c){return ru(RV[0],"gx:"+c)}
function $sa(a,b){return ru(b[b.length-1].node.namespaceURI,"Placemark")}function hW(a,b){if(a)return ru(b[b.length-1].node.namespaceURI,lW[a.T()])}var ota=Cu("color"),kta=Cu("Data"),Psa=Cu("ExtendedData"),Vsa=Cu("innerBoundaryIs"),Hsa=Cu("Point"),Isa=Cu("LineString"),Nsa=Cu("LinearRing"),Jsa=Cu("Polygon"),Wsa=Cu("outerBoundaryIs");
CV.prototype.Ho=function(a,b){b=yG(this,b);var c=ru(SV[4],"kml");c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx",RV[0]);c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");var d={node:c},e={};1<a.length?e.Document=a:1==a.length&&(e.Placemark=a[0]);a=Ysa[c.namespaceURI];
e=Fu(e,a);Iu(d,ata,Eu,e,[b],a,this);return c};function mW(a){return a&&(a=Hu({geometry:null},eW,a,[]))&&a.geometry instanceof yo?a.geometry:null}function pta(a,b){var c=b||",",d=a.length;b=[];for(var e=0;e<d;e++)b.push(a[e][0]+c+a[e][1]);2<a.length&&(c=a[0],a=a[d-1],1E-12<Math.abs(c[0]-a[0])||1E-12<Math.abs(c[1]-a[1])?b.push(b[0]):b[b.length-1]=b[0]);return b.join(" ")}
function qta(a,b,c,d){var e="<BBOX";c&&(e+=' areanamehint="'+c+'"');d&&(e+=' description="'+d+'"');return e+"><PropertyName>"+b+'</PropertyName><gml:Envelope srsName="CRS:84"><gml:lowerCorner>'+a[0]+" "+a[1]+"</gml:lowerCorner><gml:upperCorner>"+a[2]+" "+a[3]+"</gml:upperCorner></gml:Envelope></BBOX>"}
function nW(a,b,c,d){Rs(a);var e=[];if(a=oW(a,"GML"))e.push("<Intersects"),c&&e.push(' areanamehint="'+c+'"'),d&&e.push(' description="'+d+'"'),e.push(">","<PropertyName>",b||"none","</PropertyName>",a,"</Intersects>");return 0<e.length?e.join(""):null}
function oW(a,b){if(!a)return null;switch(a.T()){case "LineString":a=[a.getCoordinates()];break;case "Polygon":a=a.getCoordinates();if(1==a.length&&mq(a[0])){a=a[0];for(var c=[a.length+4],d=0;d<a.length;d++)a[d][1]=Vo(a[d][1]);for(d=1;d<a.length;d++){var e=a[d][0]-a[d-1][0];if(180<Math.abs(e)){for(var f=a,h=c,k=0,l=d,m=0;m<0+l;m+=1)h[k++]=f[m];f=a;h=d;k=c;l=d+4;m=a.length-d;for(var n=h;n<h+m;n+=1)k[l++]=f[n];f=90*Math.sign(c[d-1][1]);180>e?(c[d]=[180,c[d-1][1]],c[d+1]=[180,f],c[d+2]=[-180,f],c[d+
3]=[-180,c[d+4][1]]):(c[d]=[-180,c[d-1][1]],c[d+1]=[-180,f],c[d+2]=[180,f],c[d+3]=[180,c[d+4][1]])}}a=[c]}break;case "MultiLineString":return rta(a,b);case "MultiPolygon":return rta(a,b);default:return null}c=[];if(a&&0<a.length){b=b||"GML";d="GML"==b?" ":",";c.push("GML"==b?'<gml:Polygon xmlns:gml="http://www.opengis.net/gml"><gml:exterior><gml:LinearRing><gml:posList srsDimension="2" srsName="CRS:84">':'<kml:Polygon xmlns:kml="http://www.opengis.net/kml/2.2"><kml:outerBoundaryIs><kml:LinearRing><kml:coordinates>');
c.push(pta(a[0],d));c.push("GML"==b?"</gml:posList></gml:LinearRing></gml:exterior>":"</kml:coordinates></kml:LinearRing></kml:outerBoundaryIs>");e=1;for(f=a.length;e<f;e++)c.push("GML"==b?'<gml:interior><gml:LinearRing><gml:posList srsDimension="2" srsName="CRS:84">':"<kml:innerBoundaryIs><kml:LinearRing><kml:coordinates>"),c.push(pta(a[e],d)),c.push("GML"==b?"</gml:posList></gml:LinearRing></gml:interior>":"</kml:coordinates></kml:LinearRing></kml:innerBoundaryIs>");c.push("GML"==b?"</gml:Polygon>":
"</kml:Polygon>")}return 0<c.length?c.join(""):null}
function rta(a,b){if(!a)return null;switch(a.T()){case "MultiLineString":a=Oo(a);break;case "MultiPolygon":a=yp(a);break;default:return null}b=b||"GML";var c=[];if(a&&0<a.length){if("GML"===b){var d="gml:MultiPolygon";var e="gml:polygonMember";var f='xmlns:gml="http://www.opengis.net/gml"'}else d="kml:MultiGeometry",f='xmlns:kml="http://www.opengis.net/kml/2.2"';for(var h=[],k=0;k<a.length;k++){var l=oW(a[k],b);l&&(e&&h.push("<"+e+">"),h.push(l),e&&h.push("</"+e+">"))}0<h.length&&c.push("<",d," ",
f,">",h.join(""),"</",d,">")}return 0<c.length?c.join(""):null};function pW(){iV.call(this);this.description="Saves the current exclusion areas";this.priority=80;this.g="exclusionAreas";this.title="Exclusion Areas"}w(pW,iV);var sta=E.V("os.state.v2.ExclusionArea"),qW={};
pW.prototype.load=function(a,b,c){a=jV(a);if(a instanceof Element)try{var d=a.querySelectorAll("exclusionArea"),e=!1;d.length||(d=a.querySelectorAll("Polygon"),e=!0);if(0<d.length){qW[b]=[];var f=a.parentNode,h=f?f.querySelector("queryEntries"):null;a=[];f=[];for(var k=0,l=d.length;k<l;k++){if(e){var m=ny("exclusionArea");m.appendChild(d[k])}else m=d[k];var n=mW(m);if(n){Ap(n);var p=new hq(n),r=d[k].getAttribute("id")||Vb(),u=d[k].getAttribute("title");r&&(p.ga(hV(b,r)),p.set("temp",!0),p.set("title",
u?u:"Area "+(k+1)),p.set("tags",c),p.set("_sourceName",c));qW[b].push(p);a.push(p);if(!h||!h.querySelector('queryEntry[areaId="'+r+'"]')){var v=d[k].querySelectorAll("layer");r=p.D();if(v&&v.length)for(var y=0,B=v.length;y<B;y++){var G={layerId:hV(b,v[y].textContent),areaId:r,filterId:"*",includeArea:!1,filterGroup:!0,temp:!0};f.push(G)}else G={layerId:"*",areaId:r,filterId:"*",includeArea:!1,filterGroup:!0,temp:!0},f.push(G)}}}RG(TG,a,!0);oE(lE,f)}}catch(D){E.error(sta,"There was an error loading a query area from state file "+
b,D)}else E.error(sta,"Unable to load state content!")};pW.prototype.remove=function(a){if(a in qW){for(var b=qW[a],c=0,d=b.length;c<d;c++){var e=b[c];e.get("temp")&&(nE(lE,null,e.D()),TG.remove(e))}delete qW[a]}};
pW.prototype.bd=function(a,b){try{for(var c=TG,d=fH(),e={},f=0,h=d.length;f<h;f++){var k=d[f],l=k.areaId;if(l&&"*"!==l&&!k.includeArea){var m=k.layerId;l in e||(e[l]={});"*"!==m&&(e[l][m]=!0)}}for(l in e){var n=c.get(l);if(n){var p=n.Z();if(p){p=p.clone().toLonLat();var r=oW(p,"KML");if(r){var u=Wx(r),v=Z("exclusionArea",b,void 0,{id:n.D(),title:n.get("title")});v.appendChild(kr(u));var y=e[l];if(y)for(m in y)Z("layer",v,m)}}}}this.Td(a,b)}catch(B){gV(this,B.message||"Unspecified error.")}};function rW(){kV.call(this)}w(rW,kV);var tta=E.V("os.state.v2.Filter"),sW={};
rW.prototype.load=function(a,b){a=jV(a);if(a instanceof Element)try{var c=jr(a),d=lE,e=a.parentNode,f=e?e.querySelector("queryEntries"):null;if(c&&0<c.length){a=0;for(var h=c.length;a<h;a++){var k=c[a];e=k;var l=b,m=String(e.getAttribute("urlKey")||e.getAttribute("type"));var n=hV(l,m);e=k;l=null;var p=jr(e);if(p&&0<p.length){l=new bC;var r=Xx(p[0]);r=r.replace(/xmlns=("|')[^"']*("|')/g,"");r=r.replace(/ogc:/g,"");r=r.replace(/>\s+</g,"><");l.rg(r);var u="AND"===e.getAttribute("match");l.Xh=u;l.ga(e.getAttribute("id"));
l.fb(e.getAttribute("description"));l.Ta(e.getAttribute("title"));l.type=e.getAttribute("type")||""}var v=l;var y="AND"==String(k.getAttribute("match"));v&&(v.ga(hV(b,v.D())),v.type=n,v.l=!0,v.Za(!0),rE(EE.s(),v),EE.s().th(n,y),f||eH(d,n,"*",v.D(),!0,y,!0),b in sW||(sW[b]=[]),sW[b].push(v))}}}catch(B){E.error(tta,"There was an error loading a filter for state file "+b)}else E.error(tta,"Unable to load state content!")};
rW.prototype.remove=function(a){var b=lE;if(a in sW){for(var c=sW[a],d=0,e=c.length;d<e;d++)nE(b,null,null,c[d].D()),vE(EE.s(),c[d]);delete sW[a]}};rW.prototype.bd=function(a,b){this.sources=SB(Fy);rW.C.bd.call(this,a,b)};function tW(a){var b=M.get(["deprecatedLayers"],{});return!!a&&a in b}function uW(a){a&&(vW||(vW=[]),-1===vW.indexOf(a)&&(vW.push(a),uta.start()))}
var vW=null,uta=new Fh(function(){var a=vW;if(a&&0<a.length){for(var b=M.get(["deprecatedLayers"],{}),c="<ul>",d=0,e=a.length;d<e;d++){var f=a[d];c+="<li>"+(b[f]?b[f].message:'The layer "'+f+'" is legacy and may soon cease to function or be removed.')+"</li>"}gD({prompt:"<b>Heads up!</b><p>The following legacy layers were just loaded into the application: </p>"+(c+"</ul>"),yesText:"Got It",noIcon:"",noText:"",windowOptions:{label:"Legacy Layers",headerClass:"bg-warning u-bg-warning-text",icon:"fa fa-exclamation-circle",
x:"center",y:"center",width:"500",height:"auto",modal:"true","no-scroll":"true"}});vW=null}},500);function wW(a){return window&&window.location?(window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),a=new Xg(a),(a.j?a:ih(window.location.origin,a)).toString()):a};function xW(){iV.call(this);this.description="Saves the current layers";this.j={type:"data"};this.g="layers";this.title="Layers"}w(xW,iV);var vta=E.V("os.state.v2.LayerState");xW.prototype.isValid=function(a){try{var b=a.Va();if(!b||!b.type||b.loadOnce)return!1;var c=b.type.toLowerCase();return"basemap"===c||"static"===c||"ref"===c?!1:!(Jw(b.url)||Jw(b.url2)||null!=b.originalUrl||null!=b.originalUrl2)}catch(d){}return!1};
xW.prototype.load=function(a,b){a=jV(a);if(a instanceof Element)try{var c=a.querySelectorAll("layer");if(c){a=[];for(var d=0,e=c.length;d<e;d++){var f=wta(this,c[d]);f&&a.push(f)}a.reverse();c=0;for(var h=a.length;c<h;c++){var k=a[c];k.id=hV(b,k.id);k.exportEnabled=!0;var l=Y.Ka(b.substring(0,b.length-1));l&&(k.provider=l.S());var m=k.layer;if(!m){var n=k.params;if(n){var p=n.get("typename");q(p)?m=p[0]:m=p;if("string"===typeof m){var r=m.indexOf(":");-1<r&&(m=m.substring(r+1))}}}var u=k.style,v=
k.styles;if(null!=u&&null!=v){f=!1;for(var y=0,B=v.length;y<B;y++){if(v[y].data===u){f=!0;break}if(v[y].label===u){f=!0;k.style=v[y].data;break}}f||(k.style="")}m&&tW(m)&&uW(k.title)}d=0;for(e=a.length;d<e;d++){var G=new fM(a[d]);G.Fa();G.dispose()}}}catch(D){E.error(vta,"Error loading layer in state "+b,D)}else E.error(vta,"Unable to load state content!")};xW.prototype.remove=function(a){for(var b=Dg(L.s()),c=b.length;c--;){var d=b[c];if(d)try{var e=d.D();e&&Eb(e,a)&&L.s().removeLayer(d)}catch(f){}}};
xW.prototype.bd=function(a,b){try{for(var c=Dg(L.s()),d=0,e=c.length;d<e;d++){var f=c[d];if(this.isValid(f)){var h=xta(this,f,a,{title:f.S()});h&&b.appendChild(h)}}this.Td(a,b)}catch(k){gV(this,k.message||"Unspecified error.")}};
function xta(a,b,c,d){var e=["locked","featureType","type"];if(!b.Va())return null;var f=vc(b.Va());null!=d&&yc(f,d);b.ra(f);b=f.url;"string"!==typeof b||Jw(b)||(b=f.url=decodeURIComponent(wW(b)));(d=f.urls)&&0<d.length&&!b&&(f.url=d[0]);d="string"===typeof f.type?f.type.toLowerCase():"";for(var h=0,k=e.length;h<k;h++)null!=f[e[h]]&&delete f[e[h]];e=ny("layer",c.te);c="wms"!=d?ny("basicFeatureStyle",c.te):null;for(var l in f)if(h=f[l],null!=h)switch(l){case "params":var m=Z("params",e),n="string"===
typeof h?new ch(h):h,p=n.Xb();h=0;for(k=p.length;h<k;h++){var r=p[h],u=String(n.get(r));"wms"==d?r=r.toUpperCase():"wfs"==d&&(r=r.toLowerCase());Z(r,m,u)}break;case "provider":Z("dataProvider",e,h);break;case "baseType":Z("provider",e,h);yW(a,l,h,e);break;case "color":c?(h=ef(h).slice(1),Z("pointColor",c,h)):yW(a,l,h,e);break;case "contrast":"number"!==typeof h||isNaN(h)||Z("contrast",e,Math.round(100*(h-1)));break;case "alpha":case "opacity":c?(h=null!=h?Number(h):1,Z("pointOpacity",c,Math.round(255*
h))):(h=null!=h?Number(h):1,Z("alpha",e,h));break;case "size":c&&(h=null!=h?Math.floor(h):3,Z("pointSize",c,2*h));break;case "styles":m=Z("styles",e);n=h;p=f.legends;h=0;for(k=n.length;h<k;h++)n[h].data&&(r=Z("style",m),Z("name",r,n[h].data),Z("title",r,n[h].label),p&&p.length==n.length&&Z("legend",r,p[h]||""));break;case "labels":if(c&&0<h.length&&!Hb(Tb(h[0].column))){Z("labelColumn",c,h[0].column);var v=Z("labelColumns",c);$a(h,function(a){Z("label",v,void 0,{column:a.column,showColumn:a.showColumn})})}break;
case "labelColor":c&&"string"===typeof h&&!Hb(Tb(h))&&(h=ef(h).replace(/^#/,""),Z("labelColor",c,h));break;case "labelSize":c&&"number"===typeof h&&Z("labelSize",c,h);break;case "showLabels":Z("showLabels",e,h);break;case "mappings":if((k=f.mappings)&&0<k.length){h=Z("mappings",e);k=ly(iy.s(),k);for(var y in k)m=JSON.stringify(k[y]),Z("mapping."+y,h,m)}break;case "refreshInterval":Z("refreshRate",e,h);break;default:yW(a,l,h,e)}c&&0<c.childElementCount&&e.appendChild(c);"wms"==d&&b&&Z("getMapUrl",
e,b);Yx(e,{type:d});return e}
function yW(a,b,c,d){if("string"===typeof c||"number"===typeof c||"boolean"===typeof c){if("string"===typeof c&&-1<b.search(/color/i)&&"colorize"!=b&&df(c))try{c=ef(c).replace(/^#/,"0x")}catch(h){c="0xffffff"}else"string"===typeof c&&Eb(c,"url")&&(c=wW(c));Z(b,d,c)}else if(q(c)){var e=Fb(b,"s")?b.substring(0,b.length-1):b;b=Z(b,d);d=0;for(var f=c.length;d<f;d++)yW(a,e,c[d],b)}else if(ZU(RU,b))try{f=c.ra(),Z(b,d,JSON.stringify(f))}catch(h){}else if(Ba(c)&&!Ca(c))for(e in b=Z(b,d),c)yW(a,e,c[e],b)}
function zW(a,b,c){var d=null,e=ZU(RU,b),f=c.textContent,h=jr(c);if(e)a=JSON.parse(f),e.restore(a),d=e;else if(-1<b.search(/color/i)&&"colorize"!=b&&0==h.length&&df(f))d=cf(f,"0x");else if(h&&0<h.length)if(c.localName==h[0].localName+"s"||1<h.length&&h[1].localName==h[0].localName)for(d=[],e=0,b=h.length;e<b;e++)d.push(zW(a,h[e].localName,h[e]));else for(d={},e=0,b=h.length;e<b;e++)c=h[e],d[c.localName]=zW(a,c.localName,c);else Aq.test(f)?d=parseFloat(f):zq.test(f)?d=parseInt(f,16):yq.test(f)?d="true"==
f.toLowerCase():d=f;return d}
function wta(a,b){if(b){var c=jr(b);if(c){for(var d=String(b.getAttribute("type")),e=Wf(Uf.s(),d),f=0,h=c.length;f<h;f++){var k=c[f],l=k.localName;if(Qb(l,"FileSource"))return null;switch(l){case "basicFeatureStyle":var m=jr(k);k=0;for(l=m.length;k<l;k++){var n=m[k].textContent;switch(m[k].localName){case "pointColor":try{n=cf(n,"#"),e.color=hz(n)}catch(v){e.color="rgba(255,255,255,1)"}break;case "pointOpacity":e.opacity=Ib(n)?Number(n)/255:1;break;case "pointSize":e.size=Ib(n)?Number(n)/2:3;break;
case "labelColumn":n="string"===typeof n?Jb(n):"";void 0==e.labels&&(e.labels=[Cz()],e.labels[0].column=n,e.labels[0].showColumn=!1);var p=a.N(b);p&&-1<p.indexOf("MIST3D")&&(e.showLabels=!Hb(Tb(n)));break;case "labelColumns":var r=[];n=jr(m[k]);$a(n,function(a){r.push({column:a.getAttribute("column"),showColumn:"true"==a.getAttribute("showColumn")?!0:!1})});e.labels=r;break;case "labelColor":try{n=cf(n,"#"),e.labelColor=hz(n)}catch(v){e.labelColor=""}break;case "labelSize":n=Ib(n)?Number(n):0,e.labelSize=
0<n?me(n,8,24):14}}break;case "contrast":k=Number(k.textContent);l=k/100+1;e.contrast=isNaN(k)?1:me(l,0,2);break;case "dataProvider":e.provider=k.textContent;break;case "getMapUrl":e.url=k.textContent.replace(/[?]+$/,"");break;case "params":m=e.params||new ch;n=jr(k);k=0;for(l=n.length;k<l;k++)m.set(n[k].localName,n[k].textContent);e.params=m;break;case "styles":m=[{data:"",label:"Default"}];if(n=jr(k)){k=0;for(l=n.length;k<l;k++){p=n[k].querySelector("name");var u=n[k].querySelector("title");m.push({data:p&&
p.textContent||"",label:u&&u.textContent||""})}e.styles=m}break;case "tags":e.tags=OP(k);break;case "title":e.title=k.textContent.replace(/\s*(Tiles|Features)\s*$/,"");break;case "showLabels":e.showLabels="true"==k.textContent;break;case "mappings":m={};n=jr(k);k=0;for(l=n.length;k<l;k++)p=n[k],m[p.localName]=JSON.parse(p.textContent);e.mappings=my(iy.s(),m);break;case "refreshRate":e.refreshInterval=zW(a,l,k);break;default:e[l]=zW(a,l,k)}}e.type=d.toUpperCase();"typeOverride"in e&&(a=e.typeOverride,
Xf(Uf.s(),a)&&(e.type=a,delete e.typeOverride));return e}}return null};function AW(){iV.call(this);this.description="Saves the current query areas";this.priority=80;this.g="queryAreas";this.title="Query Areas"}w(AW,iV);var yta=E.V("os.state.v2.QueryArea"),BW={};
AW.prototype.load=function(a,b,c){a=jV(a);if(a instanceof Element)try{var d=a.querySelectorAll("queryArea");if(d){BW[b]=[];var e=[],f=[],h=a.parentNode,k=h?h.querySelector("queryEntries"):null;a=0;for(var l=d.length;a<l;a++){var m=mW(d[a]);if(m){Ap(m);var n=new hq(m),p=d[a].getAttribute("id")||Vb(),r=d[a].getAttribute("title");p&&(n.ga(hV(b,p)),n.set("temp",!0),n.set("title",r?r:"Area "+(a+1)),n.set("tags",c),n.set("_sourceName",c));BW[b].push(n);e.push(n);if(!k||!k.querySelector('queryEntry[areaId="'+
p+'"]')){var u=d[a].querySelectorAll("layer");p=n.D();if(u&&u.length){h=0;for(var v=u.length;h<v;h++){var y={layerId:hV(b,u[h].textContent),areaId:p,filterId:"*",includeArea:!0,filterGroup:!0,temp:!0};f.push(y)}}else y={layerId:"*",areaId:p,filterId:"*",includeArea:!0,filterGroup:!0,temp:!0},f.push(y)}}}RG(TG,e,!0);oE(lE,f)}}catch(B){E.error(yta,"There was an error loading a query area from state file "+b,B)}else E.error(yta,"Unable to load state content!")};
AW.prototype.remove=function(a){var b=lE,c=TG;if(a in BW){for(var d=BW[a],e=[],f=0,h=d.length;f<h;f++){for(var k=d[f],l=b.getEntries(null,k.D()),m=0,n=l.length;m<n;m++)l[m].temp&&e.push(l[m]);k.get("temp")&&c.remove(k)}e.length&&VG(b,e);delete BW[a]}};
AW.prototype.bd=function(a,b){try{for(var c=TG,d=fH(),e={},f=0,h=d.length;f<h;f++){var k=d[f],l=k.areaId;if(l&&"*"!==l&&k.includeArea){var m=k.layerId;l in e||(e[l]={});"*"!==m&&(e[l][m]=!0)}}for(l in e){var n=c.get(l);if(n){var p=n.Z();if(p){p=p.clone().toLonLat();var r=oW(p,"KML");if(r){var u=Wx(r),v=Z("queryArea",b,void 0,{id:n.D(),title:n.get("title")});v.appendChild(kr(u));var y=e[l];if(y)for(m in y)Z("layer",v,m)}}}}this.Td(a,b)}catch(B){gV(this,B.message||"Unspecified error.")}};function CW(){iV.call(this);this.description="Saves the query combinations";this.priority=90;this.g="queryEntries";this.title="Query Entries"}w(CW,iV);var zta=E.V("os.state.v2.QueryEntries"),DW={};
CW.prototype.load=function(a,b){a=jV(a);if(a instanceof Element)try{var c=jr(a);a=lE;if(c){for(var d=[],e=0,f=c.length;e<f;e++){var h=c[e],k=h.getAttribute("layerId"),l=h.getAttribute("areaId"),m=h.getAttribute("filterId")||"*",n=h.getAttribute("negate");if(!n||"true"!==n){var p=h.getAttribute("includeArea");p=p?"true"===p.toLowerCase():!0;var r=/(and|true)/i,u=h.getAttribute("filterGroup");u=u?r.test(u):!0;k&&l&&m&&void 0!==p&&void 0!==u&&d.push({layerId:"*"!==k?hV(b,k):k,areaId:"*"!==l?hV(b,l):
l,filterId:"*"!==m?hV(b,m):m,includeArea:p,filterGroup:u,temp:!0})}}d.length&&(oE(a,d),DW[b]=d)}}catch(v){E.error(zta,"There was an error loading a query entry in "+b,v)}else E.error(zta,"Unable to load state content!")};CW.prototype.remove=function(a){var b=DW[a];b&&(VG(lE,b),delete DW[a])};
CW.prototype.bd=function(a,b){try{var c=fH(!0);if(c)for(var d=0,e=c.length;d<e;d++){var f=vc(c[d]);if("*"!=f.layerId){if(f.hasOwnProperty("negate")){if("true"===f.negate||!0===f.negate)continue;delete f.negate}"*"==f.filterId&&delete f.filterId;Z("queryEntry",b,void 0,f)}}this.Td(a,b)}catch(h){gV(this,h.message||"Unspecified error.")}};function Ata(a){var b=0;if(a)for(var c=a.length,d,e=1,f=1,h=!1;e<c&&f<c;)if(d=a.charAt(f).toUpperCase(),Ib(d))f++;else{if("T"==d)h=!0;else if(e=parseInt(a.substring(e,f),10),!isNaN(e))switch(d){case "Y":b+=31536E6*e;break;case "M":b+=h?6E4*e:2592E6*e;break;case "D":b+=864E5*e;break;case "H":b+=36E5*e;break;case "S":b+=1E3*e}f++;e=f}return b}
function Bta(a){var b="P",c=Math.floor(a/864E5);0<c&&(b+=c+"D",a-=864E5*c);for(var d=!1,e=[{c:"H",x:36E5},{c:"M",x:6E4},{c:"S",x:1E3}],f=0,h=e.length;f<h;f++)c=Math.floor(a/e[f].x),0<c&&(d||(b+="T",d=!0),b+=c+e[f].c,a-=c*e[f].x);return b};function Cta(a,b){b=void 0!==b?b:!1;var c=0;if(a&&0<a.length){for(var d={},e=0,f=a.length;e<f;e++){var h=a[e].g,k;for(k in h){var l="number"===typeof h[k]?h[k]:h[k].length;k in d?b?d[k]+=l:h[k]>d[k]&&(d[k]=l):d[k]=l}}for(k in d)l=q(d[k])?d[k].length:d[k],l>c&&(c=l)}return c};function EW(a){this.ya=a}w(EW,x);EW.prototype.J=function(){this.clear();this.ya=null;EW.C.J.call(this)};EW.prototype.clear=function(){this.ya&&d3.select(this.ya).selectAll("path, circle, g").remove()};
EW.prototype.g=function(a,b,c){this.clear();if(this.ya&&0<a.length){var d=d3.select(this.ya);c.domain([0,Cta(a)]);var e=0,f=a[0].l;f&&0<f.interval&&(e=Math.round((b(f.interval)-b(0))/2));var h=d3.svg.line().interpolate("linear").x(function(a){return b(a.key)+e}).y(function(a){return c(a.value)});a=d.selectAll("g").data(a).enter().append("g").attr("class","c-histogram-line");a.append("path").attr("stroke",function(a){return a.Ja()}).attr("d",function(a){var b=[],c;for(c in a.g)b.push({key:c,value:a.g[c]});
return h(b)});a.each(function(a){var d=[],f;for(f in a.g){var h=a.g[f];0<h&&d.push({key:f,value:h})}d3.select(this).selectAll("circle").data(d).enter().append("circle").attr("class","c-histogram-group__line-point").attr("cx",function(a){return b(a.key)+e}).attr("cy",function(a){return c(a.value)}).attr("r",3).attr("style",function(b){var c="fill:"+a.Ja()+";";0==b.value&&(c+="display:none;");return c})})}};
EW.prototype.tooltip=function(a){d3.select(this.ya).selectAll("circle").on("mouseover",function(b){var c=d3.select(this.parentElement).data();c&&0<c.length&&a.show(c[0],b)}).on("mouseout",a.hide)};function FW(a){this.ya=a}w(FW,x);FW.prototype.J=function(){this.clear();this.ya=null;FW.C.J.call(this)};FW.prototype.clear=function(){if(this.ya){var a=d3.select(this.ya);a.selectAll(".bar").remove();a.selectAll("g").remove()}};
FW.prototype.g=function(a,b,c){this.clear();if(this.ya&&0<a.length){var d=d3.select(this.ya);c.domain([0,Cta(a,!0)]);for(var e={},f=0,h=a.length;f<h;f++){var k=a[f],l=[],m;for(m in k.g){var n=k.g[m];0<n&&l.push({key:m,value:n})}n=10;var p=k.l;p&&0<p.interval&&(n=b(p.interval)-b(0));p=d.append("g");p.data([k]);p.selectAll(".bar").data(l).enter().append("rect").attr("class","bar").attr("x",function(a){return b(a.key)}).attr("y",function(a){var b=c(a.value),d=a.key;d in e&&(b=e[d]-(c(0)-c(a.value)));
return e[d]=b}).attr("height",function(a){return c(0)-c(a.value)}).attr("style",function(){return"fill: "+k.Ja()}).attr("width",n)}}};FW.prototype.tooltip=function(a){d3.select(this.ya).selectAll("rect").on("mouseover",function(b){var c=d3.select(this.parentElement).data();c&&0<c.length&&a.show(c[0],b)}).on("mouseout",a.hide)};var GW={line:EW,stackedBar:FW};function HW(){C.call(this);this.ma="";this.oo=this.Id=null;this.init=!1;this.K=null;this.Ev=!0}w(HW,C);g=HW.prototype;g.D=function(){return this.ma};g.ga=function(a){this.ma=a};g.Ve=function(){return this.K};g.Qi=function(){return null};g.Yg=function(){};function Dta(a,b){A.call(this,a);this.left=b}w(Dta,A);function IW(){HW.call(this);this.g=d3.svg.brush();this.U=null;this.sg=JW;this.Vb=new CI(this.dM,40,this);this.ga("window");this.P=this.dragPan=this.aa=this.Ia=!1;this.l=NaN;this.G=!1;this.Ca=this.B=NaN;this.Eb=null;this.ib=!0;this.ka=this.cb=!1;this.I=Xa;this.init=this.sa=!1;this.node=null;this.kp=!1;this.u="brush"}w(IW,HW);var KW=!1,JW="brush";g=IW.prototype;g.hE=function(){return this.sg};function LW(a){a.sg="brushend"}g.Tu=function(){return this.u};g.Y=function(){return MW(this.g.extent()||this.U)};
g.Cc=function(a,b,c){c=void 0!==c?c:!1;var d=this.Y();a&&a[0]==a[1]&&(a[1]=a[0]+1);d===a||d&&a&&ne(d[0],a[0])&&ne(d[1],a[1])||(c&&(a=NW(this,a)),(this.U=a)?this.g.extent(a):this.g.clear(),this.render(),b||this.wo(),this.oa=d)};g.Ud=function(a,b){this.Cc([a.start,a.end],b,void 0)};function Eta(a,b,c){var d=a.Y();if(d&&2==d.length){var e=d[1]-d[0];b=b<d[0]?b:b-e;a.Cc([b,b+e],c)}}
g.dm=function(a){!isNaN(this.l)&&this.P?a<this.l?this.Cc(NW(this,[a,this.l]),this.G):a>=this.l&&this.Cc(NW(this,[this.l,a]),this.G):Eta(this,a,this.G)};
g.Yg=function(a,b){this.Id&&(this.g.x(this.Id).on(this.sg,this.wo.bind(this)),this.U&&this.g.extent(this.U),this.g.on(JW+".always",this.rH.bind(this)),this.g.on("brushstart.stoppan",this.Uq.bind(this)),this.g.on("brushend.cleanup",this.tH.bind(this)));this.ib||this.g.clamp(!1);this.node=a=a.append("g");a.attr("class",this.u+" brush-"+this.D()).on("mouseenter",this.nJ.bind(this)).on("mouseleave",this.oJ.bind(this)).on("mousedown",this.eM.bind(this));a.selectAll("rect").attr("height",b+"px");a.append("text").attr("class",
"label left").style("display","none").attr("y",13);a.append("text").attr("class","label right").style("display","none").attr("y",13);var c=d3.select("svg");if(!c.select("#right-gradient")[0][0]){var d=c.append("svg:defs").append("svg:linearGradient").attr("id","right-gradient").attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%").attr("spreadMethod","pad");d.append("svg:stop").attr("offset","0%").attr("stop-color","#24e").attr("stop-opacity",1);d.append("svg:stop").attr("offset","100%").attr("stop-color",
"#24e").attr("stop-opacity",0);c=c.append("svg:defs").append("svg:linearGradient").attr("id","left-gradient").attr("x1","100%").attr("y1","0%").attr("x2","0%").attr("y2","0%").attr("spreadMethod","pad");c.append("svg:stop").attr("offset","0%").attr("stop-color","#24e").attr("stop-opacity",1);c.append("svg:stop").attr("offset","100%").attr("stop-color","#24e").attr("stop-opacity",0)}a.append("rect").style("display","none").style("pointer-events","none").attr("class","fade-right").attr("fill","url(#right-gradient)");
a.append("rect").style("display","none").style("pointer-events","none").attr("class","fade-left").attr("fill","url(#left-gradient)");this.ka&&Fta(this,a);(c=this.Ve())&&a.append("title").text(c);this.init=!0;this.render(b);this.I()&&(a.selectAll(".resize").append("polygon").attr("points","0,0 0,-10 10,-10 10,-4"),a.select(".resize.w > polygon").attr("transform","scale(-1, 1)"));this.sa&&(vg.s().H("timeline.lockToggle",Ga(this.Mk,!0),!1,this),b=a.append("g"),b.attr("class","lock"),b.append("title").text("Locks start edge of view window during animation"),
b.append("text").attr("class","button fa c-glyph js-svg-timeline_lock d-none").attr("aria-label","Locks start edge of view window during animation").attr("role","img").attr("y","-1").attr("font-family","FontAwesome").style("font-size","0.7rem").on("mouseup",this.Mk.bind(this)).on("mouseover",this.Tq.bind(this)).on("mouseout",this.Sq.bind(this)).text(function(){return"\uf023"}),b.append("text").attr("class","button fa c-glyph js-svg-timeline_unlock").attr("aria-label","Locks start edge of view window during animation").attr("role",
"img").attr("y","-1").attr("font-family","FontAwesome").style("font-size","0.7rem").on("mouseup",this.Mk.bind(this)).on("mouseover",this.Tq.bind(this)).on("mouseout",this.Sq.bind(this)).text(function(){return"\uf09c"}),this.Mk(!0))};g.render=function(a){if(this.init)try{this.g.extent(this.Y());var b=d3.select(".brush-"+this.D());b.call(this.g);void 0!==a&&b.selectAll("rect").attr("height",a+"px");this.rh()}catch(c){}};function NW(a,b){return a.oo&&b?b.map(a.oo):b}g.wo=function(a){a||this.Vb.Pd()};
g.dM=function(){var a=NW(this,this.Y());yb(a,this.A)||(this.dispatchEvent(new K("extent",a,this.A)),this.A=a)};g.Uq=function(){d3.event.sourceEvent.stopPropagation();vg.s().stop()};g.nJ=function(){this.Ia=!0;this.rh()};g.oJ=function(){this.Ia=!1;this.rh()};
g.eM=function(){if(this.cb)this.render();else{this.aa=!0;var a=angular.element(d3.event.target).parent().attr("class");-1<a.indexOf("resize")&&(this.l=this.Y()["resize e"==a?0:1]);Yd(window,"mouseup",this.px,!1,this);Yd(window,"mousemove",this.Ow,!1,this);Gta(this,new Md(d3.event));this.rh();this.A=this.Y()}};g.px=function(){this.aa=!1;Hta(this);this.P=!1;de(window,"mouseup",this.px,!1,this);de(window,"mousemove",this.Ow,!1,this);this.rh()};
g.rH=function(){if(d3.event)if((this.P="resize"==d3.event.mode)&&!isNaN(this.l)){var a=d3.mouse(d3.select(".x-axis").node());this.dm(this.Id.invert(a[0]).getTime())}else this.Cc(NW(this,this.Y()),!0);this.rh()};g.tH=function(){this.P=!1;this.l=NaN};g.Ow=function(a){this.aa&&(KW=!0,Gta(this,a))};
function Gta(a,b){var c=a.Id.range(),d=b.clientX-Math.max(angular.element(".c-svg-timeline").offset().left,0);b=d<c[0]+20;c=d>c[1]-20;b||c?a.dragPan||(a.dispatchEvent(new Dta("dragpanstart",b)),a.dragPan=!0):a.dragPan&&Hta(a)}function Hta(a){a.dispatchEvent("dragpanstop");KW=a.dragPan=!1}
g.rh=function(){var a=d3.select(".brush-"+this.D()),b=this.Y(),c=(new qg(b[0],b[1])).toISOString().split(" to ");b=a.select(".extent").node().getBBox();var d=a.selectAll(".fade-left"),e=a.selectAll(".fade-right");this.Ia||this.aa?(a.select("text.left").text(c[0]).attr("x",b.x-5),a.select("text.right").text(c[1]).attr("x",b.x+b.width+5),a.selectAll("text").style("display","block")):a.selectAll("text").style("display","none");if("window"==this.D()&&vg.s().O){a=null;if(!isNaN(this.B)){if(0!=this.B&&
100<Math.abs(b.x/this.B))return;if(5>Math.abs(this.B-b.x)&&5>Math.abs(this.Ca-b.x-b.width))a=this.Eb;else if(b.x>this.B+5||b.x+b.width>this.Ca+5)a=!0;else if(b.x+b.width<this.Ca-5||this.B-5>b.x)a=!1}null==a?(d.style("display","none"),e.style("display","none")):a?(e.style("display","none"),d.style("display","block"),d.style("pointer-events","none"),d.attr("x",b.x-b.width),d.attr("width",b.width)):(d.style("display","none"),e.style("display","block"),e.style("pointer-events","none"),e.attr("x",b.x+
b.width),e.attr("width",b.width));this.B=b.x;this.Ca=b.x+b.width;this.Eb=a}else d.style("display","none"),e.style("display","none");a=d3.select(".brush-"+this.D());b=a.node().getBBox();b=b.width/2-4+b.x;a.selectAll(".buttons > .button").style("display","block").style("pointer-events","auto").attr("x",b);this.sa&&(a=d3.select(".brush-"+this.D()),b=a.select(".extent").node().getBBox().x-25,a.selectAll(".lock > .button").style("display","block").style("pointer-events","auto").attr("x",b))};
g.clear=function(){this.U=null;var a="."+this.u+" .brush-"+this.D();d3.select(a).call(this.g.clear())};g.Mk=function(a){KW||(a?a=vg.s().B:(a=vg.s(),a.B=!a.B,a=a.B),a?(angular.element(".js-svg-timeline_unlock").addClass("d-none"),angular.element(".js-svg-timeline_lock").removeClass("d-none")):(angular.element(".js-svg-timeline_lock").addClass("d-none"),angular.element(".js-svg-timeline_unlock").removeClass("d-none")),O(P.s(),"timeline.features.settings-lock",1))};g.sH=function(){KW||OW(this)};
g.Tq=function(){this.cb=!0};g.Sq=function(){this.cb=!1};function Fta(a,b){b=b.append("g");var c="Delete "+a.Ve().toLowerCase();b.attr("class","buttons");b.append("title").text(c);b.append("text").attr("class","button fa c-glyph").attr("aria-label",c).attr("role","img").attr("y","-1").on("mouseup",a.sH.bind(a)).on("mouseover",a.Tq.bind(a)).on("mouseout",a.Sq.bind(a)).text("\uf00d")}
function PW(a){var b=a.Y();return b&&b[0]!==b[1]?new bJ(b[0],b[1]):a.oa&&a.oa[0]!==a.oa[1]?new bJ(a.oa[0],a.oa[1]):null}function OW(a,b){a.node&&(a.kp=!0,a.g.on(JW+".always",null),a.g.on("brushstart.stoppan",null),a.g.on("brushend.cleanup",null),a.node&&(a.node.on("mouseenter",null).on("mouseleave",null).on("mousedown",null),a.node.remove()),a.sa&&vg.s().M("timeline.lockToggle",Ga(a.Mk,!0),!1,a),a.init=!1,b||a.dispatchEvent(new A("deleted",a)),a.dispose())};function QW(){IW.call(this);this.ga("select");LW(this);this.j=this.jb=null;this.pb=this.gM.bind(this);this.O=null;this.o=!1}w(QW,IW);g=QW.prototype;g.Yg=function(a,b){d3.select(".c-svg-timeline").on("mousedown."+this.D(),this.XH.bind(this),!0);QW.C.Yg.call(this,a,b)};
g.XH=function(){var a=d3.event;if(a.shiftKey&&!this.o){this.o=!0;this.dispatchEvent("dragstart");try{var b=new MouseEvent(a.type,a)}catch(c){b=document.createEvent("MouseEvents"),b.initMouseEvent(a.type,!0,!0,a.view,a.detail,a.screenX,a.screenY,a.clientX,a.clientY,a.ctrlKey,a.altKey,a.shiftKey,a.metaKey,a.button,a.relatedTarget)}d3.select(".brush-"+this.D()).select(".background").node().dispatchEvent(b);window.addEventListener("mousemove",this.pb,!0);d3.event.preventDefault();d3.event.stopPropagation();
return this.o=!1}};g.Uq=function(){QW.C.Uq.call(this);this.P=!0;this.l=this.Id.invert(d3.mouse(d3.select(".x-axis").node())[0]).getTime()};g.gM=function(a){this.O=[a.pageX,a.pageY]};
g.wo=function(a){QW.C.wo.call(this,a);if(d3.event&&"brushend"==d3.event.type)if(a=this.Y(),this.j&&this.jb&&a&&!this.o){this.o=!0;window.removeEventListener("mousemove",this.pb,!0);var b=this.Id;b=this.O?this.O[0]:b(a[1]);var c=this.O?this.O[1]:75;this.j&&this.j.open(a,{my:"left top",at:"left+"+b+" top+"+c,of:".c-svg-timeline"});N.H(rx,this.lJ,!1,this);this.O=null;this.o=!1;d3.select(".brush-"+this.D()).select(".background").style("display","none")}else this.dispatchEvent("change")};
g.lJ=function(){this.o=!0;this.Cc(null);this.dispatchEvent("exit");this.o=!1};g.rh=function(){this.aa?QW.C.rh.call(this):d3.select(".brush-"+this.D()).selectAll("text").style("display","none")};function RW(){HW.call(this);this.g=d3.svg.axis();this.Ev=!1}w(RW,HW);function Ita(a){var b=MW(a.Id.domain());b=[new Date(b[0]),new Date(b[1])];a=a.Id;a=1/(a(1)-a(0));a=20*Number(a.toPrecision(2));for(var c=vg.s().K,d=KF(b[0],c),e=null,f=[],h=0;null===e||e<=b[1];h++){var k=MF(d,c,h);if(null!==e&&k.getTime()-e<a)break;e=k.getTime();e>=b[0]&&f.push(k)}return f}
RW.prototype.Yg=function(a,b){this.Id&&this.g.orient("top").scale(this.Id).tickSize(-b,-b).tickFormat(d3.format("")).tickValues(Ita(this));a.append("g").attr("class","axis c-svg-timeline__tile-axis").call(this.g)};RW.prototype.render=function(a){void 0!==a&&this.g.tickSize(-a,-a);this.g.tickValues(Ita(this));d3.select(".c-svg-timeline__tile-axis").call(this.g)};RW.prototype.Y=function(){return MW(this.Id.domain())};function SW(a,b){C.call(this);this.L=a;a=mr(this.L)?this.L:this.L?this.L.body:null;this.o=!!a&&"rtl"==fU(a,"direction");this.g=Yd(this.L,qd?"DOMMouseScroll":"mousewheel",this,b)}w(SW,C);
SW.prototype.handleEvent=function(a){var b=0,c=0,d=a.l;"mousewheel"==d.type?(a=TW(-d.wheelDelta),sa(d.wheelDeltaX)?(b=TW(-d.wheelDeltaX),c=TW(-d.wheelDeltaY)):c=a):(a=d.detail,100<a?a=3:-100>a&&(a=-3),sa(d.axis)&&d.axis===d.HORIZONTAL_AXIS?b=a:c=a);ua(this.j)&&(b=me(b,-this.j,this.j));ua(this.l)&&(c=me(c,-this.l,this.l));this.o&&(b=-b);b=new Jta(a,d,b,c);this.dispatchEvent(b)};function TW(a){return rd&&(sd||ud)&&0!=a%40?a:a/40}SW.prototype.J=function(){SW.C.J.call(this);ee(this.g);this.g=null};
function Jta(a,b,c,d){Md.call(this,b);this.type="mousewheel";this.detail=a;this.deltaX=c;this.deltaY=d}w(Jta,Md);function UW(){HW.call(this);this.g=[];this.j=this.fM.bind(this);this.ga("offarrows")}w(UW,HW);g=UW.prototype;g.setItems=function(a){this.g=a};g.setStart=function(a){this.o=a};g.Yg=function(a,b){b=-VW;a.append("g").attr("transform","translate(0, "+b+")").attr("class","off-left");a.append("g").attr("class","off-right");this.init=!0};
g.render=function(){var a=-VW;if(this.init){var b=d3.select(".off-left"),c=this.g.filter(this.LD,this);c.sort(Kta);var d=d3.select(".off-right"),e=this.g.filter(this.ND,this);e.sort(Lta);d3.selectAll(".offarrow").remove();Mta(this,b,c);Mta(this,d,e);b=this.Id;d.attr("transform","translate("+(b(this.Id.domain()[1])-10*e.length)+", "+a+") scale(-1,1) translate("+10*-e.length+",0)")}};
function Mta(a,b,c){for(var d=0,e=c.length;d<e;d++){var f=c[d],h=b.append("g").attr("class","offarrow");h.append("title").html(Nta(f));h.append("polygon").attr("class","arrow-"+f.D()).attr("transform","translate("+11*d+", 0)").attr("points","0,5 10,0 10,10").style("cursor","pointer").on("click",a.j)}}g.fM=function(){var a=d3.select(d3.event.target).attr("class");if(a){var b=a.indexOf("-");-1<b&&(a=a.substring(b+1));this.dispatchEvent(new K("zoom",a))}};
g.LD=function(a){return(a=a.Y())&&2==a.length&&a[0]!==a[1]?a[0]<this.o:!1};g.ND=function(a){return(a=a.Y())&&2==a.length&&a[0]!==a[1]?a[1]>this.l:!1};function Nta(a){var b=a.Ve();return b="Jump to "+(b?b.toLowerCase():"the "+a.D())}function Kta(a,b){return xb(a.Y()[0],b.Y()[0])}function Lta(a,b){return-1*xb(a.Y()[1],b.Y()[1])};function WW(a){this.l=a;A.call(this,XW)}w(WW,A);var XW="timeline.Scale";Q.directive("timeline",[function(){return{template:'<div class="c-timeline js-timeline"></div>',restrict:"AE",replace:!0,scope:{histClass:"=",histData:"=",histTip:"=",startEnd:"=",items:"=",animationBrushes:"=",holdBrushes:"=",loadBrushes:"=",sliceBrushes:"=",snap:"@"},controllerAs:"timeline",controller:YW}}]);var ZW=[1,5,10,25,50,100,500,1E3,5E3,15E3,3E4,6E4,3E5,9E5,18E5,36E5,108E5,216E5,432E5,864E5,1728E5,6048E5,12096E5,2592E6,7776E6,15552E6,31536E6];
function MW(a){if(a)for(var b=0,c=a.length;b<c;b++)a[b]="number"===typeof a[b]?a[b]:a[b].getTime();return a}var $W=null;function Ota(a){a=UF?new Date(a.getTime()+UF):a;return $W(a)}var Pta=[[".%L",function(a){return a.getUTCMilliseconds()}],[":%S",function(a){return a.getUTCSeconds()}],["%H:%M",function(a){return a.getUTCMinutes()}],["%H:00",function(a){return a.getUTCHours()}],["%b %d",function(a){return 1!=a.getUTCDate()}],["%B",function(a){return a.getUTCMonth()}],["%Y",function(){return!0}]];
function YW(a,b,c){this.v=a;this.L=b;this.Na=c;this.oa=this.U=this.K=this.j=this.pa=this.u=null;this.Eb=!1;this.o=this.O=null;this.Ia=a.histClass||null;this.cb=a.histData||null;a.items=a.items||[new IW];this.g=a.items;this.A=KF(new Date,"day").getTime();this.B=this.A+864E5;this.ka=0;this.pb=-1;this.ib=null;a.snap&&"true"==a.snap.toLowerCase()&&(this.ib=this.JN.bind(this));this.P=this.I=null;this.Ca=new bw;this.Ca.H("resize",this.jM,!1,this);this.G=new UW;this.G.H("propertychange",this.jH,!1,this);
this.Ea=new je(50);this.Ea.H("tick",this.WH,!1,this);this.jb=!0;this.Vb=this.aa=null;this.sa=new CI(this.OD,40,this);$W||($W=d3.time.format.utc.multi(Pta));a.$on("$destroy",this.hM.bind(this));M.H("time.offset",this.qx,!1,this);if(a=this.v.startEnd)this.A=a.Sa(),this.B=a.Ya();this.A&&this.B||(a=YF(new Date),this.start=KF(a,"day").getTime(),this.B=MF(a,"day",1).getTime(),a=vg.s(),VJ(a,"day"),a.Ud($J(this.A,this.B)));this.v.$watch("startEnd",t(this.eK,this));this.Na(this.iM.bind(this));O(P.s(),"timeline.features.open",
1)}YW.$inject=["$scope","$element","$timeout"];var Qta=E.V("os.ui.timeline.TimelineCtrl"),VW=10;g=YW.prototype;g.iM=function(){this.v.$watch("histClass",t(this.GI,this));this.v.$watch("histData",t(this.HI,this));this.v.$watch("sliceBrushes",t(this.dO,this));this.v.$watch("loadBrushes",t(this.sG,this));this.v.$watch("animationBrushes",t(this.QC,this));this.v.$watch("holdBrushes",t(this.NF,this));Rta(this)};
function aX(a){if(a)for(var b=0;b<a.length;b+=1)try{OW(a[b],!0)}catch(c){E.error(Qta,"destroyBrushCollection_",c)}}
g.hM=function(){this.Ca&&(this.Ca.dispose(),this.Ca=null);aX(this.v.sliceBrushes);aX(this.v.loadBrushes);aX(this.v.animationBrushes);aX(this.v.holdBrushes);this.v.sliceBrushes=[];this.v.loadBrushes=[];this.v.animationBrushes=[];this.v.holdBrushes=[];for(var a=0,b=this.g.length;a<b;a++)this.g[a].M("propertychange",this.cr,!1,this),this.g[a].M("dragpanstart",this.Wq,!1,this),this.g[a].M("dragpanstop",this.Xq,!1,this);this.G&&this.G.dispose();this.P&&this.P.dispose();this.Ea&&this.Ea.dispose();this.L=
this.v=null;this.sa&&this.sa.dispose();this.o&&(this.o.dispose(),this.o=null);this.O&&(this.O.remove(),this.O=null);this.I&&(d3.selectAll(".c-histogram-tooltip").remove(),this.I=null);this.pa=this.oa=this.U=this.K=this.j=null;this.u.remove();this.u=null;M.M("time.offset",this.qx,!1,this)};g.GI=function(a,b){a!=b&&(this.o&&(this.o.dispose(),this.o=null),this.Ia=a||null,bX(this))};g.HI=function(a,b){a!=b&&(this.cb=a||null,bX(this))};
g.eK=function(a,b){!a||a==b||this.A==a.Sa()&&this.B==a.Ya()?this.sa.Pd():(this.A=a.Sa(),this.B=a.Ya(),this.Eb&&(cX(this,[this.A,this.B]),this.bf()))};g.qx=function(){this.bf()};g.jM=function(){try{var a=this.L.innerWidth(),b=dX(this),c=VW;this.j.range([0,a]);this.u.select(".c-svg-timeline__main").select(".c-svg-timeline__axis-background").attr("points",Sta(b-c,a));bX(this);eX(this)}catch(d){E.error(Qta,"onViewportResize_",d)}};
function Tta(a){a=vb(ZW,xb,!1,a);0>a&&(a=Math.min(Math.abs(a+1),ZW.length-1));return ZW[a]}
function Uta(a){var b=MW(a.j.domain());a=Math.floor(a.L.innerWidth()/80);var c=Tta((b[1]-b[0])/a);a=UF;var d=b[0]+a,e=d+c-d%c;d=[];var f=null;0===c%6048E5&&(e=new Date(e),e.setUTCDate(e.getUTCDate()-e.getUTCDay()),e=e.getTime());if(2592E6>c)for(var h=0;null===f||f<=b[1];h++)f=e+c*h-a,d.push(new Date(f));else for(c/=2592E6,c=6<c?0:c,e=new Date(b[0]),c?(e.setUTCMonth(e.getUTCMonth()-e.getUTCMonth()%c),e=KF(e,"month")):(e.setUTCFullYear(e.getUTCFullYear()),e=KF(e,"year")),h=0;null===f||f<=b[1];h++){var k=
new Date(e.getTime());c?k.setUTCMonth(e.getUTCMonth()+h*c):k.setUTCFullYear(e.getUTCFullYear()+h);k.setTime(k.getTime()-a);f=k.getTime();d.push(k)}return d}function dX(a){a=a.L.innerHeight();return 150<a?150:a}
function Rta(a){function b(a){if(1E3<Math.abs(a)){var b=d3.formatPrefix(a);return 1E4<Math.abs(a)?Math.round(b.scale(a))+b.symbol:d3.round(b.scale(a),1)+b.symbol}return Number.isInteger(a)?a:""}a.o&&(a.o.dispose(),a.o=null);a.u&&(a.u.remove(),a.u=null);a.u||(a.u=d3.select(a.L[0]).append("svg").attr("class","c-svg-timeline"));var c=a.L.innerWidth(),d=dX(a),e=VW;a.j||(a.j=d3.time.scale.utc());a.j.range([0,c]).domain([0,864E5]);a.U||(a.U=d3.svg.axis().orient("bottom").scale(a.j).tickSize(8,0).tickFormat(Ota).tickPadding(5).tickValues(Uta(a)));
a.K||(a.K=d3.scale.linear());a.K.range([d-30-e-1,6]).domain([0,0]);a.oa||(a.oa=d3.svg.axis().orient("left").scale(a.K).tickFormat(b).tickPadding(5).tickSize(0,0).ticks([5]));a.l||(a.l=d3.behavior.zoom().on("zoom",a.bf.bind(a)));var f=10*c,h=7884E5*c;a.l.x(a.j).scaleExtent([864E5/h,864E5/f]);f=a.u.append("g").attr("class","js-svg-timeline__background-group");a.u.call(a.l).on("wheel.zoom",null).on("dblclick.zoom",null).on("dblclick.jump",a.VI.bind(a));a.P&&a.P.dispose();a.P=new SW(a.u.node());a.P.H("mousewheel",
a.kM,!1,a);a.pa=f.append("rect").attr("class","c-svg-timeline__background").attr("width","100%").attr("height","100%").on("mousedown",a.lO.bind(a)).on("mouseup",a.dB.bind(a)).on("mouseout",a.dB.bind(a));f.append("rect").attr("class","c-svg-timeline__axis-background").attr("width","100%").attr("height",""+e);f=a.u.append("g").attr("class","c-svg-timeline__main").attr("transform","translate(0, "+e+")");f.append("line").attr("class","c-svg-timeline__line").attr("x2","100%").attr("y2",0);a.O=f.append("g").attr("class",
"c-histogram-group");f.append("polygon").attr("points",Sta(d-e,c)).attr("class","c-svg-timeline__axis-background");a.v.histTip&&(a.I=d3.tip(),a.I.attr("class","c-histogram-tooltip").offset([-10,0]).html(a.v.histTip),a.I(a.u));f.append("g").attr("transform","translate(0,"+(d-30-e)+")").attr("class","axis x-axis").call(a.U);f.append("g").attr("transform","translate(30, 0)").attr("class","axis y-axis").call(a.oa);c=0;for(h=a.g.length;c<h;c++){a.g[c].Id=a.j;a.g[c].oo=a.ib;try{a.g[c].M("propertychange",
a.cr,!1,a),a.g[c].M("dragpanstart",a.Wq,!1,a),a.g[c].M("dragpanstop",a.Xq,!1,a)}catch(k){}a.g[c].H("propertychange",a.cr,!1,a);a.g[c].H("dragpanstart",a.Wq,!1,a);a.g[c].H("dragpanstop",a.Xq,!1,a);a.g[c].Yg(f,d-30-e)}a.Vb=f.append("g").attr("class","skip-hold-brushes");a.G.Id=a.j;a.G.setItems(a.g.filter(function(a){return a.Ev}));a.G.Yg(f,d-30-e);cX(a,[a.A,a.B],!0);a.Eb=!0;a.v.$emit("timeline.Init");a.bf()}g.Wq=function(a){this.jb=a.left;this.aa=a.target;this.Ea.start()};
g.Xq=function(){this.Ea.stop();this.aa=null};g.WH=function(){var a=MW(this.j.domain());try{this.aa.dm&&(this.jb?(Vta(this),this.aa.dm(a[0])):(Wta(this),this.aa.dm(a[1])))}catch(b){}};function Sta(a,b){var c=a-30;return"0,1 30,1 30,"+c+" "+b+","+c+" "+b+","+a+" 0,"+a+" 0,1"}g.OD=function(){var a={start:this.A,end:this.B,interval:this.ka};this.v.$emit("timeline.Scale",a);N.dispatchEvent(new WW(a))};
function bX(a){if(a.O){var b=a.O.node();!a.o&&a.Ia&&b&&(a.o=new a.Ia(b));a.o&&a.cb&&a.j&&a.K&&(a.o.g(a.cb,a.j,a.K),a.I&&a.o.tooltip(a.I))}Xta(a)}function fX(a,b,c){c=[void 0!==c?c:a.L.innerWidth()/2,0];var d=a.l.scaleExtent(),e=a.l.translate(),f=e[0];e=e[1];var h=a.l.scale();b=h*(1+.1*b);b<d[0]||b>d[1]||(d=[(c[0]-f)/h,(c[1]-e)/h],h=b,b=[d[0]*h+f,d[1]*h+e],f+=c[0]-b[0],e+=c[1]-b[1],a.l.translate([f,e]).scale(h),a.bf())}g.zoomIn=function(){fX(this,1);O(P.s(),"timeline.features.controls-zoomIn",1)};
g.zoomOut=function(){fX(this,-1);O(P.s(),"timeline.features.controls-zoomOut",1)};function Vta(a){a.l.translate([a.l.translate()[0]- -20,0]);a.bf();O(P.s(),"timeline.features.controls-panLeft",1)}function Wta(a){a.l.translate([a.l.translate()[0]-20,0]);a.bf();O(P.s(),"timeline.features.controls-panRight",1)}g.kM=function(a){a.preventDefault();var b=a.clientX-this.L.find(".c-svg-timeline").offset().left;fX(this,0<a.deltaY?-1:1,b);O(P.s(),"timeline.features.controls-mouseZoom",1)};
g.VI=function(){var a=this.getItem("window");if(a){var b=d3.mouse(d3.select(".x-axis").node());b=this.j.invert(b[0]).getTime();Eta(a,b);this.bf()}};g.bf=function(){Xta(this);if(this.l.scale()!=this.pb){var a=this.j;a=1/(a(1)-a(0));a=10*Number(a.toPrecision(2));var b=vb(ZW,xb,!1,a);0>b&&(b=Math.min(Math.abs(b+1),ZW.length-1));this.ka=0===b?ZW[0]:Math.abs(ZW[b]-a)<Math.abs(ZW[b-1]-a)?ZW[b]:ZW[b-1]}this.pb=this.l.scale();a=MW(this.j.domain());this.A=a[0];this.B=a[1];this.U.tickValues(Uta(this));this.sa.Pd()};
g.cr=function(a){var b=a.target;eX(this);this.v.$emit("timeline.item."+b.D(),a.o)};function Xta(a){d3.select(".x-axis").call(a.U);d3.select(".y-axis").call(a.oa);0===d3.select(".y-axis text").data()[0]&&d3.select(".y-axis text").remove();eX(a)}
function eX(a){for(var b=dX(a)-30-VW,c=0,d=a.g.length;c<d;c++)a.g[c].render(b);if(a.v.sliceBrushes)for(c=0,d=a.v.sliceBrushes.length;c<d;c++)a.v.sliceBrushes[c].render(b);if(a.v.loadBrushes)for(c=0,d=a.v.loadBrushes.length;c<d;c++)a.v.loadBrushes[c].render(b);if(a.v.animationBrushes)for(c=0,d=a.v.animationBrushes.length;c<d;c++)a.v.animationBrushes[c].render(b);if(a.v.holdBrushes)for(c=0,d=a.v.holdBrushes.length;c<d;c++)a.v.holdBrushes[c].render(b);a.G.setStart(a.A);a.G.l=a.B;a.G.render(b)}
g.JN=function(a){var b=UF;return 0<this.ka?Math.round((a+b)/this.ka)*this.ka-b:a};g.setStart=function(a){this.A=og(a);this.bf()};function Yta(a,b){"string"===typeof b&&(b=a.getItem(b));b&&gX(a,b.Y())}function gX(a,b){if(b&&2==b.length){var c=b[0];b=b[1];var d=.05*(b-c);cX(a,[c-d,b+d],!0);cX(a,[c-d,b+d],!0);a.bf()}}
function cX(a,b,c){var d=a.j,e=b[1]-b[0],f=MW(a.j.domain());f=f[1]-f[0];e=a.l.scale()*f/e;f=a.l.scaleExtent();if(c)e=me(e,f[0],f[1]);else if(e<f[0]||e>f[1])return;a.l.scale(e);c=a.l.translate()[0];e=d(b[0]);if(isNaN(c)||isNaN(e))a.l.translate([0,0]),c=a.l.translate()[0],e=d(b[0]);a.l.translate([c-e,0])}g.getItem=function(a){for(var b=0,c=this.g.length;b<c;b++)if(this.g[b].D()==a)return this.g[b];return null};g.lO=function(){this.pa.classed("dragging",!0)};
g.dB=function(){this.pa&&this.pa.classed("dragging",!1)};g.jH=function(a){if("zoom"==a.j)Yta(this,a.o);else if("pan"==a.j&&(a=a.o,"string"===typeof a&&(a=this.getItem(a)),a&&(a=a.Y())&&2==a.length)){a=(a[1]+a[0])/2;var b=MW(this.j.domain());b=(b[1]-b[0])/2;cX(this,[a-b,a+b]);this.bf()}};g.dO=function(){hX(this,this.v.sliceBrushes)};g.sG=function(){hX(this,this.v.loadBrushes)};g.QC=function(){hX(this,this.v.animationBrushes)};g.NF=function(){hX(this,this.v.holdBrushes)};
function hX(a,b){if(b)for(var c=dX(a),d=VW,e=a.Vb,f=0;f<b.length;f+=1)b[f].init||(b[f].Id=a.j,b[f].oo=a.ib,b[f].Yg(e,c-30-d))}ib(FD,function(a,b){return"contextmenu"!==b?!!$(a).closest(".js-timeline").length:!1});function iX(a,b,c){this.scope=a;this.scope.collapsed=jX;this.element=b;this.timeout=c;this.pa=null;this.B=jc(GW);this.g=vg.s();this.sa=null;this.G=this.O=0;this.I=null;this.ka=!1;this.oa=[];this.U=!1;this.fpsx=this.fps=0;Zta(this);this.histData=this.histClass=null;this.playing=this.g.Bd();this.timeRange=null;a=M.get(["ui","timelineSettings","chartType"],"line");a=this.B.indexOf(a);-1<a&&(Cb(this.B,a),this.histClass=GW[this.B[0]]);this.P=new IW;this.P.ib=!1;this.P.K="The currently-displayed time window";
this.P.I=kX;this.P.sa=!0;this.o=new QW;this.o.ga("select");this.o.jb="#map-container";this.o.H("change",this.tj,!1,this);this.o.H("exit",this.tj,!1,this);this.o.H("dragstart",this.tj,!1,this);this.items=[new RW,this.P,this.o];this.sliceBrushes=[];this.loadBrushes=[];this.animationBrushes=[];this.holdBrushes=[];this.j=!1;this.l=void 0;this.Ia=new ft(this.element[0]);this.Ia.H("key",this.Eb,!1,this);this.u=void 0;this.Tm(null);this.Xm(null);this.l||(this.l=new px(new aw({type:"root",children:[{type:"group",
label:"Load",sort:0},{type:"group",label:"Ranges",sort:10,children:[{eventType:"load:item.window",label:"Active Window",tooltip:"Zooms to and loads the active window",da:['<i class="fa fa-fw fa-square-o"></i>'],za:this.A.bind(this),sort:0}]},{type:"group",label:"Data",children:[],sort:20}]})),$ta(this,this.l,"load:","Load","Zooms to and loads "));this.u||(this.u=new px(new aw({type:"root",children:[{type:"group",label:"Zoom To",sort:0},{type:"group",label:"Ranges",sort:10,children:[{eventType:"load:item.load",
label:"Loaded Range",tooltip:"Zooms to the loaded range",da:['<i class="fa fa-fw fa-arrows-h"></i>'],za:this.A.bind(this),sort:0},{eventType:"zoom:item.window",label:"Active Window",tooltip:"Zooms to and loads the active window",da:['<i class="fa fa-fw fa-square-o"></i>'],za:this.A.bind(this),sort:10}]},{type:"group",label:"Data",sort:20,children:[{eventType:"zoom:All Data",label:"All Data",tooltip:"Zooms to all data",da:['<i class="fa fa-fw fa-crop"></i>'],za:this.A.bind(this),sort:0}]}]})),$ta(this,
this.u,"zoom:","Zoom To","Zooms to "));this.pb={".js-load-presets":this.l,".js-zoom-group":this.u};this.aa=!1;this.Di();lX(this,!0);this.scope.$on("timeline.item.load",this.Vb.bind(this));this.scope.$on("timeline.item.window",this.jb.bind(this));this.scope.$on("timeline.Scale",this.ib.bind(this));this.oa.push(this.scope.$watch("timelineCtrl.fpsx",this.cb.bind(this)));this.scope.$on("$destroy",this.destroy.bind(this))}iX.$inject=["$scope","$element","$timeout"];var mX=[.5,1,2,4,6,8,18,24,30],jX=!1;
function kX(){return!jX}iX.prototype.destroy=function(){this.jl();this.Ia.dispose();for(var a=0,b=this.oa.length;a<b;a++)this.oa[a]();a=this.getItem("select");a.M("change",this.tj,!1,this);a.M("exit",this.tj,!1,this);a.M("dragstart",this.tj,!1,this);var c=this.items;a=0;for(b=c.length;a<b;a++)c[a].dispose();z(this.l);z(this.u);this.u=this.l=void 0;this.timeout=this.element=this.scope=this.I=this.g=null};
iX.prototype.jb=function(a,b){!this.j&&b&&2===b.length&&(this.j=!0,a=b[1]-b[0],a!=this.g.ec()&&(XJ(this.g,a),YJ(this.g,a/2)),this.g.Gd(b[1]),this.j=!1)};iX.prototype.Vb=function(a,b){!this.j&&b&&2===b.length&&(this.j=!0,this.g.Ud($J(b[0],b[1])),this.j=!1)};var nX=[{diff:0,format:".SSS"},{diff:6E4,format:":ss"},{diff:36E5,format:" HH:mm"},{diff:3456E5,format:"YYYY MMM D"}];
iX.prototype.ib=function(a,b){this.I=b;var c=nX.length;a="";for(var d=b.end-b.start;c--&&!(a+=nX[c].format,d>nX[c].diff););c=new Date(b.start+UF);b=new Date(b.end+UF);a+=" ";this.scope.start=NF(c,a)+VF;this.scope.end=NF(b,a)+VF;oX(this);this.aa&&(aua(this),this.aa=!1)};iX.prototype.cb=function(a,b){null!=a&&a!==b&&(this.fps=a=mX[a],bua(this,a),O(P.s(),"timeline.features.controls-changeFps",1))};
function Zta(a){if(a.g){var b=a.g.U;if(a.fps!=b){for(var c=0;c<mX.length-1&&!(mX[c]>=b);c++);a.fps=mX[c];a.fpsx=c;a.fps!=b&&bua(a,a.fps)}}}function bua(a,b){a.g.M("timeline.fpsChange",a.Nc,!1,a);eK(a.g,b);a.g.H("timeline.fpsChange",a.Nc,!1,a)}iX.prototype.Ca=function(){oX(this)};function oX(a){a.I&&(a.histData=jX?[]:cua(a.I),a.ka&&pX(a),R(a.scope))}iX.prototype.nE=function(a,b){var c="";a&&a.S()&&(c+=a.S()+"<br>");return c+='Features: <span class="u-text-red">'+b.value+"</span>"};
iX.prototype.getHistogramTooltip=iX.prototype.nE;g=iX.prototype;
g.Di=function(){this.U||(this.U=!0,this.g.H("timeline.show",this.Nc,!1,this),this.g.H("timeline.reset",this.Nc,!1,this),this.g.H("timeline.play",this.Nc,!1,this),this.g.H("timeline.stop",this.Nc,!1,this),this.g.H("timeline.fpsChange",this.Nc,!1,this),this.g.H("timleline.rangeChanged",this.Nc,!1,this),this.g.H("timeline.slice.rangeChanged",this.Nc,!1,this),this.g.H("timeline.animate.rangeChanged",this.Nc,!1,this),this.g.H("timeline.animate.holdRangeChanged",this.Nc,!1,this),this.g.H("timeline.refreshLoad",
this.Qn,!1,this),RJ(this.g),this.qr(null),this.fr(null),this.Tm(null),this.Xm(null),pX(this),this.sa=this.g.ra())};
g.jl=function(){this.U&&(this.U=!1,this.g.M("timeline.show",this.Nc,!1,this),this.g.M("timeline.reset",this.Nc,!1,this),this.g.M("timeline.play",this.Nc,!1,this),this.g.M("timeline.stop",this.Nc,!1,this),this.g.M("timeline.fpsChange",this.Nc,!1,this),this.g.M("timleline.rangeChanged",this.Nc,!1,this),this.g.M("timeline.slice.rangeChanged",this.Nc,!1,this),this.g.M("timeline.animate.rangeChanged",this.Nc,!1,this),this.g.M("timeline.animate.holdRangeChanged",this.Nc,!1,this),this.g.M("timeline.refreshLoad",
this.Qn,!1,this))};
g.Nc=function(a){lX(this);"timeline.animate.rangeChanged"===a.type&&this.Tm(null);"timeline.animate.holdRangeChanged"===a.type&&this.Xm(null);"timeline.slice.rangeChanged"===a.type&&this.qr(null);"timleline.rangeChanged"===a.type&&this.fr(null);"timeline.animate.holdRangeChanged"!==a.type&&"timeline.slice.rangeChanged"!==a.type&&"timleline.rangeChanged"!==a.type||oX(this);R(this.scope);if("timeline.play"==a.type)this.K=Ia();else if("timeline.stop"==a.type){if(0<this.K&&(a=P.s(),a.isEnabled())){var b=
Ia()-this.K;O(a,"timeline.stats.max-play",b);O(a,"timeline.stats.min-play",b)}this.K=0}};function lX(a,b){if(!a.j){a.j=!0;Zta(a);a.playing=a.g.Bd();b&&(a.O=0,a.G=0);if(b||!a.g.Bd())if(0===a.O||0===a.G)a.O=a.g.Sa(),a.G=a.g.Ya(),b=.05*(a.G-a.O),a.timeRange=new qg(a.O-b,a.G+b),a.aa=!0;a.aa||aua(a);a.j=!1}}function aua(a){var b=a.getItem("window");b&&b.Cc([a.g.g-a.g.ec(),a.g.g],!0);(b=a.getItem("loop"))&&a.g.l.isEmpty()&&b.Cc([WJ(a.g).start,WJ(a.g).end],!0)}
g.getItem=function(a){for(var b=this.items,c=0,d=b.length;c<d;c++)if(b[c].D()==a)return b[c];return null};g.PD=function(){this.g.first();O(P.s(),"timeline.features.controls-firstFrame",1)};iX.prototype.firstFrame=iX.prototype.PD;iX.prototype.jG=function(){this.g.last();O(P.s(),"timeline.features.controls-lastFrame",1)};iX.prototype.lastFrame=iX.prototype.jG;iX.prototype.KG=function(){this.g.next();gK(this.g);O(P.s(),"timeline.features.controls-nextFrame",1)};iX.prototype.nextFrame=iX.prototype.KG;
iX.prototype.bN=function(){this.g.prev();gK(this.g);O(P.s(),"timeline.features.controls-prevFrame",1)};iX.prototype.previousFrame=iX.prototype.bN;iX.prototype.reset=function(){this.sa&&(this.g.restore(this.sa),lX(this,!0),O(P.s(),"timeline.features.controls-reset",1),(new Fh(this.Qn,10,this)).start())};iX.prototype.reset=iX.prototype.reset;iX.prototype.lB=function(){(this.playing=!this.playing)?this.g.play():this.g.stop();O(P.s(),"timeline.features.controls-playToggle",1)};
iX.prototype.togglePlay=iX.prototype.lB;iX.prototype.zoomIn=function(){qX(this).zoomIn();O(P.s(),"timeline.features.controls-zoomIn",1)};iX.prototype.zoomIn=iX.prototype.zoomIn;iX.prototype.zoomOut=function(){qX(this).zoomOut();O(P.s(),"timeline.features.controls-zoomOut",1)};iX.prototype.zoomOut=iX.prototype.zoomOut;function qX(a){return a.element.find(".js-timeline").children().scope().timeline}
iX.prototype.wO=function(){Cb(this.B,1);var a=this.B[0];this.histClass=GW[a];M.set(["ui","timelineSettings","chartType"],a);a="timeline.features.controls-chartType#"+a;O(P.s(),a,1)};iX.prototype.toggleChartType=iX.prototype.wO;
iX.prototype.ci=function(a){var b=this.pb[a];if(b){var c=b.Ha().find("Data");c.children.length=b===this.u?1:0;var d=this.histData;if(d)for(var e=b===this.l?"load:":"zoom:",f=b===this.l?"Zooms to and loads ":"Zooms to ",h=100,k=0;k<d.length;k++){var l=d[k],m=l.o,n=l.S();l.yb()&&dua(m)&&c.R({eventType:e+l.D(),label:n,tooltip:f+n,da:['<i class="fa fa-fw fa-bars"></i>'],sort:h++,za:this.A.bind(this)})}this.scope.menu=a;N.Ua(rx,this.gc,!1,this);b.open(void 0,{my:"left bottom",at:"left top",of:a})}};
iX.prototype.openMenu=iX.prototype.ci;iX.prototype.gc=function(){this.scope.menu=null};iX.prototype.select=function(){this.scope.selecting=!this.scope.selecting;angular.element(".brush-select .background").css("display",this.scope.selecting?"block":"none")};iX.prototype.select=iX.prototype.select;g=iX.prototype;g.tj=function(a){this.scope.selecting="dragstart"==a.type;R(this.scope)};g.OC=function(a){Xia(this.g,PW(a.A))};
g.PC=function(a){if("extent"===a.j){var b=a.o,c=a.u;a=this.g;b=new bJ(b[0],b[1]);c=new bJ(c[0],c[1]);if(b.start!=c.start||b.end!=c.end)a.l.remove(c),oK(a,b)}};g.eO=function(a){var b=this.g;a=PW(a.A);a=nK(a);var c=b.o.clone();86399E3<=a.end&&(a.end=864E5);b.o.remove(a);fJ(c,b.o)||(b.P.clear(),b.dispatchEvent("timeline.slice.rangeChanged"),b.dispatchEvent("timleline.rangeChanged"),!c.isEmpty()&&b.o.isEmpty()&&b.dispatchEvent("timeline.refreshLoad"),cK(b),iK(b))};
g.fO=function(a){if("extent"===a.j){var b=a.o,c=a.u;a=this.g;c=new bJ(c[0],c[1]);b=nK(new bJ(b[0],b[1]));c=nK(c);if(b.start!=c.start||b.end!=c.end)86399E3<=c.end&&(c.end=864E5),a.o.remove(c),Wia(a,b)}};
g.tG=function(a){var b=this.g;a=PW(a.A);var c=b.j.clone();b.j.remove(a);b.j.isEmpty()?(b.j.remove(a),b.j.add(a.clone()),rj(qj.s(),"At least one load range must always be present",Th),b.P.clear(),b.dispatchEvent("timeline.slice.rangeChanged"),b.dispatchEvent("timleline.rangeChanged"),cK(b),iK(b)):fJ(c,b.j)||(b.P.clear(),b.dispatchEvent("timeline.slice.rangeChanged"),b.dispatchEvent("timleline.rangeChanged"),a=Sg(c).length,c=Sg(b.j).length,1<a&&1===c&&b.dispatchEvent("timeline.refreshLoad"),cK(b),iK(b))};
g.uG=function(a){if("extent"===a.j){var b=a.o,c=a.u;a=this.g;b=new bJ(b[0],b[1]);c=new bJ(c[0],c[1]);if(b.start!=c.start||b.end!=c.end)a.j.remove(c.clone()),ZJ(a,b)}};g.DE=function(a){var b=new IW;b.ga("slice-"+Zb());b.G=!0;LW(b);b.u="slice";b.K="The slice range";b.ka=!0;b.I=kX;b.Cc([a.start,a.end]);b.H("deleted",this.eO.bind(this));b.H("propertychange",this.fO.bind(this));return b};
g.qE=function(a){var b=new IW;this.g.o.isEmpty()?(b.ga("load-"+Zb()),b.u="load"):(b.ga("considered-"+Zb()),b.u="considered");b.K="The load range";b.G=!0;LW(b);b.ka=1<Sg(this.g.j).length;b.I=kX;b.Cc([a.start,a.end]);b.H("deleted",this.tG.bind(this));b.H("propertychange",this.uG.bind(this));return b};g.WD=function(a){var b=new IW;b.ga("loop-"+Zb());b.G=!0;LW(b);b.K="The playback loop";b.ka=!0;b.I=kX;b.Cc([a.start,a.end]);b.H("deleted",this.OC.bind(this));b.H("propertychange",this.PC.bind(this));return b};
g.oE=function(a){var b=new IW;b.ga("loop-"+Zb());b.G=!0;LW(b);b.u="hold";b.K="The hold range";b.ka=!0;b.I=kX;b.Cc([a.start,a.end]);b.H("deleted",this.OF.bind(this));b.H("propertychange",this.PF.bind(this));return b};function rX(a,b,c){for(var d,e=[],f=a.splice(0),h=Math.max(b.length,f.length),k=0;k<h;k++)d=b[k],a=f[k],d&&a&&!a.kp?(a.Ud(d,!0),e.push(a)):d?e.push(c(d)):d||!a||a.kp||OW(a,!0);return e}g.Qn=function(){sX(this.loadBrushes,this.fr.bind(this))};
function sX(a,b){for(var c=0;c<a.length;c++)OW(a[c],!0);b(null)}g.qr=function(){var a=this.sliceBrushes;var b=this.g;b=Sg(b.o.isEmpty()?[]:fK(b));this.sliceBrushes=rX(a,b,this.DE.bind(this))};g.fr=function(){this.loadBrushes=rX(this.loadBrushes,Sg(this.g.j),this.qE.bind(this))};g.Tm=function(){this.animationBrushes=rX(this.animationBrushes,Sg(this.g.l),this.WD.bind(this))};g.Xm=function(){this.holdBrushes=rX(this.holdBrushes,Sg(this.g.u),this.oE.bind(this))};g.OF=function(a){Yia(this.g,PW(a.A))};
g.PF=function(a){if("extent"===a.j){var b=a.o,c=a.u;a=this.g;b=new bJ(b[0],b[1]);c=new bJ(c[0],c[1]);if(b.start!=c.start||b.end!=c.end)a.u.remove(c),Zia(a,b)}};var eua={oS:"Today",LS:"Yesterday",kS:"This Week",qQ:"Last Week",jS:"This Month",nQ:"Last 30 Days",oQ:"Last 60 Days",pQ:"Last 90 Days",lS:"This Year"};function dua(a){return!!a&&a.Sa()!=mg&&a.Ya()!=ng&&!isNaN(a.Sa())&&!isNaN(a.Ya())&&!(0==a.Sa()&&0==a.Ya())}
function $ta(a,b,c,d,e){b=b.Ha().find(d);d=0;for(var f in eua){var h=eua[f],k=c+h,l=-1<h.indexOf("Data")?"fa-crop":"fa-calendar";b.R({eventType:k,label:h,tooltip:e+h.toLowerCase(),da:['<i class="fa fa-fw '+l+'"></i>'],sort:d++,za:a.A.bind(a)})}}
iX.prototype.A=function(a){var b=a.type.split(":");a=b[0];var c=b[1],d=!0;b=angular.element(".c-svg-timeline").scope().timeline;var e=this.histData;switch(c){case "Today":var f=KF(new Date,"day");var h=LF(new Date,"day");break;case "Yesterday":f=KF(new Date,"day");h=LF(new Date,"day");f.setUTCDate(f.getUTCDate()-1);h.setUTCDate(h.getUTCDate()-1);break;case "This Week":f=KF(new Date,"week");h=LF(new Date,"week");break;case "Last Week":f=KF(new Date,"week");h=LF(new Date,"week");f.setUTCDate(f.getUTCDate()-
7);h.setUTCDate(h.getUTCDate()-7);break;case "This Month":f=KF(new Date,"month");h=LF(new Date,"month");break;case "Last 30 Days":h=LF(new Date,"day");f=MF(h,"day",-30);break;case "Last 60 Days":h=LF(new Date,"day");f=MF(h,"day",-60);break;case "Last 90 Days":h=LF(new Date,"day");f=MF(h,"day",-90);break;case "This Year":f=KF(new Date,"year");h=LF(new Date,"year");break;case "All Data":if(e){c=Number.POSITIVE_INFINITY;for(var k=Number.NEGATIVE_INFINITY,l=0,m=e.length;l<m;l++){var n=e[l].o;dua(n)&&
(c=Math.min(c,n.Sa()),k=Math.max(k,n.Ya()))}k>c&&(f=new Date(c),h=new Date(k),d=!1)}break;default:if(0===c.indexOf("item.")){if("item.load"===c?e=hJ(this.g.j):(e=this.g,e=new bJ(e.g-e.G,e.g)),n=e)h=MW([n.start,n.end]),f=new Date(h[0]),h=new Date(h[1]),d=!1}else if(c&&e)for(l=0,m=e.length;l<m;l++)if(e[l].D()==c){if(n=e[l].o)f=new Date(n.Sa()),h=new Date(n.Ya()),d=!1;break}}void 0!==f&&void 0!==h&&(d&&(f.setTime(f.getTime()-UF),h.setTime(h.getTime()-UF)),b.getItem("window")&&(f=f.getTime(),h=h.getTime(),
gX(b,[f,h]),"load"==a&&(this.g.Ud($J(f,h)),RJ(this.g),pX(this))))};
iX.prototype.Eb=function(a){var b=qX(this);if(b)switch(a.keyCode){case 33:case 38:a.stopPropagation();b.zoomIn();break;case 34:case 40:a.stopPropagation();b.zoomOut();break;case 37:a.shiftKey?(a.stopPropagation(),Vta(b)):a.ctrlKey?(a.stopPropagation(),this.g.first()):(a.stopPropagation(),this.g.prev());break;case 39:a.shiftKey?(a.stopPropagation(),Wta(b)):a.ctrlKey?(a.stopPropagation(),this.g.last()):(a.stopPropagation(),this.g.next());break;case 32:a.stopPropagation(),this.lB()}};
function pX(a){var b=a.histData;if(b&&b.length){a.ka=!1;for(var c=Number.NEGATIVE_INFINITY,d=WJ(a.g).start,e=WJ(a.g).end,f=0,h=b.length;f<h;f++){var k=b[f].g,l;for(l in k)k[l]&&d<=l&&l<=e&&(c=Math.max(c,l))}c>Number.NEGATIVE_INFINITY&&a.g.Gd(c+a.I.interval)}else a.ka=!0}iX.prototype.close=function(){dK(this.g);Pia(this.g);N.dispatchEvent(new cw("toggleUI","timeline"))};iX.prototype.close=iX.prototype.close;iX.prototype.xO=function(){jX=!jX;this.scope.collapsed=jX;this.Ea()};
iX.prototype.toggleCollapse=iX.prototype.xO;
iX.prototype.Ea=function(){var a=qX(this),b=this.element.find(".js-timeline-panel"),c=b.find(".js-timeline");jX?(b.removeClass("c-timeline-panel__expanded"),b.addClass("c-timeline-panel__collapsed"),c.removeClass("c-timeline__expanded"),c.addClass("c-timeline__collapsed")):(b.removeClass("c-timeline-panel__collapsed"),b.addClass("c-timeline-panel__expanded"),c.removeClass("c-timeline__collapsed"),c.addClass("c-timeline__expanded"));zk.get("$timeout")(function(){Rta(a);this.Qn();sX(this.sliceBrushes,
this.qr.bind(this));sX(this.holdBrushes,this.Xm.bind(this));sX(this.animationBrushes,this.Tm.bind(this))}.bind(this),100)};iX.prototype.il=function(){this.g.Bd()&&this.g.stop();N.dispatchEvent("timeline.record");O(P.s(),"timeline.features.controls-record",1)};iX.prototype.record=iX.prototype.il;function tX(){iV.call(this);this.description="Saves the current timeline";this.priority=100;this.g="time";this.title="Time"}w(tX,iV);var uX=E.V("os.state.v2.TimeState");
tX.prototype.load=function(a,b){a=jV(a);if(a instanceof Element)try{if(fua(a))this.l(a,b);else{var c=a.querySelector("animation");N.dispatchEvent(new cw("toggleUI","timeline",null!=c&&0<c.childElementCount));var d=new ij(fua.bind(void 0,a)),e=this.l.bind(this,a,b);d.Ph=e;d.rj=e;d.start(100,5E3)}}catch(f){E.error(uX,"Failed to parse time state! Stack: "+f.stack)}else E.error(uX,"Unable to load state content!")};
function fua(a){a=a.querySelector("animation");a=null!=a&&0<a.childElementCount;var b=null!=Zq("js-timeline");return a===b}
tX.prototype.l=function(a){try{var b=a.querySelector("animation"),c=null!=b&&0<b.childElementCount,d=vg.s(),e=null,f=a.querySelectorAll("interval");if(0<f.length){for(var h=new eJ,k=0;k<f.length;k+=1)h.add(vX(f[k].textContent));e=hJ(h)}var l=e;var m=a.querySelector("current"),n=m?m.textContent:void 0;var p=n?vX(n):null;!l&&p&&(l=new bJ(p.start,p.end));if(l){var r=a.querySelector("duration");if(r)var u=r.textContent;else{var v=l.end-l.start;u=24192E5<=v?"month":6048E5==v?"week":864E5==v?"day":"custom"}(e=
u||void 0)&&VJ(d,e);var y=gua(a,"sequence"),B=new eJ;B.add(l);fJ(B,y)?dK(d):lK(d,y);mK(d,gua(a,"holds"));d.Ud(l);c&&(RJ(d,e),UJ(d,l.end-l.start))}p&&(XJ(d,p.end-p.start),d.Gd(p.end));l=0;var G=a.querySelector("millisPerFrame"),D=G?Number(G.textContent):0;!isNaN(D)&&0<D&&(l=Math.round(1E3/D));var U=isNaN(l)||0===l?null:l;null!==U&&eK(d,U);var ja=a.querySelector("advance");var ea=ja?Ata(ja.textContent):null;null!==ea&&0!==ea&&YJ(d,ea);var ca=angular.element(".js-date-control").scope();ca&&ca.dateControl.update();
if(c){var aa=Zq("js-timeline");aa&&lX(angular.element(aa).scope().timelineCtrl,!0);var ka=b.querySelector("playState");ka&&"Forward"==ka.textContent?d.play():d.Bd()&&d.stop()}}catch(Ha){E.error(uX,"Failed to parse time state! Stack: "+Ha.stack)}};tX.prototype.remove=function(){};
tX.prototype.bd=function(a,b){try{var c=vg.s(),d=new bJ(c.g-c.ec(),c.g),e=Bta(c.A);Z("interval",b,wX(hJ(c.j)));Z("current",b,wX(d));Z("advance",b,e);if(!c.l.isEmpty()){var f=Z("sequence",b);hua(Sg(c.l),f)}if(!c.u.isEmpty()){var h=Z("holds",b);hua(Sg(c.u),h)}if(null!=Zq("js-timeline")){var k=wX(WJ(c)),l=Math.floor(Math.round(1E3/c.U)),m=c.Bd()?"Forward":"Stop",n=Z("animation",b);Z("loop",n,k);Z("loopBehavior",n,"taperEndSnapStart");Z("millisPerFrame",n,l);Z("playState",n,m)}Z("duration",b,c.K);this.Td(a,
b)}catch(p){gV(this,p.message||"Unspecified error.")}};function hua(a,b){for(var c,d=0;d<a.length;d+=1)c=a[d],c=wX(c),Z("interval",b,c)}function wX(a){var b=new Date(a.end);return NF(new Date(a.start),"YYYY-MM-DDTHH:mm:ss[Z]")+"/"+NF(b,"YYYY-MM-DDTHH:mm:ss[Z]")}function vX(a){var b=a.split(/\//);a=bG(b[0],["YYYY-MM-DDTHH:mm:ss[Z]"]);b=bG(b[1],["YYYY-MM-DDTHH:mm:ss[Z]"]);return new bJ(a.valueOf(),b.valueOf())}
function gua(a,b){var c=new eJ;if(a&&(a=a.querySelector(b)))for(a=a.querySelectorAll("interval"),b=0;b<a.length;b+=1)c.add(vX(a[b].textContent));return c};function xX(){iV.call(this);this.description="Saves the current map view/position";this.priority=100;this.g="map";this.title="Current View"}w(xX,iV);var iua=E.V("os.state.v2.ViewState");
xX.prototype.load=function(a){a=jV(a);if(a instanceof Element)try{var b=a.querySelector("projection");if(b)var c=b.textContent;var d=L.s();c="Perspective"==c?"3d":"2d";var e=d.Qa();("2d"==c&&e||"3d"==c&&!e)&&EP(d,!e);var f=Number(a.querySelector("latitude").textContent),h=Number(a.querySelector("longitude").textContent);fR(d,{center:[h?h:0,f?f:0],altitude:Number(a.querySelector("altitude").textContent),heading:Number(a.querySelector("heading").textContent),roll:Number(a.querySelector("roll").textContent),
tilt:me(Number(a.querySelector("tilt").textContent),0,90)})}catch(k){}else E.error(iua,"Unable to load state content!")};xX.prototype.remove=function(){};
xX.prototype.bd=function(a,b){try{var c=L.s(),d=gG("kml:Camera","http://www.opengis.net/kml/2.2",b);d.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:kml","http://www.opengis.net/kml/2.2");Z("projection",b,c.Qa()?"Perspective":"Equirectangular");var e=Kq(c);gG("kml:latitude","http://www.opengis.net/kml/2.2",d,e.center[1]);gG("kml:longitude","http://www.opengis.net/kml/2.2",d,e.center[0]);gG("kml:altitude","http://www.opengis.net/kml/2.2",d,e.altitude);gG("kml:tilt","http://www.opengis.net/kml/2.2",
d,e.tilt);gG("kml:heading","http://www.opengis.net/kml/2.2",d,e.heading);gG("kml:roll","http://www.opengis.net/kml/2.2",d,e.roll);gG("kml:altitudeMode","http://www.opengis.net/kml/2.2",d,"clampToGround");this.Td(a,b)}catch(f){gV(this,f.message||"Unspecified error.")}};function yX(){iV.call(this);this.description="Saves the current layers";this.j={type:"data"};this.g="layers";this.title="Layers"}w(yX,iV);var jua=E.V("os.state.v3.LayerState");g=yX.prototype;g.isValid=function(a){try{var b=a.Va();if(!b||!b.type||b.loadOnce)return!1;var c=b.type.toLowerCase();return"basemap"===c||"static"===c||"ref"===c?!1:!(Jw(b.url)||Jw(b.url2))}catch(d){}return!1};
g.load=function(a,b){a=jV(a);if(a instanceof Element)try{var c=a.querySelectorAll("layer");if(c){a=[];for(var d=0,e=c.length;d<e;d++){var f=this.Pr(c[d]);f&&a.push(f)}a.reverse();c=0;for(var h=a.length;c<h;c++){var k=a[c];k.id=hV(b,k.id);k.exportEnabled=!0;var l=Y.Ka(b.substring(0,b.length-1));l&&(k.provider=l.S());var m=k.layer;if(!m){var n=k.params;if(n){var p=n.get("typename");q(p)?m=p[0]:m=p;if("string"===typeof m){var r=m.indexOf(":");-1<r&&(m=m.substring(r+1))}}}var u=k.style,v=k.styles;if(null!=
u&&null!=v){f=!1;for(var y=0,B=v.length;y<B;y++){if(v[y].data===u){f=!0;break}if(v[y].label===u){f=!0;k.style=v[y].data;break}}f||(k.style="")}m&&tW(m)&&uW(k.title)}d=0;for(e=a.length;d<e;d++){var G=new fM(a[d]);G.Fa();G.dispose()}}}catch(D){E.error(jua,"Error loading layer in state "+b,D)}else E.error(jua,"Unable to load state content!")};g.remove=function(a){for(var b=Dg(L.s()),c=b.length;c--;){var d=b[c];if(d)try{var e=d.D();e&&Eb(e,a)&&L.s().removeLayer(d)}catch(f){}}};
g.bd=function(a,b){try{for(var c=Dg(L.s()),d=!1,e=0,f=c.length;e<f;e++){var h=c[e];if(this.isValid(h)){var k=this.Nr(h,a,void 0,{title:h.S()});k&&b.appendChild(k);var l=h.N();!d&&l instanceof Rz&&(d=l.I)}}d&&rj(qj.s(),"You have at least one of your layers locked. Locked layers are included in state files, but they <b>will not be locked</b> when the state is loaded. The state file may look different from what you currently see!",Rh);this.Td(a,b)}catch(m){gV(this,m.message||"Unspecified error.")}};
g.Nr=function(a,b,c,d){var e=["locked","featureType","type"];if(!a.Va())return null;var f=vc(a.Va());null!=d&&yc(f,d);a.ra(f);a=f.url;"string"!==typeof a||Jw(a)||(a=f.url=decodeURIComponent(wW(a)));(d=f.urls)&&0<d.length&&!a&&(f.url=d[0]);d="string"===typeof f.type?f.type.toLowerCase():"";null!=c&&(c=q(c)?c:[c],e=qb(e,c));c=0;for(var h=e.length;c<h;c++)null!=f[e[c]]&&delete f[e[c]];e=ny("layer",b.te);b="wms"!=d?ny("basicFeatureStyle",b.te):null;for(var k in f)if(c=f[k],null!=c)switch(k){case "params":var l=
Z("params",e),m="string"===typeof c?new ch(c):c,n=m.Xb();c=0;for(h=n.length;c<h;c++){var p=n[c],r=String(m.get(p));"wms"==d?p=p.toUpperCase():"wfs"==d&&(p=p.toLowerCase());Z(p,l,r)}break;case "provider":Z("dataProvider",e,c);break;case "baseType":Z("provider",e,c);this.Rd(k,c,e);break;case "color":b?(c=ef(c).slice(1),Z("pointColor",b,c)):this.Rd(k,c,e);break;case "contrast":"number"!==typeof c||isNaN(c)||Z("contrast",e,Math.round(100*(c-1)));break;case "alpha":case "opacity":b?(c=null!=c?Number(c):
1,Z("pointOpacity",b,Math.round(255*c))):(c=null!=c?Number(c):1,Z("alpha",e,c));break;case "size":b&&(c=null!=c?Math.floor(c):3,Z("pointSize",b,2*c));break;case "styles":l=Z("styles",e);m=c;n=f.legends;c=0;for(h=m.length;c<h;c++)m[c].data&&(p=Z("style",l),Z("name",p,m[c].data),Z("title",p,m[c].label),n&&n.length==m.length&&Z("legend",p,n[c]||""));break;case "labels":if(b&&0<c.length&&!Hb(Tb(c[0].column))){Z("labelColumn",b,c[0].column);var u=Z("labelColumns",b);$a(c,function(a){Z("label",u,void 0,
{column:a.column,showColumn:a.showColumn})})}break;case "labelColor":b&&"string"===typeof c&&!Hb(Tb(c))&&(c=ef(c).replace(/^#/,""),Z("labelColor",b,c));break;case "labelSize":b&&"number"===typeof c&&Z("labelSize",b,c);break;case "showLabels":Z("showLabels",e,c);break;case "mappings":if((c=f.mappings)&&0<c.length)for(h=Z("mappings",e),l=iy.s().sc(c).getElementsByTagName("mapping"),c=l.length;0<c;c--)h.appendChild(l[c-1]);break;case "commentChar":this.Rd("comment",c,e);this.Rd("quote",'"',e);break;
case "dataRow":"number"===typeof c&&this.Rd("dataRow",c-1,e);break;case "headerRow":"number"===typeof c&&f.useHeader?this.Rd("headerRow",c-1,e):this.Rd("headerRow",-1,e);break;case "useHeader":case "parserConfig":break;case "animate":"timeEnabled"in f||this.Rd(k,c,e);break;case "timeEnabled":this.Rd("animate",c,e);break;case "isBaseLayer":this.Rd("baseLayer",c,e);break;case "refreshInterval":Z("refreshRate",e,c);break;default:this.Rd(k,c,e)}b&&0<b.childElementCount&&e.appendChild(b);"wms"==d&&a&&
Z("getMapUrl",e,a);Yx(e,{type:d});return e};
g.Rd=function(a,b,c){if("string"===typeof b||"number"===typeof b||"boolean"===typeof b){if("string"===typeof b&&-1<a.search(/color/i)&&"colorize"!=a&&df(b))try{b=ef(b).replace(/^#/,"0x")}catch(f){b="0xffffff"}else"string"===typeof b&&Eb(b,"url")&&(b=wW(b));Z(a,c,b)}else if(q(b)){var d=Fb(a,"s")?a.substring(0,a.length-1):a;a=Z(a,c);c=0;for(var e=b.length;c<e;c++)this.Rd(d,b[c],a)}else if(ZU(RU,a))try{e=b.ra(),Z(a,c,JSON.stringify(e))}catch(f){}else if(Ba(b)&&!Ca(b))for(d in a=Z(a,c),b)this.Rd(d,b[d],
a)};
function zX(a,b,c){var d=null,e=ZU(RU,b),f=c.textContent,h=jr(c);if(e)a=JSON.parse(f),e.restore(a),d=e;else if(-1<b.search(/color/i)&&"colorize"!=b&&0==h.length&&df(f))d=cf(f,"0x");else if(h&&0<h.length)if(c.localName==h[0].localName+"s"||1<h.length&&h[1].localName==h[0].localName)for(d=[],e=0,b=h.length;e<b;e++)d.push(zX(a,h[e].localName,h[e]));else for(d={},e=0,b=h.length;e<b;e++)c=h[e],d[c.localName]=zX(a,c.localName,c);else Aq.test(f)?d=parseFloat(f):zq.test(f)?d=parseInt(f,16):yq.test(f)?d="true"==
f.toLowerCase():d=f;return d}
g.Pr=function(a){if(a){var b=jr(a);if(b){for(var c=String(a.getAttribute("type")),d=Wf(Uf.s(),c),e=0,f=b.length;e<f;e++){var h=b[e],k=h.localName;if(Qb(k,"FileSource"))return null;switch(k){case "basicFeatureStyle":var l=jr(h);h=0;for(k=l.length;h<k;h++){var m=l[h].textContent;switch(l[h].localName){case "pointColor":try{m=cf(m,"#"),d.color=hz(m)}catch(u){d.color="rgba(255,255,255,1)"}break;case "pointOpacity":d.opacity=Ib(m)?Number(m)/255:1;break;case "pointSize":d.size=Ib(m)?Number(m)/2:3;break;
case "labelColumn":m="string"===typeof m?Jb(m):"";void 0==d.labels&&(d.labels=[Cz()],d.labels[0].column=m,d.labels[0].showColumn=!1);var n=this.N(a);n&&-1<n.indexOf("MIST3D")&&(d.showLabels=!Hb(Tb(m)));break;case "labelColumns":var p=[];m=jr(l[h]);$a(m,function(a){p.push({column:a.getAttribute("column"),showColumn:"true"==a.getAttribute("showColumn")?!0:!1})});d.labels=p;break;case "labelColor":try{m=cf(m,"#"),d.labelColor=hz(m)}catch(u){d.labelColor=""}break;case "labelSize":m=Ib(m)?Number(m):0,
d.labelSize=0<m?me(m,8,24):14}}break;case "contrast":h=Number(h.textContent);k=h/100+1;d.contrast=isNaN(h)?1:me(k,0,2);break;case "dataProvider":d.provider=h.textContent;break;case "getMapUrl":d.url=h.textContent.replace(/[?]+$/,"");break;case "params":l=d.params||new ch;m=jr(h);h=0;for(k=m.length;h<k;h++)l.set(m[h].localName,m[h].textContent);d.params=l;break;case "styles":l=[{data:"",label:"Default"}];if(m=jr(h)){h=0;for(k=m.length;h<k;h++){n=m[h].querySelector("name");var r=m[h].querySelector("title");
l.push({data:n&&n.textContent||"",label:r&&r.textContent||""})}d.styles=l}break;case "tags":d.tags=OP(h);break;case "title":d.title=h.textContent.replace(/\s*(Tiles|Features)\s*$/,"");break;case "showLabels":d.showLabels="true"==h.textContent;break;case "mappings":l=iy.s();m=[];n=jr(h);h=0;for(k=n.length;h<k;h++)r=l.fd(n[h]),m.push(r);d.mappings=m;break;case "animate":d[k]=zX(this,k,h);d.timeEnabled=d[k];break;case "timeEnabled":break;case "comment":d.commentChar=zX(this,k,h);break;case "dataRow":d.dataRow=
zX(this,k,h)+1;break;case "headerRow":h=zX(this,k,h);d.useHeader=0>h?!1:!0;d.headerRow=h+1;break;case "baseLayer":d.isBaseLayer=zX(this,k,h);break;case "refreshRate":d.refreshInterval=zX(this,k,h);break;default:d[k]=zX(this,k,h)}}d.type=c.toUpperCase();"typeOverride"in d&&(a=d.typeOverride,Xf(Uf.s(),a)&&(d.type=a,delete d.typeOverride));return d}}return null};function AX(){iV.call(this);this.description="Saves the current layers";this.g="dataLayers";this.title="Data Layers";this.j={type:"data"};this.layers=[]}w(AX,iV);var kua=E.V("os.state.v4.BaseLayerState");g=AX.prototype;g.isValid=function(a){try{var b=a.Va();if(!b||!b.type||b.loadOnce||b.skipState)return!1;var c=b.type.toLowerCase();return"basemap"===c||"static"===c||"ref"===c?!1:!(Jw(b.url)||Jw(b.url2))&&!(Iw(b.url)||Iw(b.url2))}catch(d){}return!1};
g.load=function(a,b){a=jV(a);if(a instanceof Element)try{var c=a.querySelectorAll("layer");if(c){a=[];for(var d=0,e=c.length;d<e;d++){var f=this.Rr(c[d]);f&&a.push(f)}a.reverse();c=0;for(var h=a.length;c<h;c++){var k=a[c];k.id=hV(b,k.id);k.exportEnabled=!0;var l=Y.Ka(b.substring(0,b.length-1));l&&(k.provider=l.S());var m=k.layer;if(!m){var n=k.params;if(n){var p=n.get("typename");q(p)?m=p[0]:m=p;if("string"===typeof m){var r=m.indexOf(":");-1<r&&(m=m.substring(r+1))}}}var u=k.style,v=k.styles;if(null!=
u&&null!=v){f=!1;for(var y=0,B=v.length;y<B;y++){if(v[y].data===u){f=!0;break}if(v[y].label===u){f=!0;k.style=v[y].data;break}}f||(k.style="")}m&&tW(m)&&uW(k.title)}d=0;for(e=a.length;d<e;d++){var G=new fM(a[d]);G.Fa();G.dispose()}}}catch(D){E.error(kua,"Error loading layer in state "+b,D)}else E.error(kua,"Unable to load state content!")};
g.bd=function(a,b){try{for(var c=this.layers,d=!1,e=0,f=c.length;e<f;e++){var h=c[e];if(this.isValid(h)){var k=this.Qr(h,a,void 0,{title:h.S()});k&&b.appendChild(k);var l=h.N();!d&&l instanceof Rz&&(d=l.I)}var m=h.Va();if(m&&m.skipState){var n="The '"+h.S()+"' layer is of a type which can not be saved in state files. That layer will not be included. The state file may look different from what you currently see!";rj(qj.s(),n,Rh)}}d&&(n="You have at least one of your layers locked. Locked layers are included in state files, but they <b>will not be locked</b> when the state is loaded. The state file may look different from what you currently see!",
rj(qj.s(),n,Rh));this.Td(a,b)}catch(p){gV(this,p.message||"Unspecified error.")}};
g.Qr=function(a,b,c,d){var e=["locked","featureType","type"];if(!a.Va())return null;var f=vc(a.Va());null!=d&&yc(f,d);a.ra(f);d=f.url;"string"!==typeof d||Jw(d)||(d=f.url=decodeURIComponent(wW(d)));var h=f.urls;h&&0<h.length&&!d&&(f.url=h[0]);a.Va()?(h=a.Va().type,a=Hb(Tb(h))?"":a.Va().type):a="";null!=c&&(c=q(c)?c:[c],e=qb(e,c));c=0;for(h=e.length;c<h;c++)null!=f[e[c]]&&delete f[e[c]];e=ny("layer",b.te);b="wms"!=a?ny("basicFeatureStyle",b.te):null;for(var k in f)c=f[k],null!=c&&lua(this,f,a,k,c,
b,e);b&&0<b.childElementCount&&e.appendChild(b);"wms"==a&&d&&Z("getMapUrl",e,d);Yx(e,{type:a});return e};
function lua(a,b,c,d,e,f,h){switch(d){case "params":b=Z("params",h);h="string"===typeof e?new ch(e):e;a=h.Xb();f=0;for(e=a.length;f<e;f++){d=a[f];var k=String(h.get(d));"wms"==c?d=d.toUpperCase():"wfs"==c&&(d=d.toLowerCase());Z(d,b,k)}break;case "provider":Z("dataProvider",h,e);break;case "baseType":Z("provider",h,e);a.Sd(d,e,h);break;case "color":f?(c=gf(e),Z("pointColor",f,c)):a.Sd(d,e,h);break;case "contrast":"number"!==typeof e||isNaN(e)||Z("contrast",h,Math.round(100*(e-1)));break;case "alpha":case "opacity":f?
(e=null!=e?Number(e):1,c=Math.round(255*e),(e=f.querySelector("pointOpacity"))?e.textContent=c:Z("pointOpacity",f,c)):(e=null!=e?Number(e):1,Z("alpha",h,e));break;case "size":f&&(e=null!=e?Math.floor(e):3,Z("pointSize",f,2*e));break;case "styles":c=Z("styles",h);b=e;f=0;for(e=b.length;f<e;f++)b[f].data&&(h=Z("style",c),Z("name",h,b[f].data),Z("title",h,b[f].label));break;case "labels":c=e;if(f&&0<c.length&&!Hb(Tb(c[0].column))){var l=Z("labelColumns",f);$a(c,function(a){Z("label",l,void 0,{column:a.column,
showColumn:a.showColumn})})}break;case "labelColor":f&&"string"===typeof e&&!Hb(Tb(e))&&(c=gf(e),Z("labelColor",f,c));break;case "labelSize":f&&"number"===typeof e&&Z("labelSize",f,e);break;case "showLabels":Z("showLabels",h,e);break;case "icon":c=Z("iconStyle",h);Z("iconDefaultPointSize",c,"4.0");Z("iconDefaultTo",c,"Icon");f=30;b.size&&"number"===typeof b.size&&(f=Math.floor(10*b.size));Z("iconScale",c,f);Z("defaultIconURL",c,e.path);Z("iconXOffset",c,0);Z("iconYOffset",c,0);Z("mixIconElementColor",
c,!0);break;case "mappings":if((f=b.mappings)&&0<f.length)for(c=Z("mappings",h),e=iy.s().sc(f).getElementsByTagName("mapping"),f=e.length;0<f;f--)c.appendChild(e[f-1]);break;case "commentChar":a.Sd("comment",e,h);a.Sd("quote",'"',h);break;case "dataRow":a.Sd("dataRow",e-1,h);break;case "headerRow":b.useHeader?a.Sd("headerRow",e-1,h):a.Sd("headerRow",-1,h);break;case "useHeader":case "parserConfig":break;case "animate":"timeEnabled"in b||a.Sd(d,e,h);break;case "timeEnabled":a.Sd("animate",e,h);break;
case "isBaseLayer":a.Sd("baseLayer",e,h);break;case "refreshInterval":Z("refreshRate",h,e);break;case "extent":h.appendChild(mua(e));break;case "colorModel":c=nua(e);h.appendChild(c);break;default:a.Sd(d,e,h)}}function mua(a){var b=ny("extents");a=Ql(a,"EPSG:4326",S);gG("north","http://www.opengis.net/kml/2.2",b,a[3]);gG("south","http://www.opengis.net/kml/2.2",b,a[1]);gG("east","http://www.opengis.net/kml/2.2",b,a[2]);gG("west","http://www.opengis.net/kml/2.2",b,a[0]);return b}
function oua(a){var b=[];b.push(parseFloat(mG(a.querySelector("west"),-179)));b.push(parseFloat(mG(a.querySelector("south"),-89)));b.push(parseFloat(mG(a.querySelector("east"),179)));b.push(parseFloat(mG(a.querySelector("north"),89)));return Ql(b,S,"EPSG:4326")}
g.Sd=function(a,b,c){if("string"===typeof b||"number"===typeof b||"boolean"===typeof b){if("string"===typeof b&&-1<a.search(/color/i)&&"colorize"!=a&&df(b))try{b=gf(b)}catch(f){b="0xffffff"}else"string"===typeof b&&Eb(b,"url")&&(b=wW(b));"string"===typeof b&&"$$hashKey"==a||Z(a,c,b)}else if(q(b)){var d=Fb(a,"s")?a.substring(0,a.length-1):a;a=Z(a,c);c=0;for(var e=b.length;c<e;c++)this.Sd(d,b[c],a)}else if(ZU(BX.s(),a))try{e=b.ra(),Z(a,c,JSON.stringify(e))}catch(f){}else if(Ba(b)&&!Ca(b))for(d in a=
Z(a,c),b)this.Sd(d,b[d],a)};
function CX(a,b,c){var d=null,e=ZU(BX.s(),b),f=c.textContent,h=jr(c);if(e)a=JSON.parse(f),e.restore(a),d=e;else if(-1<b.search(/color/i)&&"colorize"!=b&&0==h.length&&df(f))d=cf(f,"0x");else if(h&&0<h.length)if(c.localName==h[0].localName+"s"||1<h.length&&h[1].localName==h[0].localName)for(d=[],e=0,b=h.length;e<b;e++)d.push(CX(a,h[e].localName,h[e]));else for(d={},e=0,b=h.length;e<b;e++)c=h[e],d[c.localName]=CX(a,c.localName,c);else Aq.test(f)?d=parseFloat(f):zq.test(f)?d=parseInt(f,16):yq.test(f)?
d="true"==f.toLowerCase():d=f;return d}g.Rr=function(a){if(a){var b=jr(a);if(b){for(var c=String(a.getAttribute("type")),d=Wf(Uf.s(),c),e=0,f=b.length;e<f;e++){var h=b[e],k=h.localName;if(Qb(k,"FileSource"))return null;pua(this,a,h,k,d)}d.type=c.toUpperCase();"typeOverride"in d&&(a=d.typeOverride,Xf(Uf.s(),a)&&(d.type=a,delete d.typeOverride));return d}}return null};
function pua(a,b,c,d,e){switch(d){case "basicFeatureStyle":var f=jr(c);c=0;for(d=f.length;c<d;c++){var h=f[c].textContent;switch(f[c].localName){case "pointColor":try{h=cf(h,"#"),e.color=hz(h)}catch(m){e.color="rgba(255,255,255,1)"}break;case "pointOpacity":e.opacity=Ib(h)?Number(h)/255:1;break;case "pointSize":e.size=Ib(h)?Number(h)/2:3;break;case "labelColumn":h="string"===typeof h?Jb(h):"";void 0==e.labels&&(e.labels=[Cz()],e.labels[0].column=h,e.labels[0].showColumn=!1);var k=a.N(b);k&&-1<k.indexOf("MIST3D")&&
(e.showLabels=!Hb(Tb(h)));break;case "labelColumns":var l=[];h=jr(f[c]);$a(h,function(a){l.push({column:a.getAttribute("column"),showColumn:"true"==a.getAttribute("showColumn")?!0:!1})});e.labels=l;break;case "labelColor":try{h=cf(h,"#"),e.labelColor=hz(h)}catch(m){e.labelColor=""}break;case "labelSize":h=Ib(h)?Number(h):0,e.labelSize=0<h?me(h,8,24):14}}break;case "contrast":c=Number(c.textContent);e.contrast=isNaN(c)?1:me(c/100+1,0,2);break;case "dataProvider":e.provider=c.textContent;break;case "getMapUrl":e.url=
c.textContent.replace(/[?]+$/,"");break;case "params":a=e.params||new ch;b=jr(c);c=0;for(d=b.length;c<d;c++)a.set(b[c].localName,b[c].textContent);e.params=a;break;case "styles":a=[{data:"",label:"Default"}];if(b=jr(c)){c=0;for(d=b.length;c<d;c++)f=b[c].querySelector("name"),h=b[c].querySelector("title"),a.push({data:f&&f.textContent||"",label:h&&h.textContent||""});e.styles=a}break;case "tags":e.tags=OP(c);break;case "title":e.title=c.textContent.replace(/\s*(Tiles|Features)\s*$/,"");break;case "showLabels":e.showLabels=
"true"==c.textContent;break;case "iconStyle":if(c=c.querySelector("defaultIconURL"))c=c.textContent,d=c.indexOf("maps.google.com"),-1<d&&(c="http://"+c.substring(d)),e.icon={path:c};break;case "mappings":a=iy.s();b=[];f=jr(c);c=0;for(d=f.length;c<d;c++)h=a.fd(f[c]),b.push(h);e.mappings=b;break;case "animate":e[d]=CX(a,d,c);e.timeEnabled=e[d];break;case "timeEnabled":break;case "comment":e.commentChar=CX(a,d,c);break;case "dataRow":e.dataRow=CX(a,d,c)+1;break;case "headerRow":c=CX(a,d,c);e.useHeader=
0>c?!1:!0;e.headerRow=c+1;break;case "baseLayer":e.isBaseLayer=CX(a,d,c);break;case "refreshRate":e.refreshInterval=CX(a,d,c);break;case "extents":e.extent=oua(c);break;case "colorModel":c=qua(c);e.colorModel=c;break;default:e[d]=CX(a,d,c)}}
function qua(a){var b={colorMethod:0,binMethod:{},manualColors:{}};b.colorMethod=parseInt(mG(a.querySelector("colorMethod"),0),10);var c=a.querySelector("binMethod");if(c){var d=c.querySelector("field");d&&(d=wV(d),b.binMethod.field=d||"");if(d=c.querySelector("type"))d=wV(d),b.binMethod.type=d||"";if(d=c.querySelector("width"))d=sV(d),null!=d&&(b.binMethod.width=d);if(c=c.querySelector("offset"))c=sV(c),null!=c&&(b.binMethod.offset=c)}a=a.querySelector("manualColors").querySelectorAll("pair");for(c=
0;c<a.length;c++){d=a[c];var e=d.querySelector("name");d=d.querySelector("value");e=mG(e,null);d=mG(d,null);Hb(Tb(e))||(b.manualColors[e]=d)}return b}
function nua(a){var b=ny("colorModel");if(a){Z("colorMethod",b,a.colorMethod);var c=a.binMethod;if(c){var d=Z("binMethod",b);Z("field",d,c.field);Z("type",d,c.type);null!=c.width&&Z("width",d,c.width);null!=c.offset&&Z("offset",d,c.offset)}c=Z("manualColors",b);for(var e in a.manualColors)a.manualColors.hasOwnProperty(e)&&(d=Z("pair",c),Z("name",d,e),Z("value",d,a.manualColors[e]))}return b};function DX(){AX.call(this)}w(DX,AX);DX.prototype.remove=function(a){for(var b=Dg(L.s()),c=b.length;c--;){var d=b[c];if(d)try{var e=d.D();e&&Eb(e,a)&&L.s().removeLayer(d)}catch(f){}}};DX.prototype.bd=function(a,b){this.layers=Dg(L.s());DX.C.bd.call(this,a,b)};function EX(){iV.call(this);this.description="Saves the current query areas";this.priority=80;this.g="queryAreas";this.title="Query Areas"}w(EX,iV);var rua=E.V("os.state.v4.QueryArea"),FX={};
EX.prototype.load=function(a,b,c){a=jV(a);if(a instanceof Element)try{var d=a.querySelectorAll("queryArea");if(d){FX[b]=[];var e=[],f=[],h=a.parentNode,k=h?h.querySelector("queryEntries"):null;a=0;for(var l=d.length;a<l;a++){var m=mW(d[a]);if(m){Ap(m);var n=new hq(m),p=d[a].getAttribute("id")||Vb(),r=d[a].getAttribute("title"),u=mG(d[a].querySelector("description"),""),v=mG(d[a].querySelector("tags"),"");p&&(n.ga(hV(b,p)),n.set("temp",!0),n.set("title",r?r:"Area "+(a+1)),n.set("tags",v),n.set("description",
u),n.set("_sourceName",c));FX[b].push(n);e.push(n);if(!k||!k.querySelector('queryEntry[areaId="'+p+'"]')){var y=d[a].querySelectorAll("layer");p=n.D();if(y&&y.length){h=0;for(var B=y.length;h<B;h++){var G={layerId:hV(b,y[h].textContent),areaId:p,filterId:"*",includeArea:!0,filterGroup:!0,temp:!0};f.push(G)}}else G={layerId:"*",areaId:p,filterId:"*",includeArea:!0,filterGroup:!0,temp:!0},f.push(G)}}}RG(TG,e,!0);oE(lE,f)}}catch(D){E.error(rua,"There was an error loading a query area from state file "+
b,D)}else E.error(rua,"Unable to load state content!")};EX.prototype.remove=function(a){var b=lE,c=TG;if(a in FX){for(var d=FX[a],e=[],f=[],h=0,k=d.length;h<k;h++){for(var l=d[h],m=b.getEntries(null,l.D()),n=0,p=m.length;n<p;n++)m[n].temp&&f.push(m[n]);l.get("temp")&&e.push(l)}f.length&&VG(b,f);$a(e,c.remove,c);delete FX[a]}};
EX.prototype.bd=function(a,b){try{for(var c=TG,d=fH(),e={},f=0,h=d.length;f<h;f++){var k=d[f],l=k.areaId;if(l&&"*"!==l&&k.includeArea){var m=k.layerId;l in e||(e[l]={});"*"!==m&&(e[l][m]=!0)}}for(l in e){var n=c.get(l);if(n){var p=n.Z();if(p){p=p.clone().toLonLat();var r=oW(p,"KML");if(r){var u=Wx(r),v=Z("queryArea",b,void 0,{id:n.D(),title:n.get("title")});Z("description",v,n.get("description"));Z("tags",v,n.get("tags"));v.appendChild(kr(u));var y=e[l];if(y)for(m in y)Z("layer",v,m)}}}}this.Td(a,
b)}catch(B){gV(this,B.message||"Unspecified error.")}};function GX(){iV.call(this);this.description="Saves the current timeline";this.priority=100;this.g="time";this.title="Time"}w(GX,iV);var HX=E.V("os.state.v4.TimeState");
GX.prototype.load=function(a,b){a=jV(a);if(a instanceof Element)try{if(sua(a))this.l(a,b);else{var c=a.querySelector("animation");N.dispatchEvent(new cw("toggleUI","timeline",null!=c&&0<c.childElementCount));var d=new ij(sua.bind(void 0,a)),e=this.l.bind(this,a,b);d.Ph=e;d.rj=e;d.start(100,5E3)}}catch(f){E.error(HX,"Failed to parse time state! Stack: "+f.stack)}else E.error(HX,"Unable to load state content!")};
function sua(a){a=a.querySelector("animation");a=null!=a&&0<a.childElementCount;var b=null!=Zq("js-timeline");return a===b}
GX.prototype.l=function(a){try{var b=a.querySelector("animation"),c=null!=b&&0<b.childElementCount,d=vg.s(),e=null,f=a.querySelectorAll("interval");if(0<f.length){for(var h=new eJ,k=0;k<f.length;k+=1)h.add(IX(f[k].textContent));e=hJ(h)}var l=e;var m=a.querySelector("current"),n=m?m.textContent:void 0;var p=n?IX(n):null;!l&&p&&(l=new bJ(p.start,p.end));if(l){var r=a.querySelector("duration");if(r)var u=r.textContent;else{var v=l.end-l.start;u=24192E5<=v?"month":6048E5==v?"week":864E5==v?"day":"custom"}(e=
u||void 0)&&VJ(d,e);var y=tua(a,"playIntervals"),B=new eJ;B.add(l);d.Ud(l);c&&(RJ(d,e),UJ(d,l.end-l.start));fJ(B,y)?dK(d):lK(d,y);mK(d,tua(a,"heldIntervals"))}p&&(XJ(d,p.end-p.start),d.Gd(p.end));l=0;var G=a.querySelector("millisPerFrame"),D=G?Number(G.textContent):0;!isNaN(D)&&0<D&&(l=Math.round(1E3/D));var U=isNaN(l)||0===l?null:l;null!==U&&eK(d,U);var ja=a.querySelector("advance");var ea=ja?Ata(ja.textContent):null;null!==ea&&0!==ea&&YJ(d,ea);var ca=angular.element(".js-date-control").scope();
ca&&ca.dateControl.update();if(c){var aa=Zq("js-timeline");aa&&lX(angular.element(aa).scope().timelineCtrl,!0);var ka=b.querySelector("playState");ka&&"Play"==ka.textContent?d.play():d.Bd()&&d.stop()}}catch(Ha){E.error(HX,"Failed to parse time state! Stack: "+Ha.stack)}};GX.prototype.remove=function(){};
GX.prototype.bd=function(a,b){try{var c=vg.s(),d=new bJ(c.g-c.ec(),c.g),e=Bta(c.A);Z("interval",b,JX(hJ(c.j)));Z("current",b,JX(d));Z("advance",b,e);if(!c.l.isEmpty()){var f=Z("playIntervals",b),h=Sg(c.l);for(d=0;d<h.length;d+=1){var k=h[d];var l=JX(k);Z("interval",f,l)}}!c.u.isEmpty()&&b.appendChild(uua(Sg(c.u)));if(null!=Zq("js-timeline")){var m=Math.floor(Math.round(1E3/c.U)),n=c.Bd()?"Play":"Stop",p=Z("animation",b);Z("millisPerFrame",p,m);Z("playState",p,n)}Z("duration",b,c.K);this.Td(a,b)}catch(r){gV(this,
r.message||"Unspecified error.")}};function uua(a){for(var b=ny("heldIntervals"),c,d,e=0;e<a.length;e+=1)d=ny("held"),b.appendChild(d),c=a[e],c=JX(c),Z("interval",d,c);return b}function JX(a){var b=new Date(a.end);return NF(new Date(a.start),"YYYY-MM-DDTHH:mm:ss[Z]")+"/"+NF(b,"YYYY-MM-DDTHH:mm:ss[Z]")}function IX(a){var b=a.split(/\//);a=bG(b[0],["YYYY-MM-DDTHH:mm:ss[Z]"]);b=bG(b[1],["YYYY-MM-DDTHH:mm:ss[Z]"]);return new bJ(a.valueOf(),b.valueOf())}
function tua(a,b){var c=new eJ;if(a&&(a=a.querySelector(b)))for(a=a.querySelectorAll("interval"),b=0;b<a.length;b+=1)c.add(IX(a[b].textContent));return c};function KX(){iV.call(this);this.description="Saves the current map view/position";this.priority=100;this.g=vua;this.title="Current View";this.l={center:[0,0],altitude:1E6,heading:0,roll:0,tilt:0};this.projection=wua}w(KX,iV);var wua="Equirectangular",vua="map";KX.prototype.remove=function(){};KX.prototype.co=function(a){this.projection=a};KX.prototype.Ra=function(){return this.projection};
KX.prototype.bd=function(a,b){try{var c=gG("kml:Camera","http://www.opengis.net/kml/2.2",b);c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:kml","http://www.opengis.net/kml/2.2");Z("projection",b,this.Ra());var d=this.l;gG("kml:longitude","http://www.opengis.net/kml/2.2",c,d.center[0]);gG("kml:latitude","http://www.opengis.net/kml/2.2",c,d.center[1]);gG("kml:altitude","http://www.opengis.net/kml/2.2",c,d.altitude);gG("kml:heading","http://www.opengis.net/kml/2.2",c,d.heading);gG("kml:tilt",
"http://www.opengis.net/kml/2.2",c,d.tilt);gG("kml:roll","http://www.opengis.net/kml/2.2",c,180<d.roll?d.roll-360:d.roll);gG("kml:altitudeMode","http://www.opengis.net/kml/2.2",c,"clampToGround");this.Td(a,b)}catch(e){gV(this,e.message||"Unspecified error.")}};function LX(){KX.call(this)}w(LX,KX);var xua=E.V("os.state.v4.ViewState");
LX.prototype.load=function(a){a=jV(a);if(a instanceof Element)try{var b=a.querySelector("projection");if(b)var c=b.textContent;var d=L.s();c="Perspective"==c?"3d":"2d";var e=d.Qa();("2d"==c&&e||"3d"==c&&!e)&&EP(d,!e);var f=Number(a.querySelector("roll").textContent);fR(d,{center:[Number(a.querySelector("longitude").textContent),Number(a.querySelector("latitude").textContent)],altitude:Number(a.querySelector("altitude").textContent),heading:Number(a.querySelector("heading").textContent),roll:180<f?
f-360:f,tilt:me(Number(a.querySelector("tilt").textContent),0,90)})}catch(h){E.error(xua,"Error loading viewstate:",h)}else E.error(xua,"Unable to load state content!")};LX.prototype.bd=function(a,b){var c=L.s();this.co(c.Qa()?"Perspective":wua);this.l=Kq(c);LX.C.bd.call(this,a,b)};function MX(){fF.call(this)}w(MX,ZM);xa(MX);MX.prototype.Wb=function(a){this.ga("state");this.Da("State Files");MX.C.Wb.call(this,a);this.Ck=!1};MX.prototype.load=function(a){MX.C.load.call(this,a);a=Qw(Y,this.D()+"#");for(var b=0,c=a.length;b<c;b++)a[b].yh()};MX.prototype.Ve=function(){return"Contains all state files that have been imported into "+Wh("the application")};lw("text/xml; subtype=STATE",SS(/^state$/i,/\/state\//i),0,"text/xml");function NX(){YU.call(this);this.contentType="text/xml";this.log=yua;this.o="http://www.bit-sys.com/mist/state/";var a=GM.s();JM(a,Wh("Application")+" state files.");KM(a,"text/xml; subtype=STATE",new UU)}w(NX,YU);var yua=E.V("os.ui.state.XMLStateManager");NX.prototype.rs=function(a){NX.C.rs.call(this,a);this.o="http://www.bit-sys.com/mist/state/"+a};
NX.prototype.Ml=function(a){if("string"===typeof a){var b=Wx(a);b&&(a=b)}b=[];if(a instanceof Document&&kr(a)instanceof Element){var c=kr(a);a=c.namespaceURI;a=a.substring(a.lastIndexOf("/")+1);if(a in this.j&&(a=this.j[a],c=jr(c)))for(var d=c.length;d--;){var e=Cra(c[d]);e&&e in a&&(e=new a[e],e.Za(!0),b.push(e))}}b.sort(Era);return b};
NX.prototype.Bq=function(a,b,c,d){if(a&&b){if("string"===typeof a){var e=Wx(a);e&&(a=e)}if(a instanceof Document&&kr(a)instanceof Element){b.sort(Dra);a=jr(kr(a));e=0;for(var f=b.length;e<f;e++){var h=b[e];if(h.kc())for(var k=0,l=a.length;k<l;k++)if(Cra(a[k])==h.toString()){h.load(a[k],c,d);break}}}}};function BX(){NX.call(this);this.log=OX;this.rs("v4");var a=Y;mF(a,new eF("state",MX,"State Files","Contains all state files"));nF(a,"state",eV);$U(this,"v2",pW);$U(this,"v2",rW);$U(this,"v2",xW);$U(this,"v2",AW);$U(this,"v2",CW);$U(this,"v2",tX);$U(this,"v2",xX);$U(this,"v3",pW);$U(this,"v3",rW);$U(this,"v3",yX);$U(this,"v3",AW);$U(this,"v3",CW);$U(this,"v3",tX);$U(this,"v3",xX);$U(this,"v4",pW);$U(this,"v4",rW);$U(this,"v4",DX);$U(this,"v4",EX);$U(this,"v4",CW);$U(this,"v4",GX);$U(this,"v4",LX);
this.l={};this.l.v2={Ek:[lV],ol:[]};this.l.v3={Ek:[lV],ol:[]};this.l.v4={Ek:[lV],ol:[]}}w(BX,NX);xa(BX);var OX=E.V("os.state.StateManager");g=BX.prototype;g.ru=function(){Qw(Y,"state#").forEach(function(a){a.setActive(!1)});this.dispatchEvent("clear")};g.kz=function(a){for(var b=Qw(Y),c=0,d=b.length;c<d;c++)if(b[c].S()==a)return!0;return!1};
g.qs=function(a,b){for(var c=Y,d=MX.s(),e=null,f=Qw(c),h=0,k=f.length;h<k;h++){var l=a.Ma();if(f[h]instanceof eV&&l&&f[h].gh(l)){e=f[h];break}}e||(e=new eV,e.Yc("rgba(255,255,255,1)"),e.Mb(a.Ma()),e.ga(gF(d)),e.Ec(d.ba()),e.ud=Ia());a=e;a.Ta(b.title);a.fb(b.description);a.vb(b.ie?b.ie.split(/\s*,\s*/):null);if(b.g){f=[];h=0;for(k=b.g.length;h<k;h++)l=b.g[h],l.kc()&&f.push(l.toString());0<f.length&&(a.l=f,a.u.loadItems=f)}pF(c,e);$M(d,e,b.load)};
function zua(a,b){if(b&&b instanceof Document&&kr(b)instanceof Element){b=kr(b);var c=b.namespaceURI;if(c){var d=c.lastIndexOf("/");0>d?(d=a.g,E.hb(OX,"Could not extract the version number from the xmlns: "+c+". Using the default: "+d)):(d=c.substr(d+1),d||(d=a.g,E.hb(OX,"Could not extract the version number from the xmlns: "+c+". Using the default: "+d)))}else d=a.g;if(a=a.l[d])for(c=0,d=a.Ek.length;c<d;c++)a.Ek[c](b)}}g.Ml=function(a){zua(this,a);return BX.C.Ml.call(this,a)};
g.Bq=function(a,b,c,d){zua(this,a);BX.C.Bq.call(this,a,b,c,d)};g.nr=function(a){var b=kr(a.te);if(b)for(var c=this.l[this.g],d=0,e=c.ol.length;d<e;d++)c.ol[d](b);BX.C.nr.call(this,a)};function PX(a){C.call(this);this.K=[];void 0!==a&&this.ul(a);this.u=null;this.g=[];this.A=this.o=0}w(PX,C);PX.prototype.ul=function(a){for(var b=0,c=a.length;b<c;b++)a[b]+=(-1<a[b].indexOf("?")?"&":"?")+"_cd="+Ia();this.K=a};PX.prototype.B=function(a){a=a.target;a.removeAllListeners();4==Mr(a)&&(0===a.Ue()?this.o++:this.A++);this.o+this.A==this.g.length&&(this.dispatchEvent(new A(0<this.o/this.g.length?"error":"success")),this.g.length=0)};
PX.prototype.I=function(a){a.target.removeAllListeners();this.l=new Dr;this.l.H("timeout",this.G,!1,this);this.l.H("success",this.G,!1,this);this.l.H("error",this.G,!1,this);this.l.B=!0;Fr(this.l,this.u,"POST","<fake></fake>",{Accept:"application/json","Content-Type":"text/xml"})};PX.prototype.G=function(a){a=a.target;a.removeAllListeners();4==Mr(a)&&(0===a.Ue()?this.dispatchEvent(new A("postError")):this.dispatchEvent(new A("postSuccess")))};function QX(){this.g=window.document||{cookie:""}}g=QX.prototype;g.isEnabled=function(){return navigator.cookieEnabled};g.set=function(a,b,c,d,e,f){if(/[;=\s]/.test(a))throw Error('Invalid cookie name "'+a+'"');if(/[;\r\n]/.test(b))throw Error('Invalid cookie value "'+b+'"');sa(c)||(c=-1);e=e?";domain="+e:"";d=d?";path="+d:"";f=f?";secure":"";c=0>c?"":0==c?";expires="+(new Date(1970,1,1)).toUTCString():";expires="+(new Date(Ia()+1E3*c)).toUTCString();this.g.cookie=a+"="+b+e+d+c+f};
g.get=function(a,b){for(var c=a+"=",d=(this.g.cookie||"").split(";"),e=0,f;e<d.length;e++){f=Jb(d[e]);if(0==f.lastIndexOf(c,0))return f.substr(c.length);if(f==a)return""}return b};g.remove=function(a,b,c){var d=sa(this.get(a));this.set(a,"",0,b,c);return d};g.Xb=function(){return RX(this).keys};g.Mc=function(){return RX(this).values};g.isEmpty=function(){return!this.g.cookie};g.clear=function(){for(var a=RX(this).keys,b=a.length-1;0<=b;b--)this.remove(a[b])};
function RX(a){a=(a.g.cookie||"").split(";");for(var b=[],c=[],d,e,f=0;f<a.length;f++)e=Jb(a[f]),d=e.indexOf("="),-1==d?(b.push(""),c.push(e)):(b.push(e.substring(0,d)),c.push(e.substring(d+1)));return{keys:b,values:c}};function SX(a,b){this.v=a;this.L=b;this.j=uj.s();this.j.Hg(this);this.server=location.host;a=new QX;var c=M.get(["consent"]);c&&c.text&&(this.refresh=c.refresh,this.text=c.text,this.g=new je(900*this.refresh),this.g.H("tick",this.Ur,!1,this),a&&!a.get("consent")?(Aua(b,{backdrop:"static",focus:!0}),$("body").addClass("c-consent")):(this.g.start(),this.Ur()));this.v.$on("$destroy",this.destroy.bind(this))}SX.$inject=["$scope","$element"];g=SX.prototype;
g.destroy=function(){$("body").removeClass("c-consent");this.Na=this.L=this.v=null};g.di=function(){return["consent"]};g.ad=function(){this.L.modal("hide");this.g.start()};g.Ur=function(){(new QX).set("consent","true",this.refresh,"/",null,!1)};function Bua(){var a=M.get(["consent"]),b=new QX;a&&a.text&&!b.get("consent")&&Cua("<consent></consent>")}g.KN=function(){this.Ur();this.L.modal("hide");this.g.start();Bj(this.j,"consent","")};SX.prototype.saveCookie=SX.prototype.KN;
Q.directive("consent",function(){return{replace:!0,restrict:"E",templateUrl:"v1541734487/views/consent.html",controller:SX,controllerAs:"consentCtrl"}});function TX(a){A.call(this,a)}w(TX,A);function xS(){C.call(this);this.log=Dua;this.j={};this.l=null;this.g=new ko}w(xS,C);xa(xS);var Dua=E.V("os.ui.config.SettingsManager");
function UX(a,b){var c=b.D();if(c in a.j)a.j[c]=b;else{a.j[c]=b;try{b.g||(b.g=new so,to(b.g,b),b.g.collapsed=!1);var d=b.g;if(!a.g.find("label",d.ba())){var e=a.g,f=b.j;c=0;for(var h=f.length;c<h;c++){var k=f[c],l=a.g.find("label",k);if(!l){var m=new so,n=new uo;n.yc("fa fa-folder");n.Da(k);to(m,n);m.collapsed=!1;e.R(m);l=m}e=l}e.R(d)}}catch(p){}a.dispatchEvent(new TX("settingsmanager:pluginadded",b))}}
xS.prototype.na=function(){var a=this.g.na();return a?(a=a.slice(),wb(a,function(a,c){return xb(a.ba(),c.ba())}),a):[]};xS.prototype.Nj=function(a){this.l=a};function wS(a,b){if(b=a.j[b]){var c=b.ba();if(c=a.g.find("label",c))a.l=c,a.dispatchEvent(new TX("settingsmanager:selectedchange",b))}};var Eua={},VX=void 0,WX={};function XX(a,b,c,d){if(VX&&!WX[a]){b.id=a;WX[a]=d||b;var e;a="openWindow."+a;c=c?"0:Major":"1:Minor";(c=VX.Ha().find(c))&&(e=c.R({label:b.label,eventType:a,tooltip:b.description||"",da:['<i class="fa fa-fw '+b.icon+'"></i>'],Bg:b.shortcut,qa:b.metricKey,za:YX}));delete b.shortcut;return e}}function YX(a){a="string"===typeof a?a:a.type.split(/\./)[1];if(ix(a))return hx(a),!0;if(a=WX[a]){if(Ca(a))a();else{a=vc(a);var b=a.html;delete a.html;fx(a,b)}return!0}return!1}
function Fua(a){wS(xS.s(),a);YX("settings")};function ZX(a,b){x.call(this);this.scope=a;this.element=b;this.qa=this.g=this.menu=void 0;this.l="left bottom";this.o="left top+3";a.$on("$destroy",this.dispose.bind(this))}w(ZX,x);ZX.$inject=["$scope","$element"];ZX.prototype.J=function(){ZX.C.J.call(this);this.element=this.scope=null};
ZX.prototype.ci=function(){this.menu&&(this.scope.menu||this.element.hasClass("active")||this.element.hasClass("active-remove")||this.element.hasClass("active-remove-active")?(this.scope.menu=!1,this.element.blur(),this.menu.close()):(this.scope.menu=!0,N.Ua(rx,this.B,!1,this),this.menu.open(void 0,{my:this.o,at:this.l,of:this.element||"#js-window__container",within:$(document.firstElementChild)})));R(this.scope)};ZX.prototype.openMenu=ZX.prototype.ci;
ZX.prototype.B=function(){this.scope.menu=!1;this.element.blur()};ZX.prototype.toggle=function(){this.g&&!YX(this.g)&&N.dispatchEvent(new cw("toggleUI",this.g,null,null,this.qa))};ZX.prototype.toggle=ZX.prototype.toggle;ZX.prototype.Ak=function(a){if(a=a||this.g){var b=angular.element("#js-window__container").scope();return!!ix(a)||b.mainCtrl&&b.mainCtrl[a]}return!1};ZX.prototype.isWindowActive=ZX.prototype.Ak;function Cua(a){var b=zk.get("$compile"),c=zk.get("$rootScope").$new();of(c,void 0);var d=$("#js-window__container");d.append(b(a)(c)[0]);d.scope()&&d.scope().$on("$destroy",function(){$("body > .modal-backdrop").remove()})}function Aua(a,b){a.modal(b).on("hidden.bs.modal",function(){setTimeout(function(){a.scope().$destroy();a.remove()},1500)})};Q.directive("modalAutoSize",[function(){return{restrict:"C",link:Gua}}]);function Gua(a,b){new $X(a,b)}function $X(a,b){b=this.L=b;if(b.hasClass("modal")){var c=new CI(this.j,500,this);b.bind("DOMSubtreeModified",c.Pd.bind(c));a.$on("$destroy",this.l.bind(this));this.g=new bw;this.g.H("resize",this.j,!1,this)}}
$X.prototype.j=function(){if(this.L){var a=this.L.find(".modal-header"),b=this.L.find(".modal-body"),c=this.L.find(".modal-footer"),d=$(window).height()||0,e=this.L.hasClass("modal-huge")?12:Math.floor(.1*d);a=a.outerHeight()||0;c=c.outerHeight()||0;var f=(parseInt($("body").css("margin-top"),10)||0)+(parseInt($("body").css("padding-top"),10)||0);b.css({"max-height":d-(f+2*e+c+a)+"px"})}};$X.prototype.l=function(){this.g&&(this.g.dispose(),this.g=null);this.L=null};Q.directive("aboutModal",[function(){return{replace:!0,restrict:"E",templateUrl:"v1541734487/views/modal/aboutmodal.html",controller:Hua,controllerAs:"aboutModalCtrl"}}]);function Hua(a,b){a.path="v1541734487/";a["os.uiPath"]="v1541734487/";this.application=Wh();this.logoPath=M.get("about.logoPath","images/logo.png");this.userAgent=navigator.userAgent;this.appVendors=M.get(["about","appVendors"],[]);this.vendors=M.get(["about","vendors"],[]);Aua(b)}Hua.$inject=["$scope","$element"];function Iua(){var a=Gj.s();try{var b=(new Date(a.j.user.opensphere.reset.last)).toISOString().replace(/T/," ").replace(/(.000)/," ")}catch(c){b="Never!"}gD({confirm:jj,prompt:"This action will clear all locally saved application settings and <b>reload the current page.</b> The current state of your application will be lost, so be sure you're at a good stopping point.<br><br>Last reset: "+b+"<br><br><b>Are you sure you want to clear your settings and reload?</b>",yesText:"Clear and Reload",yesButtonClass:"btn-danger",
windowOptions:{label:"Reset Settings",icon:"fa fa-refresh",x:"center",y:300,width:400,height:"auto",modal:!0,"no-scroll":!0,"disable-drag":!0,headerClass:"bg-danger u-bg-danger-text"}})}var Jua={eventType:"displayClearLocalStorage",label:"Reset Settings",tooltip:"Clears your browser's local storage",da:['<i class="fa fa-fw fa-refresh"></i>'],sort:1E3};var aY=new px(new aw({type:"root",children:[]}));Q.directive("help",[function(){return{restrict:"E",replace:!0,scope:!0,controller:bY,controllerAs:"ctrl",template:'<button class="btn btn-info dropdown-toggle" title="Support" ng-click="ctrl.openMenu()" ng-right-click="ctrl.openMenu()" ng-class="{active: menu}"><i class="fa fa-question-circle" ng-class="{\'fa-fw\': puny}"></i> <span ng-class="{\'d-none\': puny}">Support</span></button>'}}]);
function bY(a,b){ZX.call(this,a,b);this.menu=aY;this.log=Kua;Lua(this)}w(bY,ZX);bY.$inject=["$scope","$element"];var Kua=E.V("os.ui.help.HelpCtrl");bY.prototype.J=function(){bY.C.J.call(this);this.menu.removeAllListeners();this.menu=void 0};
function Lua(a){var b=Wh("the application"),c=a.menu.Ha();M.get("helpVideoUrl")&&(c.R({eventType:"help_video",label:"Help Videos",tooltip:"View help videos for "+b,da:['<i class="fa fa-fw fa-question-circle"></i>'],sort:20}),a.menu.H("help_video",a.j,!1,a));c.R({type:"separator",sort:100});c.R({eventType:"about",label:"About",tooltip:"About "+b,da:['<i class="fa fa-fw fa-info-circle"></i>'],sort:101});a.menu.H("about",a.j,!1,a);pc(YQ.s().g)||(c.R({eventType:"controlsHelp",label:"Controls",tooltip:"Keyboard and mouse controls",
da:['<i class="fa fa-fw fa-keyboard-o"></i>'],sort:110}),a.menu.H("controlsHelp",a.j,!1,a));var d=M.get("helpVideoCardUrl");d&&(c.R({eventType:"videoCard",label:"Graphics Card Help",tooltip:"Troubleshoot 3D view",da:['<i class="fa fa-fw fa-desktop"></i>'],sort:120}),a.menu.H("videoCard",function(){window.open(d)},!1,a));M.get("onboarding")&&!0!==M.get("onboarding").hideTips&&(c.R({eventType:"showTips",label:"Show Tips",tooltip:"Reset help tips, and show the initial set of tips",da:['<i class="fa fa-fw fa-question"></i>'],
sort:130}),a.menu.H("showTips",a.j,!1,a));c.R({eventType:"viewAlerts",label:"View Alerts",tooltip:"Display the alert log",da:['<i class="fa fa-fw fa-bell"></i>'],sort:140});N.H("viewAlerts",Mua);a.menu.H("viewAlerts",a.j,!1,a);c.R({eventType:"viewLog",label:"View Log",tooltip:"Display the application log",da:['<i class="fa fa-fw fa-terminal"></i>'],sort:150});a.menu.H("viewLog",a.j,!1,a);c.R(Jua);a.menu.H("displayClearLocalStorage",function(){Iua()})}
bY.prototype.j=function(a){switch(a.type){case "about":Cua("<about-modal></about-modal>");break;case "showTips":M.set("onboarding",{showOnboarding:!0});if(a=M.get("initialOnboarding"))a=Zw+a,$w(Ww.s(),a);break;case "viewLog":this.scope.$emit("viewLog");break;case "viewAlerts":this.scope.$emit("viewAlerts");break;case "help_video":a=M.get("helpVideoUrl");window.open(a);break;case "controlsHelp":ix("controlsHelp")?hx("controlsHelp"):fx({id:"controlsHelp",x:"center",y:"center",label:"Controls","show-close":!0,
"no-scroll":!1,"min-width":850,"min-height":750,"max-width":900,"max-height":800,modal:!1,width:850,height:750,icon:"fa fa-keyboard-o"},"controlshelp")}};function Nua(a){a&&!YX(a)&&N.dispatchEvent(new cw("toggleUI",a))}function Mua(){Nua("alerts")};function Oua(a){A.call(this,a)}w(Oua,A);function cY(a,b,c,d){this.l=a;this.A=b;this.B=c;this.j=null;this.I=d||"No results";this.o=this.g=this.u=null;this.G={}}w(cY,x);g=cY.prototype;g.J=function(){cY.C.J.call(this);this.g&&(this.g.init(),this.g=null);this.u&&(this.u.init(),this.u=null)};function Pua(a){var b={};a.A&&a.B&&a.B[a.A]&&Qua(b,a.B[a.A]);Zh(a.G,b,!0);return b}
function dY(a,b,c){var d=Pua(a);b||(b="*");b='"'+b+'"';var e=[];a.g=c;if(a.u)for(var f=a.B[a.A],h=0,k=f.length;h<k;h++)f[h].dispose();b=Rua(b);c||".*"!=b||a.j?(b=new RegExp(b,"gi"),eY(a,e),c&&c.init(),a.o={},a.Ws(b,e,a.l),a.pp(a.g,e),a.o=null,c&&c.init()):a.jm(e);a.FA(e);Sua(d,e,a.G);a.B[a.A]=e;a.u=c}function Tua(a,b){return xb(a.D(),b.D())}
function Rua(a){var b=".*";a=a.toLowerCase();if("*"!=a&&'"*"'!=a){b=a;var c=0,d=!1;a=[];if(b){b=b.trim();for(var e=0,f=b.length;e<f;e++){var h=b.charAt(e);'"'==h?(d&&e>c&&a.push(b.substring(c,e).trim()),d=!d,c=e+1):h.match(/\s/)&&!d&&(e>c&&a.push(b.substring(c,e).trim()),c=e+1)}e>c&&a.push(b.substring(c,e).trim())}b=[];c=0;for(d=a.length;c<d;c++)2<a[c].length&&b.push(Rb(a[c]));0===b.length&&b.push(Rb(a[0]));b="("+b.join("|")+")"}return b}
function fY(a,b){var c=Mb(a.ba(),b.ba());0===c&&(c=xb(a.D(),b.D()));return c}g.FA=function(a){if(this.g){a.sort(Tua);for(var b=0,c=a.length;b<c;b++){var d=a[b].na();d&&d.sort(fY)}}else a.sort(fY)};g.jm=function(a){if(0<this.l.length)for(var b=0,c=this.l.length;b<c;b++)a.push(this.l[b]);else eY(this,a)};function eY(a,b){var c=new ko;c.ga("noResults");c.Da(a.I);qo(c,!1);b.push(c)}
g.Ws=function(a,b,c){if(c)for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f&&!f.na()){var h=Uua(f);f.getParent()&&(h+=Uua(f.getParent()));if(h){if(a.test(h)){if(f.D()in this.o)continue;if(!this.j||this.j(f))0<b.length&&"noResults"==b[0].D()&&b.splice(0,1),this.g?Vua(this.g,f,b):b.push(f)}a.lastIndex=0}f.D()in this.o||(!this.g||this.j&&!this.j(f)||this.g.count(f),this.o[f.D()]=!0)}else this.Ws(a,b,f.na())}};function Uua(a){var b;a&&(a.qe?b=a.qe():a.na()||(b=a.ba()));return b||""}g.pp=function(){};
function Qua(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c];e.Cf&&(a[e.D()]=!e.collapsed,(e=e.na())&&Qua(a,e))}}function Sua(a,b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d],h=f.D();h in a&&(f.collapsed=!a[h],delete c[h]);(f=f.na())&&Sua(a,f,c)}};function gY(){C.call(this);this.log=Wua;this.o={};this.l=null;this.j=new ko;this.g=null}w(gY,C);xa(gY);var Wua=E.V("os.ui.metrics.MetricsManager");function hY(a,b){var c=b.D();if(!(c in a.o)){a.o[c]=b;try{var d=QR(b);a.g.R(d);a.g.na().sort(fY)}catch(e){}a.dispatchEvent(new Oua("metricsmanager:pluginadded",b))}}gY.prototype.Nj=function(a){this.l=a};function iY(){this.l="";this.u=0;this.g=this.j=this.o=this.A=null;"undefined"!==typeof document.hidden?this.g="hidden":"undefined"!==typeof document.mozHidden?this.g="mozHidden":"undefined"!==typeof document.webkitHidden?this.g="webkitHidden":"undefined"!==typeof document.msHidden&&(this.g="msHidden")}xa(iY);iY.prototype.lk=function(){var a=null;null!==this.g&&(a=document[this.g]);return a};
function Xua(){var a=iY.s();a.u++;document.title="("+a.u+") "+a.l;a.j||(a.j=Yd(document,"click",a.B,!1,a))}iY.prototype.B=function(){z(this.A);this.A=null;this.u=0;document.title=this.l;this.j&&(ee(this.j),this.j=null);this.o&&(this.o(),this.o=null)};var Yua=null;Q.directive("ngOnboarding",[function(){return{restrict:"E",scope:{enabled:"=",config:"=",steps:"=",onFinishCallback:"=",index:"=stepIndex"},replace:!0,templateUrl:"v1541734487/views/onboarding/ngonboarding.html",controller:jY,controllerAs:"ngOnboardCtrl"}}]);
function jY(a,b){this.l={overlay:!0,overlayOpacity:.6,horizontalAlign:"default",verticalAlign:"default"};this.v=a;this.o=b;this.g=null;this.stepCount=a.steps.length;a.$watch("index",this.u.bind(this));a.$on("$destroy",this.A.bind(this));this.j=new bw;this.j.H("resize",this.B,!1,this);if(a.steps.length&&!a.index)return a.index=0}jY.$inject=["$scope","$sce"];jY.prototype.A=function(){this.j&&(this.j.dispose(),this.j=null);this.v=this.o=null};
jY.prototype.next=function(){this.lastStep?this.close():this.v.index=this.v.index+1};jY.prototype.next=jY.prototype.next;jY.prototype.Jn=function(){this.v.index=this.v.index-1};jY.prototype.previous=jY.prototype.Jn;jY.prototype.close=function(){this.v.enabled=!1;kY(this,!1);if(this.v.onFinishCallback)this.v.onFinishCallback()};jY.prototype.close=jY.prototype.close;jY.prototype.iO=function(){M.set("onboarding.showOnboarding",!1);this.close()};jY.prototype.stopShowing=jY.prototype.iO;
function kY(a,b){$(".c-ng-onboarding__focus").removeClass("c-ng-onboarding__focus");$(".c-ng-onboarding__highlight").removeClass("c-ng-onboarding__highlight");b&&a.v.overlay&&(a.g.attachTo&&$(a.g.attachTo).addClass("c-ng-onboarding__focus"),a.g.focusOn&&$(a.g.focusOn).addClass("c-ng-onboarding__focus"),a.g.highlight&&$(a.g.highlight).addClass("c-ng-onboarding__highlight"))}jY.prototype.B=function(){["top","right","bottom","left","position"].forEach(function(a){this.v[a]=null},this);Zua(this)};
jY.prototype.u=function(a){if(null===a)this.v.enabled=!1,kY(this,!1);else{this.g=this.v.steps[this.v.index];this.lastStep=this.v.index+1===this.v.steps.length;this.showNextButton=this.v.index+1<this.v.steps.length;this.showPreviousButton=0<this.v.index;"title top right bottom left width height position".split(" ").forEach(function(a){this.v[a]=null},this);for(var b in this.l)this.v[b]=this.l[b];if(null!=this.v.config)for(b in this.v.config)this.v[b]=this.v.config[b];for(b in this.g)a=this.g[b],"description"==
b&&q(a)&&(a=a.join("")),this.v[b]=a;this.description=this.o.trustAsHtml(this.v.description);kY(this,!0);Zua(this)}};
function Zua(a){var b;a.v.position=a.g.position;if(a.g.attachTo){var c=$(a.g.attachTo);if(c&&0<c.length){if(!a.v.left&&!a.v.right){var d=b=null;var e=$(window).width(),f=$(".js-onboarding__popover").outerWidth();if("right"===a.v.position)b=c.offset().left+c.outerWidth()+15,d=e-c.offset().left+15,b+f>e&&d+f<e?(b="auto",a.v.position="left"):d=null;else if("left"===a.v.position)d=e-c.offset().left+15;else if("top"===a.v.position||"bottom"===a.v.position)b=c.offset().left;a.g.xOffset&&(null!==b&&(b+=
a.g.xOffset),null!==d&&(d-=a.g.xOffset));a.v.left=b;a.v.right=d}a.v.top||a.v.bottom||(b=d=null,e=$(window).height(),"left"===a.v.position||"right"===a.v.position?(d=c.offset().top,"center"==a.g.verticalAlign&&(d-=$(".js-onboarding__popover").outerHeight()/2,c=SVGElement&&c[0]instanceof SVGElement?c[0].getBBox().height:c.outerHeight(),d+=c/2)):"bottom"===a.v.position?(d=c.offset().top+c.outerHeight()+15,f=$(".js-onboarding__popover").outerHeight(),d+f>e&&0>=f-c.offset().top+15&&(d=null,a.v.position=
"top",b=e-c.offset().top+15)):"top"===a.v.position&&(b=e-c.offset().top+15),a.g.yOffset&&(null!==d&&(d+=a.g.yOffset),null!==b&&(b-=a.g.yOffset)),a.v.top=0>d?0:d,a.v.bottom=0>b?0:b)}else a.v.position="centered"}a.positionClass=a.v.position&&a.v.position.length?"bs-popover-"+a.v.position:null};Q.directive("onboarding",[function(){return{restrict:"E",scope:!0,template:"<div></div>",controller:lY,controllerAs:"onboardCtrl"}}]);function lY(a,b,c){this.enabled=!1;this.steps=null;this.index=0;this.config=null;this.onFinishCallback=this.A.bind(this);this.u=c;this.L=b;this.v=a;this.g=Ww.s();this.g.H("displayOnboarding",this.o,!1,this);this.j=[];a.$on("$destroy",this.B.bind(this))}lY.$inject=["$scope","$element","$compile"];var $ua=E.V("os.ui.onboarding.OnboardingCtrl");
lY.prototype.B=function(){this.g.M("displayOnboarding",this.o,!1,this);this.v=this.u=this.L=null};lY.prototype.o=function(a){E.ta($ua,"Received onboarding: "+a.title);this.enabled?this.j.push(a):ava(this,a)};
function ava(a,b){E.ta($ua,"Displaying onboarding: "+b.title);b.config&&(a.config=b.config);a.steps=b.l;a.enabled=!0;a.index=0;a.l=a.v.$new();b=a.u('<ng-onboarding enabled="onboardCtrl.enabled" steps="onboardCtrl.steps" config="onboardCtrl.config"on-finish-callback="onboardCtrl.onFinishCallback" step-index="onboardCtrl.index"></ng-onboarding>')(a.l);a.L.append(b)}
lY.prototype.A=function(){this.L.children().remove();this.l.$destroy();this.steps=this.config=this.l=null;this.enabled=!1;this.index=0;this.g&&this.g.isEnabled()||(this.j.length=0);0<this.j.length&&ava(this,this.j.shift())};function mY(a,b,c,d){this.scope=a;zk=b;this.g=null;a.path=c;a.appName=Wh(d);a.pluginsReady=!1;window.addEventListener("beforeunload",this.Vq.bind(this));P.s();Di=uj.s();kf=gY.s();b=Yua=iY.s();b.l=this.scope.appName;b.B();Zw=this.scope.path;Ww.s();lf=Rj.s();lf.Ua("load",this.kr,!1,this);a.$on("viewLog",this.jx.bind(this));a.$on("$destroy",this.destroy.bind(this))}mY.$inject=["$scope","$injector","rootPath","defaultAppName"];g=mY.prototype;
g.destroy=function(){this.Tr();window.removeEventListener("beforeunload",this.Vq.bind(this),!0);this.scope=null};
function bva(a){var b=M.get(["certUrls"]),c=M.get(["certPostUrl"]);if(b){a.g=new PX(b);od&&c&&(b=a.g,c+=(-1<c.indexOf("?")?"&":"?")+"nocache="+Ia(),b.u=c);a.g.H("error",a.Vm,!1,a);a.g.H("success",a.Vm,!1,a);a=a.g;a.o=0;c=a.A=0;for(b=a.K.length;c<b;c++)a.g[c]=new Dr,a.g[c].H("timeout",a.B,!1,a),a.g[c].H("success",a.B,!1,a),a.g[c].H("error",a.B,!1,a),a.g[c].B=!0,Fr(a.g[c],a.K[c]);a.u&&od&&(a.j=new Dr,a.j.H("timeout",a.I,!1,a),a.j.H("success",a.I,!1,a),a.j.H("error",a.I,!1,a),a.j.B=!0,Fr(a.j,a.u))}}
g.Vm=function(a){if("error"===a.type||"postError"===a.type){var b="Certificate Authority Issues",c=M.get(["caInstructions"]);c='Your browser does not have the proper certificate authorities installed correctly. Some features and base maps may fail to work properly. Please <a class="important-link" target="_blank" href="'+c+'">click here</a> for instructions on how to fix this.';"postError"===a.type&&(b="Internet Explorer Issues",c=M.get(["ieCertIssuesUrl"]),c='You appear to be using a version of Internet Explorer that has problems with getting data from cross-domain remote servers. Please <a class="important-link" target="_blank" href="'+
c+'">click here</a> for instructions on how to fix this.');gD({confirm:wa,prompt:c,noText:"",noIcon:"",windowOptions:{label:b,icon:"fa fa-frown-o",x:"center",y:"center",width:"350",height:"auto",modal:"true","no-scroll":"true",headerClass:"bg-warning u-bg-warning-text"}})}this.g.M("error",this.Vm,!1,this);this.g.M("success",this.Vm,!1,this)};
g.Sr=function(){M.get(["sessionStart"])||M.set(["sessionStart"],(new Date).getTime());M.get(["about","version"])||M.set(["about","version"],this.scope.version);nB=M.get(["proxyUrl"],nB);Rfa();bca();jA=M.get("mixedContent",!1);Bw=M.get("fileUrls",!1);Tfa();Ufa();Bua();bva(this);this.hA();var a=Caa().split(".");a=a&&1<a.length?Number(a[0]):0;var b=M.get("minPerformatFFVersion",38),c=M.get("deprecatedFirefoxMessage","<h3>You are using an unsupported version of the Firefox browser!</h3>For the best experience, please consider updating your browser.");
ec("Firefox")&&a<b&&($("body").addClass("c-main__slowBrowser"),rj(qj.s(),c,Rh,void 0,1,new C));zk.get("$rootScope").getUniqueString=function(){return Vb()}};g.kr=function(){var a=P.s(),b="UNKNOWN";pi?b="CHROME":od?b="IE":pd?b="EDGE":oi?b="FIREFOX":nd?b="OPERA":qi&&(b="SAFARI");var c=$ba||xd;c=c.split(".")[0];O(a,"browser."+(b+"."+c),1);this.scope.pluginsReady=!0;this.Cv()};g.Vq=wa;g.jx=wa;g.hA=wa;g.Tr=wa;g.Cv=wa;g.au=wa;g.Yt=wa;Q.directive("alerts",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/windows/alerts.html",controller:nY,controllerAs:"ctrl"}}]);function nY(a){this.v=a;this.alertArray=[];this.showAlertPopups=M.get(["showAlertPopups"],!0);tj||(tj=qj.s());tj.g.Mc().forEach(this.g,this);tj.H("alert",this.g,!1,this);a.$on("dispatch",cva);a.$on("$destroy",this.j.bind(this))}nY.$inject=["$scope","$timeout","$element"];nY.prototype.j=function(){tj.M("alert",this.g,!1,this);this.v=null};
nY.prototype.g=function(a){this.alertArray.unshift({msg:a.l,severity:a.u.toString(),time:a.getTime().xi(!0).slice(11)});R(this.v)};nY.prototype.Hh=function(){this.alertArray.length=0;tj.Hh()};nY.prototype.clearAlerts=nY.prototype.Hh;nY.prototype.uO=function(){this.showAlertPopups=!this.showAlertPopups;M.set(["showAlertPopups"],this.showAlertPopups)};nY.prototype.toggleAlertPopups=nY.prototype.uO;function cva(a,b){N.dispatchEvent(b)};function oY(a,b,c,d){cY.call(this,a,b,c,d)}w(oY,cY);oY.prototype.Ws=function(a,b){var c=this.um(),d=this.g,e=this.j;if(c)for(var f=0,h=c.length;f<h;f++){var k=!0,l=this.io(c[f]),m=l.qe();m&&(!a.test(m)||e&&!e(l)||(0<b.length&&"noResults"==b[0].D()&&b.splice(0,1),d?Vua(d,l,b,!0):(b.push(l),k=!1)),a.lastIndex=0);l.D()in this.o||(d&&d.count(l),this.o[l.D()]=!0);k&&l.dispose()}this.pp(d,b)};oY.prototype.um=function(){return[]};oY.prototype.io=function(){return new Yn};function pY(a,b,c){cY.call(this,[],a,b,c)}w(pY,oY);pY.prototype.um=function(){return JG(TG)};pY.prototype.io=function(a){var b=new RP;b.Bj(a);return b};pY.prototype.jm=function(a){var b=JG(TG);if(b&&0<b.length)for(var c=0,d=b.length;c<d;c++)a.push(new RP(b[c]));else eY(this,a)};function qY(){x.call(this);this.g=this.l=null}w(qY,x);g=qY.prototype;g.init=function(){this.l={};this.g={}};g.J=function(){qY.C.J.call(this);this.g=this.l=null};function Vua(a,b,c,d){null==d&&(d=!0);var e=a.ae(b),f;if(e)for(var h=0,k=e.length;h<k;h++){var l=e[h],m=b.clone();l in a.l?(f=a.l[l])&&f.R(m,void 0):(f=a.Le(l),a.l[l]=f,f.R(m,void 0),c.push(f));d&&(l in a.g?a.g[l].lm++:a.g[l]={lm:1,total:0},dva(a,l))}}
g.count=function(a){if(a=this.ae(a))for(var b=0,c=a.length;b<c;b++){var d=a[b];d in this.g?this.g[d].total++:this.g[d]={lm:0,total:1};dva(this,d)}};function dva(a,b){if(b in a.l&&b in a.g){var c=a.l[b];a=a.g[b];b=c.ba();b=b.replace(/ \(\d+( of \d+)?\)$/,"");b+=" ("+a.lm+(a.lm!=a.total?" of "+a.total:"")+")";c.Da(b)}}g.ae=function(){return null};g.Le=function(){return new Yn};ib(tG,"_sourceName");function rY(a){qY.call(this);this.j=a||!1}w(rY,qY);rY.prototype.ae=function(a){var b=[];if(a&&a instanceof PP)try{var c=a.me().get("_sourceName")}catch(d){}c?b.push(c):b.push("No Associated Source");return b};rY.prototype.Le=function(a){var b=new ko;b.ga(a);b.Da(a);qo(b,!1);b.collapsed=!this.j;return b};function eva(){return{restrict:"AE",replace:!0,scope:{layer:"=",btnText:"@"},template:'<button class="btn btn-primary btn-sm" title="Add a filter" ng-disabled="!addfilterctrl.canAdd()" ng-click="addfilterctrl.add()"><i class="fa fa-plus"></i> {{btnText}}</button>',controller:sY,controllerAs:"addfilterctrl"}}Q.directive("addfilter",[eva]);
function sY(a,b){this.L=b;this.scope=a;this.j=new px(new aw({type:"root",children:[]}));this.layers=[];this.g();lE.H("propertychange",this.g,!1,this);a.$on("$destroy",this.l.bind(this))}sY.$inject=["$scope","$element"];sY.prototype.l=function(){lE.M("propertychange",this.g,!1,this);z(this.j);this.j=void 0;this.L=this.scope=null};
sY.prototype.g=function(){if(this.j){var a=this.j.Ha();a.children&&(a.children=void 0);var b=WG(lE),c=[],d;for(d in b){var e=OC.rd(d);try{if(e){var f=e.Se();f&&c.push({id:d,label:b[d],columns:f})}}catch(h){}}this.scope.layer&&this.scope.layer.id&&ib(c,this.scope.layer);c.sort(fva);b=0;for(d=c.length;b<d;b++)e=c[b].id,a.R({label:c[b].label,eventType:e,za:this.o.bind(this,e)});this.layers=c}};
sY.prototype.add=function(){this.scope.layer&&this.scope.layer.id?this.o(this.scope.layer.id):this.j&&this.L&&this.j.open(void 0,{my:"left top",at:"left bottom",of:this.L})};sY.prototype.add=sY.prototype.add;sY.prototype.o=function(a){var b=eb(this.layers,function(b){return b.id==a});CE(a,b.columns,this.u.bind(this))};sY.prototype.u=function(a){a&&this.scope.$emit("filterComplete",a)};sY.prototype.WC=function(){return!!this.layers&&0<this.layers.length};sY.prototype.canAdd=sY.prototype.WC;
function fva(a,b){return Kb(a.label,b.label)};Q.directive("osaddfilter",[function(){var a=eva();a.controller=tY;return a}]);function tY(a,b){sY.call(this,a,b);L.s().H("addLayer",this.g,!1,this);L.s().H("removeLayer",this.g,!1,this);L.s().H("renameLayer",this.g,!1,this)}w(tY,sY);tY.$inject=["$scope","$element"];tY.prototype.l=function(){tY.C.l.call(this);L.s().M("addLayer",this.g,!1,this);L.s().M("removeLayer",this.g,!1,this);L.s().M("renameLayer",this.g,!1,this)};Q.directive("filterexport",[function(){return{restrict:"E",scope:{confirm:"=",mode:"="},templateUrl:"v1541734487/views/filter/filterexport.html",controller:uY,controllerAs:"filterexport"}}]);function uY(a,b,c){this.scope=a;this.element=b;this.mode=a.mode?a.mode:"active";this.fileName="filters.xml";this.confirm=a.confirm;c(function(){a.$emit("window.ready")})}uY.$inject=["$scope","$element","$timeout"];
function gva(a){fx({id:"filterexport",label:"Export Filters",icon:"fa fa-download",x:"center",y:"center",width:"400",height:"auto",modal:"true","show-close":"true"},'<filterexport mode="mode" confirm="confirm"></filterexport>',void 0,void 0,void 0,{confirm:a,mode:void 0})}uY.prototype.cancel=function(){kx(this.element)};uY.prototype.cancel=uY.prototype.cancel;uY.prototype.save=function(){this.confirm(this.fileName,this.mode);kx(this.element)};uY.prototype.save=uY.prototype.save;
function hva(a,b){if(0<b.length){var c=hG("filters","http://www.bit-sys.com/state/v2"),d=!1;$a(b,function(a){var b=a.gb(),e=b instanceof bC?b:OC.sb(b.filterId),k=cC(e);if(k){var l=OC.rd(e.type);l&&(a={active:"on"==a.getState()?"true":"false",filterType:"single",title:e.S(),description:e.qb()||"",type:l.uf(),match:1==b.filterGroup||void 0===b.filterGroup?"AND":"OR"},a=Z("filter",c,null,a),kG(k,a,"ogc","http://www.opengis.net/ogc"),d=!0)}});d?US(a,lG(c),"text/xml; subtype=FILTER"):rj(tj,"Something went wrong! We were unabled to export your filters.",
Qh)}else rj(tj,"No filters to export",Rh)};function vY(a){pE.call(this,a);this.filter&&(this.title='Remove filter "'+this.filter.S()+'"')}w(vY,pE);vY.prototype.Fa=function(){return qE(this)?(this.state="executing",this.remove(),this.state="success",!0):!1};vY.prototype.Db=function(){this.state="reverting";this.add();this.state="ready";return!0};Q.directive("copyfilterpicker",[function(){return{restrict:"E",replace:!0,scope:{models:"=",sourceLayerName:"=",sourceFilterKey:"="},templateUrl:"v1541734487/views/filter/copyfilterpicker.html",controller:wY,controllerAs:"copyFilterPickerCtrl"}}]);function wY(a,b){this.v=a;this.j=a.sourceFilterKey;this.duplicateText="Duplicate columns are not allowed.";b(this.Zb.bind(this));a.$on("$destroy",this.g.bind(this))}wY.$inject=["$scope","$timeout"];
wY.prototype.g=function(){this.v.copyFilterPickerForm&&this.v.copyFilterPickerForm.$setValidity("duplicate",!0);this.v=null};
wY.prototype.Zb=function(){for(var a=this.v.models,b=0<Ro(a,function(a){return a.selectedTargetColumn?a.selectedTargetColumn.name:Vb()}).length,c=!1,d="",e="",f=0,h=a.length;f<h;f++){var k=a[f];if(k.selectedTargetColumn){var l=k.targetFilterKey;d=k.selectedTargetColumn.name;l=l+"#"+d;if((l=AR(yR.s(),l))&&(l=l.Yd(this.j))&&l.column!==k.sourceColumnName){e=l.column;c=!0;break}}}c&&(this.inUseText="<b>"+d+"</b> is already associated with <b>"+e+"</b>.");this.v.copyFilterPickerForm.$setValidity("duplicate",
!b);this.v.copyFilterPickerForm.$setValidity("inUse",!c)};wY.prototype.validate=wY.prototype.Zb;Q.directive("copyfilter",[function(){return{restrict:"E",replace:!0,scope:{filterEntry:"=",layerId:"="},templateUrl:"v1541734487/views/filter/copyfilter.html",controller:xY,controllerAs:"copyFilterCtrl"}}]);
function xY(a,b,c){this.L=b;this.j=[];this.g=a.filterEntry;this.sourceFilterKey=gga(this.g.T())||"";this.sourceLayerName=OC.rd(this.g.T()).S();this.layers=[];this.unmappedColumns={};this.mappedColumns={};this.numLayersChecked=0;this.helpText="Some columns in the filter are not available in the selected layers. Please choose the appropriate columns for each.";iva(this);a.$on("checklist:change:layerlist",this.l.bind(this));a.$on("$destroy",this.o.bind(this));c(function(){a.$emit("window.ready")})}
xY.$inject=["$scope","$element","$timeout"];xY.prototype.o=function(){this.L=this.v=null};function iva(a){var b=WG(lE),c=[];for(e in b)if(Y.Ka(e)){var d=b[e];a.g.T()===e&&(d+=" (Current Layer)");c.push({id:e,label:d,enabled:!1})}c.sort(function(a,b){return Kb(a.label,b.label)});b=cC(a.g).querySelectorAll("PropertyName");var e=0;for(d=b.length;e<d;e++)ib(a.j,b[e].textContent);a.layers=c;a.l()}
xY.prototype.l=function(){var a=yR.s(),b=this.unmappedColumns;this.unmappedColumns={};this.mappedColumns={};var c=this.layers.filter(function(a){return a.enabled});this.numLayersChecked=c.length;for(var d=0,e=c.length;d<e;d++){var f=OC.rd(c[d].id);if(f){var h=f.uf();if(h!==this.sourceFilterKey){var k=f.Se();if(k){k=ab(k,hga);f=f.S();for(var l=0,m=this.j.length;l<m;l++){var n=this.j[l],p=AR(a,this.sourceFilterKey+"#"+n);if(p&&p.Yd(h)){var r=p.Yd(h),u=eb(k,function(a){return a.name===r.column});p=jva(f,
h,n,k,u,p);this.mappedColumns[h]?this.mappedColumns[h].push(p):this.mappedColumns[h]=[p]}else p=null,(u=b[h])&&(u=eb(u,function(a){return a.sourceColumnName===n&&a.targetFilterKey===h}))&&(p=u.selectedTargetColumn),p=jva(f,h,n,k,p),this.unmappedColumns[h]?eb(this.unmappedColumns[h],function(a){return a.sourceColumnName===n&&a.targetFilterKey===h})||this.unmappedColumns[h].push(p):this.unmappedColumns[h]=[p]}}}}}};
function kva(a){var b=yR.s(),c={},d;for(d in a.unmappedColumns)for(var e=a.unmappedColumns[d],f=0,h=e.length;f<h;f++){var k=e[f],l=k.sourceColumnName,m=k.targetFilterKey;k=k.selectedTargetColumn.name;var n=m+"#"+k,p=a.sourceFilterKey+"#"+l;c[m]=c[m]||[];n=AR(b,n)||AR(b,p);n||(n=new wR,n.ri(l),xR(n,a.sourceFilterKey,l),b.add(n));n.Yd(m)||xR(n,m,k);(k=n.Yd(a.sourceFilterKey))&&k.column!==l&&(Coa(n,k),xR(n,a.sourceFilterKey,l));ib(c[m],n)}b.jd();for(d in a.mappedColumns)for(e=a.mappedColumns[d],f=0,
h=e.length;f<h;f++)k=e[f],m=k.targetFilterKey,n=k.mapping,c[m]=c[m]||[],ib(c[m],n);return c}xY.prototype.MF=function(){return 0<gc(this.unmappedColumns)};xY.prototype.hasUnmappedColumns=xY.prototype.MF;xY.prototype.HF=function(){return 0<gc(this.mappedColumns)};xY.prototype.hasMappedColumns=xY.prototype.HF;xY.prototype.cancel=function(){kx(this.L)};xY.prototype.cancel=xY.prototype.cancel;
xY.prototype.finish=function(){for(var a=kva(this),b=[],c=this.layers.filter(function(a){return a.enabled}),d=0,e=c.length;d<e;d++){var f=c[d].id,h=OC.rd(f).uf(),k=this.g.clone(),l=a[h],m=this.g.sb();if(l&&m)for(var n=0,p=l.length;n<p;n++){var r=l[n],u=r.Yd(this.sourceFilterKey);r=r.Yd(h);m=m.replace(new RegExp("<PropertyName>"+u.column+"</PropertyName>","g"),"<PropertyName>"+r.column+"</PropertyName>")}k.Ub(f);k.ga(Vb());k.rg(m);f=new wE(k);b.push(f)}0<b.length&&(a=new TP,a.bc(b),a.title='Copied filter "'+
this.g.S()+'" to '+b.length+(1===b.length?" layer":" layers"),AE(OE.s(),a));kx(this.L)};xY.prototype.finish=xY.prototype.finish;function jva(a,b,c,d,e,f){return{name:a,targetFilterKey:b,sourceColumnName:c,targetColumns:d,selectedTargetColumn:e,mapping:f}};Q.directive("viewfilter",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/filter/viewfilters.html",controller:yY,controllerAs:"filters"}}]);function yY(a,b){this.scope=a;this.element=b;this.g=a.entry;this.root=null;this.title=this.g.S();this.description=this.g.qb();this.root=new dD(!0);if(b=cC(this.g))this.root.th(b.localName),lva(this,b,this.root);a.$on("$destroy",t(this.j,this))}yY.$inject=["$scope","$element"];
yY.prototype.j=function(){var a=angular.element("#removeMultiple");a&&kx(a);this.element=this.scope=null};function lva(a,b,c){b=kr(b);for(var d;b;){var e=a;var f=b;d=c;for(var h=!1,k=0;k<JC.length;k++)if(JC[k].matches(angular.element(f))){h=!0;break}h?(f=$C(f,e.scope.columns,!0),d.R(f),d.collapsed=!1):(e=new dD(!0),e.th(f.localName),d.R(e),f=e);d=sa(b.nextElementSibling)?b.nextElementSibling:lr(b.nextSibling);f instanceof dD&&lva(a,b,f);b=d}}yY.prototype.cancel=function(){kx(this.element)};
yY.prototype.cancel=yY.prototype.cancel;var zY=void 0;function AY(a){switch(a.type){case "query:importFile":YR();break;case "query:enterCoordinates":ZR();break;case "query:queryWorld":$R()}};function mva(){return{restrict:"AE",replace:!0,scope:{layerId:"=",updateImmediate:"=?",hideAdvanced:"@?",hideLayerChooser:"=?"},templateUrl:"v1541734487/views/query/combinator.html",controller:BY,controllerAs:"comboCtrl"}}Q.directive("combinator",[mva]);
function BY(a,b){this.L=b;this.scope=a;this.l=null;this.G="";this.A=new Fh(this.update,50,this);this.u=new Fh(this.apply,50,this);this.I={};this.o=!0===a.updateImmediate;if(b=!a.hideAdvanced)a:{b=lE;for(var c=WG(b),d=0,e=b.entries.length;d<e;d++){var f=b.entries[d],h=f.layerId;if("*"!==h&&h in c&&"*"!==f.areaId&&"*"!==f.filterId){b=!0;break a}}b=!1}a.advanced=b;b=CY;a.orders=b;a.order=M.get(["filter","groupBy"],b[b.length-1]);a.layer=null;a.layers=[];a.hideLayerChooser=!!a.hideLayerChooser;a.hasCountrySupport=
!1;a.$on("$destroy",this.B.bind(this));a.$on("dirty",this.Nw.bind(this));a.$on("edit",this.fI.bind(this));a.$on("view",this.xK.bind(this));a.$on("copy",this.KH.bind(this));a.$on("remove",this.QL.bind(this));a.$on("filterComplete",this.vI.bind(this));a.$on("combinator.setLayer",this.QJ.bind(this));this.o&&a.$on("combinator.apply",this.apply.bind(this));this.update();OC.H("filtersRefresh",this.g,!1,this);OC.H("propertychange",this.g,!1,this);TG.H("propertychange",this.g,!1,this);lE.H("propertychange",
this.g,!1,this)}BY.$inject=["$scope","$element"];var CY=["Area - Layer - Filter","Layer - Area - Filter","Layer - Filter - Area"];BY.prototype.apply=function(){nva(this);var a=ova(this),b=DY(this,"all"),c="all"!==b;c&&(a=a.filter(function(a){return a.layerId===b||"*"===a.layerId}));a=a.filter(function(a){return!("disabled"in a)});a=new jE(a,c,b,!0);this.j(a);O(P.s(),"filters.advanced.apply",1);this.scope.$emit("combinator.applycomplete")};BY.prototype.apply=BY.prototype.apply;
BY.prototype.close=function(){kx(this.L);O(P.s(),"filters.advanced.close",1)};BY.prototype.close=BY.prototype.close;BY.prototype.clear=function(){var a=this.scope.pivots;a&&a.Ga("off");this.Nw();O(P.s(),"filters.advanced.reset",1)};BY.prototype.clear=BY.prototype.clear;function DY(a,b){return(!a.scope.hideLayerChooser&&a.scope.layer?a.scope.layer.id:a.scope.layerId)||b}function ova(a){a.l||(a.l=lE.getEntries(null,null,null,!0));return a.l}
BY.prototype.B=function(){OC.M("filtersRefresh",this.g,!1,this);OC.M("propertychange",this.g,!1,this);TG.M("propertychange",this.g,!1,this);lE.M("propertychange",this.g,!1,this);z(this.A);this.A=null;z(this.u);this.u=null;var a=this.Ha();a&&a.dispose();this.L=this.scope=null};BY.prototype.j=function(a){a.Fa()};BY.prototype.g=function(a){var b=!0;a.G&&"featureHovered"==a.j&&(b=!1,a=a.o)&&(this.scope.selected=[],pva(this,a));b&&this.A.start()};
BY.prototype.update=function(a){var b=this.scope.advanced,c=CY[CY.length-2];c=b?this.scope.order:c;var d=c.split(" - ");if(c===this.G){var e=this.scope.pivots,f={};EY(this,e,f)}this.hs();nva(this);(e=this.Ha())&&e.dispose();e=lH(lE,d,void 0,void 0,!b,this.scope.hideLayerChooser?this.scope.layer:void 0);e=qva(this,e);this.scope.pivots=e;rva(this,a);f&&EY(this,e,f,!0,a);b||(a=e.na(),a&&0!=a.length||(e.Da("No layers"),qo(e,!1)));R(this.scope);M.set(["filter","groupBy"],c);this.G=c};
BY.prototype.update=BY.prototype.update;BY.prototype.RN=function(a){O(P.s(),"filters.advanced.selectLayer",1);this.update(a)};BY.prototype.selectLayer=BY.prototype.RN;BY.prototype.QN=function(a){O(P.s(),"filters.groupBy",1);this.update(a)};BY.prototype.selectGroupBy=BY.prototype.QN;
function pva(a,b,c){if(!c){c=a.Ha();var d=!0}var e=c.na();if(e)for(var f=0,h=e.length;f<h;f++)e[f].D()==b&&a.scope.selected.push(e[f]),pva(a,b,e[f]);d&&0<a.scope.selected.length&&(R(a.scope),c.dispatchEvent(new K("scrollRowIntoView",a.scope.selected[0].id)))}BY.prototype.NC=function(a){O(P.s(),"filters.advanced.advancedToggle",1);this.update(a)};BY.prototype.advancedToggle=BY.prototype.NC;function sva(a,b){return Kb(a.label,b.label)}g=BY.prototype;
g.QJ=function(a,b){this.scope&&b&&(a=eb(this.scope.layers,function(a){return a.id===b}))&&(this.scope.layer=a,this.update(!0))};
g.hs=function(){var a=WG(lE),b=[],c=this.scope.hideLayerChooser?this.scope.layerId:this.scope.layer||this.scope.layerId,d;for(d in a){var e=OC.rd(d);try{if(e){var f=e.Se();f&&(b.push({id:d,label:a[d],columns:f}),!c||c.id!==d&&c!==d||(c=b[b.length-1]))}}catch(h){}}b.sort(sva);b.unshift({id:null,label:"All"});c&&c.id||(c=b[0]);a=this.scope.layer?this.scope.layer.id===c.id:!0;this.scope.layers=b;this.scope.layer=c;a&&this.scope.$broadcast("layerChanged",this.scope.layer.id)};
function qva(a,b,c){c=void 0!==c?c:!0;var d=!1,e=DY(a);if(e){var f=b.na();if(f){for(var h=0,k=f.length;h<k;h++){var l=f[h],m=l.gb();if(m&&m.layerId===e){d=!0;if(c)c=b,l.getParent().removeChild(l),b=l,c.dispose();else for(h=f.length;h--;)f[h]!==l&&b.removeChild(f[h]);break}}if(!d)for(h=0,k=f.length;h<k;h++)qva(a,f[h],!1)}}return b}g.Ha=function(){return this.scope.pivots};function nva(a){var b=a.Ha();b&&(a.l=[],tva(b,a.l))}
function rva(a,b){var c=void 0;if(b&&(c=ova(a))&&c.length){b=lE.getEntries(null,null,null,!0);for(var d={},e={},f={},h=0,k=c.length;h<k;h++)d[c[h].layerId]=!0,e[c[h].areaId]=!0,f[c[h].filterId]=!0;h=0;for(k=b.length;h<k;h++){var l=b[h];l.layerId in d&&l.areaId in e&&l.filterId in f||c.push(l)}c=c.filter(function(a){return!("disabled"in a)})}c=dH(lE,c);(b=a.Ha())&&uva(b,c,void 0,a.scope.advanced)}g.Nw=function(){var a=DY(this,"all");a&&(this.I[a]=!0,this.o&&this.apply())};
g.fI=function(a,b,c){if(c&&(a=c[b?"filterId":"areaId"]))if(b){if(b=OC.sb(a)){var d=c.layerId;(c=(c=eb(this.scope.layers,function(a){return a.id==d}))&&c.columns||null)?CE(d,c,this.gs.bind(this),b):rj(tj,"This layer is missing required information to edit filters.",Rh)}}else(c=TG.get(a))&&XG(c)};
g.xK=function(a,b,c){if(c&&(a=c[b?"filterId":"areaId"]))if(b){if(b=OC.sb(a)){var d=c.layerId;(c=(c=eb(this.scope.layers,function(a){return a.id==d}))&&c.columns||null)?xga(d,c,this.gs.bind(this),b):rj(tj,"This layer is missing required information to edit filters.",Rh)}}else rj(tj,"Viewing areas is not allowed at this time.",Rh)};g.KH=function(a,b){b&&(a=b.filterId)&&(a=OC.sb(a))&&DE(a,b.layerId)};
g.QL=function(a,b,c){if(c){if(a=c[b?"filterId":"areaId"])if(b){if(b=OC.sb(a))b=new vY(b),this.j(b)}else if(b=TG.get(a))b=new MP(b),this.j(b);this.o&&(this.scope.$emit("dirty"),this.apply())}};g.toggle=function(a,b){if(!b){var c=!0;b=this.Ha()}if(b){b.getParent()&&(b.collapsed=a);var d=b.na();if(d)for(var e=0,f=d.length;e<f;e++)this.toggle(a,d[e])}c&&b.dispatchEvent(new K("children"));a?O(P.s(),"filters.advanced.collapseAll",1):O(P.s(),"filters.advanced.expandAll",1)};
function tva(a,b,c){if(a){var d=a.gb();c=c?vc(c):vva();if(d&&c)for(var e in d)c[e]=d[e];if("off"===a.getState()&&(c.disabled=!0,d=c.areaId,e=c.layerId,d&&"*"!==d&&e&&(d=lE.getEntries("*",d,"*"))&&d.length)){delete c.disabled;c.negate=!0;b.push(c);return}(a=a.na())&&a.length||b.push(c);if(a)for(d=0,e=a.length;d<e;d++)tva(a[d],b,c)}}function vva(){return{layerId:"*",areaId:"*",filterId:"*",includeArea:!0,filterGroup:!0}}
function uva(a,b,c,d){if(a){var e=c?vc(c):vva();if(c=a.gb()){for(var f in c)e[f]=c[f];f=e.layerId;for(var h=e.areaId,k=e.filterId,l=0,m=0,n=0,p=0,r=0,u=b.length;r<u;r++){var v=b[r];f&&f!==v.layerId&&"*"!==f||h&&h!==v.areaId&&"*"!==h||k&&k!==v.filterId&&"*"!==k||(h&&"*"!==h&&(n++,l+=v.includeArea?1:0),k&&"*"!==k&&(p++,m+=v.filterGroup?1:0))}n&&c.areaId&&(c.includeArea=.5<l/n);p&&c.filterId&&(c.filterGroup=.5<m/p)}if((c=a.na())&&c.length)for(a=0,f=c.length;a<f;a++)uva(c[a],b,e,d);else{var y=["layerId",
"areaId","filterId"];b=b.filter(function(a){if("negate"in a||"disabled"in a)return!1;for(var b=0,c=y.length;b<c;b++){var f=y[b];if((d||"*"!==e[f])&&a[f]!==e[f])return!1}return!0});a.Ga(b&&b.length?"on":"off")}}}
function EY(a,b,c,d,e){var f=e||!1;if(b){for(var h=[],k=b;k;)h.unshift(k.D()),k=k.getParent();h=h.join(".");d?h in c?b.collapsed=c[h]:a.o&&(h=b.gb(),!f&&h&&("filterId"in h&&"*"!=h.filterId||"areaId"in h&&"*"!=h.areaId)&&(b.Ga("on"),a.u.start())):c[h]=b.collapsed;if(b=b.na())for(f=0,h=b.length;f<h;f++)EY(a,b[f],c,d,e)}}g.Uf=function(a){if(a){var b=OC.sb(a.D());if(b){b=new vY(b);var c=new wE(a),d=new TP;d.bc([b,c]);d.title="Edit Filter "+a.S();this.j(d)}else a.l=!0,this.j(new wE(a))}};
g.vI=function(a,b){a.stopPropagation();this.gs(b)};g.gs=function(a){this.Uf(a);this.scope.$emit("dirty")};function wva(a,b,c){if(a)for(var d=0,e=a.length;d<e;d++){var f=a[d];if((c&&"on"==f.getState()||!c)&&f.gb()){var h=f.gb().filterId;void 0!==h&&"*"!=h&&b.push(f)}f.na()&&wva(f.na(),b,c)}}g.RL=function(a,b){var c=[];"selected"!=b?wva(this.scope.pivots.na(),c,"active"==b):c=ab(this.scope.selected,function(a){return a.gb()&&(a=a.gb().filterId,void 0!==a&&"*"!=a)?!0:!1});hva(a,c)};
g.dk=function(){var a=yE(OC,DY(this));return a&&0<a.length?!1:!0};BY.prototype.exportDisabled=BY.prototype.dk;BY.prototype.Bk=function(){O(P.s(),"filters.export",1);gva(this.RL.bind(this))};BY.prototype.launchExport=BY.prototype.Bk;BY.prototype.import=function(){YR({layerId:DY(this)})};BY.prototype["import"]=BY.prototype.import;BY.prototype.ur=function(){var a=this.L.find(".js-import-group"),b=zY;b&&a&&a.length&&b.open(void 0,{my:"left top+4",at:"left bottom",of:a})};BY.prototype.openImportMenu=BY.prototype.ur;Q.directive("osCombinator",[function(){var a=mva();a.controller=FY;a.templateUrl="v1541734487/views/windows/combinator.html";return a}]);function FY(a,b){BY.call(this,a,b);L.s().H("addLayer",this.g,!1,this);L.s().H("removeLayer",this.g,!1,this);L.s().H("renameLayer",this.g,!1,this);OC.H("exportFilter",this.Bk,!1,this)}w(FY,BY);FY.$inject=["$scope","$element"];
FY.prototype.hs=function(){if(this.scope.hideLayerChooser&&this.scope.layerId){var a=this.scope.layerId,b=[],c=null,d=OC.rd(a);if(d)try{var e=d.Se();e&&(c={id:a,label:d.S(),columns:e},b.push(c))}catch(f){}this.scope.layers=b;this.scope.layer=c}else FY.C.hs.call(this)};FY.prototype.B=function(){FY.C.B.call(this);L.s().M("addLayer",this.g,!1,this);L.s().M("removeLayer",this.g,!1,this);L.s().M("renameLayer",this.g,!1,this);OC.M("exportFilter",this.Bk,!1,this)};
FY.prototype.Uf=function(a){if(a){var b=OC.sb(a.D());if(b){b=new vY(b);a=new wE(a);var c=new TP;c.bc([b,a]);this.j(c)}else this.j(new wE(a))}};FY.prototype.j=function(a){AE(OE.s(),a)};
function xva(){angular.element('div[label="Advanced"].window').length?hx("filters"):fx({label:"Advanced",key:"filters",icon:"fa fa-filter",x:"center",y:"center",width:400,height:520,"show-close":!0,"no-scroll":!0,"min-width":300,"max-width":1E3,"min-height":200,"max-height":1E3},'<os-combinator layer-id="layerId" hide-layer-chooser="hideChooser"></os-combinator>',void 0,void 0,void 0,{layerId:void 0})}
function GY(a,b){var c="Filters",d=("filters-"+a).replace(/\s/g,"").replace(/[^\w]/g,"-");ix(d)?hx(d):(b?c+=" for "+b:(b=Bg(a))&&(c+=" for "+b),fx({id:d,label:c,key:d,icon:"fa fa-filter",x:"center",y:"center",width:400,height:520,"show-close":!0,"no-scroll":!0,"min-width":300,"max-width":1E3,"min-height":200,"max-height":1E3},'<os-combinator layer-id="layerId" hide-layer-chooser="hideChooser"></os-combinator>',void 0,void 0,void 0,{layerId:a,hideChooser:!0}))};function HY(a){qY.call(this);this.o=a||!1}w(HY,qY);HY.prototype.ae=function(a){var b=[],c=null;a&&("function"===typeof a.getTags?c=a.getTags():"function"===typeof a.getParent&&(a=a.getParent(),"function"===typeof a.getTags&&(c=a.getTags())));if(c){a=0;for(var d=c.length;a<d;a++)ib(b,"a"+c[a].toUpperCase())}0===b.length&&b.push("zNo Tags");return b};HY.prototype.Le=function(a){var b=new ko;b.ga(a);b.Da(a.substring(1));qo(b,!1);b.collapsed=!this.o;return b};function IY(a,b,c){this.element=b;this.scope=a;this.j=new Fh(this.u,c,this);this.title="";this.scope.term="";this.scope.views=[];this.l="None";this.g=this.scope.selected=null;this.scope.contextMenu=null;a.$on("$destroy",this.destroy.bind(this));a.$on("search",this.u.bind(this));a.$on("collapseChange",this.save.bind(this))}IY.$inject=["$scope","$element","searchDelay"];IY.prototype.destroy=function(){this.save();this.j.dispose();this.j=null;this.g.dispose();this.element=this.scope=this.g=null};
IY.prototype.save=function(){M.set(["groupBy",this.title,"openIds"],Pua(this.g))};IY.prototype.init=function(){var a=M.get(["groupBy",this.title,"openIds"],M.get([this.title,"openIds"],{}));this.g.G=a;a=M.get(["groupBy",this.title,"groupBy"],M.get([this.title,"groupBy"],this.l));this.scope.view=this.scope.views[a];this.search()};IY.prototype.search=function(){this.j.start()};IY.prototype.search=IY.prototype.search;IY.prototype.Wo=function(){this.scope.term="";this.search();this.element.find(".search").focus()};
IY.prototype.clearSearch=IY.prototype.Wo;IY.prototype.u=function(){var a=this.scope.term,b;for(b in this.scope.views)if(this.scope.views[b]===this.scope.view){M.set(["groupBy",this.title,"groupBy"],b);break}dY(this.g,a,-1==this.scope.view?null:this.scope.view);R(this.scope)};(function(){if(td){var a=/Windows NT ([0-9.]+)/;return(a=a.exec(bc))?a[1]:"0"}return sd?(a=/10[_.][0-9_.]+/,(a=a.exec(bc))?a[0].replace(/_/g,"."):"10"):Maa?(a=/Android\s+([^\);]+)(\)|;)/,(a=a.exec(bc))?a[1]:""):Naa||Oaa||Paa?(a=/(?:iPhone|CPU)\s+OS\s+(\S+)/,(a=a.exec(bc))?a[1].replace(/_/g,"."):""):""})();function JY(a,b,c){C.call(this);this.target=a;this.handle=b||a;this.K=c||new dU(NaN,NaN,NaN,NaN);this.l=Xq(a);this.g=new NA(this);id(this,Ga(z,this.g));this.deltaY=this.deltaX=this.G=this.B=this.screenY=this.screenX=this.clientY=this.clientX=0;this.o=!0;this.j=!1;Yd(this.handle,["touchstart","mousedown"],this.Vp,!1,this);this.u=yva}w(JY,C);var yva=ra.document&&ra.document.documentElement&&!!ra.document.documentElement.setCapture&&!!ra.document.releaseCapture;g=JY.prototype;g.kc=function(){return this.o};
g.Za=function(a){this.o=a};g.J=function(){JY.C.J.call(this);de(this.handle,["touchstart","mousedown"],this.Vp,!1,this);this.g.removeAll();this.u&&this.l.releaseCapture();this.handle=this.target=null};
g.Vp=function(a){var b="mousedown"==a.type;if(!this.o||this.j||b&&!Od(a))this.dispatchEvent("earlycancel");else if(this.dispatchEvent(new KY("start",this,a.clientX,a.clientY,a))){this.j=!0;b&&a.preventDefault();b=this.l;var c=b.documentElement,d=!this.u;this.g.H(b,["touchmove","mousemove"],this.pF,{capture:d,passive:!1});this.g.H(b,["touchend","mouseup"],this.Bm,d);this.u?(c.setCapture(!1),this.g.H(c,"losecapture",this.Bm)):this.g.H(b?b.parentWindow||b.defaultView:window,"blur",this.Bm);this.I&&this.g.H(this.I,
"scroll",this.iv,d);this.clientX=this.B=a.clientX;this.clientY=this.G=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;this.deltaX=this.target.offsetLeft;this.deltaY=this.target.offsetTop;this.A=cr(Vq(this.l).g)}};g.Bm=function(a,b){this.g.removeAll();this.u&&this.l.releaseCapture();this.j?(this.j=!1,this.dispatchEvent(new KY("end",this,a.clientX,a.clientY,a,zva(this,this.deltaX),Ava(this,this.deltaY),b||"touchcancel"==a.type))):this.dispatchEvent("earlycancel")};
g.pF=function(a){if(this.o){var b=1*(a.clientX-this.clientX),c=a.clientY-this.clientY;this.clientX=a.clientX;this.clientY=a.clientY;this.screenX=a.screenX;this.screenY=a.screenY;if(!this.j){var d=this.B-this.clientX,e=this.G-this.clientY;if(0<d*d+e*e)if(this.dispatchEvent(new KY("start",this,a.clientX,a.clientY,a)))this.j=!0;else{this.Xa()||this.Bm(a);return}}c=Bva(this,b,c);b=c.x;c=c.y;this.j&&this.dispatchEvent(new KY("beforedrag",this,a.clientX,a.clientY,a,b,c))&&(this.target.style.left=b+"px",
this.target.style.top=c+"px",this.dispatchEvent(new KY("drag",this,a.clientX,a.clientY,a,b,c)),a.preventDefault())}};function Bva(a,b,c){var d=cr(Vq(a.l).g);b+=d.x-a.A.x;c+=d.y-a.A.y;a.A=d;a.deltaX+=b;a.deltaY+=c;return new Uq(zva(a,a.deltaX),Ava(a,a.deltaY))}g.iv=function(a){var b=Bva(this,0,0);a.clientX=this.clientX;a.clientY=this.clientY;var c=b.x;b=b.y;this.target.style.left=c+"px";this.target.style.top=b+"px";this.dispatchEvent(new KY("drag",this,a.clientX,a.clientY,a,c,b))};
function zva(a,b){var c=a.K;a=isNaN(c.left)?null:c.left;c=isNaN(c.width)?0:c.width;return Math.min(null!=a?a+c:Infinity,Math.max(null!=a?a:-Infinity,b))}function Ava(a,b){var c=a.K;a=isNaN(c.top)?null:c.top;c=isNaN(c.height)?0:c.height;return Math.min(null!=a?a+c:Infinity,Math.max(null!=a?a:-Infinity,b))}function KY(a,b,c,d,e,f,h,k){A.call(this,a);this.clientX=c;this.clientY=d;this.u=e;this.left=sa(f)?f:b.deltaX;this.top=sa(h)?h:b.deltaY;this.l=!!k}w(KY,A);function LY(){C.call(this);this.G=[];this.Ca=[];this.I=[];this.sa=this.aa=this.U=!1}w(LY,C);g=LY.prototype;g.init=function(){if(!this.sa){for(var a,b=0;a=this.G[b];b++)this.U&&(Yd(a.element,"mousedown",a.bw,!1,a),this.O&&qD(a.element,this.O)),this.aa&&this.P&&qD(a.element,this.P);this.sa=!0}};
g.hv=function(a){var b=a.l?null:this.u;if(b&&b.j){var c=a.clientX,d=a.clientY,e=cr(Vq(this.A).g),f=c+e.x;e=d+e.y;var h;this.K&&(h=this.K(b.l,b.g,f,e));this.dispatchEvent(new MY("drag",this,this.g,b.j,b.l,b.L,c,d,f,e));b.j.dispatchEvent(new MY("drop",this,this.g,b.j,b.l,b.L,c,d,f,e,h,a.u))}this.dispatchEvent(new MY("dragend",this,this.g,b?b.j:void 0,b?b.l:void 0,b?b.L:void 0));de(this.l,"drag",this.dw,!1,this);de(this.l,"end",this.hv,!1,this);de(Xq(this.g.g).body,"selectstart",this.fB);for(a=0;b=this.I[a];a++)de(b.L,
"scroll",this.yu,!1,this),b.g=[];this.l.dispose();Ik(this.A);delete this.g;delete this.A;delete this.l;delete this.B;delete this.u};
g.dw=function(a){var b=cr(Vq(this.A).g);var c=new Uq(a.clientX+b.x,a.clientY+b.y);b=c.x;var d=c.y,e=this.u;this.dispatchEvent(new MY("drag",this,this.g,e?e.j:void 0,e?e.l:void 0,e?e.L:void 0,a.clientX,a.clientY,b,d));var f;if(e){this.K&&e.j&&(f=this.K(e.l,e.g,b,d));if(e.g.contains(c)&&f==this.ka)return;e.j&&(this.dispatchEvent(new MY("dragout",this,this.g,e.j,e.l,e.L)),e.j.dispatchEvent(new MY("dragout",this,this.g,e.j,e.l,e.L,void 0,void 0,void 0,void 0,this.ka)));this.ka=f;this.u=null}if(this.o.contains(c)){a:{for(var h=
0;e=this.B[h];h++)if(e.g.contains(c))if(e.o){if(e.o.j.contains(c)){c=e;break a}}else{c=e;break a}c=null}if((e=this.u=c)&&e.j)this.K&&(f=this.K(e.l,e.g,b,d)),b=new MY("dragover",this,this.g,e.j,e.l,e.L),b.O=f,this.dispatchEvent(b),e.j.dispatchEvent(new MY("dragover",this,this.g,e.j,e.l,e.L,a.clientX,a.clientY,void 0,void 0,f));else if(!e){this.j||(this.j=new Cva(this.o.clone()));a=this.j.g;a.top=this.o.top;a.right=this.o.right;a.bottom=this.o.bottom;a.left=this.o.left;for(f=0;e=this.B[f];f++)c=e.g,
e.o&&(e=e.o.j,c=new cU(Math.max(c.top,e.top),Math.min(c.right,e.right),Math.min(c.bottom,e.bottom),Math.max(c.left,e.left))),e=null,b>=c.right?e=c.right>a.left?c.right:a.left:b<c.left&&(e=c.left<a.right?c.left:a.right),h=null,d>=c.bottom?h=c.bottom>a.top?c.bottom:a.top:d<c.top&&(h=c.top<a.bottom?c.top:a.bottom),null===e||null===h||(Math.abs(e-b)>Math.abs(h-d)?h=null:e=null),null!==e?e<=b?a.left=e:a.right=e:null!==h&&(h<=d?a.top=h:a.bottom=h);this.u=10<=(a.right-a.left)*(a.bottom-a.top)?this.j:null}}};
g.fB=function(){return!1};g.yu=function(a){for(var b=0,c;c=this.I[b];b++)if(a.target==c.L){var d=c.o-c.L.scrollTop,e=c.l-c.L.scrollLeft;c.o=c.L.scrollTop;c.l=c.L.scrollLeft;this.j&&this.u==this.j&&(0<d?this.j.g.top+=d:this.j.g.bottom+=d,0<e?this.j.g.left+=e:this.j.g.right+=e);for(var f=0,h;h=c.g[f];f++)h=h.g,h.top+=d,h.left+=e,h.bottom+=d,h.right+=e,Dva(this,h)}this.l.iv(a)};
function Dva(a,b){1==a.B.length?a.o=new cU(b.top,b.right,b.bottom,b.left):(a=a.o,a.left=Math.min(b.left,a.left),a.right=Math.max(b.right,a.right),a.top=Math.min(b.top,a.top),a.bottom=Math.max(b.bottom,a.bottom))}g.J=function(){LY.C.J.call(this);for(var a,b=0;a=this.G[b];b++)this.U&&(de(a.element,"mousedown",a.bw,!1,a),this.O&&rD(a.element,this.O)),this.aa&&this.P&&rD(a.element,this.P),a.dispose();this.G.length=0};
function MY(a,b,c,d,e,f,h,k,l,m,n){A.call(this,a);this.u=b;this.l=c;this.K=e;this.clientX=h;this.clientY=k;this.O=n}w(MY,A);function NY(a,b){C.call(this);this.element=Yq(document,a);this.data=b;this.ya=null;this.j=new NA(this);id(this,Ga(z,this.j));this.g=null;if(!this.element)throw Error("Invalid argument");}w(NY,C);g=NY.prototype;g.getData=function(){return this.data};
g.bw=function(a){if(Od(a)){var b=a.target;b&&(this.j.H(b,"mousemove",this.cw,!1).H(b,"mouseout",this.cw,!1),this.j.H(Xq(b),"mouseup",this.AG,!0),this.g=b,this.l=new Uq(a.clientX,a.clientY))}};g.df=function(a){this.ya=a};
g.cw=function(a){var b=this.g;b="mouseout"==a.type&&a.target==b;if(5<Math.abs(a.clientX-this.l.x)+Math.abs(a.clientY-this.l.y)||b)if(this.j.removeAll(),b=this.ya,!b.g)if(b.g=this,0==b.dispatchEvent(new MY("dragstart",b,b.g,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,a)))b.g=null;else{var c=this.g;a:{var d=c.cloneNode(!0);for(var e=(c||document).getElementsByTagName("TEXTAREA"),f=(d||document).getElementsByTagName("TEXTAREA"),h=0;h<e.length;h++)f[h].value=e[h].value;switch(c.tagName){case "TR":d=
dr("TABLE",null,dr("TBODY",null,d));break a;case "TD":case "TH":d=dr("TABLE",null,dr("TBODY",null,dr("TR",null,d)));break a;case "TEXTAREA":d.value=c.value}}b.oa&&qD(d,b.oa);b.A=d;d=Xq(c);d.body.appendChild(b.A);e=b.A;f=gU(c);if(od){h=iU(c,"marginLeft");var k=iU(c,"marginRight"),l=iU(c,"marginTop");c=iU(c,"marginBottom");c=new cU(l,k,c,h)}else h=eU(c,"marginLeft"),k=eU(c,"marginRight"),l=eU(c,"marginTop"),c=eU(c,"marginBottom"),c=new cU(parseFloat(l),parseFloat(k),parseFloat(c),parseFloat(h));f.x-=
2*(c.left||0);f.y-=2*(c.top||0);e.style.position="absolute";e.style.left=f.x+"px";e.style.top=f.y+"px";c=new JY(e);b.l=c;b.l.I=b.Ia;Yd(b.l,"drag",b.dw,!1,b);Yd(b.l,"end",b.hv,!1,b);Yd(d.body,"selectstart",b.fB);b.B=[];for(d=0;c=b.Ca[d];d++)for(e=0;k=c.G[e];e++){f=b;h=c;l=[k.element];for(var m=0;m<l.length;m++){var n=l[m],p=n;var r=gU(p);p=Lqa(p);r=new cU(r.y,r.x+p.width,r.y+p.height,r.x);f.B.push(new Cva(r,h,k,n));Dva(f,r)}}b.o||(b.o=new cU(0,0,0,0));for(d=0;c=b.I[d];d++)c.g=[],c.l=c.L.scrollLeft,
c.o=c.L.scrollTop,e=gU(c.L),f=Lqa(c.L),c.j=new cU(e.y,e.x+f.width,e.y+f.height,e.x);for(d=0;f=b.B[d];d++)for(e=0;c=b.I[e];e++)nr(c.L,f.L)&&(c.g.push(f),f.o=c);b.u=null;for(d=0;c=b.I[d];d++)Yd(c.L,"scroll",b.yu,!1,b);b.l.Vp(a);a.preventDefault()}a.preventDefault()};g.AG=function(){this.j.removeAll();delete this.l;this.g=null};function Cva(a,b,c,d){this.g=a;this.j=b;this.l=c;this.L=d||null;this.o=null};function OY(a,b){LY.call(this);a=new NY(a,b);a.df(this);this.G.push(a)}w(OY,LY);function PY(a,b){A.call(this,"urlImported",b);this.l=a}w(PY,A);PY.prototype.l=null;PY.prototype.vf=function(){return this.l};function QY(){C.call(this);this.g={}}w(QY,C);xa(QY);Q.directive("dragDrop",[function(){return{restrict:"A",replace:!1,link:Eva,scope:{ddTargetId:"@",ddData:"=",ddStart:"=?",ddEnd:"=?",ddOver:"=?",ddOut:"=?",ddDrop:"=",ddMin:"=?"}}}]);function Eva(a,b){b=new Fva(a,b);a.$on("$destroy",b.destroy.bind(b))}
function Fva(a,b){this.v=a;this.ya=this.g=this.j=null;this.v.ddMin=a.ddMin?a.ddMin:50;this.j=new OY(b[0],a.ddData);this.g=new OY(a.ddTargetId);b=this.j;var c=this.g;b.Ca.push(c);c.aa=!0;b.U=!0;this.j.oa="c-dd-source__dragging";this.j.O="c-dd-source";this.g.P="c-dd-target";this.j.init();this.g.init();this.g.H("dragover",this.JC);this.g.H("dragout",this.Qs);this.g.H("drop",this.Qs);this.j.H("dragstart",this.kL,!1,this);this.j.H("dragend",this.jL,!1,this);a.ddOver&&this.g.H("dragover",this.VH,!1,this);
a.ddOut&&this.g.H("dragout",this.UH,!1,this);a.ddDrop&&this.g.H("drop",this.YH,!1,this)}g=Fva.prototype;g.destroy=function(){this.j.dispose();this.g.dispose();this.v=this.g=this.j=null};g.kL=function(a){Gva();var b=a.l.element;b&&(b=rr(b,"selectable"))&&(this.ya=$(b),this.ya.removeClass("selectable"),this.ya.addClass("unselectable"));this.v.ddStart&&this.v.ddStart(a.l.data,a)};
g.jL=function(a){Gva();this.ya&&(this.ya.removeClass("unselectable"),this.ya.addClass("selectable"),this.ya=null);this.v.ddEnd&&this.v.ddEnd(a.l.data,a)};function Gva(){if(document.selection&&document.selection.empty)try{document.selection.empty()}catch(b){}else if(window.getSelection){var a=window.getSelection();a&&a.removeAllRanges&&a.removeAllRanges()}}g.VH=function(a){this.v.ddOver(a.l.data,a)};g.UH=function(a){this.v.ddOut(a.l.data,a)};
g.YH=function(a){this.Qs(a);var b=new Uq(a.u.l.B,a.u.l.G),c=new Uq(a.clientX,a.clientY),d=b.x-c.x;b=b.y-c.y;Math.sqrt(d*d+b*b)<this.v.ddMin||this.v.ddDrop(a.l.data,a)};g.JC=function(a){qD(a.K.element,"c-dd-target__dragover")};g.Qs=function(a){rD(a.K.element,"c-dd-target__dragover")};Q.directive("urlDragDrop",[function(){return{restrict:"A",replace:!1,link:Hva,scope:{ddTargetId:"@",ddDrop:"=?",ddCapture:"@",ddElement:"@",ddText:"@?",enabled:"=?"}}}]);
function Hva(a,b){b=new RY(a,b);a.$on("$destroy",b.destroy.bind(b))}function RY(a,b){this.v=a;this.L=a.ddElement?$(a.ddElement):b;a.enabled=void 0==a.enabled?!0:a.enabled;this.L[0]&&(Yd(this.L[0],"drop",this.j,"true"===a.ddCapture,this),Yd(this.L[0],"dragover",this.g,!1,this),Yd(this.L[0],"dragleave",this.g,!1,this),this.v.ddText?this.L.attr("data-text",this.v.ddText):this.L.attr("data-text","Drag & Drop"))}
RY.prototype.g=function(a){this.v.enabled&&(a=a.l,a.preventDefault(),a.stopPropagation(),!document.querySelector(".modal-backdrop")&&a&&a.currentTarget&&("dragover"==a.type?qD(a.currentTarget,"c-dd-target__dragover"):void 0!==a.relatedTarget&&0==$(a.currentTarget).find(a.relatedTarget).length&&rD(a.currentTarget,"c-dd-target__dragover")))};
RY.prototype.j=function(a){if(this.v.enabled&&(a=a.l,a.preventDefault(),a.stopPropagation(),rD(a.currentTarget,"c-dd-target__dragover"),!document.querySelector(".modal-backdrop")))if(null!=this.v.ddDrop)this.v.ddDrop(a);else if(a.dataTransfer.files&&0<a.dataTransfer.files.length){var b=QY.s();b.j&&b.j(a.dataTransfer.files)}else{var c=null;try{c=a.dataTransfer.getData("text")||a.dataTransfer.getData("text/plain")||a.dataTransfer.getData("text/x-moz-text-internal")}catch(f){}if(c)if(wq.test(c)){a=QY.s();
var d="",e="";for(b in a.g)Qb(c,b)&&(e=b,b=c.slice(0,c.indexOf(b))+b,d=c.replace(b,""));d.length||e.length?1==a.g[e].length?a.g[e][0].call(a,d):1<a.g[e].length&&a.dispatchEvent(new PY({url:c,title:"Handle URLs",handlers:a.g[e]})):a.l&&a.l(c)}else b=QY.s(),b.o&&b.o(c)}};RY.prototype.destroy=function(){de(this.L[0],"drop",this.j,"true"===this.v.ddCapture,this);de(this.L[0],"dragover",this.g,!1,this);de(this.L[0],"dragleave",this.g,!1,this);this.L=this.v=null};Q.directive("areas",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/areas.html",controller:SY,controllerAs:"areasCtrl"}}]);function SY(a,b){IY.call(this,a,b,25);this.title="areas";try{this.scope.contextMenu=SP}catch(c){}this.scope.views=Iva;this.g=new pY("areas",this.scope);this.onDrop=this.A.bind(this);TG.H("propertychange",this.o,!1,this);this.init()}w(SY,IY);SY.$inject=["$scope","$element"];var Iva={None:-1,Tag:new HY(!1),Source:new rY(!1)};
SY.prototype.destroy=function(){TG.M("propertychange",this.o,!1,this);SY.C.destroy.call(this)};SY.prototype.xq=function(){xva()};SY.prototype.launch=SY.prototype.xq;SY.prototype.ur=function(){var a=this.element.find(".js-import-group"),b=zY;b&&a&&a.length&&b.open(void 0,{my:"left top+4",at:"left bottom",of:a})};SY.prototype.openImportMenu=SY.prototype.ur;SY.prototype.dk=function(){return this.scope.selected?0==this.scope.selected.length||"No results"==this.scope.selected[0].ba():!0};
SY.prototype.exportDisabled=SY.prototype.dk;SY.prototype.Wf=function(){var a=this.scope.selected.map(function(a){return a instanceof RP&&(a=a.me())?Toa(a):null}).filter($u);tna(a)};SY.prototype["export"]=SY.prototype.Wf;SY.prototype.import=function(a){YR(void 0,a)};SY.prototype["import"]=SY.prototype.import;SY.prototype.o=function(a){a&&"toggle"!==a.j&&this.search()};SY.prototype.A=function(a){a.dataTransfer&&a.dataTransfer.files&&th(Ew(a.dataTransfer.files[0]),this.import.bind(this),this.B.bind(this))};
SY.prototype.B=function(){rj(tj,"Could not handle file with drag and drop. Try again or use the browse capability.")};lw("text/xml; subtype=COLUMNMAPPING",SS(/^columnmappings$/i,null),0,"text/xml");function TY(){dT.call(this);this.j=!1;this.log=Jva}w(TY,dT);var Jva=E.V("os.ui.column.mapping.ColumnMappingImportUI");
TY.prototype.Jb=function(a){var b=JG(yR.s());b&&0<b.length?gD({confirm:this.l.bind(this,a),prompt:"You are importing a new set of Column Associations. This action will <b>wipe out all existing Column Associations and replace them with the imported set</b><br><br>Are you sure you want to proceed?",yesText:"Clear and Import",windowOptions:{x:"center",y:"center",label:"Import Column Associations","show-close":!1,"no-scroll":!0,width:400,height:"auto",icon:"fa fa-sign-in"}}):this.l(a)};
TY.prototype.l=function(a){var b=[];if((a=a.Pb())&&"string"===typeof a)try{var c=Wx(a),d=kr(c).querySelectorAll("columnMapping");c=0;for(var e=d.length;c<e;c++){var f=Xx(d[c]),h=new wR;h.restore({columnMapping:f});b.push(h)}}catch(k){E.error(this.log,"Failed to parse Column Associations! Stack: "+k.stack),rj(tj,"There was a problem importing the Column Associations. Please see the log for more details.",Qh)}else E.hb(this.log,"No content was passed to the import process."),rj(tj,"We didn't find any data to import in that file! No changes were made to your Column Associations.",
Rh);0<b.length&&(d=yR.s(),d.clear(),Foa(d,b),b="Successfully imported <b>"+b.length+"</b> Column "+(1===b.length?"Association.":"Associations."),rj(tj,b,Sh))};Q.directive("columnmappingnodeui",[function(){return{restrict:"E",replace:!0,template:'<div><span ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit the column mapping"></i></span><span ng-click="nodeUi.tryRemove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the column mapping"></i></span></div>',controller:UY,controllerAs:"nodeUi"}}]);function UY(a){this.v=a}UY.$inject=["$scope","$element"];
UY.prototype.Al=function(){var a="Are you sure you want to remove the <b>"+this.v.item.g.getName()+"</b> column association from the application? <b>This action cannot be undone.</b>";gD({confirm:this.g.bind(this),prompt:a,yesText:"Remove",yesIcon:"fa fa-trash-o",yesButtonClass:"btn-danger",windowOptions:{label:"Remove Column Association",icon:"fa fa-trash-o",x:"center",y:400,width:325,height:"auto",modal:"true","no-scroll":"true",headerClass:"bg-danger u-bg-danger-text"}})};
UY.prototype.tryRemove=UY.prototype.Al;UY.prototype.g=function(){var a=this.v.item.g;yR.s().remove(a)};UY.prototype.Rc=function(){Kva(this.v.item.g)};UY.prototype.edit=UY.prototype.Rc;function VY(){ko.call(this);this.g=null;qo(this,!1);this.j="<columnmappingnodeui></columnmappingnodeui>"}w(VY,ko);function Lva(a,b){b!==a.g&&a.Bc(null);if(a.g=b){var c=b.getColumns();a.Da(b.getName());b=0;for(var d=c.length;b<d;b++){var e=c[b],f=e.layer;e=e.column;var h=e+" ("+f+")",k=new ko;-1!==f.indexOf("!!")&&(f=f.split("!!"),h="<b>"+e+"</b>  ("+f[0]+" - "+f[1]+")");k.Da(h);qo(k,!1);a.R(k)}}}VY.prototype.ba=function(){return this.g?this.g.getName()||"New Association":VY.C.ba.call(this)};
VY.prototype.nc=function(a){VY.C.nc.call(this,a);Lva(this,a.g)};Q.directive("columnmappingexport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/column/mapping/columnmappingexport.html",controller:WY,controllerAs:"cmExportCtrl"}}]);function WY(a,b){this.v=a;this.L=b;this.j=a.mappings;this.g=a.selectedMappings;this.showExportType=0<this.g.length;this.exportType="all";this.persister=null;this.persisters=Mva;b=new TS;this.persister=this.persisters[b.ba()]=b;this.v.$emit("window.ready");a.$on("$destroy",this.l.bind(this))}
WY.$inject=["$scope","$element"];var Mva={};WY.prototype.l=function(){this.L=this.v=null};WY.prototype.accept=function(){for(var a=this.persister,b=this.v.title+".xml",c="all"===this.exportType?this.j:this.g,d="<columnMappings>",e=0,f=c.length;e<f;e++)d+=Doa(c[e]);a.save(b,d+"</columnMappings>","text/xml; subtype=COLUMNMAPPING");this.close()};WY.prototype.accept=WY.prototype.accept;WY.prototype.close=function(){kx(this.L)};WY.prototype.close=WY.prototype.close;function XY(){ko.call(this);this.initialLayer=this.getFn=this.mapping=this.model=null;qo(this,!1)}w(XY,ko);XY.prototype.nc=function(a){XY.C.nc.call(this,a);this.model=a.model;this.mapping=a.mapping;this.getFn=a.getFn;this.initialLayer=a.initialLayer};Q.directive("mappingexpression",[function(){return{restrict:"E",replace:!0,scope:{node:"="},templateUrl:"v1541734487/views/column/mapping/mappingexpression.html",controller:YY,controllerAs:"exprCtrl"}}]);
function YY(a,b,c){this.v=a;this.L=b;this.Na=c;b=a.node;this.g=b.model;this.layer=b.initialLayer;this.columns=this.column=null;this.layer&&Nva(this,this.layer);this.Na(t(function(){var a=this.L.find(".js-mapping-expression__column-select");a.select2({placeholder:"Select column..."});this.L.find(".select2-choice").attr("tabIndex",0);this.columns||a.select2("disable")},this));a.$on("layerpicker.layerselected",this.o.bind(this));a.$watch("exprCtrl.column",this.l.bind(this))}
YY.$inject=["$scope","$element","$timeout"];YY.prototype.o=function(a,b){b&&Nva(this,b)};YY.prototype.l=function(a){a&&(this.g.column=a.name);this.v.$emit("columnpicker.columnselected")};function Nva(a,b){var c=b.ze();a.g.layer=ZY(b);a.v.node.initialLayer=b;c?(b=c.getColumns(),Ova(a,b)):(a=a.j.bind(a),b.K=a,b.zk())}YY.prototype.j=function(){var a=this.layer.ze();a&&Ova(this,a.getColumns())};
function Ova(a,b){var c=a.g.column;a.column=null;b=b.filter(function(a){if("string"!==a.type&&"decimal"!==a.type)return!1;a.name===c&&(this.column=a);return!0},a);a.columns=b;a.g.column=null==a.column?null:a.g.column;a.Na(t(function(){this.L.find(".js-mapping-expression__column-select").change().select2("enable")},a))}YY.prototype.UD=function(a){a=Y.Ka(a.text);var b="";if(a){b=a.S();var c=a.Ja();c=c?ef(c):"white";b='<i class="fa fa-bars mr-1" style="color:'+c+'"></i>'+b;a.rb()&&(b+=" ("+a.rb()+")")}return b};
YY.prototype.formatter=YY.prototype.UD;Q.directive("columnmodeltree",[function(){var a=WD();a.controller=$Y;return a}]);function $Y(a,b,c){XD.call(this,a,b,c)}w($Y,XD);$Y.$inject=["$scope","$element","$compile"];$Y.prototype.vt=function(){return'<mappingexpression node="item"></mappingexpression>'};$Y.prototype.hi=function(){var a=$Y.C.hi.call(this);a.rowHeight=30;a.enableTextSelectionOnCells=!0;return a};Q.directive("columnmappingform",[function(){return{restrict:"E",replace:!0,scope:{columnMapping:"="},templateUrl:"v1541734487/views/column/mapping/columnmappingform.html",controller:aZ,controllerAs:"cmFormCtrl"}}]);
function aZ(a,b,c){this.v=a;this.L=b;this.Na=c;this.l=[];this.g=a.columnMapping;this.tree=[];this.duplicateLayerText="";this.notEnoughLayerText="A column association must include at least 2 different columns.";this.otherCMText="";Pva(this);c(t(function(){this.L.find('input[name="name"]').focus()},this));a.$on("layerpicker.layerselected",this.j.bind(this));a.$on("columnpicker.columnselected",this.j.bind(this));a.$on("columnmapping.remove",this.u.bind(this));a.$on("$destroy",this.o.bind(this))}
aZ.$inject=["$scope","$element","$timeout"];aZ.prototype.o=function(){this.Na=this.L=this.v=null};function Pva(a){for(var b=Qw(Y),c=a.g.getColumns(),d={},e=0,f=b.length;e<f;e++){var h=b[e];try{!0===h.u&&(d[ZY(h)]=h,a.l.push(h))}catch(k){}}if(0<c.length)for(b=0,e=c.length;b<e;b++)f=c[b],h=Qva(a,f),h.initialLayer=d[f.layer],a.tree.push(h);else a.add(),a.add();a.Na(a.j.bind(a))}
aZ.prototype.add=function(){xR(this.g,"","");var a=this.g.getColumns();a=Qva(this,a[a.length-1]);this.tree.push(a);this.tree=this.tree.slice()};aZ.prototype.add=aZ.prototype.add;aZ.prototype.u=function(a,b){a=this.tree.indexOf(b);-1!==a&&(this.tree.splice(a,1),this.tree=this.tree.slice(),R(this.v));Coa(this.g,b.model);this.j()};
aZ.prototype.j=function(){this.duplicateLayerText="";var a=this.g.getColumns(),b=Ro(a,function(a){return a.layer||Vb()}),c=1<a.length&&0<b.length,d=1<a.length;c&&(this.duplicateLayerText="Duplicate layers are not supported (<b>"+eb(this.tree,function(a){return ZY(a.initialLayer)===b[0].layer}).initialLayer.S()+"</b>)");a=eb(a,function(a){return!a.layer||0==a.layer.length||!a.xe||0==a.xe.length});this.v.cmForm.$setValidity("duplicateLayer",!c);this.v.cmForm.$setValidity("notEnoughLayers",d);this.v.cmForm.$setValidity("incompleteLayers",
null==a)};function Qva(a,b){var c=new XY;c.model=b;c.mapping=a.g;a=a.Mh.bind(a);c.getFn=a;return c}aZ.prototype.Zb=function(){this.otherCMText="";for(var a=this.g.getColumns(),b=this.g.D(),c=!0,d=0,e=a.length;d<e;d++){var f=a[d],h=zR(f);if((h=AR(yR.s(),h))&&h.D()!==b){c=!1;this.otherCMText="One of your columns (<b>"+f.column+"</b>) is currently in use on the <b>"+h.getName()+"</b> column association.";break}}this.v.cmForm.$setValidity("reusedColumn",c)};aZ.prototype.validate=aZ.prototype.Zb;
aZ.prototype.confirm=function(){var a=yR.s();a.remove(this.g.D());a.add(this.g);this.cancel()};aZ.prototype.confirm=aZ.prototype.confirm;aZ.prototype.cancel=function(){kx(this.L)};aZ.prototype.cancel=aZ.prototype.cancel;aZ.prototype.Mh=function(){return this.l};aZ.prototype.getLayersFunction=aZ.prototype.Mh;function bZ(){uo.call(this);KM(GM.s(),"text/xml; subtype=COLUMNMAPPING",new TY);this.Da("Column Associations");this.fb("Configure your column associations");this.vb(["column","mapping","data"]);this.yc("fa fa-columns");this.ld="columnmappingsettings"}w(bZ,uo);bZ.prototype.D=function(){return"columnMappingSettings"};Q.directive("columnmappingsettings",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/column/mapping/columnmappingsettings.html",controller:cZ,controllerAs:"cmCtrl"}}]);
function cZ(a,b){this.v=a;this.g=yR.s();this.g.H("mappingsChange",this.j,!1,this);this.Na=b;this.mappingTree=[];a.$on("$destroy",this.l.bind(this));this.j()}cZ.$inject=["$scope","$timeout"];cZ.prototype.l=function(){this.g.M("mappingsChange",this.j,!1,this);this.Na=this.v=this.g=null};cZ.prototype.j=function(){var a=JG(this.g);a=a.sort(Rva);this.mappingTree=a.map(Sva);R(this.v);this.Na(t(function(){this.v.$broadcast("slickgrid.invalidateRows")},this))};cZ.prototype.create=function(){Kva()};
cZ.prototype.create=cZ.prototype.create;cZ.prototype.Wf=function(){var a=this.v.selected,b=JG(yR.s()),c=[];if(0<a.length)for(var d=0,e=a.length;d<e;d++)if(a[d]instanceof VY)ib(c,a[d].g);else{var f=a[d].getParent();f instanceof VY&&ib(c,f.g)}fx({label:"Export Column Associations",icon:"fa fa-download",x:"center",y:"center",width:400,height:"auto","show-close":"true",modal:"true"},"<columnmappingexport></columnmappingexport>",void 0,void 0,void 0,{mappings:b,selectedMappings:c,yesButtonClass:"btn-danger"})};
cZ.prototype["export"]=cZ.prototype.Wf;cZ.prototype.import=function(){var a=new NM;PM(a,new Mw("importFile"));OM(a)};cZ.prototype["import"]=cZ.prototype.import;
function Kva(a){if(ix("columnmappingform"))hx("columnmappingform");else{var b={id:"columnmappingform",x:"center",y:"center",label:(a?"Edit":"Create")+" Column Association","show-close":!0,"no-scroll":!0,modal:!0,width:800,height:400,icon:"fa fa-columns"};a={columnMapping:a?a.clone():new wR};fx(b,'<columnmappingform column-mapping="columnMapping"></columnmappingform>',void 0,void 0,void 0,a)}}function Sva(a){var b=new VY;Lva(b,a);return b}function Rva(a,b){return xb(a.getName(),b.getName())};var Tva=void 0;function WU(){C.call(this);this.g=[];this.j=[]}w(WU,C);xa(WU);var lQ=WU.s(),dZ=E.V("os.ui.file.ExportManager");function eZ(a,b){if(q(b))for(var c=0,d=b.length;c<d;c++)eZ(a,b[c]);else-1==a.g.indexOf(b)?(a.g.push(b),a.g.sort(Uva)):E.ta(dZ,"Attempted adding duplicate export method: "+b.ba())}function sna(a){for(var b=[],c=0,d=a.g.length;c<d;c++)b.push(new a.g[c].constructor);return b}
function Vva(a,b){if(q(b))for(var c=0,d=b.length;c<d;c++)Vva(a,b[c]);else-1==a.j.indexOf(b)?(a.j.push(b),a.j.sort(Uva)):E.ta(dZ,"Attempted adding duplicate persistence method: "+b.ba())}function mQ(a){for(var b=[],c=0,d=a.j.length;c<d;c++)b.push(new a.j[c].constructor);return b}
function nQ(a,b,c,d,e){var f=lQ;if(null==a||0==a.length)E.error(dZ,"No data was supplied for the export.");else if(null!=d&&null!=e){d.setItems(a);d.dt(b);d.ri(c);try{d.nb()?(d.H("complete",Ga(f.l,d,e),!1,f),d.H("error",f.o,!1,f),d.ad()):(d.ad(),f.l(d,e))}catch(h){c='Failed exporting "'+c+'" to '+d.ba()+": "+h.message,rj(tj,c,Qh,dZ),d.dispose()}}else 0<f.g.length&&0<f.j.length?a&&0<a.length&&(ix("exportDialog")?hx("exportDialog"):(d={options:{ek:d,fields:b,items:a,dl:e,title:c},exporters:sna(f),persisters:mQ(f)},
fx({id:"exportDialog",label:"Export: "+c,icon:"fa fa-download",x:"center",y:"center",width:"400","min-width":"400","max-width":"800",height:"auto","min-height":"250","max-height":"600",modal:"true","show-close":"true"},"<exportdialog></exportdialog>",void 0,void 0,void 0,d))):0==f.g.length?E.error(dZ,'There are no export methods defined. Can not export "'+c+'".'):0==f.j.length&&E.error(dZ,'There are no persistence methods defined. Can not export "'+c+'".')}
WU.prototype.l=function(a,b){var c=a.qg,d=a.getName(),e="."+a.getExtension();a.dispose();c&&d?(!Fb(d,e)&&1<e.length&&(d+=e),b.save(d,c,a.pk())):(a='Failed exporting "'+a.getName()+'" to '+a.ba()+". Exporter result was empty.",rj(tj,a,Qh,dZ))};WU.prototype.o=function(a){z(a.target)};function Uva(a,b){return xb(a.ba(),b.ba())};Q.directive("anytypeimport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/file/anytypeimport.html",controller:fZ,controllerAs:"anytype"}}]);function fZ(a,b){this.v=a;this.L=b;this.v.isZip=this.v.file?yw(this.v.file.Pb()):!1;this.v.$emit("window.ready");this.v.$on("destroy",t(function(){this.L=this.v=null},this))}fZ.$inject=["$scope","$element"];
fZ.prototype.accept=function(){try{this.v["import"].Jb(this.v.file,this.v.config)}catch(a){rj(qj.s(),"Error loading file: <b>"+this.v.file.getFileName()+"</b>",Qh)}this.close()};fZ.prototype.accept=fZ.prototype.accept;fZ.prototype.close=function(){kx(this.L)};fZ.prototype.close=fZ.prototype.close;function gZ(){this.j=!1}w(gZ,cT);
gZ.prototype.Jb=function(a,b){var c=lka(),d=[];$a(c,function(a){a.S()&&(a.title=a.S(),d.push(a))});wb(d,function(a,b){return a.S()>b.S()?1:0});if(0<d.length)b={importers:d,file:a,config:b},a=a.Pb(),a={label:a instanceof ArrayBuffer&&yw(a)?"Import Zip":"Choose Import Method",icon:"fa fa-cloud-download",x:"center",y:"center",width:"450",height:"auto","show-close":"true","no-scroll":"true"},fx(a,"anytypeimport",void 0,void 0,void 0,b);else throw Error("No Importers to select from");};function hZ(){}var Wva=E.V("os.ui.file.FileXTHandler");hZ.prototype.di=function(){return["file.load"]};hZ.prototype.ad=function(a,b){a=a.url;"file.load"===b&&(Eb(a,"local://")?uh(hB(new eB("com.bitsys.db",2),a),this.j,this.g,this):(N.dispatchEvent(new Mw("importUrl",a)),Xua()))};hZ.prototype.j=function(a){fB(new eB("com.bitsys.db",2),a);N.dispatchEvent(new Mw("importFile",a));Xua()};
hZ.prototype.g=function(a){var b=[];if("string"===typeof a){var c=400;b.push(a)}else c=404,b.push("File not found in local storage!");E.error(Wva,b.toString()+" Status code: "+c)};Q.directive("importdialog",[function(){return{restrict:"E",replace:!0,scope:{method:"=",manager:"=?",hideCancel:"=?",confirmText:"=?",onClose:"=?"},templateUrl:"v1541734487/views/file/importdialog.html",controller:iZ,controllerAs:"importdialog"}}]);
function iZ(a,b){this.v=a;this.L=b;this.j=!1;this.url=this.file=null;this.hideCancel=a.hideCancel||!1;this.loading=this.fileChosen=!1;a.confirmText=a.confirmText||"Next";this.g=dr("INPUT",{type:"file",name:"file","class":"d-none"});Yq(document,"js-window__container").appendChild(this.g);Yd(this.g,"change",this.Uy,!1,this);this.L.find('input[name="url"]').focus();a.$emit("window.ready");a.$on("$destroy",this.l.bind(this))}iZ.$inject=["$scope","$element"];var Xva=E.V("os.ui.file.ImportDialogCtrl");
iZ.prototype.l=function(){de(this.g,"change",this.Uy,!1,this);Ik(this.g);this.file=this.g=null;this.j||this.v.method&&this.v.method.dispatchEvent("cancel");this.L=this.v=null};iZ.prototype.accept=function(){if(this.v.method){this.loading=!0;var a=this.v.method;if(this.fileChosen){if(this.file){var b=Ew(this.file);b&&uh(b,this.DL,this.CL,this)}}else var c=this.url;c&&(a.Mb(c),a.Ua("complete",this.Aj,!1,this),a.Ua("cancel",this.Aj,!1,this),a.Ua("error",this.Zr,!1,this),a.Dk())}else this.close()};
iZ.prototype.accept=iZ.prototype.accept;iZ.prototype.close=function(){if(this.v&&this.v.onClose)this.v.onClose();kx(this.L)};iZ.prototype.close=iZ.prototype.close;iZ.prototype.Xj=function(){this.g&&(this.g.value=null);this.L&&this.L.find('input[name="url"]').focus();this.url=null;this.fileChosen=!1};iZ.prototype.clearFile=iZ.prototype.Xj;iZ.prototype.Ep=function(){if(this.v&&this.v.manager){var a=this.v.manager.Ep();if(0<a.length){var b="<ul>";a.forEach(function(a){b+="<li>"+a+"</li>"});b+="</ul>"}}return b};
iZ.prototype.getImportDetails=iZ.prototype.Ep;iZ.prototype.CK=function(){this.g.click()};iZ.prototype.openFileBrowser=iZ.prototype.CK;g=iZ.prototype;g.Uy=function(){this.g.files&&0<this.g.files.length&&(this.file=this.g.files[0]);this.url=null!=this.file?this.file.name:null;this.fileChosen=!0;R(this.v)};g.DL=function(a){this.loading=!1;if(a){var b=this.v.method;b.j=a;b.Dk();this.j=!0}this.close()};
g.CL=function(a){this.loading=!1;a&&"string"===typeof a||(a='Unable to load file "'+(this.file?this.file.name:"unknown")+'"!');rj(tj,a,Qh,Xva);this.close()};g.Aj=function(a){a=a.target;a.M("complete",this.Aj,!1,this);a.M("cancel",this.Aj,!1,this);a.M("error",this.Zr,!1,this);this.j=!0;this.loading=!1;this.close()};g.Zr=function(a){a=a.target;a.M("complete",this.Aj,!1,this);a.M("cancel",this.Aj,!1,this);a.M("error",this.Zr,!1,this);this.loading=!1};function tM(a){vM.call(this);this.log=Yva;this.l=!!a}w(tM,vM);var Yva=E.V("os.ui.file.method.ImportMethod");tM.prototype.zr=function(){return 100};tM.prototype.clone=function(){var a=new this.constructor;a.l=this.l;return a};
tM.prototype.Dk=function(a){var b=this.j,c=this.Ma();b||c?c?this.jj():b&&this.dispatchEvent("complete"):(a={manager:a&&a.manager||GM.s(),method:this},fx({id:"urlimport",label:"Import Data",icon:"fa fa-cloud-download",x:"center",y:"center",width:"400","min-width":"400","max-width":"400",height:"auto",modal:"true","show-close":"true","no-scroll":"true"},'<importdialog manager="manager" method="method"></importdialog>',void 0,void 0,void 0,a))};function jZ(a,b){pE.call(this,a);this.g=b;this.filter&&(this.title=(b?"Enable":"Disable")+' filter "'+this.filter.S()+'"')}w(jZ,pE);jZ.prototype.Fa=function(){if(qE(this)){this.state="executing";try{return OC.toggle(this.filter,this.g),this.g||uE(this),this.state="success",!0}catch(a){}}return!1};jZ.prototype.Db=function(){this.state="reverting";try{return OC.toggle(this.filter,!this.g),this.g||tE(this),this.state="ready",!0}catch(a){}return!1};function kZ(a){ko.call(this);this.g=null;a&&this.Yk(a);this.j="<filternodeui></filternodeui>"}w(kZ,ko);g=kZ.prototype;g.Ga=function(a){var b=this.getState();kZ.C.Ga.call(this,a);a=this.getState();b!=a&&this.g&&(b="on"===a,"both"!==a&&this.g.isEnabled()!==b&&this.g.Za(b))};g.gb=function(){return this.g};
g.Yk=function(a){if(a!==this.g){this.g&&this.g.M("propertychange",this.Xk,!1,this);var b=this.g;if(this.g=a)this.g.H("propertychange",this.Xk,!1,this),this.ga(this.g.D()),this.Da(this.g.S()),this.Ga(this.g.isEnabled()?"on":"off");po(this,this.rp());this.dispatchEvent(new K("filter",a,b))}};g.J=function(){this.g&&(this.g.M("propertychange",this.Xk,!1,this),this.g=null);kZ.C.J.call(this)};g.D=function(){return this.g?this.g.D():kZ.C.D.call(this)};g.ba=function(){return this.g?this.g.S():kZ.C.ba.call(this)};
g.qe=function(){var a="";this.g&&(a+=this.g.S(),a+=" "+this.g.qb(),a+=" "+this.g.type);return a};g.getTags=function(){return null};g.rp=function(){var a="";this.g&&(a+="Description: "+(this.g.qb()||"None provided."),a+="\nFilter: "+KC(cC(this.g),1E3));return a};g.nc=function(a){kZ.C.nc.call(this,a);this.Yk(a.gb())};g.Xk=function(a){"enabled"==a.j&&this.Ga(this.g.isEnabled()?"on":"off")};function Zva(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.canCopy()" ng-click="nodeUi.copy()"><i class="fa fa-copy fa-fw c-glyph" title="Copy"></i></span><span ng-if="nodeUi.canEdit()" ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit"></i></span><span ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove"></i></span></span>',controller:lZ,controllerAs:"nodeUi"}}
Q.directive("filternodeui",[Zva]);function lZ(a,b){FE.call(this,a,b)}w(lZ,FE);lZ.$inject=["$scope","$element"];lZ.prototype.remove=function(){var a=new vY(this.scope.item.gb());AE(OE.s(),a);O(P.s(),"filters.remove",1)};lZ.prototype.remove=lZ.prototype.remove;lZ.prototype.Gh=function(){var a=this.scope.item.gb();return void 0!==WG(lE)[a.T()]};lZ.prototype.canEdit=lZ.prototype.Gh;lZ.prototype.Rc=function(){this.scope.$emit("filterEdit",this.scope.item.gb());O(P.s(),"filters.edit",1)};
lZ.prototype.edit=lZ.prototype.Rc;lZ.prototype.YC=function(){var a=Y.Ka(this.scope.item.gb().T()),b=WG(lE);return 0<gc(b)&&!!a};lZ.prototype.canCopy=lZ.prototype.YC;lZ.prototype.copy=function(){this.scope.$emit("filterCopy",this.scope.item.gb());O(P.s(),"filters.copy",1)};lZ.prototype.copy=lZ.prototype.copy;function mZ(a){kZ.call(this,a);lE.H("propertychange",this.ay,!1,this)}w(mZ,kZ);g=mZ.prototype;g.J=function(){lE.M("propertychange",this.ay,!1,this);mZ.C.J.call(this)};
g.Yk=function(a){if(a!==this.g){this.g&&this.g.M("propertychange",this.Xk,!1,this);var b=this.g;if(this.g=a)this.g.H("propertychange",this.Xk,!1,this),this.ga(this.g.D()),this.Da(this.g.S()),this.Ga(this.g.isEnabled()?"on":"off"),po(this,KC(cC(this.g),1E3)),this.j="<filternodeui></filternodeui>";this.dispatchEvent(new K("filter",a,b))}null==L.s().W(this.g.T())&&(this.sf=!0)};g.ay=function(){this.dispatchEvent(new K("icons"))};
g.Ga=function(a){if("both"!==a){var b=this.getState();oo(this,a);a=this.getState();if(b!=a&&this.g&&(b="on"===a,a=this.g.isEnabled(),b!==a)){a=[];a.push(new jZ(this.g,b));if(b){var c=lE.getEntries(this.g.T()),d={layerId:this.g.T(),areaId:"*",filterId:this.g.D(),includeArea:!0,filterGroup:!0};c.push(d);a.push(new jE(c,!0,this.g.T(),!0))}0<a.length&&(c=new TP,c.bc(a),c.title=b?"Enable":"Disable Filter",AE(OE.s(),c))}}};
g.Kc=function(){var a=this.gb(),b="u-fa-badge-times",c="inactive";hH(lE,a.D())&&null!=L.s().W(a.T())&&(b="u-fa-badge-check",c="active");return' <i class="fa fa-fw fa-filter position-relative '+b+'" title="This filter is '+c+'"></i> '};function nZ(a,b,c){cY.call(this,[],a,b,c)}w(nZ,oY);nZ.prototype.um=function(){return yE(OC)};nZ.prototype.io=function(a){return new mZ(a)};nZ.prototype.jm=function(a){var b=yE(OC);if(b&&0<b.length)for(var c=0,d=b.length;c<d;c++){var e=new mZ;e.Yk(b[c]);a.push(e)}else eY(this,a)};Q.directive("filtergroupui",[function(){return{restrict:"AE",replace:!0,template:'<span class="float-right"><select class="filter-select" ng-model="groupUi.group" ng-change="groupUi.onGroup()" ng-options="key for (key, value) in groupUi.groups" title="Whether results can match any filter or must match all filters."/></span>',controller:oZ,controllerAs:"groupUi"}}]);
function oZ(a){this.v=a;a=sE.s();a.H("filterGroupingChanged",this.g,!1,this);this.group=a.Vi(this.v.item.D());this.groups=$va;this.v.$on("$destroy",this.j.bind(this))}oZ.$inject=["$scope","$element"];var $va={Any:!1,All:!0};oZ.prototype.j=function(){sE.s().M("filterGroupingChanged",this.g,!1,this)};oZ.prototype.g=function(a){a.key==this.v.item.D()&&(this.group=sE.s().Vi(a.key))};oZ.prototype.CI=function(){sE.s().th(this.v.item.D(),this.group)};oZ.prototype.onGroup=oZ.prototype.CI;function pZ(a){qY.call(this);this.o=a||!1}w(pZ,qY);pZ.prototype.ae=function(a){var b=[];if(a=a.gb().type)try{var c=a.indexOf("#");if(-1!=c){a=a.substring(c+1);var d=a.indexOf("#");-1!=d&&(a=a.substring(0,d))}}catch(e){}else a="Unknown";ib(b,a);return b};pZ.prototype.Le=function(a){var b=new ko;b.ga(a);b.Da(a);qo(b,!1);b.collapsed=!1;this.o&&b.Nf("<filtergroupui></filtergroupui>");(a=Y.Ka(a))&&b.Da(a.S()+" ("+a.rb()+")");return b};function qZ(a){pZ.call(this);this.j=a}w(qZ,pZ);
qZ.prototype.ae=function(a){var b=[],c=a.gb().type;a="Unknown";if(c){var d=OC.rd(c);if(d instanceof Vz)a=d.S(),this.j&&(a+=" "+d.cg()),(c=d.rb())&&(a+=" ("+c+")");else{a=c;c=this.j;d=a.indexOf("#");if(-1!=d)if(Qb(a.substring(0,d),"state"))a=a.substring(a.lastIndexOf("#")+1)+" (state file)";else if(a=a.substring(d+1),d=a.indexOf("#"),-1!=d){var e=a.substring(d+1);a=c&&e?a.substring(0,d)+" "+ac(e):a.substring(0,d)}a=a.replace(/_/g," ");a+=" (not loaded)"}}ib(b,a);return b};Q.directive("filtertree",[function(){return{restrict:"AE",replace:!0,scope:{type:"="},template:'<div><slicktree x-data="filters" selected="selectedFilter" checkbox-tooltip="Enable or disable the filter" show-root="true"></slicktree></div>',controller:rZ,controllerAs:"filterTree"}}]);function rZ(a){this.v=a;this.j=new cY([],"filters",a);sE.s().H("filtersRefresh",this.g,!1,this);a.$watch("type",this.g.bind(this));a.$on("$destroy",this.l.bind(this));this.g()}rZ.$inject=["$scope"];
rZ.prototype.l=function(){sE.s().M("filtersRefresh",this.g,!1,this);this.v=null};var awa=new pZ;rZ.prototype.g=function(){var a=this.v.type,b=yE(sE.s(),a),c=[];if(b)for(var d=0,e=b.length;d<e;d++){var f=new kZ;f.Yk(b[d]);c.push(f)}this.j.l=c;dY(this.j,"",a?null:awa);R(this.v)};var sZ=new px(new aw({type:"root",children:[{label:"Show",eventType:"enable",tooltip:"Shows the filter",da:['<i class="fa fa-fw fa-check-square-o"></i>'],sort:0},{label:"Hide",eventType:"disable",tooltip:"Hides the filter",da:['<i class="fa fa-fw fa-square-o"></i>'],sort:10},{label:"Turn filter on",eventType:"filter:apply",tooltip:"Apply the filter to all areas for the query",da:['<i class="fa fa-fw fa-filter"></i>'],sort:20},{label:"Turn filter off",eventType:"filter:unapply",tooltip:"Remove the filter from all areas for the query",
da:['<i class="fa fa-fw fa-ban"></i>'],sort:30},{label:"Remove",eventType:"filter:remove",tooltip:"Removes the filter",da:['<i class="fa fa-fw fa-times"></i>'],sort:40},{label:"Export Filter",eventType:qK,tooltip:"Export the filter",da:['<i class="fa fa-fw fa-download"></i>'],sort:50}]}));function tZ(a){return function(b){this.visible=a(b)}}function uZ(a){var b=[];if(a){for(var c=0,d=a.length;c<d;c++){var e=a[c];e instanceof mZ?b.push(e.gb()):b=b.concat(uZ(e.na()))}ub(b)}return b}
function vZ(a){return null!=L.s().W(a)}function bwa(a){a=uZ(a);for(var b=0,c=a.length;b<c;b++)if(a[b].isEnabled()&&vZ(a[b].T()))return!0;return!1}function cwa(a){a=uZ(a);for(var b=0,c=a.length;b<c;b++)if(!a[b].isEnabled()&&vZ(a[b].T()))return!0;return!1}function dwa(a){a=uZ(a);for(var b=0,c=a.length;b<c;b++)if(hH(lE,a[b].D())&&vZ(a[b].T()))return!0;return!1}function ewa(a){a=uZ(a);for(var b=0,c=a.length;b<c;b++)if(!hH(lE,a[b].D())&&a[b].isEnabled()&&vZ(a[b].T()))return!0;return!1}
function fwa(a){return 0<uZ(a).length}
function wZ(a){var b=a.getContext();if(b){var c=[],d="";b=uZ(b);switch(a.type){case "disable":d="Disable filter";a=0;for(var e=b.length;a<e;a++)c.push(new jZ(b[a],!1));break;case "filter:remove":d="Remove filter";a=0;for(e=b.length;a<e;a++)c.push(new vY(b[a]));break;case qK:a.preventDefault();a.stopPropagation();OC.dispatchEvent(new dC("exportFilter"));break;case "enable":case "filter:apply":var f=[];a=0;for(e=b.length;a<e;a++){var h=b[a];h.isEnabled()?d="Turn on filter":(c.push(new jZ(h,!0)),d="Enable and turn on filter");
f=f.concat(lE.getEntries(h.T()));h={layerId:h.T(),areaId:"*",filterId:h.D(),includeArea:!0,filterGroup:!0};f.push(h)}ub(f,void 0,function(a){return JSON.stringify(a)});c.push(new jE(f,!0,"all",!0));break;case "filter:unapply":d="Turn off filter";var k=lE.getEntries();f=[];a=0;for(e=b.length;a<e;a++)h=b[a],f=f.concat(lE.getEntries(null,null,h.D()));ub(f,void 0,function(a){return JSON.stringify(a)});$a(f,function(a){mb(k,a)});c.push(new jE(k,!1,"all",!0))}0<c.length&&(b=new TP,b.bc(c),b.title=d+(1<
c.length?"s":""),AE(OE.s(),b))}};Q.directive("filters",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/filters.html",controller:xZ,controllerAs:"filtersCtrl"}}]);
function xZ(a,b){IY.call(this,a,b,25);this.title="filters";try{this.scope.contextMenu=sZ}catch(c){}this.l="Layer Type";this.onDrop=this.o.bind(this);this.g=new nZ("filters",this.scope);this.scope.views=gwa;this.init();a.$on("filterCopy",this.IH.bind(this));a.$on("filterEdit",this.eI.bind(this));a.$on("filterComplete",this.lL.bind(this));OC.H("propertychange",this.Gy,!1,this);OC.H("filtersRefresh",this.search,!1,this);OC.H("exportFilter",this.Wf,!1,this);a=L.s();a.H("addLayer",this.search,!1,this);
a.H("removeLayer",this.search,!1,this)}w(xZ,IY);xZ.$inject=["$scope","$element"];var gwa={None:-1,Layer:new qZ,"Layer Type":new qZ(!0)};xZ.prototype.destroy=function(){OC.M("exportFilter",this.Wf,!1,this);OC.M("filtersRefresh",this.search,!1,this);OC.M("propertychange",this.Gy,!1,this);var a=L.s();a.M("addLayer",this.search,!1,this);a.M("removeLayer",this.search,!1,this);xZ.C.destroy.call(this)};xZ.prototype.xq=function(){xva();O(P.s(),"filters.advancedOpen",1)};xZ.prototype.launch=xZ.prototype.xq;
xZ.prototype.Wf=function(){gva(this.B.bind(this))};xZ.prototype["export"]=xZ.prototype.Wf;xZ.prototype.dk=function(){var a=yE(OC);return a&&0<a.length?!1:!0};xZ.prototype.exportDisabled=xZ.prototype.dk;xZ.prototype.B=function(a,b){var c=[];"selected"!=b?hwa(this,this.scope.filters,c,"active"==b):this.scope.selected&&this.scope.selected.length?c=this.scope.selected:this.scope.selected&&(c=[this.scope.selected]);c=ab(c,function(a){return a instanceof mZ});hva(a,c)};
function hwa(a,b,c,d){if(b)for(var e=0,f=b.length;e<f;e++){var h=b[e];if(h.na())hwa(a,h.na(),c,d);else if((d&&"on"==h.getState()||!d)&&h.gb()){var k=h.D();void 0!==k&&"*"!=k&&c.push(h)}}}xZ.prototype.import=function(a){YR(void 0,a)};xZ.prototype["import"]=xZ.prototype.import;g=xZ.prototype;g.eI=function(a,b){a=OC.rd(b.T());var c=null;try{a&&(c=a.Se())}catch(d){}c&&CE(b.T(),c,this.Uf.bind(this),b)};g.lL=function(a,b){a.stopPropagation();this.Uf(b)};
g.Uf=function(a){if(a){var b=OC.sb(a.D());if(b){b=new vY(b);var c=new wE(a),d=new TP;d.bc([b,c]);d.title="Edit Filter "+a.S();AE(OE.s(),d)}else AE(OE.s(),new wE(a))}};g.IH=function(a,b){DE(b,b.T())};g.Gy=function(a){a&&"toggle"!==a.j&&this.search()};g.DI=function(){this.search();O(P.s(),"filters.groupBy",1)};xZ.prototype.onGroupChange=xZ.prototype.DI;xZ.prototype.NJ=function(){this.search();O(P.s(),"filters.search",1)};xZ.prototype.onSearchTermChange=xZ.prototype.NJ;
xZ.prototype.o=function(a){a.dataTransfer&&a.dataTransfer.files&&th(Ew(a.dataTransfer.files[0]),this.import.bind(this),this.A.bind(this))};xZ.prototype.A=function(){rj(tj,"Could not handle file with drag and drop. Try again or use the browse capability.")};function iwa(){Nua("metrics")};function yZ(a,b){this.v=a;this.Na=b;this.g=OE.s();this.g.H("command_added",this.tu,!1,this);this.g.H("command_executing",this.vu,!1,this);this.g.H("command_executed",this.uu,!1,this);this.g.H("command_reverting",this.xu,!1,this);this.g.H("command_reverted",this.wu,!1,this);this.g.H("history_limit_changed",this.Uv,!1,this);this.showHistoryView=!1;this.current=this.g.g;this.processingIndex=-1;this.newCommand=null;this.commandHistory=this.g.j;a.$on("$destroy",this.l.bind(this))}
yZ.$inject=["$scope","$timeout"];yZ.prototype.l=function(){this.g.M("command_added",this.tu,!1,this);this.g.M("command_executing",this.vu,!1,this);this.g.M("command_executed",this.uu,!1,this);this.g.M("command_reverting",this.xu,!1,this);this.g.M("command_reverted",this.wu,!1,this);this.g.M("history_limit_changed",this.Uv,!1,this);this.v=this.Na=null};
yZ.prototype.Vo=function(){gD({confirm:this.j.bind(this),prompt:"Are you sure you want to clear the application history? This action cannot be undone.",yesText:"Clear",yesIcon:"fa fa-trash-o",yesButtonClass:"btn-danger",windowOptions:{label:"Clear History",icon:"fa fa-trash-o",x:"center",y:"center",width:"325",height:"auto",modal:"true",noScroll:"true",headerClass:"bg-danger u-bg-danger-text"}})};yZ.prototype.clearHistory=yZ.prototype.Vo;
yZ.prototype.j=function(){var a=this.g.u;XE(this.g,0);XE(this.g,a)};yZ.prototype.zO=function(){this.showHistoryView=!this.showHistoryView};yZ.prototype.toggleHistoryView=yZ.prototype.zO;yZ.prototype.pl=function(a){this.current!=a&&(this.v.$emit("historyProcessing",!0),this.g.pl(a))};yZ.prototype.setIndex=yZ.prototype.pl;g=yZ.prototype;g.tu=function(){this.Na(t(function(){this.current=this.g.g;var a=document.getElementById("js-history__scroll");a.scrollTop=a.scrollHeight},this))};
g.vu=function(a){this.Na(t(function(){this.current==this.commandHistory.length-1?this.newCommand=a.l:this.processingIndex=this.current+1;this.v.$emit("historyProcessing",!0)},this))};g.xu=function(){this.Na(t(function(){this.processingIndex=this.current=this.g.g;this.v.$emit("historyProcessing",!0)},this))};g.uu=function(){this.Na(t(function(){this.newCommand=null;this.processingIndex=-1;this.current=this.g.g;this.v.$emit("historyProcessing",!1)},this))};
g.wu=function(){this.Na(t(function(){this.processingIndex=-1;this.current=this.g.g;this.v.$emit("historyProcessing",!1)},this))};g.Uv=function(){this.Na(t(function(){var a=document.getElementById("historyScroll");a.scrollTop=0<this.commandHistory.length?a.scrollHeight:0},this))};Q.directive("history",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/windows/history.html",controller:yZ,controllerAs:"historyView"}}]);function jwa(a){var b=[];if(a)if(kg(a,"os.source.Vector"))b.push(a);else if(q(a))for(var c=0,d=a.length;c<d;c++)if(kg(a[c],"os.source.Vector"))b.push(a[c]);else if(a[c]instanceof ev){var e=a[c].W();e instanceof Vz&&(e=e.N())&&b.push(e)}return b};Q.directive("export",[function(){var a=jQ();a.controller=zZ;return a}]);function zZ(a,b,c){kQ.call(this,a,b,c);a.itemText="feature";a.allowMultiple=!1;a.showLabels=!1;b=a.initSources=this.g.sources;c=this.scope.exporter;if(b&&1<b.length&&(!c||!c.ti()))for(var d in this.exporters)b=this.exporters[d],b.ti()&&(this.scope.exporter=b);a.$on("exportoptions:change",this.u.bind(this))}w(zZ,kQ);zZ.$inject=["$scope","$element","$compile"];zZ.prototype.o=function(){return'<h5 class="mt-3 text-center">Sources to Export</h5><exportoptions init-sources="initSources" allow-multiple="allowMultiple" show-labels="showLabels"></exportoptions>'};
zZ.prototype.j=function(a,b){zZ.C.j.call(this,a,b);a&&(this.scope.allowMultiple=a.ti(),this.scope.showLabels=a.tt())};zZ.prototype.u=function(a,b,c){a.stopPropagation();this.g.items.length=0;this.g.fields.length=0;b&&0<b.length&&(this.g.items=this.g.items.concat(b));if(c)for(a=0;a<c.length;a++)if(b=Ox(c[a]))for(var d=0;d<b.length;d++)gb(this.g.fields,b[d])||this.g.fields.push(b[d])};var AZ=void 0,BZ=0,CZ=0;function DZ(a){this.visible=!1;if(this.eventType&&a&&0<a.length){var b=fv(a);this.visible=b.length==a.length&&b.every(function(b){return this.eventType?b.yl(this.eventType,a):!1},this)}}function EZ(a){for(var b=fv(a.getContext()),c=0;c<b.length;c++){var d=b[c];d&&d.Ei(a.type)}}
function kwa(a){a=fv(a.getContext());for(var b="",c=0;c<a.length;c++){var d=Y.Ka(a[c].D());d?(b+=Gja(d),c<a.length-1&&(b+="<hr><br>")):(b+="No Description for "+a[c].S()+"<br>",c<a.length-1&&(b+="<br><hr><br>"))}fx({id:"layerDescription",label:"Layer Description",icon:"fa fa-newspaper-o",x:"center",y:"center",width:"600",height:"auto","show-close":!0},'<div class="d-flex flex-column flex-fill"><div class="modal-body">'+b+'</div><div class="modal-footer"><button class="btn btn-secondary" ng-click="close()"><i class="fa fa-ban"></i> Close</button></div></div>',
void 0,void 0,void 0,{close:function(){kx(ix("layerDescription"))}})}function lwa(a){if(a=a.getContext())if(a=jwa(a)||[],ix("export"))hx("export");else{var b=1==a.length?a[0].S():null;fx({id:"export",label:"Export Data",icon:"fa fa-download",x:"center",y:"center",width:"400","min-width":"300","max-width":"800",height:"auto","min-height":"250","max-height":"600","show-close":"true"},"<export></export>",void 0,void 0,void 0,{options:{ek:null,fields:[],items:[],dl:null,sources:a,title:b}})}}
function mwa(a){a=fv(a.getContext()).reduce(av,Ok());al(a)||AE(BE,new BP(a))}
function nwa(a){for(var b=fv(a.getContext()),c={},d=Dg(L.s()).filter(function(a){if(a instanceof FZ)return!1;if(!gb(b,a))return a.yb()||a.hd()}),e=0,f=d.length;e<f;e++){var h=d[e],k=h.N();if((k=k instanceof Rz?k.g:null)&&!L.s().Qa()){var l=k.La().splice(0,k.La().length);Mx(k,null);c[h.D()]=l}else h.yg(!1)}EZ(a);var m=new je(1750);m.H("tick",function(){for(var a=0,b=d.length;a<b;a++){var e=d[a],f=e.N();(f=f instanceof Rz?f.g:null)&&!L.s().Qa()?Mx(f,c[e.D()]):e.yg(!0)}m.dispose()});m.start()};function owa(a){this.visible=!1;0<uQ(a).length?this.visible=!0:(a=tQ(a),1!==a.length||aq(a[0])||(this.visible=!0))}function pwa(a){a.preventDefault();uR({features:[new hq(new hp(a.getContext()))]})}function qwa(a){var b=a.getContext();b&&a instanceof A&&!Ci()&&(a.preventDefault(),a.stopPropagation(),a=jwa(b),uR({sources:a&&0<a.length?[a[0]]:[]}))}
function rwa(a){var b=a.getContext();b&&a instanceof A&&!Ci()&&(a.preventDefault(),a.stopPropagation(),a=uQ(b),a.length||(a=tQ(b).map(function(a){return new hq(a)})),a.length&&(b={features:a},xQ.s().contains(a[0])&&(a=a[0].get("title"))&&(b.title=ac(a)+" Buffer"),uR(b)))};var GZ=void 0;function HZ(a){switch(a.type){case "box":N.dispatchEvent(new A("box"));break;case "circle":N.dispatchEvent(new A("circle"));break;case "polygon":N.dispatchEvent(new A("polygon"));break;case "line":N.dispatchEvent(new A("line"));break;case "chooseArea":Ooa();break;case "enterCoordinates":ZR();break;case "countryBorder":N.dispatchEvent(new A("country"));break;case "queryWorld":$R()}};var IZ=void 0;
function swa(){var a=IZ;if(a){var b=a.Ha().find("Recent");b.children&&(b.children.length=0)}a=Qw(Y).filter(function(a){return!isNaN(a.ud)});a.sort(Ija);for(var c=Math.min(a.length,10),d={},e=0;e<c;e++){var f=a[e],h=f.isActive(),k=f.S()||"",l=f.T(),m=h?"fa-check-square-o":"fa-square-o";l&&("Tile and Feature Groups"===l&&(l="Group"),l=l.replace(/ Layers/i,""),k+=" ("+l+")");k in d&&(k+=" ("+f.rb()+")");d[k]=!0;b.R({eventType:"recent."+f.D(),label:k,tooltip:(h?"Remove":"Add")+" this item",da:['<i class="fa fa-fw '+
m+'"></i>'],sort:e,za:f.setActive.bind(f,!h)})}};function JZ(){this.nb=!1;this.title="Clear States";this.Ba=null;this.state="ready";this.g=[]}JZ.prototype.Fa=function(){this.state="executing";this.g.length=0;for(var a=Qw(Y),b=0,c=a.length;b<c;b++){var d=a[b];d instanceof bV&&d.isActive()&&this.g.push(d.D())}RU.ru();this.state="success";return!0};JZ.prototype.Db=function(){this.state="reverting";for(var a=Y,b=0,c=this.g.length;b<c;b++){var d=a.Ka(this.g[b]);d&&d.setActive(!0)}this.g.length=0;this.state="ready";return!0};var KZ=void 0,LZ=void 0;function MZ(a){LZ&&a&&F(a.l,"os.ui.data.IStateDescriptor")&&LZ.Pd()}function twa(a){switch(a.type){case "state:save":aV();break;case "state:clear":a=new JZ,AE(OE.s(),a)}}
function uwa(){if(KZ){var a=KZ.Ha();a.children&&haa(a.children,function(a){return"group"===a.type});for(var b=Qw(Y),c={},d=0;d<b.length;d++){var e=b[d];if(F(e,"os.ui.data.IStateDescriptor")){var f=e;c["1:Saved States"]||(c["1:Saved States"]=[]);c["1:Saved States"].push(f)}}for(var h in c){d=h.split(":");b=a.R({label:String(d[1]),type:"group",sort:Number(d[0])||0});var k=c[h];k.sort(Ija);f=[];for(d=0;d<k.length;d++){if(7<=f.length){(d=vwa(f[0]))&&b.R(d);break}e=k[d];e.ud&&f.push(e)}f.sort(Hja);for(d=
0;d<f.length;d++)(e=wwa(f[d],d))&&b.R(e)}}}function wwa(a,b){var c=a.S();if(c){var d=a.isActive(),e=d?"fa-check-square-o":"fa-square-o";d=(d?"Unload":"Load")+" this application state";return{label:c,eventType:"state:"+a.D(),tooltip:d,da:['<i class="fa fa-fw '+e+'"></i>'],za:xwa.bind(void 0,a),sort:b}}}function xwa(a){a.setActive(!a.isActive())}
function vwa(a){var b=a.T();a=a.ag();if(b&&a)return{label:"More "+b,eventType:"VIEW_MORE_"+a,tooltip:"Launch the Add Data window to add more",da:['<i class="fa fa-fw fa-plus"></i>'],za:ywa.bind(void 0,b,a),sort:Infinity}}function ywa(a,b){b=zwa.bind(void 0,a,b);var c={};c.filterFunc=b;c.filterName=a;N.dispatchEvent(new cw("toggleUI","addData",void 0,c))}function zwa(a,b,c){return c instanceof XM&&(c=c.Ka(),F(c,"os.ui.data.IStateDescriptor"))?c.T()===a&&c.ag()===b:!1};var NZ=void 0;function Awa(){aV()};var OZ=new px(new aw({type:"root",children:[{label:"Load",eventType:"timeline.load",tooltip:"Queries this time range, replaces other load ranges",da:['<i class="fa fa-fw fa-cloud-download"></i>'],sort:10},{label:"Add",eventType:"timeline.add",tooltip:"Adds this time range to the loaded ranges",da:['<i class="fa fa-fw fa-plus"></i>'],sort:20},{label:"Create Slice",eventType:"timeline.slice",tooltip:"Adds time slice which creates a time range less than 24 hours to show data from each loaded day",da:['<i class="fa fa-fw fa-hand-scissors-o"></i>'],
sort:30},{label:"View",eventType:"timeline.activeWindow",tooltip:"Sets the active view window to this range",da:['<i class="fa fa-fw fa-eye"></i>'],sort:40},{label:"Animate",eventType:"timeline.animate",tooltip:"Animates this time range",da:['<i class="fa fa-fw fa-play"></i>'],sort:50},{label:"Skip Animate",eventType:"timeline.animateSkip",tooltip:"Skip animating this time range",da:['<i class="fa fa-fw fa-ban"></i>'],sort:60},{label:"Hold Range",eventType:"timeline.animateHold",tooltip:"Always show this time range",
da:['<i class="fa fa-fw fa-hand-rock-o"></i>'],sort:70},{label:"Zoom",eventType:"timeline.zoom",tooltip:"Zooms to this time range",da:['<i class="fa fa-fw fa-crop"></i>'],sort:80},{label:"Select",eventType:"timeline.select",tooltip:"Selects features in this time range",da:['<i class="fa fa-fw fa-check-circle"></i>'],sort:90},{label:"Select Exclusive",eventType:"timeline.selectExclusive",tooltip:"Selects only features in this time range, deselecting all other features",da:['<i class="fa fa-fw fa-check-circle"></i>'],
sort:100},{label:"Deselect",eventType:"timeline.deselect",tooltip:"Deselects the features in this time range",da:['<i class="fa fa-fw fa-times-circle"></i>'],sort:110},{label:"Remove",eventType:"timeline.remove",tooltip:"Removes the features in this time range",da:['<i class="fa fa-fw fa-times"></i>'],sort:120}]}));
function PZ(a){var b=a.getContext(),c=SB(Y);b=new qg(b[0],b[1]);if(c)for(var d=0,e=c.length;d<e;d++)if(c[d]instanceof Rz&&c[d].Qc){var f=c[d],h=xg(f.o,b,!1,!0);switch(a.type){case "timeline.select":JK(f,h);O(P.s(),"timeline.features.timeRange-select",1);break;case "timeline.selectExclusive":KK(f,h);O(P.s(),"timeline.features.timeRange-selectExclusive",1);break;case "timeline.deselect":HK(f,h);O(P.s(),"timeline.features.timeRange-deselect",1);break;case "timeline.remove":h&&f.Ge(h)}}}
function Bwa(a){var b=vg.s();a=a.getContext();b.Ud(cJ(a));O(P.s(),"timeline.features.timeRange-load",1)}function Cwa(a){var b=vg.s();a=a.getContext();ZJ(b,cJ(a));O(P.s(),"timeline.features.timeRange-add",1)}function Dwa(a){var b=vg.s();a=a.getContext();Wia(b,cJ(a));O(P.s(),"timeline.features.timeRange-slice",1)}function Ewa(){Yta(angular.element(".js-timeline").children().scope().timeline,"select");O(P.s(),"timeline.features.timeRange-zoom",1)}
function Fwa(a){var b=vg.s();a=a.getContext();Zia(b,cJ(a));O(P.s(),"timeline.features.timeRange-hold",1)}function Gwa(a){var b=vg.s();a=a.getContext();oK(b,cJ(a));b.play();O(P.s(),"timeline.features.timeRange-animate",1)}function Hwa(a){var b=vg.s();a=a.getContext();a=cJ(a);!b.l.isEmpty()||lK(b,fK(b));Xia(b,a);Yia(b,a);b.play();O(P.s(),"timeline.features.timeRange-skip",1)}
function Iwa(a){var b=angular.element(".js-timeline").children().scope().timeline.getItem("window");a=a.getContext();b.Cc(a)};var QZ=new px(new aw({type:"root",children:[]}));function Jwa(a){bu(au.s(),a.type)}function Kwa(){var a=au.s().g;this.da=this.eventType===a?['<i class="fa fa-fw fa-check-circle-o"></i>']:['<i class="fa fa-fw fa-circle-o"></i>']};var Lwa={};
function Mwa(){VX||(VX=new px(new aw({type:"root",children:[{label:"",eventType:"0:Major",type:"group",sort:0},{label:"",eventType:"1:Minor",type:"group",sort:1}]})));XX("addData",{icon:"fa fa-plus",label:"Add Data",description:"Add data to the map",x:"center",y:"center",width:"800",height:"600","min-width":"565","max-width":"1200","min-height":"300","max-height":"1000","show-close":"true","no-scroll":"true","help-context":"addData",html:"adddata"},!0);XX("layers",{key:"layers",icon:"fa fa-align-justify",label:"Layers",
description:"View and manipulate layers on the map",x:"0",y:"96",width:"325",height:"550","min-width":"300","max-width":"1000","min-height":"250","max-height":"2000","show-close":"true","no-scroll":"true","help-context":"layers",shortcut:"alt+l",html:'<layerswin tab="layers"></layerswin>',metricKey:"map.features.layers"},!0)&&YX("layers");XX("timeline",{icon:"fa fa-clock-o",label:"Timeline",metricKey:"timeline.features.open"},!0,function(){N.dispatchEvent(new cw("toggleUI","timeline"))});XX("settings",
{icon:"fa fa-gears",label:"Settings",description:"Change application settings",x:"center",y:"center",width:"1000",height:"500","min-width":"535","max-width":"1000","min-height":"300","max-height":"2000","show-close":"true","no-scroll":"true",html:"settings"},!0);XX("alerts",{icon:"fa fa-bell",label:"Alerts",description:"View notifications and alerts",x:"center",y:"center",width:"500",height:"600","min-width":"300","max-width":"1000","min-height":"300","max-height":"1000","show-close":"true","no-scroll":"false",
html:'<alerts resize-with=".js-window"></alerts>'});XX("clear",{icon:"fa fa-times",label:"Clear",description:"Clear data from the map",x:"center",y:"center",width:300,height:350,"min-width":300,"max-width":400,"min-height":250,"max-height":500,"show-close":!0,html:"clear"});XX("history",{icon:"fa fa-history",label:"History",description:"View undo history",x:"center",y:"center",width:"500",height:"600","min-width":"300","max-width":"1000","min-height":"300","max-height":"1000","show-close":"true",
"no-scroll":"true",html:'<history resize-with=".js-window"></history>'},!1,void 0);M.get("metrics.enabled",!1)&&XX("metrics",{icon:"fa fa-cubes",label:"OpenSphere Capabilities",description:"Explore OpenSphere Capabilities",x:"center",y:"center",width:"500",height:"600","min-width":"300","max-width":"1000","min-height":"300","max-height":"1000","show-close":"true","no-scroll":"true",html:"metrics"},!1,void 0);XX("legend",{icon:"fa-map-signs",label:"Legend",description:"Shows a legend for all the data on the map"},
!1,ira);XX("log",{icon:"fa fa-terminal",label:"Log"},!1,function(){Ai.isEnabled()||Ai.Za(!0)});XX("servers",{icon:"fa fa-database",label:"Servers"},!1,Nwa)}var Nwa=Ga(Fua,"servers");Q.directive("addDataButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:RZ,controllerAs:"ctrl",template:'<div class="btn-group o-add-data-button" ng-right-click="ctrl.openMenu()"><button class="btn btn-primary" id="addDataButton" title="Add data to the map" ng-click="ctrl.toggle()" ng-class="{active: ctrl.isWindowActive()}" metric="{{metrics.addDataOpen}}"><i class="fa fa-plus" ng-class="{\'fa-fw\': puny}"></i> <span ng-class="{\'d-none\': puny}">Add Data</span></button><button class="btn btn-primary" title="Open a file or URL" ng-click="ctrl.open()"><i class="fa fa-fw fa-folder-open"></i></button><button class="btn btn-primary dropdown-toggle dropdown-toggle-split" ng-click="ctrl.openMenu()" ng-class="{active: menu}"></button></div>'}}]);
function RZ(a,b){ZX.call(this,a,b);this.menu=IZ;this.g="addData";this.qa="addData.open"}w(RZ,ZX);RZ.$inject=["$scope","$element"];RZ.prototype.open=function(){N.dispatchEvent("importFile")};RZ.prototype.open=RZ.prototype.open;function SZ(a,b){this.menu=null;this.qa=this.g=void 0;this.scope=a;this.element=b;this.position="top";a.$on("$destroy",this.l.bind(this))}SZ.$inject=["$scope","$element"];SZ.prototype.l=function(){this.element=this.scope=null};
SZ.prototype.ci=function(){this.menu&&(this.scope.menu||this.element.hasClass("active")||this.element.hasClass("active-remove")||this.element.hasClass("active-remove-active")?(this.scope.menu=!1,this.element.blur()):(this.scope.menu=!0,N.Ua(rx,this.o,!1,this),rga(this.menu,this.position,this.element||void 0)));R(this.scope)};SZ.prototype.openMenu=SZ.prototype.ci;SZ.prototype.o=function(){this.scope.menu=!1;this.element.blur()};
SZ.prototype.toggle=function(){this.g&&!YX(this.g)&&N.dispatchEvent(new cw("toggleUI",this.g,null,null,this.qa))};SZ.prototype.toggle=SZ.prototype.toggle;SZ.prototype.Ak=function(a){if(a=a||this.g){var b=angular.element("#js-window__container").scope();return!!ix(a)||b.mainCtrl&&b.mainCtrl[a]}return!1};SZ.prototype.isWindowActive=SZ.prototype.Ak;Q.directive("alertbadge",[function(){return{restrict:"E",replace:!0,scope:{reset:"="},templateUrl:"v1541734487/views/badge.html",controller:TZ,controllerAs:"badge"}}]);function TZ(a){this.scope=a;this.count=0;this.highestAlert=Th;this.g=qj.s();sj(this.g,"alertbadge",this.j,this);this.g.H("alert",this.j,!1,this);a.$watch("reset",this.reset.bind(this));a.$on("$destroy",this.destroy.bind(this))}TZ.$inject=["$scope"];var Owa={Error:"badge-danger",Warning:"badge-warning"};
TZ.prototype.destroy=function(){this.g.M("alert",this.j,!1,this);this.scope=this.g=null};TZ.prototype.reset=function(){this.scope.reset&&(this.count=0,this.highestAlert=Th)};TZ.prototype.Tu=function(){return Owa[this.highestAlert]||"badge-light"};TZ.prototype.getClass=TZ.prototype.Tu;TZ.prototype.j=function(a){this.scope.reset||(this.count++,a=a.u,a.value>this.highestAlert.value&&(this.highestAlert=a));R(this.scope)};Q.directive("alertButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:UZ,controllerAs:"ctrl",template:'<button class="btn btn-secondary" ng-click="ctrl.toggle()" title="Alerts" ng-class="{\'active\': ctrl.isWindowActive()}"><i class="fa fa-fw fa-bell"></i> <alertbadge reset="ctrl.isWindowActive()"></alertbadge></button>'}}]);function UZ(a,b){SZ.call(this,a,b);this.g="alerts"}w(UZ,SZ);UZ.$inject=["$scope","$element"];Q.directive("clearButton",[function(){return{restrict:"E",replace:!0,controller:VZ,controllerAs:"ctrl",template:'<button class="btn btn-danger" ng-click="ctrl.toggle()" title="Select items to clear/reset"><i class="fa fa-fw fa-times"></i></button>'}}]);function VZ(a,b){SZ.call(this,a,b);this.g="clear"}w(VZ,SZ);VZ.$inject=["$scope","$element"];Q.directive("wheelDate",[function(){return{restrict:"AE",replace:!0,scope:{date:"=",disable:"=",isRequired:"=",blurOnSelect:"=?"},templateUrl:"v1541734487/views/datetime/wheeldate.html",controller:WZ,controllerAs:"wheelDate"}}]);function Pwa(a){XZ.call(this,a);this._selectDate(a);$(a).blur()}var XZ=null;
function WZ(a,b,c){$.datepicker&&!XZ&&(XZ=$.datepicker._gotoToday,$.datepicker._gotoToday=Pwa);this.v=a;this.L=b;this.Na=c;var d=!1;this.dateOptions={changeYear:!0,changeMonth:!0,closeText:"Close",currentText:"Today",showButtonPanel:!0,yearRange:"1900:+10",dateFormat:"yy-mm-dd",onSelect:function(){d=!0},beforeShow:function(){var a=!0;if(navigator.userAgent.toLowerCase().match(/msie/)||navigator.userAgent.toLowerCase().match(/.net/))a=!d;d=!1;return a}};this.date=null;this.l=new SW(document);this.o=
!1;this.g=null;this.j=b[0];Yd(this.j,"focus",this.Mw,!1,this);Yd(this.j,"blur",this.Lw,!1,this);if(a.date)this.date=new Date(a.date.getTime());else var e=a.$watch("date",function(a,b){a&&b&&a.getTime()==b.getTime()&&(this.date=new Date(a.getTime()),this.L.datepicker("setDate",this.date),e())}.bind(this));a.$watch("date",this.AL.bind(this));a.$on("$destroy",this.zL.bind(this))}WZ.$inject=["$scope","$element","$timeout"];var YZ=E.V("os.ui.datetime.WheelDateCtrl");g=WZ.prototype;
g.zL=function(){de(this.j,"focus",this.Mw,!1,this);de(this.j,"blur",this.Lw,!1,this);this.l.dispose();this.Na=this.L=this.v=this.j=this.l=null};g.AL=function(a,b){!a&&b&&(E.ta(YZ,"Wheel date reset on null date"),this.L.datepicker("setDate",null),this.date=null);!a||b&&a.getTime()===b.getTime()||(this.date=new Date(a.getTime()),this.L.datepicker("setDate",this.date),E.ta(YZ,"Wheel date changed to: "+a.toUTCString()))};
g.Mw=function(){this.l.be("mousewheel")||(this.l.H("mousewheel",this.vv,!1,this),this.v.blurOnSelect&&this.g&&(this.g.dispose(),this.g=null,this.o=!1,this.Na(function(){document.activeElement.blur()})))};g.Lw=function(){this.l.M("mousewheel",this.vv,!1,this);this.g=new Fh(this.XE,250,this);this.g.start()};g.XE=function(){this.o&&(this.o=!1,this.Na(this.uB.bind(this)));this.g.dispose();this.g=null};
g.vv=function(a){if(a){a.preventDefault();var b=a.target,c=b.selectionStart,d=b.selectionEnd;a=0>a.deltaY?1:-1;5>d?this.date.setFullYear(this.date.getFullYear()+a):8>d?this.date.setMonth(this.date.getMonth()+a):this.date.setDate(this.date.getDate()+a);this.L.datepicker("setDate",this.date);b.selectionStart=c;b.selectionEnd=d;this.o=!0;R(this.v)}};
g.uB=function(){E.ta(YZ,"Wheel date updating scope.");if(!this.date||Aa(this.date))this.v.date=this.date?new Date(this.date.getTime()):null,this.v.blurOnSelect&&this.Na(function(){document.activeElement.blur()})};WZ.prototype.updateScopeDate=WZ.prototype.uB;Q.directive("dateControl",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/datetime/datecontrol.html",controller:ZZ,controllerAs:"dateControl"}}]);
function ZZ(a){this.v=a;this.g=vg.s();this.g.H("timeline.reset",this.l,!1,this);this.j=new Fh(this.o,10,this);this.startDate=XF(new Date(this.g.Sa()));this.endDate=Qwa(this);this.duration=this.g?this.g.K:"day";this.durations=["day","week","month","custom"];this.disabled=!1;this.Di();a.$watch("dateControl.startDate",this.A.bind(this));a.$watch("dateControl.endDate",this.u.bind(this));a.$on("$destroy",this.dispose.bind(this))}w(ZZ,x);ZZ.$inject=["$scope"];var $Z=E.V("os.ui.datetime.DateControlCtrl");
ZZ.prototype.J=function(){ZZ.C.J.call(this);z(this.j);this.j=null;this.g.M("timeline.reset",this.l,!1,this);this.v=this.g=null};ZZ.prototype.A=function(a,b){a&&b&&a.getTime()!=b.getTime()&&(this.startDate=KF(a,this.duration,!0),"custom"===this.duration?this.startDate>this.endDate&&(this.endDate=new Date(this.startDate)):this.endDate=MF(this.startDate,this.duration,1,!0),this.disabled||this.j&&this.j.start(),E.ta($Z,"start changed: "+this.startDate.toUTCString()+" to "+this.endDate.toUTCString()))};
ZZ.prototype.u=function(a,b){"custom"===this.duration&&a&&b&&a.getTime()!=b.getTime()&&(this.endDate=KF(a,"day",!0),this.startDate>this.endDate&&(this.startDate=new Date(this.endDate)),this.disabled||this.j&&this.j.start(),E.ta($Z,"end changed: "+this.startDate.toUTCString()+" to "+this.endDate.toUTCString()))};
ZZ.prototype.bI=function(){this.disabled||(this.startDate=KF(this.startDate,this.duration,!0),this.endDate="custom"===this.duration?new Date(this.startDate):MF(this.startDate,this.duration,1,!0),this.j&&this.j.start(),E.ta($Z,"duration changed: "+this.startDate.toUTCString()+" to "+this.endDate.toUTCString()))};ZZ.prototype.onDurationChanged=ZZ.prototype.bI;
ZZ.prototype.o=function(){if(this.g){var a=YF(this.startDate),b=YF(this.endDate);"custom"===this.duration&&b.setDate(b.getDate()+1);a=a.getTime();b=b.getTime();this.g.aa=!0;this.g.Ud($J(a,b));VJ(this.g,this.duration);XJ(this.g,SJ(this.g));this.g.aa=!1;this.g.Gd(b)}};ZZ.prototype.aO=function(a){this.disabled||(this.startDate=MF(this.startDate,this.duration,a,!0),this.endDate=MF(this.endDate,this.duration,a,!0))};ZZ.prototype.shiftDate=ZZ.prototype.aO;
ZZ.prototype.Di=function(){if(this.g){this.g.stop();var a=this.g;a.o.isEmpty()||(a.o.clear(),a.P.clear(),a.dispatchEvent("timeline.slice.rangeChanged"),a.dispatchEvent("timleline.rangeChanged"),cK(a));this.o()}this.disabled=!1};ZZ.prototype.jl=function(){this.disabled=!0};ZZ.prototype.update=function(){this.g&&(this.startDate=XF(new Date(this.g.Sa())),this.endDate=Qwa(this),this.duration=this.g?this.g.K:"day",R(this.v))};
function Qwa(a){if(a.g){var b=XF(new Date(a.g.Ya()));"custom"===a.duration&&b.setDate(b.getDate()-1);return b}return null}ZZ.prototype.l=function(){this.disabled||this.update()};Q.directive("datePanel",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/datepanel.html",controller:a_,controllerAs:"ctrl"}}]);
function a_(){this.extended=!1;this.startMinute=this.startHour=0;this.endHour=1;this.endMinute=0;this.active=!1;this.sliceTip="Show/hide time filter panel";this.sliceTitle="Time Filter";this.sliceDescription="Creates a time range of less than 24 hours to show data from each loaded day. \nChoose 14:00 to 16:00 to query that time slice every day within the given range. (UTC 0000 = Zulu)";this.g=vg.s()}a_.$inject=["$scope"];a_.prototype.kB=function(){(this.extended=!this.extended)||this.Qo()};
a_.prototype.toggleExtend=a_.prototype.kB;a_.prototype.expand=function(){N.dispatchEvent(new cw("toggleUI","timeline"))};a_.prototype.expand=a_.prototype.expand;a_.prototype.ec=function(){return"UTC"+("Z"==VF?"+0000":VF)};a_.prototype.getOffset=a_.prototype.ec;a_.prototype.jd=function(a,b,c,d){void 0!=this[a]?null==this[a]||this[a]<b?this[a]=parseInt(b,10):this[a]>c&&(this[a]=parseInt(c,10)):d&&(this[a]=parseInt(d,10));this.active=!1};a_.prototype.onChange=a_.prototype.jd;
a_.prototype.Qo=function(){var a=new eJ;this.extended?(a.add($J(36E5*this.startHour+6E4*this.startMinute,36E5*this.endHour+6E4*this.endMinute)),this.active=!0):this.active=!1;this.g.o.clone().isEmpty()&&a.isEmpty()||kK(this.g,a)};a_.prototype.applySlice=a_.prototype.Qo;a_.prototype.eu=function(){this.active&&this.Qo()};a_.prototype.applySliceIfActive=a_.prototype.eu;a_.prototype.dD=function(){this.kB()};a_.prototype.cancelSlice=a_.prototype.dD;
a_.prototype.gO=function(){return 60*this.startHour+this.startMinute<60*this.endHour+this.endMinute};a_.prototype.sliceValid=a_.prototype.gO;Q.directive("choosearea",[function(){return{restrict:"E",scope:{area:"=?",areas:"=?",filter:"=?",helpTitle:"@",helpContent:"@"},templateUrl:"v1541734487/views/query/area/choosearea.html",controller:b_,controllerAs:"choosearea"}}]);
function b_(a){this.v=a;this.v.areas||(Rwa(this),TG.H("propertychange",this.g,!1,this));void 0===this.v.area&&this.v.areas&&0<this.v.areas.length&&(this.v.area=this.v.areas[0]);a.$watch("area",function(b){a.$parent.confirmValue=b});a.$on("$destroy",this.dispose.bind(this))}w(b_,x);b_.$inject=["$scope"];b_.prototype.J=function(){b_.C.J.call(this);TG.M("propertychange",this.g,!1,this)};b_.prototype.g=function(a){this.v&&(Rwa(this),"remove"==a.j&&a.o==this.v.area&&(this.v.area=null),R(this.v))};
function Rwa(a){a.v&&(a.v.areas=JG(TG),a.v.filter&&(a.v.areas=a.v.areas.filter(a.v.filter)))};Q.directive("drawMenu",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/ol/draw/drawmenu.html",controller:c_,controllerAs:"drawMenu"}}]);function c_(a,b){this.L=b;this.drawControls=a.$parent.drawControls;this.showChooseArea=0<JG(TG).length;a.$on("$destroy",this.g.bind(this))}c_.$inject=["$scope","$element"];c_.prototype.g=function(){this.L.remove();this.drawControls=this.L=null};c_.prototype.yk=function(){return!1};c_.prototype.isCountryEnabled=c_.prototype.yk;
c_.prototype.kG=function(){ZR();this.drawControls.ro(!1)};c_.prototype.launchAreaByCoordinates=c_.prototype.kG;c_.prototype.lG=function(){Ooa();this.drawControls.ro(!1)};c_.prototype.launchChooseArea=c_.prototype.lG;c_.prototype.gN=function(){$R();this.drawControls.ro(!1)};c_.prototype.queryWorld=c_.prototype.gN;Q.directive("drawControls",[function(){return{restrict:"AE",replace:!0,scope:{menu:"=",olMap:"=",embeddedControls:"=",hideExtraControls:"="},templateUrl:"v1541734487/views/ol/draw/drawcontrols.html",controller:d_,controllerAs:"drawControls"}}]);
function d_(a,b){x.call(this);this.v=a;this.L=b;this.interaction=null;this.feature=void 0;this.menu=a.menu;this.log=Swa;this.g=a.olMap;this.selectedType="";this.supportsLines=this.supportsLines||!1;this.controlMenu=GZ;b=this.controlMenu.Ha();this.supportsLines&&b.R({label:"Line",eventType:"line",tooltip:"Draw a line on the map",da:['<i class="fa fa-fw fa-long-arrow-right"></i> '],za:HZ,sort:40});this.hideExtraControls&&(b.removeChild("Choose Area"),b.removeChild("Enter Coordinates"),b.removeChild("Whole World"),
b.removeChild("drawMenuSeparator"));this.yk()&&!this.hideExtraControls&&b.R({label:"Country Border",eventType:"countryBorder",tooltip:"Draw a box for query, selection, and zoom",da:['<i class="fa fa-fw fa-globe"></i> '],za:HZ,sort:130});N.H("drawstart",this.apply,!1,this);N.H("drawend",this.Pw,!1,this);N.H("drawcancel",this.apply,!1,this);N.H("box",this.Hf,!1,this);N.H("circle",this.Hf,!1,this);N.H("polygon",this.Hf,!1,this);N.H("line",this.Hf,!1,this);N.H("country",this.Hf,!1,this);b=M.get("drawType",
"box");e_(this,b);a.$on("$destroy",this.dispose.bind(this))}w(d_,x);d_.$inject=["$scope","$element"];var Swa=E.V("os.ui.ol.draw.DrawControlsCtrl");g=d_.prototype;g.J=function(){d_.C.J.call(this);N.M("drawstart",this.apply,!1,this);N.M("drawend",this.Pw,!1,this);N.M("drawcancel",this.apply,!1,this);N.M("box",this.Hf,!1,this);N.M("circle",this.Hf,!1,this);N.M("polygon",this.Hf,!1,this);N.M("line",this.Hf,!1,this);N.M("country",this.Hf,!1,this);this.L=this.v=null};
g.X=function(){return this.g?this.g.X():null};g.Yy=function(){return this.menu};g.Lf=function(a){this.feature&&this.g&&this.g.Bb(this.feature,!0);(this.feature=a)&&this.g&&this.g.cc(this.feature)};function e_(a,b){a.interaction=null;var c=a.X();if(c){c=c.interactions.g;for(var d=0,e=c.length;d<e;d++){var f=c[d];if(f instanceof ut){var h=f.Mv(b);f.setActive(h);h&&(a.interaction=f)}}}else a.Wv();M.set("drawType",b);a.selectedType=b}g.Wv=function(){};g.kx=function(){e_(this,this.selectedType)};
g.apply=function(){R(this.v)};g.Pw=function(a){if(a.target===this.interaction){var b=this.interaction.Ib(),c=this.Yy(),d=this.X();c&&d&&($(d.g).addClass("u-pointer-events-none"),d=new hq(a.l),d.tb(a.geometry.clone()),d.ga(Vb()),d.zb(b),d.set("_node",!1),this.Lf(d),c.open({feature:d,geometry:a.geometry,style:b},{my:"left top",at:"left+"+a.pixel[0]+" top+"+a.pixel[1],of:"#map-container"}),N.Ua(rx,this.kJ,!1,this),this.apply())}};
g.kJ=function(){$(this.X().g).removeClass("u-pointer-events-none");this.Lf(void 0);this.interaction&&this.interaction.Za(!1);this.apply()};g.Hf=function(a){!a||!a.type||"country"==a.type&&this.yk()||this.Tt(a.type)};g.Tt=function(a){E.ta(this.log,"Activating "+a+" control.");O(P.s(),"map.feature.draw",1);O(P.s(),"map.feature.draw_"+a,1);this.interaction&&this.interaction.T()!=a&&(this.interaction.Za(!1),e_(this,a));this.interaction&&this.interaction.Za(!this.interaction.kc())};
d_.prototype.activateControl=d_.prototype.Tt;d_.prototype.ro=function(){var a=this.controlMenu,b=this.L.find(".draw-controls-group");a.open(void 0,{my:"left top+4",at:"left bottom",of:b})};d_.prototype.toggleMenu=d_.prototype.ro;d_.prototype.isActive=function(){return this.interaction?this.interaction.kc():!1};d_.prototype.isActive=d_.prototype.isActive;d_.prototype.yk=function(){return!1};d_.prototype.isCountryEnabled=d_.prototype.yk;Q.directive("osDrawControls",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/draw/drawcontrols.html",controller:f_,controllerAs:"drawControls"}}]);function f_(a,b){this.supportsLines=!0;d_.call(this,a,b);this.log=Twa}w(f_,d_);f_.$inject=["$scope","$element"];var Twa=E.V("os.ui.draw.DrawControlsCtrl");g=f_.prototype;g.J=function(){f_.C.J.call(this);de(L.s(),"map:ready",this.kx,!1,this)};g.X=function(){return L.s().X()};g.Yy=function(){return Tva};
g.Lf=function(a){this.feature&&L.s().Bb(this.feature.D(),!0);(this.feature=a)&&L.s().cc(this.feature)};g.Wv=function(){Zd(L.s(),"map:ready",this.kx,!1,this)};Q.directive("historyButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:g_,controllerAs:"ctrl",template:'<button class="btn btn-secondary" ng-click="ctrl.toggle()" title="History" ng-class="{\'active\': ctrl.isWindowActive()}"><i class="fa fa-fw fa-history"></i></button>'}}]);function g_(a,b){SZ.call(this,a,b);this.g="history"}w(g_,SZ);g_.$inject=["$scope","$element"];Q.directive("layersButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:h_,controllerAs:"ctrl",template:'<button class="btn btn-primary" title="View Layers" ng-click="ctrl.toggle()" ng-class="{active: ctrl.isWindowActive()}"><i class="fa fa-align-justify" ng-class="{\'fa-fw\': puny}"></i> <span ng-class="{\'d-none\': puny}">Layers</span></button>'}}]);function h_(a,b){ZX.call(this,a,b);this.g="layers";this.qa="map.features.layers"}w(h_,ZX);h_.$inject=["$scope","$element"];Q.directive("legendButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:i_,controllerAs:"ctrl",template:'<button class="btn btn-secondary" title="View Legend" ng-click="ctrl.toggle()" ng-class="{active: ctrl.isWindowActive()}"><i class="fa fa-map-signs"></i></button>'}}]);function i_(a,b){ZX.call(this,a,b);this.g="legend";this.qa="map.features.showLedgend"}w(i_,ZX);i_.$inject=["$scope","$element"];Q.directive("measureButton",[function(){return{restrict:"E",replace:!0,scope:{showLabel:"="},controller:j_,controllerAs:"ctrl",template:'<div class="btn-group" ng-right-click="ctrl.openMenu()"><button class="btn btn-secondary" id="measureButton" title="Measure between points" ng-click="ctrl.toggle()" ng-class="{active: measuring}"><i class="fa fa-fw fa-arrows-h"></i> {{showLabel ? \'Measure\' : \'\'}}</button><button class="btn btn-secondary dropdown-toggle dropdown-toggle-split" ng-click="ctrl.openMenu()" ng-class="{active: menu}"></button></div>'}}]);
function j_(a,b){ZX.call(this,a,b);this.menu=Uwa;this.menu.H("geodesic",this.A,!1,this);this.menu.H("rhumb",this.A,!1,this);this.g="measure";this.qa="map.feature.measureToolToggle";this.scope.measuring=!1;this.j={};N.H("drawend",this.u,!1,this);N.H("drawcancel",this.u,!1,this);this.key_="measureMethod";YT=M.get(this.key_,YT)}w(j_,ZX);j_.$inject=["$scope","$element"];
var Uwa=new px(new aw({type:"root",children:[{label:"Measure Geodesic",eventType:"geodesic",tooltip:"Measures the shortest distance between two points (variable bearing).",Aa:Vwa},{label:"Measure Rhumb Line",eventType:"rhumb",tooltip:"Measures the path of constant bearing between two points.",Aa:Vwa}]}));
j_.prototype.toggle=function(a){a:{var b=L.s().X().interactions.g;for(var c=0,d=b.length;c<d;c++)if(b[c]instanceof XT){b=b[c];break a}b=null}if(b){if(a=void 0!==a?a:!b.get("active"))this.j={};c=L.s().X().interactions.g;d=0;for(var e=c.length;d<e;d++)if(c[d]instanceof ut){var f=c[d],h=f.T();a?(this.j[h]=f.get("active"),f.setActive(!1)):h in this.j?f.setActive(this.j[h]):f.setActive(!1)}b.Za(a);b.setActive(a);(this.scope.measuring=a)&&this.qa&&O(P.s(),this.qa,1)}};j_.prototype.toggle=j_.prototype.toggle;
j_.prototype.u=function(a){a.target instanceof XT&&this.toggle(!1)};j_.prototype.A=function(a){YT=a.type;M.set(this.key_,a.type);this.toggle(!0)};function Vwa(){this.da=this.eventType===YT?['<i class="fa fa-fw fa-dot-circle-o"></i>']:['<i class="fa fa-fw fa-circle-o"></i>']};function k_(){this.g=M.get("mute",!1);this.j={};this.l={};this.u={};this.o=null;this.load()}xa(k_);var l_=E.V("os.audio.AudioManager");function Wwa(){var a=k_.s();return jc(a.j)}k_.prototype.load=function(){if(window.HTMLAudioElement)for(var a=["sounds","userSounds"],b=0,c=a.length;b<c;b++){var d=M.get([a[b]]),e;for(e in d){var f=d[e];0===f.indexOf("sounds/")&&(f="v1541734487/"+f);"default"==e.toLowerCase()&&(this.o=e);this.j[e]=f}}else E.hb(l_,"This browser does not support audio")};
k_.prototype.play=function(a,b){if(!(a in this.j))if(this.o)E.ta(l_,'Could not find sound "'+a+'" in sound list, using the default instead.'),a=this.o;else{E.error(l_,'Could not find "'+a+'" in sound list and no default sound was defined.');return}var c=this.j[a];if(c){if(c in this.l)var d=this.l[c];else d=document.createElement("audio"),d.src=c,this.l[c]=d;var e=this.u[c]||0,f=Ia();!this.g&&(void 0===b||f-e>b)&&(E.ta(l_,'Playing "'+a+'" from '+c),d.play(),this.u[c]=f)}};Q.directive("muteButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:m_,controllerAs:"ctrl",template:"<button class=\"btn btn-secondary\" ng-click=\"ctrl.toggle()\" title=\"{{mute ? 'Unmute': 'Mute'}}\"><i class=\"fa fa-fw {{mute ? 'fa-volume-off' : 'fa-volume-up'}}\"></i></button>"}}]);function m_(a){this.scope=a;this.scope.mute=k_.s().g}m_.$inject=["$scope"];m_.prototype.toggle=function(){var a=k_.s();a.g=!a.g;M.set("mute",a.g);this.scope.mute=a.g};m_.prototype.toggle=m_.prototype.toggle;function n_(a,b){x.call(this);this.scope=a;this.element=b;this.g=this.j.bind(this);b.resize(this.g);a.$on("$destroy",this.dispose.bind(this))}w(n_,x);n_.$inject=["$scope","$element"];n_.prototype.J=function(){n_.C.J.call(this);this.element=this.scope=null};n_.prototype.sE=function(){var a=0;this.element.find(".nav-item").each(function(){a+=$(this).outerWidth(!0)});return a};n_.prototype.getNavContentSize=n_.prototype.sE;n_.prototype.j=function(){N.dispatchEvent(new A("os.ui.nav.resize"))};Q.directive("navBottom",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/navbottom.html",controller:n_,controllerAs:"navBottom"}}]);Q.directive("punyparent",[function(){return{restrict:"A",scope:!0,controller:o_}}]);function o_(a,b){this.v=a;this.L=b;this.j=this.o.bind(this);this.g=0;b.resize(this.j);a.$on("$destroy",this.l.bind(this))}o_.$inject=["$scope","$element"];o_.prototype.l=function(){this.L.removeResize(this.j);this.L=this.v=null};
o_.prototype.o=function(){var a=this.L.children().toArray(),b=0;a.forEach(function(a){a=$(a);a.hasClass("resize-triggers")||(b+=a.outerWidth(!0))});b>this.g&&(this.g=b);a.forEach(function(a){a=$(a);var b=a.scope();!a.hasClass("resize-triggers")&&b&&(b.puny=this.L.outerWidth(!0)<this.g)}.bind(this));R(this.v)};Q.directive("navTop",[function(){return{restrict:"E",replace:!0,scope:{options:"=?"},templateUrl:"v1541734487/views/navtop.html",controller:n_,controllerAs:"navTop"}}]);Q.directive("osNavTop",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/osnavtop.html"}}]);Q.directive("saveButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:p_,controllerAs:"ctrl",template:'<button class="btn btn-secondary dropdown-toggle" ng-click="ctrl.openMenu()" title="Save options" ng-right-click="ctrl.openMenu()" ng-class="{active: menu}"><i class="fa fa-floppy-o" ng-class="{\'fa-fw\': puny}"></i> <span ng-class="{\'d-none\': puny}">Save</span></button>'}}]);function p_(a,b){ZX.call(this,a,b);this.menu=NZ}w(p_,ZX);p_.$inject=["$scope","$element"];Q.directive("scaleLine",[function(){return{restrict:"E",replace:!0,scope:!0,template:'<li class="pointer" id="scale-line" ng-click="ctrl.openMenu()" ng-right-click="ctrl.openMenu()"><div class="unit-group"></div></li>',controller:q_,controllerAs:"ctrl"}}]);function q_(a,b){ZX.call(this,a,b);this.menu=QZ;this.l="right top";this.o="right bottom-4"}w(q_,ZX);q_.$inject=["$scope","$element"];Q.directive("searchBox",[function(){return{restrict:"AE",replace:!0,scope:{dataSource:"=datasource",allowMultiple:"@",eventPrefix:"@",searchOnClear:"@",showDropdownText:"@",searchManager:"=?",showClear:"@?"},templateUrl:"v1541734487/views/search/searchbox.html",controller:r_,controllerAs:"searchBox"}}]);
function r_(a,b){this.scope=a;this.K="false"!=a.searchOnClear;this.element=b;this.g=a.searchManager||GU.s();this.O=a&&a.eventPrefix||"";this.allowMultiple="false"!=a.allowMultiple;this.showDropdownText="true"==a.showDropdownText;this.searchTerm=this.g.l;this.showSearchOptions=!1;this.searchOptions=[];this.recentSearches=M.get("search.recent",[]);this.o=b.find(".js-searchbox__typeahead").typeahead();Yd(b[0],"click",this.B,!1,this);this.g.H("change",this.l,!1,this);this.g.H("start",this.u,!1,this);
this.g.H("autocomplete.success",this.G,!1,this);this.g.H("success",this.A,!1,this);N.H("search.refresh",this.search,!1,this);this.l();this.providerGroups=[];this.searchOptionsGroups={};this.searchOptionsNoGroup=[];Xwa(this);b=Rj.s();b.ready?this.I():b.Ua("load",this.I,!1,this);this.j();M.H(s_,this.j,!1,this);a.$on("$destroy",this.destroy.bind(this))}r_.$inject=["$scope","$element"];
r_.prototype.destroy=function(){de(this.element[0],"click",this.B,!1,this);this.g.M("change",this.l,!1,this);this.g.M("start",this.u,!1,this);this.g.M("autocomplete.success",this.G,!1,this);this.g.M("success",this.A,!1,this);N.M("search.refresh",this.search,!1,this);M.M(s_,this.j);this.scope=this.element=null};
r_.prototype.I=function(){var a=this.recentSearches;if(a){var b=!1;try{for(var c=ic(this.g.g),d=c.map(Sw).sort(),e=a.length;e--;){var f=a[e];if("type"in f){var h=f.type||"";b=!0;if("Search All Sources"==f.type)f.ids=d;else{var k=eb(c,$ea.bind(void 0,h));k?f.ids=[k.D()]:a.splice(e,1)}delete f.type}else if(f.ids){for(var l=f.ids.length;l--;)this.g.g[f.ids[l]]||(f.ids.splice(l,1),b=!0);0==f.ids.length&&(a.splice(e,1),b=!0)}else a.splice(e,1),b=!0}}catch(m){this.recentSearches=[],b=!0}b&&t_(this)}};
r_.prototype.B=function(a){rr(a.target,"typeahead")&&this.search()};r_.prototype.clear=function(){this.searchTerm="";this.search()};r_.prototype.clear=r_.prototype.clear;r_.prototype.search=function(){if(this.searchTerm||this.K)this.scope.dataSource?Ywa(this.scope.dataSource,this.searchTerm):this.g.search(this.searchTerm),R(this.scope)};r_.prototype.search=r_.prototype.search;
r_.prototype.l=function(){this.searchOptions=ic(this.g.g);Xwa(this);this.j();if(!this.allowMultiple){var a=!1;this.searchOptions.forEach(function(b){b.isEnabled()&&(a?b.Za(!1):a=!0)})}this.searchTerm&&this.search();R(this.scope)};r_.prototype.u=function(a){a=a.l;a!==this.searchTerm&&(this.searchTerm=a);Zwa(this)};r_.prototype.A=function(){this.searchTerm!=this.g.l&&(this.searchTerm=this.g.l)};
r_.prototype.CO=function(a){!this.allowMultiple&&a.isEnabled()||a.Za(!a.isEnabled());!this.allowMultiple&&a.isEnabled()&&this.searchOptions.forEach(function(b){b!=a&&b.isEnabled()&&b.Za(!1)})};r_.prototype.toggleSearch=r_.prototype.CO;r_.prototype.yi=function(a){this.searchOptions.forEach(function(b){b.Za(a)})};r_.prototype.toggleAll=r_.prototype.yi;r_.prototype.AE=function(a){return a.getName()};r_.prototype.getSearchName=r_.prototype.AE;
r_.prototype.zE=function(a){return this.allowMultiple?a.isEnabled()?"fa-check-square-o":"fa-square-o":a.isEnabled()?"fa-angle-double-right":""};r_.prototype.getSearchIcon=r_.prototype.zE;
function Xwa(a){a.providerGroups=[];a.searchOptionsGroups={};a.searchOptionsNoGroup=[];var b=M.get("providerGroups",{}),c=rb(a.searchOptions);fc(b,function(a,b){this.providerGroups.push(b);var d=[];$a(a,function(a){var b=fb(c,function(b){return a==b.getName()},this);-1<b&&(d.push(c[b]),nb(c,b))},this);this.searchOptionsGroups[b]=d},a);a.searchOptionsNoGroup=c}
r_.prototype.mE=function(a){if(u_(this,a))a="fa-check-square-o";else{a=this.searchOptionsGroups[a];for(var b=!0,c=0;c<a.length;c++)if(a[c].isEnabled()){b=!1;break}a=b?"fa-square-o":"fa-minus-square-o"}return a};r_.prototype.getGroupIcon=r_.prototype.mE;function u_(a,b){a=a.searchOptionsGroups[b];b=!0;for(var c=0;c<a.length;c++)if(!a[c].isEnabled()){b=!1;break}return b}r_.prototype.ut=function(a){var b=u_(this,a);a=this.searchOptionsGroups[a];for(var c=0;c<a.length;c++)a[c].Za(!b)};
r_.prototype.toggleGroup=r_.prototype.ut;r_.prototype.BE=function(a){return this.searchOptionsGroups[a]};r_.prototype.getSearchOptionsGroup=r_.prototype.BE;function $wa(a){if(0==a.providerGroups.length)return null;for(var b=0,c="",d=a.searchOptions.filter(function(a){return a.isEnabled()}),e=0;e<a.providerGroups.length;e++)u_(a,a.providerGroups[e])&&(b+=1,c=a.providerGroups[e]);return 1==b&&d.length==a.searchOptionsGroups[c].length?c:null}r_.prototype.cG=function(a){return a.isEnabled()};
r_.prototype.isSearchEnabled=r_.prototype.cG;r_.prototype.GF=function(){return cb(this.searchOptions,function(a){return!a.isEnabled()})};r_.prototype.hasDisabledSearch=r_.prototype.GF;
r_.prototype.tE=function(){if(0<this.searchOptions.length){var a=this.searchOptions.filter(function(a){return a.isEnabled()});if(1==a.length)return"Search "+a[0].getName()+"...";if(a.length==this.searchOptions.length)return"Search All Types...";if(0==a.length)return"No search types enabled.";var b=$wa(this);return b?"Search "+b+"...":"Search "+a.length+" types..."}return"No search types available."};r_.prototype.getPlaceholderText=r_.prototype.tE;
r_.prototype.dE=function(){if(0<this.searchOptions.length){var a=this.searchOptions.filter(function(a){return a.isEnabled()});if(1==a.length)return a[0].getName();if(a.length==this.searchOptions.length)return"All";if(0!=a.length){var b=$wa(this);return b?b:a.length+" Types"}}return"None"};r_.prototype.getDropdownText=r_.prototype.dE;
r_.prototype.wE=function(a){var b="";a=a.ids;0<a.length&&(b=ic(this.g.g).map(Sw).sort(),b=yb(a,b)?"(All Search Types)":1==a.length?(b=this.g.g[a[0]]||null)&&b.getName()?"("+b.getName()+")":"(1 Search Type)":"("+a.length+" Search Types)");return b};r_.prototype.getRecentDetails=r_.prototype.wE;
r_.prototype.xE=function(a){var b="Load recent search",c=a.ids;if(0<c.length){var d=ic(this.g.g).map(Sw).sort();yb(c,d)?b='Search all types for "'+a.term+'".':1==c.length?(c=this.g.g[c[0]]||null)&&c.getName()&&(b="Search "+c.getName()+' for "'+a.term+'".'):(b='Search the following types for "'+a.term+'":\n - ',a=c.map(function(a){return(a=this.g.g[a]||null)?a.getName():"Unknown search type"},this),b+=a.join("\n - "))}return b};r_.prototype.getRecentTitle=r_.prototype.xE;
r_.prototype.TN=function(a){this.searchTerm=a.term;for(var b=0;b<this.searchOptions.length;b++){var c=this.searchOptions[b];-1<a.ids.indexOf(c.D())?c.Za(!0):c.Za(!1)}this.search();a=Za(this.recentSearches,a);0<a&&Db(this.recentSearches,a,0);t_(this)};r_.prototype.setFromRecent=r_.prototype.TN;r_.prototype.yN=function(){this.o.data("typeahead").source=[];if(this.searchTerm){var a=this.g,b=this.searchTerm;a.l=b;a.A=[];a=IU(a,b);for(var c=0,d=a.length;c<d;c++)a[c].Lr(b)}};
r_.prototype.refreshAutocomplete=r_.prototype.yN;
r_.prototype.DO=function(a){var b=a.originalEvent;if(this.showSearchOptions=!this.showSearchOptions)var c=IU(this.g).map(Sw).sort(),d=Yd(document,"click",function(a){if(this.element){var e=this.element.find(".js-searchbox__search-options")[0]||null,h=this.element.find(".js-searchbox__recent-searches")[0]||null;e=nr(e,a.target);h=nr(h,a.target);a.l==b||e&&!h&&this.allowMultiple||(ee(d),a.stopPropagation(),this.showSearchOptions=!1,h||(a=IU(this.g).map(Sw).sort(),yb(a,c)||this.search()),R(this.scope))}},
!1,this)};r_.prototype.toggleSearchOptions=r_.prototype.DO;r_.prototype.G=function(a){var b=a.pe();b&&0<b.length&&(a=this.o.data("typeahead"),b=a.source.concat(b),ub(b),a.source=b,a.lookup())};function Zwa(a){if(a.searchTerm){var b=IU(a.g).map(Sw).sort(),c=fb(a.recentSearches,function(a){return a.term==this.searchTerm},a);-1<c?Db(a.recentSearches,c,0):(a.recentSearches.unshift({ids:b,term:a.searchTerm}),5<a.recentSearches.length&&(a.recentSearches.length=5));t_(a)}}
function t_(a){var b=[];a.recentSearches.forEach(function(a){a.ids&&(a={ids:a.ids.slice(),term:a.term},b.push(a))});M.set("search.recent",b)}r_.prototype.KD=function(a){N.dispatchEvent(new A("favorite",a));this.showSearchOptions=!1;R(this.scope)};r_.prototype.favoriteSearch=r_.prototype.KD;r_.prototype.j=function(){var a=[];Bra.I&&(a=Bra.I(axa.filter(v_(),[bxa],5)));this.favorites=a;R(this.scope)};
r_.prototype.aG=function(a){var b=location.href.split("#");a=a.uri.split("#");return 2==b.length&&2==a.length&&b[1]==a[1]};r_.prototype.isFavoriteActive=r_.prototype.aG;Q.directive("serversButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:w_,controllerAs:"ctrl",template:'<button class="btn btn-secondary" ng-click="ctrl.toggle()" title="Servers" ng-class="{\'active\': ctrl.isWindowActive(\'settings\')}"><i class="fa fa-fw fa-database"></i><span ng-if="serverError" class="ml-1 badge badge-warning"><i class="fa fa-fw fa-warning"></i></span></button>'}}]);
function w_(a,b){SZ.call(this,a,b);this.g="servers";Y.H("dataProviderLoaded",this.j,!1,this);Y.H("editDataProvider",this.j,!1,this);Y.H("removeDataProvider",this.j,!1,this)}w(w_,SZ);w_.$inject=["$scope","$element"];w_.prototype.l=function(){w_.C.l.call(this);Y.M("dataProviderLoaded",this.j,!1,this);Y.M("editDataProvider",this.j,!1,this);Y.M("removeDataProvider",this.j,!1,this)};w_.prototype.j=function(){this.scope&&(this.scope.serverError=Y.Sh(),R(this.scope))};Q.directive("settingsButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:x_,controllerAs:"ctrl",template:'<button class="btn btn-secondary" title="View Settings" ng-click="ctrl.toggle()" ng-class="{active: ctrl.isWindowActive()}"><i class="fa fa-gears"></i></button>'}}]);function x_(a,b){ZX.call(this,a,b);this.g="settings"}w(x_,ZX);x_.$inject=["$scope","$element"];Q.directive("stateButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:y_,controllerAs:"ctrl",template:'<button class="btn btn-secondary dropdown-toggle o-state-button" ng-click="ctrl.openMenu()" title="State options" ng-right-click="ctrl.openMenu()" ng-class="{active: menu}"> <i class="fa fa-bookmark" ng-class="{\'fa-fw\': puny}"></i> <span ng-class="{\'d-none\': puny}">States</span></button>'}}]);function y_(a,b){ZX.call(this,a,b);this.menu=KZ}w(y_,ZX);y_.$inject=["$scope","$element"];Q.directive("windowsButton",[function(){return{restrict:"E",replace:!0,scope:!0,controller:z_,controllerAs:"ctrl",template:'<button class="btn btn-secondary dropdown-toggle" ng-click="ctrl.openMenu()" title="Windows and other views" ng-right-click="ctrl.openMenu()" ng-class="{active: menu}">More</button>'}}]);function z_(a,b){ZX.call(this,a,b);this.menu=VX}w(z_,ZX);z_.$inject=["$scope","$element"];Q.directive("ngRightClick",[function(){return{restrict:"A",controller:A_}}]);function A_(a,b,c,d){this.v=a;this.L=b;this.g=c(d.ngRightClick);b.on("contextmenu",this.l.bind(this));a.$on("$destroy",this.j.bind(this))}A_.$inject=["$scope","$element","$parse","$attrs"];A_.prototype.j=function(){this.L&&(this.L.off("contextmenu"),this.L=null);this.v=this.g=null};A_.prototype.l=function(a){this.v&&this.v.$apply(function(){a.preventDefault();a.stopPropagation();this.v&&this.g&&this.g(this.v,{$event:a})}.bind(this))};function cxa(){jE.call(this,[]);this.title="Clear query entries"}w(cxa,jE);function B_(a,b,c){dxa++;this.ma=c||dxa;this.result=a;this.j=b||0}var dxa=0;B_.prototype.D=function(){return this.ma};B_.prototype.getId=B_.prototype.D;B_.prototype.Xi=function(){return this.result};B_.prototype.lc=function(){return this.j};B_.prototype.l=function(){};function C_(){B_.call(this,0,0)}w(C_,B_);C_.prototype.g=function(){return'<div class="coord-result-card"><div class="result-card-header">No results found</div></div>'};function D_(a,b,c,d,e){C.call(this);this.id=a;a=null!=e?e:!0;this.enabled=M.get(["search",this.D(),"enabled"].join("."),a);this.name=b;this.priority=null!=d?d:0;this.type=c||"";this.term=null;this.log=exa}w(D_,C);var exa=E.V("os.search.AbstractSearch");g=D_.prototype;g.isEnabled=function(){return this.enabled};g.Za=function(a){this.enabled=a;M.set(["search",this.D(),"enabled"].join("."),a)};g.D=function(){return this.id};g.getName=function(){return this.name};g.T=function(){return this.type};
g.search=function(a,b,c,d,e){this.term=a;return this.Xs.apply(this,arguments)};g.LA=function(){return!0};function E_(a,b){x.call(this);this.scope=a;this.element=b;this.log=fxa;this.result=this.scope.result;this.feature=this.result.Xi();b=L.s().W("search");b instanceof Vz&&(this.layer=b);this.layer||(b=new Rz,b.Ta("Search Results"),b.ga("search"),b.oa[pK]=!1,b.oa[qK]=!1,b=new Vz({source:b}),b.Ta("Search Results"),b.ga("search"),b.zb(Az(wz.s(),Sy)),b.ve(""),b.Ag(!1),b.Nf(""),b.zg(""),b.P=!0,b.Kf=wa,XB(wz.s(),"search").showLabels=!0,eM(L.s(),b),this.layer=b);this.layer.N().cc(this.feature);H(this.layer.N(),
"propertychange",this.g,this);a.$on("$destroy",this.dispose.bind(this))}w(E_,x);E_.$inject=["$scope","$element"];var fxa=E.V("os.ui.search.FeatureResultCardCtrl");E_.prototype.J=function(){E_.C.J.call(this);var a=L.s();yf(this.layer.N(),"propertychange",this.g,this);var b=this.layer.N();b.Bb(this.feature);b.La().length||(this.layer.Ag(!0),a.removeLayer(this.layer));this.scope=this.element=this.feature=null};
E_.prototype.g=function(a){if(a instanceof K){var b=a.j,c=a.o;c||(c=a.u);if(c&&c.length)for(var d=this.element,e=0;e<c.length;e++)c[e]===this.feature?b===MI?d.addClass("u-card-selected"):b===NI?d.removeClass("u-card-selected"):b===PI&&(a.o?d.addClass("u-card-highlight"):d.removeClass("u-card-highlight")):d.hasClass("u-card-highlight")&&d.removeClass("u-card-highlight")}};E_.prototype.qd=function(a){return this.feature.get(a)};E_.prototype.getField=E_.prototype.qd;E_.prototype.ME=function(){this.result.l()};
E_.prototype.goTo=E_.prototype.ME;E_.prototype.Dn=function(){this.feature.set("_highlightStyle",dz);sz(this.feature);Gz(this.layer,[this.feature])};E_.prototype.over=E_.prototype.Dn;E_.prototype.out=function(){this.feature.set("_highlightStyle",void 0);sz(this.feature);Gz(this.layer,[this.feature])};E_.prototype.out=E_.prototype.out;Q.directive("coordresultcard",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/search/place/coordinateresultcard.html",controller:F_,controllerAs:"ctrl"}}]);function F_(a,b){E_.call(this,a,b);a=this.feature.Z();a=Ml(Bo(a),S);this.lat=a[1];this.lon=a[0];this.mgrs=osasm.toMGRS([this.lon,this.lat])}w(F_,E_);F_.$inject=["$scope","$element"];function G_(a,b,c){B_.call(this,a,null!=c?c:100);c=fi(gxa);a.set("_style",c);var d=!!a.get("name");if(b=b||(d?"name":void 0))c.labels=[{column:b,showColumn:!1}],d||a.set("name",a.get(b));sz(a)}w(G_,B_);var gxa={image:{type:"icon",scale:.75,src:"http://maps.google.com/mapfiles/kml/paddle/wht-blank.png",color:"rgba(0,255,255,1)"},text:{}};
G_.prototype.l=function(){var a=this.result.get("extent");if(a)a=Ql(a,"EPSG:4326",S);else{var b=this.result.Z();b instanceof hp?dR(L.s(),{center:Bo(b)}):b&&(a=b.Y())}a&&L.s().Pi(a,2,16)};G_.prototype.g=function(){return"<coordresultcard></coordresultcard>"};function hxa(a){if(a&&"label"in a){var b=a.label;delete a.label}a=new hq(a);a.ga(J(a));var c=fi(gxa);a.set("_style",c);b&&(c.labels=[{column:b,showColumn:!1}]);sz(a);return a};function H_(){D_.call(this,"coord","Coordinates");this.log=ixa;this.priority=100;this.type="coord"}w(H_,D_);var ixa=E.V("os.ui.search.place.CoordinateSearch");H_.prototype.cancel=function(){};H_.prototype.Lr=function(a){this.term=a;this.dispatchEvent(new FU("autocomplete.success",this.term,[]))};
H_.prototype.Xs=function(a,b,c){this.term=a;var d=[];try{var e=Op(a);if(e)if(90>e.lat&&-90<e.lat){e.lon=Vo(e.lon);var f=hxa({geometry:Ap(new hp([e.lon,e.lat])),label:a});d.push(new G_(f))}else{var h="The processed latitude was out of bounds [-90.0, 90.0]. Result for "+a+":"+JSON.stringify(e);throw Error(h);}else{var k=a.replace(/\s+/g,"").toUpperCase();if(k.match(Cp)){var l=osasm.toLonLat(k);f=hxa({geometry:Ap(new hp(l)),label:a});d.push(new G_(f))}}}catch(m){E.error(this.log,"coordinate search failed:",
m)}this.dispatchEvent(new FU("success",a,Tw(d,b,c),d.length));return!0};Q.directive("resultcard",[function(){return{restrict:"E",replace:!0,scope:!0,template:"<div></div>",controller:I_,controllerAs:"resultCard"}}]);function I_(a,b,c){if("result"in a){var d=a.result.g();Eb(d,"<")?b.append(c(d)(a)):b.append(d)}a.$on("$destroy",this.g.bind(this))}I_.$inject=["$scope","$element","$compile"];I_.prototype.g=function(){};Q.directive("autovheight",[function(){return{restrict:"A",scope:{siblings:"@",padding:"@?",minHeight:"@?"},controller:J_}}]);
function J_(a,b,c,d){this.v=a;this.L=b;this.minHeight=null!=this.v.minHeight?this.v.minHeight:20;this.padding=null!=this.v.padding?this.v.padding:0;this.g=this.j.bind(this);b.parent().resize(this.g);d(this.o.bind(this));ic(cx).forEach(function(a){$(a).resize(this.g)}.bind(this));Ck(this.j.bind(this));N.H(IS,this.j,!1,this);a.$on("resize",this.j.bind(this));a.$on("$destroy",this.l.bind(this))}J_.$inject=["$scope","$element","$injector","$timeout"];
J_.prototype.l=function(){N.M(IS,this.j,!1,this);this.L.parent().removeResize(this.g);var a=this.v.siblings;if(a&&this.g)try{$(a).removeResize(this.g)}catch(b){}this.v=this.L=this.g=null};
J_.prototype.j=function(){if(this.L){var a=window.innerHeight,b=0;ic(cx).forEach(function(a){b+=$(a).outerHeight()});this.v.siblings&&$.makeArray($(this.v.siblings)).forEach(function(a){b+=$(a).outerHeight()});var c=a-b,d=this.minHeight+"vh";c/a*100>this.minHeight&&(d=c/a*100-this.padding+"vh");this.L.css("height",d)}};J_.prototype.o=function(){var a=this.v.siblings;a&&$(a).resize(this.g)};Q.directive("searchresults",[function(){return{restrict:"E",scope:{parent:"@"},replace:!0,transclude:!0,templateUrl:"v1541734487/views/search/searchresults.html",controller:K_,controllerAs:"searchResults"}}]);function K_(a){this.v=a;this.show=!1;this.results=[];this.loading=!1;var b=GU.s();b.H("start",this.rv,!1,this);b.H("success",this.An,!1,this);b.H("progress",this.An,!1,this);b.H("autocomplete.success",this.jv,!1,this);a.$on("$destroy",this.SL.bind(this));jxa(this)}K_.$inject=["$scope"];g=K_.prototype;
g.SL=function(){var a=GU.s();a.M("start",this.rv,!1,this);a.M("success",this.An,!1,this);a.M("progress",this.An,!1,this);a.M("autocomplete.success",this.jv,!1,this);this.v=null};g.rv=function(){this.loading=!0};g.An=function(a){this.loading="success"!==a.type;jxa(this);R(this.v)};function jxa(a){a.results=(GU.s().pe()||[]).slice(0,20);a.show=0<a.results.length}g.jv=function(){this.results.length=0;this.show=!1;R(this.v)};g.track=function(a){return a.D()};K_.prototype.track=K_.prototype.track;function L_(){C.call(this);this.g=new CI(this.vH,100,this);for(var a=SB(Fy),b=0,c=a.length;b<c;b++)H(a[b],"propertychange",this.ln,this);Y.H("dataSourceAdded",this.jy,!1,this);Y.H("dataSourceRemoved",this.ky,!1,this);N.H("addLayer",this.ei,!1,this);N.H("removeLayer",this.ei,!1,this)}w(L_,C);xa(L_);g=L_.prototype;
g.J=function(){this.g.dispose();this.g=null;N.M("addLayer",this.ei,!1,this);N.M("removeLayer",this.ei,!1,this);Y.M("dataSourceAdded",this.jy,!1,this);Y.M("dataSourceRemoved",this.ky,!1,this);for(var a=SB(Fy),b=0,c=a.length;b<c;b++)yf(a[b],"propertychange",this.ln,this);Y=null};g.ei=function(){this.g.Pd()};g.vH=function(){this.dispatchEvent("histogramChange")};g.jy=function(a){a.source&&(H(a.source,"propertychange",this.ln,this),this.ei())};
g.ky=function(a){a.source&&(yf(a.source,"propertychange",this.ln,this),this.ei())};g.ln=function(a){switch(a.j){case QI:if(!a.o)break;case "color":case LI:case "timeEnabled":case "timeModel":case "title":case "visible":this.ei()}};function cua(a){var b=[];0<a.interval&&(b=Dg(L.s()).map(Cea).filter($u),b.length||(b=SB(Fy)),b=b.map(function(b){return F(b,"os.hist.IHistogramProvider")?b.ly(a):null}).filter($u));return b};Q.directive("dateTime",[function(){return{restrict:"AE",replace:!0,scope:{value:"=",disabled:"=?",isRequired:"=?",invalid:"=?",hidecontrols:"=?"},templateUrl:"v1541734487/views/datetime/datetime.html",controller:M_,controllerAs:"dateTimeCtrl"}}]);
function M_(a){this.v=a;this.second=this.minute=this.hour=this.date=null;this.dateOptions={changeYear:!0,changeMonth:!0,yearRange:"1900:+10"};a.required=a.isRequired||!1;kxa(this);a.$watch("disabled",function(b){a.required=!0===b?!1:a.isRequired});a.$watch("isRequired",function(){a.required=a.disabled?!1:a.isRequired});a.$on("reset",function(a,c){c==this.v.value&&(a=new Date(this.v.value),this.date=new Date(a.getTime()+6E4*a.getTimezoneOffset()),this.hour=a.getUTCHours(),this.minute=a.getUTCMinutes(),
this.second=a.getUTCSeconds())}.bind(this));a.$on("$destroy",this.g.bind(this))}M_.$inject=["$scope"];var lxa=E.V("os.ui.datetime.DateTimeCtrl");M_.prototype.g=function(){this.v=this.date=null};
function kxa(a){a.v.$watch("value",function(a){a?(a=new Date(a),this.date=new Date(a.getTime()+6E4*a.getTimezoneOffset()),this.hour=a.getUTCHours(),this.minute=a.getUTCMinutes(),this.second=a.getUTCSeconds()):this.second=this.minute=this.hour=this.date=null}.bind(a));a.l=a.v.$watch("dateTimeCtrl.date",a.j.bind(a))}M_.prototype.j=function(a,b){a&&a!=b&&this.Dt("date")};
M_.prototype.Dt=function(a){E.ta(lxa,"dateTime.updateValue");a&&"date"===a&&Aa(this.date)&&!isNaN(this.date.getTime())&&(null==this.hour&&(this.hour=0),null==this.minute&&(this.minute=0),null==this.second&&(this.second=0));Aa(this.date)&&!isNaN(this.date.getTime())&&null!=this.hour&&null!=this.minute&&null!=this.second?(a=new Date(this.date.getTime()-6E4*this.date.getTimezoneOffset()),a.setUTCHours(this.hour),a.setUTCMinutes(this.minute),a.setUTCSeconds(this.second),this.v.value=a.toISOString().replace(/\.[0-9]{3}Z/,
"Z"),this.errorString=null,this.v.invalid=!1):(this.v.invalid=!0,this.requiredString=this.errorString=null,this.v.required&&!Aa(this.date)&&null==this.hour&&null==this.minute&&null==this.second?this.requiredString="Required!":Aa(this.date)?null==this.hour?this.errorString="Hour field invalid! Range: 0-23":null==this.minute?this.errorString="Minute field invalid! Range: 0-59":null==this.second&&(this.errorString="Second field invalid! Range: 0-59"):this.errorString="Please provide a valid date.")};
M_.prototype.updateValue=M_.prototype.Dt;M_.prototype.UN=function(){$(".js-date-time__time-input").addClass("ng-dirty");$(".js-wheel-date__date-input").addClass("ng-dirty");var a=new Date;this.date=new Date(a.getTime()+6E4*a.getTimezoneOffset());this.hour=a.getUTCHours();this.minute=a.getUTCMinutes();this.second=a.getUTCSeconds();this.Dt();this.v&&this.v.dateTimeForm&&this.v.dateTimeForm.$setDirty()};M_.prototype.setNow=M_.prototype.UN;
M_.prototype.reset=function(){this.l();this.second=this.minute=this.hour=this.date=null;this.errorString=this.v.value=null;this.v.invalid=!1;kxa(this)};M_.prototype.reset=M_.prototype.reset;Q.directive("animationsettings",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/windows/animationsettings.html",controller:N_,controllerAs:"animationCtrl"}}]);
function N_(a,b){this.scope=a;this.element=b;this.g=this.j=this.l=this.o=null;b=vg.s();this.o=new Date(b.Sa()+UF);this.l=new Date(b.Ya()+UF);this.scope.autoConfig=mxa;this.scope.autoLoop=!!b.l.isEmpty();this.scope.autoLoop?(this.scope.loopStart=this.j=this.o,this.scope.loopEnd=this.g=this.l):(this.scope.loopStart=this.j=new Date(WJ(b).start+UF),this.scope.loopEnd=this.g=new Date(WJ(b).end+UF));O_(this.scope,b.ec(),b.A);this.Ro();this.scope.duration=b.K;this.scope.durations=["day","week","month","year"];
this.scope.units=P_;this.scope.fade=b.O;this.scope.lock=b.B;a.$watch("loopStart",this.u.bind(this));a.$watch("loopEnd",this.u.bind(this));a.$on("$destroy",this.G.bind(this));a.loopRangeTip="The time range used to animate data.";a.tilesTip="The size of each tile frame.";a.windowTip="The size of the blue active window.";a.skipTip="The amount of time that the active window skips forward or back with each frame.";a.fadeTip="Fade in/out features based on the size of your timeline window and scroll direction.";
a.lockTip="During animation this causes the visible window to lock from the start point.";this.A=new ft(document);this.A.H("key",this.B,!1,this);this.scope.$emit("window.ready")}N_.$inject=["$scope","$element"];N_.prototype.G=function(){z(this.A);this.element=this.scope=this.g=this.j=this.l=this.o=this.element=null};var mxa=!0,P_=[{label:"ms",value:1},{label:"secs",value:1E3},{label:"mins",value:6E4},{label:"hrs",value:36E5},{label:"days",value:864E5},{label:"weeks",value:6048E5}];
N_.prototype.JF=function(){return 1<Sg(vg.s().l).length};N_.prototype.hasMultipleRanges=N_.prototype.JF;N_.prototype.u=function(){"string"===typeof this.scope.loopStart&&(this.j=cG(this.scope.loopStart,null));"string"===typeof this.scope.loopEnd&&(this.g=cG(this.scope.loopEnd,null));this.Ro()};
N_.prototype.Ro=function(){if(this.scope.autoConfig){var a=vg.s(),b=SJ(a);if(24174E5<=b)this.scope.duration="week",O_(this.scope,6048E5,6048E5);else if(4302E5<=b)this.scope.duration="day",O_(this.scope,864E5,864E5);else{var c=Tta(b/24);a=hJ(a.j).getLength();c<a/24&&(c=Math.min(b/2,a/24));this.scope.duration="day";O_(this.scope,c,c/2)}}};N_.prototype.autoConfigure=N_.prototype.Ro;
function O_(a,b,c){for(var d=0,e=P_.length;d<e;d++)0===b%P_[d].value&&(a.windowUnit=P_[d],a.window=b/P_[d].value),0===c%P_[d].value&&(a.skipUnit=P_[d],a.skip=c/P_[d].value)}
N_.prototype.accept=function(){var a=vg.s();this.scope.fade!=a.O&&aK(a,this.scope.fade);this.scope.lock!=a.B&&(bK(a,this.scope.lock),O(P.s(),"timeline.features.settings-lock",1));dK(a);if(!this.scope.autoLoop){var b=this.j.getTime()-UF,c=this.g.getTime()-UF;b!=c&&oK(a,new bJ(b,c))}mxa=this.scope.autoConfig;XJ(a,this.scope.window*this.scope.windowUnit.value);YJ(a,this.scope.skip*this.scope.skipUnit.value);VJ(a,this.scope.duration);a.Gd(WJ(a).start+a.ec());gX(this.scope.timeline,[a.Sa(),a.Ya()]);this.cancel()};
N_.prototype.accept=N_.prototype.accept;N_.prototype.cancel=function(){kx(this.element)};N_.prototype.cancel=N_.prototype.cancel;N_.prototype.nI=function(){O(P.s(),"timeline.features.settings-fade",1)};N_.prototype.onFadeChange=N_.prototype.nI;N_.prototype.B=function(a){27==a.keyCode?this.cancel():13==a.keyCode&&this.accept()};Q.directive("time",[function(){return{restrict:"E",replace:!0,scope:{hours:"=",mins:"=",secs:"="},templateUrl:"v1541734487/views/time/time.html",controllerAs:"time"}}]);Q.directive("timesettings",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/windows/timelinesettings.html",controller:Q_,controllerAs:"timeCtrl"}}]);
function Q_(a,b){this.scope=a;this.element=b;a=vg.s();this.scope.offset="UTC"+("Z"==VF?"+0000":VF);b=this.scope;for(var c=Sg(a.j),d=[],e=0;e<c.length;e++)d.push({start:(new Date(c[e].start+UF)).toISOString(),end:(new Date(c[e].end+UF)).toISOString()});b.loadRanges=d;b=this.scope;a=Sg(a.o);c=[];for(d=0;d<a.length;d++)864E5==a[d].end&&(a[d].end=86399E3),c.push({start:{hours:Math.floor(a[d].start/36E5),mins:Math.floor(a[d].start/6E4)%60,secs:Math.floor(a[d].start/1E3)%60},end:{hours:Math.floor(a[d].end/
36E5),mins:Math.floor(a[d].end/6E4)%60,secs:Math.floor(a[d].end/1E3)%60}});b.sliceRanges=c;this.scope.$on("$destroy",this.l.bind(this));this.scope.loadStartTip="The start of a time range used to load data.";this.scope.loadEndTip="The end of a time range used to load data.";this.scope.sliceTip="A time range less than 24 hours to show data from each loaded day.";this.scope.sliceStartTip="The start of a slice used to load data. Start can be later than end if it crosses midnight.";this.scope.sliceEndTip=
"The end of a slice used to load data.";this.scope.offsetTip="All times will be shown with this offset (or time zone).";this.scope.sliceModels={};this.g=new ft(document);this.g.H("key",this.j,!1,this);this.scope.$emit("window.ready")}Q_.$inject=["$scope","$element"];Q_.prototype.l=function(){z(this.g);this.scope=this.element=null};
Q_.prototype.accept=function(){var a=vg.s(),b=this.scope.offset;b=b.replace(/(utc|[:])/gi,"");var c=("-"==b.charAt(0)?-1:1)*(36E5*parseInt(b.substring(1,3),10)+6E4*parseInt(b.substring(3,5),10));0===c&&(b="Z");M.set(["time","offsetLabel"],b);M.set(["time","offset"],c);var d=this.scope.sliceRanges,e=new eJ;for(b=0;b<d.length;b++){c=36E5*d[b].start.hours+6E4*d[b].start.mins+1E3*d[b].start.secs;var f=36E5*d[b].end.hours+6E4*d[b].end.mins+1E3*d[b].end.secs;c>f&&(e.add($J(0,f)),f=864E5);e.add($J(c,f))}kK(a,
e);d=this.scope.loadRanges;if(0<d.length){e=new eJ;Ria(a);for(b=0;b<d.length;b++){c=R_(d[b].start);f=R_(d[b].end);var h=c,k=f;c>f&&(h=f,k=c);e.add($J(h,k))}Via(a,e);a.dispatchEvent("timeline.refreshLoad");O(P.s(),"timeline.features.settings-timeRange",1)}gX(this.scope.timeline,[a.Sa(),a.Ya()]);this.cancel()};Q_.prototype.accept=Q_.prototype.accept;Q_.prototype.cancel=function(){kx(this.element)};Q_.prototype.cancel=Q_.prototype.cancel;
Q_.prototype.j=function(a){27==a.keyCode?this.cancel():13==a.keyCode&&this.accept()};Q_.prototype.LC=function(){var a={start:{hours:0,mins:0,secs:0},end:{hours:1,mins:0,secs:0}},b=this.scope.sliceRanges.length?this.scope.sliceRanges[this.scope.sliceRanges.length-1]:null;b&&(a={start:{hours:b.start.hours,mins:b.start.mins,secs:b.start.secs},end:{hours:b.end.hours,mins:b.end.mins,secs:b.end.secs}});this.scope.sliceRanges.push(a)};Q_.prototype.addSlice=Q_.prototype.LC;
Q_.prototype.DN=function(a){this.scope.sliceRanges.splice(a,1)};Q_.prototype.removeSlice=Q_.prototype.DN;Q_.prototype.addRange=function(){var a=this.scope.loadRanges[this.scope.loadRanges.length-1];this.scope.loadRanges.push({start:a.start,end:a.end})};Q_.prototype.addRange=Q_.prototype.addRange;Q_.prototype.removeRange=function(a){this.scope.loadRanges.splice(a,1)};Q_.prototype.removeRange=Q_.prototype.removeRange;function R_(a){return("string"===typeof a?cG(a,null):a).getTime()-UF}
Q_.prototype.valid=function(){for(var a=this.scope.loadRanges,b=0;b<a.length;b++){var c=R_(a[b].start),d=R_(a[b].end);if(c>=d)return!1}return!0};Q_.prototype.valid=Q_.prototype.valid;Q_.prototype.isValid=function(a,b){return new Date(a)<new Date(b)};Q_.prototype.isValid=Q_.prototype.isValid;Q_.prototype.hG=function(a,b,c){var d=!0;a&&b&&(d=36E5*a.hours+6E4*a.mins+1E3*a.secs<=36E5*b.hours+6E4*b.mins+1E3*b.secs||c);return d};Q_.prototype.isValidSlice=Q_.prototype.hG;Q.directive("timelinePanel",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/timelinepanel.html",controller:S_,controllerAs:"timelineCtrl"}}]);function S_(a,b,c){iX.call(this,a,b,c);this.pa=L_.s();this.pa.H("histogramChange",this.Ca,!1,this);Sea&&OZ&&(this.o.j=OZ)}w(S_,iX);S_.$inject=["$scope","$element","$timeout"];g=S_.prototype;g.destroy=function(){this.pa.M("histogramChange",this.Ca,!1,this);this.pa=null;S_.C.destroy.call(this)};
g.Ly=function(a){a.layer instanceof Vz?(a=a.layer.N(),a instanceof Rz&&T_(!0,a)):a.layer instanceof hR&&T_(!0,a.layer)};g.Di=function(){try{angular.element(".js-date-control").scope().dateControl.jl()}catch(a){}T_(!0);L.s().H("addLayer",this.Ly,!1,this);S_.C.Di.call(this);N.dispatchEvent("map:glRepaint")};g.jl=function(){S_.C.jl.call(this);L.s().M("addLayer",this.Ly,!1,this);T_(!1);angular.element(".js-date-control").scope().dateControl.Di();angular.element(".js-date-panel").scope().ctrl.eu();N.dispatchEvent("map:glRepaint")};
function T_(a,b){if(b)b.Xn(a);else{b=Dg(L.s());for(var c=0,d=b.length;c<d;c++){var e=b[c];e instanceof hR?e.Xn(a):e instanceof Vz&&(e=e.N(),e instanceof Rz&&e.Xn(a))}}}g.ZN=function(){var a={timeline:angular.element(".c-svg-timeline").scope().timeline};fx({label:"Timeline Settings",icon:"fa fa-clock-o",x:"center",y:"center",width:"525",height:"auto",modal:"true","no-scroll":"true","show-close":"true"},"<timesettings></timesettings>",void 0,void 0,void 0,a)};S_.prototype.settings=S_.prototype.ZN;
S_.prototype.RC=function(){var a={timeline:angular.element(".c-svg-timeline").scope().timeline};fx({label:"Animation Settings",icon:"fa fa-sliders",x:"center",y:"center",width:"450","max-width":"600","min-width":"450",height:"auto",modal:"true","no-scroll":"true"},"<animationsettings></animationsettings>",void 0,void 0,void 0,a)};S_.prototype.animationSettings=S_.prototype.RC;S_.prototype.Ea=function(){S_.C.Ea.call(this);L.s().lf();N.dispatchEvent("map:glRepaint")};function U_(a){dT.call(this);this.j=!1;this.ld=a}w(U_,dT);
U_.prototype.Jb=function(a,b){U_.C.Jb.call(this,a,b);var c=new oM;b&&this.g(b,c);var d=b?b.type:a?a.T():null,e=Y;d=d&&d in e.l?e.l[d]:null;this.ld&&((b=b?b.provider:null)?(c.provider=b,c.enabled=b.kc()):(c.file=a,c.label=a.getFileName(),c.enabled=!0),fx({label:(b?b.Pe?"Edit ":"View ":"Add ")+d.title,icon:"fa fa-database",x:"center",y:"center",width:"500","min-width":"350","max-width":"600",height:"auto","min-height":"250","max-height":"500",modal:"true","show-close":"true","no-scroll":"true"},this.ld,
void 0,void 0,void 0,{config:c}))};function V_(){ko.call(this);this.l=!1}w(V_,ko);V_.prototype.ob=function(){return this.l};V_.prototype.isLoading=V_.prototype.ob;V_.prototype.Wa=function(a){a!=this.l&&(this.l=a,this.dispatchEvent(new K("loading",a,!a)))};V_.prototype.setLoading=V_.prototype.Wa;V_.prototype.tp=function(){return this.ob()};V_.prototype.nc=function(a){this.Wa(a.ob());V_.C.nc.call(this,a)};function W_(a){V_.call(this);this.u=a;this.Kb=null}w(W_,V_);W_.prototype.load=function(a){this.Wa(!0);var b=new ko;this.Kb=new X_(b,a,this.u);this.Kb.H("success",this.o,!1,this);this.Kb.H("error",this.g,!1,this);this.Kb.load()};W_.prototype.o=function(){this.Wa(!1);this.Kb.M("success",this.o,!1,this);this.Kb.M("error",this.g,!1,this);this.Bc(this.Kb.o.na());z(this.Kb);this.Kb=null;this.dispatchEvent("success")};
W_.prototype.g=function(){this.Wa(!1);this.Kb.M("success",this.o,!1,this);this.Kb.M("error",this.g,!1,this);z(this.Kb);this.Kb=null;this.dispatchEvent("error")};function nxa(){this.j=this.o=this.l=this.g=null}g=nxa.prototype;g.ym=function(){return[]};g.zp=function(){return this.l};g.DA=function(a){this.l=a};g.Be=function(){return this.o};g.fo=function(a){this.o=a};g.bg=function(){return this.j};g.Yn=function(a){this.j=a};g.getColumns=function(){return this.g};g.setColumns=function(a){this.g=a};g.ra=function(){};g.restore=function(){};function Y_(){LE.call(this);this.l=this.A=!1;this.u=this.O=this.ab=this.K=null;this.o="arc"}w(Y_,LE);jg["plugin.arc.layer.ArcLayerDescriptor"]=Y_;F(Y_,"os.ui.ogc.IFeatureTypeDescriptor");F(Y_,"os.filter.IFilterable");g=Y_.prototype;g.Ma=function(){return this.ab};g.Mb=function(a){this.ab=a};g.Y=function(){return this.O};g.Cc=function(a){this.O=a};g.getTags=function(){return null};g.T=function(){return this.A&&this.l?"Tile and Feature Groups":this.A?"Tile Layers":this.l?"Feature Layers":null};
g.gd=function(){var a="";this.A&&(a+='<img src="v1541734487/images/tiles-base.png" title="Tile layer"/>');this.l&&(a+='<img src="v1541734487/images/features-base.png" title="Feature layer"/>');Z_(this)&&(a+='<img class="time-icon" src="v1541734487/images/time-base.png" title="This layer supports animation over time"/>');return a};function Z_(a){return!!a.qk()||!!a.eg()}g.Lh=function(){var a=[this.D()];this.A&&a.push(this.D()+"#tiles");this.l&&a.push(this.D()+"#features");return a};
function oxa(a,b,c,d){a.Mb(d);a.ga(c);a.Ta(b.name);a.fb(b.description);a.K=b.id;if(c=b.copyrightText)d=a.qb(),a.fb(d+"\n\nCopyright: "+c),a.I=c;if(c=b.extent)try{4326===c.wkid&&a.Cc([c.xmin,c.ymin,c.xmax,c.ymax])}catch(m){}d=c=null;var e=b.timeInfo;if(e)try{c=e.startTimeField,d=e.endTimeField,a.aa=e.timeExtent[0],a.U=e.timeExtent[1]}catch(m){}e=b.drawingInfo;a.Yc("#ffffff");if(e)try{var f;"esriGeometryPoint"!=b.geometryType&&(f=kc(e,["renderer","symbol","outline","color"]));f||(f=kc(e,["renderer",
"symbol","color"]));if(f){var h=re(f);a.Yc(h)}}catch(m){}(f=b.capabilities)?(f=f.split(/\s*,\s*/),pxa(a,gb(f,"Map")),qxa(a,gb(f,"Data"))):(a.A=!0,a.l=!0);if((b=b.fields)&&q(b)&&0<b.length){a.u=new nxa;f=[];h=0;for(e=b.length;h<e;h++){var k=b[h],l=k.name;f.push({name:l,type:rxa(k.type)});l===c?a.u.fo(c):l===d?a.u.Yn(d):"esriFieldTypeGeometry"===l&&a.u.DA(l)}f.sort(function(a,b){return Lb(a.name,b.name)});a.u.setColumns(f)}else a.l=!1;a.yh()}g.ze=function(){return this.u};g.zk=function(){return!!this.u};
function qxa(a,b){a.l=b}function pxa(a,b){a.A=b}g.Va=function(){var a=[];this.l&&a.push(sxa(this));this.A&&a.push(txa(this));return a};
function txa(a){var b={},c=new ch;c.set("layers","show: "+a.K);b.type=$_;b.id=a.D()+"#tiles";b.layerType=a.T();b.providedBy=a.rb();b.animate=Z_(a);b.tags=a.getTags();b.url=a.Ma();b.params=c;b.title=a.S();b.extent=a.Y();(c=a.I)&&(b.attributions=[c]);b.colorControl="colorControl:pickerReset";b.baseColor=a.Ja();Z_(a)&&(b.timeParam="time",b.timeFormat="{start},{end}",b.dateFormat="timestamp");return b}
function sxa(a){var b={};b.id=a.D()+"#features";var c=new ch;c.set("f","json");c.set("inSR","4326");c.set("outSR","4326");c.set("outFields","*");c.set("geometryType","esriGeometryPolygon");c.set("geometry","{geom}");c.set("returnIdsOnly",!0);Z_(a)&&c.set("time","{time}");b.type=a0;b.layerType=a.T();b.animate=Z_(a);b.url=a.Ma()+"/"+a.K+"/query";b.params=c;b.usePost=!0;b.title=a.S();b.spatial=!0;b.temporal=Z_(a);b.filter=!0;b.load=!0;b.tags=a.getTags();b.provider=a.rb();a.A||(b.attributions=[a.I]);
var d=a.ze();b.featureType=d;c=[];if(Z_(a)&&d&&(a=d.Be())){d=d.bg();var e=new FT(d?"start":"instant");e.ja=a;e.format="Timestamp";c.push(e);d&&(a=new FT("end"),a.ja=d,a.format="Timestamp",c.push(a))}0<c.length&&(b.mappings=c);return b}g.Zg=function(){return this.l};g.hj=function(){var a=this.D()+"#features";GY(a,this.S()+" Features")};g.uf=function(){return this.ab+"/"+this.K+"/query!!"+this.S()};g.Se=function(){return this.u?this.u.getColumns():null};
g.Ld=function(){var a=Y_.C.Ld.call(this);this.Zg()&&(a="<filterabledescriptornodeui></filterabledescriptornodeui>"+a);return a};g.pm=function(){return[this.D()+"#features"]};function b0(a){V_.call(this);this.log=uxa;this.ab=null;this.o=a;this.g=null}w(b0,V_);var uxa=E.V("plugin.arc.node.ArcServiceNode");b0.prototype.Mb=function(a){var b=a.indexOf("/FeatureServer"),c=a.indexOf("/MapServer");-1<b?a=a.substring(0,b):-1<c&&(a=a.substring(0,c));this.ab=a};b0.prototype.load=function(a){this.g&&z(this.g);this.Wa(!0);this.Mb(a);a=this.ab+"/MapServer/layers?f=json";this.g=new Ni(a);Si(this.g,"*/*");this.g.H("success",this.B,!1,this);this.g.H("error",this.u,!1,this);this.g.load()};
b0.prototype.B=function(){this.Wa(!1);var a=this.g.g;z(this.g);var b=this.g=null;try{b=JSON.parse(a)}catch(l){}if(b&&this.o&&(a=b.layers)&&0<a.length){b=0;for(var c=a.length;b<c;b++){var d=a[b],e=this.o,f=Y,h="";this.ab&&(h=this.ab.replace(e.Ma(),""));h=Xb(h+"|"+d.id);var k=e.D()+"#"+h;(h=f.Ka(k))||(h=new Y_);h.Ec(e.ba());oxa(h,d,k,this.ab+"/MapServer");h.Ze=e;pF(f,h);d=new XM;YM(d,h);this.R(d)}}this.dispatchEvent("success")};
b0.prototype.u=function(){this.Wa(!1);var a=this.g.j;z(this.g);this.g=null;E.error(this.log,"Arc loading failed for URL: "+(a?a.toString():"no URL available!"));this.dispatchEvent("error")};function X_(a,b,c){C.call(this);this.o=a;this.ab=b;this.u=c;this.g=null;this.log=vxa;this.j=[];this.l=[]}w(X_,C);var vxa=E.V("plugin.arc.ArcLoader");g=X_.prototype;g.J=function(){X_.C.J.call(this);this.u=this.o=null;this.g&&(z(this.g),this.g=null)};g.Ma=function(){return this.ab};g.Mb=function(a){this.ab=a};
g.load=function(){var a=this.ab+"?f=json";E.ta(this.log,"Loading Arc capabilities from URL: "+a);this.g=new Ni(a);Si(this.g,"*/*");this.g.H("success",this.xM,!1,this);this.g.H("error",this.wM,!1,this);this.g.load()};
g.xM=function(){var a=this.g.g;z(this.g);this.g=null;E.ta(this.log,"Arc load successful from: "+this.ab);var b=null;try{b=JSON.parse(a)}catch(h){E.error(this.log,"The Arc response JSON was invalid!")}this.j.length=0;this.l.length=0;if(b){if((a=b.folders)&&q(a))for(var c=0,d=a.length;c<d;c++){var e=a[c],f=new W_(this.u);f.Da(e);f.H("success",this.mh,!1,this);f.H("error",this.mh,!1,this);f.load(this.ab+"/"+e);this.j.push(f)}if((a=b.services)&&q(a))for(c=0,d=a.length;c<d;c++)e=a[c],"MapServer"===e.type&&
(e=e.name,e=e.substring(e.lastIndexOf("/")+1),f=new b0(this.u),f.Da(e),f.H("success",this.mh,!1,this),f.H("error",this.mh,!1,this),f.load(this.ab+"/"+e),this.j.push(f));(b=b.layers)&&q(b)&&(e="Folder",b=this.ab.lastIndexOf("/MapServer"),-1==b&&(b=this.ab.lastIndexOf("/FeatureServer")),-1!=b&&(b=this.ab.substring(0,b),e=b.substring(b.lastIndexOf("/")+1)),f=new b0(this.u),f.Da(e),f.H("success",this.mh,!1,this),f.H("error",this.mh,!1,this),f.load(this.ab),this.j.push(f))}0===this.j.length&&this.dispatchEvent("success")};
g.mh=function(a){a=a.target;a.M("success",this.mh,!1,this);a.M("error",this.mh,!1,this);a.na()&&a.na().length&&this.l.push(a);mb(this.j,a);0===this.j.length&&(this.o.Bc(this.l),this.l=[],this.dispatchEvent("success"))};g.wM=function(){var a=this.g.j;z(this.g);this.g=null;E.error(this.log,"Arc loading failed for URL: "+a.toString());this.dispatchEvent("error")};function rxa(a){return"esriFieldTypeBoolean"===a||"esriFieldTypeString"===a?"string":"esriFieldTypeDate"===a?"datetime":"esriFieldTypeGeometry"===a?"gml":"decimal"}function wxa(a){GY(a.D())}function xxa(a){return(a=a.Va())&&a.featureType&&(a=a.featureType)?a.getColumns():null}var yxa=/arcgis/i,zxa=/ArcGIS REST Services Directory/i;function c0(){hF.call(this);this.u="ogc";this.Kb=null;this.log=Axa}w(c0,hF);var Axa=E.V("plugin.arc.ArcServer");c0.prototype.Wb=function(a){c0.C.Wb.call(this,a);var b=a.url;-1==b.indexOf("/rest/services")&&(b+="/rest/services");b=b.replace(/\/+$/,"");a.id&&this.ga(a.id);this.Mb(b)};
c0.prototype.load=function(a){c0.C.load.call(this,a);E.info(this.log,this.ba()+" requesting Arc Server capabilities.");this.Bc(null);a=new ko;this.Kb=new X_(a,this.url,this);this.Kb.load();this.Kb.H("success",this.l,!1,this);this.Kb.H("error",this.g,!1,this)};c0.prototype.l=function(){E.info(this.log,this.ba()+" base Arc server capabilities loaded.");this.Kb.M("success",this.l,!1,this);this.Kb.M("error",this.g,!1,this);this.Bc(this.Kb.o.na());this.Kb&&(z(this.Kb),this.Kb=null);this.Wa(!1)};
c0.prototype.g=function(){this.Kb.M("success",this.l,!1,this);this.Kb.M("error",this.g,!1,this);this.Kb&&(z(this.Kb),this.Kb=null);var a='Request failed for <a target="_blank" href="'+this.Ma()+'">Arc Server Capabilities</a>';this.getError()||(a="Server ["+this.ba()+"]: "+a,this.G||rj(qj.s(),a,Qh),E.error(Axa,a),jF(this,a),this.Wa(!1));this.Wa(!1)};function d0(a,b){a.error="";this.scope=a;this.element=b;this.g=this.scope.config.provider||null;this.Vr();a.$emit("window.ready")}d0.$inject=["$scope","$element"];d0.prototype.Vr=function(){this.scope.edit=this.g?this.g.Pe:!0};
d0.prototype.accept=function(){if(!this.scope.form.$invalid&&!this.scope.testing)if(!this.g||this.scope.error||this.g.Pe&&this.Ou()){this.scope.testing=!0;var a=this.g?this.g.D():Vb();this.g=this.ik();this.g.ga(a);this.g.Pe=!0;this.g.H("propertychange",this.j,!1,this);this.g.load(!0)}else this.g&&this.g.Pe?this.Hj():this.close()};d0.prototype.accept=d0.prototype.accept;d0.prototype.close=function(){this.g&&this.g.M("propertychange",this.j,!1,this);kx(this.element)};d0.prototype.close=d0.prototype.close;
d0.prototype.apply=function(){try{this.scope.$apply()}catch(a){}};d0.prototype.j=function(a){"loading"!=a.j||a.o||(this.g.M("propertychange",this.j,!1,this),this.scope.testing=!1,this.scope.error=this.g.Ui(),this.g.getError()?this.apply():this.Hj())};d0.prototype.Hj=function(){var a=this.Ky();M.set(["userProviders",this.g.D()],a);rF(Y,this.g.D());qF(Y,this.g);this.close()};function Bxa(a,b,c,d){function e(b){var c=Y.o.na(),e=a.config.provider||null;if(c)for(var f=0,m=c.length;f<m;f++)if(c[f].ba()===b&&e!==c[f])return d.$setValidity("unique",!1),b;d.$setValidity("unique",!0);return b}d.$formatters.unshift(e);d.$parsers.unshift(e)}Bxa.$inject=["$scope","$element","$attrs","$ctrl"];Q.directive("uniqueProviderTitle",[function(){return{require:"ngModel",link:Bxa}}]);function Cxa(a,b,c,d){function e(b){if(b&&a.config){var c=(a.config.alternateUrls||[]).indexOf(b);if(c!=a.$index&&-1!=c)return d.$setValidity("unique",!1),b}d.$setValidity("unique",!0);return b}d.$formatters.unshift(e);d.$parsers.unshift(e)}Cxa.$inject=["$scope","$element","$attrs","$ctrl"];Q.directive("uniqueServerUrl",[function(){return{require:"ngModel",link:Cxa}}]);function e0(a,b){d0.call(this,a,b);this.element.find('input[name="title"]').focus()}w(e0,d0);e0.$inject=["$scope","$element"];g=e0.prototype;g.Vr=function(){e0.C.Vr.call(this);var a=this.scope.config.file;a?(a=a.Pb())&&(a=a.match(/title>([^<]*)<\//i))&&1<a.length&&(this.scope.config.label=a[1]):this.g&&(this.scope.config.label=this.g.ba())};g.Ou=function(){return this.Ma()!==this.scope.config.url};g.Ma=function(){return this.g?this.g.Ma():""};
g.Ky=function(){var a={},b=["label","url","enabled","type"],c=this.scope.config,d;for(d in c)-1<b.indexOf(d)&&(a[d]=c[d]);return a};g.Hj=function(){this.g&&this.g.Da(this.scope.config.label);e0.C.Hj.call(this)};Q.directive("arcserver",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/forms/singleurl.html",controller:f0,controllerAs:"ctrl"}}]);function f0(a,b){e0.call(this,a,b);b=a.config.file;a.config.url=b?b.Ma():this.Ma();a.urlExample="https://www.example.com/arcgis/rest/services";a.config.type="arc";a.config.label=this.ba()||"ArcGIS Server"}w(f0,e0);f0.$inject=["$scope","$element"];f0.prototype.ik=function(){var a=new c0;a.Wb(this.scope.config);return a};
f0.prototype.Ma=function(){return this.g?this.g.Ma()||"":""};f0.prototype.ba=function(){return this.g?this.g.ba()||"":""};function g0(){$L.call(this);this.log=Dxa;this.animate=!1}w(g0,$L);var Dxa=E.V("os.layer.config.AbstractDataSourceLayerConfig");g=g0.prototype;g.ac=function(a){g0.C.ac.call(this,a);void 0!==a.animate?this.animate=a.animate:this.animate=!1};
g.Me=function(a){this.ac(a);var b=this.N(a);a.attributions&&(b.Ol=Lu(b,a.attributions),b.ia());b.ga(this.id);OK(b,this.vd(a));b.pi(this.Dd(a));b.Ta(this.title);EK(b,this.animate);this.columns&&b.setColumns(this.columns);var c=this.W(b,a);this.restore(c,a);"load"in a||(a.load=!0);a.load&&b.refresh();return c};g.restore=function(a,b){b&&a.restore(b)};g.Ll=wa;
function Exa(a,b,c){var d=c.getColumns();if(d){var e=c.zp();e&&ob(d,function(a){return a.name==e});if(b=Y.Ka(b.id||""))if(b=b.getColumns()){var f={};d.forEach(function(a){a.name&&(f[a.name]=a.type||"string")});b.forEach(function(a){var b=a.name;f[b]&&(a.type=f[b])})}d=d.map(Fxa);(a=a.N())&&a.setColumns(d)}}g.Dd=function(a){var b=new gT(this.Jf(a));a=xB(a.url);b.K=a;return b};g.W=function(a){return new Vz({source:a})};
g.vd=function(a){var b=new Xg(this.url);this.params&&ah(b,this.params);b=new Ni(b);b.oh=a.usePost?"POST":"GET";return b};g.N=function(){return new NK(void 0)};function Fxa(a){var b=a.name.toUpperCase(),c=new Wv;c.id=b;c.name=b;c.field=a.name;c.type=a.type;Dx(c);return c};function h0(a,b,c,d,e){Hi.call(this,a,e);this.o=b;this.u=c;this.g=d}w(h0,Hi);h0.prototype.j=function(a){a=a.g;var b=a.get(this.o);b&&a.set(this.o,b.replace(this.u,this.g))};function j0(){this.j=this.g=this.l=null}j0.prototype.N=function(){return this.j};j0.prototype.Cb=function(a){this.j=a};function EU(a,b,c){b=a.l.format(b);a.g.g=b;b=a.j.l;Ui(b,a.g.D());Pi(b,a.g);if(void 0!==c?c:1)c=lE,a=a.j.D(),c.g[a]=!0,c.u.start()};function k0(){this.g=null}w(k0,x);g=k0.prototype;g.J=function(){k0.C.J.call(this);this.pc()};g.Cb=function(a){var b=null;a instanceof ArrayBuffer&&(a=Dw(a)||null);"string"===typeof a?b=JSON.parse(a).features:Ba(a)&&(b=a.features);b&&(this.g?this.g=this.g.concat(b):this.g=b)};g.pc=function(){this.g=null};g.Cd=function(){return null!=this.g&&0<this.g.length};
g.Zc=function(){if(this.g){for(var a=[],b=0,c=this.g.length;b<c;b++){var d=new hq,e=this.g[b],f=e.id||Vb();d.ga(f);if(f=e.geometry){var h=null;f.x&&f.y?h=new hp([f.x,f.y]):f.paths?h=new Jo(f.paths[0]):f.rings?h=new qp(f.rings):f.points?h=new jp(f.points):f.xmin&&(h=new qp([[[f.xmin,f.ymin],[f.xmin,f.ymax],[f.xmax,f.ymax],[f.xmax,f.ymin],[f.xmin,f.ymin]]]));h&&d.tb(Ap(h))}if(e=e.attributes)for(var k in e)d.set(k,e[k]);a.push(d)}this.g=null;return a}return null};function l0(){h0.call(this,"ArcFilter","where","","",100)}w(l0,h0);l0.prototype.j=function(a){var b=this.g;b?a.g.set("where",b):a.g.remove("where")};function m0(){this.j=this.u=this.o=this.modifier=this.I=this.l=null;this.g=!1}w(m0,x);g=m0.prototype;g.bz=function(){return this.I};function n0(a){var b=a.areaId;return"*"!==b?!!TG.get(b)&&a.includeArea:!1}function Gxa(a){return!!TG.get(a.areaId)&&!a.includeArea}function Hxa(a){var b=a.areaId,c=TG.get(b);if(a.spatialRequired)return!!c&&!!c.get("shown");"*"!==b&&c&&!c.get("shown")&&(a.areaId="*");return!0}function o0(a){a=a.filterId;return"*"!==a?(a=OC.sb(a),!!a&&!!a.isEnabled()):!0}
function Ixa(a){return TG.get(a.areaId)}
g.fs=function(){for(var a=TG,b=OC,c=["area","filter"],d=lE.getEntries(this.l,null,null,!0),e=[],f=0,h=d.length;f<h;f++){var k=vc(d[f]);k.spatialRequired=this.g;e.push(k)}e=e.filter(Hxa);d=e.filter(Gxa).map(Ixa);f=e.filter(n0);f.length?e=f.filter(o0):(e=e.filter(o0),ub(e,null,function(a){return a.filterId}));var l="";if(this.g&&!f.length)return l;var m=c[0]+"Id";e.sort(function(a,b){return xb(a[m],b[m])});var n=void 0,p="",r=!0,u=null;f=0;for(h=e.length;f<h;f++){k=e[f];var v=k[m],y=k.areaId,B=k.filterId,
G=y&&k.includeArea?a.get(y):null;B=B?b.sb(B):null;var D=v===y?B:G;v!==n&&(n&&(p=this.wrap(p,c[1],d,r),p+=this.write(u),l+=this.wrapAll(p),p=""),n=v);p+=this.write(D);u=v===y?G:B;r=k.filterGroup}p=this.wrap(p,c[1],d,r);p+=this.write(u);l+=this.wrapAll(p);return l=this.wrap(l,c[0],d,r)};g.write=function(a){return a?a instanceof bC?this.Gl(a):this.o?this.o.format(a):"":""};g.Gl=function(a){return this.j?this.j.format(a):a.sb()||""};
g.wrap=function(a,b,c,d){d=void 0!==d?d:!0;var e="";if("area"==b){if(e+=this.o.j(a),this.u&&c&&0<c.length){a={};b=0;for(d=c.length;b<d;b++){var f=c[b].D();f in a||(e+=this.u.format(c[b]),a[f]=!0)}e=this.u.j(e)}}else this.j&&!Hb(Tb(a))&&(e+=this.j.wrap(a,d));return e};g.wrapAll=function(a){return this.j?this.j.wrapAll(a):""};function p0(){this.G=!1;this.A=new Fh(this.fL,250,this);this.source=null;this.g=!1}w(p0,m0);g=p0.prototype;g.J=function(){p0.C.J.call(this);this.A.dispose();this.Cb(null)};g.N=function(){return this.source};g.bz=function(){return this.source?this.source.S():""};
g.Cb=function(a){var b=lE;this.source&&(this.I=this.l=null,b.M("propertychange",this.ux,!1,this),yf(this.source,"propertychange",this.yy,this));if(this.source=a)this.l=this.source.D(),this.source.refresh=this.refresh.bind(this),b.H("propertychange",this.ux,!1,this),H(this.source,"propertychange",this.yy,this)};g.yy=function(a){"visible"==a.j&&this.source.yb()&&this.G&&(this.G=!1,q0(this))};g.ux=function(a){a=a.o;var b=this.source.D();if("*"in a||b in a)this.source.clear(),this.refresh()};
g.fL=function(){this.source.ob()?this.A.start():q0(this)};function q0(a){a.A.isActive()||(a.source.yb()?(a.rA(),a.Du()):a.G=!0)}g.Du=function(){this.g&&!this.modifier.g||PK(this.source)};g.refresh=function(a){var b=lE,c=this.source.D();this.g?iH(b,c)||iH(b,"*")?Jxa(this,a):this.source.clear():Jxa(this,a)};function Jxa(a,b){b?q0(a):(a.source.zj(),a.A.start())}g.rA=function(){var a=this.fs();this.modifier.g=a;var b=this.source.l;b&&(Ui(b,this.modifier),Pi(b,this.modifier));this.g&&!a&&this.source.clear()};function r0(){}r0.prototype.format=function(a){var b="";if(a&&a.Z()){var c=a.Z().clone().toLonLat();a=a.get("interpolationMethod");Ns("EPSG:4326",a);Rs(c);var d=Os=Ms=null;switch(c.T()){case "Circle":d=(new qp([Up(Xo(c),Yo(c))])).getCoordinates();break;case "MultiLineString":case "Polygon":d=c.getCoordinates();break;case "LineString":d=c.getCoordinates();break;case "MultiPolygon":d=[];c.getCoordinates().forEach(function(a){d=d.concat(a)});break;default:d=c.Y()}d&&(b=JSON.stringify({rings:d}))}return b};
r0.prototype.ti=function(){return!0};r0.prototype.j=function(a){a=a.split("}{");for(var b={rings:[]},c=0,d=a.length;c<d;c++){Eb(a[c],"{")||(a[c]="{"+a[c]);Fb(a[c],"}")||(a[c]+="}");var e=JSON.parse(a[c]);b.rings=b.rings.concat(e.rings)}return JSON.stringify(b)};function s0(){h0.call(this,"ArcSpatial","geometry","","",100)}w(s0,h0);s0.prototype.j=function(a){var b=this.g;b&&a.g.set("geometry",b)};function t0(){p0.call(this);this.modifier=new l0;this.o=new r0;this.g=!0;this.B=new s0}w(t0,p0);var Kxa=E.V("plugin.arc.query.ArcQueryHandler");function Lxa(a){for(var b=lE.getEntries(a.l,null,null,!0),c=[],d=0,e=b.length;d<e;d++){var f=vc(b[d]);f.spatialRequired=a.g;c.push(f)}return c=c.filter(Hxa)}
t0.prototype.fs=function(){var a="",b=Lxa(this);b=b.filter(n0);b=b.filter(o0);if(!b.length)return a;a=!!b[0].filterGroup;for(var c=[],d={},e=0,f=b.length;e<f;e++){var h=b[e].filterId;h&&!d[h]&&(d[h]=!0,(h=OC.sb(h))&&c.push(h))}b=c;a=null!=a?a:!0;c="";if(b)for(b instanceof bC&&(b=[b]),d=0;d<b.length;d++)if(e=b[d]?b[d].sb():null)try{var k=Wx(e),l=kr(k);if(l){e=KC;if(f=l){var m=f.getElementsByTagName("PropertyIsLike");if(0!=m.length)for(h=0;h<m.length;h++){var n="UPPER("+MC(m[h].childNodes)+")";null!=
m[h].querySelector("PropertyName")&&or(m[h].querySelector("PropertyName"),n);if(null!=m[h].querySelector("Literal")){a:{for(var p=NC(m[h].childNodes),r=0;1>r;r++)if("'"==p.charAt(0)&&"'"==p.charAt(p.length-1)){var u=p.substring(1,p.length-1);break a}u=p}var v=u.toUpperCase();Qb(v,"*")||(v="*"+v+"*");or(m[h].querySelector("Literal"),v)}}}var y=e(f,void 0,!0);y&&(c=c?c+(" "+(a?"AND":"OR")+" ("+y):"("+y,c+=")")}}catch(B){}return c};
function Mxa(a){var b=!1,c={},d=Lxa(a),e=Ab(d,function(a){var d=a.areaId;if(n0(a)&&!c[d])return b=c[d]=!0,"inclusion";if(Gxa(a)&&!c[d])return c[d]=!0,"exclusion"});if(!b)return"";d=null;var f=e.inclusion;e=e.exclusion;for(var h=0,k=f.length;h<k;h++){var l=f[h];if(l=(l=l.areaId)?TG.get(l):null)try{if(d)rv(d,l,!0);else{var m=l.Z();m&&(d=new hq(m.clone()))}}catch(n){E.error(Kxa,"error merging inclusion areas",n)}}if(d&&e)for(h=0,k=e.length;h<k;h++)if(l=e[h],m=(l=l.areaId)?TG.get(l):null)try{tv(d,m,!0)}catch(n){if("Result geometry is empty"===
n.message){d=null;break}E.error(Kxa,"error merging exclusion areas",n)}a=a.o.format(d);z(d);return a}t0.prototype.Du=function(){this.g&&!this.B.g||PK(this.source)};t0.prototype.rA=function(){var a=this.fs();this.modifier.g=a;a=Mxa(this);this.B.g=a;var b=this.source.l;b&&(Ui(b,this.modifier),Pi(b,this.modifier),Ui(b,this.B),Pi(b,this.B));this.g&&!a&&this.source.clear()};function Nxa(){}Nxa.prototype.format=function(a){return a.Sa()+", "+a.Ya()};function u0(a){NK.call(this,a);this.log=Oxa;this.P=[];this.K=0;this.Is=!0}w(u0,NK);jg["plugin.arc.source.ArcRequestSource"]=u0;var Oxa=E.V("plugin.arc.source.ArcRequestSource");g=u0.prototype;g.J=function(){v0(this);u0.C.J.call(this)};g.zj=function(){v0(this);u0.C.zj.call(this)};
g.lr=function(){var a="Request complete for "+this.S();E.info(this.log,a);this.K=0;v0(this);a=this.l.g;try{var b=JSON.parse(a)}catch(k){this.Wa(!1);return}a=this.l.j.clone();var c=this.l.oh,d=a.g;d.remove("geometry");d.remove("geometryType");d.remove("objectIds");d.remove("returnIdsOnly");d.remove("time");d.remove("where");b=b.objectIds;if(b&&q(b)&&0<b.length)for(var e=0,f=b.length;e<f;e+=1E3){var h=Math.min(f,e+1E3);d.set("objectIds",b.slice(e,h).join(","));h=new Ni(a);h.oh=c;h.H("success",this.JI,
!1,this);h.H("error",this.II,!1,this);h.load();this.P.push(h);this.K++}else this.Wa(!1)};function v0(a){for(var b=0,c=a.P.length;b<c;b++)z(a.P[b]);a.P=[]}g.JI=function(a){this.K--;a=a.target;var b=a.g;z(a);SK(this.B,b);0===this.K&&this.Wa(!1)};g.II=function(a){this.K--;E.error(this.log,"Error loading IDs for Arc source: "+this.S());z(a.target);0===this.K&&this.Wa(!1)};function w0(){g0.call(this)}w(w0,g0);var a0="arcfeature";g=w0.prototype;
g.Me=function(a){this.ac(a);var b=this.N(a);b.ga(this.id);OK(b,this.vd(a));b.pi(this.Dd(a));EK(b,void 0!==this.animate?this.animate:!1);b.Ta(this.title);var c=this.W(b,a);a&&c.restore(a);var d=a.featureType;d&&Exa(c,a,d);var e=null!=a.filter?a.filter:!1,f=null!=a.spatial?a.spatial:!1;d=null!=a.temporal?a.temporal:!1;if(e||f||d)e&&(e=wxa.bind(void 0,c),c.o=e,e=xxa.bind(void 0,c),c.I=e),Pi(b.l,new l0),e=new t0,e.Cb(b),f=lE,f.j.push(e),f.l.start(),d&&(e=new h0("time","time","{time}",""),d=new j0,d.l=
new Nxa,d.g=e,d.Cb(b),e=DU.s(),f=b.D(),e.g[f]=d,EU(d,e.j,!1));a.load&&b.refresh();return c};g.N=function(){return new u0};g.vd=function(a){a=w0.C.vd.call(this,a);var b=this.params.get("outputformat"),c=/json/i;b&&c.test(b)&&Si(a,"application/json, text/plain, */*");return a};g.Jf=function(){return new k0};g.Dd=function(a){var b=new gT(this.Jf(a));a.mappings&&FM(b,a.mappings);DM(b,["Radius","SemiMajor","SemiMinor"]);return b};function x0(a,b,c){Df.call(this);c=c?c:{};this.fc=a;this.state=b;this.g=null;this.key="";this.l=void 0===c.transition?250:c.transition;this.B={}}I(x0,Df);x0.prototype.ia=function(){this.dispatchEvent("change")};x0.prototype.getKey=function(){return this.key+"/"+this.fc};function Dla(a){if(!a.g)return a;var b=a.g;do{if(b.getState()==zI)return b;b=b.g}while(b);return a}
function Pxa(a){if(a.g){var b=a.g;do{if(b.getState()==zI){b.g=null;break}else 1==b.getState()?a=b:0==b.getState()?a.g=b.g:a=b;b=a.g}while(b)}}x0.prototype.getState=function(){return this.state};x0.prototype.Ga=function(a){this.state=a;this.ia()};function Ela(a,b,c){if(!a.l)return 1;var d=a.B[b];if(!d)d=c,a.B[b]=d;else if(-1===d)return 1;b=c-d+1E3/60;return b>=a.l?1:Math.pow(b/a.l,3)};function y0(a,b,c,d,e,f){x0.call(this,a,b,f);this.A=d;this.G=c;this.wa=new Image;null!==d&&(this.wa.crossOrigin=d);this.o=null;this.I=e}I(y0,x0);g=y0.prototype;g.J=function(){1==this.state&&(z0(this),this.wa=Qxa());this.g&&this.g.dispose();this.state=5;this.ia();x0.prototype.J.call(this)};g.Pa=function(){return this.wa};g.getKey=function(){return this.G};g.MG=function(){this.state=AI;z0(this);this.wa=Qxa();this.ia()};
g.NG=function(){this.state=this.wa.naturalWidth&&this.wa.naturalHeight?zI:tI;z0(this);this.ia()};g.load=function(){this.state==AI&&(this.state=0,this.wa=new Image,null!==this.A&&(this.wa.crossOrigin=this.A));0==this.state&&(this.state=1,this.ia(),this.o=[xf(this.wa,"error",this.MG,this),xf(this.wa,"load",this.NG,this)],this.I(this,this.G))};function z0(a){a.o.forEach(sf);a.o=null}function Qxa(){var a=um(1,1);a.fillStyle="rgba(0,0,0,0)";a.fillRect(0,0,1,1);return a.canvas};function A0(a){ym.call(this,a)}I(A0,ym);A0.prototype.Li=function(a){for(var b,c;this.Kg()&&!(b=this.j.value_,c=b.fc[0].toString(),c in a&&a[c].contains(b.fc));)this.pop().dispose()};function Rxa(a){if(0!==a.l){var b=a.g.key_.split("/").map(Number)[0];a.forEach(function(a){if(a.fc[0]!==b){var c=a.fc;this.remove(c[0]+"/"+c[1]+"/"+c[2]);a.dispose()}},a)}};function Sxa(a,b,c,d){var e=Ll(c,b,a);c=Bl(b,d,c);b=ml(b);void 0!==b&&(c*=b);b=ml(a);void 0!==b&&(c/=b);b=a.Y();if(!b||Sk(b,e))a=Bl(a,c,e)/c,isFinite(a)&&0<a&&(c/=a);return c}function B0(a,b,c,d){a=c-a;b=d-b;var e=Math.sqrt(a*a+b*b);return[Math.round(c+a/e),Math.round(d+b/e)]}
function Txa(a,b,c,d,e,f,h,k,l,m,n){var p=um(Math.round(c*a),Math.round(c*b));if(0===l.length)return p.canvas;p.scale(c,c);var r=Ok();l.forEach(function(a){Yk(r,a.extent)});var u=um(Math.round(c*bl(r)/d),Math.round(c*cl(r)/d)),v=c/d;l.forEach(function(a){u.drawImage(a.image,m,m,a.image.width-2*m,a.image.height-2*m,(a.extent[0]-r[0])*v,-(a.extent[3]-r[3])*v,bl(a.extent)*v,cl(a.extent)*v)});var y=[h[0],h[3]];k.o.forEach(function(a){var b=a.source,e=a.target,h=b[1][0],k=b[1][1],l=b[2][0],m=b[2][1];a=
(e[0][0]-y[0])/f;var n=-(e[0][1]-y[1])/f,v=(e[1][0]-y[0])/f,B=-(e[1][1]-y[1])/f,Oa=(e[2][0]-y[0])/f,tc=-(e[2][1]-y[1])/f;e=b[0][0];b=b[0][1];h-=e;k-=b;l-=e;m-=b;a:{h=[[h,k,0,0,v-a],[l,m,0,0,Oa-a],[0,0,h,k,B-n],[0,0,l,m,tc-n]];k=h.length;for(l=0;l<k;l++){m=l;for(var Ua=Math.abs(h[l][l]),la=l+1;la<k;la++){var Yb=Math.abs(h[la][l]);Yb>Ua&&(Ua=Yb,m=la)}if(0===Ua){h=null;break a}Ua=h[m];h[m]=h[l];h[l]=Ua;for(m=l+1;m<k;m++)for(Ua=-h[m][l]/h[l][l],la=l;la<k+1;la++)h[m][la]=l==la?0:h[m][la]+Ua*h[l][la]}l=
Array(k);for(m=k-1;0<=m;m--)for(l[m]=h[m][k]/h[m][m],Ua=m-1;0<=Ua;Ua--)h[Ua][k]-=h[Ua][m]*l[m];h=l}h&&(p.save(),p.beginPath(),l=(a+v+Oa)/3,m=(n+B+tc)/3,k=B0(l,m,a,n),v=B0(l,m,v,B),Oa=B0(l,m,Oa,tc),p.moveTo(v[0],v[1]),p.lineTo(k[0],k[1]),p.lineTo(Oa[0],Oa[1]),p.clip(),p.transform(h[0],h[2],h[1],h[3],a,n),p.translate(r[0]-e,r[3]-b),p.scale(d/c,-d/c),p.drawImage(u.canvas,0,0),p.restore())});n&&(p.save(),p.strokeStyle="black",p.lineWidth=1,k.o.forEach(function(a){var b=a.target;a=(b[0][0]-y[0])/f;var c=
-(b[0][1]-y[1])/f,d=(b[1][0]-y[0])/f,e=-(b[1][1]-y[1])/f,h=(b[2][0]-y[0])/f;b=-(b[2][1]-y[1])/f;p.beginPath();p.moveTo(d,e);p.lineTo(a,c);p.lineTo(h,b);p.closePath();p.stroke()}),p.restore());return p.canvas};function Uxa(a,b,c,d,e){this.l=a;this.u=b;var f={},h=Ol(this.u,this.l);this.j=function(a){var b=a[0]+"/"+a[1];f[b]||(f[b]=h(a));return f[b]};this.A=d;this.K=e*e;this.o=[];this.G=!1;this.I=this.l.g&&!!d&&!!this.l.Y()&&bl(d)==bl(this.l.Y());this.g=this.l.Y()?bl(this.l.Y()):null;this.B=this.u.Y()?bl(this.u.Y()):null;a=[c[0],c[3]];b=[c[2],c[3]];d=[c[2],c[1]];c=[c[0],c[1]];e=this.j(a);var k=this.j(b),l=this.j(d),m=this.j(c);C0(this,a,b,d,c,e,k,l,m,10);if(this.G){var n=Infinity;this.o.forEach(function(a){n=
Math.min(n,a.source[0][0],a.source[1][0],a.source[2][0])});this.o.forEach(function(a){if(Math.max(a.source[0][0],a.source[1][0],a.source[2][0])-n>this.g/2){var b=[[a.source[0][0],a.source[0][1]],[a.source[1][0],a.source[1][1]],[a.source[2][0],a.source[2][1]]];b[0][0]-n>this.g/2&&(b[0][0]-=this.g);b[1][0]-n>this.g/2&&(b[1][0]-=this.g);b[2][0]-n>this.g/2&&(b[2][0]-=this.g);Math.max(b[0][0],b[1][0],b[2][0])-Math.min(b[0][0],b[1][0],b[2][0])<this.g/2&&(a.source=b)}},this)}f={}}
function C0(a,b,c,d,e,f,h,k,l,m){var n=Nk([f,h,k,l]),p=a.g?bl(n)/a.g:null,r=a.g,u=a.l.g&&.5<p&&1>p,v=!1;if(0<m){if(a.u.Th()&&a.B){var y=Nk([b,c,d,e]);v|=.25<bl(y)/a.B}!u&&a.l.Th()&&p&&(v|=.25<p)}if(v||!a.A||gl(n,a.A)){if(!(v||isFinite(f[0])&&isFinite(f[1])&&isFinite(h[0])&&isFinite(h[1])&&isFinite(k[0])&&isFinite(k[1])&&isFinite(l[0])&&isFinite(l[1])))if(0<m)v=!0;else return;if(0<m&&(v||(n=a.j([(b[0]+d[0])/2,(b[1]+d[1])/2]),r=u?(Pf(f[0],r)+Pf(k[0],r))/2-Pf(n[0],r):(f[0]+k[0])/2-n[0],n=(f[1]+k[1])/
2-n[1],v=r*r+n*n>a.K),v)){Math.abs(b[0]-d[0])<=Math.abs(b[1]-d[1])?(u=[(c[0]+d[0])/2,(c[1]+d[1])/2],r=a.j(u),n=[(e[0]+b[0])/2,(e[1]+b[1])/2],p=a.j(n),C0(a,b,c,u,n,f,h,r,p,m-1),C0(a,n,u,d,e,p,r,k,l,m-1)):(u=[(b[0]+c[0])/2,(b[1]+c[1])/2],r=a.j(u),n=[(d[0]+e[0])/2,(d[1]+e[1])/2],p=a.j(n),C0(a,b,u,n,e,f,r,p,l,m-1),C0(a,u,c,d,n,r,h,k,p,m-1));return}if(u){if(!a.I)return;a.G=!0}a.o.push({source:[f,k,l],target:[b,d,e]});a.o.push({source:[f,h,k],target:[b,c,d]})}}
function Vxa(a){var b=Ok();a.o.forEach(function(a){a=a.source;Pk(b,a[0]);Pk(b,a[1]);Pk(b,a[2])});return b};function D0(a,b,c,d,e,f,h,k,l,m,n){x0.call(this,e,0);this.U=void 0!==n?n:!1;this.P=h;this.O=k;this.K=null;this.o=b;this.A=d;this.G=f?f:e;this.j=[];this.Pj=null;this.u=0;f=bm(d,this.G);k=this.A.Y();e=this.o.Y();f=k?fl(f,k):f;if(0===$k(f))this.state=tI;else if((k=a.Y())&&(e?e=fl(e,k):e=k),d=d.bb(this.G[0]),d=Sxa(a,c,dl(f),d),!isFinite(d)||0>=d)this.state=tI;else if(this.I=new Uxa(a,c,f,e,d*(void 0!==m?m:.5)),0===this.I.o.length)this.state=tI;else if(this.u=jm(b,d),c=Vxa(this.I),e&&(a.g?(c[1]=Nf(c[1],
e[1],e[3]),c[3]=Nf(c[3],e[1],e[3])):c=fl(c,e)),$k(c)){a=cm(b,c,this.u);for(b=a.minX;b<=a.maxX;b++)for(c=a.minY;c<=a.maxY;c++)(m=l(this.u,b,c,h))&&this.j.push(m);0===this.j.length&&(this.state=tI)}else this.state=tI}I(D0,x0);D0.prototype.J=function(){1==this.state&&(this.Pj.forEach(sf),this.Pj=null);x0.prototype.J.call(this)};D0.prototype.Pa=function(){return this.K};
D0.prototype.ml=function(){var a=[];this.j.forEach(function(b){b&&b.getState()==zI&&a.push({extent:bm(this.o,b.fc),image:b.Pa()})},this);this.j.length=0;if(0===a.length)this.state=AI;else{var b=this.G[0],c=fm(this.A,b),d="number"===typeof c?c:c[0];c="number"===typeof c?c:c[1];b=this.A.bb(b);var e=this.o.bb(this.u),f=bm(this.A,this.G);this.K=Txa(d,c,this.P,e,this.o.Y(),b,f,this.I,a,this.O,this.U);this.state=zI}this.ia()};
D0.prototype.load=function(){if(0==this.state){this.state=1;this.ia();var a=0;this.Pj=[];this.j.forEach(function(b){var c=b.getState();if(0==c||1==c){a++;var d=H(b,"change",function(){var c=b.getState();if(c==zI||c==AI||c==tI)sf(d),a--,0===a&&(this.Pj.forEach(sf),this.Pj=null,this.ml())},this);this.Pj.push(d)}},this);this.j.forEach(function(a){0==a.getState()&&a.load()});0===a&&setTimeout(this.ml.bind(this),0)}};function Wxa(a,b){var c=/\{z\}/g,d=/\{x\}/g,e=/\{y\}/g,f=/\{-y\}/g;return function(h){if(h)return a.replace(c,h[0].toString()).replace(d,h[1].toString()).replace(e,function(){return(-h[2]-1).toString()}).replace(f,function(){var a=im(b,h[0]);Mf(a,55);return(a.maxY-a.minY+1+h[2]).toString()})}}function Xxa(a,b){for(var c=a.length,d=Array(c),e=0;e<c;++e)d[e]=Wxa(a[e],b);return E0(d)}function E0(a){return 1===a.length?a[0]:function(b,c,d){if(b)return a[Pf((b[1]<<b[0])+b[2],a.length)](b,c,d)}}
function Yxa(){}function Zxa(a){var b=[],c=/\{([a-z])-([a-z])\}/.exec(a);if(c){var d=c[2].charCodeAt(0),e;for(e=c[1].charCodeAt(0);e<=d;++e)b.push(a.replace(c[0],String.fromCharCode(e)));return b}if(c=c=/\{(\d+)-(\d+)\}/.exec(a)){d=parseInt(c[2],10);for(e=parseInt(c[1],10);e<=d;e++)b.push(a.replace(c[0],e.toString()));return b}b.push(a);return b};function F0(a){Ku.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state,wrapX:a.wrapX});this.Qk=void 0!==a.opaque?a.opaque:!1;this.tO=void 0!==a.tilePixelRatio?a.tilePixelRatio:1;this.tileGrid=void 0!==a.tileGrid?a.tileGrid:null;this.Gc=new A0(a.cacheSize);this.wi=[0,0];this.key_="";this.sO={transition:a.transition}}I(F0,Ku);g=F0.prototype;g.Kg=function(){return this.Gc.Kg()};g.Li=function(a,b){(a=this.xk(a))&&a.Li(b)};
function rla(a,b,c,d,e){a=a.xk(b);if(!a)return!1;b=!0;for(var f,h,k=d.minX;k<=d.maxX;++k)for(var l=d.minY;l<=d.maxY;++l)f=c+"/"+k+"/"+l,h=!1,zm(a,f)&&(f=a.get(f),(h=f.getState()===zI)&&(h=!1!==e(f))),h||(b=!1);return b}g.Ap=function(){return 0};g.getKey=function(){return this.key_};g.uh=function(a){this.key_!==a&&(this.key_=a,this.ia())};g.rk=function(){return this.Qk};g.fg=function(){return this.tileGrid.fg()};g.HE=function(){return this.tileGrid};
g.Od=function(a){return this.tileGrid?this.tileGrid:km(a)};g.xk=function(a){var b=this.Ra();return b&&!Nl(b,a)?null:this.Gc};g.aj=function(){return this.tO};function kO(a,b,c,d){d=a.Od(d);c=a.aj(c);b=Mk(fm(d,b),a.wi);return 1==c?b:Lk(b,c,a.wi)}
function $xa(a,b,c){var d=void 0!==c?c:a.Ra();c=a.Od(d);if(a.Go&&d.Th()){var e=b;b=e[0];a=hm(c,e);d=nm(d);Sk(d,a)?b=e:(e=bl(d),a[0]+=e*Math.ceil((d[0]-a[0])/e),b=gm(c,a[0],a[1],b,!1,void 0))}e=b[0];d=b[1];a=b[2];if(c.minZoom>e||e>c.maxZoom)c=!1;else{var f=c.Y();c=(c=f?cm(c,f,e):im(c,e))?Tl(c,d,a):!0}return c?b:null}g.refresh=function(){this.Gc.clear();this.ia()};g.zB=Af;function aya(a,b){Cf.call(this,a);this.tile=b}I(aya,Cf);function bv(a){F0.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tilePixelRatio:a.tilePixelRatio,wrapX:a.wrapX,transition:a.transition});this.tileLoadFunction=a.tileLoadFunction;this.tileUrlFunction=this.Kh?this.Kh.bind(this):Yxa;this.urls=null;a.urls?this.ul(a.urls):a.url&&this.Mb(a.url);a.tileUrlFunction&&this.xh(a.tileUrlFunction);this.A={}}I(bv,F0);g=bv.prototype;
g.aH=function(a){a=a.target;var b=J(a),c=a.getState();if(1==c){this.A[b]=!0;var d="tileloadstart"}else b in this.A&&(delete this.A[b],d=c==AI?"tileloaderror":c==zI||5==c?"tileloadend":void 0);void 0!=d&&this.dispatchEvent(new aya(d,a))};g.jt=function(a){this.Gc.clear();this.tileLoadFunction=a;this.ia()};g.xh=function(a,b){this.tileUrlFunction=a;Rxa(this.Gc);"undefined"!==typeof b?this.uh(b):this.ia()};
g.Mb=function(a){var b=this.urls=Zxa(a);this.xh(this.Kh?this.Kh.bind(this):Xxa(b,this.tileGrid),a)};g.ul=function(a){this.urls=a;var b=a.join("\n");this.xh(this.Kh?this.Kh.bind(this):Xxa(a,this.tileGrid),b)};g.zB=function(a,b,c){a=a+"/"+b+"/"+c;zm(this.Gc,a)&&this.Gc.get(a)};function PH(a){bv.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,extent:a.extent,logo:a.logo,opaque:a.opaque,projection:a.projection,state:a.state,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction?a.tileLoadFunction:bya,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:a.wrapX,transition:a.transition});this.crossOrigin=void 0!==a.crossOrigin?a.crossOrigin:null;this.tileClass=void 0!==a.tileClass?a.tileClass:y0;this.l={};this.u={};this.O=
a.reprojectionErrorThreshold}I(PH,bv);g=PH.prototype;g.Kg=function(){if(this.Gc.Kg())return!0;for(var a in this.l)if(this.l[a].Kg())return!0;return!1};g.Li=function(a,b){a=this.xk(a);this.Gc.Li(this.Gc==a?b:{});for(var c in this.l){var d=this.l[c];d.Li(d==a?b:{})}};g.Ap=function(a){return this.Ra()&&a&&!Nl(this.Ra(),a)?0:this.Bp()};g.Bp=function(){return 0};g.rk=function(a){return this.Ra()&&a&&!Nl(this.Ra(),a)?!1:bv.prototype.rk.call(this,a)};
g.Od=function(a){var b=this.Ra();return!this.tileGrid||b&&!Nl(b,a)?(b=J(a).toString(),b in this.u||(this.u[b]=km(a)),this.u[b]):this.tileGrid};g.xk=function(a){var b=this.Ra();if(!b||Nl(b,a))return this.Gc;a=J(a).toString();a in this.l||(this.l[a]=new A0(this.Gc.highWaterMark));return this.l[a]};
g.Xl=function(a,b,c,d,e,f){a=[a,b,c];d=(b=$xa(this,a,e))?this.tileUrlFunction(b,d,e):void 0;d=new this.tileClass(a,void 0!==d?0:tI,void 0!==d?d:"",this.crossOrigin,this.tileLoadFunction,this.sO);d.key=f;H(d,"change",this.aH,this);return d};
function sI(a,b,c,d,e,f){var h=a.Ra();if(h&&f&&!Nl(h,f)){var k=a.xk(f);d=[b,c,d];var l;b=d[0]+"/"+d[1]+"/"+d[2];zm(k,b)&&(l=k.get(b));c=a.getKey();if(l&&l.key==c)return l;var m=a.Od(h),n=a.Od(f),p=$xa(a,d,f);a=new D0(h,m,f,n,d,p,a.aj(e),a.Bp(),function(a,b,c,d){return cya(this,a,b,c,d,h)}.bind(a),a.O,!1);a.key=c;l?(a.g=l,Pxa(a),k.replace(b,a)):k.set(b,a);return a}return cya(a,b,c,d,e,h||f)}
function cya(a,b,c,d,e,f){var h=b+"/"+c+"/"+d,k=a.getKey();if(zm(a.Gc,h)){var l=a.Gc.get(h);if(l.key!=k){var m=l;l=a.Xl(b,c,d,e,f,k);0==m.getState()?l.g=m.g:l.g=m;Pxa(l);a.Gc.replace(h,l)}}else l=a.Xl(b,c,d,e,f,k),a.Gc.set(h,l);return l}function bya(a,b){a.Pa().src=b};function dya(a,b){var c=um(a.width,a.height);c.drawImage(a,0,0);a=c.canvas;var d=c.getImageData(0,0,a.width,a.height),e=d.data;b.forEach(function(a){a(e)});c.putImageData(d,0,0);return a};function QH(a,b,c,d,e){y0.call(this,a,b,c,d,e);this.u=this.j=null}I(QH,y0);QH.prototype.Pa=function(){if(this.wa&&this.wa.width&&this.wa.height){var a=this.u;a.g||(a.g=[]);a=a.g;if(0<a.length)return this.j||(this.j=dya(this.wa,a)),this.j}return this.wa};QH.prototype.reset=function(){this.j=null};F(PH,"os.source.IFilterableTileSource");PH.prototype.g=null;(function(){var a=PH.prototype.Xl;PH.prototype.Xl=function(b,c,d,e,f,h){b=a.call(this,b,c,d,e,f,h);b instanceof QH&&(b.u=this);return b}})();F(bv,"os.ol.source.IUrlSource");F(bv,"os.ol.source.ILoadingSource");g=bv.prototype;g.jB=!1;g.extent=null;g.Kk=0;g.Ye=null;g.Oq=!1;g.Y=function(){return this.extent};g.Cc=function(a){this.extent=a};g.vf=function(){return null};g.updateParams=function(){};g.ah=function(){return this.Oq};g.Sg=function(){return this.Kk};
g.ef=function(a){this.Kk!=a&&(this.Kk=a,this.Ye&&(this.Ye.M("tick",this.xw,!1,this),this.Ye.be()||this.Ye.stop()),this.Ye=null,0<this.Kk&&(this.Ye=Lx[a],this.Ye||(this.Ye=new je(1E3*a),Lx[a]=this.Ye),this.Ye.H("tick",this.xw,!1,this),this.Ye.start()),this.dispatchEvent(new K(NH)))};g.xw=function(){this.ah()&&this.refresh()};g.refresh=function(){this.Gc.clear();this.ia()};g.YN=bv.prototype.xh;
g.xh=function(a){var b=this.Y.bind(this),c=this.HE.bind(this);this.YN(function(d,e,f){var h=b(),k=!0;if(h){k=c();if(!k||k.fg().length<=d[0])return;k=bm(k,d);k=gl(h,k)}return k?a(d,e,f):void 0})};g.oj=!1;g.Gk=0;g.Sm=0;g.Ik=0;g.ww=!1;g.Jk=null;g.dh=null;g.J=function(){F0.prototype.J.call(this);this.Jk&&($a(this.Jk,sf),this.Jk.length=0);this.dh&&(this.dh.dispose(),this.dh=null);this.Gc&&this.Gc.clear()};g.ob=function(){return this.oj};
g.Wa=function(a){this.oj!==a&&(this.oj=a,this.dh||this.Xa()||(this.dh=new Fh(this.Mu,500,this)),a=this.dh)&&(this.oj?Gh(a):(a.start(),this.Gk=0))};g.Sh=function(){return this.ww};g.Mu=function(){if(!this.Xa()){if(this.Sm||this.Ik)this.ww=this.Ik/(this.Sm+this.Ik)>M.get("tileErrorThreshold",.6),this.Sm=this.Ik=0;this.dispatchEvent(new K("loading",this.oj,!this.oj))}};g.SF=function(){this.Gk++;1===this.Gk&&this.Wa(!0)};
g.Yw=function(a){"tileloadend"===a.type?this.Sm++:this.Ik++;this.Gk--;0===this.Gk&&this.Wa(!1)};g.XN=bv.prototype.jt;g.jt=function(a){this.jB=!0;this.Jk||(this.Jk=[H(this,"tileloadstart",this.SF,this),H(this,"tileloadend",this.Yw,this),H(this,"tileloaderror",this.Yw,this)]);var b=this;this.dh||(this.dh=new Fh(this.Mu,500,this));this.XN(function(c,d){b.ah()&&b.Kk&&(d=new Xg(d),d.g.set("_cd",Ia()),d=d.toString());a(c,d)})};function eya(a){var b=a.tileUrlFunction;a.xh(function(a,d,e){(a=b(a,d,e))&&(a=rB(a));return a})}function fya(a,b){if(b=(0,a.tileUrlFunction)([2,2,-1],1,b)){b=new Ni(b);var c=function(b){b=b.target;if("proxy"===b.ka){var c=b.G;c&&(1===c.length||1<c.length&&0===c[c.length-2])&&eya(a)}b.dispose()};b.H("success",c);b.H("error",c);b.load()}};function G0(){$L.call(this);this.crossOrigin=this.tileGrid=this.projection=null;this.g=Uz;this.tileClass=QH;this.urls=[]}w(G0,$L);var H0=E.V("os.layer.config.AbstractTileLayerConfig"),I0=new RegExp(/{[a-zA-Z]-[a-zA-Z]}/g),J0=new RegExp(/{\d-\d}/g);g=G0.prototype;
g.ac=function(a){G0.C.ac.call(this,a);null!=a.urls?this.urls=a.urls:this.url&&(a.urls=this.urls=[this.url],a.url=void 0);for(var b=[],c=0;c<this.urls.length;c++){var d=this.urls[c];if("string"===typeof d){var e=[];if(I0.test(d)){E.ta(H0,"Expanding URL with alpha range: "+d);var f=d.match(I0)[0];e=e.concat(gya(d,f))}else J0.test(d)?(E.ta(H0,"Expanding URL with numeric range: "+d),f=d.match(J0)[0],e=e.concat(gya(d,f))):(E.ta(H0,"Not expanding URL: "+d),e.push(d));d=e;for(e=0;e<d.length;e++)b.push(d[e])}else b.push(d)}E.ta(H0,
"Potentially expanded URL set: "+b.join());this.urls=b;a.urls=this.urls;b=this.Pp(a);c=this.Op(a);d=Wca(a);if(!d)throw Error("No projections supported by the layer are defined!");this.projection=d;this.tileGrid=lm(this.projection,42,[b,c]);a:{for(h in sB)if(a.crossOrigin===sB[h]){var h=!0;break a}h=!1}if(h)for(this.crossOrigin=a.crossOrigin,h=0;h<this.urls.length;h++)b=this.urls[h],b=b.replace(/{-?[zxy]}/g,"\\d+"),b=b.replace(J0,"\\d"),b=b.replace(I0,"[a-zA-Z]"),vB(new RegExp("^"+b),this.crossOrigin);
else this.crossOrigin=kA(this.urls[0]);"none"===this.crossOrigin&&(this.crossOrigin=null,a.crossOrigin=null);this.g=a.layerClass||this.g;this.tileClass=a.tileClass||this.tileClass};
g.Me=function(a){this.ac(a);var b=this.N(a);this.tileClass&&F(b,"os.source.IFilterableTileSource")&&(b.tileClass=this.tileClass);a.extent&&b.Cc(Ql(a.extent,a.extentProjection||"EPSG:4326",this.projection));a.attributions&&(b.Ol=Lu(b,a.attributions),b.ia());this.crossOrigin&&"none"!==this.crossOrigin&&(a.proxy?(E.ta(H0,"layer "+this.id+" proxy=true"),eya(b)):void 0===a.proxy&&(E.ta(H0,"layer "+this.id+" proxy=auto"),fya(b,this.projection)));E.ta(H0,"layer "+this.id+" crossOrigin="+this.crossOrigin);
b.jB||b.jt(b.tileLoadFunction);b=new this.g({source:b});this.bp(b,a);b.restore(a);return b};g.bp=function(a,b){null!=b.explicitType&&a.ve(b.explicitType)};g.Pp=function(a){return a.tileWidth||a.tileSize||512};g.Op=function(a){return a.tileHeight||a.tileSize||512};function gya(a,b){var c=[],d=b.slice(1,-1).split("-"),e=d[1];for(d=d[0].charCodeAt(0);d<=e.charCodeAt(0);d++){var f=a.replace(b,String.fromCharCode(d));c.push(f)}return c};Q.directive("screenoverlay",[function(){return{restrict:"E",transclude:!0,scope:!0,replace:!0,templateUrl:"v1541734487/views/windows/screenoverlay.html",controller:hya,controllerAs:"confirm"}}]);
function iya(a){var b={image:a.image},c=a.size&&75<a.size.y?a.size.y:75,d=a.size&&250<a.size.x?a.size.x:250,e=a.xy?a.xy.x:25,f=a.xy?a.xy.y:50,h=Xn(L.s().X());c={id:a.id,label:a.name||"KML Screen Overlay",icon:"",x:e,y:f,width:d,"min-width":250,"max-width":h[0],height:c,"min-height":75,"max-height":h[1],modal:!1,"show-hide":a["show-hide"]?a["show-hide"]:!1,"show-close":a["show-close"]?a["show-close"]:!1,"no-scroll":!0,overlay:!0};ix(a.id)||fx(c,"<screenoverlay></screenoverlay>",void 0,void 0,void 0,
b)}function hya(a){null==a.valid&&(a.valid=!0)}hya.$inject=["$scope"];function hR(a){Uz.call(this,a);this.O=this.K=!1;this.l=null;this.A=new Fh(this.YK,25,this);this.o=vg.s();this.I="YYYY-MM-DDTHH:mm:ss[Z]";this.o.H("timeline.durationChange",this.fi,!1,this);this.o.H("timeline.reset",this.fi,!1,this);this.o.H("timeline.show",this.fi,!1,this);K0(this)}w(hR,Uz);g=hR.prototype;
g.J=function(){hR.C.J.call(this);this.o.M("timeline.durationChange",this.fi,!1,this);this.o.M("timeline.reset",this.fi,!1,this);this.o.M("timeline.show",this.fi,!1,this);this.o=null;this.A.dispose();this.A=null;this.l&&ix(this.l)&&kx(ix(this.l))};
g.Hd=function(a){var b=this.hd();hR.C.Hd.call(this,a);a&&!b&&this.O&&(this.O=!1,this.fi());a:if(this.Va()&&this.Va().legends&&this.Va().legends[0]){var c=this.Va().legends[0],d=b=null;c.size&&(b={x:c.size[0],y:c.size[1]+30},d=Xn(L.s().X()),d={x:d[0]-b.x-250,y:d[1]-b.y-75});if(c.OnlineResource)c=c.OnlineResource;else if("string"!==typeof c){b=null;break a}b={image:c,name:this.S()+" - Legend",id:Xb(c),"show-close":!0,xy:d,size:b}}else b=null;b&&(a&&!this.l?(iya(b),this.l=b.id):!a&&this.l&&(ix(this.l)&&
kx(ix(this.l)),this.l=null))};g.fi=function(){this.A&&!this.A.isActive()&&this.A.start()};g.YK=function(){this.yb()?K0(this):this.O=!0};g.Xn=function(a){this.K!==a&&(this.K=a,this.dispatchEvent(new K("animationEnabled",a)))};function K0(a){var b=a.N(),c=b.vf();a={TIME:a.Xu()};a.TIME!=c.TIME&&(yc(c,a),b.updateParams(c))}g.Xu=function(){var a=vg.s(),b=a.K,c="custom"==b?a.Sa():a.g-a.ec();return jya(this.I,c,a.g,b)};
g.ra=function(a){a=hR.C.ra.call(this,a)||{};var b=this.N();b&&b instanceof bv&&(a.refreshInterval=b.Sg());return a};g.restore=function(a){hR.C.restore.call(this,a);if(void 0!==a.refreshInterval){var b=this.N();b&&b instanceof bv&&b.ef(a.refreshInterval)}};function jya(a,b,c,d){if("custom"!=d)var e=b=(b+c)/2;else e=b,b=c;e=KF(new Date(e),d);b=LF(new Date(b),d);b=b.getTime()==e.getTime()?LF(new Date(c),d):b;c=NF(e,a||void 0);a=NF(b,a||void 0);return c+"/"+a};function L0(a){hR.call(this,a)}w(L0,hR);L0.prototype.Xu=function(){var a=vg.s(),b=a.K,c="custom"==b?a.Sa():a.g-a.ec();a=a.g;"custom"!=b&&(c=a=(c+a)/2);c=KF(new Date(c),b);var d=LF(new Date(a),b);d=d.getTime()==c.getTime()?LF(new Date(a),b):d;return c.getTime()+","+d.getTime()};function kya(a,b){var c=[];Object.keys(b).forEach(function(a){null!==b[a]&&void 0!==b[a]&&c.push(a+"="+encodeURIComponent(b[a]))});var d=c.join("&");a=a.replace(/[?&]$/,"");a=-1===a.indexOf("?")?a+"?":a+"&";return a+d};function M0(a){a=a||{};PH.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0,transition:a.transition});this.j=a.params||{};this.o=Ok();this.uh(lya(this))}I(M0,PH);function lya(a){var b=0,c=[],d;for(d in a.j)c[b++]=d+"-"+a.j[d];return c.join("/")}
M0.prototype.vf=function(){return this.j};M0.prototype.aj=function(a){return a};
M0.prototype.Kh=function(a,b,c){var d=this.tileGrid;d||(d=this.Od(c));if(!(d.fg().length<=a[0])){var e=bm(d,a,this.o),f=Mk(fm(d,a[0]),this.wi);1!=b&&(f=Lk(f,b,this.wi));d={F:"image",FORMAT:"PNG32",TRANSPARENT:!0};of(d,this.j);var h=this.urls;h?(c=c.Rb.split(":").pop(),d.SIZE=f[0]+","+f[1],d.BBOX=e.join(","),d.BBOXSR=c,d.IMAGESR=c,d.DPI=Math.round(d.DPI?d.DPI*b:90*b),a=(1==h.length?h[0]:h[Pf((a[1]<<a[0])+a[2],h.length)]).replace(/MapServer\/?$/,"MapServer/export").replace(/ImageServer\/?$/,"ImageServer/exportImage"),
a=kya(a,d)):a=void 0;return a}};M0.prototype.updateParams=function(a){of(this.j,a);this.uh(lya(this))};function N0(a){M0.call(this,a);this.Oq=!0}w(N0,M0);N0.prototype.updateParams=function(a){var b=0,c=[],d=this.vf(),e;for(e in d)c[b++]=e+"-"+d[e];this.uh(c.join("/"));N0.C.updateParams.call(this,a)};function O0(){G0.call(this)}w(O0,G0);var $_="arctile";O0.prototype.ac=function(a){O0.C.ac.call(this,a);this.g=a.animate?L0:this.g};O0.prototype.N=function(){for(var a={},b=this.params.Xb(),c=0,d=b.length;c<d;c++){var e=b[c];a[e]=this.params.get(e)}a={urls:this.urls,params:a,tileGrid:this.tileGrid,projection:this.projection,crossOrigin:this.crossOrigin,wrapX:this.projection.Th()};return new N0(a)};lw("text/html",function(a,b,c){if(b&&b.getFileName()&&/\.x?html?$/i.test(b.getFileName())||b&&"text/html"===b.l||c&&"string"===typeof c&&/^<(!doctype )?html( |>)/i.test(c.trim()))var d=c;return Sc(d)},-10,"text/plain");function mya(a,b,c){a="string"===typeof c?c:c.content;return Sc(a&&zxa.test(a)||b&&b.Ma()&&yxa.test(b.Ma()))}lw("arc",mya,0,"text/xml");lw("arc",mya,0,"text/html");function nya(a){for(var b=a.querySelectorAll('layer[type="wms"]'),c=0,d=b.length;c<d;c++){var e=b[c],f=e.querySelector("provider");f&&"ArcMap"===su(f,!0).trim()&&(Ik(f),e.setAttribute("type",$_));if(e=e.querySelector("url"))f=su(e,!0).trim(),Fb(f,"/export")&&or(e,f.substring(0,f.length-7))}a=a.querySelectorAll('layer[type="arc"]');b=0;for(c=a.length;b<c;b++)a[b].setAttribute("type",a0)}
function oya(a){for(var b=a.querySelectorAll('layer[type="'+$_+'"]'),c=0,d=b.length;c<d;c++){var e=b[c];e.setAttribute("type","wms");Z("provider",e,"ArcMap");if(e=e.querySelector("url")){var f=su(e,!0).trim();Fb(f,"/export")||or(e,f+"/export")}}a=a.querySelectorAll('layer[type="'+a0+'"]');b=0;for(c=a.length;b<c;b++)a[b].setAttribute("type","arc")};function P0(){Kg.call(this);this.id="arc"}w(P0,Kg);P0.prototype.init=function(){var a=Y;mF(a,new eF(this.id,c0,"Arc Server","Arc servers provide feature and tile data."));nF(a,this.id,Y_);a=Uf.s();Yf(a,a0,w0);Yf(a,$_,O0);KM(GM.s(),this.id,new U_("<arcserver></arcserver>"));a=BX.s();var b;b||(b=a.g);ib(a.l[b].Ek,nya);var c;c||(c=a.g);ib(a.l[c].ol,oya)};lw("text/csv",function(a,b){return Sc(b&&(/\.csv$/.test(b.getFileName())||"text/csv"===b.l))},1E3,"text/plain");Hf.prototype.YO=function(){return J(this)};of(Hf.prototype,{$$hashKey:Hf.prototype.YO});Hf.prototype.hc=!0;Hf.prototype.dispatchEvent=function(a){if(this.hc)return Df.prototype.dispatchEvent.call(this,a)};Hf.prototype.Hq=function(a,b){if(this.hc){var c=Jf(a);this.dispatchEvent(new Kf(c,a,b));this.dispatchEvent(new Kf("propertychange",a,b))}};Q.directive("mergeareaoption",[function(){return{restrict:"E",replace:!0,scope:{ngModel:"=",help:"=?"},template:'<div class="row mt-1"><label class="col-form-label col-4 text-right">Merge Areas</label><div class="col form-inline"><input class="form-control col-auto" type="checkbox" name="merge" ng-model="ngModel"/><span class="ml-auto"><popover ng-if="help" x-title="\'Merge Areas\'" x-content="help" x-pos="\'right\'"> </popover></span></div></div>',controller:pya,controllerAs:"ctrl"}}]);
function pya(a){this.scope=a}pya.$inject=["$scope"];function Q0(a){this.element=this.scope=null;this.l=a||null;this.valid=!0;this.template="<span>Placeholder template.</span>";this.title="Placeholder Title";this.ip=this.j=!1;this.priority=0;this.log=qya}var qya=E.V("os.ui.wiz.step.AbstractWizardStep");Q0.prototype.o=function(a,b){void 0!==b&&(this.valid=b)};function R0(a,b){void 0!=b&&a.Mi(b);a.scope&&(delete a.scope.step,a.scope.$destroy(),a.scope=null);a.element&&(a.element.remove(),a.element=null);a.ip=!0}Q0.prototype.g=function(){this.j=!0};
Q0.prototype.Mi=function(){};Q0.prototype.S=function(){return this.title};Q0.prototype.getTitle=Q0.prototype.S;Q0.prototype.isValid=function(){return this.valid};function S0(){Q0.call(this);this.template="<areaoptionsstep></areaoptionsstep>";this.title="Area Options"}w(S0,Q0);S0.prototype.g=function(a){this.j||a.columns&&0!=a.columns.length||(a.wb(),S0.C.g.call(this,a))};Q.directive("areaoptionsstep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/query/areaoptionsstep.html",controller:T0,controllerAs:"areaoptions"}}]);
function T0(a){this.v=a;this.help=sG;a.$watch("areaOptionsForm.$valid",this.j.bind(this));a.$on("$destroy",this.g.bind(this))}T0.$inject=["$scope"];T0.prototype.g=function(){this.v=null};T0.prototype.j=function(a){this.v.$emit("validate",a)};var rya={"Dollar Sign ($)":"$","Exclamation (!)":"!","Hash (#)":"#","Percent (%)":"%",None:!1},sya={"Backslash (\\)":"\\","Colon (:)":":","Comma (,)":",","Pipe (|)":"|","Semi-Colon (;)":";","Slash (/)":"/","Space ( )":" ","Tab (->)":"\t"};function U0(a){oM.call(this,a);this.commentChar="#";this.dataRow=2;this.delimiter=",";this.headerRow=1;this.linePreview=[];this.useHeader=!0}w(U0,oM);function tya(a){a.linePreview=[];if(a.file){var b=a.file.Pb();if(b){b=b.split(/\r?\n/,50);for(var c=0,d=b.length;c<d;c++){var e=Jb(b[c]);e&&a.linePreview.push(e)}}}};Q.directive("spinner",[function(){return{restrict:"AE",replace:!0,scope:{live:"&",disabled:"=?",min:"=?",max:"=?",name:"@",value:"=",step:"=?",css:"@"},template:'<div ng-form><input class="spinner" name="spinner"/></div>',controller:V0}}]);
function V0(a,b){var c=!0;void 0!==a.live&&void 0!==a.live()&&(c=a.live());null==a.min&&(a.min=-Infinity);null==a.max&&(a.max=Infinity);var d={change:this.dK.bind(this),min:a.min,max:a.max,value:a.value,start:this.uq};void 0!==a.step&&(d.step=a.step);d[c?"spin":"stop"]=this.cK.bind(this);d.spin||(d.spin=this.uq);a.$on("$destroy",this.sL.bind(this));this.v=a;this.g=b.find("input");this.g.spinner(d);a.css&&b.find(".ui-spinner").addClass(a.css);b.find(".ui-spinner-input").addClass("form-control");b=
this.rL.bind(this);a.$watch("value",b);a.$watch("min",b);a.$watch("max",b);a.$watch("step",b);a.$watch("disabled",this.TH.bind(this))}V0.$inject=["$scope","$element"];g=V0.prototype;g.sL=function(){this.g=this.v=null};g.uq=function(a){a.stopPropagation()};
g.rL=function(a,b){for(var c=["min","max","step"],d=0,e=c.length;d<e;d++){var f=c[d];f in this.v&&this.g.spinner("option",f,this.v[f])}null===this.v.value&&(this.v.value=this.v.min||0);this.g.spinner("value",this.v.value);a!==b&&this.v.name&&this.v[this.v.name]&&this.v[this.v.name].$setDirty()};g.TH=function(a){void 0!==a&&this.g.spinner("option","disabled",a)};g.cK=function(a,b){this.uq(a);b=void 0!==b.value?b.value:this.g.spinner("value");this.v.value=b;this.v.$emit(this.v.name+"."+a.type,b);R(this.v)};
g.dK=function(a,b){b=void 0!==b.value?b.value:this.g.spinner("value");"number"!==typeof b&&(b=this.v.value);var c=me(b,this.v.min,this.v.max);if(c!=this.v.value||b!=c)this.v.value=c,this.v.$emit(this.v.name+"."+a.type,c),R(this.v);this.g.spinner("value")!=this.v.value&&this.g.spinner("value",this.v.value)};Q.directive("slickheaderbutton",[function(){var a=OD();a.scope.onCommand="=?";a.controller=W0;return a}]);function W0(a,b,c){PD.call(this,a,b,c);a=new Slick.Plugins.HeaderButtons;a.onCommand.subscribe(function(a,b){a=b.button;var c=b.command;b=this.va.getColumnIndex(b.column.id);this.scope.onCommand(this.scope.columns[b],a,c,this.scope.columns)}.bind(this));this.va.registerPlugin(a)}w(W0,PD);W0.$inject=["$scope","$element","$compile"];Q.directive("wizardpreview",[function(){return{restrict:"E",replace:!0,scope:{config:"=",resizeWith:"@"},templateUrl:"v1541734487/views/wiz/wizardpreview.html",controller:X0,controllerAs:"wizPreview"}}]);
function X0(a,b,c){this.v=a;this.L=b;this.Na=c;try{var d=b.width()/a.config.columns.length}catch(e){d=0}this.options={dataItemColumnValueExtractor:this.LE,defaultColumnWidth:120,enableColumnReorder:!1,fullWidthRows:!0,forceFitColumns:200<=d,multiSelect:!1,rowHeight:21};this.j=this.g=null;a.resizeWith&&(this.j=this.ss.bind(this),this.g=b.parents(a.resizeWith),this.g.resize(this.j),this.ss(500));a.$on("resizePreview",this.mM.bind(this));a.$on("$destroy",this.lM.bind(this))}
X0.$inject=["$scope","$element","$timeout"];g=X0.prototype;g.lM=function(){this.g&&(this.j&&(this.g.removeResize(this.j),this.j=null),this.g=null);this.v=this.L=this.Na=null};g.mM=function(a,b){this.ss(b)};g.ss=function(a){this.Na(t(function(){if(this.L&&this.v){for(var a=0,c=this.L.siblings(),d=0,e=c.length;d<e;d++)a+=$(c[d]).outerHeight();c=this.L.height();(a=Math.max(this.L.parent().outerHeight()-a-2,0))&&c!=a&&(this.L.height(a),this.v.$broadcast("resize"))}},this),a)};
g.LE=function(a,b){return ay(a,"string"===typeof b?b:b.field)};g.onCommand=function(a,b,c,d){for(var e=0,f=0,h=d.length;f<h;f++)d[f].include&&e++;"exclude-column"===c&&1<e-1?(b.cssClass="fa fa-square-o slick-header-buttons",b.tooltip="Check to include column",b.command="include-column",a.include=!1):"include-column"===c&&(b.cssClass="fa fa-check-square-o slick-header-buttons",b.tooltip="Uncheck to exclude column",b.command="exclude-column",a.include=!0)};function Y0(a){Q0.call(this,a);this.template="<csvconfigstep></csvconfigstep>";this.title="Configuration"}w(Y0,Q0);Y0.prototype.Mi=function(a){try{a.wb();var b=a.preview.slice(0,24);if((!a.mappings||0>=a.mappings.length)&&b&&0<b.length){var c=iy.s().Wd(b);c&&0<c.length&&(a.mappings=c)}}catch(d){}};Q.directive("csvconfigstep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/file/csv/configstep.html",controller:Z0,controllerAs:"configStep"}}]);
function Z0(a,b){this.Na=b;this.g=a.config;this.delimiters=sya;this.commentChars=rya;this.linePreviewRows=[];for(var c=b=0,d=this.g.linePreview.length;c<d;c++)b=Math.max(Bk(this.g.linePreview[c]).width,b),this.linePreviewRows.push({id:c+1,line:this.g.linePreview[c]});this.linePreviewColumns=[{id:"id",name:"ID",field:"id",minWidth:25,width:25,resizable:!1,selectable:!1,sortable:!1},{id:"line",name:"Line",field:"line",selectable:!1,sortable:!1,width:b}];this.linePreviewOptions={fullWidthRows:!0,multiSelect:!1,
useRowRenderEvents:!0,headerRowHeight:0,rowHeight:21};a.$on("headerRow.spinstop",this.j.bind(this));a.$on("dataRow.spinstop",this.j.bind(this));a.$on("$destroy",this.l.bind(this));this.wb()}Z0.$inject=["$scope","$timeout"];Z0.prototype.l=function(){this.Na=this.g=null};Z0.prototype.j=function(){this.Na(this.wb.bind(this))};Z0.prototype.wb=function(){this.g.wb()};Z0.prototype.updatePreview=Z0.prototype.wb;Q.directive("geohelp",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/window/geohelp.html",controller:a1,controllerAs:"th"}}]);function a1(a,b){this.L=b;a.$on("$destroy",t(this.g,this))}a1.$inject=["$scope","$element"];a1.prototype.g=function(){this.L=null};a1.prototype.close=function(){kx(this.L)};a1.prototype.close=a1.prototype.close;function b1(){Q0.call(this);this.template="<geometrystep></geometrystep>";this.title="Geometry";this.posColumn=this.lonColumn=this.latColumn="";this.posType="Lat/Lon";this.geomType="none";this.ignoreMissingGeomRows=this.showEllipse=!1;this.ellipse={radius:{column:"",units:"nmi"},semiMajor:{column:"",units:"nmi"},semiMinor:{column:"",units:"nmi"},orientation:{column:""}};this.bearing={column:""};this.altitude={column:"",units:"autodetect"};this.geoFormats=[{format:"DMS",description:"DMS - Degrees, minutes, seconds"},
{format:"DDM",description:"DDM - Degrees and decimal minutes"},{format:"DD",description:"DD - Decimal degrees"}];this.useGeoSingleAutoFormat=this.useGeoSeparateAutoFormat=!0;this.geoSeparateFormat=this.geoFormats[0].format;this.geoSingleFormat=this.geoFormats[0].format;this.sample="";this.result=null}w(b1,Q0);
b1.prototype.g=function(a){if(!this.j&&a.mappings&&0<a.mappings.length){for(var b=0,c=a.mappings.length;b<c;b++){var d=a.mappings[b];d instanceof sT?(this.posColumn=d.ja,this.posType=d.T(),this.geomType="single"):d instanceof lT&&"single"!=this.geomType?(this.lonColumn=d.ja,this.geomType="separate"):d instanceof kT&&"single"!=this.geomType?(this.latColumn=d.ja,this.geomType="separate"):d instanceof ET?(this.posColumn=d.ja,this.posType="WKT",this.geomType="single"):d instanceof iT?this.bearing.column=
d.ja:d instanceof KJ?(this.ellipse.semiMajor.column=d.ja,this.ellipse.semiMajor.units=d.Tc(),this.showEllipse=!0):d instanceof LJ?(this.ellipse.semiMinor.column=d.ja,this.ellipse.semiMinor.units=d.Tc(),this.showEllipse=!0):d instanceof mT?(this.ellipse.orientation.column=d.ja,this.showEllipse=!0):d instanceof JJ?(this.ellipse.radius.column=d.ja,this.ellipse.radius.units=d.Tc(),this.showEllipse=!0):d instanceof xM&&(this.altitude.column=d.ja,this.altitude.units=d.units)}b1.C.g.call(this,a)}a.ignoreMissingGeomRows&&
(this.ignoreMissingGeomRows=a.ignoreMissingGeomRows)};
b1.prototype.Mi=function(a){if(a.mappings)for(var b=a.mappings.length;b--;){var c=a.mappings[b];if(c instanceof sT||c instanceof kT||c instanceof lT||c instanceof ET||c instanceof JJ)a.mappings.splice(b,1);else if(c instanceof xM){var d=c.clone();a.mappings.splice(b,1)}}b=uya(this);0<b.length&&(a.mappings=a.mappings?a.mappings.concat(b):b,!d&&this.altitude.column&&(d=new xM),d&&(b=d,b.ja=this.altitude.column,b.cd("m"),b.G=!1,this.altitude.units&&"autodetect"!=this.altitude.units&&b.cd(this.altitude.units),
a.mappings.push(d)))};
function uya(a){var b=[];if("single"==a.geomType){if(a.posColumn&&a.posType)if("WKT"==a.posType){var c=new ET;c.ja=a.posColumn;b.push(c)}else c=new sT,c.ja=a.posColumn,c.Ub(a.posType),a.useGeoSingleAutoFormat||"Lat/Lon"!=a.posType&&"Lon/Lat"!=a.posType||(c.l=a.geoSingleFormat),b.push(c)}else"separate"==a.geomType&&a.latColumn&&a.lonColumn&&(c=new kT,c.ja=a.latColumn,a.useGeoSeparateAutoFormat||(c.l=a.geoSeparateFormat),b.push(c),c=new lT,c.ja=a.lonColumn,a.useGeoSeparateAutoFormat||(c.l=a.geoSeparateFormat),
b.push(c));a.bearing.column&&(c=new iT,c.ja=a.bearing.column,b.push(c));a.showEllipse&&(a.ellipse.radius.column&&(c=new JJ,c.ja=a.ellipse.radius.column,c.cd(a.ellipse.radius.units),b.push(c)),a.ellipse.semiMajor.column&&(c=new KJ,c.ja=a.ellipse.semiMajor.column,c.cd(a.ellipse.semiMajor.units),b.push(c)),a.ellipse.semiMinor.column&&(c=new LJ,c.ja=a.ellipse.semiMinor.column,c.cd(a.ellipse.semiMinor.units),b.push(c)),a.ellipse.orientation.column&&(c=new mT,c.ja=a.ellipse.orientation.column,b.push(c)));
return b}b1.prototype.isValid=function(){return("single"!=this.geomType||this.posColumn&&this.posType)&&("separate"!=this.geomType||this.latColumn&&this.lonColumn)?this.valid:!1};Q.directive("geometrystep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/wiz/geometrystep.html",controller:c1,controllerAs:"geomStep"}}]);
function c1(a){this.v=a;this.columns=a.config.columns||[];this.columns.sort(Gx);this.errors=[];this.warnings=[];this.posTypes=vc(Mpa);this.posTypes.WKT=new ET;this.units=jc(Bp);this.altUnits=["autodetect"];for(var b in Kt)this.altUnits.push(Kt[b]);a.$watch("ellipseForm.$valid",this.Zb.bind(this));a.$watch("step.geomType",this.Zb.bind(this));a.$on("$destroy",this.g.bind(this))}c1.$inject=["$scope"];c1.prototype.g=function(){this.v=null};
c1.prototype.Zb=function(){this.result=this.sample=null;this.errors=[];this.warnings=[];var a=this.v.config;a.skipGeoMappings=!1;if(a.preview&&!(0>a.preview.length)){var b=this.v.step;if(b)if("none"!=b.geomType)if(a.ignoreMissingGeomRows=b.ignoreMissingGeomRows,"single"==b.geomType)if(b.posColumn){var c=b.posColumn;if("WKT"==b.posType){var d=new ET;d.ja=c}else d=new sT,d.ja=c,d.Ub(b.posType);d=d1(this,d,c,b.useGeoSingleAutoFormat?void 0:b.geoSingleFormat);0===d.test?this.warnings.push("Caution: No data found in first "+
e1+' rows from column "'+c+'"!'):0>d.test?this.errors.push('Unable to parse geometry from column "'+c+'"!'):b.posType&&"Lat/Lon"==b.posType||"Lon/Lat"==b.posType?(c=d.result?d.result.split(" "):[],this.result=2!==c.length?d.result:"Latitude: "+c[0]+" Longitude: "+c[1]):this.result=d.result;this.sample=d.sample}else this.errors.push("Please choose a geometry column.");else{if("separate"==b.geomType)if(b.latColumn&&b.lonColumn){c=new kT;c.ja=b.latColumn;d=d1(this,c,c.ja,b.useGeoSeparateAutoFormat?void 0:
b.geoSeparateFormat);0===d.test?this.warnings.push("Caution: No data found in first "+e1+' rows from latitude column "'+c.ja+'"!'):0>d.test?this.errors.push('Unable to parse latitude from column "'+c.ja+'"!'):this.result="Latitude: "+d.result;this.sample=d.sample;d=new lT;d.ja=b.lonColumn;var e=d1(this,d,d.ja,b.useGeoSeparateAutoFormat?void 0:b.geoSeparateFormat);0===e.test?(this.warnings.push("Caution: No data found in first "+e1+' rows from longitude column "'+d.ja+'"!'),this.result=null):0>e.test?
(this.errors.push('Unable to parse longitude from column "'+d.ja+'"!'),this.result=null):this.result=this.result?this.result+" Longitude: "+e.result:null;this.sample=(this.sample?this.sample+" ":"")+e.sample;0===this.errors.length&&c.ja==d.ja&&this.warnings.push("Caution: The same column will be used for longitude and latitude - is this a Single Geometry Field?")}else this.errors.push("Please choose latitude/longitude columns.")}else a.ignoreMissingGeomRows=!1,a.skipGeoMappings=!0;a.wb(uya(b));this.v.$emit("validate",
0===this.errors.length&&(!this.v.step.showEllipse||this.v.ellipseForm.$valid));this.v.$broadcast("resizePreview")}};c1.prototype.validate=c1.prototype.Zb;function d1(a,b,c,d){a=a.v.config.preview;for(var e=null,f=0,h=a.length;f<h;f++){var k=a[f].get(c);if(k){e=k;var l=b.Rj(k,d);if(null!=l)return{test:1,result:l,sample:k}}}return{test:e?-1:0,result:null,sample:e}}
c1.prototype.yq=function(){document.getElementById("geo-help")||fx({label:"Location Formats",icon:"fa fa-map-marker",x:"-10",y:"center",width:"445","min-width":"250","max-width":"600",height:"500","min-height":"250","max-height":"600","show-close":!0,modal:!0},"<geohelp></geohelp>")};c1.prototype.launchHelp=c1.prototype.yq;function f1(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/wiz/wizard.html",controller:g1,controllerAs:"wiz"}}Q.directive("wizard",[f1]);
function g1(a,b,c){this.scope=a;this.element=b;this.timeout=c;this.config=a.config||{};this.loading=!1;this.wizardClass="";this.steps=a.steps;this.stepStates={};b=0;for(c=this.steps.length;b<c;b++)h1(this,this.steps[b],"");this.activeIndex=this.steps&&0<this.steps.length?0:-1;0<=this.activeIndex&&j1(this,this.steps[this.activeIndex]);a.$on("validate",this.o.bind(this));a.$on("save",this.j.bind(this));a.$on("windowCancel",this.Tl.bind(this));a.$on("$destroy",this.l.bind(this))}
g1.$inject=["$scope","$element","$timeout","$attrs"];g1.prototype.l=function(){var a=this.steps[this.activeIndex];a.ip||R0(a,this.config);this.scope=this.element=this.timeout=null};g1.prototype.o=function(a,b){a.stopPropagation();a=this.steps[this.activeIndex];(void 0!==b?b:1)&&a.isValid(this.config)?h1(this,a,""):h1(this,a,"error")};g1.prototype.j=function(a,b){(a=this.steps[this.activeIndex])&&a.Mi(b)};
function j1(a,b,c){var d=c?void 0:a.scope.$new();c=c?void 0:a.element.find("#js-wizard-step-content");b.g(a.config);if(d&&c){b.scope=d;b.scope.step=b;b.scope.$on("validate",b.o.bind(b));a=b.l||c.injector().get("$compile");var e=b.template;a&&e&&(c.html(e),b.element=a(c.contents())(d))}b.ip=!1}g1.prototype.accept=function(){var a=this.steps[this.activeIndex];a.isValid(this.config)?this.finish():h1(this,a,"error")};g1.prototype.accept=g1.prototype.accept;
g1.prototype.VC=function(){return this.qq()&&"error"!=this.xm(this.activeIndex)};g1.prototype.canAccept=g1.prototype.VC;g1.prototype.XC=function(){return!this.qq()&&"error"!=this.xm(this.activeIndex)};g1.prototype.canContinue=g1.prototype.XC;g1.prototype.qq=function(){return this.activeIndex==this.steps.length-1};g1.prototype.isLastStep=g1.prototype.qq;g1.prototype.cancel=function(){this.Tl();kx(this.element)};g1.prototype.cancel=g1.prototype.cancel;g1.prototype.Tl=function(){};
g1.prototype.finish=function(){kx(this.element)};g1.prototype.next=function(a){if(this.activeIndex<this.steps.length-1){var b=this.steps[this.activeIndex];b.isValid(this.config)?(h1(this,b,"complete"),R0(b,this.config),b=this.steps[++this.activeIndex],a=a&&b.isValid(this.config),j1(this,b,a)):(h1(this,b,"error"),null!=b.scope||j1(this,b));vya(this)}};g1.prototype.next=g1.prototype.next;
g1.prototype.prev=function(a){if(0<this.activeIndex){var b=this.steps[this.activeIndex];h1(this,b,b.isValid(this.config)?"":"error");R0(b,this.config);b=this.steps[--this.activeIndex];j1(this,b,a);vya(this)}};g1.prototype.prev=g1.prototype.prev;function vya(a){if(-1<a.activeIndex){var b=a.steps[a.activeIndex];b.isValid(a.config)||h1(a,b,"error");b=a.activeIndex+1;for(var c=a.steps.length;b<c;b++)h1(a,a.steps[b],"")}}
g1.prototype.WN=function(a){for(a=me(a,0,this.steps.length-1);this.activeIndex!=a;){var b=this.activeIndex;b>a?this.prev(b>a+1):b<a&&this.next(b<a-1);if(b==this.activeIndex)break}};g1.prototype.setStepIndex=g1.prototype.WN;g1.prototype.isActive=function(a){return"number"===typeof a?this.activeIndex===a:this.steps[this.activeIndex]===a};g1.prototype.isActive=g1.prototype.isActive;
g1.prototype.EE=function(a){"number"===typeof a&&(a=this.steps[a]);if(a){var b=this.xm(a);if("error"==b)return"fa-exclamation-triangle text-warning";if(this.isActive(a))return"fa-caret-right";if("complete"==b)return"fa-check text-success"}return""};g1.prototype.getStepIcon=g1.prototype.EE;g1.prototype.xm=function(a){"number"===typeof a&&(a=this.steps[a]);return this.stepStates[a.S()]};g1.prototype.getStepState=g1.prototype.xm;
function h1(a,b,c){"number"===typeof b&&(b=a.steps[b]);b&&(a.stepStates[b.S()]=c,R(a.scope))};function k1(a,b){if((a=Pga(a))&&0<a.length){var c=vG(b),d=a.map(cv).filter($u);b.merge&&1<d.length?(a=uv(d))?(a=new hq(a),wya(a,b,c),TG.add(a)):rj(tj,"Failed merging areas",Qh):(a.forEach(function(a){a&&!TG.get(a)&&wya(a,b,c)}),RG(TG,a,!0))}else rj(tj,"No Areas Found",Rh)}function wya(a,b,c){uG(a,c);a.Xb().forEach(function(b){var c=eb(tG,function(a){return a.toLowerCase()==b.toLowerCase()});c?c!=b&&(a.set(c,a.get(b)),a.set(b,void 0)):a.set(b,void 0)});a.set("_sourceName",b._sourceName,!0)};function l1(a){C.call(this);this.columns=[];this.config=a;this.g=[];Modernizr.webworkers||(Papa.LocalChunkSize=1048576,Papa.RemoteChunkSize=1048576)}w(l1,yM);var e1=1E3;g=l1.prototype;g.pc=function(){hb(this.g);this.j&&(this.j.abort(),this.j=void 0)};g.J=function(){this.pc();this.config=null;l1.C.J.call(this)};g.getColumns=function(){return this.columns};g.YE=function(a,b){a&&a.data&&a.data.length&&(m1(this,a),this.g=this.g.concat(a.data));this.j=b};
g.ZE=function(a){a&&a.data&&a.data.length&&(m1(this,a),this.g=this.g.concat(a.data));this.j=void 0;this.gi()};function m1(a,b){if(!a.config.useHeader){b.meta.fields=[];a=0;for(var c=b.data[0].length;a<c;a++)b.meta.fields.push("Column "+a);for(a=b.data.length;a--;){c=b.data[a];for(var d={},e=0,f=c.length;e<f;e++)d["Column "+e]=c[e];b.data[a]=d}}}
function xya(a,b){if(a.config.useHeader){for(var c=Math.max(a.config.headerRow,1)-1;c--;)b=b.replace(/.*?(\r?\n)/,"");c=a.config.dataRow-a.config.headerRow;if(1<c){for(a=b.match(/.*?((\r?\n)|$)/)[0];c--;)b=b.replace(/.*?((\r?\n)|$)/,"");b=a+b}}else for(c=Math.max(a.config.dataRow,1)-1;c--;)b=b.replace(/.*?((\r?\n)|$)/,"");return b}g.Cd=function(){return 0<this.g.length};g.Zc=function(){return yya(this,this.g.pop())};
g.Cb=function(a){hb(this.columns);hb(this.g);a instanceof ArrayBuffer&&(a=Dw(a)||null);if("string"===typeof a){var b={chunk:this.YE.bind(this),comments:this.config.commentChar||!1,complete:this.ZE.bind(this),delimiter:this.config.delimiter,dynamicTyping:!1,header:this.config.useHeader,worker:!0,skipEmptyLines:!0};a=xya(this,a);Papa.parse(a,b)}};function n1(a){l1.call(this,a)}w(n1,l1);function yya(a,b,c){b=new hq(b);if(a.config.ignoreMissingGeomRows){c=null!=c?c:a.config.mappings;var d="Latitude";a="Longitude";if(c)for(var e=0;e<c.length;e++)if("Latitude"==c[e].D())d=c[e].ja;else if("Longitude"==c[e].D())a=c[e].ja;else if(c[e]instanceof sT||c[e]instanceof ET)d=c[e].ja,a=c[e].ja;c=b.get(d);a=b.get(a);if(null!=c&&null!=a){if(Hb(c)||Hb(a))return null}else return null}b.ga(String(J(b)));return b};function o1(a,b,c,d){g1.call(this,a,b,c,d)}w(o1,g1);o1.$inject=["$scope","$element","$timeout","$attrs"];o1.prototype.finish=function(){this.loading=!0;var a=new n1(this.scope.config);a=new CM(a);a.o=this.scope.config.mappings;a.Ua("complete",this.g,!1,this);SK(a,this.scope.config.file.Pb())};o1.prototype.g=function(a){a=a.target;var b=a.getData();a.dispose();b&&0<b.length&&(this.scope.config._sourceName=this.scope.config.file.getFileName(),k1(b,this.scope.config));kx(this.element)};
Q.directive("csvareaimport",[function(){var a=f1();a.controller=o1;return a}]);function p1(){U0.call(this)}w(p1,U0);
p1.prototype.wb=function(a){var b=new n1(this),c=this.file.Pb();b.columns.length=0;c=xya(b,c);var d=Papa.parse(c,{comments:b.config.commentChar||!1,preview:e1,delimiter:b.config.delimiter,dynamicTyping:!1,header:b.config.useHeader});c=[];if(d&&d.data&&0<d.data.length){m1(b,d);for(var e=0,f=d.data.length;e<f;e++){var h=yya(b,d.data[e],a);h&&c.push(h)}if(a){if(c&&0<c.length){a=c[0];b.columns.length=0;d=!1;null!=a.get("recordTime")&&(d=new Wv("recordTime"),d.id="TIME",d.name="TIME",d.selectable=!1,d.sortable=
!1,b.columns.push(d),d=!0);a=a.Yb();for(var k in a)Px(k)||d&&"TIME"==k||(a=new Wv(k),a.selectable=!1,a.sortable=!1,b.columns.push(a))}}else for(k=b.columns.length=0,a=d.meta.fields.length;k<a;k++)e=new Wv(d.meta.fields[k]),e.selectable=!0,e.sortable=!1,b.columns.push(e)}this.preview=c||[];this.columns=b.getColumns()||[];c=0;for(k=this.columns.length;c<k;c++)d=this.columns[c],d.width=0,Dx(d);b.dispose()};function q1(){dT.call(this);this.j=!1}w(q1,dT);q1.prototype.S=function(){return"Area Import - CSV"};
q1.prototype.Jb=function(a,b){q1.C.Jb.call(this,a,b);b=[new Y0,new b1,new S0];var c=new p1;c.file=a;c.title=a.getFileName();tya(c);fx({label:"CSV Area Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"850","min-width":"500","max-width":"1200",height:"650","min-height":"300","max-height":"1000",modal:"true","show-close":"true","no-scroll":"true"},'<csvareaimport resize-with=".js-window"></csvareaimport>',void 0,void 0,void 0,{config:c,steps:b})};function r1(){this.Lc=new FG;this.features=null;this.g={};this.j=0}w(r1,x);g=r1.prototype;g.J=function(){r1.C.J.call(this);this.pc()};g.Cb=function(a){this.features=null;this.j=0;var b;a instanceof ArrayBuffer&&(a=Dw(a)||null);q(a)&&1==a.length&&("string"===typeof a[0]||Ba(a[0]))?b=a[0]:Ba(a)?b=a:a&&"string"===typeof a&&(b=JSON.parse(a.replace(/\t/g," ").replace(/\r\n/g,"")));b&&(q(b)?this.features=b:(a=b,"Feature"==a.type?this.features=[a]:"FeatureCollection"==a.type&&(this.features=a.features)))};
g.pc=function(){this.features=null;this.j=0};g.Cd=function(){return null!=this.features&&this.features.length>this.j};g.Zc=function(){var a=this.features[this.j++];return a?(a=this.Lc.vg(a,{featureProjection:S}),a.forEach(this.ad,this),a):null};g.ad=wa;g.getColumns=function(){return this.g?ic(this.g):[]};function s1(a,b,c,d){g1.call(this,a,b,c,d)}w(s1,g1);s1.$inject=["$scope","$element","$timeout","$attrs"];s1.prototype.finish=function(){this.loading=!0;var a=new r1;a=new CM(a);a.o=this.scope.config.mappings;a.Ua("complete",this.g,!1,this);SK(a,this.scope.config.file.Pb())};s1.prototype.g=function(a){a=a.target;var b=a.getData();a.dispose();b&&0<b.length&&(this.scope.config._sourceName=this.scope.config.file.getFileName(),k1(b,this.scope.config));kx(this.element)};
Q.directive("geojsonareaimport",[function(){var a=f1();a.controller=s1;return a}]);function t1(){oM.call(this)}w(t1,oM);t1.prototype.wb=function(){var a=IM("geojson");a.Cb(this.file.Pb());var b=25,c=[];for(a.g={};a.Cd()&&b--;){var d=a.Zc();if(q(d))for(var e=0,f=d.length;e<f;e++){var h=d[e];h.ga(String(J(h)));c.push(h)}d=h.Xb();e=0;for(f=d.length;e<f;e++){var k=d[e];if(k&&!Px(k)&&!(k in a.g)){var l=new Wv(k);l.selectable=!0;l.sortable=!0;a.g[k]=l}}}this.preview=c||[];this.columns=a.getColumns()||[];b=0;for(c=this.columns.length;b<c;b++)e=this.columns[b],e.width=0,Dx(e);a.dispose()};function u1(){dT.call(this);this.j=!1}w(u1,dT);u1.prototype.S=function(){return"Area Import - GeoJSON"};
u1.prototype.Jb=function(a,b){u1.C.Jb.call(this,a,b);var c=[new S0],d=new t1;b&&this.g(b,d);d.file=a;d.title=a.getFileName();fx({label:"GeoJSON Area Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"850","min-width":"500","max-width":"1200",height:"650","min-height":"300","max-height":"1000",modal:"true","show-close":"true","no-scroll":"true"},'<geojsonareaimport resize-with=".js-window"></geojsonareaimport>',void 0,void 0,void 0,{config:d,steps:c})};function v1(a,b,c){aQ.call(this,a,b,c)}w(v1,aQ);v1.$inject=["$scope","$element","$timeout"];v1.prototype.getFileName=function(){return this.config&&this.config.title||void 0};function zya(a,b){a.config._sourceName=a.getFileName();k1(b,a.config)};function w1(){C.call(this);this.Lc=new CV({showPointNames:!1});this.g=null;this.l={};this.columns=null;this.j=Aya}w(w1,yM);var Aya=E.V("plugin.area.KMLAreaParser");g=w1.prototype;
g.Cb=function(a){this.pc();if(uu(a))this.g=a;else if("string"===typeof a)this.g=Wx(a);else if(a instanceof ArrayBuffer){if(yw(a)){Bya(this,a);return}(a=Dw(a))?this.g=Wx(a):(E.error(this.j,"The buffer source does not appear to be text"),this.wc())}else if(a instanceof Blob){th(iw(a),this.Cb,this);return}if(this.g){if((a=kr(this.g))&&"kml"!==a.localName.toLowerCase()){var b=ny("kml",this.g);b.appendChild(a);this.g.appendChild(b);a=b}a?this.gi():(E.error(this.j,"No KML content to parse!"),this.wc())}else E.error(this.j,
"Content must be a valid KML document!"),this.wc()};function Bya(a,b){zip.createReader(new zip.ArrayBufferReader(b),t(function(a){a.getEntries(this.zM.bind(this))},a),t(function(){this.wc();E.error(this.j,"Error reading zip file!")},a))}
g.zM=function(a){for(var b=null,c=null,d=/(doc|index)\.kml$/i,e=/\.kml$/i,f=0,h=a.length;f<h;f++){var k=a[f];!b&&d.test(k.filename)?b=k:e.test(k.filename)&&(c||(c=k),this.l[k.filename]=k)}(b=b||c)?(a=b,a.getData(new zip.BlobWriter,this.AM.bind(this,a.filename))):(E.error(this.j,"No KML found in the ZIP!"),this.wc())};g.AM=function(a,b){if(b&&b instanceof Blob){var c=new FileReader;c.onload=this.yM.bind(this,a);c.readAsText(b)}else E.error(this.j,"There was a problem unzipping the KMZ!"),this.wc()};
g.yM=function(a,b){(a=b.target.result)&&"string"===typeof a?this.g||this.Cb(a):(E.error(this.j,"There was a problem reading the ZIP content!"),this.wc())};g.pc=function(){this.g=null};g.Cd=function(){return null!=this.g};g.Zc=function(){var a=null;this.g&&(a=this.g,this.g=null,a=this.Lc.vg(a,{featureProjection:S}));if(a){this.columns=[];var b={};a.forEach(function(a){if(a=a.Yb())for(var c in a)b[c]=!0});for(var c in b)this.columns.push(new Wv(c))}return a};g.getColumns=function(){return this.columns};function x1(){dT.call(this);this.j=!1;this.fileName=""}w(x1,dT);x1.prototype.S=function(){return"Area Import - KML"};x1.prototype.Jb=function(a,b){x1.C.Jb.call(this,a,b);b=new oM;b.file=a;b.title=a.getFileName()||"";b=Ga(this.l,b);var c=new w1;c.Ua("complete",b,!1,this);c.Ua("error",b,!1,this);c.Cb(a.Pb())};
x1.prototype.l=function(a,b){b=b.target;var c=b.Zc(),d=b.getColumns()||[];z(b);a.columns=d;a.preview=c;fx({label:"KML Area Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"450","min-width":"300","max-width":"800",height:"auto",modal:"true","show-close":"true"},"<kmlarea></kmlarea>",void 0,void 0,void 0,{config:a})};Q.directive("kmlarea",[function(){return{restrict:"E",templateUrl:"v1541734487/views/plugin/kml/kmlarea.html",controller:y1,controllerAs:"areaFiles"}}]);
function y1(a,b,c){aQ.call(this,a,b,c)}w(y1,v1);y1.$inject=["$scope","$element","$timeout"];y1.prototype.finish=function(){y1.C.finish.call(this);var a=new w1;a=new CM(a);a.Ua("complete",this.g,!1,this);SK(a,this.config.file.Pb())};y1.prototype.finish=y1.prototype.finish;y1.prototype.getFileName=function(){return this.config.file&&this.config.file.getFileName()||void 0};y1.prototype.g=function(a){a=a.target;var b=a.getData()||[];a.dispose();zya(this,b);this.close()};function z1(a){if(!a||4>a.byteLength)return!1;a=(new DataView(a.slice(0,4))).getUint32(0);var b=a&255,c=a>>8&255;return 3==(a>>24&255)&&1<=b&&31>=b&&1<=c&&12>=c}function A1(a){a=new DataView(a.slice(0,4));try{return 9994==a.getUint32(0)}catch(b){return!1}};function Cya(a,b,c){this.name=a;this.type=b;this.length=c};function Dya(){this.data=null;this.j=this.o=this.l=0;this.fields=[];this.g=0};function Eya(){this.data=null;this.g=this.position=0};function Fya(){this.data=null;this.g=new Dya;this.j=new Eya;this.l=this.position=this.o=0};function B1(){C.call(this);this.g=[];this.j=null;this.u=this.l=!1;this.o=[]}w(B1,yM);var C1=E.V("plugin.file.shp.SHPParser");g=B1.prototype;g.pc=function(){this.j=null;this.l=!1};g.J=function(){this.pc();this.o.length=0};g.getColumns=function(){return this.g};g.Cd=function(){return this.l&&null!=this.j.data&&this.j.position<this.j.data.byteLength};
g.Zc=function(){var a=null;try{var b=new DataView(this.j.data.slice(this.j.position,this.j.position+8)),c=2*b.getUint32(4);this.j.o=b.getUint32(0);this.j.position+=8;b=new DataView(this.j.data.slice(this.j.position,this.j.position+c));var d=b.getUint32(0,!0);if(1==d||11==d||21==d){a=new hq;var e=b.getFloat64(4,!0),f=b.getFloat64(12,!0),h=[e,f];if(11==d){var k=b.getFloat64(20,!0);h.push(k);a.set("ALTITUDE",k)}a.set("LAT",f);a.set("LAT_DDM",fq(f,!1));a.set("LAT_DMS",eq(f,!1));a.set("LON",e);a.set("LON_DDM",
fq(e,!0));a.set("LON_DMS",eq(e,!0));a.tb(Ap(new hp(h)))}else if(3==d||5==d||13==d||15==d||23==d||25==d){a=new hq;var l=b.getInt32(36,!0),m=b.getInt32(40,!0),n=4*l,p=16*m,r=[];for(k=0;k<l;k++){var u=b.getInt32(44+4*k,!0);r.push(u)}0==r.length&&r.push(0);l=null;if(13==d||15==d)for(l=[],p=44+n+p+16,k=0;k<m;k++){var v=b.getFloat64(p+8*k,!0);l.push(v)}v=[];n=44+n;for(u=p=0;u<r.length;u++){for(var y=[],B=u+1<r.length?r[u+1]:m,G=r[u];G<B;G++,p++){var D=16*G;e=b.getFloat64(n+D,!0);f=b.getFloat64(n+D+8,!0);
isNaN(e)||isNaN(f)?E.hb(C1,"Record #"+this.j.o+" lat/lon could not be parsed!"):(D=[e,f],l&&p<l.length&&!isNaN(l[p])&&D.push(l[p]),y.push(D))}v.push(y)}b=null;if(5==d||15==d||25==d)if(1<v.length){d=[];for(k=0;k<v.length;k++){h=v[k];var U;if(U=0<d.length){e=0;if(3<h.length&&Yp(h))for(f=0;f<h.length;f++){var ja=h[f],ea=h[f+1==h.length?0:f+1];e+=(ea[0]-ja[0])*(ea[1]+ja[1])}U=0>e}U?d[d.length-1].push(h):d.push([h])}b=new vp(d)}else b=new qp(v);else b=1<v.length?new Mo(v):new Jo(v[0]);a.tb(Ap(b))}else 0!=
d&&E.hb(C1,"Unsupported shape type ("+d+") encountered. Only POINT(1,11,21), POLYLINE(3,13,23) & POLYGON(5,15,25) are supported");if(a&&this.j.g.data){h=a;var ca=this.j.g,aa=this.j.o;if(aa<=ca.l){var ka=ca.j+(aa-1)*ca.o;aa=0;for(var Ha=ca.fields.length;aa<Ha;aa++){var Oa=ca.fields[aa],tc=ca.data.slice(ka,ka+Oa.length),Ua=Dw(tc);if(Ua){var la=Jb(Ua);"N"==Oa.type?(la=Number(la),isNaN(la)&&(la=null)):"L"==Oa.type&&(la=!!la);ka+=Oa.length;h.set(Oa.name,la)}}}}this.j.position+=c}catch(Yb){throw Yb;}a&&
a.ga(String(J(a)));return a};function Gya(a){var b=[];if(a.l){for(;a.Cd()&&50>b.length;){var c=a.Zc();c&&b.push(c)}a.pc()}return b}
g.Cb=function(a){this.u=this.l=!1;this.o.length=0;if(a){if(q(a))for(var b=a.length;b--;)a[b]instanceof ArrayBuffer?this.o.push(a[b]):D1("Invalid SHP source!");else a instanceof ArrayBuffer?this.o.push(a):D1("Invalid SHP source!");if(0<this.o.length){this.j=new Fya;for(a=this.o.length;a--;)b=this.o[a],yw(b)?Hya(this,b):A1(b)?this.j.data?E.hb(C1,"Ignoring extra SHP file while trying to parse a SHP/ZIP file."):Iya(this,b):z1(b)&&(this.j.g.data?E.hb(C1,"Ignoring extra DBF file while parsing a SHP/ZIP file."):
(Jya(this,b),Kya(this)));this.u||(this.j.data?this.j.g.data?this.gi():(D1("No valid DBF file found!"),this.wc()):(D1("No valid SHP file found!"),this.wc()))}}};g.wc=function(){this.l=!0;this.u=!1;B1.C.wc.call(this)};g.gi=function(){this.l=!0;this.u=!1;B1.C.gi.call(this)};function D1(a){E.error(C1,a)}function Kya(a){a.g.length=0;if(a.j.g)for(var b=a.j.g.fields,c=0,d=b.length;c<d;c++){var e=new Wv(b[c].name);e.selectable=!1;e.sortable=!1;a.g.push(e)}}
function Hya(a,b){a.u=!0;zip.createReader(new zip.ArrayBufferReader(b),t(function(a){a.getEntries(this.HM.bind(this))},a),t(function(){D1("Error reading zip file!")},a))}g.HM=function(a){for(var b=!1,c=!1,d=0,e=a.length;d<e;d++){var f=a[d];!b&&E1.test(f.filename)?(b=!0,f.getData(new zip.ArrayBufferWriter,this.Lz.bind(this,f))):!c&&F1.test(f.filename)&&(c=!0,f.getData(new zip.ArrayBufferWriter,this.Lz.bind(this,f)))}b?c||(D1("No valid DBF file found!"),this.wc()):(D1("No valid SHP file found!"),this.wc())};
g.Lz=function(a,b){b instanceof ArrayBuffer&&(E1.test(a.filename)?Iya(this,b):F1.test(a.filename)&&(Jya(this,b),Kya(this)));!this.l&&this.j.data&&this.j.g.data&&this.gi()};function Iya(a,b){1E3==(new DataView(b)).getUint32(28,!0)&&(a.j.data=b,a.j.position=100)}
function Jya(a,b){a=a.j.g;var c=new DataView(b);a.l=c.getUint32(4,!0);a.j=c.getUint16(8,!0)+1;a.o=c.getUint16(10,!0);a.fields.length=0;for(var d=32;d<a.j;){var e=Dw(b.slice(d,d+10));if(13==e.charCodeAt(0))break;var f=String.fromCharCode(c.getUint8(d+12)),h=c.getUint8(d+16);e=Jb(e);a.fields.push(new Cya(e,f,h));d+=32}a.data=b};function G1(){oM.call(this);this.zipFile=this.file2=null;this.lineAlpha=1;this.fillAlpha=.5;this.append=!0}w(G1,oM);function Lya(a,b){a.columns=[];a.preview=[];var c=new B1(a);c.Cb(a.zipFile.Pb());Yd(c,"complete",t(function(){this.preview=Gya(c);this.columns=c.getColumns()||[];for(var a=0,e=this.columns.length;a<e;a++){var f=this.columns[a];f.width=0;Dx(f)}b();c.dispose()},a),!1,a)}
G1.prototype.wb=function(){this.columns=[];this.preview=[];if(this.file||this.file2){var a=[];this.file&&a.push(this.file.Pb());this.file2&&a.push(this.file2.Pb());var b=new B1(this);b.Cb(a);this.preview=Gya(b);this.columns=b.getColumns()||[];a=0;for(var c=this.columns.length;a<c;a++){var d=this.columns[a];d.width=0;Dx(d)}b.dispose()}};lw("application/shapefile",function(a){return Sc(a&&(A1(a)||z1(a)))});lw("application/zip; subtype=shape",zw(/\.shp$/i),0,"application/zip");var E1=/\.shp$/i,F1=/\.dbf$/i;function H1(){Q0.call(this);this.template="<shpfilesstep></shpfilesstep>";this.title="Files"}w(H1,Q0);H1.prototype.Mi=function(a){try{a.wb();var b=a.preview;if((!a.mappings||0>=a.mappings.length)&&b&&0<b.length){var c=iy.s().Wd(b);c&&0<c.length&&(a.mappings=c)}}catch(d){}};Q.directive("shpfilesstep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/plugin/shp/shpfilesstep.html",controller:I1,controllerAs:"filesStep"}}]);
function I1(a){this.v=a;this.g=a.config;this.j=document.getElementById("dbfFile");Yd(this.j,"change",this.o,!1,this);this.l=document.getElementById("shpFile");Yd(this.l,"change",this.o,!1,this);this.loading=!1;this.dbfName=J1(this.g.file2);this.dbfValid=!!this.dbfName;this.dbfError=null;this.shpName=J1(this.g.file);this.shpValid=!!this.shpName;this.shpError=null;a.$on("$destroy",this.B.bind(this));K1(this,"shp");K1(this,"dbf");L1(this)}I1.$inject=["$scope"];
I1.prototype.B=function(){de(this.j,"change",this.o,!1,this);de(this.l,"change",this.o,!1,this);this.v=this.g=this.l=this.j=null};function L1(a){a.v.$emit("validate",a.dbfValid&&a.shpValid);R(a.v)}I1.prototype.qH=function(a){"dbf"==a&&this.j?this.j.click():"shp"==a&&this.l&&this.l.click()};I1.prototype.onBrowse=I1.prototype.qH;I1.prototype.o=function(a){a=a.target;var b=a==this.j?"dbf":"shp";a.files&&0<a.files.length?(this.loading=!0,uh(Ew(a.files[0]),Ga(this.A,b),Ga(this.u,b),this)):this.Ew(b)};
I1.prototype.A=function(a,b){this.loading=!1;if(b){this.g.descriptor||iB(eB.s(),b);var c="dbf"==a?z1:A1,d=b.Pb();d&&d instanceof ArrayBuffer&&c(d)?("dbf"==a?this.g.file2=b:this.g.file=b,this[a+"Name"]=J1(b),this[a+"Valid"]=!0):this[a+"Valid"]=!1}K1(this,a);L1(this)};function K1(a,b,c){a[b+"Error"]=a[b+"Valid"]?null:c?c:a[b+"Name"]?"Selected file is not "+("a"+("shp"==b?"n ":" ")+b.toUpperCase()+" file")+".":"Please choose "+("a"+("shp"==b?"n ":" ")+b.toUpperCase()+" file")+"."}
function J1(a){if(!a)return"";var b=a.Ma();return b&&!Jw(b)?b:a.getFileName()||""}I1.prototype.u=function(a,b){this.loading=!1;var c=a+"File";b&&"string"===typeof b||(b='Unable to load file "'+(this.v[c]?this.v[c].name:"unknown")+'".');this[a+"Valid"]=!1;K1(this,a,b);L1(this);E.error(I1.g,b)};I1.prototype.Ew=function(a){"dbf"==a?(this.g.file2=null,this.j.value=null):(this.g.file=null,this.l.value=null);this[a+"Name"]="";this[a+"Valid"]=!1;K1(this,a);L1(this)};I1.prototype.onClear=I1.prototype.Ew;
I1.prototype.jj=function(a){var b=new vM;b.Mb(this[a+"Name"]);b.H("complete",Ga(this.G,a),!1,this);b.H("cancel",Ga(this.I,a),!1,this);b.jj()};I1.prototype.loadUrl=I1.prototype.jj;I1.prototype.G=function(a,b){b=b.target;b.removeAllListeners();(b=b.j)?this.A(a,b):this.u(a,"Unable to load URL!")};I1.prototype.I=function(a,b){b.target.removeAllListeners();this.u(a,"Unable to load URL!")};function M1(){dT.call(this);this.j=!1}w(M1,dT);M1.prototype.S=function(){return"Area Import - SHP"};
M1.prototype.Jb=function(a,b){M1.C.Jb.call(this,a,b);b=new G1;var c=a.getFileName();E1.test(c)?(b.file=a,b.title=c):F1.test(c)?(b.file2=a,b.title=c.split(F1)[0]+".shp"):(b.zipFile=a,b.title=c);fx({label:"SHP Area Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"450","min-width":"300","max-width":"800",height:"auto",modal:"true","show-close":"true"},'<shparea resize-with=".js-window"></shparea>',void 0,void 0,void 0,{config:b})};
Q.directive("shparea",[function(){return{restrict:"E",templateUrl:"v1541734487/views/plugin/shp/shparea.html",controller:N1,controllerAs:"areaFiles"}}]);function N1(a,b,c){aQ.call(this,a,b,c);this.scope.$on("validate",this.g.bind(this));this.config.zipFile&&Lya(this.config,R.bind(this,this.scope))}w(N1,v1);N1.$inject=["$scope","$element","$timeout"];N1.prototype.g=function(){this.config.wb();R(this.scope)};
N1.prototype.WF=function(){var a=this.config;return a.zipFile?!a.columns||0==a.columns.length||!a.title&&!a.titleColumn:!a.file||!a.file2||!a.title&&!a.titleColumn};N1.prototype.invalid=N1.prototype.WF;N1.prototype.finish=function(){N1.C.finish.call(this);var a=new B1(this.config);a=new CM(a);a.Ua("complete",this.j,!1,this);this.config.zipFile?SK(a,this.config.zipFile.Pb()):SK(a,[this.config.file.Pb(),this.config.file2.Pb()])};N1.prototype.finish=N1.prototype.finish;
N1.prototype.j=function(a){a=a.target;var b=a.getData()||[];a.dispose();zya(this,b);this.close()};lw("application/vnd.google-earth.kml+xml",function(a,b,c){var d;c&&(/^(document|folder|kml)$/i.test(c.vA)||/\/kml\//i.test(c.Rs))&&(d=c);return Sc(d)},0,"text/xml");lw("application/vnd.google-earth.kmz",zw(/\.kml$/i),0,"application/zip");function O1(){Kg.call(this);this.id="areas"}w(O1,Kg);O1.prototype.init=function(){var a=We;eka(Xe);KM(a,"text/csv",new q1);JM(a,"CSV",!0);KM(a,"application/vnd.geo+json",new u1);JM(a,"GeoJSON",!0);KM(a,"application/vnd.google-earth.kml+xml",new x1);KM(a,"application/vnd.google-earth.kmz",new x1);JM(a,"KML/KMZ",!0);KM(a,"application/shapefile",new M1);KM(a,"application/zip; subtype=shape",new M1);JM(a,"Shapefile (SHP/DBF or ZIP)",!0)};function P1(){this.j=!1}w(P1,cT);P1.prototype.Jb=function(a){a=a.Ma();if(!a||Jw(a)||!Bw&&Iw(a))a="The audio manager does not support local files. Only files from a URL can be played.",rj(qj.s(),a,Qh);else{var b=k_.s();if(!c){var c=a.lastIndexOf(".");0>c&&(c=a.length);c=a.substring(a.lastIndexOf("/")+1,c)}b.j[c]=a;delete b.l[a];delete b.u[a];b=M.get(["userSounds"],{});b[c]=a;M.set(["userSounds"],b);E.info(l_,'Added sound "'+c+'" from '+a);a='Added new sound "'+c+'"';rj(qj.s(),a,Sh)}};lw("application/audio",function(a,b){return Sc(b&&/\.(mp3|wav|ogg|m4a)$/i.test(b.getFileName()))},1E4);function Q1(){Kg.call(this);this.id="audio"}w(Q1,Kg);Q1.prototype.init=function(){var a=GM.s();JM(a,"Audio files for application sounds.");KM(a,"application/audio",new P1)};function R1(){qY.call(this)}w(R1,qY);R1.prototype.ae=function(a){var b=[];try{var c=a.W(),d=Ov(L.s().X()).g;a=0;for(var e=d.length;a<e;a++)if(d[a]instanceof Uv){var f=d[a];if(-1<Pv(f).g.indexOf(c)){ib(b,Sb(99-a,2)+f.Sc());break}}}catch(h){}return b};R1.prototype.Le=function(a){var b=new ko;b.ga(a);b.Da(a.substring(2));qo(b,!1);b.collapsed=!1;return b};function S1(a,b,c){cY.call(this,[],a,b,c)}w(S1,oY);g=S1.prototype;g.um=function(){return Dg(L.s()).filter(function(a){return!a.lk()})};g.io=function(a){if(a.Rp)var b=a.Rp();else b=new ev,b.Ie(a);qo(b,!0);return b};
g.pp=function(a,b){if(!(a instanceof R1))for(a=b.length;a--;){var c=void 0,d=b[a].na(),e=b[a];if(d&&1<d.length){var f=Ab(d,Mya);d.length=0;for(c in f){var h=f[c];if(1<h.length){for(var k=Number.MAX_VALUE,l="Unknown",m=0,n=h.length;m<n;m++){var p=h[m].ba()||"";p.length<k&&(l=p,k=p.length)}k=new IE;k.ga(c+"#_group");k.Ta(l);l=new ev;m=0;for(n=h.length;m<n;m++)if(p=h[m]){var r=p.W();r&&k.g.push(r);l.R(p)}l.Ie(k);d.push(l)}else 1==h.length&&d.push(h[0])}c=e.ba();m=c.indexOf("(");f=c.substring(m).split(/[^0-9]+/);
c=c.substring(0,m);for(m=f.length;m--;)""===f[m]&&f.splice(m,1);for(m=0;m<f.length;m++){f[m]=parseInt(f[m],10);if(0===m)var u=d.length/f[0];f[m]*=u}e.Da(c+"("+f[0]+(1<f.length?" of "+f[1]:"")+")")}}};g.FA=function(a){this.g?a.sort(Tua):a.sort(fY)};g.jm=function(a){var b=Dg(L.s());if(b&&0<b.length)for(var c=0,d=b.length;c<d;c++){var e=new ev;e.Ie(b[c]);a.push(e)}else eY(this,a)};function Mya(a){var b=a.D().split("#");b.pop();return 1<b.length?b.join("#"):a.D()};function T1(a){qY.call(this);this.j=NaN;this.o=a||!1}w(T1,qY);
var U1=[{label:"Last Minute",offset:6E4},{label:"Last 5 Minutes",offset:3E5},{label:"Last 15 Minutes",offset:9E5},{label:"Last 30 Minutes",offset:18E5},{label:"Last Hour",offset:36E5},{label:"Last 3 Hours",offset:108E5},{label:"Last 6 Hours",offset:216E5},{label:"Last 12 Hours",offset:432E5},{label:"Last 24 Hours",offset:864E5},{label:"Last 48 Hours",offset:1728E5},{label:"Last 7 Days",offset:6048E5},{label:"Last 2 Weeks",offset:12096E5},{label:"Last 30 Days",offset:2592E6},{label:"Last 60 Days",
offset:5184E6}];T1.prototype.init=function(){T1.C.init.call(this);this.j=Ia()};T1.prototype.ae=function(a){var b=[],c=Number.NEGATIVE_INFINITY;(a=a instanceof XM?a.Ka():Y.Ka(a.D()))&&(c=a.eg());if(!isNaN(c)&&c>Number.NEGATIVE_INFINITY){if(c>this.j)return ib(b,"xxReports future activity"),b;a=0;for(var d=U1.length;a<d;a++)if(this.j-U1[a].offset<=c)return ib(b,Sb(a,2)+U1[a].label),b;ib(b,"yyNo recent activity");return b}ib(b,"zzCould not determine activity");return b};
T1.prototype.Le=function(a){var b=new ko;b.ga(a);b.Da(a.substring(2));qo(b,!1);-1<a.indexOf("Last")?po(b,"Contains all results that report activity over the "+b.ba().toLowerCase()+"."):-1<a.indexOf("zz")?po(b,"Contains all results for which the activity could not be determined."):-1<a.indexOf("yy")?po(b,"Contains all results that do not have any recent activity."):-1<a.indexOf("xx")&&po(b,"Contains all results that report future activity and thus cannot be accurately binned inthe other groups");b.collapsed=
!this.o;return b};var bxa="search.v1";function V1(){C.call(this);this.j={};this.l=null;this.g={};this.g.descriptor="c-toggle-switch";this.g.folder="fa fa-fw fa-folder";this.g.missing="fa fa-fw fa-chain-broken";this.g[bxa]="fa fa-fw fa-search"}w(V1,C);xa(V1);var s_="favorite";g=V1.prototype;g.Rg=function(a){return this.g[a]||"fa fa-fw fa-external-link"};function v_(){var a=M.get([s_]);a||(a=[]);return a}
function W1(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.key==b)return d;if("folder"==d.type&&(d=W1(d.children,b)))return d}return null}function Nya(a,b){for(var c=0;c<a.length;c++){var d=a[c];if(d.key==b)nb(a,c);else if("folder"==d.type){var e=Nya(d.children,b);e.length!=d.children.length&&(d.children=e)}}return a}function Oya(a,b){var c=[],d=Ab(a,function(a){return a.type});$a(b,function(a){(a=d[a])&&sb(c,a)});(a=d.folder)&&$a(a,function(a){sb(c,Oya(a.children,b))});return c}
function Pya(a,b){a=Oya(a,b);ub(a,void 0,function(a){return a.key});return a}function Qya(a,b,c){for(var d=0;d<a.length;d++){var e=a[d];if(e.key==c){jb(e.children,b);break}else if("folder"==e.type){var f=Qya(e.children,b,c);if(f.length!=e.children.length){e.children=f;break}}}return a}
g.save=function(a,b,c,d,e,f){var h=v_(),k=h.length,l;(l=W1(v_(),b))?(l=fi(l),h=Nya(h,b)):l={children:[],key:b,time:(new Date).getTime(),type:a,value:"",key2:f?f:""};l.value=c;l.time=(new Date).getTime();if(e&&0<e.length)for(ub(e),a=0;a<e.length;a++)h=Qya(h,l,e[a]);else jb(h,l);M.set([s_],h);d&&k!=h.length&&(c="<strong>"+Pb(c||".",50)+"</strong>",wq.test(b)&&(c='<a href="'+b+'" target="_blank">'+c+"</a>"),rj(tj,"Saved Favorite: "+c,Sh))};
g.filter=function(a,b,c){var d=[];b?d=Pya(a,b):d=a?rb(a):[];c&&d&&(d.length=Math.min(d.length,c));return d};g.handleEvent=function(a,b,c){if(b=this.j[b])b(c),a.preventDefault()};g.clear=function(){M.set([s_],[])};var axa=V1.s();function X1(){qY.call(this)}w(X1,qY);X1.prototype.ae=function(a){var b=[];try{if(a.D()){var c=Y.Ka(a.D()),d;if(d=c){var e=c.D();d=W1(v_(),e)}d?b.push("Favorites"):b.push("Other")}else b.push("Other")}catch(f){}return b};X1.prototype.Le=function(a){var b=new ko;b.ga(a);b.Da(a);qo(b,!1);b.Fd(!1);return b};function Y1(){qY.call(this)}w(Y1,qY);Y1.prototype.ae=function(a){var b=[];try{var c=a.W().rb()||"Unknown Provider";ib(b,c)}catch(d){}return b};Y1.prototype.Le=function(a){var b=new ko;b.ga(a);b.Da(a);qo(b,!1);b.collapsed=!1;return b};function Z1(){qY.call(this)}w(Z1,qY);Z1.prototype.ae=function(a){var b=[];try{var c=a.W(),d=Ov(L.s().X()).g,e=c.Sc()||"00Unknown Type";a=0;for(var f=d.length;a<f;a++)if(d[a]instanceof Uv){var h=d[a];if(-1<Pv(h).g.indexOf(c)||"Tile and Feature Groups"==e&&"Feature Layers"==h.Sc())var k=Sb(99-a,2)+e}ib(b,k||e)}catch(l){}return b};Z1.prototype.Le=function(a){var b=new ko;b.ga(a);b.Da(a.substring(2));qo(b,!1);b.collapsed=!1;return b};function $1(a){HY.call(this,a);this.j=null}w($1,HY);$1.prototype.init=function(){$1.C.init.call(this);if(this.j=M.get(["tagList"]))for(var a=0,b=this.j.length;a<b;a++)this.j[a]=this.j[a].toUpperCase()};$1.prototype.ae=function(a){var b=[],c=null;try{(c=a.getTags())||(c=a.getParent().getTags())}catch(f){}if(c&&this.j){a=0;for(var d=c.length;a<d;a++){var e=c[a].toUpperCase();-1<this.j.indexOf(e)&&ib(b,"a"+e)}}0===b.length&&b.push("zNot Specified");return b};Q.directive("layertree",[function(){var a=WD();a.controller=a2;return a}]);function a2(a,b,c){a.dragEnabled=!0;XD.call(this,a,b,c)}w(a2,XD);a2.$inject=["$scope","$element","$compile"];a2.prototype.nu=function(a){var b=this.va.getDataItem(a[0]);if(!b)return!1;var c=b instanceof ev;if(!c&&!b.I)return!1;b=b.depth;if(0===b&&!c)return!1;for(var d=1,e=a.length;d<e;d++){var f=this.va.getDataItem(a[d]);if(f instanceof ev!=c||f.depth!=b||!c&&!f.I)return!1}return!0};
a2.prototype.Fi=function(a,b){if(isNaN(b))return!1;var c=this.Hb.getItem(a[0]);if(!c)return!1;if(c instanceof ev)for(var d=0,e=a.length;d<e;d++){if(a[d]==b||a[d]==b-1)return!1;var f=this.va.getDataItem(a[d]);if(f.depth<c.depth)return!1;var h=this.va.getDataItem(b);if(!h||h.depth!==c.depth)for(var k=b;0<=k&&(!h||h.depth!==c.depth);)k--,h=this.va.getDataItem(k);if(!h||h.fe!==f.fe)return!1;k=Kv.s();if(Mv(k,f.D())!==Mv(k,h.D()))return!1}else return c.I&&a2.C.Fi.call(this,a,b)?(h=this.va.getDataItem(b))&&
h.Ha()==c.Ha()?c.ou(h,this.l):!1:!1;return!0};
a2.prototype.cm=function(a,b){if(!isNaN(b)){var c=this.Hb.getItem(a[0]);if(c){if(c instanceof ev){for(var d=!1,e=this.va.getDataItem(b);!(e instanceof ev)||e.depth!==c.depth;)d=!0,b--,e=this.va.getDataItem(b);if(e){var f=e.W();b=[f.D()];c=Kv.s();f instanceof IE&&(b=f.g.map(Jg));for(var h=0,k=a.length;h<k;h++)if(e=this.va.getDataItem(a[h])){f=e.W();e=[f.D()];f instanceof IE&&(e=f.g.map(Jg));f=0;for(var l=e.length;f<l;f++)for(var m=0,n=b.length;m<n;m++)Qv(c,e[f],b[m],!d)}c.update();c.save()}}else c.I&&
a2.C.cm.call(this,a,b);this.scope.$emit("search")}}};yc(Cx,{name:{order:-60,width:200},description:{order:-55}});var b2="name description BEARING LAT LON LAT_DDM LON_DDM LAT_DMS LON_DMS MGRS SEMI_MAJOR SEMI_MINOR SEMI_MAJ_UNITS SEMI_MINOR_UNITS ORIENTATION centerShape shape labels labelColor labelSize".split(" ");function c2(a,b){x.call(this);this.Ba=null;this.nb=!1;this.state="ready";this.title="Add/Remove KML Node";this.node=a;this.parent=b}w(c2,x);c2.prototype.J=function(){c2.C.J.call(this);if(this.node){var a=this.node.getParent();a&&!a.Xa()||z(this.node);this.node=null}};
function Rya(a){return"ready"!==a.state?(a.Ba="Command not in ready state.",!1):a.node?a.node.Xa()?(a.state="error",a.Ba="Node has been disposed.",!1):a.parent?a.parent.Xa()?(a.state="error",a.Ba="Parent node has been disposed.",!1):!0:(a.state="error",a.Ba="Parent node has not been provided.",!1):(a.state="error",a.Ba="Node has not been provided.",!1)}
c2.prototype.add=function(){if(this.node&&this.parent){var a=this.parent.N();if(a)d2(a,[this.node],!0);else return this.state="error",this.Ba="Node source is not available.",!1;this.parent.R(this.node);return!0}this.state="error";this.Ba="Node/parent are not available.";return!1};
c2.prototype.remove=function(){if(this.node&&this.parent){this.parent.removeChild(this.node);var a=this.node.N();if(a)e2(a,this.node,!1);else return this.state="error",this.Ba="Node source is not available.",!1;return!0}this.state="error";this.Ba="Node/parent are not available.";return!1};function f2(a,b){c2.call(this,a,b);this.title="Add KML Node";if(a=a.ba())this.title+=' "'+a+'"'}w(f2,c2);f2.prototype.Fa=function(){return Rya(this)&&(this.state="executing",this.add())?(this.state="success",!0):!1};f2.prototype.Db=function(){this.state="reverting";return this.remove()?(this.state="ready",!0):!1};var Sya={Circle:'<i class="fa fa-circle-o fa-fw compact" title="Circle Geometry"></i>',GeometryCollection:'<i class="fa fa-picture-o fa-fw compact" title="Geometry Collection"></i>',LineString:'<i class="fa fa-share-alt fa-fw compact" title="Line String Geometry"></i>',LinearRing:'<i class="fa fa-square-o fa-fw compact" title="Linear Ring Geometry"></i>',MultiPoint:'<i class="fa fa-th fa-fw compact" title="Multi Point Geometry"></i>',MultiLineString:'<i class="fa fa-slack fa-fw compact" title="Multi Line String Geometry"></i>',
MultiPolygon:'<i class="fa fa-bullseye fa-fw compact" title="Multi Polygon Geometry"></i>',Point:'<i class="fa fa-circle fa-fw compact" title="Point Geometry"></i>',Polygon:'<i class="fa fa-star-o fa-fw compact" title="Polygon Geometry"></i>'};function g2(a){c2.call(this,a,a.getParent());this.title="Remove KML Node";if(a=a.ba())this.title+=' "'+a+'"'}w(g2,c2);g2.prototype.Fa=function(){return Rya(this)&&(this.state="executing",this.remove())?(this.state="success",!0):!1};g2.prototype.Db=function(){this.state="reverting";return this.add()?(this.state="ready",!0):!1};Q.directive("kmlnodeui",[function(){return{restrict:"E",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.canAddChildren()" ng-click="nodeUi.addFolder()"><i class="fa fa-folder fa-fw c-glyph" title="Create a new folder"></i></span><span ng-if="nodeUi.canAddChildren()" ng-click="nodeUi.addPlace()"><i class="fa fa-map-marker fa-fw c-glyph" title="Create a new place"></i></span><span ng-if="nodeUi.canEdit()" ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit the {{nodeUi.isFolder() ? \'folder\' : \'place\'}}"></i></span><span ng-if="nodeUi.canRemove()" ng-click="nodeUi.tryRemove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the {{nodeUi.isFolder() ? \'folder\' : \'place\'}}"></i></span></span>',
controller:h2,controllerAs:"nodeUi"}}]);function h2(a,b){FE.call(this,a,b)}w(h2,FE);h2.$inject=["$scope","$element"];h2.prototype.Vc=function(){var a=this.scope.item;return null!=a&&a.Vc()};h2.prototype.isFolder=h2.prototype.Vc;h2.prototype.Qf=function(){var a=this.scope.item;a&&i2({parent:a})};h2.prototype.addFolder=h2.prototype.Qf;h2.prototype.Uj=function(){var a=this.scope.item;a&&j2({parent:a})};h2.prototype.addPlace=h2.prototype.Uj;
h2.prototype.Fh=function(){var a=this.scope.item;return null!=a&&a.Fh};h2.prototype.canAddChildren=h2.prototype.Fh;h2.prototype.Gh=function(){var a=this.scope.item;return null!=a&&a.P};h2.prototype.canEdit=h2.prototype.Gh;h2.prototype.Sl=function(){var a=this.scope.item;return null!=a&&a.U};h2.prototype.canRemove=h2.prototype.Sl;
h2.prototype.Al=function(){var a=this.scope.item;if(a)if(a.We()){var b=a.ba(),c="Are you sure you want to remove <strong>"+b+"</strong> from the tree? This will also remove all descendants.";gD({confirm:this.g.bind(this,a),prompt:c,windowOptions:{icon:"fa fa-trash-o",label:"Remove "+b}})}else this.g(a)};h2.prototype.tryRemove=h2.prototype.Al;h2.prototype.g=function(a){a=new g2(a);AE(BE,a)};h2.prototype.Rc=function(){var a=this.scope.item;a&&(a.Vc()?i2({node:a}):j2({feature:a.getFeature(),node:a}))};
h2.prototype.edit=h2.prototype.Rc;function k2(){ko.call(this);this.j="<kmlnodeui></kmlnodeui>";this.Cf=!1;this.Ga("on");this.log=Tya;this.Ia=this.ib=this.U=this.P=this.Fh=!1;this.g=this.B=this.wa=null;this.jb=!1;this.source=null;this.sa=!0;this.G={}}w(k2,ko);var Tya=E.V("plugin.file.kml.ui.KMLNode"),Uya=["children","state","collapsed"];g=k2.prototype;g.J=function(){k2.C.J.call(this);this.source=this.wa=this.g=null};g.ou=function(a,b){return a.Vc()||"sibling"==b};g.getFeature=function(){return this.g};
g.Lf=function(a){this.g&&yf(this.g,"propertychange",this.Kz,this);(this.g=a)&&H(this.g,"propertychange",this.Kz,this);this.dispatchEvent(new K("icons"));this.dispatchEvent(new K("label"))};g.Kz=function(a){a instanceof K&&"loading"===a.j&&this.Wa(!!a.o)};function l2(a,b){if(a.g)return!0;a=a.na();return!!a&&a.some(function(a){return(b||"off"!=a.getState())&&l2(a,b)})}
g.La=function(a){if(this.g)return[this.g];var b=[],c=this.na();if(c)for(var d=0,e=c.length;d<e;d++){var f=c[d];("off"!=f.getState()||a)&&(f=f.La(a))&&(b=b.concat(f))}return b};g.Pa=function(){return this.wa};g.setImage=function(a){this.wa&&yf(this.wa,"propertychange",this.Zw,this);if(this.wa=a)H(this.wa,"propertychange",this.Zw,this),this.Ga(this.wa.hd()?"on":"off")};g.Zw=function(a){a instanceof K&&"visible"===a.j&&this.Ga(a.o?"on":"off")};
function Vya(a,b){if(a.wa)return[a.wa];var c=[];if(a=a.na())for(var d=0,e=a.length;d<e;d++){var f=a[d];("off"!=f.getState()||b)&&(f=Vya(f,b))&&(c=c.concat(f))}return c}g.sk=function(a){if(this.B)return[this.B];var b=[],c=this.na();if(c)for(var d=0,e=c.length;d<e;d++){var f=c[d];("off"!=f.getState()||a)&&(f=f.sk(a))&&(b=b.concat(f))}return b};
g.Y=function(){var a=null;if(this.wa){var b=this.wa.N();b instanceof oI&&(a=b.wa.Y())}else if((b=this.La())&&b.length){a=Ok();for(var c=0,d=b.length;c<d;c++){var e=b[c].Z();null!=e&&Yk(a,e.Y())}}return a};g.D=function(){var a;return this.g&&(a=this.g.D())?a.toString():this.wa&&(a=this.wa.D())?a:this.B?this.B:k2.C.D.call(this)};g.ob=function(){return this.ib};k2.prototype.isLoading=k2.prototype.ob;g=k2.prototype;g.Wa=function(a){this.ib!=a&&(this.ib=a,this.dispatchEvent(new K("loading",a,!a)))};
g.qe=function(){return this.ba()||""};g.N=function(){return this.source};g.getTags=function(){return null};g.index=function(a){var b=a.ba()||"";a instanceof k2&&(b in this.G||(this.G[b]=[]),this.G[b].push(a))};g.pB=function(a){var b=a.ba()||"";if(b in this.G){var c=this.G[b];a=c.indexOf(a);-1<a&&c.splice(a,1);0===c.length&&delete this.G[b]}};g.gq=function(a){var b=a.ba()||"";return b in this.G?-1!==this.G[b].indexOf(a):!1};
g.R=function(a,b,c){if(a instanceof k2){var d=this.merge(a);return d?d:k2.C.R.call(this,a,b,c)}E.error(this.log,'Unable to add non-KML node "'+a.ba()+'" to the KML tree!');return null};g.merge=function(a){var b=this.G[a.ba()||""];if(b)for(var c=0,d=b.length;c<d;c++){var e=b[c];if(e.Ia)return e.Lf(a.getFeature()),e.Ia=!1,e.ga(a.D()),e}return null};g.Vc=function(){return null==this.g&&null==this.wa&&null==this.B};
g.Kc=function(){if(this.Vc())return'<i class="fa fa-folder'+(this.We()&&!this.collapsed?"-open":"")+' fa-fw"></i>';if(this.wa)return'<i class="fa fa-photo fa-fw compact" title="Ground Overlay"></i>';if(this.B)return'<i class="fa fa-photo fa-fw compact" title="Screen Overlay"></i>';var a='<i class="fa fa-info-circle fa-fw compact gold-icon pointer" title="Feature Info" ng-click="itemAction(\'featureInfo\')"></i>',b=this.g.Z();if(b&&(b=b.T(),b in Sya)){b=Sya[b];var c=Gy(this.g);c&&(b=b.replace("><",
' style="color:'+ef(c)+'"><'));a=b+a}return a};g.iz=function(a){"featureInfo"==a&&this.g&&(a=this.source?this.source.S():void 0,bL(this.g,a))};g.Gf=function(a){var b=a.j;this.source&&this.source.ob()&&b&&-1==Uya.indexOf(b)||(k2.C.Gf.call(this,a),"collapsed"==b?this.dispatchEvent(new K(b)):"loading"===b&&this.dispatchEvent(new K(b,a.o,a.u)))};g.Dj=function(){this.g&&this.source&&(this.jb=!0,this.source.Xe(this.g)||IK(this.source,[this.g]))};
g.ii=function(){this.g&&this.source&&(this.jb=!1,IK(this.source,null))};g.Cb=function(a){this.source=a};g.Ga=function(a){var b=this.getState();k2.C.Ga.call(this,a);a=this.getState();this.B?(b=jx(this.B))&&"on"===a&&b():b!=a&&this.sa&&this.source&&"both"!==a&&(this.source.EB.start(),this.jb&&("on"===a?IK(this.source,[this.g]):IK(this.source,null)))};g.sB=function(a,b){a.sa=!1;a.Ga(b);a.sa=!0};
function Wya(a){var b=a.na();if(b&&0<b.length){a=0;for(var c=b.length;a<c;a++)Wya(b[a])}else a.collapsed=!0};function i2(a){var b=a.node,c=b?b.ba():"New Folder";b=(b?"Edit":"Add")+" Folder";a={confirm:Ga(Xya,a),defaultValue:c,prompt:"Please choose a label for the folder:",windowOptions:{icon:"fa fa-folder",label:b}};qH(a)}function Xya(a,b){a.name=b;m2(a)}function m2(a){var b=a.node;b||(b=new k2,b.collapsed=!1,b.Fh=!0,b.P=!0,b.I=!0,b.U=!0);b.Da(a.name||"Unnamed Folder");a.parent&&(a=Yya(a.parent),a=new f2(b,a),AE(BE,a));return b}
function j2(a){fx({id:"placemarkEdit",label:(a.feature?"Edit":"Add")+" Place",icon:"fa fa-map-marker",x:"center",y:"center",width:700,"min-width":400,"max-width":2E3,height:"auto","min-height":300,"max-height":2E3,modal:!1,"show-close":!0},"<placemarkedit></placemarkedit>",void 0,void 0,void 0,{options:a})}
function n2(a){var b=a.node;b||(b=new k2,b.Fh=!1,b.P=!0,b.I=!0,b.U=!0);var c=a.feature||null;b.Lf(c);c&&(b.Da(c.get("name")||"Unnamed Place"),Oy(c),c.ia());a.parent&&(a=Yya(a.parent),a=new f2(b,a),AE(BE,a));return b}function Yya(a){var b=a,c=a.N();c&&(c=c.P)&&c!=a.Ha()&&(b=c);return b}function o2(a){return(a=(a=a.W())?a.N():null)?a.P:null};Q.directive("anydate",[function(){return{restrict:"E",replace:!0,scope:{initialStart:"=initialstart",initialEnd:"=initialend",initialType:"=initialtype",disabled:"=?",help:"=?"},templateUrl:"v1541734487/views/datetime/anydate.html",controller:p2,controllerAs:"anydate"}}]);
function p2(a){this.v=a;this.dateType=a.initialType||"instant";this.timesValid=!0;this.startDate=a.initialStart||null;this.endDate=a.initialEnd||null;this.startUnknown="range"==this.dateType&&!this.startDate;this.endUnknown="range"==this.dateType&&!this.endDate;this.help=this.v.help;a.$watch("anydate.dateType",function(a,c){a!=c&&(this.endUnknown=this.startUnknown=!1,q2(this),r2(this))}.bind(this));a.$watch("anydate.startUnknown",function(a,c){a!=c&&(a&&(this.endUnknown=!1),q2(this),r2(this))}.bind(this));
a.$watch("anydate.endUnknown",function(a,c){a!=c&&(a&&(this.startUnknown=!1),q2(this),r2(this))}.bind(this));a.$watch("anydate.startDate",function(b,c){b!=c&&(a.anyDateForm.startDate&&(c=a.anyDateForm.startDate,c.$setViewValue(b),c.$setDirty()),q2(this),r2(this))}.bind(this));a.$watch("anydate.endDate",function(b,c){b!=c&&(a.anyDateForm.endDate&&(c=a.anyDateForm.endDate,c.$setViewValue(b),c.$setDirty()),q2(this),r2(this))}.bind(this));a.$on("resetForm",function(){this.dateType="notime";this.endDate=
this.startDate=null;this.endUnknown=this.startUnknown=!1}.bind(this));q2(this);a.$on("$destroy",this.g.bind(this))}p2.$inject=["$scope","$element","$compile","$timeout"];p2.prototype.g=function(){this.v=null};
function r2(a){switch(a.dateType){case "notime":a.v.$emit("anydate:change",null,null,null);break;case "instant":a.v.$emit("anydate:change",a.startDate,null,null);break;case "range":if(null!=a.startDate&&null==a.endDate&&!a.startUnknown&&!a.endUnknown){var b=a.startDate.split("T");b=b[0]+"T23:59:59Z";a.endDate=b}a.v.$emit("anydate:change",null,a.startUnknown?null:a.startDate,a.endUnknown?null:a.endDate);break;default:a.v.$emit("anydate:change",null,null,null)}}
function q2(a){if("range"==a.dateType&&a.startDate&&a.endDate&&!a.startUnknown&&!a.endUnknown){var b=(new Date(a.startDate)).getTime();a.timesValid=(new Date(a.endDate)).getTime()>b?!0:void 0}else a.timesValid=!0};Q.directive("simplemde",[function(){return{restrict:"E",replace:!0,scope:{text:"=",edit:"=",maxlength:"=",isRequired:"=",basictoolbar:"=?",toolbar:"=?"},templateUrl:"v1541734487/views/text/simplemde.html",controller:s2}}]);function Zya(a){if(a){var b=$(a).scope(),c="";b&&(c=b.text?b.text.length:0,b.maxlength&&(c+=" / "+b.maxlength));b=pk(c);a.innerHTML=ok(b)}}
var $ya=[{className:"count",defaultValue:Zya,onUpdate:Zya}],aza="bold italic strikethrough heading-smaller heading-bigger | code quote unordered-list ordered-list | link image horizontal-rule table | preview side-by-side fullscreen".split(" "),bza="bold italic strikethrough heading-smaller heading-bigger | code quote unordered-list ordered-list | preview".split(" ");
function s2(a,b,c){this.v=a;this.L=b;this.Na=c;this.v.id=Vb();this.g=null;this.j=a.toolbar||aza;this.v.basictoolbar&&(this.j=bza);a.text=a.text||"";a.$watch("edit",t(function(){c(this.Un.bind(this),100)},this));a.$on("$destroy",this.cM.bind(this));this.v&&this.Na(this.init.bind(this))}s2.$inject=["$scope","$element","$timeout"];g=s2.prototype;g.cM=function(){this.v=this.L=this.Na=this.g=null};g.iD=function(a){return Ak(this.parent.markdown(a))};
function cza(a){var b=a.j;return{autoDownloadFontAwesome:!1,autofocus:!1,autosave:{enabled:!1},element:a.L.find(".js-simplemde__textarea")[0],initialValue:a.v.text,spellChecker:!1,toolbar:b,status:$ya,previewRender:a.iD}}
g.init=function(){this.L&&(this.g=new SimpleMDE(cza(this)),this.v.previewText=t2(this.v.text),this.v.$watch("text",t(function(a){a!=this.g.value()&&(this.g.value(a),R(this.v),this.Na(this.Un.bind(this),1E3),this.Na(this.Un.bind(this),2E3));this.v.previewText=t2(this.v.text)},this)),this.g.codemirror.on("change",this.bM.bind(this)),this.g.codemirror.on("refresh",this.pK.bind(this)),this.Na(this.Un.bind(this),5E3))};g.Un=function(){this.g&&this.g.codemirror.setSize()};
g.bM=function(){this.v&&this.v.simplemdeform&&this.v.simplemdeform.$setDirty();this.v.text=this.g.value();R(this.v)};g.pK=function(){for(var a=this.L;a&&a.length;)if(a.hasClass("modal")){this.g.isFullscreenActive()?a.addClass("c-simplemde__fullscreen"):a.removeClass("c-simplemde__fullscreen");break}else a=a.parent()};function t2(a){if(a){var b=a;(a=SimpleMDE.prototype.markdown.call({},a))?(a=tk("div",void 0,a),a=gr(a)):a=null;a&&(b=su(a,!1));return Ak(b)}return""};function dza(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/windows/featureedit.html",controller:u2,controllerAs:"ctrl"}}Q.directive("featureedit",[dza]);
function u2(a,b,c){x.call(this);this.scope=a;this.element=b;this.l=this.A=this.o=null;b=Da(this);this.scope.featureControlsID="featureControls"+b;this.scope.featureLabelsID="featureLabels"+b;this.scope.featureStyleID="featureStyle"+b;this.u=null;this.help={semiMajor:"Semi-major axis of the ellipse in the specified units.",semiMinor:"Semi-minor axis of the ellipse in the specified units.",orientation:"Orientation of the ellipse in degrees from north between 0\u00b0 and 360\u00b0. Values outside this range will be adjusted automatically.",
iconRotation:"Rotation of the icon in degrees from north between 0\u00b0 and 360\u00b0. Values outside this range will be adjusted automatically."};this.color="rgba(255,255,255,1)";this.opacity=1;this.size=3;this.icon={path:HB().path};this.centerIcon={path:HB().path};this.iconSet=JB;this.iconSrc=IB;this.pointGeometry=null;this.dateType="notime";this.endTime=this.startTime=void 0;this.name=this.description="";this.shapes="None;Point;Square;Triangle;Icon;Ellipse;Ellipse with Center".split(";");this.shape=
"Point";this.centerShapes=["Point","Square","Triangle","Icon"];this.centerShape="Point";this.semiMajor=void 0;this.semiMajorUnits="nmi";this.semiMinor=void 0;this.semiMinorUnits="nmi";this.iconRotation=this.orientation=void 0;this.units=["nmi","mi","km","m"];this.altitude=0;this.altUnits="m";this.altUnitOptions=ic(Kt);this.labelColor="rgba(255,255,255,1)";this.labelSize=14;this.labelColumns=eza.filter(function(a){return!Px(a)}).map(function(a){return new Wv(a)});this.labels=[];this.showLabels=!0;
this.timeHelp={title:"Time Selection",content:"Add a time to enable interaction with the Timeline. If 'No Time' is selected, the Place will always be visible",cT:"right"};this.j=a.options||{};this.timeEditEnabled=void 0!==this.j.timeEditEnabled?this.j.timeEditEnabled:!0;this.callback=this.j.callback;this.B=this.g=null;if(b=this.j.feature){var d=Ey(b);d&&(this.labelColumns=d.getColumns().filter(function(a){return!Px(a.field)}),this.timeEditEnabled=d.sq());this.l=b;if(this.g=b.Yb())delete this.g._selectStyle,
delete this.g._highlightStyle,delete this.g._labelStyle,(d=this.g._style)&&(this.g._style=fi(d)),this.g.labelColor||(this.g.labelColor=void 0),this.g.labelSize||(this.g.labelSize=void 0);fza(this,b);0==this.labels.length&&this.labels.push(Cz())}else{this.l=new hq;this.l.ga("features#temporary");this.l.set("_node",!1);if(b=this.j.name)this.l.set(v2,b,!0),this.name=b;(b=this.j.geometry)?b instanceof hp?(b=b.clone().toLonLat(),(b=Bo(b))&&(this.pointGeometry={lat:b[1],lon:b[0]})):this.B=b:this.pointGeometry=
{lat:NaN,lon:NaN,alt:NaN};this.labels.push(vc(gza))}this.pointGeometry&&(a.$watch("ctrl.pointGeometry.lat",this.wb.bind(this)),a.$watch("ctrl.pointGeometry.lon",this.wb.bind(this)));a.$watch("ctrl.description",this.wb.bind(this));a.$watch("ctrl.color",this.Xw.bind(this));a.$watch("ctrl.opacity",this.wb.bind(this));a.$watch("ctrl.size",this.wb.bind(this));a.$watch("ctrl.shape",this.wb.bind(this));a.$watch("ctrl.centerShape",this.wb.bind(this));a.$watch("ctrl.labelColor",this.wb.bind(this));a.$watch("ctrl.labelSize",
this.wb.bind(this));a.$watch("ctrl.showLabels",this.wb.bind(this));a.$on("icon:change",this.og.bind(this));a.$on("labelColor.reset",this.I.bind(this));a.$on("position:mapEnabled",this.O.bind(this));a.$on("labelcontrols:columnChange",this.qj.bind(this));a.$on("anydate:change",function(a,b,c,d){a.stopPropagation();c||d?(this.dateType="range",this.startTime=(new Date(c)).getTime(),this.endTime=(new Date(d)).getTime()):(b?(this.dateType="instant",this.startTime=(new Date(b)).getTime()):(this.dateType=
"notime",this.startTime=void 0),this.endTime=void 0);this.wb()}.bind(this));a.$on("$destroy",this.dispose.bind(this));c(function(){a.$emit("window.ready")},150)}w(u2,x);u2.$inject=["$scope","$element","$timeout"];var gza={column:"name",showColumn:!1},v2="name",eza=[v2,"description","BEARING","LAT","LON","ALTITUDE","ALTITUDE_UNITS","LAT_DDM","LON_DDM","LAT_DMS","LON_DMS","MGRS","SEMI_MAJOR","SEMI_MINOR","SEMI_MAJ_UNITS","SEMI_MINOR_UNITS","ORIENTATION","shape","centerShape","labels","labelColor","labelSize"];
u2.prototype.J=function(){u2.C.J.call(this);z(this.u);this.u=null;this.o&&(sf(this.o),this.o=null);this.A&&(this.A(),this.A=null);this.l&&("features#temporary"==this.l.D()&&L.s().Bb(this.l,!0),this.l=null);this.element=this.scope=null};u2.prototype.accept=function(){var a=this.j.feature=this.j.feature||new hq;a.kf("_node",!0);this.labels&&(this.labels=this.labels.filter(function(a){return null!=a.column}));w2(this,a);a.D()||a.ga(J(a));this.callback&&this.callback(this.j);this.close()};
u2.prototype.accept=u2.prototype.accept;u2.prototype.cancel=function(){var a=this.j.feature;if(a&&this.g){a.qc(this.g);sz(a);var b=Dy(a);b&&Gz(b,[a])}N.dispatchEvent("spatial:restoreFeature");this.close()};u2.prototype.cancel=u2.prototype.cancel;u2.prototype.close=function(){kx(this.element)};u2.prototype.G=function(a){switch(a.keyCode){case 27:this.scope&&this.scope.$broadcast("position:mapEnabled",!1,"pointGeometry")}};u2.prototype.Gv=function(){return Yy.test(this.shape)};
u2.prototype.isEllipse=u2.prototype.Gv;u2.prototype.pt=function(){return"Icon"===this.shape};u2.prototype.showIcon=u2.prototype.pt;u2.prototype.ko=function(){return az[this.shape]&&"Icon"===this.centerShape};u2.prototype.showCenterIcon=u2.prototype.ko;u2.prototype.Hm=function(){return this.j.feature instanceof Ry};u2.prototype.isFeatureDynamic=u2.prototype.Hm;
u2.prototype.O=function(a,b){a.targetScope!==this.scope&&(a.stopPropagation(),b?(this.o||(a=L.s().X(),this.o=H(a,"singleclick",this.K,this)),this.A=jx(),this.u||(this.u=new ft(document),this.u.H("key",this.G,!1,this))):(z(this.u),this.u=null,this.o&&(sf(this.o),this.o=null),this.A&&(this.A(),this.A=null)))};u2.prototype.K=function(a){"singleclick"==a.type&&a.coordinate&&1<a.coordinate.length&&(a=Ll(a.coordinate,S,"EPSG:4326"),this.scope.$broadcast("position:mapClick",a,!0),this.wb());return!1};
u2.prototype.wb=function(){if(this.l)if(w2(this,this.l),"features#temporary"==this.l.D()){var a=L.s();a.Bb(this.l,!1);a.cc(this.l)}else(a=Dy(this.l))&&Gz(a,[this.l])};u2.prototype.updatePreview=u2.prototype.wb;
function fza(a,b){a.name=b.get(v2);a.description=b.get("_mdDescription")||b.get("description");var c=b.get("recordTime");c?(a.startTime=c.Sa(),a.startTimeISO=a.startTime?(new Date(a.startTime)).toISOString():void 0,a.endTime=c.Ya()===a.startTime?void 0:c.Ya(),a.endTimeISO=a.endTime?(new Date(a.endTime)).toISOString():void 0,a.dateType=a.endTime>a.startTime?"range":"instant"):a.dateType="notime";c=b.get("shape");-1<a.shapes.indexOf(c)&&(a.shape=c);c=b.get("centerShape");-1<a.centerShapes.indexOf(c)&&
(a.centerShape=c);c=b.get("_style");var d;if(c){q(c)?((d=eb(c,Hz))&&(a.labels=d.labels),c=c[0]):c.labels&&(a.labels=c.labels);(d=oz(c))&&(a.size=d);if(d=Iy(c))a.color=ef(d),a.labelColor=a.color;if(c=kz(c))a.icon=c,a.centerIcon=c}c=b.get("labelColor");if(null!=c&&(a.labelColor=c,"None"===a.shape)){var e=ff(c);e&&(a.opacity=e[3])}(d="None"===a.shape?c:d)&&(e=ff(d))&&(a.opacity=e[3]);a.labelSize=x2(b,"labelSize",14);d=b.get("showLabels");null!=d&&(a.showLabels=d);if(d=b.Z())a.B=d,d instanceof hp&&(d=
d.clone(),d.toLonLat(),(d=Bo(d))&&2<=d.length&&(c=d[2]||0,e=b.get("ALTITUDE_UNITS")||"m",a.pointGeometry={lon:d[0],lat:d[1],alt:c},a.altitude=Ot(c,e,"m"),a.altUnits=e),a.semiMajor=x2(b,"SEMI_MAJOR"),a.semiMinor=x2(b,"SEMI_MINOR"),a.semiMajorUnits=b.get("SEMI_MAJ_UNITS")||a.semiMajorUnits,a.semiMinorUnits=b.get("SEMI_MINOR_UNITS")||a.semiMinorUnits,a.orientation=x2(b,"ORIENTATION"));if(!a.Hm()){b=b.get("BEARING");"string"!==typeof b||Hb(b)||(b=Number(b));if(null==b||isNaN(b))b=void 0;a.iconRotation=
b}a.wb()}function x2(a,b,c){c=c||void 0;a=Number(a.get(b));return null==a||isNaN(a)?c:a}
function w2(a,b){if(b){hza(a,b);b.set(v2,a.name);b.set("description",t2(a.description));b.set("_mdDescription",a.description);switch(a.dateType){case "notime":b.set("recordTime",void 0);break;case "instant":b.set("recordTime",new lg(a.startTime));break;case "range":b.set("recordTime",new qg(a.startTime,a.endTime))}var c;a.g&&a.g._style?c=fi(a.g._style):c=[fi(Sy)];b.set("_style",c);b.set("shape",a.shape);b.set("centerShape",a.centerShape);a.Hm()||!a.pt()&&!a.ko()?(b.set("BEARING",void 0),b.set("showRotation",
!1),b.set("rotationColumn",void 0)):(b.set("BEARING","number"===typeof a.iconRotation?a.iconRotation%360:void 0),b.set("showRotation",!0),b.set("rotationColumn","BEARING"));iza(b);c instanceof Array?c.forEach(function(a){jza(this,a)},a):jza(a,c);a.showLabels?Ny(b):My(b);kza(b);y2(b);sz(b);N.dispatchEvent("spatial:updateFeature")}}
function jza(a,b){var c=Math.round(100*me(a.opacity,0,1))/100,d=om(a.color);d[3]=c;d=hz(d);jz(b,d);pz(b,a.size);"None"===a.shape&&Ty(b,0);var e=a.ko();"Icon"!==a.shape&&!e||null==b.image||(b.image.color=d,b.image.scale=qz(a.size),lz(b,e?a.centerIcon:a.icon));d=om(a.labelColor);d[3]=c;d=hz(d);b.labels=a.labels;b.labelColor=d;b.labelSize=parseInt(a.labelSize,10)||14}
function hza(a,b){if(a.pointGeometry){var c=Number(a.pointGeometry.lon),d=Number(a.pointGeometry.lat),e=a.altUnits||"m",f=Ot(Number(a.altitude)||0,"m",e);b.set("ALTITUDE",f);b.set("ALTITUDE_UNITS",e);isNaN(c)||isNaN(d)||(c=new hp([c,d,f]),Ap(c),b.tb(c),Ay(b,!0),a.Gv()&&null!=a.semiMajor&&null!=a.semiMinor&&null!=a.orientation?(b.set("SEMI_MAJOR",a.semiMajor),b.set("SEMI_MINOR",a.semiMinor),b.set("SEMI_MAJ_UNITS",a.semiMajorUnits),b.set("SEMI_MINOR_UNITS",a.semiMinorUnits),b.set("ORIENTATION",a.orientation%
360),xy(b,!0)):(b.set("SEMI_MAJOR",void 0),b.set("SEMI_MINOR",void 0),b.set("SEMI_MAJ_UNITS",void 0),b.set("SEMI_MINOR_UNITS",void 0),b.set("ORIENTATION",void 0),b.set("ellipse",void 0),b.set("lineOfBearing",void 0)),a.Hm()||!a.pt()&&!a.ko()||null==a.iconRotation?(b.set("BEARING",void 0),b.set("showRotation",!1),b.set("rotationColumn","")):(b.set("showRotation",!0),b.set("BEARING",a.iconRotation%360),b.set("rotationColumn","BEARING")))}else a.B&&b.tb(a.B.clone())}
u2.prototype.qj=function(a){a.stopPropagation();this.wb()};u2.prototype.Xw=function(a,b){a!=b&&this.labelColor==b&&(this.labelColor=a);this.wb()};u2.prototype.onIconColorChange=u2.prototype.Xw;u2.prototype.og=function(a,b){a.stopPropagation();this.centerIcon=this.icon=b;this.wb()};u2.prototype.onIconChange=u2.prototype.og;u2.prototype.I=function(a){a.stopPropagation();this.labelColor=this.color;this.wb()};
u2.prototype.CE=function(){var a=1E-16;null!=this.semiMinor&&this.semiMinorUnits&&this.semiMajorUnits&&(a=Ot(this.semiMinor,this.semiMajorUnits,this.semiMinorUnits));return a};u2.prototype.getSemiMajorMin=u2.prototype.CE;u2.prototype.kH=function(){1E-16===this.semiMinor&&(this.semiMinor=1);1E-16===this.semiMajor&&(this.semiMajor=1);this.wb()};u2.prototype.onAxisChange=u2.prototype.kH;
function kza(a){if(a){var b=a.get("_style");if(b=q(b)?b[0]:b){var c=b.labels;if(c){for(var d=[],e=[],f=0;f<c.length;f++)c[f].column&&(d.push(c[f].column),e.push(c[f].showColumn?"1":"0"));if(0<d.length){var h=d.join(",");var k=e.join(",")}}a.set("labels",h);a.set("showLabelColumns",k);a.set("labelColor",b.labelColor);a.set("labelSize",b.labelSize)}}}
function y2(a){if(a){var b=a.get("showLabels");"string"!=typeof b&&!0!==b||a.set("showLabels","true"==b||"1"==b);(b=a.get("_style"))&&(q(b)?b.forEach(function(b){lza(a,b)}):lza(a,b))}}function lza(a,b){if(a&&b){var c=a.get("labels"),d=a.get("showLabelColumns");if(c){var e=[];c=c.split(",");d=d?d.split(","):null;if(c)for(var f=0;f<c.length;f++)c[f]&&e.push({column:c[f],showColumn:d&&"1"==d[f]});b.labels=e}(e=a.get("labelColor"))&&(b.labelColor=e);(a=a.get("labelSize"))&&(b.labelSize=a)}}
function iza(a){if(a){var b=a.get("_style");if(b=q(b)?b[0]:b){var c=a.get("shape");if(null!=c){Yy.test(c)?xy(a,!0):"ellipse"===b.geometry&&delete b.geometry;var d=Wy[c];d&&d.config&&Zh(d.config,b);d=a.get("centerShape");var e=az[c];d&&e&&(d=Wy[d])&&d.config&&Zh(d.config,b);"Icon"!=c?(a=b.image,"icon"==a.type&&delete a.type,d=hz(a.color||"rgba(255,255,255,1)"),e=a.scale?Math.round(3*a.scale):3,delete a.scale,a.radius=a.radius||e,a.fill=a.fill||{},a.fill.color=d,b.stroke=b.stroke||{},b.stroke.color=
d,b.stroke.width=b.stroke.width||e,"None"==c&&Ty(b,0)):(c=a.get("BEARING"),isNaN(c)||(b.image.rotation=oe(c)))}}}};Q.directive("placemarkedit",[function(){var a=dza();a.controller=z2;return a}]);
function z2(a,b,c){u2.call(this,a,b,c);this.name||(this.name="New Place");this.labelColumns=b2.filter(function(a){return!Px(a)}).map(function(a){return new Wv(a)});this.j=a.options||{};if(a=this.j.time)this.startTimeISO=(this.startTime=a.Sa())?(new Date(this.startTime)).toISOString():void 0,this.endTimeISO=(this.endTime=a.Ya()===this.startTime?void 0:a.Ya())?(new Date(this.endTime)).toISOString():void 0,this.dateType=this.endTime>this.startTime?"range":"instant"}w(z2,u2);
z2.$inject=["$scope","$element","$timeout"];z2.prototype.accept=function(){var a=this.j.feature=this.j.feature||new hq;this.labels&&(this.labels=this.labels.filter(function(a){return null!=a.column}));w2(this,a);a.D()||a.ga(J(a));n2(this.j);this.close()};z2.prototype.accept=z2.prototype.accept;Q.directive("places",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/plugin/places/places.html",controller:A2,controllerAs:"places"}}]);function A2(a){x.call(this);this.v=a;var b=B2.s();(this.g=b.j)||b.u||b.Ua("loaded",this.j,!1,this);this.contextMenu=AZ;this.treeData=this.g?[this.g]:[];this.selected=null;a.$on("$destroy",this.dispose.bind(this))}w(A2,x);A2.$inject=["$scope"];
A2.prototype.J=function(){A2.C.J.call(this);B2.s().M("loaded",this.j,!1,this);this.v=this.g=null};A2.prototype.j=function(){if(this.g=B2.s().j)this.treeData=[this.g],R(this.v)};A2.prototype.KF=function(){return null!=this.g};A2.prototype.hasRoot=A2.prototype.KF;A2.prototype.Wf=function(){this.g?(C2(this.g),O(P.s(),"places.export",1)):rj(tj,"Nothing to export.",Rh)};A2.prototype["export"]=A2.prototype.Wf;A2.prototype.import=function(){B2.s();O(P.s(),"places.import",1)};A2.prototype["import"]=A2.prototype.import;
A2.prototype.Qf=function(){for(var a=this.selected&&1==this.selected.length?this.selected[0]:this.g;a&&!a.Vc();)a=a.getParent();a&&i2({parent:a});O(P.s(),"places.addFolder",1)};A2.prototype.addFolder=A2.prototype.Qf;A2.prototype.Uj=function(){for(var a=this.selected&&1==this.selected.length?this.selected[0]:this.g;a&&!a.Vc();)a=a.getParent();a&&j2({parent:a});O(P.s(),"places.addPlace",1)};A2.prototype.addPlace=A2.prototype.Uj;
A2.prototype.GD=function(){var a=this.selected&&0<this.selected.length?this.selected[0]:this.g;a&&(a.Fd(!1,!0),this.v.$broadcast(lD));O(P.s(),"places.expandAll",1)};A2.prototype.expandAll=A2.prototype.GD;A2.prototype.nD=function(){var a=this.selected&&0<this.selected.length?this.selected[0]:this.g;a&&(a.Fd(!0,!0),this.v.$broadcast(lD));O(P.s(),"places.collapseAll",1)};A2.prototype.collapseAll=A2.prototype.nD;Q.directive("layers",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/layers.html",controller:D2,controllerAs:"layers"}}]);Q.directive("layerswin",[function(){return{restrict:"AE",replace:!0,scope:{tab:"@"},templateUrl:"v1541734487/views/windows/layers.html"}}]);
function D2(a,b){IY.call(this,a,b,200);this.title="layers";try{this.scope.contextMenu=AZ}catch(c){}this.scope.views=mza;this.l="Z-Order";this.g=new S1("layerTree",a);this.o={};IZ&&(this.o[".add-data-group"]=IZ);a=L.s();a.H("addLayer",this.search,!1,this);a.H("removeLayer",this.search,!1,this);M.H(s_,this.search,!1,this);this.scope.showTiles=!0;this.scope.showFeatures=!0;this.scope.tilesBtnIcon="v1541734487/images/tiles-base.png";this.scope.featuresBtnIcon="v1541734487/images/features-base.png";this.init()}
w(D2,IY);D2.$inject=["$scope","$element"];var nza=[],mza={Favorites:new X1,INT:new $1(!0),"Recently Updated":new T1(!0),Source:new Y1,Tag:new HY(!0),Type:new Z1,"Z-Order":new R1};D2.prototype.destroy=function(){var a=L.s();a.M("addLayer",this.search,!1,this);a.M("removeLayer",this.search,!1,this);M.M(s_,this.search,!1,this);D2.C.destroy.call(this)};D2.prototype.close=function(){kx(this.element)};D2.prototype.Zq=function(){O(P.s(),"addData.groupBy",1);this.search()};D2.prototype.onGroupByChanged=D2.prototype.Zq;
D2.prototype.gg=function(a){return a&&a instanceof ev?a.W().mk()||"defaultlayerui":null};D2.prototype.getUi=D2.prototype.gg;D2.prototype.Ak=function(a){return angular.element("#js-window__container").scope().mainCtrl[a]?!0:!!angular.element('div[label="'+a+'"].window').length};D2.prototype.isWindowActive=D2.prototype.Ak;
D2.prototype.ci=function(a){var b=this.o[a];if(b){var c=this.element.find(a);c&&0<c.length&&(this.scope.menu=a,N.Ua(rx,this.A,!1,this),b.open(void 0,{my:"left top",at:"left bottom",of:c}))}};D2.prototype.openMenu=D2.prototype.ci;D2.prototype.A=function(){this.scope.menu=null};D2.prototype.toggle=function(a){YX(a)||N.dispatchEvent(new cw("toggleUI",a))};D2.prototype.toggle=D2.prototype.toggle;
D2.prototype.FO=function(){this.scope.showTiles=!this.scope.showTiles;for(var a=Dg(On),b=0;b<a.length;b++)if(!nza.some(function(c){return c(a[b])})){var c=a[b].T();c&&"VECTOR"!=c&&a[b].Hd(this.PA())}};D2.prototype.toggleTileLayers=D2.prototype.FO;D2.prototype.PA=function(){return this.scope.showTiles};D2.prototype.showTiles=D2.prototype.PA;
D2.prototype.yO=function(){this.scope.showFeatures=!this.scope.showFeatures;for(var a=Dg(On),b=0;b<a.length;b++){var c=a[b].T();if(c&&"VECTOR"==c&&!(a[b]instanceof JQ))if(F(a[b],"os.layer.ICustomLayerVisible")){c=this.wl();var d=a[b].N().P;d&&d.Ga(c?"on":"off")}else a[b].Hd(this.wl())}};D2.prototype.toggleFeatureLayers=D2.prototype.yO;D2.prototype.wl=function(){return this.scope.showFeatures};D2.prototype.showFeatures=D2.prototype.wl;function oza(a){return a instanceof Uz&&"Map Layers"==a.Sc()};Q.directive("basemaplayerui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/plugin/basemap/basemaplayerui.html",controller:E2,controllerAs:"basemap"}}]);function E2(a,b,c){KH.call(this,a,b,c);a.$on("minZoom.spin",this.ir.bind(this));a.$on("minZoom.spinchange",this.ir.bind(this));a.$on("maxZoom.spin",this.gr.bind(this));a.$on("maxZoom.spinchange",this.gr.bind(this));this.mapMinZoom=2;this.mapMaxZoom=25;this.B=new Fh(this.CJ,1E3,this)}w(E2,KH);
E2.$inject=["$scope","$element","$timeout"];g=E2.prototype;g.sd=function(){E2.C.sd.call(this);if(this.scope){var a=this.scope;a:{var b=this.scope.items;if(b)for(var c=0,d=b.length;c<d;c++)try{var e=b[c].W();if(e){var f=Math.round(Lq(L.s(),e.ne()));break a}}catch(l){}f=2}a.minZoom=f;a=this.scope;a:{if(f=this.scope.items)for(b=0,c=f.length;b<c;b++)try{var h=f[b].W();if(h){var k=Math.round(Lq(L.s(),h.oe()));break a}}catch(l){}k=25}a.maxZoom=k}};
g.ir=function(a,b){if(a=this.scope.items){b=Jq(L.s(),b);for(var c=0,d=a.length;c<d;c++)try{a[c].W().Kj(b),this.B.start()}catch(e){}}};g.gr=function(a,b){if(a=this.scope.items){b=Jq(L.s(),b);for(var c=0,d=a.length;c<d;c++)try{a[c].W().Lj(b),this.B.start()}catch(e){}}};g.CJ=function(){if(L.s().Qa()){var a=this.scope.items;if(a)for(var b=0,c=a.length;b<c;b++){var d=a[b].W();d&&d.N()&&d.N().refresh()}}};
g.Gd=function(a){var b=L.s(),c;if(b.Qa()){var d=yP(b);d&&(c=d.Eh(d.Ff(),0))}else c=T(b.X()).bb();null!=c&&(this.scope[a]=Math.floor(Lq(b,c)),"minZoom"==a?this.ir(null,this.scope[a]):this.gr(null,this.scope[a]))};E2.prototype.setCurrent=E2.prototype.Gd;function FZ(a){Uz.call(this,a);this.Kf=wa}w(FZ,Uz);FZ.prototype.mk=function(){return"basemaplayerui"};var pza=!1;FZ.prototype.Wa=function(a){FZ.C.Wa.call(this,a);this.getError()&&!pza&&(rj(tj,"One or more Map Layers are having issues reaching the remote server. Please try adding another Map Layer or [click here to add a working one|basemapAddFailover].",Rh),pza=!0)};function F2(){$L.call(this)}w(F2,$L);F2.prototype.Me=function(a){a=vc(a);a.layerClass=FZ;var b=a.baseType;return Xf(Uf.s(),b).Me(a)};function G2(){LE.call(this);this.Rl=!0;this.l=null;this.vb(["GEOINT"]);this.Ub("Map Layers");this.o="basemap"}w(G2,LE);g=G2.prototype;g.ct=function(a){this.l=a};g.gd=function(){return'<img src="v1541734487/images/tiles-base.png" title="Tile layer"/>'};g.uk=function(){return"Map Layer"};g.Va=function(){var a=vc(this.l);a.id=this.D();a.provider=this.rb();a.animate=!1;a.title=this.S();a.layerType=this.T();a.tags=this.getTags();a.noClear=!0;return a};
g.rb=function(){return this.l&&"provider"in this.l?this.l.provider:G2.C.rb.call(this)};g.yh=function(){this.Va().projection===S.Rb&&!0===this.G&&this.setActive(this.G);this.G=void 0};g.ra=function(a){a||(a={});a.canDelete=this.Rl;a.origConf=this.l;return G2.C.ra.call(this,a)};g.restore=function(a){G2.C.restore.call(this,a);this.l=a.origConf;this.Rl=a.canDelete;!this.Rl&&isNaN(this.Mg)&&(this.Mg=Ia()+864E5)};function H2(){hM.call(this);this.fb("Show terrain on the 3D globe.");this.Ec(null);this.vb(["GEOINT","Terrain","Elevation"]);this.Ta("Terrain");this.Ub(null);this.o="terrain";this.l=!1;M.H("os.map.enableTerrain",this.zz,!1,this)}w(H2,hM);g=H2.prototype;g.J=function(){H2.C.J.call(this);M.M("os.map.enableTerrain",this.zz,!1,this)};g.gd=function(){return'<i class="fa fa-area-chart" title="This layer provides terrain in 3D mode"></i>'};
g.xg=function(){this.l=!0;M.set("os.map.enableTerrain",this.isActive());this.l=!1;return H2.C.xg.call(this)};g.restore=function(a){H2.C.restore.call(this,a);this.G=M.get("os.map.enableTerrain",!1);this.yh()};g.zz=function(a){this.l||a.l===this.isActive()||this.setActive(a.l)};function I2(){fF.call(this);this.ga("basemap");this.g=this.l=null;this.o={};this.Ck=!1;UQ.s().H("load",this.iK,!1,this);N.H("map:terrainDisabled",this.Fx,!1,this);N.H("basemapAddFailover",this.Ut,!1,this)}w(I2,ZM);g=I2.prototype;g.J=function(){I2.C.J.call(this);N.M("map:terrainDisabled",this.Fx,!1,this);N.M("basemapAddFailover",this.Ut,!1,this)};
g.Wb=function(a){this.Da("Map Layers");if(this.l=a.defaults)this.g=this.l[S.Rb];var b=a.failSet;b&&(this.o=b);b=Y;for(var c=["maps","userMaps"],d=0,e=c.length;d<e;d++){var f=a[c[d]],h;for(h in f){var k=f[h];if(k){var l=k.type?k.type.toLowerCase():null;if("terrain"==l)l=k.options,k=k.baseType,l&&k&&(l.type=k,M.set("os.map.terrainOptions",l)),k=this.D()+"#terrain",l=b.Ka(k),l||(l=new H2,l.ga(k),pF(b,l));else if("basemap"==l){var m=this.D()+"#"+h;l=b.Ka(m);l||(l=new G2,l.ga(m),l.Ec(this.ba()),pF(b,l));
l.ct(k);l.Rl=0<d;l.Ta(k.title);l.fb(k.description);l.Mg=NaN;l.yh()}}}}};g.load=function(){this.dispatchEvent(new bF("dataProviderLoading",this));var a=!1;if(!this.na())for(var b=Qw(Y,this.D()+"#"),c=0,d=b.length;c<d;c++){var e=b[c];$M(this,e,!1,!1);"basemap"==e.ag()&&e.isActive()&&(a=!0)}if(!a&&Y&&this.g&&0<this.g.length)for(c=0,d=this.g.length;c<d;c++)(a=Y.Ka(this.D()+"#"+this.g[c]))&&a.setActive(!0);this.dispatchEvent(new bF("dataProviderLoaded",this))};
g.Ut=function(){var a=this.o[S.Rb];if(a)for(var b=Y,c=this.D()+"#",d=0,e=a.length;d<e;d++){var f=b.Ka(c+a[d]);f&&f.setActive(!0)}};g.iK=function(a){for(var b=Dg(L.s()),c=a.layers,d=0,e={},f=0,h=c.remove.length;f<h;f++)e[c.remove[f].id]=!0;f=0;for(h=c.add.length;f<h;f++)"basemap"===c.add[f].type.toLowerCase()&&d++;f=0;for(h=b.length;f<h;f++){var k=b[f];!(k.D()in e)&&k instanceof FZ&&d++}if(!d&&(f=a.target.g)&&(a=this.l[f.Rb]))for(b=Y,f=0,h=a.length;f<h;f++)(d=b.Ka(this.D()+"#"+a[f]))&&c.add.push(d.Va())};
g.Fx=function(){var a=Y.Ka(this.D()+"#terrain");a&&(Rw(Y,a),tka(this,a),z(a))};function roa(a){Uv.call(this,a);this.l=-1E3;this.j=oza;this.he("Map Layers")}w(roa,Uv);function J2(){yX.call(this);this.description="Saves the current map layers";this.enabled=!1;this.j={type:"map"};this.title="Map Layers"}w(J2,yX);E.V("plugin.basemap.v3.BaseMapState");J2.prototype.isValid=function(a){try{return a instanceof FZ&&null!=a.Va()}catch(b){}return!1};J2.prototype.Nr=function(a,b,c,d){(b=J2.C.Nr.call(this,a,b,c,d))&&Yx(b,{type:a.Va().baseType||"wms"});return b};
J2.prototype.Rd=function(a,b,c){switch(a){case "minResolution":a=Math.round(Lq(L.s(),b)-1);Z("maxZoom",c,a);break;case "maxResolution":a=Math.round(Lq(L.s(),b)-1);Z("minZoom",c,a);break;case "minZoom":case "maxZoom":break;default:J2.C.Rd.call(this,a,b,c)}};
J2.prototype.Pr=function(a){a=J2.C.Pr.call(this,a);a.baseType=a.type.toUpperCase();a.layerType="Map Layers";a.type="basemap";a.id=a.id.replace("#","-");"string"==typeof a.url&&(a.crossOrigin=kA(a.url));"number"===typeof a.minZoom&&(a.minZoom+=1);"number"===typeof a.maxZoom&&(a.maxZoom+=1);return a};function K2(){AX.call(this);this.description="Saves the current map layers";this.enabled=!1;this.g="mapLayers";this.j={type:"map"};this.title="Map Layers"}w(K2,DX);E.V("plugin.basemap.v4.BaseMapState");K2.prototype.isValid=function(a){try{return a instanceof FZ&&null!=a.Va()}catch(b){}return!1};K2.prototype.Qr=function(a,b,c,d){(b=K2.C.Qr.call(this,a,b,c,d))&&Yx(b,{type:a.Va().baseType||"wms"});return b};
K2.prototype.Sd=function(a,b,c){switch(a){case "minResolution":a=Math.round(Lq(L.s(),b)-1);Z("maxZoom",c,a);break;case "maxResolution":a=Math.round(Lq(L.s(),b)-1);Z("minZoom",c,a);break;case "minZoom":case "maxZoom":break;default:K2.C.Sd.call(this,a,b,c)}};
K2.prototype.Rr=function(a){a=K2.C.Rr.call(this,a);a.baseType=a.type.toUpperCase();a.layerType="Map Layers";a.type="basemap";a.id=a.id.replace("#","-");"string"==typeof a.url&&(a.crossOrigin=kA(a.url));"number"===typeof a.minZoom&&(a.minZoom+=1);"number"===typeof a.maxZoom&&(a.maxZoom+=1);return a};function L2(){Kg.call(this);this.id="basemap"}w(L2,Kg);L2.prototype.init=function(){var a=Y;mF(a,new eF(this.id,I2,"Map Layers","Map layers provide background imagery. They often include streets, borders, or other reference information."));nF(a,this.id,G2);nF(a,"terrain",H2);qoa();Yf(Uf.s(),"basemap",F2);a=BX.s();$U(a,"v3",J2);$U(a,"v4",K2);nza.push(oza)};function M2(a,b){A.call(this,a);this.data=b}w(M2,A);Ja("os.job.JobCommand",{START:0,STOP:1,PAUSE:2});Ja("os.job.JobState",{IDLE:0,EXECUTING:1,COMPLETE:2,PAUSED:3,STOPPED:4,ERROR:5,LOG:6});function N2(a,b,c){C.call(this);this.name=b;this.Ba=c;this.state=0;this.o=a;this.j=new Worker(a);this.j.onmessage=qza;this.j.g=this;this.g=new je(1E3);this.g.H("tick",this.l,!1,this)}w(N2,C);var rza=E.V("os.job.Job");N2.prototype.N=function(){return this.o};N2.prototype.getName=function(){return this.name};N2.prototype.l=function(){};
function qza(a){if(a&&a.data){var b=this.g;a=a.data;if(a.state){var c=b.state;switch(a.state){case 0:b.state=a.state;b.g.stop();break;case 1:b.state=a.state;b.g.start();a.data&&b.dispatchEvent(new M2("job:dataready",a.data));break;case 3:b.state=a.state;b.g.stop();break;case 4:b.state=a.state;b.g.stop();b.dispatchEvent(new M2("job:complete"));break;case 2:b.state=a.state;b.g.stop();b.dispatchEvent(new M2("job:complete",a.data));break;case 5:b.state=a.state;b.g.stop();b.dispatchEvent(new M2("job:error",
a.data));break;case 6:if(a.data&&a.level&&E.hasOwnProperty(a.level))E[a.level](rza,"["+b.name+"] "+a.data)}c!=a.state&&b.dispatchEvent(new M2("job:change"))}}}function sza(a,b){a.j.postMessage({command:0,data:b})};var O2=E.V("os.capture"),P2=null;
function Q2(a,b,c,d,e){a=a||document.querySelector("canvas");if(a instanceof HTMLCanvasElement&&!R2(a)){b=b||0;c=c||0;d=null!=d?d:a.width;e=null!=e?e:a.height;var f=a.getContext("2d");if(f)return f.getImageData(b,c,d,e);if(f=en(a)){a=new Uint8Array(d*e*4);f.readPixels(b,c,d,e,f.RGBA,f.UNSIGNED_BYTE,a);P2||(P2=document.createElement("CANVAS"),P2.getContext("2d"));f=P2.getContext("2d").createImageData(d,e);var h=f.data;for(b=0;b<d;b++)for(c=0;c<e;c++){var k=4*(b+d*c),l=4*(b+d*(e-c-1));h[k++]=a[l++];
h[k++]=a[l++];h[k++]=a[l++];h[k]=a[l]}return f}}return null}
function tza(a){if(a){var b=new N2("v1541734487/src/worker/dataurltoarray.js","Canvas to Blob","Converting canvas data URL to a Blob.");b.Ua("job:complete",function(a){z(a.target);if(a.data instanceof Uint8Array){a=new Blob([a.data],{type:"image/png"});var b="Screenshot "+moment().format("YYYY-MM-DD_HHmmss")+".png";US(b,a,"image/png")}else rj(tj,"Failed saving canvas to PNG",Qh,O2)});b.Ua("job:error",function(a){z(a.target);rj(tj,"string"===typeof a.data?a.data:"Screen capture failed due to an unspecified error",
Qh,O2)});sza(b,{dataUrl:a})}}function uza(){var a=document.querySelector("canvas");return Sc(a instanceof HTMLCanvasElement?a:null)}function R2(a){if(a&&(a=a.getContext("2d"),a instanceof CanvasRenderingContext2D))try{a.getImageData(0,0,1,1)}catch(b){return!0}return!1}function S2(){return 1};function T2(){C.call(this);this.aborted=!1;this.data=null;this.o="";this.B=0;this.status="";this.title="Give me a title please";this.g=null;this.A=[];this.log=vza;this.j=new bw}w(T2,C);var vza=E.V("os.capture.AbstractRecorder");g=T2.prototype;g.J=function(){T2.C.J.call(this);z(this.g);this.g=null;z(this.j);this.j=null;this.wj()};g.wj=function(){this.Xa()||(this.aborted=!1);this.data=null;this.B=this.A.length=0;this.o="";this.g&&this.g.Sk();this.j&&this.j.M("resize",this.tr,!1,this)};
g.init=function(){this.j&&this.j.Ua("resize",this.tr,!1,this)};g.abort=function(a){this.aborted||(this.aborted=!0,this.g&&this.g.abort(),E.error(this.log,a||"Recording aborted by user."))};function U2(a,b,c){c&&E.error(a.log,a.o,c);a.o="Encountered an error while recording: "+b;a.abort(a.o);a.dispatchEvent("capture:error")}function V2(a,b){a.status=b;a.dispatchEvent("capture:status")}g.tr=function(){this.aborted||(this.abort("Resizing the browser would result in a distorted recording."),U2(this,"Resizing the browser would result in a distorted recording."))};function W2(a,b){T2.call(this);this.log=wza;this.title="Record Timeline";this.I=a||uza;this.K=b||null;this.G=vg.s();this.l=null}w(W2,T2);var wza=E.V("os.capture.TimelineRecorder");g=W2.prototype;g.J=function(){W2.C.J.call(this);this.K=this.I=null};g.wj=function(){W2.C.wj.call(this);this.l&&(this.l.cancel(),this.l=null)};g.abort=function(a){var b=this.aborted;W2.C.abort.call(this,a);!b&&this.l&&(this.l.cancel(),this.l=null)};
g.il=function(){this.I().then(function(a){a?(this.wj(),this.init(),this.B=-1,this.dispatchEvent("capture:progress"),xza(this)):U2(this,"no canvas to record")},this.vr,this)};
function xza(a){if(!a.o&&!a.aborted){if(0===a.A.length)a.G.first();else if(Uia(a.G))a.G.next();else{yza(a);return}V2(a,"Waiting for frame to render...");a.l=(a.K?a.K():Sc()).then(function(){V2(this,"Generating image frame...");this.I().then(function(a){a?(this.A.push(a),xza(this)):U2(this,"failed retrieving canvas frame")},this.vr,this)},a.vr,a)}}
g.vr=function(a){if(!this.aborted){var b="Failed retrieving canvas frame:",c;a instanceof Error?c=a:b="string"==typeof a?b+(" "+a):b+" unspecified error.";U2(this,b,c)}};function yza(a){a.g?(a.g.H("capture:progress",a.kI,!1,a),a.g.H("capture:status",a.lI,!1,a),a.g.Ua("capture:complete",a.LK,!1,a),a.g.Ua("capture:error",a.MK,!1,a),a.j&&a.j.M("resize",a.tr,!1,a),a.dispatchEvent("capture:unblock"),a.g.init(a.G.U),a.g.j=a.A,a.g.ad()):U2(a,"no video export format provided")}
g.kI=function(a){if(a=a.target)this.B=a.B,this.dispatchEvent("capture:progress")};g.lI=function(a){(a=a.target)&&V2(this,a.status)};g.LK=function(a){if(a=a.target)this.data=a.A,V2(this,"Done!"),this.dispatchEvent("capture:complete")};g.MK=function(a){(a=a.target)&&a.o?U2(this,a.o):U2(this,"Unable to create recording: video export failed unexpectedly.")};function X2(){C.call(this);this.description="";this.Iu="unknown";this.o="";this.A=null;this.B=0;this.status="";this.title="Give me a title!";this.j=[];this.log=zza;this.u=void 0}w(X2,C);var zza=E.V("os.capture.AbstractVideoEncoder");g=X2.prototype;g.J=function(){X2.C.J.call(this);this.Sk()};g.abort=wa;g.Sk=function(){this.j.length=0;this.A=null};g.init=function(a,b){this.Sk();this.frameRate=a;this.quality=b||1};
g.ad=function(){if(this.Hv())this.Uz();else if(this.u){var a=zi(ui(vi(this.u)));uh(tr(a),this.Uz,this.JJ,this)}else Y2(this,this.title+" encoder is not available")};g.Hv=function(){return!0};function Y2(a,b,c){c&&E.error(a.log,a.o,c);a.o="Encountered an error while exporting video: "+b;a.dispatchEvent("capture:error")}g.JJ=function(a){this.u=void 0;Y2(this,a?a.message:"failed to load the "+this.title+" encoder")};function Z2(){X2.call(this);this.description="Widely supported format, but may exhibit loss of quality.";this.Iu="gif";this.title="GIF";this.u="v1541734487/vendor/gif/gif.js";this.l=[];this.g=null}w(Z2,X2);g=Z2.prototype;g.abort=function(){this.g&&this.g.abort()};g.Sk=function(){Z2.C.Sk.call(this);this.l.length=0;this.g&&(this.g.removeAllListeners(),this.g.cleanUp(),this.g=null)};g.Hv=function(){return null!=window.GIF};
g.Uz=function(){try{this.g=new GIF({background:"#000",cleanUp:!0,quality:100-99*this.quality,transparent:0,workerScript:"v1541734487/vendor/gif/gif.worker.js",workers:4});Aza(this);var a=1/this.frameRate*1E3;this.l.forEach(function(b){this.g.addFrame(b,{delay:a})},this);this.g.on("progress",this.zI.bind(this));this.g.on("finished",this.yI.bind(this));this.g.render();this.B=0;this.dispatchEvent("capture:progress");this.status="Generating animated GIF...";this.dispatchEvent("capture:status")}catch(b){Y2(this,
"failed generating GIF",b)}};function Aza(a){for(var b=[],c=0;c<a.j.length;c++)b.push(Bza(a,a.j[c])),1<b.length&&b.push(Bza(a,a.j[c]));a.j.length=0;a.l.push(b[0]);for(c=0;c<b.length-1;c+=2)a.l.push(Cza(b[c],b[c+1]))}function Cza(a,b){a=new Uint32Array(a.data.buffer);for(var c=new Uint32Array(b.data.buffer),d=0;d<a.length;d++)a[d]===c[d]&&(c[d]=0);return b}function Bza(a,b){try{return Q2(b)}catch(c){Y2(a,"failed retrieving canvas frame",c)}return null}g.zI=function(a){this.B=Math.ceil(100*a);this.dispatchEvent("capture:progress")};
g.yI=function(a){this.A=a;this.dispatchEvent("capture:complete")};Q.directive("loadingBar",[function(){return{replace:!0,restrict:"E",scope:{total:"=?",complete:"=?",message:"=?",delay:"@"},templateUrl:"v1541734487/views/modal/loading.html",controller:$2,controllerAs:"loadctrl",link:Dza}}]);
function $2(a,b,c){this.L=b;this.Na=c;this.j=100;this.complete=0;this.indeterminate=this.show=!1;this.message="Loading...";this.u=a.$watch("total",t(function(a){a&&Ib(a)&&(a=$b(a),0<a&&(this.j=a))},this));this.o=a.$watch("complete",t(function(a){if("number"===typeof a&&(0>a?(this.complete=100,this.indeterminate=!0):(this.complete=Math.floor(a/this.j*100),this.indeterminate=!1),a=Zq("progress-bar",this.L[0]))){var b=this.complete+"%";"number"==typeof b&&(b=Math.round(b)+"px");a.style.width=b}},this));
a.$on("$destroy",this.l.bind(this))}$2.$inject=["$scope","$element","$timeout"];function Eza(a,b){b=b?b:0;a.g=a.Na(t(function(){this.show=!0},a),b)}$2.prototype.l=function(){this.g&&this.Na.cancel(this.g);this.Na=this.L=null;this.u();this.o()};function Dza(a,b,c,d){Eza(d,c.delay)};Q.directive("recordingui",[function(){return{restrict:"E",replace:!0,scope:{recorder:"="},templateUrl:"v1541734487/views/capture/recordingui.html",controller:a3,controllerAs:"recordui"}}]);
function a3(a,b){this.v=a;this.L=b;this.g=a.recorder;this.recordingCritical=this.recording=!1;this.progress=0;this.status="";this.title="Recording "+moment().format("YYYY-MM-DD_HHmmss");this.encoders=[new Z2];this.encoder=this.encoders[0];this.persister=null;this.persisters={};if((b=mQ(lQ))&&0<b.length){this.persister=b[0];for(var c=0,d=b.length;c<d;c++)this.persisters[b[c].ba()]=b[c]}this.L.find('input[name="title"]').focus();a.$emit("window.ready");a.$on("$destroy",this.j.bind(this))}
a3.$inject=["$scope","$element"];a3.prototype.j=function(){z(this.g);this.L=this.v=this.g=null};function b3(a){kx(a.L);a.recording=!1;Fza(a)}a3.prototype.cancel=function(){this.g&&this.g.abort();b3(this)};a3.prototype.cancel=a3.prototype.cancel;
a3.prototype.il=function(){if(this.g){this.g.H("capture:progress",this.AJ,!1,this);this.g.H("capture:status",this.BJ,!1,this);this.g.Ua("capture:unblock",this.rK,!1,this);this.g.Ua("capture:complete",this.yJ,!1,this);this.g.Ua("capture:error",this.zJ,!1,this);this.recordingCritical=this.recording=!0;Fza(this);var a=ix("recordUi");if(a){var b=a.children().first().scope();b&&b.windowCtrl&&(nx(b.windowCtrl),b.modal=!0);a.draggable("option","zIndex",1049);a.css("zIndex","1049")}this.g.g=this.encoder;
this.g.il()}else rj(tj,"Unable to create recording: recorder not configured.",Qh),b3(this)};a3.prototype.record=a3.prototype.il;a3.prototype.gE=function(a){return a&&a.title||"Unknown Type"};a3.prototype.getEncoderTitle=a3.prototype.gE;a3.prototype.fE=function(a){(a=a&&a.description||"")&&(a='<i class="fa fa-info-circle text-danger"></i>&nbsp;'+a);return a};a3.prototype.getEncoderDescription=a3.prototype.fE;g=a3.prototype;g.AJ=function(){this.g&&(this.progress=this.g.B,R(this.v))};
g.rK=function(){if(this.g){this.recordingCritical=!1;var a=ix("recordUi");if(a){var b=a.children().first().scope();b&&b.windowCtrl&&(ox(b.windowCtrl),b.modal=!1);a.draggable("option","zIndex",990);a.css("zIndex","990")}R(this.v)}};g.BJ=function(){this.g&&(this.status=this.g.status,R(this.v))};g.yJ=function(){this.persister&&this.g&&this.g.data?this.persister.save(this.title+"."+this.encoder.Iu,this.g.data,"image/gif",this.title):rj(tj,"Unable to create recording: recording data missing.",Qh);b3(this)};
g.zJ=function(a){(a=a.target)&&a.o?rj(tj,"Recording failed. Please see the log for more details.",Qh):rj(tj,"Unable to create recording: unspecified reason.",Qh);b3(this)};function Fza(a){document.getElementById("timeline-record-button").classList.toggle("disabled",!!a.recording)};function c3(){Kg.call(this);this.id="capture";this.log=Gza;this.j=!1;this.g=this.zv()}w(c3,Kg);var Gza=E.V("os.ui.capture.AbstractCapturePlugin");g=c3.prototype;g.init=function(){N.H("timeline.capture",this.fD,!1,this);N.H("timeline.record",this.uN,!1,this)};g.zv=function(){return[]};function Hza(a){a.j||(a.j=!0,od&&rj(tj,"Screen capture may not work as expected in Internet Explorer due to browser limitations. To use this feature, we recommend switching to Chrome or Firefox.",Rh,Gza))}
g.fD=function(){Hza(this);this.vn().then(function(){this.Xr().then(function(a){if(a){try{var b=a.toDataURL()}catch(c){a=Xh("your system administrator"),a=Bq(a),rj(tj,"Unable to save canvas due to cross-origin content. Please contact <b>"+a+"</b> for support.",Qh,O2)}tza(b)}},this.Py,this)},this.Py,this)};
g.Py=function(a){var b="Failed to take screenshot:",c;a instanceof Error?c=a:"string"==typeof a&&(b+=" "+a);E.error(this.log,b,c);rj(tj,"Unable to take screenshot. Please see the log for more details.",Qh)};g.bv=function(){return new W2(this.Xr.bind(this),this.vn.bind(this,!0))};
g.uN=function(){Hza(this);var a=this.bv();a&&!ix("recordUi")&&fx({id:"recordUi",label:a.title||"Give me a title please",icon:"fa fa-circle text-danger",x:"center",y:"center",width:"350","min-width":"275","max-width":"500",height:"auto",modal:"false","show-close":"true"},'<recordingui recorder="recorder"></recordingui>',void 0,void 0,void 0,{recorder:a})};
g.Xr=function(){return new Kc(function(a,b){var c,d=0,e=0;for(c=0;c<this.g.length;c++)d+=this.g[c].Yr(),e+=this.g[c].Qy();0<d&&0<e?(c=document.createElement("canvas"),c.width=e,c.height=d,Iza(this,a,b,c,0)):b("nothing to capture")},this)};function Iza(a,b,c,d,e){var f=a.g[e];f?Jza(f,d).then(function(){Iza(this,b,c,d,++e)},function(a){c("failed capturing "+f.title+": "+a)},a):b(d)}g.vn=function(){return Sc()};function e3(a){a=a||{};this.priority=0;this.g=a.selector||null;this.title="unknown"}
function Jza(a,b){return new Kc(function(a,d){this.j().then(function(c){if(c){var d=this.getPosition(b),e=d[0],k=d[1],l=c.width,m=c.height,n=this.lb();if(n){var p=b.getContext("2d");n=n instanceof Image?p.createPattern(n,"repeat"):n;p.fillStyle=n;p.fillRect(e,k,l,m)}this.ju();e=d[0];d=d[1];k=Math.min(c.width,b.width-e);m=Math.min(c.height,b.height-d);if(0<m&&0<k){if((m<c.height||k<c.width)&&E.hb(O2,"Canvas overlay cropped by ["+(c.width-k)+", "+(c.height-m)+"] pixels."),l=Q2(c,void 0,void 0,k,m)){c=
Q2(b,e,d,k,m);k=c.data;l=l.data;for(m=0;m<l.length;m+=4)p=l[m+3]/255,0<p&&(1>p?(k[m]=Math.round(l[m]*p+(1-p)*k[m]),k[m+1]=Math.round(l[m+1]*p+(1-p)*k[m+1]),k[m+2]=Math.round(l[m+2]*p+(1-p)*k[m+2])):(k[m]=l[m],k[m+1]=l[m+1],k[m+2]=l[m+2],k[m+3]=l[m+3]));b.getContext("2d").putImageData(c,e,d)}}else E.error(O2,"Unable to overlay canvas: height = "+m+", width = "+k+".")}a()},d,this)},a)}g=e3.prototype;g.ju=function(){};
function f3(a){return"string"==typeof a.g?document.querySelector(a.g):"function"==typeof a.g?a.g():null}g.lb=function(){return null};g.getPosition=function(){return[0,0]};g.Yr=function(){return 0};g.Qy=function(){return 0};function g3(a){e3.call(this,a)}w(g3,e3);g3.prototype.j=function(){return new Kc(function(a,b){var c=f3(this);c?svgAsDataUri(c,{scale:S2()},this.o.bind(this,a,b)):a(null)},this)};g3.prototype.o=function(a,b,c){if(c){var d=new Image;d.onload=this.l.bind(this,a,b,d);d.onerror=function(){a(null)};d.src=c}else a(null)};g3.prototype.l=function(a,b,c){if(c instanceof Image){var d=document.createElement("canvas");d.width=c.width;d.height=c.height;d.getContext("2d").drawImage(c,0,0)}a(d||null)};function h3(a){a=a||{};a.selector=a.selector||"svg.c-svg-timeline";e3.call(this,a);this.title="Timeline";this.uc=a.fill||"#fff";this.u=a.overlay||!1}w(h3,g3);h3.prototype.lb=function(){return this.uc};h3.prototype.getPosition=function(a){return[0,a.height-Kza(this)]};h3.prototype.Yr=function(){return this.u?0:Kza(this)};function Kza(a){if(a=f3(a))if(a=a.getBoundingClientRect())return a.height*S2();return 0};function i3(a){e3.call(this,a)}w(i3,e3);i3.prototype.j=function(){var a=f3(this);if(R2(a))return Tc("The HTML 2D canvas has been tainted");if(a){var b=S2(),c=a.getBoundingClientRect();c=a.width/c.width;c!==b&&(b/=c,c=document.createElement("canvas"),c.width=a.width*b,c.height=a.height*b,c.getContext("2d").drawImage(a,0,0,a.width,a.height,0,0,c.width,c.height),a=c)}return Sc(a)};function j3(a,b,c,d,e,f){this.G=b;this.B=a.Y();var h=b.Y(),k=h?fl(c,h):c;h=Sxa(a,b,dl(k),d);this.u=new Uxa(a,b,k,this.B,.5*h);this.j=d;this.g=c;a=Vxa(this.u);this.A=(this.gf=f(a,h,e))?this.gf.l:1;this.xl=this.o=null;e=2;this.gf&&(e=0);XN.call(this,c,d,this.A,e)}I(j3,XN);g=j3.prototype;g.J=function(){1==this.state&&(sf(this.xl),this.xl=null);XN.prototype.J.call(this)};g.Pa=function(){return this.o};g.Ra=function(){return this.G};
g.ml=function(){var a=this.gf.getState();2==a&&(this.o=Txa(bl(this.g)/this.j,cl(this.g)/this.j,this.A,this.gf.bb(),0,this.j,this.g,this.u,[{extent:this.gf.Y(),image:this.gf.Pa()}],0));this.state=a;this.ia()};g.load=function(){if(0==this.state){this.state=1;this.ia();var a=this.gf.getState();2==a||3==a?this.ml():(this.xl=H(this.gf,"change",function(){var a=this.gf.getState();if(2==a||3==a)sf(this.xl),this.xl=null,this.ml()},this),this.gf.load())}};function nI(a){Ku.call(this,{attributions:a.attributions,extent:a.extent,logo:a.logo,projection:a.projection,state:a.state});this.u=void 0!==a.resolutions?a.resolutions:null;this.g=null;this.o=0}I(nI,Ku);nI.prototype.fg=function(){return this.u};
nI.prototype.Pa=function(a,b,c,d){var e=this.Ra();if(e&&d&&!Nl(e,d)){if(this.g){if(this.o==this.Tb&&Nl(this.g.Ra(),d)&&this.g.bb()==b&&Xk(this.g.Y(),a))return this.g;this.g.dispose();this.g=null}this.g=new j3(e,d,a,b,c,function(a){return gl(a,this.wa.Y())?this.wa:null}.bind(this));this.o=this.Tb;return this.g}e&&(d=e);return gl(a,this.wa.Y())?this.wa:null};
nI.prototype.j=function(a){a=a.target;switch(a.getState()){case 1:this.dispatchEvent(new k3(Lza,a));break;case 2:this.dispatchEvent(new k3(Mza,a));break;case 3:this.dispatchEvent(new k3(Nza,a))}};function Oza(a,b){a.Pa().src=b}function k3(a,b){Cf.call(this,a);this.image=b}I(k3,Cf);var Lza="imageloadstart",Mza="imageloadend",Nza="imageloaderror";function l3(a,b,c,d,e,f){XN.call(this,a,b,c,0);this.o=d;this.wa=new Image;null!==e&&(this.wa.crossOrigin=e);this.g=null;this.state=0;this.j=f}I(l3,XN);g=l3.prototype;g.Pa=function(){return this.wa};g.OG=function(){this.state=3;this.g.forEach(sf);this.g=null;this.ia()};g.PG=function(){void 0===this.resolution&&(this.resolution=cl(this.extent)/this.wa.height);this.state=2;this.g.forEach(sf);this.g=null;this.ia()};
g.load=function(){if(0==this.state||3==this.state)this.state=1,this.ia(),this.g=[xf(this.wa,"error",this.OG,this),xf(this.wa,"load",this.PG,this)],this.j(this,this.o)};g.setImage=function(a){this.wa=a};function m3(a){a=a||{};var b=a.params||{};PH.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:!("TRANSPARENT"in b?b.TRANSPARENT:1),projection:a.projection,reprojectionErrorThreshold:a.reprojectionErrorThreshold,tileClass:a.tileClass,tileGrid:a.tileGrid,tileLoadFunction:a.tileLoadFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0,transition:a.transition});this.I=void 0!==a.gutter?a.gutter:0;this.j=b;this.B=!0;this.o=a.serverType;
this.G=void 0!==a.hidpi?a.hidpi:!0;this.K=Ok();Pza(this);this.uh(Qza(this))}I(m3,PH);g=m3.prototype;g.Bp=function(){return this.I};g.vf=function(){return this.j};g.aj=function(a){return this.G&&void 0!==this.o?a:1};function Qza(a){var b=0,c=[],d;for(d in a.j)c[b++]=d+"-"+a.j[d];return c.join("/")}
g.Kh=function(a,b,c){var d=this.tileGrid;d||(d=this.Od(c));if(!(d.fg().length<=a[0])){1==b||this.G&&void 0!==this.o||(b=1);var e=d.bb(a[0]),f=bm(d,a,this.K),h=Mk(fm(d,a[0]),this.wi);d=this.I;if(0!==d){var k=this.wi;void 0===k&&(k=[0,0]);k[0]=h[0]+2*d;k[1]=h[1]+2*d;h=k;f=Qk(f,e*d,f)}1!=b&&(h=Lk(h,b,this.wi));e={SERVICE:"WMS",VERSION:"1.3.0",REQUEST:"GetMap",FORMAT:"image/png",TRANSPARENT:!0};of(e,this.j);d=h;h=b;if(b=this.urls){e.WIDTH=d[0];e.HEIGHT=d[1];e[this.B?"CRS":"SRS"]=c.Rb;"STYLES"in this.j||
(e.STYLES="");if(1!=h)switch(this.o){case "geoserver":d=90*h+.5|0;e.FORMAT_OPTIONS="FORMAT_OPTIONS"in e?e.FORMAT_OPTIONS+(";dpi:"+d):"dpi:"+d;break;case "mapserver":e.MAP_RESOLUTION=90*h;break;case "carmentaserver":case "qgis":e.DPI=90*h;break;default:Mf(!1,52)}c=c.Ch;this.B&&"ne"==c.substr(0,2)&&(c=f[0],f[0]=f[1],f[1]=c,c=f[2],f[2]=f[3],f[3]=c);e.BBOX=f.join(",");a=kya(1==b.length?b[0]:b[Pf((a[1]<<a[0])+a[2],b.length)],e)}else a=void 0;return a}};
g.updateParams=function(a){of(this.j,a);Pza(this);this.uh(Qza(this))};function Pza(a){a:{var b=(""+(a.j.VERSION||"1.3.0")).split(".");for(var c=["1","3"],d=0;d<Math.max(b.length,c.length);d++){var e=parseInt(b[d]||"0",10),f=parseInt(c[d]||"0",10);if(e>f){b=1;break a}if(f>e){b=-1;break a}}b=0}a.B=0<=b};var n3=void 0,Rza=void 0;function o3(){if(void 0===n3){var a=document.createElement("canvas");a.setAttribute("style","image-rendering: -moz-crisp-edges; image-rendering: pixelated;");a=a.style.imageRendering;(n3=!!a)&&(Rza=a)}return n3}function p3(a){return a.get("olcs.projection")||a.Ra()};function q3(a,b){this.g=a;this.wd=null;this.B=b||null;this.l=!1;this.A=this.j=this.u=null;if(a=this.g.get("olcs.proxy"))"function"===typeof a?this.o={getURL:a}:"string"===typeof a&&(this.o=new Cesium.DefaultProxy(a));this.I=new Cesium.Event;this.Vf=document.createElement("canvas");this.Vf.width=1;this.Vf.height=1;this.g.on("change",function(){this.fq()},this);this.fq()}
Object.defineProperties(q3.prototype,{ready:{get:function(){return this.l}},rectangle:{get:function(){return this.A}},tileWidth:{get:function(){var a=this.g.tileGrid;return a?Array.isArray(fm(a,0))?fm(a,0)[0]:fm(a,0):256}},tileHeight:{get:function(){var a=this.g.tileGrid;return a?Array.isArray(fm(a,0))?fm(a,0)[1]:fm(a,0):256}},maximumLevel:{get:function(){var a=this.g.tileGrid;return a?a.maxZoom:18}},minimumLevel:{get:function(){return 0}},tilingScheme:{get:function(){return this.j}},tileDiscardPolicy:{get:function(){}},
errorEvent:{get:function(){return this.I}},credit:{get:function(){return this.u}},proxy:{get:function(){return this.o}},hasAlphaChannel:{get:function(){return!0}},pickFeatures:{get:function(){}}});q3.prototype.fq=function(){if(!this.l&&"ready"==this.g.getState()){this.wd=p3(this.g)||this.B;if(this.wd==Cl("EPSG:4326"))this.j=new Cesium.GeographicTilingScheme;else if(this.wd==Cl("EPSG:3857"))this.j=new Cesium.WebMercatorTilingScheme;else return;this.A=this.j.rectangle;this.u=Sza(this.g);this.l=!0}};
function Sza(a){var b="";a=a.Vj;"function"===typeof a&&(a=a());a&&a.forEach(function(a){b+="string"===typeof a?a:a.jq});return 0<b.length?new Cesium.Credit(b,!0):null}q3.prototype.getTileCredits=function(){};q3.prototype.getTileCredits=q3.prototype.getTileCredits;
q3.prototype.requestImage=function(a,b,c){var d=this.g.tileUrlFunction;return d&&this.wd?(a=d.call(this.g,[this.j instanceof Cesium.GeographicTilingScheme?c+1:c,a,-b-1],1,this.wd),this.o&&(a=this.o.getURL(a)),a?Cesium.ImageryProvider.loadImage(this,a):this.Vf):this.Vf};q3.prototype.requestImage=q3.prototype.requestImage;function Tza(a){var b=a.canvas;b=new Cesium.Cartesian2(b.clientWidth/2,b.clientHeight/2);var c=a.camera.getPickRay(b);return a.globe.pick(c,a)||a.camera.pickEllipsoid(b)}function Uza(a,b){return a&&b?(a=Ql(a,b,"EPSG:4326"),Cesium.Rectangle.fromDegrees(a[0],a[1],a[2],a[3])):null}
function Vza(a,b){if(!(a instanceof zH||a instanceof Vv))return null;var c=a.N();if(c instanceof PH){var d=p3(c);d||(d=b);var e=d;d=e===Cl("EPSG:3857");e=e===Cl("EPSG:4326");if(d||e)c=new q3(c,b);else return null}else return null;d={};if(a=a.get("olcs.extent")||a.Y())d.rectangle=Uza(a,b);return new Cesium.ImageryLayer(c,d)}function r3(a,b){var c=1,d=!0;[a.layer].concat(a.parents).forEach(function(a){var b=a.Nb();void 0!==b&&(c*=b);a=a.yb();void 0!==a&&(d&=a)});b.alpha=c;b.show=d}
function s3(a){return 2<a.length?Cesium.Cartesian3.fromDegrees(a[0],a[1],a[2]):Cesium.Cartesian3.fromDegrees(a[0],a[1])}function t3(a){for(var b=[],c=0;c<a.length;++c)b.push(s3(a[c]));return b}function u3(a,b){var c=Cl("EPSG:4326");b=Cl(b);if(b!==c){var d=a.Yb();a=a.clone();a.transform(b,c);a.qc(d)}return a}
function v3(a){a=a||"black";if(Array.isArray(a))return new Cesium.Color(Cesium.Color.byteToFloat(a[0]),Cesium.Color.byteToFloat(a[1]),Cesium.Color.byteToFloat(a[2]),a[3]);if("string"==typeof a)return Cesium.Color.fromCssColorString(a)};function w3(){throw Error("TileGridTilingScheme created before initialization!");}
w3.init=function(){w3=function(a){this.g=a.tileGrid;a=a.Ra()||S;var b=Nl(a,Cl("EPSG:4326"));Nl(a,Cl("EPSG:3857"));this.j=Cesium.Ellipsoid.WGS84;this.o=b?new Cesium.GeographicProjection(this.j):new Cesium.WebMercatorProjection(this.j);this.wd=a;a=Ql(this.g.Y(),this.wd,"EPSG:4326");a=a.map(function(a){return a*Wp});this.l=new Cesium.Rectangle(a[0],a[1],a[2],a[3])};w(w3,Cesium.TilingScheme);w3.init=wa;Object.defineProperties(w3.prototype,{ellipsoid:{get:function(){return this.j}},rectangle:{get:function(){return this.l}},
projection:{get:function(){return this.o}}});w3.prototype.getNumberOfXTilesAtLevel=function(a){var b=im(this.g,a);if(b)return b.maxX-b.minX+1;var c=this.g.A;if(void 0!==c){var d=this.g.minZoom;b=im(this.g,d);return Math.pow(c,Math.log(b.maxX-b.minX+1)/Math.log(c)-d+a)}return 0};w3.prototype.getNumberOfYTilesAtLevel=function(a){var b=im(this.g,a);if(b)return b.maxY-b.minY+1;var c=this.g.A;if(void 0!==c){var d=this.g.minZoom;b=im(this.g,d);return Math.pow(c,Math.log(b.maxY-b.minY+1)/Math.log(c)-d+a)}return 0};
w3.prototype.rectangleToNativeRectangle=function(a,b){a=[a.west*Xp,a.south*Xp,a.east*Xp,a.north*Xp];a=Ql(a,"EPSG:4326",this.wd);b=b||new Cesium.Rectangle;b.west=a[0];b.south=a[1];b.east=a[2];b.north=a[3];return b};w3.prototype.tileXYToNativeRectangle=function(a,b,c,d){a=this.tileXYToRectangle(a,b,c,d);return this.rectangleToNativeRectangle(a,d)};w3.prototype.tileXYToRectangle=function(a,b,c,d){a=bm(this.g,[c,a,-b-1]);a=Ql(a,this.wd,"EPSG:4326");d=d||new Cesium.Rectangle;d.west=a[0]*Wp;d.south=a[1]*
Wp;d.east=a[2]*Wp;d.north=a[3]*Wp;return d};w3.prototype.positionToTileXY=function(a,b,c){if(this.contains(a)){a=Kl([a.longitude*Xp,a.latitude*Xp],this.wd);var d=dm(this.g,b),e=this.g.bb(b),f=Mk(fm(this.g,b),this.g.u);b=(a[0]-d[0])/e/f[0];a=(d[1]-a[1])/e/f[1];c=c||new Cesium.Cartesian2;c.x=Math.floor(b);c.y=Math.floor(a);return c}};w3.prototype.contains=function(a){var b=this.l;return!(1E-12<a.latitude-b.north||-1E-12>a.latitude-b.south||-1E-12>a.longitude-b.west||1E-12<a.longitude-b.east)}};function x3(a,b){q3.call(this,a,b);this.G=!1}w(x3,q3);x3.prototype.dispose=function(){this.G=!0};x3.prototype.Xa=function(){return this.G};x3.prototype.fq=function(){this.l||"ready"!=this.g.getState()||(this.wd=p3(this.g)||this.B,this.j=new w3(this.g),this.A=this.j.rectangle,this.u=Sza(this.g)||null,this.l=!0)};
x3.prototype.requestImage=function(a,b,c){b=-b-1;var d=Cesium.when.defer(),e=this.g.Od(this.wd);if(c<e.minZoom-1||c>e.maxZoom)return d.resolve(this.Vf),d.promise;var f=sI(this.g,c,a,b,1,this.wd);a=f.getState();if(a===tI)d.resolve(this.Vf);else if(a===zI)d.resolve(f.Pa());else if(a===AI)d.resolve(this.Vf);else{f.load();var h=H(f,"change",function(){var a=f.getState();a===tI?(d.resolve(this.Vf),sf(h)):a===zI?(d.resolve(f.Pa()),sf(h)):a===AI&&(d.resolve(this.Vf),sf(h))})}return d.promise};
x3.prototype.requestImage=x3.prototype.requestImage;Object.defineProperties(x3.prototype,{minimumLevel:{get:function(){return 1}},tileWidth:{get:function(){var a=this.g.tileGrid;return a?(a=fm(a,a.minZoom),Array.isArray(a)?a[0]:a):256}},tileHeight:{get:function(){var a=this.g.tileGrid;return a?(a=fm(a,a.minZoom),Array.isArray(a)?a[1]:a):256}}});function y3(a){this.B="string"===typeof a.credit?new Cesium.Credit(a.credit):void 0;this.G=new Cesium.Event;this.l="Terrain";this.o=!1;this.j=new Cesium.GeographicTilingScheme({numberOfLevelZeroTilesX:2,numberOfLevelZeroTilesY:1});this.maxLevel=a.maxLevel||11;this.minLevel=a.minLevel||8;this.tileSize=a.tileSize||128;this.A=Cesium.TerrainProvider.getEstimatedLevelZeroGeometricErrorForAHeightmap(this.j.ellipsoid,this.tileSize,this.j.getNumberOfXTilesAtLevel(0));this.I={heightScale:1,heightOffset:0,
elementsPerHeight:1,stride:1,elementMultiplier:256,isBigEndian:!1};this.url=a.url;this.useProxy=a.useProxy||!1}Object.defineProperties(y3.prototype,{credit:{get:function(){return this.B}},errorEvent:{get:function(){return this.G}},ready:{get:function(){return this.o},set:function(a){this.o=a}},tilingScheme:{get:function(){return this.j}},hasVertexNormals:{get:function(){return!1}},hasWaterMask:{get:function(){return!1}}});y3.prototype.getName=function(){return this.l};
y3.prototype.ri=function(a){this.l=a};y3.prototype.getLevelMaximumGeometricError=function(a){return this.A/(1<<a)};y3.prototype.getTileDataAvailable=function(){return!0};function z3(a){y3.call(this,a);this.g=a.layers;this.g.sort(Wza);0<this.g.length&&this.ri(this.g[this.g.length-1].layerName);this.maxLevel=this.g[0].maxLevel;this.minLevel=this.g[this.g.length-1].minLevel;this.ready=!0}w(z3,y3);z3.prototype.getTileDataAvailable=function(a,b,c){return z3.C.getTileDataAvailable.call(this,a,b,c)&&c<this.maxLevel};
z3.prototype.requestTileGeometry=function(a,b,c,d){var e=void 0;if(c<this.maxLevel&&c>=this.minLevel){var f=0;for(var h=this.g.length;f<h;f++){var k=this.g[f];if(c<k.maxLevel&&c>=k.minLevel){e=k.layerName;break}}}f=e;if(!f)return new Cesium.HeightmapTerrainData({buffer:new Uint8Array(this.tileSize*this.tileSize),width:this.tileSize,height:this.tileSize});e=this.url+"?SERVICE=WMS&VERSION=1.3.0&REQUEST=GetMap&CRS=EPSG%3A4326&STYLES=";e=e+("&LAYERS="+f)+"&FORMAT=image%2Fbil"+("&WIDTH="+this.tileSize+
"&HEIGHT="+this.tileSize);f=this.tilingScheme.tileXYToNativeRectangle(a,b,c);h=(f.east-f.west)/this.tileSize;k=(f.north-f.south)/this.tileSize;f.west-=.5*h;f.east+=.5*h;f.south-=.5*k;f.north+=.5*k;e+="&BBOX="+f.south+","+f.west+","+f.north+","+f.east;this.useProxy&&(e=rB(e));if(d=Cesium.defaultValue(d,!0)){if(d=Cesium.loadArrayBuffer(e,void 0,new Cesium.Request({throttle:!0})),!d)return}else d=Cesium.loadArrayBuffer(e);e=c+1;c=0|(this.getTileDataAvailable(2*a,2*b,e)?1:0);c|=this.getTileDataAvailable(2*
a+1,2*b,e)?2:0;c|=this.getTileDataAvailable(2*a,2*b+1,e)?4:0;c|=this.getTileDataAvailable(2*a+1,2*b+1,e)?8:0;return Cesium.when(d,this.u.bind(this,c))};
z3.prototype.u=function(a,b){var c;var d=new DataView(b);var e=new ArrayBuffer(this.tileSize*this.tileSize*2),f=new DataView(e);if(e.byteLength===b.byteLength){for(var h=c=0,k=0;k<e.byteLength;k+=2)b=d.getInt16(k,!1),-500<b&&9E3>b?(f.setInt16(k,b,!0),h+=b,c++):f.setInt16(k,0<c?h/c:0,!0);c=new Int16Array(e)}d=c;if(void 0===d)throw new Cesium.DeveloperError("unexpected height buffer size");return new Cesium.HeightmapTerrainData({buffer:d,width:this.tileSize,height:this.tileSize,childTileMask:a,structure:this.I})};
function Wza(a,b){return xb(b.maxLevel,a.maxLevel)};var Xza={JP:"ellipsoid",KP:"ellipsoidOutline",QB:"geometry",RP:"geometryOutline"},Yza=/ellipsoid/i,Zza=/outline/i;function $za(){if(void 0===window.Cesium){window.CESIUM_BASE_URL="v1541734487/vendor/cesium";var a=zi(ui(vi("v1541734487/vendor/cesium/Cesium.js"))),b=M.get("cesium.loadTimeout",3E4);return tr(a,{timeout:b})}return Sc()}var A3=void 0,aAa=void 0;function bAa(){return aAa=Cesium.JulianDate.fromDate(new Date(vg.s().g),aAa)}
function cAa(a,b){if(!(a instanceof zH))return null;var c=a.N();if(c instanceof PH){var d=c.Ra();d||(d=b);var e=d===Cl("EPSG:3857");d=d===Cl("EPSG:4326");if(e||d)c=new x3(c,b);else return null}else return null;e={};a=a.Y();null!=a&&null!==b&&(e.rectangle=Uza(a,b));return new Cesium.ImageryLayer(c,e)}function B3(a,b){r3({layer:a,parents:[]},b);a=a.sm();null!=a&&(b.hue=a*Cesium.Math.RADIANS_PER_DEGREE)}function dAa(a){return new Cesium.CesiumTerrainProvider(a)}
function eAa(a){return dAa({url:Cesium.IonResource.fromAssetId(null!=a.assetId?a.assetId:1,{accessToken:a.accessToken})})}function fAa(a){return new z3(a)};function C3(){e3.call(this,void 0);this.g=D3;this.title="Map"}w(C3,i3);C3.prototype.ju=function(){var a=L.s();a.Qa()?(a=a.g)&&a.renderSync():(a=a.X())&&a.renderSync()};C3.prototype.Yr=function(){var a=f3(this);return a?a.height:0};C3.prototype.Qy=function(){var a=f3(this);return a?a.width:0};C3.prototype.lb=function(){return M.get(["bgColor"],"#000")};function D3(){return(L.s().Qa()?document.querySelector("canvas.webgl-canvas"):document.querySelector(".ol-viewport > canvas"))||null}
function gAa(){var a=D3();if(a){var b=a.getBoundingClientRect();return a.width/b.width}return 1};function E3(){e3.call(this,void 0);this.g=".js-legend__render-container canvas";this.title="Legend"}w(E3,i3);E3.prototype.getPosition=function(){var a=D3();var b=f3(this);if(a&&b){var c=a.getBoundingClientRect();a=a.width/c.width;var d=b.getBoundingClientRect();b=d.left*a;c=(d.top-c.top)*a}else b=M.get(tS,0),c=M.get(uS,0);return[b,c]};function F3(){e3.call(this,void 0);this.title="Map Overlay";this.g=".ol-overviewmap:not(.ol-collapsed) canvas"}w(F3,i3);
F3.prototype.j=function(){var a=null,b=f3(this);if(R2(b))return Tc("The HTML 2D canvas has been tainted");if(b){var c=S2(),d=b.getBoundingClientRect(),e=c/(b.width/d.width);a=document.createElement("canvas");a.width=b.width*e;a.height=b.height*e;e=a.getContext("2d");var f=M.get(["bgColor"],"#000");e.fillStyle=f;e.fillRect(0,0,a.width,a.height);e.drawImage(b,0,0,b.width,b.height,0,0,a.width,a.height);e.strokeStyle=f;e.lineWidth=3*c;e.strokeRect(0,0,a.width,a.height);if(b=document.querySelector(".ol-overviewmap-box"))b=
b.getBoundingClientRect(),b.height<=d.height&&b.width<=d.width&&(e.strokeStyle="#f00",e.lineWidth=2*c,nn&&e.setLineDash([2*c,2*c]),e.strokeRect(c*(b.left-d.left),c*(b.top-d.top),c*b.width,c*b.height))}return Sc(a)};F3.prototype.getPosition=function(){var a=0,b=0,c=D3(),d=f3(this);c&&d&&(a=c.getBoundingClientRect(),c=c.width/a.width,d=d.getBoundingClientRect(),a=c*(a.right-d.width-10),b=10*c);return[a,b]};function G3(a,b){W2.call(this,a,b);this.log=hAa;this.u=void 0}w(G3,W2);var hAa=E.V("plugin.capture.TimelineRecorder");G3.prototype.init=function(){G3.C.init.call(this);var a=Y;this.u=a.A;uF(a,!1);a.H("propertychange",this.O,!1,this)};G3.prototype.wj=function(){G3.C.wj.call(this);var a=Y;a.M("propertychange",this.O,!1,this);void 0!=this.u&&(uF(a,this.u),this.u=void 0)};G3.prototype.O=function(a){this.aborted||"timeFilterEnabled"!==a.j||(this.u=void 0,U2(this,"The application time filter has been changed externally, which may cause unexpected behavior in the recording. Recording has been aborted."))};function H3(){c3.call(this);this.log=iAa}w(H3,c3);xa(H3);var iAa=E.V("plugin.capture.CapturePlugin");
H3.prototype.init=function(){H3.C.init.call(this);var a=NZ;a&&(a=a.Ha(),a.R({label:"Screenshot",eventType:"timeline.capture",tooltip:"Save a screenshot",da:['<i class="fa fa-fw fa-camera"></i>'],qa:"map.features.screenCapture",sort:20}),a.R({label:"Recording",eventType:"timeline.record",tooltip:"Save an animated GIF recording",da:['<i class="fa fa-fw fa-circle"></i>'],qa:"map.features.screenCapture",sort:21}).Aa=jAa);S2=gAa};
function jAa(){var a=vg.s(),b=a.g,c=b-a.ec(),d=WJ(a).start;a=WJ(a).end;this.visible=c!=d||b!=a}H3.prototype.zv=function(){var a=[new C3,new F3,new E3];od||a.push(new h3({fill:"#888"}));return a};H3.prototype.bv=function(){return new G3(this.Xr.bind(this),this.vn.bind(this,!0))};H3.prototype.vn=function(a){return new Kc(function(b){a?ke(function(){kAa(b)},100):b()},this)};function kAa(a){db(Dg(L.s()),function(a){return!a.ob()})?ke(a,1E3):ke(function(){kAa(a)},100)};function I3(a){this.u=a;this.j=a.g;this.A=this.j.canvas;this.l=this.g.bind(this);this.I="mousemove mousedown mouseup touchstart touchend touchmove pointerdown pointerup pointermove wheel".split(" ");this.o()}I3.prototype.o=function(){this.j.requestRenderMode=!0;for(var a=ma(this.I),b=a.next();!b.done;b=a.next())this.A.addEventListener(b.value,this.l,!1);window.addEventListener("resize",this.l,!1);dI(this.u.ha).on("change",this.l)};
I3.prototype.B=function(){for(var a=ma(this.I),b=a.next();!b.done;b=a.next())this.A.removeEventListener(b.value,this.l,!1);window.removeEventListener("resize",this.l,!1);Gf(dI(this.u.ha),"change",this.l);this.j.requestRenderMode=!1};I3.prototype.g=function(){this.j.requestRender()};function J3(a,b){this.l=a;this.g=a.camera;this.ha=b;this.O=this.j=null;this.B=this.G=J3.g;this.u=this.o=0;this.K=null;this.I=!1;this.ha.on("change:view",function(){lAa(this,T(this.ha))},this);lAa(this,T(this.ha))}J3.g=function(a,b,c){c=c||a.length;if(b)for(var d=0;d<c;++d)b[d]=a[d];return a};function lAa(a,b){a.j&&(Ff(a.O),a.O=null);if(a.j=b){var c=Ol(b.Ra(),"EPSG:4326"),d=Ol("EPSG:4326",b.Ra());a.G=c;a.B=d;a.O=H(b,"propertychange",a.EF,a);a.wg()}else a.G=J3.g,a.B=J3.g}g=J3.prototype;
g.EF=function(){this.I||this.wg()};g.et=function(a){this.j&&us(this.j,a)};g.Cp=function(){if(this.j)return ss(this.j)||0};g.tl=function(a){this.o=a;this.Dl()};g.Qp=function(){return this.o};g.getPosition=function(){if(this.B){var a=Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.g.position);return this.B([180*a.longitude/Math.PI,180*a.latitude/Math.PI])}};g.Ff=function(){return Cesium.Ellipsoid.WGS84.cartesianToCartographic(this.g.position).height};
g.Dl=function(){if(this.j&&this.G){var a=rs(this.j);if(a){a=this.G(a);a=new Cesium.Cartographic(Of(a[0]),Of(a[1]));if(this.l.globe){var b=this.l.globe.getHeight(a);a.height=b||0}a=Cesium.Ellipsoid.WGS84.cartographicToCartesian(a);b={pitch:this.o-Cesium.Math.PI_OVER_TWO,heading:-ss(this.j),roll:void 0};this.g.setView({destination:a,orientation:b});this.g.moveBackward(this.u);this.Ul(!0)}}};
g.wg=function(){if(this.j&&this.G){var a=rs(this.j);if(void 0!==a&&null!==a){a=this.G(a);var b=this.j.bb();this.u=this.Rf(b||0,Of(a[1]));this.Dl()}}};
g.Eg=function(){if(this.j&&this.B){this.I=!0;var a=Cesium.Ellipsoid.WGS84,b=this.l,c=Tza(b),d=c;d||(d=b.globe,b=this.g.positionCartographic.clone(),d=d.getHeight(b),b.height=d||0,d=Cesium.Ellipsoid.WGS84.cartographicToCartesian(b));this.u=Cesium.Cartesian3.distance(d,this.g.position);b=a.cartesianToCartographic(d);Sq(this.j,this.B([180*b.longitude/Math.PI,180*b.latitude/Math.PI]));Tq(this.j,this.Eh(this.u,b?b.latitude:0));if(c){d=this.g.position;b=new Cesium.Cartesian3;a.geocentricSurfaceNormal(c,
b);a=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(d,c,a);Cesium.Cartesian3.normalize(a,a);d=this.g.up;var e=this.g.right,f=new Cesium.Cartesian3(-c.y,c.x,0);e=Cesium.Cartesian3.angleBetween(e,f);c=Cesium.Cartesian3.cross(c,d,new Cesium.Cartesian3).z;us(this.j,0>c?e:-e);c=Math.acos(Cesium.Cartesian3.dot(b,a));this.o=isNaN(c)?0:c}else us(this.j,this.g.heading),this.o=-this.g.pitch+Math.PI/2;this.I=!1}};
g.Ul=function(a){var b=this.K,c=this.g.viewMatrix;b&&Cesium.Matrix4.equalsEpsilon(b,c,1E-5)||(this.K=c.clone(),!0!==a&&this.Eg())};g.Rf=function(a,b){var c=this.l.canvas,d=this.g.frustum.fovy,e=ml(this.j.Ra());return a*c.clientHeight*e*Math.cos(Math.abs(b))/2/Math.tan(d/2)};g.Eh=function(a,b){var c=this.l.canvas,d=this.g.frustum.fovy,e=ml(this.j.Ra());return 2*a*Math.tan(d/2)/e/Math.cos(Math.abs(b))/c.clientHeight};function K3(a,b){this.map=a;this.view=T(a);this.scene=b;Pv(dI(a));this.o=dI(a);this.Uh={};this.j={};this.l={}}K3.prototype.rc=function(){this.jA(!0);for(var a in this.l)this.l[a].forEach(Ff);for(a in this.j)this.j[a].forEach(Ff);this.l={};this.j={};this.Uh={};mAa(this,this.o)};K3.prototype.hn=function(){};
function mAa(a,b){var c=[{layer:b,parents:[]}];for(b={};0<c.length;){b.ih=c.splice(0,1)[0];b.olLayer=b.ih.layer;var d=J(b.olLayer).toString();a.j[d]=[];var e=null;b.olLayer instanceof Rv?(nAa(a,b.olLayer),b.olLayer!==a.o&&(e=a.Wl(b.ih)),e||Pv(b.olLayer).forEach(function(b){return function(d){d&&(d={layer:d,parents:b.olLayer===a.o?[]:[b.ih.layer].concat(b.ih.parents)},c.push(d))}}(b))):(e=a.Wl(b.ih),e||(b.Oa=d,b.ij=b.ih,b.Zh=function(b){return function(){var c=a.Wl(b.ij);c&&(Gf(b.ij.layer,"change",
b.Zh,a),oAa(a,c,b.Oa,b.ij.layer),a.hn())}}(b),a.j[d].push(H(b.ij.layer,"change",b.Zh,a))));e&&oAa(a,e,d,b.olLayer);b={olLayer:b.olLayer,ih:b.ih,ij:b.ij,Zh:b.Zh,Oa:b.Oa}}a.hn()}function oAa(a,b,c,d){a.Uh[c]=b;a.j[c].push(H(d,"change:zIndex",a.hn,a));b.forEach(function(b){a.Wt(b)})}function pAa(a,b){b=J(b).toString();var c=a.Uh[b];c&&(c.forEach(function(b){a.pA(b,!1);a.Cu(b)}),a.j[b].forEach(Ff),delete a.j[b]);delete a.Uh[b];return!!c}
function qAa(a,b){b!==a.o&&(b=J(b).toString(),a.l[b].forEach(function(a){Ff(a)}),delete a.l[b],delete a.Uh[b])}function rAa(a,b){if(b)for(var c=[b];0<c.length;){b=c.splice(0,1)[0];var d=pAa(a,b);b instanceof Rv&&(qAa(a,b),d||Pv(b).forEach(function(a){c.push(a)}))}}
function nAa(a,b){var c=J(b).toString(),d=[];a.l[c]=d;var e=[],f=function(){var a=Pv(b);a&&(e=[a.on("add",function(a){mAa(this,a.element)},this),a.on("remove",function(a){rAa(this,a.element)},this)],d.push.apply(d,[].concat(na(e))))}.bind(a);f();d.push(b.on("change:layers",function(){e.forEach(function(a){var b=d.indexOf(a);0<=b&&d.splice(b,1);Ff(a)});f()}))};function L3(a,b){this.Qb=b.imageryLayers;this.Ej=new Cesium.ImageryLayerCollection;K3.call(this,a,b)}I(L3,K3);g=L3.prototype;g.Wt=function(a){this.Qb.add(a);this.Ej.add(a)};g.Cu=function(a){a.destroy()};g.pA=function(a,b){this.Qb.remove(a,b);this.Ej.remove(a,!1)};g.jA=function(a){for(var b=0;b<this.Ej.length;++b)this.Qb.remove(this.Ej.get(b),a);this.Ej.removeAll(!1)};function sAa(a,b){return(a=Vza(a,b))?[a]:null}
g.Wl=function(a){var b=a.layer,c=J(b).toString(),d=this.view.Ra(),e=sAa(b,d);if(e){var f=[];[a.layer].concat(a.parents).forEach(function(b){f.push(b.on(["change:opacity","change:visible"],function(){for(var b=0;b<e.length;++b)r3(a,e[b])}))});for(d=0;d<e.length;++d)r3(a,e[d]);f.push(b.on("change:extent",function(){for(var a=0;a<e.length;++a)this.Qb.remove(e[a],!0),this.Ej.remove(e[a],!1);delete this.Uh[J(b)];this.rc()},this));f.push(b.on("change",function(){for(var a=0;a<e.length;++a){var b=this.Qb.indexOf(e[a]);
0<=b&&(this.Qb.remove(e[a],!1),this.Qb.add(e[a],b))}},this));this.j[c].push.apply(this.j[c],[].concat(na(f)))}return Array.isArray(e)?e:null};g.hn=function(){for(var a=this,b=[],c={},d=[this.o];0<d.length;){var e=d.splice(0,1)[0];b.push(e);c[J(e)]=e.Ac();e instanceof Rv&&(e=Pv(e))&&d.unshift.apply(d,[].concat(na(e.g)))}Yl(b,function(a,b){return c[J(a)]-c[J(b)]});b.forEach(function(b){b=J(b).toString();(b=a.Uh[b])&&b.forEach(a.cH,a)})};g.cH=function(a){this.Qb.raiseToTop(a)};function tAa(a,b){b=new Cesium.BillboardCollection({scene:b});var c=new Cesium.PrimitiveCollection;this.j=[];this.g=new Cesium.PrimitiveCollection;this.context={projection:a,billboards:b,featureToCesiumMap:{},primitives:c};this.g.add(b);this.g.add(c)}tAa.prototype.destroy=function(){this.j.forEach(Ff);this.j.length=0};function M3(a){this.scene=a;this.l=this.o.bind(this)}M3.prototype.o=function(a){var b=a.target,c=b.olcs_cancellers;if(c)if(a=a.feature){b=J(a);var d=c[b];d&&(d(),delete c[b])}else{for(d in c)if(c.hasOwnProperty(d))c[d]();b.olcs_cancellers={}}};
function uAa(a,b,c,d,e,f){var h={flat:!0,renderState:{depthTest:{enabled:!0}}};void 0!==f&&(h.renderState||(h.renderState={}),h.renderState.lineWidth=f);d=new Cesium.GeometryInstance({geometry:d,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(e)}});if(N3(a,b,c)==Cesium.HeightReference.CLAMP_TO_GROUND){if((c=d.geometry.constructor)&&!c.createShadowVolume)return null;c=new Cesium.GroundPrimitive({geometryInstances:d})}else c=new Cesium.PerInstanceColorAppearance(h),c=new Cesium.Primitive({geometryInstances:d,
appearance:c});h=c;h.olLayer=a;h.olFeature=b;return c}function O3(a,b){var c=a.lb()?a.lb().Ja():null;a=a.kb()?a.kb().Ja():null;var d="black";a&&b?d=a:c&&(d=c);return v3(d)}function P3(a){a=a.kb()?a.kb().g:void 0;return void 0!==a?a:1}function vAa(a,b,c,d,e,f){var h=O3(f,!1),k=O3(f,!0),l=new Cesium.PrimitiveCollection;f.lb()&&(d=uAa(a,b,c,d,h),l.add(d));f.kb()&&(a=uAa(a,b,c,e,k,P3(f)))&&l.add(a);return l}
function Q3(a,b,c,d,e,f){if(f instanceof Cesium.PrimitiveCollection)var h=f;else h=new Cesium.PrimitiveCollection,h.add(f);if(!e.mb())return h;e=e.mb();var k=e.mb();a=new Cesium.LabelCollection({scene:a.scene});var l=dl(d.Y());d instanceof zo&&(f=Bo(d),l[2]=3==f.length?f[2]:0);f={};f.position=s3(l);f.text=k;f.heightReference=N3(b,c,d);d=e.ng;k=e.o;0!=d&&0!=k&&(d=new Cesium.Cartesian2(d,k),f.pixelOffset=d);f.font=e.Ae()||"10px sans-serif";d=void 0;e.lb()&&(f.fillColor=O3(e,!1),d=Cesium.LabelStyle.FILL);
e.kb()&&(f.outlineWidth=P3(e),f.outlineColor=O3(e,!0),d=Cesium.LabelStyle.OUTLINE);e.lb()&&e.kb()&&(d=Cesium.LabelStyle.FILL_AND_OUTLINE);f.style=d;switch(e.g){case "left":d=Cesium.HorizontalOrigin.LEFT;break;case "right":d=Cesium.HorizontalOrigin.RIGHT;break;default:d=Cesium.HorizontalOrigin.CENTER}f.horizontalOrigin=d;if(e.l){switch(e.l){case "top":var m=Cesium.VerticalOrigin.TOP;break;case "middle":m=Cesium.VerticalOrigin.CENTER;break;case "bottom":m=Cesium.VerticalOrigin.BOTTOM;break;case "alphabetic":m=
Cesium.VerticalOrigin.TOP;break;case "hanging":m=Cesium.VerticalOrigin.BOTTOM}f.verticalOrigin=m}m=a.add(f);m.olLayer=b;m.olFeature=c;a&&h.add(a);return h}function wAa(a,b,c,d,e,f){d=u3(d,e);e=Xo(d);var h=3==e.length?e[2]:0,k=e.slice();k[0]+=Yo(d);e=s3(e);k=s3(k);var l=Cesium.Cartesian3.distance(e,k);k=new Cesium.CircleGeometry({center:e,radius:l,height:h});e=new Cesium.CircleOutlineGeometry({center:e,radius:l,extrudedHeight:h,height:h});e=vAa(b,c,d,k,e,f);return Q3(a,b,c,d,f,e)}
M3.prototype.g=function(a,b,c,d,e){c=u3(c,d);d=t3(c.getCoordinates());var f=P3(e);if(N3(a,b,c)==Cesium.HeightReference.CLAMP_TO_GROUND){var h=O3(e,!0),k=0;f=Math.max(3,f);for(var l=[],m=ma([1E3,4E3,16E3,64E3,254E3,1E6,1E7]),n=m.next();!n.done;n=m.next())n=n.value,f*=2.14,l.push(new Cesium.GeometryInstance({geometry:new Cesium.uP({positions:d,width:f,vertexFormat:Cesium.VertexFormat.g}),attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(h),VS:new Cesium.HP(k,n-1)}})),k=n;d=new Cesium.GroundPrimitive({geometryInstances:l})}else h=
Cesium.PolylineMaterialAppearance,e.lb(),(k=e.kb())?(l=k.Ja(),l=v3(l),k=k.j?Cesium.Material.fromType("Stripe",{horizontal:!1,repeat:500,evenColor:l,oddColor:new Cesium.Color(0,0,0,0)}):Cesium.Material.fromType("Color",{color:l})):k=null,h=new h({material:k}),d=new Cesium.Primitive({geometryInstances:new Cesium.GeometryInstance({geometry:new Cesium.PolylineGeometry({positions:d,width:f,vertexFormat:h.vertexFormat})}),appearance:h});f=d;f.olLayer=a;f.olFeature=b;return Q3(this,a,b,c,e,d)};
M3.prototype.j=function(a,b,c,d,e){c=u3(c,d);if(5==c.getCoordinates()[0].length&&"rectangle"===b.Z().get("olcs.polygon_kind")){d=c.getCoordinates()[0];var f=Nk(d);var h=Cesium.Rectangle.fromDegrees(f[0],f[1],f[2],f[3]),k=0;if(3==d[0].length)for(f=0;f<d.length;f++)k=Math.max(k,d[f][2]);f=new Cesium.RectangleGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:h,height:k});d=new Cesium.RectangleOutlineGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:h,height:k})}else{f=tp(c);d={};for(h=0;h<f.length;++h)k=
f[h].getCoordinates(),k=t3(k),0==h?d.positions=k:(d.holes||(d.holes=[]),d.holes.push({positions:k}));f=new Cesium.PolygonGeometry({polygonHierarchy:d,perPositionHeight:!0});d=new Cesium.PolygonOutlineGeometry({polygonHierarchy:d,perPositionHeight:!0})}d=vAa(a,b,c,f,d,e);return Q3(this,a,b,c,e,d)};
function N3(a,b,c){c=c.get("altitudeMode");void 0===c&&(c=b.get("altitudeMode"));void 0===c&&(c=a.get("altitudeMode"));a=Cesium.HeightReference.NONE;"clampToGround"===c?a=Cesium.HeightReference.CLAMP_TO_GROUND:"relativeToGround"===c&&(a=Cesium.HeightReference.RELATIVE_TO_GROUND);return a}
function xAa(a,b,c,d,e,f,h){e instanceof eA&&e.load();var k=e.Pa(1),l=function(){if(k&&(k instanceof HTMLCanvasElement||k instanceof Image||k instanceof HTMLImageElement)){var a=d.getCoordinates();a=s3(a);var l,m=e.Nb();void 0!==m&&(l=new Cesium.Color(1,1,1,m));m=N3(b,c,d);l={image:k,color:l,scale:e.j(),heightReference:m,verticalOrigin:Cesium.VerticalOrigin.BOTTOM,position:a};l=f.add(l);l.olLayer=b;l.olFeature=c;h&&h(l)}}.bind(a);if(k instanceof Image&&(""==k.src||0==k.naturalHeight||0==k.naturalWidth||
!k.complete)){var m=!1,n=b.N();n.on(["removefeature","clear"],a.l);(a=n.olcs_cancellers)||(a=n.olcs_cancellers={});n=J(c);if(a[n])a[n]();a[n]=function(){m=!0};xf(k,"load",function(){f.isDestroyed()||m||l()})}else l()}
function R3(a,b,c,d,e,f,h,k){d=u3(d,e);e=null;var l=f.Pa();if(l){var m=d.get("olcs_model")||c.get("olcs_model");m?(h=m(),e=Object.assign({},{scene:a.scene},h.cesiumOptions),k=Cesium.Model.XS(e),e=new Cesium.PrimitiveCollection,e.add(k),h.debugModelMatrix&&e.add(new Cesium.GP({modelMatrix:h.debugModelMatrix}))):xAa(a,b,c,d,l,h,k)}return f.mb()?Q3(a,b,c,d,f,e||new Cesium.Primitive):e}
function yAa(a,b,c,d,e,f,h,k){function l(a,d){var h=new Cesium.PrimitiveCollection;a.forEach(function(a){h.add(d(b,c,a,e,f))});return h}switch(d.T()){case "MultiPoint":d=kp(d);if(f.mb()){var m=new Cesium.PrimitiveCollection;d.forEach(function(d){(d=R3(a,b,c,d,e,f,h,k))&&m.add(d)});return m}d.forEach(function(d){R3(a,b,c,d,e,f,h,k)});return null;case "MultiLineString":return d=Oo(d),l(d,a.g.bind(a));case "MultiPolygon":return d=yp(d),l(d,a.j.bind(a));default:d.T()}}
function zAa(a,b,c){var d=a.Nd(),e=null;d&&(e=d.call(a,c));!e&&b&&(e=b(a,c));return e?Array.isArray(e)?e:[e]:null}function AAa(a,b,c){return c||(c=a.get("olcs.3d_geometry"))&&c instanceof yo?c:b&&(b=(0,b.Re)(a),b instanceof yo)?b:a.Z()}
function S3(a,b,c,d,e,f){function h(a){var b=e.featureToCesiumMap[J(c)];b instanceof Array?b.push(a):e.featureToCesiumMap[J(c)]=[a]}f=AAa(c,d,f);if(!f)return null;var k=e.projection;switch(f.T()){case "GeometryCollection":var l=new Cesium.PrimitiveCollection;dp(f).forEach(function(f){f&&(f=S3(a,b,c,d,e,f))&&l.add(f)});return l;case "Point":return(f=R3(a,b,c,f,k,d,e.billboards,h))?f:null;case "Circle":return wAa(a,b,c,f,k,d);case "LineString":return a.g(b,c,f,k,d);case "Polygon":return a.j(b,c,f,k,
d);case "MultiPoint":case "MultiLineString":case "MultiPolygon":return(f=yAa(a,b,c,f,k,d,e.billboards,h))?f:null;case "LinearRing":throw Error("LinearRing should only be part of polygon.");default:throw Error("Ol geom type not handled : "+f.T());}}
function BAa(a,b,c,d){var e=c.Ra();c=c.bb();if(void 0===c||!e)throw Error("View not ready");var f=b.N().La();e=new tAa(e,a.scene);for(var h=e.context,k=0;k<f.length;++k){var l=f[k];if(l){var m=zAa(l,b.Nd(),c);if(m&&m.length){for(var n=null,p=0;p<m.length;p++){var r=S3(a,b,l,m[p],h);if(r)if(!n)n=r;else if(r)for(var u=0,v;v=r.get(u);)n.add(v),u++}n&&(d[J(l)]=n,e.g.add(n))}}}return e};function T3(a,b,c){this.Ic=c||new M3(b);this.g=new Cesium.PrimitiveCollection;b.primitives.add(this.g);this.g.destroyPrimitives=!1;K3.call(this,a,b)}I(T3,K3);g=T3.prototype;g.Wt=function(a){a.g.counterpart=a;this.g.add(a.g)};g.Cu=function(a){a.g.destroy()};g.pA=function(a,b){a.destroy();this.g.destroyPrimitives=b;this.g.remove(a.g);this.g.destroyPrimitives=!1};
g.jA=function(a){if(this.g.destroyPrimitives=a)for(a=0;a<this.g.length;++a)this.g.get(a).counterpart.destroy();this.g.removeAll();this.g.destroyPrimitives=!1};function CAa(a,b){var c=!0;[a.layer].concat(a.parents).forEach(function(a){a=a.yb();c=void 0!==a?c&a:!1});b.show=c}
g.Wl=function(a){var b=a.layer;if(!(b instanceof iu))return null;var c=b.N(),d=this.view,e={},f=BAa(this.Ic,b,d,e),h=f.g,k=f.j;[a.layer].concat(a.parents).forEach(function(b){k.push(H(b,"change:visible",function(){CAa(a,h)}))});CAa(a,h);var l=function(a){var c=this.Ic;var k=f.context,l=d.Ra(),m=d.bb();if(void 0!=m&&l)if(m=zAa(a,b.Nd(),m),m.length){k.projection=l;l=null;for(var n=0;n<m.length;n++){var B=S3(c,b,a,m[n],k);if(!l)l=B;else if(B)for(var G=0,D;D=B.get(G);)l.add(D),G++}c=l}else c=null;else c=
null;c&&(e[J(a)]=c,h.add(c))}.bind(this),m=function(a){a=J(a);var b=f.context,c=b.featureToCesiumMap[a];c&&(delete b.featureToCesiumMap[a],c.forEach(function(a){a instanceof Cesium.Billboard&&b.billboards.remove(a)}));c=e[a];delete e[a];c&&h.remove(c)}.bind(this);k.push(H(c,"addfeature",function(a){l(a.feature)},this));k.push(H(c,"removefeature",function(a){m(a.feature)},this));k.push(H(c,"changefeature",function(a){a=a.feature;m(a);l(a)},this));return f?[f]:null};function U3(a){Hf.call(this);this.K=a;this.id=a.id;this.insertFirst=void 0!==a.insertFirst?a.insertFirst:!0;this.stopEvent=void 0!==a.stopEvent?a.stopEvent:!0;this.element=document.createElement("DIV");this.element.className=void 0!==a.className?a.className:"ol-overlay-container ol-selectable";this.element.style.position="absolute";this.autoPan=void 0!==a.autoPan?a.autoPan:!1;this.autoPanAnimation=a.autoPanAnimation||{};this.autoPanMargin=void 0!==a.autoPanMargin?a.autoPanMargin:20;this.g={Pl:"",
Mm:"",Vn:"",to:"",visible:!0};this.u=null;H(this,Jf(V3),this.Cm,this);H(this,Jf(W3),this.bq,this);H(this,Jf(X3),this.qF,this);H(this,Jf(Y3),this.qv,this);H(this,Jf(Z3),this.tF,this);void 0!==a.element&&this.set(V3,a.element);this.set(X3,void 0!==a.offset?a.offset:[0,0]);this.set(Z3,void 0!==a.positioning?a.positioning:"top-left");void 0!==a.position&&this.set(Y3,a.position)}I(U3,Hf);g=U3.prototype;g.ub=function(){return this.get(V3)};g.D=function(){return this.id};g.X=function(){return this.get(W3)};
g.ec=function(){return this.get(X3)};g.getPosition=function(){return this.get(Y3)};g.Cm=function(){xm(this.element);var a=this.ub();a&&this.element.appendChild(a)};g.bq=function(){this.u&&(wm(this.element),sf(this.u),this.u=null);var a=this.X();a&&(this.u=H(a,"postrender",this.render,this),this.Dg(),a=this.stopEvent?a.A:a.B,this.insertFirst?a.insertBefore(this.element,a.childNodes[0]||null):a.appendChild(this.element))};g.render=function(){this.Dg()};g.qF=function(){this.Dg()};
g.qv=function(){this.Dg();if(this.get(Y3)&&this.autoPan){var a=this.X();if(a&&EN(a)){var b=DAa(EN(a),Xn(a)),c=this.ub(),d=c.offsetWidth,e=getComputedStyle(c);d+=parseInt(e.marginLeft,10)+parseInt(e.marginRight,10);e=c.offsetHeight;var f=getComputedStyle(c);e+=parseInt(f.marginTop,10)+parseInt(f.marginBottom,10);var h=DAa(c,[d,e]);c=this.autoPanMargin;Tk(b,h)||(d=h[0]-b[0],e=b[2]-h[2],f=h[1]-b[1],h=b[3]-h[3],b=[0,0],0>d?b[0]=d-c:0>e&&(b[0]=Math.abs(e)+c),0>f?b[1]=f-c:0>h&&(b[1]=Math.abs(h)+c),0===
b[0]&&0===b[1])||(c=rs(T(a)),c=a.getPixelFromCoordinate(c),b=[c[0]+b[0],c[1]+b[1]],T(a).animate({center:a.getCoordinateFromPixel(b),duration:this.autoPanAnimation.duration,easing:this.autoPanAnimation.easing}))}}};g.tF=function(){this.Dg()};g.setMap=function(a){this.set(W3,a)};function DAa(a,b){var c=a.getBoundingClientRect();a=c.left+window.pageXOffset;c=c.top+window.pageYOffset;return[a,c,a+b[0],c+b[1]]}
g.dc=function(a){this.g.visible!==a&&(this.element.style.display=a?"":"none",this.g.visible=a)};g.Dg=function(){var a=this.X(),b=this.getPosition();a&&a.j&&b?(b=a.getPixelFromCoordinate(b),a=Xn(a),EAa(this,b,a)):this.dc(!1)};
function EAa(a,b,c){var d=a.element.style,e=a.ec(),f=a.get(Z3);a.dc(!0);var h=e[0];e=e[1];if("bottom-right"==f||"center-right"==f||"top-right"==f)""!==a.g.Mm&&(a.g.Mm=d.left=""),h=Math.round(c[0]-b[0]-h)+"px",a.g.Vn!=h&&(a.g.Vn=d.right=h);else{""!==a.g.Vn&&(a.g.Vn=d.right="");if("bottom-center"==f||"center-center"==f||"top-center"==f)h-=a.element.offsetWidth/2;h=Math.round(b[0]+h)+"px";a.g.Mm!=h&&(a.g.Mm=d.left=h)}if("bottom-left"==f||"bottom-center"==f||"bottom-right"==f)""!==a.g.to&&(a.g.to=d.top=
""),b=Math.round(c[1]-b[1]-e)+"px",a.g.Pl!=b&&(a.g.Pl=d.bottom=b);else{""!==a.g.Pl&&(a.g.Pl=d.bottom="");if("center-left"==f||"center-center"==f||"center-right"==f)e-=a.element.offsetHeight/2;b=Math.round(b[1]+e)+"px";a.g.to!=b&&(a.g.to=d.top=b)}}var V3="element",W3="map",X3="offset",Y3="position",Z3="positioning";function $3(a){this.o=null;this.l=a.scene;this.I=a.synchronizer;this.ya=a.parent;this.G=void 0;this.A=new MutationObserver(this.Cm.bind(this));this.B=[];this.j=[];this.j.push(this.ya.on("change:position",this.rl.bind(this)));this.j.push(this.ya.on("change:element",this.rl.bind(this)));this.j.push(this.ya.on("change:offset",this.rl.bind(this)));this.j.push(this.ya.on("change:position",this.rl.bind(this)));this.j.push(this.ya.on("change:positioning",this.rl.bind(this)));U3.call(this,this.ya.K);this.qc(this.ya.Yb());
this.bq()}I($3,U3);function FAa(a,b){a.A.disconnect();a.A.observe(b,{attributes:!1,childList:!0,characterData:!0,subtree:!0});a.B.forEach(function(a){a.disconnect()});for(var c=a.B.length=0;c<b.childNodes.length;c++){var d=b.childNodes[c];if(1===d.nodeType){var e=new MutationObserver(a.Cm.bind(a));e.observe(d,{attributes:!0,subtree:!0});a.B.push(e)}}}g=$3.prototype;g.rl=function(a){a.target&&a.key&&this.set(a.key,a.target.get(a.key))};
g.bq=function(){this.o&&(this.o(),wm(this.element));this.o=null;var a=this.l;a&&(this.o=a.postRender.addEventListener(this.Dg.bind(this)),this.Dg(),a=this.stopEvent?this.I.j:this.I.l,this.insertFirst?a.insertBefore(this.element,a.childNodes[0]||null):a.appendChild(this.element))};g.qv=function(){var a=this.getPosition();if(a){var b=T(this.ya.X()).Ra();this.G=Ll(a,b,"EPSG:4326")}else this.G=void 0;this.Dg()};
g.Cm=function(){function a(b,c){var d=b.cloneNode();c&&c.appendChild(d);b.nodeType!=Node.TEXT_NODE&&d.addEventListener("click",function(a){b.dispatchEvent(new MouseEvent("click",a));a.stopPropagation()});c=b.childNodes;for(var e=0;e<c.length;e++)c[e]&&a(c[e],d);return d}xm(this.element);var b=this.ub();if(b&&b.parentNode&&b.parentNode.childNodes)for(var c=ma(b.parentNode.childNodes),d=c.next();!d.done;d=c.next())d=a(d.value,null),this.element.appendChild(d);b.parentNode&&FAa(this,b.parentNode)};
g.Dg=function(){var a=this.G;if(this.l&&a){a=2===a.length?Cesium.Cartesian3.g(a)[0]:Cesium.Cartesian3.j(a)[0];var b=this.l.camera,c=new Cesium.BoundingSphere(new Cesium.Cartesian3,6356752);(new Cesium.eR(c,b.position)).YS(a)?1!==b.frustum.g(b.position,b.direction,b.up).RS(new Cesium.BoundingSphere(a))?this.dc(!1):(this.dc(!0),a=this.l.g(a),EAa(this,[a.x,a.y],[this.l.canvas.width,this.l.canvas.height])):this.dc(!1)}else this.dc(!1)};
g.destroy=function(){this.o&&this.o();this.A&&this.A.disconnect();Ff(this.j);this.j.splice(0);this.element.removeNode?this.element.removeNode(!0):this.element.remove();this.element=null};function a4(a,b){var c=this;this.map=a;this.o=this.map.sk();this.scene=b;this.j=document.createElement("DIV");this.j.className="ol-overlaycontainer-stopevent";"click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" ").forEach(function(a){H(c.j,a,function(a){return a.stopPropagation()})});this.scene.canvas.parentElement.appendChild(this.j);this.l=document.createElement("DIV");this.l.className="ol-overlaycontainer";this.scene.canvas.parentElement.appendChild(this.l);
this.g={}}a4.prototype.rc=function(){GAa(this);this.o.forEach(this.u,this);this.o.on("add",this.A.bind(this));this.o.on("remove",this.B.bind(this))};a4.prototype.A=function(a){this.u(a.element)};a4.prototype.u=function(a){if(a){var b=new $3({scene:this.scene,synchronizer:this,parent:a});a=J(a).toString();this.g[a]=b}};a4.prototype.B=function(a){a=J(a.element).toString();var b=this.g[a];b&&(b.destroy(),delete this.g[a])};
function GAa(a){Object.keys(a.g).forEach(function(b){a.g[b].destroy();delete a.g[b]})};function b4(a){this.Ia=null;this.ha=a.map;this.jb=a.time||function(){return Cesium.JulianDate.now()};this.Eb=Ol(T(this.ha).Ra(),"EPSG:4326");this.pa=this.aa=0;this.Ea=!0;this.u=document.createElement("DIV");var b=document.createAttribute("style");b.value="position:absolute;top:0;left:0;width:100%;height:100%;visibility:hidden;";this.u.setAttributeNode(b);if(b=a.target||null)"string"===typeof b&&(b=document.getElementById(b)),b.appendChild(this.u);else{var c=this.ha.g.querySelector(".ol-overlaycontainer");
c&&c.parentNode&&c.parentNode.insertBefore(this.u,c)}if((this.A=!b)&&a.stopOpenLayersEventsPropagation){b="click dblclick mousedown touchstart MSPointerDown pointerdown mousewheel wheel".split(" ");c=0;for(var d=b.length;c<d;++c)H(this.u,b[c],function(a){return a.stopPropagation()})}this.j=document.createElement("CANVAS");b=document.createAttribute("style");b.value="position:absolute;top:0;left:0;width:100%;height:100%;";this.j.setAttributeNode(b);o3()&&(b=this.j.style,o3(),b.imageRendering=Rza||
"");this.j.oncontextmenu=function(){return!1};this.j.onselectstart=function(){return!1};this.u.appendChild(this.j);this.o=!1;this.sa=[];this.l=null;b=void 0!==a.sceneOptions?a.sceneOptions:{};b.canvas=this.j;b.scene3DOnly=!0;this.g=new Cesium.Scene(b);b=this.g.screenSpaceCameraController;b.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.SHIFT});b.tiltEventTypes.push({eventType:Cesium.CameraEventType.LEFT_DRAG,modifier:Cesium.KeyboardEventModifier.ALT});
b.enableLook=!1;this.g.camera.constrainedAxis=Cesium.Cartesian3.UNIT_Z;this.Xd=new J3(this.g,this.ha);this.oa=new Cesium.Globe(Cesium.Ellipsoid.WGS84);this.oa.baseColor=Cesium.Color.WHITE;this.g.globe=this.oa;this.g.skyAtmosphere=new Cesium.SkyAtmosphere;b=new Cesium.SingleTileImageryProvider({url:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNkYAAAAAYAAjCB0C8AAAAASUVORK5CYII=",rectangle:Cesium.Rectangle.fromDegrees(0,0,1,1)});this.oa.imageryLayers.addImageryProvider(b,
0);this.cb=new Cesium.DataSourceCollection;this.K=new Cesium.DataSourceDisplay({scene:this.g,dataSourceCollection:this.cb});a=a.createSynchronizers?a.createSynchronizers(this.ha,this.g,this.cb):[new L3(this.ha,this.g),new T3(this.ha,this.g),new a4(this.ha,this.g)];this.Qq();for(b=a.length-1;0<=b;--b)a[b].rc();this.A&&(a=this.j.nextElementSibling)&&(a.style.display="none");this.ib=0;this.P=void 0;this.Ca=Number.POSITIVE_INFINITY;this.G=!1;this.O=this.B=this.ka=null;this.U=!1;this.I=new Cesium.BoundingSphere;
(new Cesium.EventHelper).add(this.g.postRender,b4.prototype.UO,this);Cesium.Camera.g=!1}
Object.defineProperties(b4.prototype,{trackedFeature:{get:function(){return this.ka},set:function(a){if(this.ka!==a){var b=this.g;if(a&&a.Z()){this.ka=a;this.U=!0;var c=this.Eb;b={position:new Cesium.CallbackProperty(function(){var b=a.Z().getCoordinates();b=c(b,void 0,b.length);return s3(b)},!1),point:{pixelSize:1,color:Cesium.Color.TRANSPARENT}};this.B=this.K.defaultDataSource.entities.add(b)}else this.U=!1,b.screenSpaceCameraController.enableTilt=!0,this.B&&this.K.defaultDataSource.entities.remove(this.B),
this.O=this.ka=this.B=null,b.camera.lookAtTransform(Cesium.Matrix4.IDENTITY)}}}});function c4(a){void 0!==a.P&&(cancelAnimationFrame(a.P),a.P=void 0);a.o&&!a.G&&(a.P=requestAnimationFrame(a.gH.bind(a)))}g=b4.prototype;
g.gH=function(a){this.P=void 0;a-this.ib<1E3/this.Ca||(this.ib=a,a=this.jb(),this.g.initializeFrame(),this.Qq(),this.K.update(a),this.O&&this.K.getBoundingSphere(this.B,!1,this.I)===Cesium.BoundingSphereState.DONE&&(this.I.radius=1,this.O.update(a,this.I)),this.g.render(a),this.Xd.Ul());c4(this)};
g.UO=function(){if(this.U){var a=this.B,b=this.g,c=this.K.getBoundingSphere(a,!1,this.I);if(c!==Cesium.BoundingSphereState.PENDING){b.screenSpaceCameraController.enableTilt=!1;if(c=c!==Cesium.BoundingSphereState.FAILED?this.I:void 0)c.radius=1;this.O=new Cesium.EntityView(a,b,b.mapProjection.ellipsoid);this.O.update(this.jb(),c);this.U=!1}}};
g.Qq=function(){var a=this.j.clientWidth,b=this.j.clientHeight;if(!(0===a|0===b||a===this.aa&&b===this.pa&&!this.Ea)){var c=1;o3()||(c*=window.devicePixelRatio||1);this.Ea=!1;this.aa=a;this.pa=b;a*=c;b*=c;this.j.width=a;this.j.height=b;this.g.camera.frustum.aspectRatio=a/b}};g.kc=function(){return this.o};
g.Za=function(a){var b=this;if(this.o!==a)if(this.o=a,this.u.style.visibility=this.o?"visible":"hidden",this.o){HAa(this);if(this.A){var c=this.ha.interactions;c.forEach(function(a){b.sa.push(a)});c.clear();a=dI(this.ha);a.yb()&&(this.l=a,this.l.dc(!1));this.ha.B.classList.add("olcs-hideoverlay");this.ha.A.classList.add("olcs-hideoverlay")}this.Xd.wg();c4(this)}else this.A&&(c=this.ha.interactions,this.sa.forEach(function(a){c.push(a)}),this.sa.length=0,this.ha.B.classList.remove("olcs-hideoverlay"),
this.ha.A.classList.remove("olcs-hideoverlay"),this.l&&(this.l.dc(!0),this.l=null)),this.Xd.Eg()};function HAa(a){a=T(a.ha);var b=rs(a);if(!qs(a)||isNaN(b[0])||isNaN(b[1]))throw Error("The OpenLayers map is not properly initialized: "+b+" / "+a.bb());};function d4(a,b){this.l=a;this.g=a.camera;this.ha=b;this.u=this.o=0;this.K=null;this.A=this.I=!1;this.P=new CI(this.Eg,100,this)}w(d4,J3);J3=d4;g=d4.prototype;g.kc=function(){return this.A};g.Za=function(a){(this.A=a)&&this.wg()};g.Ff=function(){return this.g.positionCartographic.height};g.Y=function(){var a=this.g.computeViewRectangle();return a?[a.west,a.south,a.east,a.north].map(Cesium.Math.toDegrees):void 0};g.Cp=function(){return this.g.heading};
g.et=function(a){this.g.setView({US:this.g.positionCartographic,orientation:{heading:a,pitch:this.g.pitch,roll:this.g.roll}})};g.Qp=function(){return this.o};g.tl=function(a){this.o=a;this.Dl()};g.pz=function(a){this.g&&this.g.rotateLeft(a)};g.qz=function(a){this.g&&this.g.rotateRight(a)};g.rz=function(a){this.g&&this.g.rotateUp(a)};g.oz=function(a){this.g&&this.g.rotateDown(a)};g.sz=function(){this.g&&this.g.twistLeft(void 0)};g.uz=function(){this.g&&this.g.twistRight(void 0)};
g.nz=function(){this.A&&this.g&&this.g.cancelFlight()};
g.Cn=function(a){if(this.A){var b=null!=a.duration?a.duration:1E3,c="smooth"===a.flightMode?Cesium.EasingFunction.LINEAR_NONE:void 0;if(a.center){var d=Ll(a.center,S,"EPSG:4326");var e=new Cesium.Cartographic(Of(d[0]),Of(d[1]))}else e=this.g.positionCartographic.clone();d=null!=a.altitude?a.altitude:this.Ff();d=Math.min(d,this.l.screenSpaceCameraController.maximumZoomDistance);var f=null!=a.heading?Of(a.heading):this.g.heading,h=null!=a.pitch?Of(a.pitch):this.g.pitch,k=null!=a.roll?Of(a.roll):this.g.roll;
a.positionCamera?(e.height=d,this.g.flyTo({destination:Cesium.Ellipsoid.WGS84.cartographicToCartesian(e),duration:b/1E3,easingFunction:c,orientation:{heading:f,pitch:h,roll:k}})):(e.height=0,e=new Cesium.BoundingSphere(Cesium.Ellipsoid.WGS84.cartographicToCartesian(e)),a=new Cesium.HeadingPitchRange(f,h,null!=a.range?a.range:d),this.g.flyToBoundingSphere(e,{offset:a,duration:b/1E3,easingFunction:c}))}};
g.Ti=function(){var a,b=document.querySelector("canvas.webgl-canvas");b&&(a=this.g.pickEllipsoid(new Cesium.Cartesian2(b.width/2,b.height/2)));return a?Cesium.Cartesian3.distance(this.g.positionWC,a):this.Ff()};
function IAa(a,b){var c=Cesium.SceneTransforms.wgs84ToWindowCoordinates(a.l,b);if(c&&0<c.x&&0<c.y){var d=document.querySelector("canvas.webgl-canvas");if(c.x<=d.width&&c.y<=d.height){var e=Cesium.Cartesian3.distance(b,a.g.positionWC);(b=a.g.pickEllipsoid(c))&&Cesium.Cartesian3.distance(b,a.g.positionWC)<e&&(e=void 0)}}return e}g.Jo=function(a){var b=this.Ti();a=b-b*a;var c=this.l.screenSpaceCameraController,d=c.maximumZoomDistance;a<b-d&&(a=b-d);Math.abs(a)>c.minimumZoomDistance&&this.g.zoomIn(a)};
g.Dl=function(){var a=T(this.ha);if(a){var b=rs(a);if(b){b=Ll(b,S,"EPSG:4326");b=new Cesium.Cartographic(Of(b[0]),Of(b[1]));if(this.l.globe){var c=this.l.globe.getHeight(b);b.height=null!=c?c:0}b=Cesium.Ellipsoid.WGS84.cartographicToCartesian(b);a={pitch:this.o-Cesium.Math.PI_OVER_TWO,heading:-ss(a),roll:void 0};this.g.setView({destination:b,orientation:a});this.g.moveBackward(this.u);this.Ul(!0)}}};
g.wg=function(){var a=T(this.ha);if(this.A&&a){var b=rs(a);b&&(Ll(b,S,"EPSG:4326"),a=a.bb()||0,this.u=this.Rf(a,0),this.Dl())}};
g.Eg=function(){var a=T(this.ha);if(this.A&&a){this.I=!0;var b=Cesium.Ellipsoid.WGS84,c=this.l,d=Tza(c),e=d;e||(e=c.globe,c=this.g.positionCartographic.clone(),e=e.getHeight(c),c.height=null!=e?e:0,e=Cesium.Ellipsoid.WGS84.cartographicToCartesian(c));this.u=Cesium.Cartesian3.distance(e,this.g.position);c=b.cartesianToCartographic(e);Sq(a,Ll([180*(c?c.longitude:0)/Math.PI,180*(c?c.latitude:0)/Math.PI],"EPSG:4326",S));c=this.Eh(this.u,0);Tq(a,a.constrainResolution(c,0,0));if(d){e=this.g.position;c=
new Cesium.Cartesian3;b.geocentricSurfaceNormal(d,c);b=new Cesium.Cartesian3;Cesium.Cartesian3.subtract(e,d,b);Cesium.Cartesian3.normalize(b,b);e=this.g.up;var f=this.g.right,h=new Cesium.Cartesian3(-d.y,d.x,0);f=Cesium.Cartesian3.angleBetween(f,h);d=Cesium.Cartesian3.cross(d,e,new Cesium.Cartesian3).z;us(a,0>d?f:-f);a=Math.acos(Cesium.Cartesian3.dot(c,b));this.o=isNaN(a)?0:a}else us(a,this.g.heading),this.o=-this.g.pitch+Math.PI/2;this.I=!1}};
g.Ul=function(a){var b=this.K,c=this.g.viewMatrix;b&&Cesium.Matrix4.equalsEpsilon(b,c,1E-5)||(this.K=c.clone(),!0!==a&&this.P.Pd())};g.Rf=function(a,b){var c=this.l.canvas,d=this.g.frustum.fovy,e=ml(T(this.ha).Ra());return a*(c.clientHeight||300)*e*Math.cos(Math.abs(b))/2/Math.tan(d/2)};g.Eh=function(a,b){var c=this.l.canvas,d=this.g.frustum.fovy,e=ml(T(this.ha).Ra());return 2*a*Math.tan(d/2)/e/Math.cos(Math.abs(b))/c.clientHeight};
g.ra=function(){var a=this.g.positionCartographic,b=Oq(180*a.latitude/Math.PI)||0,c=Oq(180*a.longitude/Math.PI)||0;a=a.height;var d=T(this.ha).Ra(),e=Wn(this.ha,a);d=Rn(e,d,1);return{center:[c,b],altitude:a,heading:180*this.g.heading/Math.PI,roll:180*this.g.roll/Math.PI,tilt:me(180*this.g.pitch/Math.PI,-90,0)+90,zoom:d}};
g.restore=function(a){var b=new Cesium.Cartographic(oe(a.center[0]),oe(a.center[1]),a.altitude);this.g.setView({destination:Cesium.Ellipsoid.WGS84.cartographicToCartesian(b),orientation:{heading:oe(a.heading),pitch:oe(a.tilt-90),roll:oe(a.roll)}})};yt.prototype.u=void 0;yt.prototype.G=void 0;function JAa(){var a=L.s().g;(a=a?e4(a):void 0)&&this.u&&(a.primitives.remove(this.u),this.u=void 0)}
function KAa(a,b){if(L.s().Qa()){this.G||(this.G=new Cesium.ColorGeometryInstanceAttribute(Cesium.Color.byteToFloat(this.color[0]),Cesium.Color.byteToFloat(this.color[1]),Cesium.Color.byteToFloat(this.color[2]),this.color[3]));var c=L.s().g;c=c?e4(c):void 0;a=Ml(a,T(this.X()).Ra());b=Ml(b,T(this.X()).Ra());c&&a&&b&&(this.u&&c.primitives.remove(this.u),a=this.A.Z().getCoordinates()[0].map(Hv),b=new Cesium.PolylineColorAppearance,this.u=new Cesium.Primitive({asynchronous:!1,geometryInstances:new Cesium.GeometryInstance({id:"geometryOutline",
geometry:new Cesium.PolylineGeometry({positions:t3(a),vertexFormat:b.vertexFormat,width:2}),attributes:{color:this.G}}),appearance:b}),c.primitives.add(this.u),N.dispatchEvent("map:glRepaint"))}};hu.prototype.B=void 0;hu.prototype.G=void 0;hu.prototype.u=void 0;hu.prototype.I=void 0;function LAa(){var a=L.s().g;if(a=a?e4(a):void 0)this.B&&a.primitives.remove(this.B),this.G&&a.primitives.remove(this.G),this.u=this.G=this.B=void 0}
function MAa(a,b){if(L.s().Qa()){this.I||(this.I=new Cesium.ColorGeometryInstanceAttribute(0,1,1,1));var c=L.s().g;c=c?e4(c):void 0;a=Ml(a,T(this.X()).Ra());b=Ml(b,T(this.X()).Ra());if(c&&a&&b&&this.distance){this.G||(this.G=new Cesium.LabelCollection,c.primitives.add(this.G));this.u||(this.u=this.G.add(),this.u.show=!1,this.u.fillColor=Cesium.Color.YELLOW,this.u.scale=.6);this.B&&c.primitives.remove(this.B);a=Cesium.Cartesian3.fromDegrees(a[0],a[1]);b=new Cesium.PolylineColorAppearance;var d=Cesium.Primitive,
e=Cesium.GeometryInstance,f=Cesium.PolylineGeometry,h=this.distance;h=Cesium.EllipseGeometryLibrary.computeEllipsePositions({center:a,semiMajorAxis:h,semiMinorAxis:h,granularity:Cesium.Math.RADIANS_PER_DEGREE,rotation:0},!1,!0).outerPositions;for(var k=[];0<h.length;){var l=kb(h,0,3);l=new Cesium.Cartesian3(l[0],l[1],l[2]);k.push(l)}0<k.length&&k.push(k[0]);this.B=new d({asynchronous:!1,appearance:b,geometryInstances:new e({geometry:new f({positions:k,vertexFormat:b.vertexFormat,width:2}),attributes:{color:this.I}})});
b=au.s();this.u.text=du(b,this.distance,3);this.u.position=a;this.u.show=!0;c.primitives.add(this.B);N.dispatchEvent("map:glRepaint")}}};Gv.prototype.aa=void 0;Gv.prototype.G=void 0;function NAa(){var a=L.s().g;if(a=a?e4(a):void 0)this.aa=void 0,this.G&&(a.primitives.remove(this.G),this.G=void 0)}
function OAa(){if(L.s().Qa()){this.aa||(this.aa=v3(this.color));var a=L.s().g;a=a?e4(a):void 0;var b=this.g.Z().getCoordinates().map(Hv);a&&0<b.length&&(this.G?this.G.removeAll():(this.G=new Cesium.PolylineCollection,a.primitives.add(this.G)),this.G.add({asynchronous:!1,show:!0,material:Cesium.Material.fromType(Cesium.Material.ColorType,{color:this.aa}),positions:Cesium.PolylinePipeline.generateCartesianArc({positions:t3(b)}),width:2}),N.dispatchEvent("map:glRepaint"))}};XT.prototype.A=void 0;function PAa(){NAa.call(this);var a=L.s().g;(a=a?e4(a):void 0)&&this.A&&(a.primitives.remove(this.A),this.A=null)}
function QAa(){OAa.call(this);if(L.s().Qa()){var a=L.s().g,b=a?e4(a):void 0;a=this.coords.map(Hv);if(b&&1<a.length){var c=yP(L.s());this.A||(this.A=new Cesium.LabelCollection,b.primitives.add(this.A));b=this.A.length===this.o.length?this.A.get(this.A.length-1):this.A.add();var d=this.o.length-1;b.show=!1;b.eyeOffset=new Cesium.Cartesian3(0,0,-(c.Ti()/5));b.font=Fz(14);b.style=Cesium.LabelStyle.FILL_AND_OUTLINE;b.outlineWidth=2;b.outlineColor=new Cesium.Color(0,0,0);b.pixelOffset=new Cesium.Cartesian2(4,
0);b.position=Cesium.Cartesian3.fromDegrees(a[d][0],a[d][1]);b.text=ZT(this,d);b.show=!0}}};function RAa(a,b,c){var d=new Image;d.onload=function(){c.resolve(d)};d.onerror=function(a){c.reject(a)};b&&(d.crossOrigin=kA(a));d.src=a}
function SAa(){if(void 0===window.Cesium)throw Error("Cesium has not been loaded!");Cesium.Resource._Implementations.createImage=RAa;Cesium.Resource.prototype._makeRequest=function(a){var b=new Ni(a.url||this.url),c=a.headers||this.headers;c&&(b.O=c);a.responseType&&(b.B=a.responseType);var d=Cesium.when.defer();Xc(Zc(Xi(b).then(function(a){d.resolve(a)}),function(a){d.reject(a)}),function(){N.dispatchEvent("map:glRepaint")});return d.promise};Cesium.Sj=function(a,b,c){this.g=a;this.key=b;this.color=
c};Cesium.defineProperties(Cesium.Sj.prototype,{object:{get:function(){return this.g._pickObjects[this.key]},set:function(a){this.g._pickObjects[this.key]=a}}});Cesium.Sj.prototype.destroy=function(){this.g._pickObjects[this.key]=void 0;this.g=null};Cesium.Sj.prototype.destroy=Cesium.Sj.prototype.destroy;Cesium.Context.prototype.g=function(){this._pickObjects=Yh(this._pickObjects)};Cesium.Context.prototype.j=function(a){if(!Cesium.defined(a))throw new Cesium.DeveloperError("object is required.");
++this._nextPickColor[0];var b=this._nextPickColor[0];if(0===b)throw new Cesium.RuntimeError("Out of unique Pick IDs.");this._pickObjects[b]=a;return new Cesium.Sj(this,b,Cesium.Color.fromRgba(b))};Cesium.Context.prototype.createPickId=Cesium.Context.prototype.j};function f4(a,b){WH.call(this,a);this.A=b}w(f4,WH);f4.prototype.J=function(){f4.C.J.call(this);this.A=void 0};f4.prototype.hp=function(a,b){return new a(b,this.map,this.A)};
f4.prototype.zo=function(a){var b=Pv(a).g;if(0<b.length){var c=0,d=0;if(b[0]instanceof Uz)c=YH(L.s(),Uz),d=TAa(this,a);else if(b[0]instanceof Vz){d=c=YH(L.s(),Vz);for(var e=0,f=Ov(this.map).g,h=f.length;h--&&f[h]!=a;){var k=Pv(f[h]).g;0<k.length&&k[k.length-1]instanceof Vz&&(e+=k.length)}d=d-e-b.length+1}else b[0]instanceof sH&&(c=YH(L.s(),sH),d=TAa(this,a));a=0;for(e=b.length;a<e;a++)f=b[a].D(),(f=this.g[f])&&(d=f.li(d,c));N.dispatchEvent("map:glRepaint")}};
function TAa(a,b){var c=0,d=Ov(a.map).g;b=d.indexOf(b);if(0<b)for(;b--;){var e=Pv(d[b]).g;if(0<e.length&&(e=e[e.length-1],e instanceof sH||e instanceof Uz)&&(e=e.D(),e=a.g[e])){c=UAa(e)+1;break}}return c};function g4(){Mq.call(this);this.log=VAa;this.Lb=void 0;this.o=!1;this.j=[];this.g=void 0;this.l={}}w(g4,Mq);var VAa=E.V("plugin.cesium.CesiumRenderer");function e4(a){return a.Lb?a.Lb.g:void 0}g=g4.prototype;g.tg=function(){return!!this.Lb};
g.Bn=function(){return!this.Lb&&this.map?new Kc(function(a,b){$za().then(function(){try{SAa();w3.init();yt.prototype.Dr=JAa;yt.prototype.Er=KAa;hu.prototype.Fr=LAa;hu.prototype.Gr=MAa;Gv.prototype.mn=NAa;Gv.prototype.nn=OAa;XT.prototype.mn=PAa;XT.prototype.nn=QAa;h4(this,"cesium",dAa);h4(this,"cesium-ion",eAa);h4(this,"wms",fAa);this.Lb=new b4({NS:d4,createSynchronizers:this.sD.bind(this),map:this.map,time:bAa});qD(this.Lb.j,"webgl-canvas");var c=this.Lb,d=this.pO;c.Ca!==d&&(c.Ca=d,c4(c));var e=this.Lb.g;
e.globe.enableLighting=!!M.get("os.map.enableLighting",!1);e.camera.frustum.fov=Cesium.Math.PI_OVER_THREE;var f=M.get(["bgColor"],"#000000");e.globe.baseColor=Cesium.Color.fromCssColorString(f);Cesium.TerrainProvider.g=qd?.05:.25;this.Co();this.lo(M.get("os.map.fogEnabled",!0));var h=M.get("os.map.fogDensity",.5);0!=h&&.05>h&&(h=.5);this.Zn(h);var k=this.Lb.Xd=new d4(e,this.map),l=e.screenSpaceCameraController,m=Sn(0,S);l.maximumZoomDistance=k.Rf(m,0);l.lookEventTypes=[{eventType:Cesium.CameraEventType.RIGHT_DRAG,
modifier:Cesium.KeyboardEventModifier.SHIFT}];l.enableLook=!0;l.tiltEventTypes=[Cesium.CameraEventType.MIDDLE_DRAG,Cesium.CameraEventType.RIGHT_DRAG];l.rotateEventTypes=[Cesium.CameraEventType.LEFT_DRAG];l.zoomEventTypes=[Cesium.CameraEventType.WHEEL,Cesium.CameraEventType.PINCH,{eventType:Cesium.CameraEventType.WHEEL,modifier:Cesium.KeyboardEventModifier.CTRL}];l.maximumMovementRatio=.02;l.inertiaSpin=0;l.inertiaTranslate=0;l.inertiaZoom=0;var n=this.Lb;n.Ia||(n.Ia=new I3(n));Mq.prototype.Bn.call(this);
a()}catch(p){E.error(this.log,"Failed to create 3D view!",p),b()}},b,this)},this):Sc()};g.Za=function(a){g4.C.Za.call(this,a);if(this.Lb)if(this.Lb.Za(a),a){if(a=this.Lb.g)this.j.push(a.camera.moveStart.addEventListener(this.Dw.bind(this,!0))),this.j.push(a.camera.moveEnd.addEventListener(this.Dw.bind(this,!1)))}else{a=0;for(var b=this.j.length;a<b;a++)this.j[a]();this.j.length=0}};g.mz=function(){return this.Lb?this.Lb.Xd:void 0};
g.getCoordinateFromPixel=function(a){if(this.Lb&&a&&2==a.length&&!isNaN(a[0])&&!isNaN(a[1])){a=new Cesium.Cartesian2(a[0],a[1]);var b=this.Lb.g;if(a=b&&b.camera?b.camera.pickEllipsoid(a):void 0)return a=b.globe.ellipsoid.cartesianToCartographic(a),[Cesium.Math.toDegrees(a.longitude),Cesium.Math.toDegrees(a.latitude)]}return null};
g.getPixelFromCoordinate=function(a){return this.Lb&&a&&2<=a.length&&!isNaN(a[0])&&!isNaN(a[1])?(a=s3(a),(a=Cesium.SceneTransforms.wgs84ToWindowCoordinates(this.Lb.g,a))?[a.x,a.y]:null):null};
g.lz=function(a,b,c){if(this.Lb){a=new Cesium.Cartesian2(a[0],a[1]);var d=this.Lb.g;if(c&&c.drillPick)var e=d.drillPick(a);else{var f=d.pick(a);f&&(e=[f])}if(e&&0<e.length)for(a=0,d=e.length;a<d;a++){f=e[a];var h=f.primitive.olFeature;f=f.primitive.olLayer;if(h&&f){var k=c?c.layerFilter:void 0;if(!k||k(f))if(h=b(h,f)||null)return h}}}return null};g.renderSync=function(){if(this.Lb){var a=this.Lb.g;a&&(a.initializeFrame(),a.forceRender(bAa()))}};
g.us=function(a){if(this.Lb){var b=this.Lb.g;b&&b.screenSpaceCameraController&&(b.screenSpaceCameraController.enableInputs=a)}};g.ts=function(a){this.Lb&&(this.Lb.g.globe.baseColor=Cesium.Color.fromCssColorString(a),N.dispatchEvent("map:glRepaint"))};g.lo=function(a){var b=this.Lb?this.Lb.g:void 0;b&&b.fog.enabled!=a&&(b.fog.enabled=a,N.dispatchEvent("map:glRepaint"))};g.Zn=function(a){var b=this.Lb?this.Lb.g:void 0;b&&(a=me(3E-4*a,0,3E-4),b.fog.density!=a&&(b.fog.density=a),N.dispatchEvent("map:glRepaint"))};
g.rt=function(a){var b=this.Lb?this.Lb.g:void 0;b&&(b.globe.enableLighting=a,N.dispatchEvent("map:glRepaint"))};g.mo=function(a){if(this.Lb){var b=this.Lb.g;b&&((a=a?this.g:void 0)||(A3||void 0===window.Cesium||(A3=new Cesium.EllipsoidTerrainProvider),a=A3),a&&(b.terrainProvider=a),N.dispatchEvent("map:glRepaint"))}};function h4(a,b,c){b=b.toLowerCase();b in a.l?E.error(a.log,'The terrain provider type "'+b+'" already exists!'):a.l[b]=c}g.bm=function(){WAa(this);g4.C.bm.call(this)};
g.Co=function(){WAa(this);var a=M.get("os.map.terrainOptions");if(a){var b=a.type;if(b&&b in this.l){if(a.url){var c=a.url;if(c&&kA(c)===lA){c=new Xg(c);var d=c.o;if(!d){var e=c.l;e||(e=(new Xg(window.location)).l);d="https"===e?443:"http"===e?80:d}d&&Cesium.TrustedServers.add(c.j,d)}}this.g=this.l[b](a);this.g.errorEvent.addEventListener(this.Gx,this)}else b?b in this.l||E.error(this.log,"Unknown terrain provider type: "+b):E.error(this.log,"Terrain provider type not configured.")}a=!!M.get("os.map.enableTerrain",
!1);this.mo(a)};function WAa(a){a.g&&(a.g.errorEvent.removeEventListener(a.Gx,a),a.g=void 0)}g.Gx=function(a){E.error(this.log,"Terrain provider initialization error: "+a.message);rj(tj,"Terrain provider failed to initialize and will be disabled. Please see the log for more details.",Qh);this.bm()};g.sD=function(a,b){this.cf||(this.cf=new f4(a,b));return[this.cf]};
g.Dw=function(a){if(this.map){var b=T(this.map);if(a&&!this.o)this.o=!0,ts(b,1,1);else if(!a&&this.o&&(this.o=!1,ts(b,1,-1),this.cf)){a=this.cf;for(var c in a.g)a.g[c].vs()}}};g.Ru=function(){return["clampToGround",Nq,"relativeToGround"]};b4.prototype.Qq=function(){var a=this.j.clientWidth,b=this.j.clientHeight;0===a||0===b||a===this.aa&&b===this.pa&&!this.Ea||null!=this.pb||(!0!==this.G&&(this.G=!0,c4(this)),this.pb=setTimeout(function(){var c=1;o3()||(c*=window.devicePixelRatio||1);this.Ea=!1;this.aa=a;this.pa=b;a*=c;b*=c;this.j.width=a;this.j.height=b;this.g.camera.frustum.aspectRatio=a/b;this.pb=void 0;!1!==this.G&&(this.G=!1,c4(this))}.bind(this),100))};
b4.prototype.Za=function(a){this.o!==a&&(this.o=a,this.u.style.visibility=this.o?"visible":"hidden",this.o?(this.A&&(a=this.ha.interactions,a.forEach(function(a){F(a,"os.I3DSupport")&&a.vc()||a.setActive(!1)}),a=dI(this.ha),a.yb()&&(this.l=a,this.l.dc(!1))),this.Xd.Za(!0),this.Xd.wg(),c4(this)):(this.Xd.Eg(),this.Xd.Za(!1),this.A&&(a=this.ha.interactions,a.forEach(function(a){F(a,"os.I3DSupport")&&a.vc()||a.setActive(!0)}),null!==this.l&&(this.l.dc(!0),this.l=null))))};(function(){var a=I3.prototype.o;I3.prototype.o=function(){N.H("map:glRepaint",this.g,!1,this);vg.s().H("timeline.show",this.g,!1,this);this.j.postUpdate.addEventListener(this.G,this);a.call(this)};var b=I3.prototype.B;I3.prototype.B=function(){N.M("map:glRepaint",this.g,!1,this);vg.s().M("timeline.show",this.g,!1,this);this.j.postUpdate.removeEventListener(this.G,this);b.call(this)};var c=I3.prototype.g,d=0;I3.prototype.G=function(){1E3>Ia()-d&&this.j.requestRender()};I3.prototype.g=function(a){if(!(a&&
a.type&&-1<a.type.indexOf("move"))||a.buttons||a.touches&&a.touches.length||a.pointerId&&0<a.pressure)c.call(this),d=Ia()}})();function i4(a,b,c){gI.call(this,a,b);this.scene=c}w(i4,gI);function XAa(a,b,c){this.log=YAa;this.A=!1;this.billboards=new Cesium.BillboardCollection({scene:a});this.labels=new Cesium.LabelCollection({scene:a});this.l=new Cesium.PolylineCollection;this.layer=b;this.projection=c;this.featureToCesiumMap={};this.j={};this.o={};this.ed={};this.scene=a;this.u=new CI(this.oH,500,this);this.g=new Cesium.PrimitiveCollection;this.g.add(this.billboards);this.g.add(this.labels);this.g.add(this.l)}var YAa=E.V("plugin.cesium.VectorContext");g=XAa.prototype;
g.dispose=function(){if(!this.Xa()){z(this.u);this.g.destroyPrimitives=!0;try{this.billboards&&(j4(this,this.billboards),this.g.remove(this.billboards),this.billboards=null),this.labels&&(j4(this,this.labels),this.g.remove(this.labels),this.labels=null),this.l&&(j4(this,this.l),this.g.remove(this.l),this.l=null),j4(this,this.g)}catch(a){E.error(this.log,"Failed disposing vector context",a)}finally{this.A=!0}}};g.Xa=function(){return this.A};
g.Fj=function(){this.featureToCesiumMap=Yh(this.featureToCesiumMap);this.j=Yh(this.j);this.o=Yh(this.o);this.ed=Yh(this.ed);this.scene.context.g()};function k4(a,b,c,d){if(b&&(b.olLayer=a.layer,b.olFeature=c,b.olGeometry=d,b instanceof Cesium.PrimitiveCollection))for(var e=0,f=b.length;e<f;e++){var h=b.get(e);h&&k4(a,h,c,d)}}
function j4(a,b){if(b&&(b.olLayer=void 0,b.olFeature=void 0,b.olGeometry=void 0,b instanceof Cesium.PrimitiveCollection||b instanceof Cesium.BillboardCollection||b instanceof Cesium.LabelCollection))for(var c=0,d=b.length;c<d;c++){var e=b.get(c);e&&j4(a,e)}}g.oH=function(){this.billboards._billboardsToUpdate.length=this.billboards.length};g.No=function(a,b,c){var d=J(c),e=this.o[d];e&&l4(this,e);b.Xa()||(a=this.labels.add(a),this.o[d]=a,m4(this,b,a),k4(this,a,b,c))};
function l4(a,b){var c=J(b.olGeometry);b instanceof Cesium.Billboard?(a.billboards.remove(b),a.j[c]=void 0):b instanceof Cesium.Label?(a.labels.remove(b),a.o[c]=void 0):(b instanceof Cesium.Polyline?a.l.remove(b):a.g.remove(b),a.j[c]=void 0);b.olFeature&&(c=a.featureToCesiumMap[b.olFeature.id])&&mb(c,b);j4(a,b)}function m4(a,b,c){b=b.id;var d=a.ed[b];d=void 0!==d?d:c.show;c.show=d;a.featureToCesiumMap[b]=a.featureToCesiumMap[b]||[];a.featureToCesiumMap[b].push(c);a.ed[b]=d};function ZAa(a){this.scene=a;this.A=this.u=null;this.g=Cesium.HeightReference.NONE;this.j=new Cesium.Cartesian3(0,0,0);this.l=new Cesium.Cartesian3(0,0,1E4);this.o={}}var $Aa={flat:!0,renderState:{depthTest:{enabled:!0}}};function n4(a){var b=S;if(a.u!==b){var c=Cl("EPSG:4326");a.A=Nl(c,b)?null:Ol(b,c);a.u=b}return a.A}function o4(a,b,c){return new Cesium.GeometryInstance({id:a,geometry:b,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(c)}})}
function p4(a,b,c,d){var e=fi($Aa);null!=c&&(e.renderState.lineWidth=me(c,Cesium.ContextLimits.minimumAliasedLineWidth,Cesium.ContextLimits.maximumAliasedLineWidth));c=null!=c?"geometryOutline":"geometry";a=d?d(c,a,b):o4(c,a,b);e=new Cesium.PerInstanceColorAppearance(e);return new Cesium.Primitive({geometryInstances:a,appearance:e})}function q4(a,b){var c=a.lb()?a.lb().Ja():null;a=a.kb()?a.kb().Ja():null;var d="black";a&&b?d=a:c&&(d=c);return v3(d)}
function r4(a){return Math.max(1,a.kb()&&a.kb().g||3)}function aBa(a,b,c,d){var e=r4(c);d=d.layer.Nb();var f=new Cesium.PrimitiveCollection;f.olLineWidth=e;if(a){var h=q4(c,!1);h.alpha*=d;f.add(p4(a,h))}b&&(a=q4(c,!0),a.alpha=null!=c.kb()?a.alpha*d:0,f.add(p4(b,a,e)));return f}
function bBa(a,b,c,d,e){var f=d.Z();f instanceof yo&&(c=f);d=d.mb();f=c.Tb;if(null===b.geomRevision||b.geomRevision!==f){var h=n4(a);a:{var k=c;switch(k.T()){case "Point":k=k.flatCoordinates.slice();break a;case "MultiPoint":k=k.flatCoordinates.slice(0,2);break a;default:k=dl(k.Y())}}if(k){h&&(k=h(k));if(c instanceof zo){var l=Bo(c);h&&(l=h(l,void 0,l.length));k[2]=l[2]||0}b.position=s3(k);b.geomRevision=f}}f=void 0;h=e.layer.Nb();d.lb()&&(b.fillColor=q4(d,!1),b.fillColor.alpha*=h,f=Cesium.LabelStyle.FILL);
d.kb()&&(b.outlineWidth=r4(d),b.outlineColor=q4(d,!0),b.outlineColor.alpha*=h,f=Cesium.LabelStyle.OUTLINE);d.lb()&&d.kb()&&(f=Cesium.LabelStyle.FILL_AND_OUTLINE);f&&(b.style=f);if(d.g){switch(d.g){case "center":var m=Cesium.HorizontalOrigin.CENTER;break;case "left":m=Cesium.HorizontalOrigin.LEFT;break;case "right":m=Cesium.HorizontalOrigin.RIGHT}b.horizontalOrigin=m}if(d.l){switch(d.l){case "top":var n=Cesium.VerticalOrigin.TOP;break;case "middle":n=Cesium.VerticalOrigin.CENTER;break;case "bottom":n=
Cesium.VerticalOrigin.BOTTOM;break;case "alphabetic":n=Cesium.VerticalOrigin.TOP;break;case "hanging":n=Cesium.VerticalOrigin.BOTTOM}b.verticalOrigin=n}m=d.mb()||"";b.text=m.replace(/[^\x0a\x0d\x20-\x7e\xa0-\xff]/g,"");b.font=d.Ae()||Fz();b.pixelOffset=new Cesium.Cartesian2(d.ng,d.o);if(c=e.j[J(c)]||null)b.show=c.show;e.scene&&(b.eyeOffset=a.l);b instanceof Cesium.Label&&(b.dirty=!1)}
function cBa(a,b,c,d){var e=n4(a);a=b.getCoordinates();if(2>a.length)return null;e&&(a=a.map(function(a){return e(a,void 0,a.length)}));b=b.get("extrude")?"WallGeometry":"PolylineGeometry";a=t3(a);return dBa(a,c,d,b)}
function dBa(a,b,c,d){var e=d||"PolylineGeometry",f=new Cesium.PolylineColorAppearance;d=r4(c);c=q4(c,!0);c.alpha*=b.layer.Nb();a=new Cesium[e]({positions:a,vertexFormat:f.vertexFormat,width:d});a=o4("geometryOutline",a,c);f=new Cesium.Primitive({geometryInstances:a,appearance:f});f.olLineWidth=d;return f}function s4(a,b,c,d,e,f){f?eBa(a,c,d,e,f):(f={},eBa(a,c,d,e,f),a=J(c),(e=d.j[a])&&l4(d,e),b.Xa()||(f=d.l.add(f),d.j[a]=f,m4(d,b,f),k4(d,f,b,c)))}
function eBa(a,b,c,d,e){var f=b.Tb;if(e.geomRevision!=f){var h=b.getCoordinates();h.length&&b instanceof Sx&&(h=h[0]);var k=n4(a);k&&(h=h.map(function(a){return k(a,void 0,a.length)}));e.positions=t3(h);e.geomRevision=f}a=r4(d);d=q4(d,!0);d.alpha*=c.layer.Nb();e.material=Cesium.Material.fromType(Cesium.Material.ColorType,{color:d});e.width=a;e instanceof Cesium.Polyline&&(e.dirty=!1)}function fBa(a,b,c){var d=a.slice();d[2]=0;a=t3([a,d]);return dBa(a,c,b)}
function gBa(a,b,c,d,e){var f=null;if(F(d.layer,"os.layer.ILayer")){var h=d.layer.D();if((h=vz(wz.s(),h))&&h.showGroundRef&&(c=c.center,c[2])){f=c.slice();f[2]=0;h=[c,f];if(f=b.get("_groundRefGeom")){var k=f.getCoordinates();(1E-9<Math.abs(k[0][0]-c[0])||1E-9<Math.abs(k[0][1]-c[1]))&&f.ic(h)}else f=new Jo(h);b.set("_groundRefGeom",f,!0)}}f&&(c=d.j[J(f)]||null,s4(a,b,f,d,e,c))}function hBa(a,b){a=q4(a,!0);a.alpha=.3*b.layer.Nb();return a}
function iBa(a){var b=new Cesium.Color(1,1,1,1);b.alpha=.75*a.layer.Nb();return b}function jBa(a,b,c,d,e){var f=r4(c),h=new Cesium.PrimitiveCollection;h.olLineWidth=f;c=hBa(c,d);d=iBa(d);h.add(p4(a,c,void 0,e));h.add(p4(b,d,1,e));return h}
function kBa(a,b,c){var d=a.center,e=s3(d),f=d[2]||void 0,h=a.B,k=a.G;a=Cesium.Math.toRadians(90+a.orientation);h=new Cesium.Cartesian3(h,k,k);k=new Cesium.HeadingPitchRoll(a,0,0);var l=Cesium.Transforms.headingPitchRollToFixedFrame(e,k,Cesium.Ellipsoid.WGS84,void 0,new Cesium.Matrix4);e=new Cesium.EllipsoidGeometry({radii:h});h=new Cesium.EllipsoidOutlineGeometry({radii:h,stackPartitions:2,slicePartitions:4});e=jBa(e,h,c,b,function(a,b,c){return new Cesium.GeometryInstance({id:"geometry"===a?"ellipsoid":
"ellipsoidOutline",geometry:b,modelMatrix:l,attributes:{color:Cesium.ColorGeometryInstanceAttribute.fromColor(c)}})});F(b.layer,"os.layer.ILayer")&&(h=b.layer,(h=vz(wz.s(),h.D()))&&h.showGroundRef&&f&&(b=fBa(d,c,b))&&e.add(b));return e}
function lBa(a,b){var c=n4(a);a=tp(b);for(b=0;b<a.length;++b){var d=a[b].getCoordinates(),e=a[b].Y();c&&(e=c(e),d=d.map(function(a){return c(a,void 0,a.length)}));if((d=t3(d))&&0<d.length)if(0==b)var f=d;else{var h=h||[];h.push(new Cesium.PolygonHierarchy(d))}}return f?new Cesium.PolygonHierarchy(f,h):null}
function mBa(a,b,c,d){var e=null,f=n4(a);var h=!!b.get("extrude");var k=b.clone();k.toLonLat();a:{if(k&&"Polygon"==k.T()&&(k=tp(k))&&1===k.length&&k[0]){k=$p(k[0].getCoordinates(),k[0].Y());break a}k=!1}if(k){a=tp(b)[0].getCoordinates();var l=0,m=0;if(a&&0<a.length)for(var n=0;n<a.length;n+=1)(k=a[n])&&2<k.length&&0!==k[2]&&(m++,l+=k[2]);a=l/m;a=isNaN(a)?0:a;b=tp(b)[0].Y();f&&(b=f(b));f=Cesium.Rectangle.fromDegrees(b[0],b[1],b[2],b[3]);d.lb()&&(e=new Cesium.RectangleGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,
rectangle:f,height:a,QS:!0,PS:!1,extrudedHeight:h?0:void 0}));h=new Cesium.RectangleOutlineGeometry({ellipsoid:Cesium.Ellipsoid.WGS84,rectangle:f,height:a,extrudedHeight:h?0:void 0})}else{f=lBa(a,b);if(!f)return null;d.lb()&&(e=new Cesium.PolygonGeometry({polygonHierarchy:f,perPositionHeight:!0,extrudedHeight:h?0:void 0}));h=new Cesium.PolygonOutlineGeometry({polygonHierarchy:f,perPositionHeight:!0,extrudedHeight:h?0:void 0})}return aBa(e,h,d,c)}
function t4(a,b,c,d){if(b.get("extrude")&&cq(b))return mBa(a,b,c,d);var e=lBa(a,b);if(!e)return null;var f=[e.positions];e.holes&&e.holes.forEach(function(a){f.push(a.positions)});var h=new Cesium.PolylineColorAppearance;a=r4(d);b=c.layer.Nb();var k=q4(d,!0);k.alpha=null!=d.kb()?k.alpha*b:0;c=new Cesium.PrimitiveCollection;c.olLineWidth=a;for(var l=0;l<f.length;++l){var m=new Cesium.PolylineGeometry({positions:f[l],vertexFormat:h.vertexFormat,width:a});m=o4("geometryOutline",m,k);m=new Cesium.Primitive({geometryInstances:m,
appearance:h});c.add(m)}d.lb()&&(e=new Cesium.PolygonGeometry({polygonHierarchy:e,perPositionHeight:!1,extrudedHeight:void 0}),d=q4(d,!1),d.alpha*=b,d=p4(e,d),c.add(d));return 1==c.length?(d=c.get(0),d.olLineWidth=a,d):c}function nBa(a,b){switch(b){case "relativeToGround":a.g=Cesium.HeightReference.RELATIVE_TO_GROUND;break;case "clampToGround":a.g=Cesium.HeightReference.CLAMP_TO_GROUND;break;default:a.g=Cesium.HeightReference.NONE}}
function u4(a,b,c,d,e,f){var h=e.Pa();if(h){var k=h.Fe();if(2>k){f instanceof Cesium.Billboard&&(f.dirty=!1);0==k&&h.load();var l=b.D();if(!a.o[l]){a.o[l]=!0;var m=h.Vh(function(){m&&sf(m);3>h.Fe()&&(!(f instanceof Cesium.Billboard)||d.billboards&&d.billboards.contains(f))&&u4(this,b,c,d,e,f);delete this.o[l]},a)}}else f?oBa(a,c,f,h,d.layer):pBa(a,b,c,d,h)}}
function pBa(a,b,c,d,e){var f=e.Pa(1);if(f instanceof HTMLCanvasElement||f instanceof Image||f instanceof HTMLImageElement)f={heightReference:a.g,show:null==d.ed[b.id]||d.ed[b.id]},oBa(a,c,f,e,d.layer),a=J(c),(e=d.j[a])&&l4(d,e),b.Xa()||(f=d.billboards.add(f),d.j[a]=f,m4(d,b,f),k4(d,f,b,c))}
function oBa(a,b,c,d,e){var f=b.Tb;if(null==c.geomRevision||c.geomRevision!=f){var h=n4(a);b=b.getCoordinates();b=h?h(b,void 0,b.length):b;c.position=s3(b);c.geomRevision=f}var k;d instanceof eA?(h=f=d.g.l||void 0,(b=d.Ja())&&(k=v3(b))):(h=d.Pa(1),f=d.id||J(h));if("string"===typeof h||h instanceof HTMLCanvasElement||h instanceof Image||h instanceof HTMLImageElement)c instanceof Cesium.Billboard?(c.setImage(f,h),c.pixelOffset.x=0,c.pixelOffset.y=0):(c.image=h,c.imageId=f,c.pixelOffset=new Cesium.Cartesian2(0,
0)),k=k||new Cesium.Color(1,1,1,1),k.alpha=e.Nb(),e=d.Nb(),null!=e&&(k.alpha*=e),c.color=k,e=d.j(),c.scale=null!=e?e:1,c.rotation=-d.l||0,c.alignedAxis=Cesium.Cartesian3.UNIT_Z,e=Cesium.HorizontalOrigin.CENTER,k=Cesium.VerticalOrigin.CENTER,f=c.pixelOffset,d instanceof eA&&(h=d.Ri(),d=d.Ef(),h&&d&&(f.x=Math.round(c.scale*(d[0]-h[0])),e=Cesium.HorizontalOrigin.RIGHT,f.y=Math.round(c.scale*(d[1]-h[1])),k=Cesium.VerticalOrigin.BOTTOM)),c.heightReference=a.g,c.horizontalOrigin=e,c.verticalOrigin=k,c.pixelOffset=
f,c instanceof Cesium.Billboard&&(c.dirty=!1)}
ZAa.prototype.B=function(a,b,c,d,e){if(e.ready)if(e.isDestroyed()||a.Xa())e.dirty=!0;else{e.Bo=0;for(var f in Xza)try{var h=Xza[f],k=e.getGeometryInstanceAttributes(h);if(k){var l=Yza.test(h),m=Zza.test(h);if(l)var n=m?iBa(d):hBa(c,d);else n=q4(c,m),!m||c&&c.kb()&&dz.stroke.color===c.kb().Ja()||c.kb()?n.alpha*=d.layer.Nb():n.alpha=0;n&&(k.color=Cesium.ColorGeometryInstanceAttribute.toValue(n,k.color))}}catch(p){}e.dirty=!1}else e.Bo=void 0!==e.Bo?e.Bo+1:1,20>e.Bo&&(a=Ga(this.B,a,b,c,d,e),(new Fh(a,
100,this)).start()),e.dirty=!1};
function qBa(a,b,c,d,e){switch(c.T()){case "MultiPoint":var f=kp(c);f.forEach(function(a){u4(this,b,a,d,e)},a);break;case "MultiLineString":f=Oo(c);if(b instanceof Ry)f.forEach(function(a){a&&s4(this,b,a,d,e)},a);else{var h=new Cesium.PrimitiveCollection;f.forEach(function(a){a&&(a=cBa(this,a,d,e))&&(h.add(a),h.olLineWidth=a.olLineWidth)},a);return h}break;case "MultiPolygon":f=yp(c);if((c=c.get("extrude"))&&c.length==f.length)for(var k=0;k<c.length;k++)f[k].set("extrude",c[k],!0);h=new Cesium.PrimitiveCollection;
f.forEach(function(a){a&&(a=t4(this,a,d,e))&&(h.add(a),h.olLineWidth=a.olLineWidth)},a);return h;default:c.T()}return null}
function rBa(a,b,c,d,e,f){if(f){var h=e.o[J(c)]||null;null==h?Hb(Tb(f.mb()))||(h={heightReference:a.g},bBa(a,h,c,f,e),e.No(h,b,c)):bBa(a,h,c,f,e)}if((f=e.j[J(c)]||null)&&null!=f.olLineWidth){h=c.get("_dirty");var k=r4(d);if(h||f.olLineWidth!=k){var l=f.show;l4(e,f);c.set("_dirty",!1);f=null}}h=c.T();c instanceof Sx&&(h="ellipse");if(f&&"GeometryCollection"!=h)sBa(a,b,c,d,e,f);else{switch(h){case "GeometryCollection":h=c.g;k=0;for(var m=h.length;k<m;k++){var n=h[k];n&&rBa(a,b,n,d,e)}break;case "Point":u4(a,
b,c,e,d);break;case "Circle":h=n4(a);a=Xo(c);f=a[2]||0;k=a.slice();k[0]+=Yo(c);h&&(a=h(a,void 0,a.length),k=h(k,void 0,k.length));a=s3(a);k=s3(k);k=Cesium.Cartesian3.distance(a,k);h=new Cesium.CircleGeometry({center:a,radius:k,height:f});a=new Cesium.CircleOutlineGeometry({center:a,radius:k,extrudedHeight:f,height:f});f=aBa(h,a,d,e);break;case "LineString":b instanceof Ry?s4(a,b,c,e,d):f=cBa(a,c,e,d);break;case "ellipse":f=e.layer;f=(f=vz(wz.s(),f.D()))&&f.showEllipsoids?kBa(c,e,d):t4(a,c,e,d);gBa(a,
b,c,e,d);break;case "Polygon":f=t4(a,c,e,d);break;case "MultiPoint":case "MultiLineString":case "MultiPolygon":f=qBa(a,b,c,e,d);break;case "LinearRing":throw Error("LinearRing should only be part of polygon.");default:throw Error("OL3 geometry type not handled : "+c.T());}f&&(null!=l&&(f.show=l),d=f,l=J(c),(a=e.j[l])&&l4(e,a),b.Xa()||(e.g.add(d),e.j[l]=d,m4(e,b,d),k4(e,d,b,c)))}}
function sBa(a,b,c,d,e,f){if(f instanceof Cesium.PrimitiveCollection){for(var h=0,k=f.length;h<k;h++)sBa(a,b,c,d,e,f.get(h));f.dirty=!1}else f instanceof Cesium.Billboard?u4(a,b,c,e,d,f):f instanceof Cesium.Polyline?s4(a,b,c,e,d,f):a.B(b,c,d,e,f);c instanceof Sx&&gBa(a,b,c,e,d)}
function tBa(a,b,c,d){var e=d.featureToCesiumMap[b.id];if(e)for(var f=0,h=e.length;f<h;f++)e[f].dirty=!0;e=[];var k,l,m;f=d.layer;h=b.Nd();void 0!==h&&(m=h.call(b,c));null==m&&(f=f.Nd())&&(m=f(b,c));void 0===m?m=null:m instanceof ds&&(m=[m]);for(c=0;c<m.length;c++)m[c].mb()?k||(k=m[c]):e.push(m[c]);if(e)for(k&&(c=b.get("_labelGeometry"))&&(l=b.get(c)),c=0,m=e.length;c<m;c++)if(f=e[c])if(h=(0,f.Re)(b)){var n=l&&l!=h?void 0:k;rBa(a,b,h,f,d,n);n&&(k=void 0)}if(a=d.featureToCesiumMap[b.id])for(b=a.length;b--;)a[b].dirty&&
l4(d,a[b])};function v4(a,b,c,d){i4.call(this,a,b,c);this.Ic=d||new ZAa(c);this.g=null;this.source=this.layer.N();this.source instanceof Rz&&nBa(this.Ic,this.source.Eb);this.j=this.Bi=1}w(v4,i4);var uBa=["labelVisibility","style"];g=v4.prototype;g.J=function(){vBa(this);this.source=null;v4.C.J.call(this)};
g.rc=function(){vBa(this);var a=this.Ic,b=this.layer,c=this.view,d=c.Ra();c=c.bb();if(null==d||void 0===c)throw Error("view not ready");d=new XAa(a.scene,b,d);b=b.N().La();for(var e=0,f=b.length;e<f;e++){var h=b[e];h&&tBa(a,h,c,d)}this.g=d;this.Ds();this.g&&(w4(this,this.source.La()),this.scene.primitives.add(this.g.g),H(this.layer,"change:visible",this.Ds,this),H(this.layer,"change:opacity",this.hx,this),H(this.layer,"propertychange",this.Dz,this),H(this.source,"changefeature",this.Cz,this),this.source instanceof
Rz?H(this.source,"propertychange",this.Fz,this):(H(this.source,"addfeature",this.Bz,this),H(this.source,"removefeature",this.Ez,this),H(this.source,"clear",this.Uo,this)))};g.reset=function(){this.source&&x4(this,this.source.La(),!0)};
function vBa(a){a.g&&(yf(a.layer,"change:visible",a.Ds,a),yf(a.layer,"change:opacity",a.hx,a),yf(a.layer,"propertychange",a.Dz,a),yf(a.source,"changefeature",a.Cz,a),yf(a.source,"propertychange",a.Fz,a),a.source instanceof Rz||(yf(a.source,"addfeature",a.Bz,a),yf(a.source,"removefeature",a.Ez,a),yf(a.source,"clear",a.Uo,a)),a.g.dispose(),a.scene.primitives.remove(a.g.g),a.g=null,N.dispatchEvent("map:glRepaint"))}g.Ds=function(){this.g&&this.layer&&(this.g.g.show=this.layer.yb(),N.dispatchEvent("map:glRepaint"))};
g.hx=function(){this.source&&y4(this,this.source.La())};g.Dz=function(a){try{var b=a.j}catch(c){return}this.source&&b&&-1<uBa.indexOf(b)&&(a=a.o||this.source.La(),y4(this,a))};g.Bz=function(a){this.cc(a.feature)};g.Ez=function(a){this.Bb(a.feature)};g.Cz=function(a){z4(this,a.feature)};g.Uo=function(){fc(this.g.featureToCesiumMap,function(a,b){this.Bb(b)},this)};
g.Fz=function(a){try{var b=a.j}catch(f){return}var c=this.source;switch(b){case KI:this.Uo();break;case QI:if(!c.Qc||!c.aa){var d=a.o;if(d){b=0;for(var e=d.length;b<e;b++)(a=d[b])&&!a.Xa()&&A4(this,a,!c.Xe(a))}}break;case RI:(a=a.o)&&fc(a,function(a,b){(b=c.Ad(b))&&A4(this,b,a)},this);break;case "altitude":this.source instanceof Rz&&(nBa(this.Ic,this.source.Eb),y4(this,c.La()));break;case SI:w4(this,c.La());break;case LI:if(d=a.o)for(b=0,e=d.length;b<e;b++)this.cc(d[b]);if(a=a.u){b=0;for(e=a.length;b<
e;b++)this.Bb(a[b]);this.g.Fj()}break;case PI:(d=a.u)&&wBa(this,d,!1);(a=a.o)&&wBa(this,a,!0);break;case MI:case NI:case OI:e=c.Jd.match(Cfa);d=a.o;e?x4(this,d):y4(this,d);b==OI&&(d=a.u,e?x4(this,d):y4(this,d));break;case TI:case UI:if(d=a.u,a=a.o,Yy.test(a)||Yy.test(d)||Xy.test(a)||Xy.test(d))d=c.La(),x4(this,d)}};
function z4(a,b){if(a.view&&a.g&&a.source&&null!=a.source.Uc[b.ma]){var c=a.view.bb();null!=c&&(tBa(a.Ic,b,c,a.g),!(a.source instanceof Rz)||a.source.Qc&&a.source.aa||w4(a,[b]),N.dispatchEvent("map:glRepaint"))}}function y4(a,b){if(a.l)for(var c=0,d=b.length;c<d;c++)z4(a,b[c])}function x4(a,b,c){if(a.l||c){c=0;for(var d=b.length;c<d;c++){var e=b[c],f=a.g.featureToCesiumMap[e.id];f=f&&0<f.length&&f[0].show;a.Bb(e);a.cc(e);A4(a,e,f)}N.dispatchEvent("map:glRepaint")}}
g.cc=function(a){z4(this,a);var b=a.id,c=this.g.featureToCesiumMap[b];if(c){b=0;for(var d=c.length;b<d;b++)this.Gm(c[b],a);N.dispatchEvent("map:glRepaint")}else this.g.ed[b]=this.jo(a)};g.Bb=function(a){if("number"===typeof a||"string"===typeof a)a=this.source.Ad(a);if(null!==a&&this.g){var b=this.g,c=a.id;if(a=b.featureToCesiumMap[c]){b.featureToCesiumMap[c]=void 0;b.ed[c]=void 0;c=0;for(var d=a.length;c<d;c++)l4(b,a[c])}b.u.Pd();N.dispatchEvent("map:glRepaint")}};
g.jo=function(a){return this.source instanceof Rz?!this.source.Xe(a)&&(!this.source.Qc||!this.source.aa):!1};g.Gm=function(a,b){if(this.source instanceof Rz){var c=b.id;this.g.ed[c]=this.jo(b);a.show=this.g.ed[c];a instanceof Cesium.Billboard&&(a.eyeOffset=this.Ic.j)}};function w4(a,b){for(var c=0,d=b.length;c<d;c++){var e=b[c];if(e){var f=a.g.featureToCesiumMap[e.id];if(f)for(var h=0,k=f.length;h<k;h++)a.Gm(f[h],e)}}N.dispatchEvent("map:glRepaint")}
function wBa(a,b,c){for(var d=0,e=b.length;d<e;d++){var f=b[d];z4(a,f);if(f=a.g.featureToCesiumMap[f.id])for(var h=0,k=f.length;h<k;h++){var l=a,m=f[h],n=c,p=yP(L.s());m instanceof Cesium.Billboard?n&&p?(n=IAa(p,m.position),null!=n&&(m.eyeOffset=new Cesium.Cartesian3(0,0,.99*-n))):m.eyeOffset=l.Ic.j:m instanceof Cesium.Label&&(n&&l.scene&&p?(n=IAa(p,m.position),null!=n&&(n=new Cesium.Cartesian3(0,0,.99*-n),m.eyeOffset=n?n:l.Ic.l)):m.eyeOffset=l.Ic.l)}}}
function xBa(a){var b=yP(L.s());if(b&&(b=b.Ti(),b=new Cesium.Cartesian3(0,0,-(a.Bi*Math.round(b/(10*a.j)))),a.Ic.l=b,a.g&&a.g.labels)){b=0;for(var c=a.g.labels.length;b<c;b++){var d=a.g.labels.get(b);d&&(d.eyeOffset=a.Ic.l)}}}function A4(a,b,c){a.g.ed[b.id]=c;var d=a.g.featureToCesiumMap[b.id];if(d){for(var e=0,f=d.length;e<f;e++)d[e].show=c;c&&z4(a,b)}N.dispatchEvent("map:glRepaint")}g.li=function(a,b){if(this.Bi!=a||this.j!=b)this.Bi=a,this.j=b,xBa(this),yBa(this);return++a};
function yBa(a){var b=yP(L.s());if(b&&(b=b.Ti(),b=-(a.Bi*Math.round(b/(100*a.j))),b!=a.Ic.j.z)){b=new Cesium.Cartesian3(0,0,b);a.Ic.j=b;b=a.source.La();for(var c=0,d=b.length;c<d;c++){var e=a,f=e.g.featureToCesiumMap[b[c].id];if(f)for(var h=0,k=f.length;h<k;h++){var l=f[h];l instanceof Cesium.Billboard&&(l.eyeOffset=e.Ic.j)}}}}g.vs=function(){xBa(this);yBa(this)};function B4(a,b,c){v4.call(this,a,b,c)}w(B4,v4);B4.prototype.Gm=function(a,b){B4.C.Gm.call(this,a,b);if(a instanceof Cesium.PrimitiveCollection&&0<a.length){var c=a.get(0);c.olFeature=b}if(c&&b)try{var d=b.Z();if(d instanceof qp){var e=d.getCoordinates(),f=d.Y();1==e.length&&$p(e[0],d.Y())&&(c.geometryInstances.geometry=new Cesium.RectangleOutlineGeometry({rectangle:Cesium.Rectangle.fromDegrees(f[0],f[1],f[2],f[3])}))}}catch(h){}};function C4(a,b,c){i4.call(this,a,b,c);this.g=null;this.j=!0;H(this.layer,"propertychange",this.Az,this)}w(C4,i4);g=C4.prototype;g.J=function(){yf(this.layer,"propertychange",this.Az,this);this.scene.imageryLayers.remove(this.g);this.g=null;C4.C.J.call(this)};
g.rc=function(){var a=this.scene.imageryLayers;this.g&&(a.remove(this.g),this.g=null);if(this.j){var b=this.layer.get("url");if(b){var c=this.layer.N(),d;c instanceof oI&&(d=c.wa.Y());d&&4===d.length&&!al(d)&&(a.addImageryProvider(new Cesium.SingleTileImageryProvider({url:b,rectangle:Cesium.Rectangle.fromDegrees(d[0],d[1],d[2],d[3])})),this.g=a.get(a.length-1),this.g.imageryProvider.errorEvent.addEventListener(this.fN.bind(this)))}}};g.fN=function(){this.scene.imageryLayers.remove(this.g)};
g.li=function(a){this.rc();return++a};g.reset=function(){this.rc()};g.Az=function(a){a instanceof K&&"visible"==a.j&&(this.j=a.o,this.rc(),N.dispatchEvent("map:glRepaint"))};function D4(a,b,c){i4.call(this,a,b,c);this.Qb=c.imageryLayers;this.j=this.g=null;this.u=-1;this.A=new Fh(this.BM,50,this);(a=T(L.s().X()))&&H(a,"change:resolution",this.vj,this)}w(D4,i4);var E4="change:brightness change:contrast change:hue change:opacity change:saturation change:visible".split(" "),zBa=["change:minResolution","change:maxResolution"];g=D4.prototype;
g.J=function(){z(this.A);this.A=null;var a=T(L.s().X());a&&yf(a,"change:resolution",this.vj,this);yf(this.layer,"propertychange",this.Cs,this);ABa(this);F4(this);this.Qb=null;D4.C.J.call(this)};g.rc=function(){this.A&&this.A.start()};
g.BM=function(){ABa(this);F4(this);H(this.layer,"propertychange",this.Cs,this);if(this.g=cAa(this.layer,this.view.Ra()))B3(this.layer,this.g),this.vj(),this.Qb.add(this.g,-1<this.u?this.u:void 0),eI(this.layer,E4,this.Hn,this),eI(this.layer,zBa,this.vj,this),H(this.layer,"change:extent",this.rc,this),H(this.layer,"change",this.Gn,this);this.layer instanceof hR&&this.layer.K&&BBa(this)};g.reset=function(){};
g.vj=function(){if(this.layer&&this.g&&!this.j){var a=this.view.Ra(),b=this.view.bb(),c=this.layer.oe(),d=this.layer.ne();c=void 0!==c?c:Sn(42,a);d=void 0!==d?d:Sn(1,a);a=Rn(c,a);this.g.show=(20<=a||c<=b)&&b<=d&&this.layer.yb()}};g.li=function(a){if(this.u!==a){if(this.u=a,this.g&&(this.Qb.remove(this.g,!1),this.Qb.add(this.g,a++)),this.j)for(var b in this.j)this.Qb.remove(this.j[b],!1),this.Qb.add(this.j[b],a++)}else a=UAa(this)+1;return a};
function UAa(a){var b=a.g?a.Qb.indexOf(a.g):-1;-1<b&&a.j&&(b+=gc(a.j));return b}function ABa(a){yf(a.layer,"propertychange",a.Cs,a);a.g&&(fI(a.layer,E4,a.Hn,a),fI(a.layer,zBa,a.vj,a),yf(a.layer,"change:extent",a.rc,a),yf(a.layer,"change",a.Gn,a),a.g.imageryProvider instanceof x3&&a.g.imageryProvider.dispose(),a.Qb.remove(a.g,!0),a.g=null,N.dispatchEvent("map:glRepaint"))}
function BBa(a){a.g&&a.layer.N()instanceof m3&&(a.g.show=!1,fI(a.layer,E4,a.Hn,a),yf(a.layer,"change",a.Gn,a),a.Cl(),eI(a.layer,E4,a.Cl,a),H(a.layer,"change",a.Cl,a))}function F4(a){fI(a.layer,E4,a.Cl,a);yf(a.layer,"change",a.Cl,a);if(a.j){for(var b in a.j)a.Qb.remove(a.j[b],!0),a.j[b].imageryProvider instanceof x3&&a.j[b].imageryProvider.dispose(),delete a.j[b];a.j=null}a.layer&&a.g&&(B3(a.layer,a.g),eI(a.layer,E4,a.Hn,a),H(a.layer,"change",a.Gn,a))}
g.Cl=function(){var a={};var b=this.layer.I;var c=this.o.K,d=this.o.g-this.o.ec(),e=this.o.g;b=jya(b,MF(new Date(d),c,0).getTime(),MF(new Date(e),c,0).getTime(),c);if(d=this.j?this.j[b]:void 0)delete this.j[b];else{c=this.Qb.indexOf(this.g);d=this.layer.N();e=this.layer.Va();e.id=Vb();var f=zg(e);e=f.N();f.Cb(null);f.dispose();d=d.vf();d.TIME=b;e.updateParams(d);d=new x3(e);d=new Cesium.ImageryLayer(d);this.Qb.add(d,c+1)}B3(this.layer,d);d.alpha=this.layer.Nb()||0;a[b]=d;if(this.j)for(var h in this.j)a[h]=
this.j[h],a[h].alpha=0;this.j=a;N.dispatchEvent("map:glRepaint")};g.Hn=function(){B3(this.layer,this.g);this.vj()};g.Gn=function(){if(this.g&&this.g.show){var a=this.Qb.indexOf(this.g);0<=a&&(this.Qb.remove(this.g,!1),this.Qb.add(this.g,a))}N.dispatchEvent("map:glRepaint")};g.Cs=function(a){if(a instanceof K){var b=a.j;"animationEnabled"==b?a.o?BBa(this):F4(this):"style"==b&&this.rc()}N.dispatchEvent("map:glRepaint")};function G4(){Kg.call(this);this.id="cesium"}w(G4,Kg);G4.prototype.init=function(){Oha(L.s(),new g4);var a=Jk.s();Kk(a,"vector",v4);Kk(a,"tile",D4);Kk(a,"image",C4);Kk(a,"draw",B4)};var CBa=null;Q.directive("descriptorresultcard",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/plugin/descriptor/resultcard.html",controller:H4,controllerAs:"ctrl"}}]);function H4(a,b){this.v=a;this.L=b;this.v["short"]=!1;this.v.showFullDescription=!1;b=this.L.find(".js-card-title-icons");b.children().remove();b.prepend(this.qd("icons"));this.featureCount=void 0;(b=this.v.result)&&null!=b.o&&(this.featureCount=b.o);a.$on("$destroy",this.g.bind(this))}H4.$inject=["$scope","$element"];
H4.prototype.g=function(){this.v=this.L=null};H4.prototype.Ka=function(){var a=this.v.result;return a?a.Xi():null};
H4.prototype.qd=function(a){var b=this.Ka();if(b)switch(a.toLowerCase()){case "id":return b.D();case "active":return b.isActive();case "icons":return b.gd();case "provider":return b.rb();case "tags":return b.getTags().join(", ");case "title":return b.S();case "type":return b.uk();case "description":return b.qb();case "snippet":if(a=b.qb()){a=a.split(/\n\n/);for(var c=b=0,d=a.length;c<d;c++)if(-1<a[c].indexOf(".")){b=c;break}a=a[b];125<a.length&&(a=a.substring(0,125)+" ...",this.v["short"]=!0);return a}}return""};
H4.prototype.getField=H4.prototype.qd;H4.prototype.toggle=function(){var a=this.Ka();a&&(a.setActive(!a.isActive()),a.isActive()&&N.dispatchEvent(new dF("userToggledDescriptor",a)))};H4.prototype.toggle=H4.prototype.toggle;H4.prototype.cO=function(a){this.v.showFullDescription=a;R(this.v)};H4.prototype.showFullDescription=H4.prototype.cO;function I4(a,b,c){B_.call(this,a,b);this.o=c}w(I4,B_);I4.prototype.g=function(){return'<descriptorresultcard result="result"></descriptorresultcard>'};I4.prototype.l=function(){};function J4(){}J4.prototype.o=function(){return!1};J4.prototype.u=function(a){return a};function K4(a,b,c){b&&(a in c||(c[a]={}),b in c[a]||(c[a][b]=0),c[a][b]++)}function L4(a,b,c){a in b||(b[a]=0);b[a]+=c||0};function M4(){this.j=null;this.l=-1}w(M4,J4);function Ywa(a,b){a.j=null;a.l=-1;b&&(b=Rua(b).replace(/\.\*/g,""),a.j=new RegExp(b,"gi"),a.l=Ia()-12096E5)}M4.prototype.load=function(){};M4.prototype.g=function(a,b,c){if(this.j){L4("SearchTerm",c);for(var d=[a.qe(),a.S()],e=b=0,f=d.length;e<f;e++)d[e]&&(b+=this.lc(this.j,d[e],10*(e+1)));b&&(a=a.ud,isNaN(a)||(b+=Math.max(0,a-this.l)/12096E5*5));(a=b)&&L4("SearchTerm",c,a)}};
M4.prototype.lc=function(a,b,c){c=c||3;for(var d=0,e=a.exec(b),f=a.source.split(/[(|)]/),h={},k=0,l=f.length;k<l;k++)f[k]&&(h[f[k]]=0);for(;e&&e.length;){k=1;for(l=e.length;k<l;k++)d+=c*e[k].length/b.length,f=e[k].toLowerCase(),f in h&&(h[f]=1);e=a.exec(b)}c=b=0;for(var m in h)b+=h[m],c++;a.lastIndex=0;return d*b/c};function N4(){}w(N4,J4);N4.prototype.load=function(a,b){(a=a.rb())&&K4("Source",a,b)};N4.prototype.g=function(a,b,c){if(b=b.Source)a=(a=a.rb())?b.indexOf(a):-1,L4("Source",c,-1<a?1:0)};function O4(){}w(O4,J4);O4.prototype.load=function(a,b){if(a=a.getTags())for(var c=0,d=a.length;c<d;c++){var e=a[c];e&&K4("Tag",e,b)}};O4.prototype.g=function(a,b,c){if(b=b.Tag)if(L4("Tag",c),a=a.getTags())for(var d=0,e=b.length;d<e;d++)L4("Tag",c,-1<a.indexOf(b[d])?1:0)};function P4(){}w(P4,J4);P4.prototype.load=function(a,b){if(a=a.getTags())for(var c=0,d=a.length;c<d;c++){var e=a[c];e&&(e=e.split(/:/))&&2===e.length&&K4(e[0],e[1],b)}};P4.prototype.g=function(a,b,c){a=a.getTags();for(var d in b){var e=b[d];L4(d,c);for(var f=0,h=e.length;f<h;f++){var k=d+":"+e[f];a&&-1<a.indexOf(k)&&L4(d,c,1)}}};function Q4(){}w(Q4,J4);Q4.prototype.o=function(a){return"Type"===a};Q4.prototype.u=function(a){return Fb(a,"s")&&!Fb(a,"es")?a.substring(0,a.length-1):a};Q4.prototype.load=function(a,b){(a=a.T())&&K4("Type",a,b)};Q4.prototype.g=function(a,b,c){if(b=b.Type)a=(a=a.T())?b.indexOf(a):-1,L4("Type",c,-1<a?1:0)};function R4(a){D_.call(this,"descriptor",a);this.log=DBa;this.priority=90;this.type="descriptor";this.j=[];this.l=new M4;this.g=[new P4,new N4,new Q4,new O4,this.l]}w(R4,D_);F(R4,"os.search.IFacetedSearch");var DBa=E.V("plugin.descriptor.DescriptorSearch");R4.prototype.cancel=function(){};R4.prototype.Lr=function(a){this.term=a;this.dispatchEvent(new FU("autocomplete.success",this.term,[]))};
R4.prototype.Xs=function(a,b,c){this.term=a;this.j.length=0;Ywa(this.l,a);a=Qw(Y);var d=[],e=this.j,f=this.priority;if(a)for(var h=0,k=a.length;h<k;h++){var l=a[h],m=l.ik();if(!m||m.kc()){m=EBa(this,l);var n=function(a){a&&(a=f+a/100,e.push(new I4(l,a)))};m instanceof Kc?d.push(m.then(n)):n(m)}}wb(e,function(a,b){return xb(b.lc(),a.lc())});if(d.length){var p=this;Vc(d).then(function(){p.dispatchEvent(new FU("success",p.term,Tw(e,b,c),e.length))})}else this.dispatchEvent(new FU("success",this.term,
Tw(e,b,c),e.length));return!0};R4.prototype.ba=function(a,b){for(var c=0,d=this.g.length;c<d;c++)if(this.g[c].o(a))return this.g[c].u(b);return b};function EBa(a,b){function c(){var a=0,b;for(b in e){var c=e[b];if(!c)return 0;a+=c}return a}var d={},e={};a=a.g;for(var f=[],h=0,k=a.length;h<k;h++){var l=a[h].g(b,d,e);l&&f.push(l)}return f.length?new Kc(function(a){Vc(f).then(function(){a(c())})}):c()};function S4(){Kg.call(this);this.id="descriptorsearch"}w(S4,Kg);S4.prototype.init=function(){CBa||(HU(GU.s(),new R4("Layers")),CBa=new R4("Layers"))};function UM(){LE.call(this);this.ab=this.I=null;this.l=new oM;this.o="file"}w(UM,LE);F(UM,"os.data.IReimport");F(UM,"os.data.IUrlDescriptor");g=UM.prototype;g.uk=function(){return"Layer"};g.gd=function(){return'<img src="v1541734487/images/features-base.png" title="Feature layer"/>'};g.Ld=function(){return"<defaultfilenodeui></defaultfilenodeui>"};
g.Va=function(){var a={};a.id=this.D();a.animate=!0;a.color=this.Ja();a.load=!0;a.originalUrl=this.I;a.parserConfig=this.l;a.provider=this.rb();a.tags=this.getTags();a.title=this.S();a.url=this.Ma();a.mappings=this.l.mappings;a.detectColumnTypes=!0;return a};g.Ma=function(){return this.ab};g.Mb=function(a){this.ab=a};g.gh=function(a){return a==this.Ma()};function T4(a,b){a.l=b;a.B={}}g.Yc=function(a){this.l.color=a;UM.C.Yc.call(this,a)};g.fb=function(a){this.l.description=a;UM.C.fb.call(this,a)};
g.vb=function(a){this.l.tags=a?a.join(", "):"";UM.C.vb.call(this,a)};g.Ta=function(a){this.l.title=a;UM.C.Ta.call(this,a)};g.clearData=function(){var a=this.Ma();a&&Jw(a)&&fB(eB.s(),a)};g.ra=function(a){a||(a={});a.originalUrl=this.I;a.url=this.ab;var b=this.l.mappings;b&&(iy.s(),a.mappings=ly(0,b));return UM.C.ra.call(this,a)};g.restore=function(a){this.I=a.originalUrl||null;this.ab=a.url||null;if(a.mappings){var b=iy.s();b=my(b,a.mappings);this.l.mappings=b}UM.C.restore.call(this,a);this.yh()};function U4(){fF.call(this)}w(U4,ZM);U4.prototype.Wb=function(a){this.ga("file");this.Da("Files");U4.C.Wb.call(this,a);this.Ck=!1};U4.prototype.Ve=function(){return"Contains all "+this.D().toUpperCase()+" files that have been imported into the application."};function V4(){fF.call(this)}w(V4,U4);xa(V4);V4.prototype.Wb=function(a){V4.C.Wb.call(this,a);this.ga("csv");this.Da("CSV Files")};function W4(a){UM.call(this);this.o="csv";this.l=a||new p1}w(W4,UM);W4.prototype.T=function(){return"Feature Layers"};W4.prototype.Va=function(){var a=W4.C.Va.call(this);a.type="CSV";a.commentChar=this.l.commentChar;a.dataRow=this.l.dataRow;a.delimiter=this.l.delimiter;a.headerRow=this.l.headerRow;a.useHeader=this.l.useHeader;return a};
W4.prototype.ra=function(a){a||(a={});a.commentChar=this.l.commentChar;a.dataRow=this.l.dataRow;a.delimiter=this.l.delimiter;a.headerRow=this.l.headerRow;a.useHeader=this.l.useHeader;return W4.C.ra.call(this,a)};W4.prototype.restore=function(a){this.l.commentChar=a.commentChar;this.l.dataRow=a.dataRow;this.l.delimiter=a.delimiter;this.l.headerRow=a.headerRow;this.l.useHeader=a.useHeader;W4.C.restore.call(this,a)};
function FBa(a,b){a.Yc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);T4(a,b)};function X4(){C.call(this);this.items=this.fields=null;this.log=GBa;this.qg=this.name=null}w(X4,C);var GBa=E.V("os.ex.AbstractExporter");g=X4.prototype;g.J=function(){X4.C.J.call(this);this.reset()};g.nb=function(){return!1};g.ti=function(){return!1};g.reset=function(){this.qg=this.items=this.fields=null};g.dt=function(a){this.fields=a};g.setItems=function(a){this.items=a};g.pk=function(){return"text/plain"};g.getName=function(){return this.name};g.ri=function(a){this.name=a};g.ad=function(){};
g.cancel=function(){};g.Ug=function(){return null};g.tt=function(){return!1};function Y4(){X4.call(this);this.log=HBa;this.g=[]}w(Y4,X4);var HBa=E.V("os.ui.file.csv.AbstractCSVExporter");g=Y4.prototype;g.reset=function(){Y4.C.reset.call(this);this.g.length=0};g.getExtension=function(){return"csv"};g.ba=function(){return"CSV"};g.pk=function(){return"text/csv"};
g.ad=function(){for(var a=0,b=this.items.length;a<b;a++){var c=this.items[a];var d=null==c?null:{},e=c?c.Z():null;if(null!=e){e=e.clone().toLonLat();try{var f=e.getCoordinates();f&&"number"===typeof f[0]&&(d.LAT=String(f[1]),d.LON=String(f[0]),d.LAT_DDM=fq(f[1],!1,!1),d.LON_DDM=fq(f[0],!0,!1),d.LAT_DMS=eq(f[1],!1,!1),d.LON_DMS=eq(f[0],!0,!1),d.MGRS=osasm.toMGRS(f))}catch(m){}"LAT"in d||(d.LAT="",d.LON="",d.LAT_DDM="",d.LON_DDM="",d.LAT_DMS="",d.LON_DMS="",d.MGRS="");d.GEOMETRY=DT.Ht(c,{dataProjection:"EPSG:4326",
featureProjection:S});if(e=c.get("recordTime"))kg(e,"os.time.TimeRange")?(d.START_TIME=rg(e),d.END_TIME=sg(e)):d.TIME=e.toISOString()}if(this.fields){e=0;for(var h=this.fields.length;e<h;e++){var k=this.fields[e];if(!(k in d)){var l=c.get(this.fields[e]);null==l&&(l="");$h(l)&&!q(l)&&(d[k]=l)}}}(c=d)&&this.g.push(c)}0<this.g.length&&(this.qg="\ufeff",this.qg+=Papa.unparse(this.g,{newline:"\n"}))};g.cancel=function(){};function IBa(){Y4.call(this);this.log=JBa}w(IBa,Y4);var JBa=E.V("plugin.file.csv.CSVExporter");function Z4(){g0.call(this);this.g=new p1}w(Z4,g0);
Z4.prototype.ac=function(a){Z4.C.ac.call(this,a);null!=a.parserConfig?this.g=a.parserConfig:(null!=a.commentChar&&(this.g.commentChar=a.commentChar),null!=a.dataRow&&(this.g.dataRow=a.dataRow),null!=a.delimiter&&(this.g.delimiter=a.delimiter),null!=a.headerRow&&(this.g.headerRow=a.headerRow),null!=a.useHeader&&(this.g.useHeader=a.useHeader),null!=a.mappings&&(this.g.mappings=a.mappings),null!=a.skipTimeMappings&&(this.g.skipTimeMappings=a.skipTimeMappings),null!=a.skipGeoMappings&&(this.g.skipGeoMappings=
a.skipGeoMappings))};Z4.prototype.Dd=function(a){a=Z4.C.Dd.call(this,a);FM(a,this.g.mappings);return a};Z4.prototype.Jf=function(){return new n1(this.g)};function y5(){Q0.call(this);this.template="<optionsstep></optionsstep>";this.title="Options"}w(y5,Q0);y5.prototype.isValid=function(a){return this.valid&&!!a.title};Q.directive("optionsstep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/wiz/optionsstep.html",controller:z5,controllerAs:"optionsStep"}}]);
function z5(a){this.v=a;this.j=a.config.title;a.$watch("config.title",this.g.bind(this));a.$watch("optionsForm.$valid",this.o.bind(this));a.$on("$destroy",this.l.bind(this))}z5.$inject=["$scope"];z5.prototype.l=function(){this.v=null};z5.prototype.g=function(a){a&&a!=this.j?(a=gB(eB.s(),Hw(a)),this.v.optionsForm.title.$setValidity("exists",!a)):this.v.optionsForm.title.$setValidity("exists",!0)};z5.prototype.o=function(a){this.v.$emit("validate",a)};function A5(a){this.dateType="combined";this.timeColumn=this.dateColumn="";this.dateFormat=QF[0];this.timeFormat=RF[0];this.l=this.j=null;this.g=a||"start"}A5.prototype.Ub=function(a){this.g=a};A5.prototype.T=function(){return this.g};
function KBa(a,b){a.j=null;a.l=null;for(var c=0,d=b.length;c<d;c++){var e=b[c];e.T()==a.T()&&(e instanceof HT?(a.l=e.clone(),a.timeColumn=a.l.ja,a.timeFormat=a.l.jk()):(a.j=e.clone(),a.dateColumn=a.j.ja,a.dateFormat=a.j.jk()))}a.dateType=a.l?"separate":a.j instanceof GT?"dateonly":"combined"}
function B5(a){var b=[];switch(a.dateType){case "combined":var c=new FT(a.g);c.ja=a.dateColumn;c.format=a.dateFormat;b.push(c);break;case "separate":c=new GT(a.g);c.ja=a.dateColumn;c.format=a.dateFormat;b.push(c);c=new HT(a.g);c.ja=a.timeColumn;c.format=a.timeFormat;b.push(c);break;case "dateonly":c=new GT(a.g),c.ja=a.dateColumn,c.format=a.dateFormat,b.push(c)}return b}
A5.prototype.Zb=function(){var a=this.dateColumn&&this.dateFormat;"separate"==this.dateType&&(a=a&&this.timeColumn&&this.timeFormat);return a};Q.directive("timehelp",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/window/timehelp.html",controller:C5,controllerAs:"th"}}]);function C5(a,b){this.L=b;a.$on("$destroy",this.g.bind(this))}C5.$inject=["$scope","$element"];C5.prototype.g=function(){this.L=null};C5.prototype.close=function(){kx(this.L)};C5.prototype.close=C5.prototype.close;Q.directive("timeinstantui",[function(){return{restrict:"E",replace:!0,scope:{config:"=",model:"=",valid:"=",label:"@"},templateUrl:"v1541734487/views/wiz/timeinstantui.html",controller:D5,controllerAs:"tiUI"}}]);
function D5(a){this.v=a;this.g=a.model;this.j=a.config;this.dtFormats=QF;this.dFormats=PF;this.tFormats=RF;this.timeFormat=this.dateFormat="";this.types=[{id:"combined",label:"Date/Time"},{id:"separate",label:"Separate Date and Time"},{id:"dateonly",label:"Date Only"}];this.sample="";this.result=null;"combined"==this.g.dateType?this.dateFormat=gb(this.dtFormats,this.g.dateFormat)?this.g.dateFormat:"Custom":(this.dateFormat=gb(this.dFormats,this.g.dateFormat)?this.g.dateFormat:"Custom","separate"==
this.g.dateType&&(this.timeFormat=gb(this.tFormats,this.g.timeFormat)?this.g.timeFormat:"Custom"));E5(this);a.$on("$destroy",this.l.bind(this))}D5.$inject=["$scope"];D5.prototype.l=function(){this.v=null};
function E5(a){a.v.valid=!1;a.sample=null;a.result=null;if(a.j.preview&&0<a.j.preview.length){a.g.dateColumn&&(a.sample=LBa(a,a.g.dateColumn));if("separate"==a.g.dateType&&a.g.timeColumn){a.sample=a.sample||"";var b=LBa(a,a.g.timeColumn);a.sample+=(a.sample?" ":"")+b}if(null==a.sample)a.sample="separate"==a.g.dateType?"Please choose Date and Time columns.":"Please choose a Date column.";else if(b=null,"separate"==a.g.dateType&&a.g.dateColumn&&a.g.timeColumn&&a.g.dateFormat&&a.g.timeFormat?b=a.g.dateFormat+
" "+a.g.timeFormat:"separate"!=a.g.dateType&&a.g.dateColumn&&a.g.dateFormat&&(b=a.g.dateFormat),b&&(b=cG(a.sample,b,!0)))a.result=b.toISOString(),a.v.valid=!0}else a.sample="No preview data available. Please check the import configuration."}function LBa(a,b){for(var c="",d=0,e=a.j.preview.length;d<e&&!c;d++)c=Jb(String(ay(a.j.preview[d],b)||""));return c}D5.prototype.change=function(){E5(this)};D5.prototype.change=D5.prototype.change;
function MBa(a){if(a.j.preview&&0<a.j.preview.length&&a.g.dateColumn){var b=null,c=String(ay(a.j.preview[0],a.g.dateColumn)||"");c&&(b=aG(c,"combined"==a.g.dateType?a.dtFormats:a.dFormats));b?(a.dateFormat=b,a.g.dateFormat=b):a.dateFormat="Custom"}E5(a)}function NBa(a){if(a.j.preview&&0<a.j.preview.length&&a.g.timeColumn){var b=null,c=String(ay(a.j.preview[0],a.g.timeColumn)||"");c&&(b=aG(c,a.tFormats));b?(a.timeFormat=b,a.g.timeFormat=b):a.timeFormat="Custom"}E5(a)}
D5.prototype.PH=function(){MBa(this);"separate"==this.g.dateType&&NBa(this);E5(this)};D5.prototype.onDateType=D5.prototype.PH;D5.prototype.NH=function(){MBa(this);E5(this)};D5.prototype.onDateColumn=D5.prototype.NH;D5.prototype.nK=function(){NBa(this);E5(this)};D5.prototype.onTimeColumn=D5.prototype.nK;D5.prototype.OH=function(){this.dateFormat&&"Custom"!=this.dateFormat&&(this.g.dateFormat=this.dateFormat,E5(this))};D5.prototype.onDateFormat=D5.prototype.OH;
D5.prototype.oK=function(){this.timeFormat&&"Custom"!=this.timeFormat&&(this.g.timeFormat=this.timeFormat,E5(this))};D5.prototype.onTimeFormat=D5.prototype.oK;function F5(){Q0.call(this);this.template="<timestep></timestep>";this.title="Time";this.timeType="none";this.startModel=new A5;this.endModel=new A5("end")}w(F5,Q0);F5.prototype.g=function(a){if(!this.j&&a.mappings&&0<a.mappings.length){for(var b=[],c=[],d=a.mappings.length;d--;){var e=a.mappings[d];e instanceof FT&&("end"==e.T()?c.push(e):b.push(e))}0<b.length&&(KBa(this.startModel,b),this.timeType="instant");0<c.length&&(KBa(this.endModel,c),this.timeType="range");F5.C.g.call(this,a)}};
F5.prototype.Mi=function(a){if(a.mappings)for(var b=a.mappings.length;b--;)a.mappings[b]instanceof FT&&a.mappings.splice(b,1);b=[];"none"!=this.timeType?(a.skipTimeMappings=!1,"instant"==this.timeType?(this.startModel.Ub("instant"),b=b.concat(B5(this.startModel))):"range"==this.timeType&&(this.startModel.Ub("start"),b=b.concat(B5(this.startModel)),b=b.concat(B5(this.endModel))),0<b.length&&(a.mappings=a.mappings?a.mappings.concat(b):b)):a.skipTimeMappings=!0};
F5.prototype.isValid=function(){return"instant"==this.timeType?this.valid&&this.startModel.Zb():"range"==this.timeType?this.valid&&this.startModel.Zb()&&this.endModel.Zb():!0};Q.directive("timestep",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/wiz/timestep.html",controller:G5,controllerAs:"timeStep"}}]);
function G5(a){this.v=a;this.endValid=this.startValid=!0;a.$watch("step.timeType",this.j.bind(this));a.$watch("step.startModel.dateType",this.g.bind(this));a.$watch("step.endModel.dateType",this.g.bind(this));a.$watch("timeStep.startValid",this.j.bind(this));a.$watch("timeStep.endValid",this.j.bind(this));a.$on("$destroy",this.l.bind(this))}G5.$inject=["$scope"];G5.prototype.l=function(){this.v=null};G5.prototype.g=function(){this.v.$broadcast("resizePreview")};
G5.prototype.j=function(){var a=this.v.step.timeType,b=!0;"range"==a?b=this.startValid&&this.endValid:"instant"==a&&(b=this.startValid);this.v.$emit("validate",b);this.g()};G5.prototype.yq=function(){document.getElementById("time-help")||fx({label:"Custom Date/Time Formats",icon:"fa fa-clock-o",x:"-10",y:"center",width:"445","min-width":"250","max-width":"600",height:"445","min-height":"250","max-height":"600","show-close":!0,modal:!0},"<timehelp></timehelp>")};G5.prototype.launchHelp=G5.prototype.yq;function H5(a,b,c,d){g1.call(this,a,b,c,d);this.g=eB.s()}w(H5,g1);H5.$inject=["$scope","$element","$timeout","$attrs"];g=H5.prototype;g.Tl=function(){this.Zk();H5.C.Tl.call(this)};g.Zk=function(){this.config&&(this.config.file=null,this.config.descriptor=null)};g.finish=function(){if(this.config.descriptor){var a=this.config.descriptor;a.setActive(!1);this.At(a,this.config)}else a=this.gp();this.UA(a);H5.C.finish.call(this)};
g.UA=function(a){var b=this.config.file.Ma();b&&Jw(b)?uh(jB(this.g,this.config.file),Ga(this.qh,a),this.Ok,this):this.qh(a)};g.qh=function(a){pF(Y,a);this.Mo(a);this.Zk()};g.Ok=function(){rj(qj.s(),"Failed storing local file! Unable to finish import.",Qh);this.Zk()};function I5(a,b,c,d){H5.call(this,a,b,c,d)}w(I5,H5);I5.$inject=["$scope","$element","$timeout","$attrs"];I5.prototype.Mo=function(a){$M(V4.s(),a)};I5.prototype.gp=function(){var a=this.config,b=a.file,c=V4.s(),d=new W4(a);d.ga(gF(c));d.Ec(c.ba());d.Mb(b.Ma());FBa(d,a);return d};I5.prototype.At=function(a,b){FBa(a,b)};Q.directive("csvimport",[function(){var a=f1();a.controller=I5;return a}]);function J5(){dT.call(this)}w(J5,dT);J5.prototype.S=function(){return"CSV"};
J5.prototype.Jb=function(a,b){J5.C.Jb.call(this,a,b);var c=[new Y0,new b1,new F5,new y5],d=new p1;b&&this.g(b,d);d.file=a;d.title=a.getFileName();tya(d);fx({label:"CSV Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"900","min-width":"500","max-width":"2000",height:"700","min-height":"500","max-height":"2000",modal:!0,"show-close":!0,"no-scroll":!0},'<csvimport resize-with=".js-window"></csvimport>',void 0,void 0,void 0,{config:d,steps:c})};
J5.prototype.g=function(a,b){J5.C.g.call(this,a,b);b.commentChar=a.commentChar;b.dataRow=a.dataRow;b.delimiter=a.delimiter;b.headerRow=a.headerRow;b.useHeader=a.useHeader};function K5(){Kg.call(this);this.id="csv"}w(K5,Kg);K5.prototype.init=function(){var a=Y;mF(a,new eF("csv",V4,"CSV Layers","CSV Layers"));nF(a,this.id,W4);Yf(Uf.s(),"CSV",Z4);a=GM.s();JM(a,"CSV",!0);KM(a,"text/csv",new J5);LM(a,this.id,n1);eZ(lQ,new IBa)};function L5(){fF.call(this)}w(L5,U4);xa(L5);L5.prototype.Wb=function(a){L5.C.Wb.call(this,a);this.ga("geojson");this.Da("GeoJSON Files")};function M5(a){UM.call(this);this.o="geojson";this.l=a||new t1}w(M5,UM);M5.prototype.T=function(){return"Feature Layers"};M5.prototype.Va=function(){var a=M5.C.Va.call(this);a.type="GeoJSON";return a};function OBa(a,b){a.Yc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);T4(a,b)};function N5(){X4.call(this);this.log=PBa}w(N5,X4);var PBa=E.V("plugin.file.geojson.GeoJSONExporter");N5.prototype.ba=function(){return"GeoJSON"};N5.prototype.getExtension=function(){return"geojson"};N5.prototype.pk=function(){return"application/vnd.geo+json"};
N5.prototype.ad=function(){for(var a=!1,b=!1,c=0,d=this.items.length;c<d;c++){var e=this.items[c].get("recordTime");e&&(kg(e,"os.time.TimeRange")?(this.items[c].set("START_TIME",rg(e)),this.items[c].set("END_TIME",sg(e)),b||(this.fields.push("START_TIME"),this.fields.push("END_TIME"),b=!0)):(this.items[c].set("TIME",e.toISOString()),a||(this.fields.push("TIME"),a=!0)))}this.qg=(new FG).It(this.items,{featureProjection:S,dataProjection:"EPSG:4326",fields:this.fields})};function O5(a,b,c,d){H5.call(this,a,b,c,d)}w(O5,H5);O5.$inject=["$scope","$element","$timeout","$attrs"];O5.prototype.Mo=function(a){$M(L5.s(),a)};O5.prototype.gp=function(){var a=this.config,b=a.file,c=L5.s(),d=new M5(a);d.ga(gF(c));d.Ec(c.ba());d.Mb(b.Ma());OBa(d,a);return d};O5.prototype.At=function(a,b){OBa(a,b)};Q.directive("geojsonimport",[function(){var a=f1();a.controller=O5;return a}]);function P5(){dT.call(this)}w(P5,dT);P5.prototype.S=function(){return"GeoJSON"};
P5.prototype.Jb=function(a,b){P5.C.Jb.call(this,a,b);var c=[new F5,new y5],d=new t1;b&&this.g(b,d);d.file=a;d.title=a.getFileName();try{d.wb();var e=d.preview.slice(0,24);if((!d.mappings||0>=d.mappings.length)&&e&&0<e.length){var f=iy.s().Wd(e);f&&0<f.length&&(d.mappings=f)}}catch(h){}fx({label:"Import GeoJSON",icon:"fa fa-sign-in",x:"center",y:"center",width:"850","min-width":"500","max-width":"1200",height:"650","min-height":"300","max-height":"1000",modal:"true","show-close":"true","no-scroll":"true"},
'<geojsonimport resize-with=".js-window"></geojsonimport>',void 0,void 0,void 0,{config:d,steps:c})};function Q5(){g0.call(this);this.g=new t1}w(Q5,g0);Q5.prototype.ac=function(a){Q5.C.ac.call(this,a);this.g=a.parserConfig||new t1};Q5.prototype.Dd=function(a){a=Q5.C.Dd.call(this,a);null!=this.g.mappings?EM(a,this.g.mappings):DM(a,["Altitude","Orientation","SemiMajor","SemiMinor","DateTime"]);return a};Q5.prototype.Jf=function(){return IM("geojson")};function R5(){r1.call(this)}w(R5,r1);var QBa=E.V("plugin.file.geojson.GeoJSONSimpleStyleParser");R5.prototype.Zc=function(){var a=R5.C.Zc.call(this);a.forEach(this.ad,this);return a};
R5.prototype.ad=function(a){R5.C.ad.call(this,a);try{var b=a.get("marker-size"),c=a.get("marker-symbol"),d=a.get("marker-color"),e=a.get("stroke"),f=a.get("stroke-opacity"),h=a.get("stroke-width"),k=a.get("fill"),l=a.get("fill-opacity");if(b||c||d||e||f||h||k||l){b=b||"medium";c=c||"";d=d||"7e7e7e";e=e||"555555";f=f||1;h=h||2;k=k||"555555";l=l||.6;var m={},n=ff(e),p=ff(k),r=ff(d),u="rgba("+p[0]+","+p[1]+","+p[2]+","+l+")",v="rgba("+n[0]+","+n[1]+","+n[2]+","+f+")";d=!1;if(85!=p[0]||85!=p[1]||85!=
p[2])m.fill={color:u},d=!0;m.stroke={width:h};d||(m.stroke={color:v});if(c){h=c+"-24.png";if("number"===typeof c||c.match(/^[a-z0-9]$/))h="marker-24.png";c=.8;"medium"===b?c=.8:"small"===b?c=.6:"large"===b&&(c=1);m.image={color:"rgba("+r[0]+","+r[1]+","+r[2]+",1)",type:"icon",anchor:[.5,.5],scale:c,src:"v1541734487/images/icons/maki/v1/"+h};m.zIndex=151}else m.image={color:v,stroke:{color:v,width:h},fill:{color:u}};a.set("_style",m);sz(a)}}catch(y){E.error(QBa,"Failed to style the feature!",y)}};lw("application/json",function(a,b,c){if(c&&"string"===typeof c){a=oboe();var d=!1;a.fail(function(a){a.thrown&&/^Invalid null /.test(a.thrown.message)||(d=!0)});a.emit("data",c);var e=d?e:a.root()}return Sc(e)},0,"text/plain");function RBa(a){if("FeatureCollection"===a.type||"Feature"===a.type)return!0;for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];if(Ba(c)||Array.isArray(c))if(c=RBa(c))return c}return!1}lw("application/vnd.geo+json",function(a,b,c){var d;c&&RBa(c)&&(d=c);return Sc(d)},0,"application/json");FG.prototype.g=function(a,b){b=yG(this,b);var c={type:"Feature"},d=a.D();void 0!==d&&(c.id=d);(d=a.Z())?c.geometry=GG(d,b):c.geometry=null;a=a.la;b=b.fields;for(var e in a)0!==e.indexOf("_")&&(!b||-1<b.indexOf(e))&&Object(a[e])!==a[e]&&(c.properties||(c.properties={}),c.properties[e]=a[e]);return c};function S5(){Kg.call(this);this.id="geojson"}w(S5,Kg);S5.prototype.init=function(){var a=Y;mF(a,new eF("geojson",L5,"GeoJSON Layers","GeoJSON Layers"));nF(a,this.id,M5);Yf(Uf.s(),"GeoJSON",Q5);a=GM.s();JM(a,"GeoJSON",!0);KM(a,"application/vnd.geo+json",new P5);LM(a,this.id,R5);LM(a,this.id+"-simplespec",R5);eZ(lQ,new N5)};function T5(){oM.call(this)}w(T5,oM);T5.prototype.wb=function(){var a=IM("gml");a.Cb(this.file.Pb());var b=25,c=[];for(a.g={};a.Cd()&&b--;){var d=a.Zc();if(q(d))for(var e=0,f=d.length;e<f;e++){var h=d[e];h.ga(String(J(h)));c.push(h)}d=h.Xb();e=0;for(f=d.length;e<f;e++){var k=d[e];if(k&&!Px(k)&&!(k in a.g)){var l=new Wv(k);l.selectable=!0;l.sortable=!0;a.g[k]=l}}}this.preview=c||[];this.columns=a.getColumns()||[];b=0;for(c=this.columns.length;b<c;b++)e=this.columns[b],e.width=0,Dx(e);a.dispose()};function U5(){fF.call(this)}w(U5,U4);xa(U5);U5.prototype.Wb=function(a){U5.C.Wb.call(this,a);this.ga("gml");this.Da("GML Files")};function V5(a){UM.call(this);this.o="gml";this.l=a||new T5}w(V5,UM);V5.prototype.T=function(){return"Feature Layers"};V5.prototype.Va=function(){var a=V5.C.Va.call(this);a.type="GML";a.showForceColor=!0;return a};function SBa(a,b){a.Yc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);T4(a,b)};function W5(a,b){this.scope=a;this.element=b;this.config=a.config;this.o=a.config.title;this.log=TBa;a.$watch("config.title",this.l.bind(this));a.$on("$destroy",this.destroy.bind(this));a.$emit("window.ready")}W5.$inject=["$scope","$element"];var TBa=E.V("os.ui.file.ui.AbstractFileImportCtrl");W5.prototype.destroy=function(){this.element=this.scope=this.config=null};function X5(a){a.config&&(a.config.file=null,a.config.descriptor=null)}
W5.prototype.l=function(a){a&&a!=this.o?(a=gB(eB.s(),Hw(a)),this.scope.importForm.title.$setValidity("exists",!a)):this.scope.importForm.title.$setValidity("exists",!0)};W5.prototype.accept=function(){var a=this.g(),b=this.config.file.Ma();b&&Jw(b)?uh(jB(eB.s(),this.config.file),Ga(this.j,a),this.u,this):this.j(a);kx(this.element)};W5.prototype.accept=W5.prototype.accept;W5.prototype.cancel=function(){X5(this);kx(this.element)};W5.prototype.cancel=W5.prototype.cancel;W5.prototype.rb=function(){return null};
W5.prototype.j=function(a){pF(Y,a);var b=this.rb();b&&$M(b,a);X5(this);a.isActive()&&N.dispatchEvent(new dF("userToggledDescriptor",a))};W5.prototype.u=function(){rj(qj.s(),"Failed storing local file! Unable to finish import.",Qh);X5(this)};Q.directive("gmlimport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/file/genericfileimport.html",controller:Y5,controllerAs:"ctrl"}}]);function Y5(a,b){W5.call(this,a,b)}w(Y5,W5);Y5.$inject=["$scope","$element"];Y5.prototype.g=function(){if(this.config.descriptor){var a=this.config.descriptor;SBa(a,this.config)}else{a=this.config;var b=a.file,c=U5.s(),d=new V5(a);d.ga(gF(c));d.Ec(c.ba());d.Mb(b.Ma());SBa(d,a);a=d}return a};Y5.prototype.rb=function(){return U5.s()};function Z5(){dT.call(this)}w(Z5,dT);Z5.prototype.S=function(){return"GML"};Z5.prototype.Jb=function(a,b){Z5.C.Jb.call(this,a,b);var c=new T5;b&&this.g(b,c);c.file=a;c.title=a.getFileName();fx({label:"Import GML",icon:"fa fa-file-text",x:"center",y:"center",width:400,"min-width":400,"max-width":800,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0},"<gmlimport></gmlimport>",void 0,void 0,void 0,{config:c})};function $5(a){a=a?a:{};oV.call(this,a);this.g["http://www.opengis.net/gml"].featureMember=yu(oV.prototype.Kn);this.schemaLocation=a.schemaLocation?a.schemaLocation:"http://www.opengis.net/gml http://schemas.opengis.net/gml/2.1.2/feature.xsd"}I($5,oV);g=$5.prototype;
g.Zz=function(a,b){a=su(a,!1).replace(/^\s*|\s*$/g,"");var c=b[0].srsName;b="enu";c&&(c=Cl(c))&&(b=c.Ch);a=a.trim().split(/\s+/);for(var d,e,f=[],h=0,k=a.length;h<k;h++)e=a[h].split(/,+/),c=parseFloat(e[0]),d=parseFloat(e[1]),e=3===e.length?parseFloat(e[2]):0,"en"===b.substr(0,2)?f.push(c,d,e):f.push(d,c,e);return f};g.hN=function(a,b){a=Hu([null],this.GB,a,b,this);return Uk(a[1][0],a[1][1],a[1][3],a[1][4])};g.UF=function(a,b){(a=Hu(void 0,this.Jl,a,b,this))&&b[b.length-1].push(a)};
g.oM=function(a,b){(a=Hu(void 0,this.Jl,a,b,this))&&(b[b.length-1][0]=a)};g.Il={"http://www.opengis.net/gml":{coordinates:zu($5.prototype.Zz)}};g.Ko={"http://www.opengis.net/gml":{innerBoundaryIs:$5.prototype.UF,outerBoundaryIs:$5.prototype.oM}};g.GB={"http://www.opengis.net/gml":{coordinates:yu($5.prototype.Zz)}};
g.Lt={"http://www.opengis.net/gml":{Point:zu(oV.prototype.fA),MultiPoint:zu(oV.prototype.dA),LineString:zu(oV.prototype.Mn),MultiLineString:zu(oV.prototype.cA),LinearRing:zu(oV.prototype.bA),Polygon:zu(oV.prototype.Nn),MultiPolygon:zu(oV.prototype.eA),Box:zu($5.prototype.hN)}};var UBa={image:{type:"circle",color:"rgba(255,255,255,1)",fill:{color:"rgba(255,255,255,1)"}},stroke:{color:"rgba(255,255,255,1)",width:3}};function a6(){this.format=new BV;this.dataProjection=this.features=null;this.j=0}var VBa=E.V("os.ui.file.gml.GMLParser");g=a6.prototype;
g.Cb=function(a){this.features=null;this.j=0;this.dataProjection=null;a instanceof ArrayBuffer&&(a=Dw(a)||null);var b;"string"===typeof a?b=Wx(a):a instanceof Document&&(b=a);if(b){if(b.querySelector("[srsName]"))try{this.dataProjection=this.format.Pn(b)}catch(c){E.hb(VBa,"Failed reading projection from GML",c)}this.dataProjection||(this.dataProjection=this.Ra());(a=b.querySelectorAll("featureMember, featureMembers"))&&0<a.length&&(this.features=[].map.call(a,function(a){return a}))}};
g.pc=function(){this.features=null;this.j=0};g.Cd=function(){return null!=this.features&&this.features.length>this.j};g.Ra=function(){return Cl("EPSG:4326")};
g.Zc=function(){var a=null,b=this.features[this.j++];if(b)try{a=this.format.vg(b,{dataProjection:this.dataProjection,featureProjection:this.Ra()}),null!=a&&(a instanceof hq&&(a=[a]),a.forEach(function(a){var b=a.de,c=a.Z();b&&"geometry"!=b&&c&&(Zu(a,"geometry"),a.tb(c));var f=a.get("styleVariation");df(f)&&(b={},nz(UBa,b),c=b.image,f=hz(f),c.color=f,c.fill.color=f,b.stroke.color=f,a.set("_style",b,!0),a.set("shape","circle"))}))}catch(c){E.error(VBa,"Failed reading feature from GML",c),this.features.length=
0}return a&&1==a.length?a[0]:a};function b6(){a6.call(this)}w(b6,a6);var WBa=/^(geometry|recordtime|time|styleurl)$/i;b6.prototype.Ra=function(){return S};b6.prototype.dispose=function(){this.pc()};b6.prototype.pc=function(){this.features=null;this.j=0};b6.prototype.getColumns=function(){if(!this.g&&this.u){this.g=[];for(var a in this.u)"recordTime"===a?this.g.push(new Wv("TIME","recordTime")):WBa.test(a)||this.g.push(new Wv(a));this.u=null}return this.g};function c6(){g0.call(this);this.g=new T5}w(c6,g0);c6.prototype.ac=function(a){c6.C.ac.call(this,a);this.g=a.parserConfig||new T5};c6.prototype.Dd=function(a){a=c6.C.Dd.call(this,a);null!=this.g.mappings?EM(a,this.g.mappings):DM(a,["Altitude","Orientation","SemiMajor","SemiMinor","DateTime"]);return a};c6.prototype.Jf=function(){return IM("gml")};oV.prototype.Pn=function(a){return Cl(this.srsName||kr(a).getAttribute("srsName")||a.querySelector("[srsName]").getAttribute("srsName"))};lw("application/gml+xml",SS(/^(gml|featurecollection)$/i,/\/(gml|wfs)/i),0,"text/xml");function d6(){Kg.call(this);this.id="gml"}w(d6,Kg);d6.prototype.init=function(){var a=Y;mF(a,new eF("gml",U5,"GML Layers","GML Layers"));nF(a,this.id,V5);Yf(Uf.s(),this.id,c6);a=GM.s();JM(a,this.id.toUpperCase(),!0);KM(a,"application/gml+xml",new Z5);LM(a,this.id,b6)};function e6(){fF.call(this)}w(e6,U4);xa(e6);e6.prototype.Wb=function(a){e6.C.Wb.call(this,a);this.ga("gpx");this.Da("GPX Files")};function f6(){UM.call(this);this.o="gpx"}w(f6,UM);f6.prototype.T=function(){return"Feature Layers"};f6.prototype.Va=function(){var a=f6.C.Va.call(this);a.type="GPX";return a};function XBa(a,b){a.Yc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);T4(a,b)};function g6(a){a=a?a:{};mV.call(this);this.defaultDataProjection=Cl("EPSG:4326");this.g=a.readExtensions}I(g6,mV);var h6=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"];function i6(a,b,c,d){a.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(a.push(d.ele),delete d.ele,b.hasZ=!0):a.push(0);"time"in d?(a.push(d.time),delete d.time,b.hasM=!0):a.push(0);return a}
function j6(a,b,c){var d="XY",e=2;a.hasZ&&a.hasM?(d="XYZM",e=4):a.hasZ?(d="XYZ",e=3):a.hasM&&(d="XYM",e=3);if(4!==e){var f;var h=0;for(f=b.length/4;h<f;h++)b[h*e]=b[4*h],b[h*e+1]=b[4*h+1],a.hasZ&&(b[h*e+2]=b[4*h+2]),a.hasM&&(b[h*e+2]=b[4*h+3]);b.length=b.length/4*e;if(c)for(h=0,f=c.length;h<f;h++)c[h]=c[h]/4*e}return d}function k6(a,b){var c=b[b.length-1],d=a.getAttribute("href");null!==d&&(c.link=d);Gu(YBa,a,b)}function l6(a,b){b[b.length-1].extensionsNode_=a}
function ZBa(a,b){var c=b[0];if(a=Hu({flatCoordinates:[],layoutOptions:{}},$Ba,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=a.layoutOptions;delete a.layoutOptions;d=j6(d,b);var e=new Jo(null);Ko(e,d,b);zG(e,!1,c);c=new hq(e);c.qc(a);return c}}
function aCa(a,b){var c=b[0];if(a=Hu({flatCoordinates:[],ends:[],layoutOptions:{}},bCa,a,b)){b=a.flatCoordinates;delete a.flatCoordinates;var d=a.ends;delete a.ends;var e=a.layoutOptions;delete a.layoutOptions;e=j6(e,b,d);var f=new Mo(null);No(f,e,b,d);zG(f,!1,c);c=new hq(f);c.qc(a);return c}}function cCa(a,b){var c=b[0];if(b=Hu({},dCa,a,b)){var d={};a=i6([],d,a,b);d=j6(d,a);a=new hp(a,d);zG(a,!1,c);c=new hq(a);c.qc(b);return c}}
var eCa={rte:ZBa,trk:aCa,wpt:cCa},fCa=X(h6,{rte:yu(ZBa),trk:yu(aCa),wpt:yu(cCa)}),YBa=X(h6,{text:V(wV,"linkText"),type:V(wV,"linkType")}),$Ba=X(h6,{name:V(wV),cmt:V(wV),desc:V(wV),src:V(wV),link:k6,number:V(uV),extensions:l6,type:V(wV),rtept:function(a,b){var c=Hu({},gCa,a,b);c&&(b=b[b.length-1],i6(b.flatCoordinates,b.layoutOptions,a,c))}}),gCa=X(h6,{ele:V(sV),time:V(rV)}),bCa=X(h6,{name:V(wV),cmt:V(wV),desc:V(wV),src:V(wV),link:k6,number:V(uV),type:V(wV),extensions:l6,trkseg:function(a,b){var c=
b[b.length-1];Gu(hCa,a,b);c.ends.push(c.flatCoordinates.length)}}),hCa=X(h6,{trkpt:function(a,b){var c=Hu({},m6,a,b);c&&(b=b[b.length-1],i6(b.flatCoordinates,b.layoutOptions,a,c))}}),m6=X(h6,{ele:V(sV),time:V(rV)}),dCa=X(h6,{ele:V(sV),time:V(rV),magvar:V(sV),geoidheight:V(sV),name:V(wV),cmt:V(wV),desc:V(wV),src:V(wV),link:k6,sym:V(wV),type:V(wV),fix:V(wV),sat:V(uV),hdop:V(sV),vdop:V(sV),pdop:V(sV),ageofdgpsdata:V(sV),dgpsid:V(uV),extensions:l6});
function iCa(a,b){b||(b=[]);for(var c=0,d=b.length;c<d;++c){var e=b[c];if(a.g){var f=e.get("extensionsNode_")||null;a.g(e,f)}e.set("extensionsNode_",void 0)}}g6.prototype.Ms=function(a,b){if(!(0<=h6.indexOf(a.namespaceURI)))return null;var c=eCa[a.localName];if(!c)return null;a=c(a,[xG(this,a,b)]);if(!a)return null;iCa(this,[a]);return a};g6.prototype.fl=function(a,b){return 0<=h6.indexOf(a.namespaceURI)?"gpx"==a.localName&&(a=Hu([],fCa,a,[xG(this,a,b)]))?(iCa(this,a),a):[]:[]};
function n6(a,b,c){a.setAttribute("href",b);b=c[c.length-1].properties;Iu({node:a},jCa,Eu,[b.linkText,b.linkType],c,kCa)}function o6(a,b,c){var d=c[c.length-1],e=d.node.namespaceURI,f=d.properties;a.setAttributeNS(null,"lat",b[1]);a.setAttributeNS(null,"lon",b[0]);switch(d.geometryLayout){case "XYZM":0!==b[3]&&(f.time=b[3]);case "XYZ":0!==b[2]&&(f.ele=b[2]);break;case "XYM":0!==b[2]&&(f.time=b[2])}b="rtept"==a.nodeName?lCa[e]:mCa[e];d=Fu(f,b);Iu({node:a,properties:f},nCa,Eu,d,c,b)}
var kCa=["text","type"],jCa=X(h6,{text:W(yV),type:W(yV)}),oCa=X(h6,"name cmt desc src link number type rtept".split(" ")),pCa=X(h6,{name:W(yV),cmt:W(yV),desc:W(yV),src:W(yV),link:W(n6),number:W(AV),type:W(yV),rtept:Bu(W(o6))}),lCa=X(h6,["ele","time"]),qCa=X(h6,"name cmt desc src link number type trkseg".split(" ")),tCa=X(h6,{name:W(yV),cmt:W(yV),desc:W(yV),src:W(yV),link:W(n6),number:W(AV),type:W(yV),trkseg:Bu(W(function(a,b,c){Iu({node:a,geometryLayout:b.layout,properties:{}},rCa,sCa,b.getCoordinates(),
c)}))}),sCa=Cu("trkpt"),rCa=X(h6,{trkpt:W(o6)}),mCa=X(h6,"ele time magvar geoidheight name cmt desc src link sym type fix sat hdop vdop pdop ageofdgpsdata dgpsid".split(" ")),nCa=X(h6,{ele:W(zV),time:W(function(a,b){b=new Date(1E3*b);b=b.getUTCFullYear()+"-"+js(b.getUTCMonth()+1)+"-"+js(b.getUTCDate())+"T"+js(b.getUTCHours())+":"+js(b.getUTCMinutes())+":"+js(b.getUTCSeconds())+"Z";a.appendChild(qu.createTextNode(b))}),magvar:W(zV),geoidheight:W(zV),name:W(yV),cmt:W(yV),desc:W(yV),src:W(yV),link:W(n6),
sym:W(yV),type:W(yV),fix:W(yV),sat:W(AV),hdop:W(zV),vdop:W(zV),pdop:W(zV),ageofdgpsdata:W(zV),dgpsid:W(AV)}),uCa={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function vCa(a,b){if(a=a.Z())if(a=uCa[a.T()])return ru(b[b.length-1].node.namespaceURI,a)}
var wCa=X(h6,{rte:W(function(a,b,c){var d=c[0],e=b.Yb();a={node:a,properties:e};if(b=b.Z())b=zG(b,!0,d),a.geometryLayout=b.layout,e.rtept=b.getCoordinates();d=oCa[c[c.length-1].node.namespaceURI];e=Fu(e,d);Iu(a,pCa,Eu,e,c,d)}),trk:W(function(a,b,c){var d=c[0],e=b.Yb();a={node:a,properties:e};if(b=b.Z())b=zG(b,!0,d),e.trkseg=Oo(b);d=qCa[c[c.length-1].node.namespaceURI];e=Fu(e,d);Iu(a,tCa,Eu,e,c,d)}),wpt:W(function(a,b,c){var d=c[0],e=c[c.length-1];e.properties=b.Yb();if(b=b.Z())b=zG(b,!0,d),e.geometryLayout=
b.layout,o6(a,b.getCoordinates(),c)})});g6.prototype.Ho=function(a,b){b=yG(this,b);var c=ru("http://www.topografix.com/GPX/1/1","gpx");c.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi","http://www.w3.org/2001/XMLSchema-instance");c.setAttributeNS("http://www.w3.org/2001/XMLSchema-instance","xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd");c.setAttribute("version","1.1");c.setAttribute("creator","OpenLayers");Iu({node:c},wCa,vCa,a,[b]);return c};function p6(){this.Lc=new g6;this.g=null;this.mB=0}p6.prototype.Cb=function(a){a instanceof ArrayBuffer&&(a=Dw(a)||null);uu(a)?this.g=a:"string"===typeof a&&(this.g=wu(a))};p6.prototype.pc=function(){this.g=null};p6.prototype.Cd=function(){return null!=this.g};
p6.prototype.Zc=function(){var a=null;if(this.g&&(a=this.g,this.g=null,a=this.Lc.vg(a,{featureProjection:S}))){for(var b=[],c=a.length-1;0<=c;c--){var d=a[c],e=d.Z();if(e instanceof zo){var f=e.getCoordinates();f&&(e instanceof Jo||e instanceof Mo?(a.splice(c,1),(e instanceof Jo?[f]:f).forEach(function(a){this.mB++;a.forEach(function(a){var c=new hq;xCa(c,a);c.set("TRACK_ID",this.mB);b.push(c)},this)},this)):e instanceof hp&&xCa(d,f))}}a=a.concat(b)}return a};
function xCa(a,b){var c=b[3];b=new hp(b.slice(0,3));a.tb(b);if(c){if(b=c.extensions){b=jr(b);for(var d=0,e=b.length;d<e;d++){var f=b[d];a.set(f.localName,f.textContent)}}c=c.time;null!=c&&a.set("time",(new Date(1E3*c)).toISOString())}}m6=X(h6,{ele:V(sV),time:V(rV),extensions:l6});m6=X(h6,{ele:V(sV),time:V(rV),extensions:l6});
i6=function(a,b,c,d){a.push(parseFloat(c.getAttribute("lon")),parseFloat(c.getAttribute("lat")));"ele"in d?(a.push(d.ele),delete d.ele,b.hasZ=!0):a.push(0);"time"in d||"extensionsNode_"in d?(a.push({extensions:d.extensionsNode_,time:d.time}),delete d.extensionsNode_,delete d.time,b.hasM=!0):a.push(0);return a};function q6(){g0.call(this)}w(q6,g0);q6.prototype.Jf=function(a){return new p6(a)};q6.prototype.vd=function(a){a=q6.C.vd.call(this,a);if(!od||Bd(10))a.B="document";return a};q6.prototype.Dd=function(a){a=q6.C.Dd.call(this,a);a.A=!0;return a};q6.prototype.N=function(){return new NK};lw("application/vnd.gpx+xml",SS(/^gpx$/i,/\/gpx\//i),0,"text/xml");Q.directive("gpximport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/file/genericfileimport.html",controller:r6,controllerAs:"ctrl"}}]);function r6(a,b){W5.call(this,a,b)}w(r6,W5);r6.$inject=["$scope","$element"];r6.prototype.g=function(){if(this.config.descriptor){var a=this.config.descriptor;a.setActive(!1);XBa(a,this.config)}else{a=this.config;var b=a.file,c=e6.s(),d=new f6;d.ga(gF(c));d.Ec(c.ba());d.Mb(b.Ma());d.Yc("rgba(255,255,255,1)");XBa(d,a);a=d}return a};
r6.prototype.rb=function(){return e6.s()};function s6(){dT.call(this)}w(s6,dT);s6.prototype.S=function(){return"GPX"};s6.prototype.Jb=function(a,b){s6.C.Jb.call(this,a,b);var c=new oM;b&&this.g(b,c);c.file=a;c.title=a.getFileName();fx({label:"Import GPX",icon:"fa fa-file-text",x:"center",y:"center",width:400,"min-width":400,"max-width":800,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0},"<gpximport></gpximport>",void 0,void 0,void 0,{config:c})};function t6(){Kg.call(this);this.id="gpx"}w(t6,Kg);t6.prototype.init=function(){var a=Y;mF(a,new eF("gpx",e6,"GPX Layers","GPX Layers"));nF(a,this.id,f6);Yf(Uf.s(),this.id,q6);a=GM.s();JM(a,this.id.toUpperCase(),!0);KM(a,"application/vnd.gpx+xml",new s6);LM(a,this.id,p6)};function u6(){fF.call(this)}w(u6,U4);xa(u6);u6.prototype.Wb=function(a){u6.C.Wb.call(this,a);this.ga("kml");this.Da("KML Files")};function v6(){UM.call(this);this.o="kml"}w(v6,UM);v6.prototype.T=function(){return"Feature Layers"};v6.prototype.Va=function(){var a=v6.C.Va.call(this);a.type="KML";a.colorControl="colorControl:pickerReset";a.showForceColor=!0;return a};function yCa(a,b){a.Yc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);T4(a,b)};function w6(){X4.call(this);this.log=zCa;this.K=!1;this.G=[];this.ka=0}w(w6,X4);var zCa=E.V("os.ex.ZipExporter");function x6(a,b){b&&void 0===window.zip&&(b=!1,rj(tj,"Compression is not supported in this application! Defaulting to uncompressed output.",Qh,a.log));a.K=b}g=w6.prototype;g.getExtension=function(){return""};g.ba=function(){return"ZIP"};g.Sn=function(a){a="Error creating "+this.ba()+" file: "+a;rj(tj,a,Qh,this.log);this.dispatchEvent(new A("error"))};g.nb=function(){return this.K};
g.reset=function(){w6.C.reset.call(this);this.ka=this.G.length=0};g.ad=function(){this.af();0<this.G.length?this.K?(this.ka=0,zip.createWriter(new zip.BlobWriter,this.Io.bind(this),this.Sn.bind(this))):(this.qg=this.G[0].Pb(),this.dispatchEvent(new A("complete"))):this.Sn("No output created by export process")};g.af=function(){};
g.Io=function(a){if(this.ka<this.G.length){var b=this.G[this.ka++],c=b.getFileName();b=b.Pb();c?"string"===typeof b?a.add(c,new zip.TextReader(b),this.Io.bind(this,a)):b instanceof ArrayBuffer?a.add(c,new zip.ArrayBufferReader(b),this.Io.bind(this,a)):b instanceof Blob?a.add(c,new zip.BlobReader(b),this.Io.bind(this,a)):this.Sn("Unrecognized datatype"):this.Sn("No filename provided")}else a.close(this.BK.bind(this))};g.BK=function(a){this.qg=a;this.dispatchEvent(new A("complete"))};function y6(){w6.call(this);this.log=ACa;this.K=!0;this.g=this.Ia=this.j=null;this.O={};this.O.Folder=this.Gs.bind(this);this.O.Placemark=this.cN.bind(this);this.Ca=this.o=this.fields=null;this.u={};this.I=vc(FB);this.U=null;this.cb={};this.l=null;this.B=!0;this.oa=this.P=this.sa=!1}w(y6,w6);var ACa=E.V("os.ui.file.kml.AbstractKMLExporter");g=y6.prototype;g.reset=function(){y6.C.reset.call(this);this.o=this.g=this.Ia=this.j=null;this.I=vc(FB);this.U=null;this.cb={};this.u={};this.l=null};
g.getExtension=function(){return this.K?"kmz":"kml"};g.ba=function(){return"KML"};g.pk=function(){return this.K?"application/vnd.google-earth.kmz":"application/vnd.google-earth.kml+xml"};
g.af=function(){this.j=Ux("kml","http://www.opengis.net/kml/2.2");var a=kr(this.j);a.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:gx","http://www.google.com/kml/ext/2.2");this.g=gG("Document","http://www.opengis.net/kml/2.2",a);gG("name","http://www.opengis.net/kml/2.2",this.g,this.Ia||this.getName()||"KML Document");gG("visibility","http://www.opengis.net/kml/2.2",this.g,1);this.o=hG("Folder","http://www.opengis.net/kml/2.2",this.j);gG("name","http://www.opengis.net/kml/2.2",this.o,this.Ia||
this.getName()||"KML Document");a=0;for(var b=this.items.length;a<b;a++)BCa(this,this.items[a]);1<this.o.childElementCount&&this.g.appendChild(this.o);a=Xx(this.j);Eb(a,"<?")||(a='<?xml version="1.0"?>'+a);b=new Aw;b.j=this.getName()+".kml";b.g=a;this.G.push(b)};g.bs=function(a){var b=null,c=this.Yu(a);c&&(b=CCa(this,a,c));!b&&this.Ca&&(b=CCa(this,a,this.Ca));return b};
function CCa(a,b,c){if(c){for(var d=[],e=0;e<c.length;e++){var f=a.Gp(b,c[e]);f&&d.push(f)}if(0<d.length)return d.join(" - ")}return null}function BCa(a,b){var c=a.getParent(b);if(c){var d=a.Uu(b);if(d&&a.O[d]){var e=a.D(b);c=gG(d,"http://www.opengis.net/kml/2.2",c,void 0,{id:e});(e=a.bs(b))&&gG("name","http://www.opengis.net/kml/2.2",c,e);(0,a.O[d])(c,b)}}}
g.Gs=function(a,b){var c=this.pq(b)?1:0;gG("visibility","http://www.opengis.net/kml/2.2",a,c);if(a=this.na(b))for(b=0;b<a.length;b++)BCa(this,a[b])};
g.cN=function(a,b){var c=this.ev(b),d=[c],e=this.Ja(b);(this.B||"default"==c)&&d.push(e);var f="default"==c?void 0:this.Rg(b);"icon"==c&&this.sa&&(f=this.Rg(b),d.push(String(Xb(f.href))),"number"===typeof f.scale&&1!=f.scale&&d.push(String(f.scale)));c=d.join("-");if(!(c in this.cb)){d=f;f=hG("Style","http://www.opengis.net/kml/2.2",this.j,void 0,{id:c});var h=gG("IconStyle","http://www.opengis.net/kml/2.2",f);null!=d?(this.B&&gG("color","http://www.opengis.net/kml/2.2",h,e),null!=d.scale&&gG("scale",
"http://www.opengis.net/kml/2.2",h,d.scale),h=gG("Icon","http://www.opengis.net/kml/2.2",h),gG("href","http://www.opengis.net/kml/2.2",h,d.href)):gG("color","http://www.opengis.net/kml/2.2",h,e);d=gG("LineStyle","http://www.opengis.net/kml/2.2",f);gG("color","http://www.opengis.net/kml/2.2",d,e);gG("width","http://www.opengis.net/kml/2.2",d,2);d=gG("PolyStyle","http://www.opengis.net/kml/2.2",f);gG("color","http://www.opengis.net/kml/2.2",d,e);gG("fill","http://www.opengis.net/kml/2.2",d,0);(e=this.g.querySelector("Folder"))?
e.parentNode&&e.parentNode.insertBefore(f,e):this.g.appendChild(f);this.cb[c]=!0}Hb(Tb(c))||gG("styleUrl","http://www.opengis.net/kml/2.2",a,"#"+c);null===this.l&&(this.l=this.dv(b));a:{if(this.l&&(e=this.qd(b,this.l),!isNaN(e))){c=hG("Style","http://www.opengis.net/kml/2.2",this.j);f=gG("IconStyle","http://www.opengis.net/kml/2.2",c);gG("heading","http://www.opengis.net/kml/2.2",f,e%360);e=c;break a}e=null}e&&a.appendChild(e);e=this.pq(b)?1:0;gG("visibility","http://www.opengis.net/kml/2.2",a,e);
e=hG("ExtendedData","http://www.opengis.net/kml/2.2",this.j);if(c=this.getTime(b)){if(kg(c,"os.time.TimeRange")){if((f=c.Sa())&&f!=mg){var k=k||gG("TimeSpan","http://www.opengis.net/kml/2.2",a);gG("begin","http://www.opengis.net/kml/2.2",k,ZF(new Date(f),void 0,void 0,!0))}(f=c.Ya())&&f!=ng&&(k=k||gG("TimeSpan","http://www.opengis.net/kml/2.2",a),gG("end","http://www.opengis.net/kml/2.2",k,ZF(new Date(f),void 0,void 0,!0)))}else(f=c.Sa())&&f!=mg&&(k=gG("TimeStamp","http://www.opengis.net/kml/2.2",
a),gG("when","http://www.opengis.net/kml/2.2",k,ZF(new Date(f),void 0,void 0,!0)));k=gG("Data","http://www.opengis.net/kml/2.2",e,void 0,{name:"TIME"});gG("value","http://www.opengis.net/kml/2.2",k,c.toString())}(k=this.Z(b))&&Iu({node:a},iW,hW,[k],[]);if((k=this.xp(b))&&0<k.length){c=0;for(f=k.length;c<f;c++)if(d=this.qd(b,k[c]),null!=d)if(void 0===l&&"string"===typeof d&&Rx.test(k[c])){if(!Hb(Tb(d))){var l=gG("description","http://www.opengis.net/kml/2.2",a);l.appendChild(this.j.createCDATASection(d))}}else $h(d)&&
(h=gG("Data","http://www.opengis.net/kml/2.2",e,void 0,{name:k[c]}),gG("value","http://www.opengis.net/kml/2.2",h,String(d)));null==this.l||gb(k,this.l)||(l=gG("Data","http://www.opengis.net/kml/2.2",e,void 0,{name:this.l}),gG("value","http://www.opengis.net/kml/2.2",l,String(this.qd(b,this.l))))}0<e.childElementCount&&a.appendChild(e)};g.na=function(){return null};g.Uu=function(){return"Placemark"};g.xp=function(){return this.fields};g.dt=function(a){this.fields=a};
g.Rg=function(){return this.U?this.U:this.I};g.yc=function(a){this.U=a};g.Gp=function(a,b){return"string"==typeof b?this.qd(a,b)||null:null};g.pq=function(){return!0};g.getParent=function(){return this.o};g.Yu=function(){return null};gs=function(a,b,c){return function(d,e){if(void 0!==d)return d=Math.max(Math.log(b/d)/Math.log(a)+e,0).toFixed(1),void 0!==c&&(d=Math.min(d,c)),b/Math.pow(a,d)}};g=Qf.prototype;g.Pg=function(){return this.get("brightness")};g.Qg=function(){return this.get("contrast")};g.sm=function(){return this.get("hue")};g.Tg=function(){return this.get("saturation")};g.Ij=function(a){this.set("brightness",a)};g.Jj=function(a){this.set("contrast",a)};g.gt=function(a){this.set("hue",a)};g.Mj=function(a){this.set("saturation",a)};DN.prototype.QA=function(a){a=J(a).toString();this.G[a]||(this.G[a]=!0,this.render())};DN.prototype.rB=function(a){a=J(a).toString();this.G[a]&&(delete this.G[a],this.render())};jg["ol.layer.Group"]=Rv;rm=function(a,b){b=b||[];b[0]=Nf(a[0]+.5|0,0,255);b[1]=Nf(a[1]+.5|0,0,255);b[2]=Nf(a[2]+.5|0,0,255);b[3]=Math.round(100*Nf(a[3],0,1))/100;return b};tO.prototype.tc=function(a,b,c,d,e){if(this.g){var f=b.viewState.resolution,h=b.viewState.rotation;b=b.skippedFeatureUids;var k=this.W(),l={};return this.g.tc(a,f,h,c,b,function(a){var b=J(a).toString();if(!(b in l))return l[b]=!0,d.call(e,a,k)},null)}};
(function(){var a=iO.prototype.mj;iO.prototype.mj=function(b){b&&L.s().Qa()&&(b.viewState.rotation=0);if(b){var c=this.g,d=b.size[0]+"px",e=b.size[1]+"px";c.style.width!==d&&(c.style.width=d);c.style.height!==e&&(c.style.height=e)}a.call(this,b)}})();var DCa=[{image:{type:"icon",anchorOrigin:"bottom-left",anchorXUnits:"fraction",anchorYUnits:"fraction",crossOrigin:"anonymous",rotation:0,src:"http://maps.google.com/mapfiles/kml/shapes/placemark_circle.png"},stroke:{color:"rgba(255,255,255,1)",width:3}}];function z6(a,b,c){for(var d in a)a[d]&&(a[d][b]=c)}
function A6(a){a=su(a,!1);if(a=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(a))return a=a[1],a=[parseInt(a.substr(6,2),16),parseInt(a.substr(4,2),16),parseInt(a.substr(2,2),16),parseInt(a.substr(0,2),16)/255],rm(a,a)}z6(cW,"color",V(A6));z6(Csa,"color",V(A6));z6(Gsa,"color",V(A6));function ECa(a){a=Hu({},FCa,a,[]);var b=null;if(null!=a.when)b=new lg(a.when);else if(null!=a.begin||null!=a.end)b=new qg(a.begin,a.end);return b}var GCa=X(SV,{refreshInterval:V(uV),refreshMode:V(wV),viewRefreshMode:V(wV),viewRefreshTime:V(uV)});
Zh(GCa,dW,!1);var HCa=X(SV,{color:V(A6)});Zh(HCa,bW,!1);var ICa=X(SV,{TimeStamp:V(ECa,"recordTime"),TimeSpan:V(ECa,"recordTime")}),FCa=X(SV,{when:V(jG),begin:V(jG),end:V(jG)});Zh(ICa,eW,!1);function JCa(a,b){var c=gsa(a,b);(a=Hu({},KCa,a,b))&&c.qc(a);return c}var LCa=X(SV,{Track:yu(XV)}),KCa=X(SV,{altitudeMode:V(wV),interpolate:V(pV)},X(RV,{interpolate:V(pV)})),MCa=X(SV,{MultiTrack:V(JCa,"geometry"),Track:V(XV,"geometry")},X(RV,{MultiTrack:V(JCa,"geometry")})),NCa=X(SV,{coord:fsa});Zh(LCa,hsa,!1);
Zh(NCa,isa,!1);Zh(MCa,eW,!0);hW=function(a,b){b=b[b.length-1].node.namespaceURI;var c=a.T(),d=lW[c];a instanceof zo&&(a=a.layout,"XYM"===a||"XYZM"===a)&&("LineString"===c?(d="gx:Track",b="http://www.google.com/kml/ext/2.2"):"MultiLineString"===c&&(d="gx:MultiTrack",b="http://www.google.com/kml/ext/2.2"));return ru(b,d)};function OCa(a){for(var b=su(a,!1).trim(),c=null,d=a;d&&!c;)c=d.UC,d=d.parentNode;return!a.baseURI||c&&b in c?b:ih(a.baseURI,b).toString()}z6(eW,"styleUrl",V(OCa));var PCa=X(SV,{href:V(OCa)});
Zh(PCa,dW,!0);Zh(PCa,Bsa,!0);function QCa(a,b){if(b instanceof Jo){var c=b.flatCoordinates;b=b.stride;for(var d=0;d<c.length;d+=b){var e=ru("http://www.google.com/kml/ext/2.2","gx:coord"),f=c[d]+" "+c[d+1];3<b&&(f+=" "+c[d+2]);yV(e,f);f=ru("http://www.opengis.net/kml/2.2","when");var h=(new Date(c[d+b-1])).toISOString();yV(f,h);a.appendChild(e);a.appendChild(f)}}}
var RCa=X(SV,{MultiGeometry:W(function(a,b,c){if(b instanceof Zo){a={node:a};b=dp(b);for(var d=0,e=b.length;d<e;d++)Iu(a,iW,hW,[b[d]],c)}else gW(a,b,c)})},X(RV,{MultiTrack:W(function(a,b,c){if(b instanceof Mo){b=Oo(b);for(var d=0;d<b.length;d++){var e=ru("http://www.google.com/kml/ext/2.2","gx:Track");QCa(e,b[d],c);a.appendChild(e)}}}),Track:W(QCa)}));Zh(RCa,iW,!0);lW.GeometryCollection="MultiGeometry";
VV=function(a){a=su(a,!1);for(var b=[],c=/^[^\d+.-]*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*,\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s*,\s*([+\-]?\d*\.?\d*(?:e[+\-]?\d+)?))?\s*/i,d;d=c.exec(a);)b.push(parseFloat(d[1]),parseFloat(d[2]),d[3]?parseFloat(d[3]):0),a=a.substr(d[0].length);return b};z6(esa,"coordinates",zu(VV));z6(ZV,"coordinates",zu(VV));function SCa(a){return sV(a)}z6(bW,"scale",V(SCa));z6(cW,"scale",V(SCa));z6(Dsa,"Url",function(a,b){Gu(dW,a,b)});
z6(qsa,"IconStyle",function(a,b){if(a=Hu({},bW,a,b)){b=b[b.length-1];var c="Icon"in a?a.Icon:{};var d=(d=c.href)?d:"__ignore__";var e=a.hotSpot;if(e){var f=[e.x,e.y];var h=e.xunits;var k=e.yunits}var l;e=c.x;var m=c.y;void 0!==e&&void 0!==m&&(l=[e,m]);var n;e=c.w;c=c.h;void 0!==e&&void 0!==c&&(n=[e,c]);var p;c=a.heading;void 0!==c&&(p=Of(c));c=a.scale;e=d?kA(d):void 0;"none"==e&&(e=void 0);f=new eA({anchor:f,anchorOrigin:"bottom-left",anchorXUnits:h,anchorYUnits:k,color:a.color,crossOrigin:e,offset:l,
offsetOrigin:"bottom-left",rotation:p,scale:c,size:n,src:d});b.imageStyle=f}});Q.directive("kmlexport",[function(){return{restrict:"E",scope:{exporter:"=",simple:"=?"},templateUrl:"v1541734487/views/plugin/kml/kmlexport.html",controller:B6,controllerAs:"kmlexport"}}]);
function B6(a){this.v=a;this.g=a.exporter;this.icon={path:this.g.I?this.g.I.href:HB().path};this.useItemColor=this.g.B;this.useItemIcon=this.g.sa;this.compress=this.g.K;this.exportEllipses=this.g.P;this.useCenterPoint=this.g.oa;this.iconSet=JB;this.iconSrc=IB;a.$watch("kmlexport.icon.path",this.j.bind(this));a.$watch("kmlexport.useItemColor",this.j.bind(this));a.$watch("kmlexport.useItemIcon",this.j.bind(this));a.$watch("kmlexport.compress",this.j.bind(this));a.$watch("kmlexport.exportEllipses",this.j.bind(this));
a.$watch("kmlexport.useCenterPoint",this.j.bind(this));a.$on("$destroy",this.l.bind(this));this.j()}B6.$inject=["$scope"];B6.prototype.l=function(){this.g=this.v=null};B6.prototype.j=function(){this.g&&this.v&&(this.g.B=this.useItemColor,this.g.sa=this.useItemIcon,x6(this.g,this.compress),this.g.P=this.exportEllipses,this.g.oa=this.useCenterPoint,this.icon&&this.g.yc({href:this.icon.path}))};function pQ(){y6.call(this);this.log=TCa;this.A={};this.aa={}}w(pQ,y6);var TCa=E.V("plugin.file.kml.KMLExporter");g=pQ.prototype;g.reset=function(){pQ.C.reset.call(this);this.A={};this.aa={}};g.ti=function(){return!0};g.Ja=function(a){a=Gy(a,C6(a));if(!a||"string"!=typeof a&&!q(a))a="rgba(255,255,255,1)";return gz(a)};g.qd=function(a,b){return By(a,b)};
g.Gp=function(a,b){return"object"==typeof b&&b.column?(a=this.qd(a,b.column),null!=a?(b.showColumn?b.column+": ":"")+String(a):null):pQ.C.Gp.call(this,a,b)};g.D=function(a){return a.D()};g.xp=function(a){a=C6(a);var b=null;a&&(b=a.D(),b in this.aa||(this.aa[b]=Ox(a)||[]),b=this.aa[b]);return b||this.fields};
g.getParent=function(a){var b=this.g;if(b&&(a=C6(a))){var c=a.D();c in this.A?b=this.A[c]:(b=gG("Folder","http://www.opengis.net/kml/2.2",b),gG("name","http://www.opengis.net/kml/2.2",b,a.S()),b=this.A[c]=b)}return b};g.Yb=function(){for(var a=(void 0).Yb(),b=jc(a),c=0,d=b.length;c<d;c++){var e=b[c];(Eb(e,"_")||Px(e))&&delete a[e]}return a};g.ev=function(a){var b="default",c=this.Z(a);!c||"Point"!=c.T()&&"GeometryCollection"!=c.T()||(a=C6(a),b="Icon"==(a?a.Jd:null)?"icon":"point");return b};
g.getTime=function(a){a=a.get("recordTime");return F(a,"os.time.ITime")?a:null};g.Z=function(a){var b;a&&((b=a.get("geometry"))&&(b=b.clone().toLonLat()),this.P&&(a=xy(a),!a||a instanceof hp||(this.oa&&b instanceof hp?b=new Zo([a,b]):b=a)));return b};g.dv=function(a){if(a&&(a=Hy(a))&&a.showRotation)return a.rotationColumn};function C6(a){var b=null;a&&(a=a.get("sourceId"),"string"===typeof a&&(b=Fy.N(a)));return b}g.Ug=function(){return'<kmlexport exporter="exporter" simple="simple"></kmlexport>'};
g.Yu=function(a){if(a){var b=a.get("sourceId");if(b&&"draw"!=b){if(a instanceof Ry||!(b in this.u)){var c=vz(wz.s(),b);a=a.get("_style");c&&c.labels&&UCa(c.labels)?this.u[b]=c.labels:a&&q(a)?(c=eb(a,Hz))&&(this.u[b]=c.labels):this.u[b]=null}return this.u[b]}}return null};function UCa(a){return a?a.some(function(a){return"object"==typeof a&&a.column}):!1}g.tt=function(){return!0};function D6(){this.Lc=new CV({showPointNames:!1});this.g=null}D6.prototype.Cb=function(a){a instanceof ArrayBuffer&&(a=Dw(a)||null);uu(a)?this.g=a:"string"===typeof a&&(this.g=wu(a))};D6.prototype.pc=function(){this.g=null};D6.prototype.Cd=function(){return null!=this.g};D6.prototype.Zc=function(){var a=null;this.g&&(a=this.g,this.g=null,a=this.Lc.vg(a));return a};function E6(a){gT.call(this,a);this.g=this.G=null;this.B=this.O=0}w(E6,gT);g=E6.prototype;g.J=function(){E6.C.J.call(this);this.G=null};g.getColumns=function(){return this.g};g.sj=function(a){var b=this.j,c=this.G;b.A=c;b.U=!!c;E6.C.sj.call(this,a)};
g.Nk=function(a){this.G=this.j.A;this.g=this.j.getColumns();this.O=this.j.oa;0<this.B&&rj(tj,(1===this.B?"An area was":this.B+" areas were")+" removed from the original due to invalid topology. One possible  reason is a repeating or invalid coordinate.",Rh);E6.C.Nk.call(this,a)};
g.Vs=function(a){var b=null;a instanceof ko&&a.getFeature()&&(b=a.getFeature());if(b){a=this.B;var c=b,d=c.Z(),e=0;if(d instanceof Zo){c=d.g;for(var f=c.length;0<f;f--)if(c[f]instanceof qp||c[f]instanceof vp)d=sv(c[f],!1,!0),void 0!==d?c[f]=d:(c.splice(f,1),e++)}else if(d instanceof qp||d instanceof vp)d=sv(d,!1,!0),void 0===d&&e++,c.tb(d);this.B=a+e;E6.C.Vs.call(this,b)}};g.As=function(a){var b=null;a.getFeature()&&(b=a.getFeature());b&&(this.o||this.l)&&E6.C.As.call(this,b)};function oI(a){var b=a.imageExtent,c=void 0!==a.crossOrigin?a.crossOrigin:null,d=void 0!==a.imageLoadFunction?a.imageLoadFunction:Oza;nI.call(this,{attributions:a.attributions,logo:a.logo,projection:Cl(a.projection)});this.wa=new l3(b,void 0,1,a.url,c,d);this.l=a.imageSize?a.imageSize:null;H(this.wa,"change",this.j,this)}I(oI,nI);
oI.prototype.j=function(a){if(2==this.wa.getState()){var b=this.wa.Y(),c=this.wa.Pa();if(this.l){var d=this.l[0];var e=this.l[1]}else d=c.width,e=c.height;b=Math.ceil(bl(b)/(cl(b)/e));if(b!=d){b=um(b,e);var f=b.canvas;b.drawImage(c,0,0,d,e,0,0,f.width,f.height);this.wa.setImage(f)}}nI.prototype.j.call(this,a)};function F6(){this.nb=!1}F6.prototype.pause=wa;F6.prototype.reset=wa;function G6(a){this.nb=!1;this.A=Math.max(a,0);this.l=void 0;this.o=0;this.j=void 0}w(G6,F6);g=G6.prototype;g.Fa=function(){return this.nb?(this.hm(),Sc()):new Kc(this.hm,this)};g.pause=function(){if(void 0!==this.j){clearTimeout(this.j);this.j=void 0;var a=Date.now()-this.o;this.l=Math.max(H6(this)-a,0)}};g.reset=function(){void 0!==this.j&&(clearTimeout(this.j),this.j=void 0);this.l=void 0;this.o=0};function H6(a){return void 0!==a.l?a.l:a.A}
g.hm=function(a,b){var c=H6(this);0<c?(this.j=setTimeout(this.gn.bind(this,a,b),c),this.o=Date.now()):this.gn(a,b)};g.gn=function(a){this.reset();a&&a()};function I6(a){G6.call(this,a.duration||5E3);"smooth"!==a.flightMode&&(a.flightMode="bounce");this.g=a}w(I6,G6);I6.prototype.Fa=function(){var a=H6(this);if(0<a){var b=fi(this.g);b.duration=a;b.center&&(b.center=Ll(b.center,"EPSG:4326",S));dR(L.s(),b)}return I6.C.Fa.call(this)};I6.prototype.pause=function(){void 0!==this.j&&foa();I6.C.pause.call(this)};I6.prototype.reset=function(){void 0!==this.j&&foa();I6.C.reset.call(this)};function J6(a,b,c){C.call(this);this.name=a||"Unnamed Tour";this.description=b||"";this.playing=this.repeat=!1;this.l=c||[];this.j=0;this.g=void 0}w(J6,C);function K6(a,b){a.playing!==b&&(a.playing=b,a.dispatchEvent("playing"))}g=J6.prototype;g.play=function(){if(this.playing)this.reset(),Dc(this.play,this);else{K6(this,!0);for(var a=0;a<this.j;a++){var b=this.l[a];b&&b.nb&&b.Fa()}this.yz()}};g.pause=function(){K6(this,!1);this.g&&(this.g.cancel(),this.g=void 0);this.l.forEach(function(a){a.pause()})};
g.reset=function(){this.j=0;K6(this,!1);this.g&&(this.g.cancel(),this.g=void 0);this.l.forEach(function(a){a.reset()})};g.yz=function(){if(this.playing){var a=this.l[this.j];a?this.g=a.Fa().then(this.jI,this.iI,this):this.reset()}};g.jI=function(){this.g=void 0;this.j++;this.j>this.l.length&&(this.repeat?this.j=0:this.reset());Dc(this.yz,this)};g.iI=function(){this.playing&&this.reset()};function L6(a){this.nb=!1;this.j=a;this.g=!1}w(L6,F6);L6.prototype.Fa=function(){return new Kc(function(a){Dc(function(){this.g||(this.g=!0,this.j.pause());a()},this)},this)};L6.prototype.reset=function(){this.g=!1};function M6(a,b){G6.call(this,b||0);this.nb=!0;this.g=void 0;this.u=a}w(M6,G6);g=M6.prototype;g.hm=function(a,b){this.g?VCa(this):M6.C.hm.call(this,a,b)};g.gn=function(a,b){M6.C.gn.call(this,a,b);VCa(this)};function VCa(a){a.g||(a.g=document.createElement("audio"),a.g.src=a.u,a.Bt(),M.H("mute",a.Bt,!1,a));a.g.play()}g.Bt=function(){if(this.g){var a=k_.s();this.g.muted=a.g}};g.pause=function(){M6.C.pause.call(this);this.g&&this.g.pause()};
g.reset=function(){M6.C.reset.call(this);this.g&&(M.M("mute",this.Bt,!1,this),this.g.pause(),this.g=void 0)};var N6=SV.concat(RV),XCa=X(N6,{Playlist:function(a,b){if(a=Hu([],WCa,a,b))b=b[b.length-1],b instanceof J6&&(b.l=a,b.reset())},description:V(wV),name:V(wV)}),WCa=X(N6,{FlyTo:yu(function(a,b){var c;if(a=Hu({},YCa,a,b)){(c=a.Camera)||(c=a.LookAt||{});b=1E3*(a.duration||0);var d="smooth"===a.flyToMode?"smooth":"bounce",e;c.longitude&&c.latitude&&(e=[c.longitude,c.latitude]);c=new I6({center:e,altitude:c.altitude||0,duration:b,heading:c.heading||void 0,pitch:(c.tilt||0)-90,range:c.range||void 0,roll:c.roll||
void 0,flightMode:d,positionCamera:!!a.Camera})}return c}),SoundCue:yu(function(a,b){var c;a=Hu({},ZCa,a,b);a.href&&(c=new M6(a.href,1E3*(a.delayedStart||0)));return c}),TourControl:yu(function(a,b){var c;a=1<b.length?b[b.length-2]:void 0;a instanceof J6&&(c=new L6(a));return c}),Wait:yu(function(a,b){a=1E3*(Hu({},$Ca,a,b).duration||0);return new G6(a)})}),YCa=X(N6,{duration:V(sV),flyToMode:V(wV),Camera:V(function(a,b){return Hu({},aDa,a,b)}),LookAt:V(function(a,b){return Hu({},bDa,a,b)})}),aDa=X(SV,
{longitude:V(sV),latitude:V(sV),altitude:V(sV),heading:V(sV),tilt:V(sV),roll:V(sV),altitudeMode:V(wV)}),bDa=X(SV,{longitude:V(sV),latitude:V(sV),altitude:V(sV),heading:V(sV),tilt:V(sV),range:V(sV),altitudeMode:V(wV)}),ZCa=X(N6,{href:V(wV),delayedStart:V(sV)}),$Ca=X(N6,{duration:V(sV)});function O6(a){k2.call(this);this.Ga("off");this.log=cDa;this.K=0;this.Eb='<i class="fa fa-link fa-fw compact" title="KML network link - enable to load"></i>';this.u=this.o=null;this.pb=4E3;this.Vb=0;this.gc="onChange";this.l=null;this.oa=a;P6(this)}w(O6,k2);var cDa=E.V("plugin.file.kml.ui.KMLNetworkLinkNode");g=O6.prototype;g.J=function(){O6.C.J.call(this);this.o&&(this.o.dispose(),this.o=null);this.u&&(this.u.dispose(),this.u=null);this.l&&(this.l.dispose(),this.l=null)};
function dDa(a){var b=Ia(),c=" in "+$F(new Date(b-a.K));a.K=b;return c}function Q6(a,b){b='Unable to load KML network link "'+a.ba()+'"'+(" ("+a.oa+")")+": "+b;E.error(a.log,b);rj(qj.s(),b,Qh);a.Ga("off");R6(a,'<i class="fa fa-unlink fa-fw compact text-danger" title="Unable to load network link"></i>');a.Wa(!1)}g.Sg=function(){return"onInterval"==this.gc?this.pb:0};g.ef=function(a){this.pb=Math.max(a,this.Vb);P6(this)};g.refresh=function(){this.l?Gh(this.l):this.Jz()};
function P6(a){var b=!1;a.l&&(b=a.l.isActive(),a.l.dispose());a.l=new Fh(a.Jz,a.Sg(),a);b&&a.l.start()}g.Jz=function(){if(!this.u){this.u=new Ni(this.oa);if(!od||Bd(10))this.u.B="arraybuffer";this.u.H("success",this.FM,!1,this);this.u.H("error",this.GM,!1,this)}this.source?(e2(this.source,this),this.Wa(!0),R6(this,'<i class="fa fa-link fa-fw compact text-warning" title="Loading network link..."></i>'),this.K=Ia(),this.u.load()):Q6(this,"source is null")};
g.Cb=function(a){this.source&&yf(this.source,"kmlSource:refresh",this.Dx,this);O6.C.Cb.call(this,a);this.source&&H(this.source,"kmlSource:refresh",this.Dx,this)};g.Dx=function(){"off"!=this.getState()&&this.refresh()};
g.Ga=function(a){var b=this.getState();O6.C.Ga.call(this,a);a=this.getState();b!=a&&("off"==a?(this.l&&this.l.stop(),this.u&&this.u.abort(),this.o&&this.o.stop(),this.source&&e2(this.source,this),R6(this,'<i class="fa fa-link fa-fw compact" title="KML network link - enable to load"></i>'),this.Wa(!1)):this.source&&(this.o||(this.o=new E6(new S6({})),a=xB(this.oa),this.o.K=a,this.o.H(RK,this.KI,!1,this),this.o.H("complete",this.EM,!1,this)),this.l&&!this.l.isActive()&&"off"==b&&Gh(this.l)))};
g.FM=function(){var a="Request complete for "+this.ba()+(" ("+this.oa+")")+dDa(this);E.info(this.log,a);a=this.u.g;Ri(this.u);a?this.o?SK(this.o,a):Q6(this,"importer is null"):Q6(this,"response is empty")};g.GM=function(){Q6(this,this.u?this.u.u.join(" "):"unknown error");Ri(this.u)};g.KI=function(){this.o&&this.source&&d2(this.source,this.o.getData())};
g.EM=function(){var a="Import complete for "+this.ba()+(" ("+this.oa+")")+dDa(this);E.info(this.log,a);this.Wa(!1);var b=(a=this.na())&&0<a.length?a[0]:null,c=this.o.G,d=c?c.na():[];if(b!==(d&&0<d.length?d[0]:null)||a&&a.length!=d.length)this.Bc(d?d:null),this.collapsed=null==c;"off"!=this.getState()?(R6(this,'<i class="fa fa-link fa-fw compact text-success" title="KML network link"></i>'),this.Vb=Math.max(this.o.O,0),this.ef(this.pb),this.l&&0<this.Sg()&&this.l.start()):this.source&&e2(this.source,
this)};g.Kc=function(){return this.Eb};function R6(a,b){a.Eb=b;a.dispatchEvent(new K("icons"))};Q.directive("kmltournodeui",[function(){return{restrict:"E",replace:!0,template:'<span class="slick-node-ui" ng-if="ctrl.show()"><span ng-if="!ctrl.isPlaying()" ng-click="ctrl.play()" title="Play the tour"><i class="fa fa-fw fa-play c-glyph"></i></span><span ng-if="ctrl.isPlaying()" ng-click="ctrl.pause()" title="Pause the tour"><i class="fa fa-fw fa-pause c-glyph"></i></span><span ng-click="ctrl.reset()" title="Reset the tour"><i class="fa fa-fw fa-undo c-glyph"></i></span></span>',controller:T6,
controllerAs:"ctrl"}}]);function T6(a,b){FE.call(this,a,b);a=(a=this.scope.item)?a.l:void 0;(this.g=a)&&this.g.H("playing",this.l,!1,this)}w(T6,FE);T6.$inject=["$scope","$element"];T6.prototype.destroy=function(){T6.C.destroy.call(this);this.g&&(this.g.M("playing",this.l,!1,this),this.g=void 0)};T6.prototype.l=function(){R(this.scope)};T6.prototype.Bd=function(){return null!=this.g&&this.g.playing};T6.prototype.isPlaying=T6.prototype.Bd;T6.prototype.show=function(){return T6.C.show.call(this)||this.Bd()};
T6.prototype.show=T6.prototype.show;T6.prototype.play=function(){this.g&&this.g.play()};T6.prototype.play=T6.prototype.play;T6.prototype.pause=function(){this.g&&this.g.pause()};T6.prototype.pause=T6.prototype.pause;T6.prototype.reset=function(){this.g&&this.g.reset()};T6.prototype.reset=T6.prototype.reset;function U6(a){k2.call(this);qo(this,!1);this.j="<kmltournodeui></kmltournodeui>";this.l=a}w(U6,k2);U6.prototype.J=function(){U6.C.J.call(this);z(this.l);this.l=void 0};U6.prototype.ba=function(){return this.l?this.l.name:U6.C.ba.call(this)};U6.prototype.Ve=function(){return this.l?this.l.description:U6.C.Ve.call(this)};U6.prototype.Kc=function(){return'<i class="fa fa-video-camera fa-fw" title="KML Tour"></i>'};function V6(a){a=null!=a?a:{};this.u=null!=a.filter?a.filter:!1;this.g=null!=a.xv?a.xv:!1;this.o=a.param||"filter";this.A=null!=a.iB?a.iB:!0;Hi.call(this,"OGCFilter",100)}w(V6,Hi);V6.prototype.j=function(a){a=a.g;var b=(this.A?"{temporal}":"")+(this.u?"{customFilter}":"");b||this.g?a.set(this.o,'<Filter xmlns="http://www.opengis.net/ogc" xmlns:gml="http://www.opengis.net/gml">'+(this.g||b?"<And>":"")+(this.g?"{identifiers}":"")+(b?b:"")+(this.g||b?"</And>":"")+"</Filter>"):a.remove(this.o)};Q.directive("confirmcolumn",[function(){return{replace:!0,restrict:"E",templateUrl:"v1541734487/views/window/confirmcolumn.html",controller:eDa,controllerAs:"confirm"}}]);function eDa(a){this.column=null;a.$watch("confirm.column",function(b,c){b!=c&&(a.$parent.confirmValue=b)});a.$emit("window.ready")}eDa.$inject=["$scope"];var W6=E.V("plugin.track"),fDa="name description ELAPSED_DISTANCE TOTAL_DISTANCE ELAPSED_DURATION TOTAL_DURATION LAT LON LAT_DDM LON_DDM LAT_DMS LON_DMS MGRS ALTITUDE".split(" "),gDa={stroke:{width:3},zIndex:0},hDa={geometry:"_currentPosition",image:{type:"icon",scale:1,src:FB.href}};function iDa(a){return a?"track"===a.get("sourceId"):!1}
function X6(a){var b=L.s();var c=b.W("track");!c&&a&&(a={animate:!0,color:"rgba(255,255,255,1)",collapsed:!1,columns:fDa,editable:!0,explicitType:"",id:"track",layerType:"Feature Layers",loadOnce:!0,provider:Wh()||null,showLabels:!1,showRoot:!1,size:3,title:"Tracks",type:"track"},(c=zg(a))&&eM(b,c));if(b=c)if(b=b.N())return b.P;return null}function jDa(a,b){return b?b.get(a):void 0}function kDa(a){if(a=a.get("recordTime"))return a.Sa()}
function lDa(a,b){a=a[a.length-1];b=b[b.length-1];return a>b?1:a<b?-1:0}function mDa(a,b){var c="recordTime"==b?kDa:jDa.bind(null,b);a=a.map(function(a){var b=c(a);if(null!=b){a=a.Z();if(a instanceof hp)var d=Bo(a);else if(a instanceof Zo){a=a.g;for(var h=0;h<a.length;h++){var k=a[h];if(k instanceof hp)if(d){d=void 0;break}else d=Bo(k)}}else a instanceof jp&&(h=a.flatCoordinates,h.length===a.stride&&(d=h.slice()));d&&(3>d.length&&d.push(0),d.push(b));return d}}).filter($u);a.sort(lDa);return a}
function nDa(a){var b=a.hO||"recordTime",c,d=a.geometry;if(!d&&a.features&&a.features.length){var e=mDa(a.features,b);if(e.length){d=new Jo(e,"XYZM");var f=a.features[0].get("color");(e=Ey(a.features[0]))&&(c=e?e.Ja():void 0)}}if(d){d instanceof Jo&&(d.toLonLat(),d=oq(d),Ap(d));d.set("_normalized",!0);var h;"recordTime"===b?h=new Ry(d,oDa,pDa,qDa):h=new hq(d);d=a.id||"track-"+Vb();h.ga(d);h.set("ID",d);Y6(h);h.set("name",a.name||d);h.set("_sortField",b);Z6(h,!0);$6(h);rDa(h);b=fi(gDa);d=fi(hDa);f=
a.color||f||c||"rgba(255,255,255,1)";jz(b,f,["stroke"]);jz(d,f,["image"]);h.set("_style",[b,d]);Ny(h);d.labels=[{column:a.label||"name",showColumn:!1}];h.set("shape","Icon");sz(h);return h}}function sDa(a){var b=a.get("_currentPosition");a.set("_currentPosition",void 0);z(b);b=a.get("_currentLine");a.set("_currentLine",void 0);z(b)}
function Y6(a){var b=a.get("_currentLine")||a.Z();if(b){var c=b.flatCoordinates;c=c.slice(c.length-b.stride);var d=a.get("_currentPosition");d?ip(d,b.layout,c):(d=new hp(c),a.set("_currentPosition",d),a.set("_labelGeometry","_currentPosition"));Ay(a,!0,d);sz(a)}}
function Z6(a,b){var c=au.s();b&&(b=a.Z(),b=tDa(b),0<b?(b=Math.round(100*b)/100,a.set("TOTAL_DISTANCE",du(c,b,3))):a.set("TOTAL_DISTANCE","Unknown"));(b=a.get("_currentLine"))?(b=tDa(b),0<b?(b=Math.round(100*b)/100,a.set("ELAPSED_DISTANCE",du(c,b,3))):a.set("ELAPSED_DISTANCE","Not Started")):a.set("ELAPSED_DISTANCE",a.get("TOTAL_DISTANCE"))}
function $6(a){var b=a.Z(),c=a.get("_sortField");if(b&&"recordTime"==c){c=b.flatCoordinates;b=c[b.stride-1];c=c[c.length-1];var d=c-b;a.set("TOTAL_DURATION",0<d?moment.duration(d).humanize():"Unknown");null!=a.get("_currentLine")?(b=Math.min(c,vg.s().g)-b,a.set("ELAPSED_DURATION",0<b?moment.duration(b).humanize():"Not Started")):a.set("ELAPSED_DURATION",a.get("TOTAL_DURATION"))}else a.set("ELAPSED_DURATION","Unknown"),a.set("TOTAL_DURATION","Unknown")}
function rDa(a){if("recordTime"==a.get("_sortField")){var b=a.get("recordTime"),c=a.Z();if(c){var d=c.flatCoordinates;d=new qg(d[c.stride-1],d[d.length-1])}a.set("recordTime",d);b==d||d&&b&&d.equals(b)||(a=Ey(a))&&a.Rn()}}function tDa(a){var b=0;a instanceof Jo?(a.toLonLat(),b=uDa(a.getCoordinates()),Ap(a)):a instanceof Mo&&(a.toLonLat(),b=vDa(a.getCoordinates()),Ap(a));return b}
function uDa(a){var b=0;if(a&&1<a.length)for(var c=1;c<a.length;c++)b+=osasm.geodesicInverse(a[c-1],a[c]).distance;return b}function vDa(a){var b=0;a&&a.forEach(function(a){b+=uDa(a)});return b}
function wDa(a,b){return new Kc(function(c,d){var e=b||"recordTime",f=("recordTime"==e?kDa:jDa.bind(null,e))(a);if(null==f||""==f){if(f=Ey(a))f=f.getColumns().slice(),f.sort(lfa.bind(null,"name")),xDa(f,"recordTime"==e?"Track features do not have a time component. Please choose a column that can be used to sort points in the track.":'Features do not have a value defined for the sort field "'+e+'". Please choose a new column to sort points in the track:').then(function(b){wDa(a,b.field).then(function(a){c(a)},
function(){d("cancel")})},function(){d("cancel")})}else c(e)})}function yDa(a){return new Kc(function(b,c){qH({confirm:b,cancel:c,defaultValue:a,select:!0,prompt:"Please provide a name for the track:",windowOptions:{label:"Track Name",icon:"fa fa-share-alt",modal:!0}})})}
function xDa(a,b){return new Kc(function(c,d){c={confirm:c,cancel:d,columns:a,prompt:b,windowOptions:{label:"Choose Track Sort Column",width:400,icon:"fa fa-warning",modal:!0}};d={columns:c.columns,prompt:c.prompt};var e=c.windowOptions||{};e.label=e.label||"Choose Column";e.height="auto";gD({confirm:c.confirm,confirmValue:c.defaultValue,cancel:c.cancel,prompt:"<confirmcolumn></confirmcolumn>",windowOptions:e},d)})}
function oDa(a){var b=a.get("_style");if(b=b?b[0]:null)b.geometry="_currentLine",y2(a),sz(a)}function pDa(a,b){sDa(a);if(!b){if(b=(b=a.get("_style"))?b[0]:null)delete b.geometry,sz(a);Z6(a);$6(a);Y6(a)}}function qDa(a,b){if("recordTime"===a.get("_sortField")){var c=a.Z();if(c instanceof Jo||c instanceof Mo){var d=c.flatCoordinates,e=c.stride,f=c instanceof Mo?c.zd():void 0;c=c.layout;!d||"XYM"!==c&&"XYZM"!==c||(c=So(d,b,e,e-1),0>c&&(c=-c-1),zDa(a,b,c,d,e,f),Z6(a),$6(a),a.ia())}}}
function ADa(a,b,c,d){if(0===b)var e=c.slice(0,d);else if(b===c.length)e=c.slice(c.length-d);else{var f=c[b-1];f=(a-f)/(c[b+d-1]-f);var h=b-d;e=c[h];var k=c[h+1];e=[e+f*(c[b]-e),k+f*(c[b+1]-k)];4===d&&(d=c[h+2],e.push(d+f*(c[b+2]-d)));e.push(a)}return e}
function zDa(a,b,c,d,e,f){var h=a.get("_currentLine"),k=4===e?"XYZM":"XYM";h||(h=f?new Mo([],k):new Jo([],k),a.set("_currentLine",h));var l=h.flatCoordinates;if(l.length!==c||l[l.length-e]!==d[d.length-e]){l.length>e&&(l.length-=e);if(l.length>=c)l.length=c;else if(0<c)for(var m=l.length;m<c;m++)l.push(d[m]);f=f?f.filter(function(a){return a<=l.length}):void 0;if(l.length<d.length&&(!f||!f.length||f[f.length-1]!==l.length)){if(b=ADa(b,c,d,e))for(m=0;m<b.length;m++)l.push(b[m]);f&&f.push(l.length)}Y6(a);
h.set("_dirty",!0);h instanceof Jo?Ko(h,k,l):f&&No(h,k,l,f)}}function BDa(a){for(var b=a.length+1,c=0;c<a.length;c++){var d=a[c],e=d.get("_style");q(e)||(e=[e]);for(var f=0;f<e.length;f++){var h=e[f];h.zIndex=a.length-c;"_currentPosition"==h.geometry&&(h.zIndex+=b)}sz(d);d.ia()}};function S6(){C.call(this);this.l=null;this.ma=Vb();this.o=a7;this.U=!1;this.u=this.g=this.A=null;this.G=[];this.I={};this.Ia={};this.oa=this.sa=this.Ca=0;this.j={};this.B={};this.P=0;this.ka={};this.O=CDa.slice();this.K=new RegExp("^("+this.O.join("|")+")$");this.aa={Placemark:{parent:null,xz:eW}}}w(S6,yM);var CDa=["NetworkLink","Placemark","GroundOverlay","ScreenOverlay","Tour"],a7=E.V("plugin.file.kml.KMLParser"),DDa=/^(geometry|recordtime|time|styleurl|_kmlStyle)$/i;g=S6.prototype;
g.pc=function(){this.l=null;this.U=!1;this.u=this.g=this.A=null;this.G.length=0;this.I={};this.oa=this.sa=this.Ca=0};g.getColumns=function(){if(!this.g&&this.u){this.g=[];for(var a in this.u)"recordTime"===a?this.g.push(new Wv("TIME","recordTime")):DDa.test(a)||this.g.push(new Wv(a));this.u=null}return this.g};g.Cd=function(){return 0<this.G.length};
g.Cb=function(a){this.pc();if(uu(a))this.l=a;else if("string"===typeof a)a=a.replace(Lga,""),this.l=Wx(a);else if(a instanceof ArrayBuffer){if(yw(a)){this.j={};EDa(this,a);return}(a=Dw(a))?this.l=Wx(a):(E.error(this.o,"Source buffer does not appear to be text"),this.wc())}else if(a instanceof Blob){th(iw(a),this.Cb,this);return}if(this.l){if((a=kr(this.l))&&"kml"!==a.localName.toLowerCase()){var b=ny("kml",this.l);b.appendChild(a);this.l.appendChild(b);a=b}if(a){a=this.l.querySelectorAll("styleUrl");
b=!1;for(var c=0,d=a.length;c<d;c++){var e=su(a[c],!0).trim();if(e){var f=e.replace(/#.*/,"");if(f=encodeURI(f)===f?f:void 0)b=!0,or(a[c],"#"+e.replace("#","_")),f in this.B||(f in this.ka?(e=this.ka[f],e.getData(new zip.BlobWriter,this.Hz.bind(this,e.filename)),this.B[f]=!0):(e=new Ni(f),e.H("success",this.Qw,!1,this),e.H("error",this.Qw,!1,this),this.B[f]=e,e.load()))}}b||FDa(this)}else E.error(this.o,"No KML content to parse!"),this.wc()}else E.error(this.o,"Content must be a valid KML document!"),
this.wc()};g.Qw=function(a){var b=a.target,c=b.j.toString(),d=this.B[c]?c:decodeURI(c);delete this.B[d];d=b.g;b.dispose();"success"===a.type?GDa(this,d,c):HDa(this)};function GDa(a,b,c){try{var d=Wx(b),e=a.l.querySelector("Document")||kr(a.l),f=d.querySelectorAll("Style");b=0;for(var h=f.length;b<h;b++){var k=f[b];k.setAttribute("id",c+"_"+k.getAttribute("id"));e.appendChild(k)}}catch(l){E.error(a.o,"Could not parse KML stylesheet "+c)}HDa(a)}function HDa(a){for(var b in a.B)return;FDa(a)}
function FDa(a){var b=kr(a.l),c=jr(b);if(c&&0<c.length)for(a.G.push({children:[b],index:0,node:null}),a.gi(),b=0;b<c.length;b++){var d=c[b];"NetworkLinkControl"==d.localName&&d.querySelector("minRefreshPeriod")&&(a.oa=1E3*parseInt(d.querySelector("minRefreshPeriod").textContent,10))}else E.error(a.o,"Empty KML tree!"),a.wc()}
function EDa(a,b){zip.createReader(new zip.ArrayBufferReader(b),t(function(a){a.getEntries(this.DM.bind(this))},a),t(function(){this.wc();E.error(this.o,"Error reading zip file!")},a))}
g.DM=function(a){for(var b=null,c=null,d=/(doc|index)\.kml$/i,e=/\.kml$/i,f=/\.(png|jpg|jpeg|gif|bmp)$/i,h=0,k=a.length;h<k;h++){var l=a[h];if(!b&&d.test(l.filename))b=l;else if(e.test(l.filename))c||(c=l),this.ka[l.filename]=l;else if(f.test(l.filename)){var m=f.exec(l.filename);m.lastIndex=0;this.P++;l.getData(new zip.Data64URIWriter("image/"+m[1]),this.dN.bind(this,l.filename))}}(b=b||c)?(a=new ij(this.QF.bind(this)),a.Ph=this.Gz.bind(this,b,!0),a.rj=this.Gz.bind(this,b,!1),a.start(200,2E4)):(E.error(this.o,
"No KML found in the ZIP!"),this.wc())};g.Gz=function(a,b){b||E.error(this.o,"Failed to process KMZ images in a timely manner - skipping "+this.P+" images.");a.getData(new zip.BlobWriter,this.Hz.bind(this,a.filename))};g.QF=function(){return 0>=this.P};g.dN=function(a,b){"string"===typeof a&&"string"===typeof b?(this.j[a]=b,this.P--):(E.error(this.o,"There was a problem unzipping the KMZ!"),this.wc())};
g.Hz=function(a,b){if(b&&b instanceof Blob){var c=new FileReader;c.onload=this.CM.bind(this,a);c.readAsText(b)}else E.error(this.o,"There was a problem unzipping the KMZ!"),this.wc()};g.CM=function(a,b){(b=b.target.result)&&"string"===typeof b?this.l?(delete this.B[a],GDa(this,b,a)):this.Cb(b):(E.error(this.o,"There was a problem reading the ZIP content!"),this.wc())};
g.Zc=function(){var a=null,b=null,c=this.G[this.G.length-1],d=c.node,e=c.children,f=e[c.index];if(!f)return a="Encountered null child under node "+(d?d.ba():"Unknown")+" - skipping.",E.hb(this.o,a),null;f.UC=this.j;var h=f.localName;try{if("Document"===h||"Folder"===h||"kml"===h){if(b=IDa(this,f,d)){if(this.U){var k=b.na();if(k)for(var l=0,m=k.length;l<m;l++)k[l].Ia=!0}var n=jr(f);n&&0<n.length&&(a={children:n,index:0,node:b});if("Document"===h){var p=iG(f,"Schema");k=0;for(var r=p.length;k<r;k++){var u=
p[k].name||p[k].getAttribute("name");if(u){-1===this.O.indexOf(u)&&this.O.push(u);var v=iG(p[k],"SimpleField");l={};n=m=0;for(var y=v.length;n<y;n++){var B=null,G=v[n].type||v[n].getAttribute("type");G=G.toLowerCase();switch(G){case "bool":B=pV;break;case "int":case "short":case "float":case "double":B=sV;break;case "uint":case "ushort":B=uV;break;default:B=wV}var D=v[n].name||v[n].getAttribute("name");D&&B&&(l[D]=V(B),m++)}m&&(this.aa[u]={parent:p[k].getAttribute("parent"),xz:X(SV,l)})}}this.K=new RegExp("^("+
this.O.join("|")+")$")}}}else this.K&&this.K.test(h)&&"NetworkLinkControl"!=h&&(b=IDa(this,f,d))}catch(U){b=a=null,E.error(this.o,"Failed parsing node type: "+h,U)}++c.index;if(c.index>=e.length){if(this.U&&d&&(c=d.na()))for(e=c.length;e--;)h=c[e],h.Ia&&(d.kA(e),h.dispose());this.G.pop()}a&&(this.G.push(a),JDa(this,f));return b};
function IDa(a,b,c){var d=null;if("NetworkLink"===b.localName){d=null;var e=Hu({},Dsa,b,[]);if(e&&e.href){d=new O6(e.href);var f=e.refreshMode;if(f&&mc(Xfa,f)){var h=d;h.gc=f;P6(h);switch(f){case "onInterval":e=e.refreshInterval,"number"!==typeof e||isNaN(e)||d.ef(1E3*e)}}}}else if("GroundOverlay"===b.localName){if(void 0!==b&&b.querySelector("name")&&b.querySelector("Icon")&&(b.querySelector("LatLonBox")||b.querySelector("LatLonQuad"))){e=b.querySelector("Icon").querySelector("href").textContent;
a.j[e]&&(e=a.j[e]);f=-180;h=180;var k=-360,l=360;if(b.querySelector("LatLonBox"))l=b.querySelector("LatLonBox"),f=parseFloat(l.querySelector("north").textContent),h=parseFloat(l.querySelector("south").textContent),k=parseFloat(l.querySelector("east").textContent),l=parseFloat(l.querySelector("west").textContent);else{var m=b.querySelector("LatLonQuad").querySelector("coordinates").textContent;m=m.split(" ");for(var n=0;4>n;n++){var p=parseFloat(m[n].split(",")[0]),r=parseFloat(m[n].split(",")[1]);
p<l&&(l=p);p>k&&(k=p);r<h&&(h=r);r>f&&(f=r)}}f=[Math.min(l,k),Math.min(h,f),Math.max(l,k),Math.max(h,f)];f=Ql(f,"EPSG:4326",S);e=new sH({source:new oI({url:e,imageExtent:f}),url:e})}else e=null;e&&(d=new k2,d.setImage(e))}else if("ScreenOverlay"===b.localName){a:{if(void 0!==b&&b.querySelector("name")&&b.querySelector("Icon")){if((e=b.querySelector("visibility"))&&0==parseInt(e.textContent,10)){e=null;break a}e=b.querySelector("name").textContent;f=b.querySelector("Icon").querySelector("href").textContent;
a.j[f]&&(f=a.j[f]);b:{if((h=b.querySelector("screenXY"))&&(m=h.attributes)&&m.getNamedItem("x")&&m.getNamedItem("y")){h=m.getNamedItem("x").value;k=m.getNamedItem("xunits").value;l=m.getNamedItem("y").value;m=m.getNamedItem("yunits").value;n=Xn(L.s().X());p={x:0,y:0};"fraction"==k?.5==h?p.x="center":p.x=n[0]*h:p.x=h;"fraction"==m?.5==l?p.y="center":p.y=n[1]-n[1]*l:p.y=l;h=p;break b}h=null}b:{if((k=b.querySelector("size"))&&(n=k.attributes)&&n.getNamedItem("x")&&n.getNamedItem("y")){k=n.getNamedItem("x").value;
l=n.getNamedItem("xunits").value;m=n.getNamedItem("y").value;n=n.getNamedItem("yunits").value;p={x:0,y:0};r=Xn(L.s().X());"fraction"==l?-1!=k&&0!=k&&(p.x=r[0]*k):p.x=k;"fraction"==n?-1!=m&&0!=m&&(p.y=r[1]*m):p.y=m;l=p;break b}l=null}k=a.ma+a.sa;a.sa++;if(h&&l){e={image:f,name:a.A.ba()+" - "+e,id:k,size:l,xy:h,"show-hide":!0};iya(e);e=k;break a}}e=null}e&&(d=new k2,d.B=e)}else if("Tour"===b.localName)e=b&&"Tour"===b.localName?Hu(new J6,XCa,b,[]):void 0,e&&(d=new U6(e));else if(a.K&&a.K.test(b.localName)&&
"NetworkLinkControl"!=b.localName){f=a.aa[b.localName];for(h={geometry:null};f;)h=Hu(h,f.xz,b,[]),f=f.parent?a.aa[f.parent]:null;if(h){f=h.geometry;delete h.geometry;f&&("Point"==f.T()&&(l=Bo(f),1<l.length&&(h.LAT=h.LAT||l[1],h.LON=h.LON||l[0],2<l.length&&0!=l[2]&&(h.GEOM_ALT=h.GEOM_ALT||l[2]))),Ap(f));h.Style&&(h._kmlStyle=h.Style,delete h.Style);(f instanceof Jo||f instanceof Mo)&&"XYZM"===f.layout?(f instanceof Mo&&f.get("interpolate")&&(f=f.flatCoordinates,f=Ym(f,0,f.length,4),f=new Jo(f)),f=
nDa({geometry:f,name:h.name})):f=new hq(f);if(f){l=J(f);f.ga(a.ma+"#"+l);h.ID=h.ID||l;f.qc(h);a.u||(a.u=[]);for(k in h)a.u[k]=!0;h=f;l=[];k=null;if(m=h.get("styleUrl"))l.push(KDa(a,decodeURIComponent(m))),k=KDa(a,decodeURIComponent(m),!0);(m=h.get("_kmlStyle"))&&m.length&&l.push(m.map(a.Eq,a));for(m=b.parentNode;m;)m.Nv&&l.unshift(m.Nv),m=m.parentNode;l.unshift(DCa);if(l=l.reduce(LDa,null)){if(m=h.get("_style"))if(q(m))for(n=0;n<m.length;n++)Zh(l,m[n]);else Zh(l,m);else h.set("_style",l,!0);k&&k.length&&
h.set("_customHighlightStyle",k[0],!0);!h.get("shape")&&xz(l)&&h.set("shape","Icon");!h.get("centerShape")&&xz(l)&&h.set("centerShape","Icon");sz(h)}if(k=h.get("description")){for(e in a.j)l="src=[\"']"+e.replace(/(.)/g,"[$1]")+"[\"']",l=new RegExp(l),k=k.replace(l,'src="'+a.j[e]+'"'),l="src=[\"']"+(new Xg(e)).toString().replace(/(.)/g,"[$1]")+"[\"']",l=new RegExp(l),k=k.replace(l,'src="'+a.j[e]+'"');h.set("description",k)}}e=f}else e=null;e&&(d=new k2,d.Lf(e))}else d=new k2;if(d)for(e=d,f=MDa,h=
kr(b);null!==h;h=h.nextElementSibling)k=f[h.localName],void 0!==k&&k.call(a,e,h);d&&(d.ba()||(e=b.id||b.getAttribute("id"),d.Da(e||NDa(a,b.localName))),null!=c?d=c.R(d):null===a.A?a.A=d:a.A.ba()!=d.ba()?(a.A.dispose(),a.A=d):d=a.A);return d}function NDa(a,b){a.Ca++;return"kml"==b?"kmlroot":"Unnamed "+a.Ca+" ["+b+"]"}function LDa(a,b){b&&b.length&&(a=a||{},Zh(b[0],a,!0,!1),1<b.length&&E.hb(a7,"An array of style configs with more than one entry was found!"));return a}
function JDa(a,b){for(var c=iG(b,"Style"),d=0,e=c.length;d<e;d++){var f=c[d],h=aW(f,[]),k=f.id||f.getAttribute("id");if(k){if(k in a.I){var l=k+"-"+Vb();Array.prototype.slice.call(b.querySelectorAll("styleUrl")).forEach(function(a){a.textContent.replace(/^#/,"")==k&&(a.textContent="#"+l)});k=l}a.I[k]=h.map(a.Eq,a)}else b.Nv=h.map(a.Eq,a)}c=iG(b,"StyleMap");d=0;for(e=c.length;d<e;d++)if(f=c[d],k=f.id||f.getAttribute("id"))for(b=iG(f,"Pair"),f=0,h=b.length;f<h;f++){var m=nG(b[f],"key"),n=nG(b[f],"styleUrl");
m&&n&&(m=m.trim(),m="normal"===m?a.I:a.Ia,n=n.trim().replace(/^#/,""),n in a.I&&(m[k]=a.I[n]))}else E.error(a7,'StyleMap tags must have an "id" attribute')}g.Eq=function(a){var b=null;if(a&&(b={},wz.s().l.l(a,b),b.image&&b.image.src))try{var c=decodeURIComponent(b.image.src);c&&c in this.j&&(b.image.src=this.j[c])}catch(d){}return b};function KDa(a,b,c){var d=b.indexOf("#");-1<d&&(b=b.substring(d+1));a=c?a.Ia:a.I;return b in a?a[b]:null}
var MDa={name:function(a,b){a.Da(su(b,!0).trim()||null)},open:function(a,b){a.collapsed="1"!==su(b,!0).trim()},visibility:function(a,b){(b=su(b,!0).trim())&&(qV(b)||a.Ga("off"));(a=a.getFeature())&&a.set("visibility",void 0)}};function b7(a){NK.call(this,a);this.log=ODa;this.md=0;this.P=null;this.K={};this.kj=!0;this.EB=new Fh(this.Eo,50,this);this.CB=!1;this.zf=null;this.jb=[];this.overlays=[];N.H("toggleUI",this.Iz,!1,this)}w(b7,NK);var ODa=E.V("plugin.file.kml.KMLSource");g=b7.prototype;g.J=function(){b7.C.J.call(this);N.M("toggleUI",this.Iz,!1,this);PDa(this,!0);QDa(this,!0);this.K={};c7(this,null)};g.Iz=function(a){this.K[a.id]&&this.K[a.id].Ga("off")};function c7(a,b){a.P&&a.P!==b&&a.P.dispose();a.P=b}
g.cc=function(a){b7.C.cc.call(this,a);this.yb()||MK(this,[a])};g.zc=function(a){b7.C.zc.call(this,a);this.yb()||MK(this,a)};function PDa(a,b){for(var c=0;c<a.jb.length;c++){var d=a.jb[c];L.s().removeLayer(d);b&&a.removeNode(d.D())}a.jb=[];IK(a,null)}function QDa(a,b){for(var c=0;c<a.overlays.length;c++){var d=a.overlays[c],e=ix(d);b&&(kx(e),a.removeNode(d))}a.overlays=[]}
function d2(a,b,c){for(var d=[],e=[],f=[],h=0,k=b.length;h<k;h++){var l=b[h];if(l instanceof k2){l.Cb(a);var m=l.getFeature();if(m){var n=l.D();a.K[n]=l;d.push(m)}if(m=l.Pa())n=l.D(),a.K[n]=l,e.push(m);if(m=l.B)n=l.D(),a.K[n]=l,f.push(m)}c&&(l=l.na())&&0<l.length&&d2(a,l,!0)}0<d.length&&a.zc(d);if(0<e.length)for(b=0;b<e.length;b++)eM(L.s(),e[b]),a.jb.push(e[b]);if(0<f.length)for(e=0;e<f.length;e++)a.overlays.push(f[e])}g.tn=function(){this.B&&d2(this,this.B.getData())};
g.sn=function(a){c7(this,this.B.G);RDa(this,this.B.O);if(this.lj)this.columns&&(this.columns.some(Kx)||this.columns.sort(Ex),this.dispatchEvent(new K("columns",this.columns)));else{var b=this.B.getColumns();b&&(this.hc=!1,this.setColumns(b),this.hc=!0,this.dispatchEvent(new K("columns",this.columns)))}this.Eo();b7.C.sn.call(this,a)};g.Bb=function(a){this.removeNode(a.D());IK(this,null);b7.C.Bb.call(this,a)};
g.removeNode=function(a){if(this.kj){var b=this.K[a];b&&(b.D()==a?(this.K[a]=void 0,b.dispose(),(a=b.getParent())&&a.removeChild(b)):(this.K[a]=void 0,this.K[b.D()]=b))}};
function e2(a,b,c){a.kj=void 0!==c?c:!1;a.U&&a.U.isActive()&&Gh(a.U);(c=b.La(!0))&&0<c.length&&a.Ge(c);if((c=Vya(b,!0))&&0<c.length){for(var d=0;d<c.length;d++){var e=c[d];L.s().removeLayer(e);mb(a.jb,e);a.removeNode(e.D())}IK(a,null)}if((b=b.sk(!0))&&0<b.length)for(c=0;c<b.length;c++)d=b[c],e=ix(d),mb(a.overlays,d),kx(e),a.removeNode(d);yK(a);a.kj=!0}g.Hs=function(a){iza(a);y2(a);b7.C.Hs.call(this,a);this.EB.start()};
g.Eo=function(){for(var a=this.La(),b=[],c=[],d,e=0,f=a.length;e<f;e++){var h=a[e],k=h.D();(d=this.K[k])?"on"==d.getState()?b.push(h):"off"==d.getState()&&c.push(h):E.hb(this.log,"Feature ["+k+"] is not in the KML tree!")}e=0;for(f=this.jb.length;e<f;e++)a=this.jb[e],k=a.D(),(d=this.K[k])?"on"==d.getState()?a.Hd(!0):"off"==d.getState()&&a.Hd(!1):E.hb(this.log,"Image ["+k+"] is not in the KML tree!");b.length&&this.wl(b);c.length&&(MK(this,c),HK(this,c));this.CB=!0};
g.yo=function(a,b){b7.C.yo.call(this,a,b);if(this.CB)for(var c=0,d=a.length;c<d;c++){var e=a[c].D();if(e in this.K){e=this.K[e];var f=b?"on":"off";e.sa=!1;e.Ga(f);e.sa=!0}else E.hb(this.log,"Show/hide feature ["+e+"] is not in the KML tree!")}};g.refresh=function(){PDa(this,!1);QDa(this,!1);this.K=Yh(this.K);this.zf?(rja(this,this.zf.Pb()),this.zf=null):b7.C.refresh.call(this);this.dispatchEvent("kmlSource:refresh")};g.gj=function(){return!1};
g.ef=function(a){var b=this.md/1E3;if(this.Ea!=a||this.Ea<b){this.Ea=a;this.A&&(this.A.M("tick",this.Uk,!1,this),this.A.be()||this.A.stop());this.A=null;if(0<this.Ea){var c=Math.max(a,b);c!=a&&rj(tj,"The selected refresh period is lower than the minimum ("+b+" seconds) allowed by the KML. The minimum will be used instead.",Rh);this.A=Lx[c];this.A||(this.A=new je(1E3*c),Lx[c]=this.A);this.A.H("tick",this.Uk,!1,this);this.A.start()}this.dispatchEvent(new K(NH))}};
function RDa(a,b){a.md!=b&&(a.md=Math.max(b,0),a.Ea<a.md/1E3&&a.ef(a.Ea))}g.sq=function(){return!0};g.ra=function(a){a=b7.C.ra.call(this,a);a.minRefreshPeriod=this.md;return a};g.restore=function(a){b7.C.restore.call(this,a);a.minRefreshPeriod&&RDa(this,a.minRefreshPeriod)};function d7(a){ev.call(this);this.l=null;this.u=0;this.o=void 0;this.Ie(a)}w(d7,ev);d7.prototype.J=function(){var a=this.W();a instanceof e7&&(a.collapsed=this.collapsed);this.o&&(ee(this.o),this.o=void 0);this.Ie(null);this.Bc(null);d7.C.J.call(this)};d7.prototype.Gf=function(a){d7.C.Gf.call(this,a);"loading"==a.j&&(a.o?this.u++:this.u--,this.dispatchEvent(new K("loading")))};d7.prototype.ob=function(){return 0<this.u||d7.C.ob.call(this)};d7.prototype.isLoading=d7.prototype.ob;
function f7(a){a=a.W();return a instanceof e7?a.g:!1}d7.prototype.Ie=function(a){d7.C.Ie.call(this,a);var b=null;if(a instanceof e7){var c=a.N();c instanceof b7&&(b=c);this.collapsed=a.collapsed}a=b;this.l&&yf(this.l,"propertychange",this.G,this);if(this.l=a)H(a,"propertychange",this.G,this),SDa(this)};d7.prototype.G=function(a){a instanceof K&&"loading"==a.j&&SDa(this)};
function SDa(a){if(a.l&&!a.l.ob()){var b=a.na(),c=b&&0<b.length?b[0].Ha():null;b=a.l.P;if(c!==b){a.o&&(ee(a.o),a.o=void 0);c=!0;var d=a.W();d instanceof e7&&(c=d.l);b?c?a.Bc(b.na()):(TDa(a),a.o=b.H("propertychange",a.K,!1,a)):a.Bc(null)}}}d7.prototype.K=function(a){"children"==a.j&&TDa(this)};function TDa(a){var b=a.l?a.l.P:null,c=null;b&&(c="kmlroot"==b.ba()?b.na()[0].na():b.na());a.Bc(c,!0)}
d7.prototype.Y=function(){var a=null,b=this.na();if(b)for(var c=0,d=b.length;c<d;c++){var e=b[c].Y();e&&(a?Yk(a,e):a=e)}return a};function e7(a){Vz.call(this,a);this.g=this.collapsed=!1;this.l=!0}w(e7,Vz);F(e7,"os.layer.ICustomLayerVisible");g=e7.prototype;g.J=function(){var a=this.N();a&&(a=a.Mr())&&(a=a.j)&&(a.j={});e7.C.J.call(this)};g.Rp=function(){var a=new d7(this);a.collapsed=this.collapsed;return a};g.Hd=function(){};g.hd=function(){var a=this.N().P;return a?"on"===a.getState():e7.C.hd.call(this)};g.ra=function(a){a=e7.C.ra.call(this,a);a.collapsed=this.collapsed;a.editable=this.g;a.showRoot=this.l;return a};
g.restore=function(a){e7.C.restore.call(this,a);null!=a.collapsed&&(this.collapsed=a.collapsed);null!=a.editable&&(this.g=a.editable);null!=a.showRoot&&(this.l=a.showRoot)};function g7(){g0.call(this)}w(g7,g0);g=g7.prototype;g.Dd=function(a){var b=new E6(this.Jf(a));a=xB(a.url);b.K=a;DM(b,["Altitude","SemiMajor","SemiMinor"]);return b};g.W=function(a){return new e7({source:a})};g.Jf=function(a){return new S6(a)};g.vd=function(a){a=g7.C.vd.call(this,a);if(!od||Bd(10))a.B="arraybuffer";return a};g.N=function(a){var b=new b7(void 0);b.zf=a.parserConfig?a.parserConfig.file:null;return b};function h7(){y6.call(this);this.sa=this.B=!0;this.log=UDa;this.A={}}w(h7,y6);var UDa=E.V("plugin.file.kml.KMLTreeExporter");g=h7.prototype;g.reset=function(){h7.C.reset.call(this);this.A={}};g.ti=function(){return!1};g.bs=function(a){return a.ba()};g.na=function(a){return a.na()};g.Ja=function(a){a=Gy(a.getFeature());if(!a||"string"!=typeof a&&!q(a))a="rgba(255,255,255,1)";return gz(a)};g.Uu=function(a){return a.Vc()?"Folder":"Placemark"};g.qd=function(a,b){return By(a.getFeature(),b)};
g.xp=function(a){!this.fields&&(a=a.N())&&(this.fields=Ox(a,!0));return this.fields};g.Rg=function(a){var b=h7.C.Rg.call(this,a);if(a=a.getFeature())if(b=vc(b),a=a.get("_style"),q(a)&&(a=a[0]),a&&a.image&&(a=a.image,a.src&&(b.href=a.src),a=oz(a)))b.scale=(b.scale||1)*qz(a);return b};g.D=function(a){return String(J(a))};
g.getParent=function(a){var b=this.g;if(b){var c=a.getParent();if(c){var d=c.D();this.A[d]?b=this.A[d]:null!=this.items&&-1<this.items.indexOf(a)||!(a=this.getParent(c))||(b=gG("Folder","http://www.opengis.net/kml/2.2",a),gG("name","http://www.opengis.net/kml/2.2",b,this.bs(c)),gG("open","http://www.opengis.net/kml/2.2",b,c.collapsed?0:1),b=this.A[d]=b)}}return b};
g.Yb=function(){var a=(void 0).getFeature();if(a){var b=a.Yb();a=jc(b);for(var c=0,d=a.length;c<d;c++){var e=a[c];(Eb(e,"_")||Px(e))&&delete b[e]}}return b||null};g.ev=function(a){var b="default";(a=this.Z(a))&&"Point"==a.T()&&(b="icon");return b};g.getTime=function(a){return(a=a.getFeature())?a.get("recordTime")||null:null};g.Ug=function(){return""};g.pq=function(a){return"off"!=a.getState()};
g.Gs=function(a,b){this.A[b.D()]=a;gG("open","http://www.opengis.net/kml/2.2",a,b.collapsed?0:1);h7.C.Gs.call(this,a,b)};g.tt=function(){return!1};g.Z=function(a){var b;if(a=a?a.getFeature():null)(b=a.Z())&&(b=b.clone().toLonLat()),this.P&&(a=xy(a),!a||a instanceof hp||(this.oa&&b instanceof hp?b=new Zo([a,b]):b=a));return b};g.dv=function(a){if((a=a?a.getFeature():null)&&(a=Hy(a))&&a.showRotation)return a.rotationColumn};Q.directive("kmltreeexport",[function(){return{restrict:"E",scope:{rootNode:"="},templateUrl:"v1541734487/views/plugin/kml/kmltreeexport.html",controller:i7,controllerAs:"treeExport"}}]);function C2(a){fx({label:"Export Places",icon:"fa fa-download",x:"center",y:"center",width:400,"min-width":300,"max-width":2E3,height:"auto","show-close":!0},'<kmltreeexport root-node="rootNode"></kmltreeexport>',void 0,void 0,void 0,{rootNode:a})}
function i7(a,b){this.scope=a;this.element=b;this.title=(b=this.scope.rootNode)&&b.ba()||(Wh()+" KML Tree").trim();this.exporter=new h7;this.persisters={};this.persister=null;if((b=mQ(lQ))&&0<b.length){this.persister=b[0];for(var c=0,d=b.length;c<d;c++)this.persisters[b[c].ba()]=b[c]}a.$on("$destroy",this.destroy.bind(this));setTimeout(function(){a.$emit("window.ready")},0)}i7.$inject=["$scope","$element"];i7.prototype.destroy=function(){this.element=this.scope=null};i7.prototype.cancel=function(){kx(this.element)};
i7.prototype.cancel=i7.prototype.cancel;i7.prototype.confirm=function(){var a=this.scope.rootNode;a&&(a=a.na()||[a],nQ(a,null,this.title,this.exporter,this.persister),kx(this.element))};i7.prototype.confirm=i7.prototype.confirm;function j7(a){this.visible=!1;if(this.eventType&&a&&1==a.length&&(a=a[0],a instanceof k2))switch(this.eventType){case "kml:buffer":this.visible=l2(a);break;case "kml:selectAll":case "kml:deselectAll":this.visible=a.Vc()&&l2(a);break;case "kml:goTo":this.visible=!!a.Pa()||l2(a);break;case "kml:load":this.visible=a instanceof O6&&"off"===a.getState();break;case "kml:refresh":this.visible=a instanceof O6&&"off"!==a.getState()&&!a.ob();break;case "kml:featureInfo":this.visible=!!a.getFeature();break;
default:this.visible=a.Vc()}}
function k7(a){var b=a.getContext();if(b&&1==b.length&&(b=b[0],b instanceof k2)){var c=b.N();if(c)switch(a.type){case "kml:buffer":(a=b.La())&&0<a.length&&(b=b.ba()+" Buffer",uR({features:a,title:b}));break;case "kml:goTo":(b=b.Y())&&!al(b)&&AE(BE,new BP(b));break;case "kml:selectAll":JK(c,b.La());break;case "kml:deselectAll":HK(c,b.La());break;case "kml:removeAll":e2(c,b,!0);Wya(b);break;case "kml:load":b.Ga("on");break;case "kml:refresh":b.refresh();break;case "kml:featureInfo":a=c?c.S():void 0,
(b=b.getFeature())&&bL(b,a)}}};Q.directive("kmlimport",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/file/genericfileimport.html",controller:l7,controllerAs:"ctrl"}}]);function l7(a,b){W5.call(this,a,b)}w(l7,W5);l7.$inject=["$scope","$element"];l7.prototype.g=function(){if(this.config.descriptor){var a=this.config.descriptor;yCa(a,this.config)}else{a=this.config;var b=a.file,c=u6.s(),d=new v6;d.ga(gF(c));d.Ec(c.ba());d.Mb(b.Ma());d.Yc("rgba(255,255,255,1)");yCa(d,a);a=d}return a};
l7.prototype.rb=function(){return u6.s()};function m7(){dT.call(this)}w(m7,dT);m7.prototype.S=function(){return"KML"};m7.prototype.Jb=function(a,b){m7.C.Jb.call(this,a,b);var c=new oM;b&&this.g(b,c);c.file=a;c.title=a.getFileName();fx({label:"Import KML",icon:"fa fa-file-text",x:"center",y:"center",width:400,"min-width":400,"max-width":800,height:"auto",modal:!0,"show-close":!0,"no-scroll":!0},"<kmlimport></kmlimport>",void 0,void 0,void 0,{config:c})};function n7(){Kg.call(this);this.id="kml"}w(n7,Kg);
n7.prototype.init=function(){var a=Y;mF(a,new eF("kml",u6,"KML Layers","KML Layers"));nF(a,this.id,v6);Yf(Uf.s(),this.id,g7);a=GM.s();JM(a,"KML/KMZ",!0);KM(a,"application/vnd.google-earth.kml+xml",new m7);KM(a,"application/vnd.google-earth.kmz",new m7);LM(a,this.id,S6);LM(a,"kmlfeature",D6);eZ(lQ,new pQ);if((a=AZ)&&!a.Ha().find("kml:goTo")){a=a.Ha();var b=a.find("Tools");a.R({label:"Load",eventType:"kml:load",tooltip:"Load the network link",da:['<i class="fa fa-fw fa-cloud-download"></i>'],Aa:j7,
za:k7,sort:CZ++});a.R({label:"Refresh",eventType:"kml:refresh",tooltip:"Refresh the network link",da:['<i class="fa fa-fw fa-refresh"></i>'],Aa:j7,za:k7,sort:CZ++});a.R({label:"Feature Info",eventType:"kml:featureInfo",tooltip:"Display detailed feature information",da:['<i class="fa fa-fw fa-info-circle"></i>'],Aa:j7,za:k7,sort:CZ++});a.R({label:"Go To",eventType:"kml:goTo",tooltip:"Repositions the map to display features at this level of the tree",da:['<i class="fa fa-fw fa-fighter-jet"></i>'],Aa:j7,
za:k7,sort:CZ++});a.R({label:"Select All",eventType:"kml:selectAll",tooltip:"Selects all features under the folder",da:['<i class="fa fa-fw fa-check-circle"></i>'],Aa:j7,za:k7,sort:CZ++});a.R({label:"Deselect All",eventType:"kml:deselectAll",tooltip:"Deselects all features under the folder",da:['<i class="fa fa-fw fa-times-circle"></i>'],Aa:j7,za:k7,sort:CZ++});a.R({label:"Remove All",eventType:"kml:removeAll",tooltip:"Removes everything under the folder",da:['<i class="fa fa-fw fa-times"></i>'],
Aa:j7,za:k7,sort:CZ++});b.R({label:"Create Buffer Region...",eventType:"kml:buffer",tooltip:"Creates buffer regions around loaded data",da:['<i class="fa fa-fw fa-dot-circle-o"></i>'],Aa:j7,za:k7})}};function o7(){fF.call(this)}w(o7,U4);xa(o7);o7.prototype.Wb=function(a){o7.C.Wb.call(this,a);this.ga("shp");this.Da("SHP Files")};function p7(a){UM.call(this);this.o="shp";this.l=a||new G1;this.u=this.A=null}w(p7,UM);g=p7.prototype;g.T=function(){return"Feature Layers"};g.Va=function(){var a=p7.C.Va.call(this);a.type="SHP";a.originalUrl2=this.A;a.url2=this.u;return a};g.gh=function(a){return a==this.Ma()||a==this.u};g.clearData=function(){p7.C.clearData.call(this);var a=this.u;a&&Jw(a)&&fB(eB.s(),a)};g.ra=function(a){a||(a={});a.originalUrl2=this.A;a.url2=this.u;return p7.C.ra.call(this,a)};
g.restore=function(a){this.A=a.originalUrl2||null;this.u=a.url2||null;p7.C.restore.call(this,a)};function VDa(a,b){a.Yc(b.color);a.fb(b.description);a.Ta(b.title);a.vb(b.tags?b.tags.split(/\s*,\s*/):null);T4(a,b)};Q.directive("shpexport",[function(){return{restrict:"E",scope:{exporter:"="},templateUrl:"v1541734487/views/plugin/shp/shpexport.html",controller:q7,controllerAs:"shpexport"}}]);function q7(a){this.v=a;this.g=a.exporter;a.exportEllipses=this.g.oa;a.$watch("exportEllipses",this.j.bind(this));a.$on("$destroy",this.l.bind(this));this.j()}q7.$inject=["$scope"];q7.prototype.l=function(){this.g=this.v=null};q7.prototype.j=function(){this.g&&this.v&&(this.g.oa=this.v.exportEllipses)};function qQ(){w6.call(this);this.log=WDa;this.K=!0;this.U={};this.P={};this.I={};this.B={};this.aa={};this.g=[];this.j=new Fya;this.sa=0;this.O=-1;this.oa=!1;this.u=this.o=this.l=this.A=null}w(qQ,w6);var WDa=E.V("plugin.file.shp.SHPExporter");g=qQ.prototype;g.getExtension=function(){return"zip"};g.ba=function(){return"SHP"};g.pk=function(){return"application/zip"};g.cancel=function(){};
function XDa(a,b,c){var d=c.name,e=c.field;b=b.get(e);var f=typeof b;0!=e.indexOf("_")&&"geometry"!=e&&(b instanceof Date?b=b.toISOString():(b=Tb(b),b=Jb(b)),d in a.U||(e=(d.replace(" ","_")+"\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00").substr(0,10),mc(a.U,e)&&(e in a.P||(a.P[e]=0),a.P[e]++,e=(e.substr(0,9)+String(a.P[e])).substr(0,10)),a.U[d]=e),d in a.I?a.B[d]=Math.min(Math.max(a.B[d],b.length),255):(a.B[d]=Math.min(b.length,255),a.g.push(c)),d in a.I?"L"==a.I[d]&&"boolean"!=f?a.I[d]="C":"N"==a.I[d]&&
"number"!=f&&(a.I[d]="C"):a.I[d]="boolean"==f?"L":"number"==f?"N":"C","N"==a.I[d]&&b.match(/^\d*\.\d+$/)?a.aa[d]=Math.min(Math.max(a.aa[d]||0,b.replace(/^\d*\./,"").length),255):a.aa[d]=0)}
g.setItems=function(a){qQ.C.setItems.call(this,a);this.g=[];this.B={};this.aa={};this.I={};this.U={};this.P={};if(this.items&&0<this.items.length){a=this.items[0];var b=null;if(a){var c=a.get("sourceId");"string"===typeof c&&(b=Fy.N(c))}c=b&&b.getColumns()||jc(a.Yb());for(var d=0;d<this.items.length;d++)if(a=this.items[d],b)for(var e=0;e<c.length;e++){var f=c[e];f={name:f.name,field:f.field};c[e].visible&&!Hb(Tb(f.name))&&XDa(this,a,f)}else for(e=0;e<c.length;e++)f=c[e],f={name:f,field:f},Hb(Tb(f.name))||
XDa(this,a,f)}this.A=null;this.sa=0;this.O=-1;this.u=this.o=this.l=null};function YDa(a){a.j.l=100;a.j.g.g=32*a.g.length+33;a.j.j.g=100;for(var b=0,c=a.items.length;b<c;b++){var d=ZDa(a,a.items[b]);null!=d&&(d instanceof Zo?$a(dp(d),function(a){$Da(this,a)},a):$Da(a,d))}}function $Da(a,b){"MultiPolygon"==b.T()?$a(yp(b),function(a){r7(this,a)},a):"MultiPoint"==b.T()?$a(kp(b),function(a){r7(this,a)},a):r7(a,b)}
function r7(a,b){var c=b.T();aEa(c);a.j.j.g+=8;a.j.l+=8;var d=0;if("Point"==c)c=b.getCoordinates(),d=20,"XYZ"==b.layout&&0!=c[2]&&(d=36);else if("LineString"==c||"MultiLineString"==c||"Polygon"==c){d=1;var e=[];"LineString"==c?e=b.getCoordinates():(c=b.getCoordinates(),d=c.length,$a(c,function(a){$a(a,function(a){e.push(a)})}));c=e.length;d=44+4*d+16*c;if("XYZ"==b.layout)for(b=0;b<e.length;b++)if(0!=e[b][2]){d+=32+16*c;break}}a.j.l+=d;$a(a.g,function(a){this.j.g.g+=this.B[a.name]},a);a.j.g.g++}
function bEa(a){var b=32+32*a.g.length;a.o.setUint8(0,3);var c=new Date;a.o.setUint8(1,c.getUTCFullYear()-1900);a.o.setUint8(2,c.getUTCMonth()+1);a.o.setUint8(3,c.getUTCDate());a.o.setUint16(8,b,!0);var d=0;fc(a.B,function(a){d+=a});a.o.setUint16(10,d+1,!0);$a(a.g,function(a,b){b=32+32*b;a=a.name;s7(this.o,b,this.U[a]);s7(this.o,b+11,this.I[a]);this.o.setUint8(b+16,this.B[a]);this.o.setUint8(b+17,this.aa[a])},a);a.o.setUint8(b,13);a.j.g.position=b+1}
function s7(a,b,c){for(var d=0;c&&d<c.length;++d)a.setUint8(b,c.charCodeAt(d)),b++}
g.af=function(){YDa(this);this.j.data=new ArrayBuffer(this.j.l);this.j.g.data=new ArrayBuffer(this.j.g.g);this.j.j.data=new ArrayBuffer(this.j.j.g);this.l=new DataView(this.j.data);this.o=new DataView(this.j.g.data);this.u=new DataView(this.j.j.data);this.l.setUint32(0,9994);this.l.setUint32(28,1E3,!0);this.j.position=100;bEa(this);this.u.setUint32(0,9994);this.u.setUint32(28,1E3,!0);this.j.j.position=100;for(var a=0,b=0,c=this.items.length;b<c;b++)cEa(this,this.items[b])||a++;0<a&&rj(tj,"Skipped "+
a+" feature"+(1<a?"s":"")+" that did not have a geometry.",Rh,this.log);a<this.items.length&&(this.l.setUint32(24,this.j.position/2),this.l.setFloat64(36,this.A[0],!0),this.l.setFloat64(44,this.A[1],!0),this.l.setFloat64(52,this.A[2],!0),this.l.setFloat64(60,this.A[3],!0),this.u.setUint32(24,this.j.j.position/2),this.u.setFloat64(36,this.A[0],!0),this.u.setFloat64(44,this.A[1],!0),this.u.setFloat64(52,this.A[2],!0),this.u.setFloat64(60,this.A[3],!0),this.u.setUint32(32,this.O,!0),this.o.setUint32(4,
this.sa,!0),a=new Aw,b=this.j.data.slice(0,this.j.position),a.g=b,a.j=this.name+".shp",this.G.push(a),a=new Aw,b=this.j.g.data.slice(0,this.j.g.position),a.g=b,a.j=this.name+".dbf",this.G.push(a),a=new Aw,b=this.j.j.data.slice(0,this.j.j.position),a.g=b,a.j=this.name+".shx",this.G.push(a))};function cEa(a,b){var c=ZDa(a,b);return null!=c?(c instanceof Zo?$a(dp(c),function(a){dEa(this,b,a)},a):dEa(a,b,c),!0):!1}
function ZDa(a,b){var c;b&&(c=b.get("geometry"))&&(c=c.clone().toLonLat(),a.oa&&(a=xy(b),!a||a instanceof hp||(c=a)));return c}function aEa(a){if("Point"!=a&&"MultiPoint"!=a&&"LineString"!=a&&"MultiLineString"!=a&&"MultiPolygon"!=a&&"Polygon"!=a)throw Error(a+" is not supported");}
function t7(a,b,c){var d=c.T();aEa(d);a.u.setUint32(a.j.j.position,a.j.position/2);a.j.j.position+=4;b.get("RECNUM")?a.l.setUint32(a.j.position,b.get("RECNUM")):a.l.setUint32(a.j.position,++a.sa);a.j.position+=8;var e=a.j.position,f=c.Y();f&&(a.A=a.A?Yk(a.A,f):Rk(f));var h=0,k=-1;if("Point"==d)d=c.getCoordinates(),k=1,h=20,"XYZ"==c.layout&&0!=d[2]&&(k=11,h=36),a.l.setFloat64(e+4,d[0],!0),a.l.setFloat64(e+12,d[1],!0),11==k&&a.l.setFloat64(e+20,d[2],!0);else if("LineString"==d||"MultiLineString"==d||
"Polygon"==d){switch(d){case "LineString":case "MultiLineString":k=3;break;case "Polygon":k=5}var l=1,m=[];if("LineString"==d)m=c.getCoordinates(),a.l.setInt32(e+44,0,!0);else{h=c.getCoordinates();l=h.length;$a(h,function(a){$a(a,function(a){m.push(a)})});var n=0;for(d=0;d<l;d++)a.l.setInt32(e+44+4*d,n,!0),n+=h[d].length}var p=m.length,r=4*l;n=16*p;h=44+r+n;if("XYZ"==c.layout)for(d=0;d<m.length;d++)if(0!=m[d][2]){h+=32+16*p;k=3==k?13:15;break}a.l.setFloat64(e+4,f[0],!0);a.l.setFloat64(e+12,f[1],!0);
a.l.setFloat64(e+20,f[2],!0);a.l.setFloat64(e+28,f[3],!0);a.l.setInt32(e+36,l,!0);a.l.setInt32(e+40,p,!0);c=e+44+r;f=c+n+16;for(d=0;d<m.length;d++)l=16*d,a.l.setFloat64(c+l,m[d][0],!0),a.l.setFloat64(c+l+8,m[d][1],!0),13!=k&&15!=k||a.l.setFloat64(f+8*d,m[d][2],!0)}if(0>a.O||1==a.O&&1!=k)a.O=k,a.l.setUint32(32,a.O,!0);a.l.setUint32(e,k,!0);a.j.position+=h;a.l.setUint32(e-4,h/2);a.u.setUint32(a.j.j.position,h/2);a.j.j.position+=4;eEa(a,b)}
function dEa(a,b,c){"MultiPolygon"==c.T()?$a(yp(c),function(a){t7(this,b,a)},a):"MultiPoint"==c.T()?$a(kp(c),function(a){t7(this,b,a)},a):t7(a,b,c)}
function eEa(a,b){$a(a.g,function(a){var c=a.name;a=a.field;var e=b.get(a);"recordTime"==a?e=e.toISOString():(e=Tb(e),e=Jb(e));e.length>this.B[c]&&(e=e.substr(0,this.B[c]));s7(this.o,this.j.g.position,e);for(a=e.length;a<this.B[c];++a)this.o.setUint8(this.j.g.position+a,0);this.j.g.position+=this.B[c]},a);a.o.setUint8(a.j.g.position,32);a.j.g.position++}g.Ug=function(){return'<shpexport exporter="exporter"></shpexport>'};function u7(a){Rz.call(this,a);this.log=fEa;this.l=null;this.K=0;this.B=[];this.P=[]}w(u7,Rz);F(u7,"os.source.IImportSource");var fEa=E.V("os.source.MultiRequest");g=u7.prototype;g.clear=function(){this.P=[];this.l&&this.l.reset();u7.C.clear.call(this)};g.J=function(){u7.C.J.call(this);this.P.length=0;gEa(this,[]);this.pi(null)};function hEa(a){if(a.ob()){a.Wa(!1);for(var b=0,c=a.B.length;b<c;b++)a.B[b].abort()}}g.vh=function(a){var b=this.I;u7.C.vh.call(this,a);b&&!a&&this.refresh()};
g.refresh=function(){if(!this.I&&(this.l&&this.l.reset(),0<this.B.length&&(this.clear(),hEa(this),0<this.B.length&&!this.I))){this.K=Ia();this.Wa(!0);for(var a=0,b=this.B.length;a<b;a++)this.B[a].load(!1)}};g.Mr=function(){return this.l};g.pi=function(a){a!==this.l&&(this.l&&(this.l.M(RK,this.Ay,!1,this),this.l.M("complete",this.zy,!1,this),this.l.reset()),this.l=a)&&(this.l.H(RK,this.Ay,!1,this),this.l.H("complete",this.zy,!1,this))};
function gEa(a,b){a.ob()&&a.Wa(!1);for(var c=0,d=a.B.length;c<d;c++){var e=a.B[c];e.M("success",a.By,!1,a);e.M("error",a.Cy,!1,a);e.dispose()}a.B=b;c=0;for(d=a.B.length;c<d;c++)e=a.B[c],e.H("success",a.By,!1,a),e.H("error",a.Cy,!1,a)}
g.By=function(a){a=a.target;var b="Request complete for "+this.S()+iEa(this,a)+jEa(this);E.info(this.log,b);this.P.push(a.g);Ri(a);this.B.length==this.P.length&&(this.l?(SK(this.l,this.P),this.P=[]):(b='No importer set on source "'+this.S()+'"!',E.hb(this.log,b),rj(qj.s(),b,Qh),this.Wa(!1)))};g.Cy=function(a){hEa(this);this.P=[];a="There was an error loading the data source: "+a.target.u.join(" ");E.error(this.log,a);rj(qj.s(),a,Qh)};g.Ay=function(){this.l&&this.zc(this.l.getData())};
g.zy=function(){this.Wa(!1);var a="Import complete for "+this.S()+iEa(this)+jEa(this);E.info(this.log,a)};function jEa(a){var b=Ia(),c=" in "+$F(new Date(b-a.K));a.K=b;return c}function iEa(a,b){var c="",d=[];if(b)d.push(b.j.toString());else{b=0;for(var e=a.B.length;b<e;b++){var f=a.B[b];f.j&&d.push(f.j.toString())}}0<d.length&&(c=" ("+d.join(", ")+")");return c};function v7(){g0.call(this);this.log=kEa;this.g=null}w(v7,g0);var kEa=E.V("plugin.file.shp.SHPLayerConfig");g=v7.prototype;g.ac=function(a){v7.C.ac.call(this,a);this.g=a.parserConfig||new G1};
g.Me=function(a){this.ac(a);if(!a.url)return E.error(this.log,"Unable to create SHP layer without a source URL!"),null;var b;if(a.url2){var c=b=new u7(void 0),d=[];this.url=a.url;d.push(this.vd(a));this.url=a.url2;d.push(this.vd(a));gEa(c,d)}else this.url=a.url,b=new NK(void 0),OK(b,this.vd(a));b.ga(this.id);b.pi(this.Dd(a));b.Ta(this.title);EK(b,this.animate);c=this.W(b,a);a&&c.restore(a);a.load&&b.refresh();return c};g.Dd=function(a){a=v7.C.Dd.call(this,a);EM(a,this.g.mappings);return a};
g.Jf=function(a){var b=this.g||new G1;void 0!==a.lineAlpha&&(b.lineAlpha=a.lineAlpha);void 0!==a.fillAlpha&&(b.fillAlpha=a.fillAlpha);void 0!==a.append&&(b.append=a.append);return new B1(b)};g.vd=function(a){a=v7.C.vd.call(this,a);if(!od||Bd(10))a.B="arraybuffer";return a};function w7(a,b,c,d){H5.call(this,a,b,c,d)}w(w7,H5);w7.$inject=["$scope","$element","$timeout","$attrs"];g=w7.prototype;g.Zk=function(){this.config&&(this.config.file2=null,this.config.zipFile=null);w7.C.Zk.call(this)};
g.UA=function(a){if(this.config.zipFile)Jw(this.config.zipFile)?uh(jB(this.g,this.config.zipFile),Ga(this.qh,a),this.Ok,this):this.qh(a);else{var b=Jw(this.config.file),c=Jw(this.config.file2);b&&c?uh(xh(jB(this.g,this.config.file2),jB(this.g,this.config.file)),Ga(this.qh,a),this.Ok,this):b?uh(jB(this.g,this.config.file),Ga(this.qh,a),this.Ok,this):c?uh(jB(this.g,this.config.file2),Ga(this.qh,a),this.Ok,this):this.qh(a)}};g.Mo=function(a){$M(o7.s(),a)};
g.gp=function(){var a=this.config,b=a.zipFile||a.file,c=a.zipFile?null:a.file2,d=o7.s(),e=new p7(a);e.ga(gF(d));e.Ec(d.ba());e.Mb(b.Ma());c&&(e.u=c.Ma());VDa(e,a);return e};g.At=function(a,b){VDa(a,b)};Q.directive("shpimport",[function(){var a=f1();a.controller=w7;return a}]);function x7(){dT.call(this)}w(x7,dT);x7.prototype.S=function(){return"SHP"};
x7.prototype.Jb=function(a,b){x7.C.Jb.call(this,a,b);var c=[new H1,new F5,new y5],d=new G1;b&&this.g(b,d);b=a.getFileName();E1.test(b)?(d.file=a,d.title=b):(d.file2=a,d.title=b.split(F1)[0]+".shp");fx({label:"SHP Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"850","min-width":"500","max-width":"1200",height:"650","min-height":"300","max-height":"1000",modal:"true","show-close":"true","no-scroll":"true"},'<shpimport resize-with=".js-window"></shpimport>',void 0,void 0,void 0,{config:d,steps:c})};function y7(){this.u=this.A=this.l=this.o=null}w(y7,dT);y7.prototype.Jb=function(a,b){y7.C.Jb.call(this,a,b);this.l=this.o=null;this.A=a;void 0!==b&&(this.u=b);zip.createReader(new zip.ArrayBufferReader(a.Pb()),t(function(a){a.getEntries(this.B.bind(this))},this),function(){var b='Error reading zip file "'+a.getFileName()+'"!';rj(qj.s(),b,Qh)})};
y7.prototype.B=function(a){for(var b=0,c=a.length;b<c;b++){var d=a[b];(E1.test(d.filename)||F1.test(d.filename))&&d.getData(new zip.ArrayBufferWriter,this.G.bind(this,d))}};
y7.prototype.G=function(a,b){b instanceof ArrayBuffer&&(!this.o&&E1.test(a.filename)?this.o=Fw(a.filename,Hw(a.filename),void 0,b):!this.l&&F1.test(a.filename)&&(this.l=Fw(a.filename,Hw(a.filename),void 0,b)));if(this.o&&this.l){if(this.o&&this.l){a=[new F5,new y5];b=new G1;this.u&&(this.g(this.u,b),this.u=null);b.file=this.o;b.file2=this.l;b.zipFile=this.A;b.title=this.A.getFileName();b.wb();var c=b.preview;(!b.mappings||0>=b.mappings.length)&&c&&0<c.length&&(c=iy.s().Wd(c))&&0<c.length&&(b.mappings=
c);fx({label:"SHP Import",icon:"fa fa-sign-in",x:"center",y:"center",width:"850","min-width":"500","max-width":"1200",height:"650","min-height":"300","max-height":"1000",modal:"true","show-close":"true","no-scroll":"true"},'<shpimport resize-with=".js-window"></shpimport>',void 0,void 0,void 0,{config:b,steps:a})}else rj(qj.s(),"Zip file does not contain both SHP and DBF files!",Qh);this.A=this.l=this.o=null}};function z7(){Kg.call(this);this.id="shp"}w(z7,Kg);z7.prototype.init=function(){var a=Y;mF(a,new eF("shp",o7,"SHP Layers","SHP Layers"));nF(a,this.id,p7);Yf(Uf.s(),this.id,v7);a=GM.s();JM(a,"Shapefile (SHP/DBF or ZIP)",!0);KM(a,"application/shapefile",new x7);KM(a,"application/zip; subtype=shape",new y7);LM(a,this.id,B1);eZ(lQ,new qQ)};function A7(a,b){D_.call(this,a,b);this.g=[];this.o=[];this.l=this.j=null}w(A7,D_);g=A7.prototype;g.vm=function(){return null};g.cancel=function(){this.j&&(this.j.dispose(),this.j=null);this.l&&(this.l.dispose(),this.l=null);this.o.length=0;this.g.length=0};g.Lr=function(a){this.cancel();this.term=a;this.dispatchEvent(new FU("autocomplete.success",this.term,this.o,this.o.length))};
g.Xs=function(a,b,c){this.cancel();if(this.term=a){b=null;(c=this.vm(c))&&a&&(a=encodeURIComponent(a),c=c.replace(/{s}/g,a),c=c.replace(/{l}/g,a.toLowerCase()),c=c.replace(/{u}/g,a.toUpperCase()));if(a=c)b=new Ni,Oi(b,a),Si(b,"application/json, text/plain, */*");if(b)return b.Ua("success",this.ai,!1,this),b.Ua("error",this.MJ,!1,this),b.load(),this.j=b,!0}this.dispatchEvent(new FU("success",this.term,this.g,this.g.length));return!0};
function lEa(a,b){b.target.removeAllListeners();a.dispatchEvent(new FU("success",a.term,a.g,a.g.length))}g.ai=function(a){lEa(this,a)};g.MJ=function(a){lEa(this,a)};Q.directive("googleplacesattrcard",[function(){return{replace:!0,restrict:"E",templateUrl:"v1541734487/views/plugin/google/places/attrcard.html",controller:mEa,controllerAs:"attrCtrl"}}]);function mEa(a,b){a=a.result.Xi();for(var c="",d=0,e=a.length;d<e;d++)c+="<div>"+a[d]+"</div>";b.html(c)}mEa.$inject=["$scope","$element"];function B7(a){B_.call(this,a,96)}w(B7,B_);B7.prototype.g=function(){return'<googleplacesattrcard result="result"></googleplacesattrcard>'};Q.directive("googleplacesresultcard",[function(){return{replace:!0,restrict:"E",templateUrl:"v1541734487/views/plugin/google/places/resultcard.html",controller:C7,controllerAs:"resultCtrl"}}]);function C7(a,b){E_.call(this,a,b)}w(C7,E_);C7.$inject=["$scope","$element"];function D7(a){G_.call(this,a,"name");this.j=95}w(D7,G_);D7.prototype.g=function(){return'<googleplacesresultcard result="result"></googleplacesresultcard>'};function E7(a){A7.call(this,"google-places",a);this.type="google-places"}w(E7,A7);E7.prototype.vm=function(){var a=M.get(["plugin","google","places","url"]),b=M.get(["plugin","google","places","nearby"]);if(b){var c=M.get(["plugin","google","places","extentThreshold"],2E5),d=L.s().X().Y();d=Ql(d,S,"EPSG:4326");d=osasm.geodesicInverse(d.slice(0,2),d.slice(2,4)).distance;d<=c&&(a=b.replace("{radius}",Math.min(5E4,Math.round(d/2)).toString()))}return a};
E7.prototype.ai=function(a){var b=a.target;try{var c=JSON.parse(b.g),d=c.status;b=null;if("OVER_QUERY_LIMIT"===d)b="The "+this.getName()+" search has reached the daily request quota. Please wait until after midnight PST or contact the administrator.";else if("REQUEST_DENIED"===d||"INVALID_REQUEST"===d)b="The "+this.getName()+" search is misconfigured. Please contact the administrator.";if(b)rj(qj.s(),b,Qh);else{var e=c.html_attributions;e&&e.length&&this.g.push(new B7(e));var f=c.results,h=M.get(["plugin",
"google","places","maxResults"],5);c=0;for(var k=Math.min(h,f.length);c<k;c++){var l=f[c];h={};h.name=l.name;var m=l.types;m&&(m=m.map(function(a){return a.replace(/_/g," ")}));h.types=m;h.vicinity=l.vicinity||l.formatted_address;var n=l.geometry;if(n){var p=n.location;p&&(h.geometry=Ap(new hp([p.lng,p.lat])))}if(h.geometry){var r=new hq(h);this.g.push(new D7(r))}}}}catch(u){}E7.C.ai.call(this,a)};function F7(){Kg.call(this);this.id="google-places"}w(F7,Kg);F7.prototype.init=function(){M.get(["plugin","google","places","url"])&&HU(GU.s(),new E7("Places (Google)"))};var nEa={eQ:"intensity",jC:"size",SP:"gradient"};function oEa(a){return(a=a?Fy.N(a):void 0)?a.La().map(function(a,c){if(a){var b=null;var e=a.Z();if(e&&-1===e.Y().indexOf(Infinity)){b=new hq;var f=e.T();b.set("_geometryType",f);b.set("_heatmapGeometry",WP(e));f=a.get("ellipse");a=Jy(a);!f||"Ellipse"!=a&&"Ellipse with Center"!=a||(b.set("_geometryType",f.T()),b.set("_heatmapGeometry",WP(f)));e=e.Y();e=new hp(dl(e));b.tb(e)}if(b)return b.ga(c),b}}).filter($u):void 0}
function pEa(a){for(var b=um(1,256),c=b.createLinearGradient(0,0,1,256),d=1/(a.length-1),e=0,f=a.length;e<f;++e)c.addColorStop(e*d,a[e]);b.fillStyle=c;b.fillRect(0,0,1,256);return b.getImageData(0,0,1,256).data}function qEa(a){var b=a.G.Pa().toDataURL(),c=new N2("v1541734487/src/worker/dataurltoarray.js","Canvas to Blob","Converting canvas data URL to a Blob.");c.Ua("job:complete",Ga(rEa,a));c.Ua("job:error",sEa);sza(c,{dataUrl:b})}
function rEa(a,b){z(b.target);if(b.data instanceof Uint8Array){var c=new Blob([b.data],{type:"image/png"});b=new Aw;b.j="heatmap.png";b.g=c;b.l="image/png";c=a.S();a=a.Y().slice();hl(a,1/1.5);var d=L.s(),e=T(d.X()),f=rs(e)[1];e=rs(e)[0];a:{var h=0;if(d.Qa()){d=yP(d);if(!d){d=h;break a}h=d.Ff()}else{var k=T(d.ha).bb();if(null==k){d=h;break a}d=Xn(d.X());h=Vn([d[0],d[1]],k)}d=h}f='<?xml version="1.0" encoding="UTF-8"?><kml xmlns="http://www.opengis.net/kml/2.2"><Document><name>Heatmap</name><Camera><latitude>'+
f+"</latitude><longitude>"+e+"</longitude><altitude>"+d+"</altitude><tilt>0</tilt><heading>0</heading><roll>0</roll></Camera><GroundOverlay><name>"+c+"</name><Icon><href>heatmap.png</href></Icon><LatLonBox><north>"+a[3]+"</north><south>"+a[1]+"</south><east>"+a[2]+"</east><west>"+a[0]+"</west></LatLonBox></GroundOverlay></Document></kml>";a=new Aw;a.j="index.kml";a.g=f;a.l="application/vnd.google-earth.kml+xml";f=new w6;f.G.push(a);f.G.push(b);x6(f,!0);nQ([a],[""],c+".kmz",f)}else rj(tj,"Failed saving canvas to PNG")}
function sEa(a){z(a.target);rj(tj,"string"===typeof a.data?a.data:"Screen capture failed due to an unspecified error",Qh)};function G7(a,b,c){Tz.call(this,a,b,c);this.title="Change heatmap gradient"}w(G7,Tz);G7.prototype.j=function(){var a=this.W();return a?a.u:null};G7.prototype.g=function(a,b){if(a=this.W())a.u=b,a.B=pEa(a.u),H7(a,"gradient")};G7.prototype.nh=function(){return{}};function I7(a,b,c){Tz.call(this,a,b,c);this.title="Change heatmap intensity"}w(I7,Tz);I7.prototype.j=function(){var a=this.W();return a?a.g:null};I7.prototype.g=function(a,b){if(a=this.W())a.g=b,H7(a,"intensity")};I7.prototype.nh=function(){return{}};function J7(a,b,c){Tz.call(this,a,b,c);this.title="Change heatmap intensity"}w(J7,Tz);J7.prototype.j=function(){var a=this.W();return a?a.l:null};J7.prototype.g=function(a,b){(a=this.W())&&a.setSize(b)};J7.prototype.nh=function(){return{}};Q.directive("heatmaplayerui",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/plugin/heatmap/heatmap.html",controller:K7,controllerAs:"heatmap"}}]);function K7(a,b,c){QE.call(this,a,b,c);a.$on("size.slidestop",this.pg.bind(this));a.$on("intensity.slidestop",this.A.bind(this));a.$on("intensity.spinstop",this.A.bind(this));this.maxIntensity=50;this.j=this.j.concat(ic(nEa));this.G=new Fh(this.B,1E3,this)}w(K7,QE);K7.$inject=["$scope","$element","$timeout"];
K7.prototype.sd=function(){K7.C.sd.call(this);if(this.scope){var a=this.scope;a:{var b=this.scope.items;if(b)for(var c=0,d=b.length;c<d;c++)try{var e=b[c].W();if(e){var f=e.l;break a}}catch(n){}f=1}a.size=f;a=this.scope;a:{if(f=this.scope.items)for(b=0,c=f.length;b<c;b++)try{var h=f[b].W();if(h){var k=h.g;break a}}catch(n){}k=this.maxIntensity/2}a.intensity=k;this.scope.gradients=[{title:"Rainbow",gradient:oba},{title:"Thermal",gradient:Ye}];a:{if(k=this.scope.items)for(h=0,a=k.length;h<a;h++)try{var l=
k[h].W();if(l){var m=l.u;break a}}catch(n){}m=[]}this.scope.gradient=this.scope.gradients[m==Ye?1:0]}};K7.prototype.AI=function(){var a=this.scope.gradient.gradient;this.xb(function(b){return new G7(b.D(),a)})};K7.prototype.onGradientChange=K7.prototype.AI;K7.prototype.pg=function(a,b){this.xb(function(a){return new J7(a.D(),b)})};K7.prototype.A=function(a,b){this.scope.intensity=b;this.G.start()};K7.prototype.B=function(){var a=this.scope.intensity;this.xb(function(b){return new I7(b.D(),a)})};function L7(a){a=a||{};a.renderMode||(a.renderMode="image");Vz.call(this,a);this.u=Ye;this.B=pEa(this.u);this.G=null;this.g=25;this.l=5;this.O={};this.ao(!1);this.zg("heatmaplayerui");this.sl("heatmap");this.he("Image");this.ve("Image");a.title&&this.Ta("Heatmap - "+a.title);this.zb(this.mO.bind(this));this.set("renderOrder",null);H(this,"precompose",this.vJ,this)}w(L7,Vz);F(L7,"os.layer.ILayer");g=L7.prototype;g.J=function(){L7.C.J.call(this);this.O=null};
g.vJ=function(a){if(a&&a.context){var b=hO(L.s().X().Wi(),a.target);if((b=b?b.wa:void 0)&&b!==this.G){this.G=b;b=b.Pa();var c=b.getContext("2d"),d=a.frameState;a=d?d.extent:void 0;var e=d?d.pixelRatio:void 0;d=d?d.viewState.resolution:void 0;if(c&&b&&a&&null!=e&&null!=d){e=c.getImageData(0,0,b.width,b.height);d=e.data;for(var f,h=0,k=d.length;h<k;h+=4)if(f=4*d[h+3])d[h]=this.B[f],d[h+1]=this.B[f+1],d[h+2]=this.B[f+2],d[h+3]=4*f;c.putImageData(e,0,0);a=a.slice();hl(a,1.5);c=document.createElement("canvas");
c.width=b.width;c.height=b.height;c.getContext("2d").drawImage(b,0,0);this.set("url",c.toDataURL())}}}};g.mO=function(a){var b,c=1/this.g,d=a.get("_heatmapGeometry")instanceof hp;d&&(b=this.O[this.g]);b||(a=this.createImage(a),c=new eA({opacity:c,img:a,imgSize:[a.width,a.height]}),b=[new ds({image:c})],d&&(this.O[this.g]=b));return b};
g.createImage=function(a){var b=um(1,1),c=a.get("_geometryType");a=a.get("_heatmapGeometry");switch(c){case "Point":b=this.l;a=b+6;c=2*a;a-=250;c=um(c,c);c.shadowOffsetX=c.shadowOffsetY=250;c.shadowBlur=5;c.shadowColor="#000";c.beginPath();c.arc(a,a,b,0,2*Math.PI,!0);c.fill();b=c;break;case "MultiPoint":b=null;if(a){c=M7(a);a=a.getCoordinates();var d=this.l,e=Math.abs(c[1][1]-c[0][1])+10;b=um(Math.abs(c[1][0]-c[0][0])+10,e);b.shadowOffsetY=4*e;b.shadowBlur=5;b.shadowColor="#000";for(var f=0,h=a.length;f<
h;f++){var k=a[f],l=zP(L.s().X(),k);k=Math.abs(c[0][0]-l[0])+5;l=Math.abs(c[0][1]-l[1])+5-4*e;b.beginPath();b.arc(k,l,d,0,2*Math.PI,!0);b.fill()}}break;case "LineString":b=null;if(a){c=M7(a);a=a.getCoordinates();d=Math.abs(c[1][1]-c[0][1])+20;b=um(Math.abs(c[1][0]-c[0][0])+20,d);e=0;for(f=a.length;e<f;e++)h=a[e],k=zP(L.s().X(),h),h=Math.abs(c[0][0]-k[0])+10,k=Math.abs(c[0][1]-k[1])+10-4*d,0===e?b.moveTo(h,k):b.lineTo(h,k);b.lineWidth=this.l;b.shadowOffsetY=4*d;b.shadowBlur=5;b.shadowColor="#000";
b.stroke()}break;case "Polygon":b=null;if(a){c=M7(a);a=a.getCoordinates();d=Math.abs(c[1][1]-c[0][1])+20;b=um(Math.abs(c[1][0]-c[0][0])+20,d);e=0;for(f=a.length;e<f;e++)for(h=a[e],k=0,l=h.length;k<l;k++){var m=h[k],n=zP(L.s().X(),m);m=Math.abs(c[0][0]-n[0])+10;n=Math.abs(c[0][1]-n[1])+10-4*d;0===k?b.moveTo(m,n):b.lineTo(m,n)}tEa(b,d)}break;case "MultiPolygon":if(b=null,a){c=M7(a);a=a.getCoordinates();d=Math.abs(c[1][1]-c[0][1])+20;b=um(Math.abs(c[1][0]-c[0][0])+20,d);e=0;for(f=a.length;e<f;e++)for(h=
a[e],k=0,l=h.length;k<l;k++){m=h[k];n=0;for(var p=m.length;n<p;n++){var r=m[n],u=zP(L.s().X(),r);r=Math.abs(c[0][0]-u[0])+10;u=Math.abs(c[0][1]-u[1])+10-4*d;0===n?b.moveTo(r,u):b.lineTo(r,u)}}tEa(b,d)}}return b.canvas};g.Y=function(){var a=(a=this.G)?a.Y().slice():RB(L.s()).slice();hl(a,1.5);return a};g.setSize=function(a){this.l=a;H7(this,"size")};function H7(a,b){a.O={};Gz(a,void 0,b)}
g.yl=function(a,b){var c=this.N();switch(a){case xH:case uH:return!0;case wH:return!!b&&za(b)&&1===b.length;case yH:return c instanceof NK}return!1};g.Ei=function(a){switch(a){case qK:qEa(this);break;case uH:Bja(this);break;case xH:a=new Tv("removeLayer",this.D());N.dispatchEvent(a);break;case wH:rH(this)}};function M7(a){var b=a.Y();a=zP(L.s().X(),[b[0],b[3]]);b=zP(L.s().X(),[b[2],b[1]]);return[a,b]}function tEa(a,b){a.shadowOffsetY=4*b;a.shadowBlur=10;a.shadowColor="#000";a.fill()};function N7(){$L.call(this);this.log=uEa;this.animate=!1}w(N7,$L);var uEa=E.V("plugin.heatmap.HeatmapLayerConfig");N7.prototype.Me=function(a){this.ac(a);var b=this.N(a);b=this.W(b,a);b.ga(a.id);null!=a.explicitType&&b.ve(a.explicitType);return b};N7.prototype.W=function(a,b){return new L7({source:a,title:b.title})};N7.prototype.N=function(a){a=a||{};a.features=oEa(a.sourceId);return new Su(a)};function O7(a,b,c){i4.call(this,a,b,c);this.Qb=c.imageryLayers;this.g=null;this.u=this.layer.hd();this.A=-1;this.j=new Fh(this.IM,75,this);H(this.layer,"propertychange",this.Mz,this);eI(this.layer,vEa,this.Nz,this)}w(O7,i4);var vEa=["change:opacity"];g=O7.prototype;g.J=function(){z(this.j);this.j=null;yf(this.layer,"propertychange",this.Mz,this);fI(this.layer,vEa,this.Nz,this);this.Qb.remove(this.g);this.g=null;O7.C.J.call(this)};g.rc=function(){this.j&&this.j.start()};
g.IM=function(){if(this.u){var a=this.Qb.length||void 0;this.g&&(a=this.g?this.Qb.indexOf(this.g):-1,this.Qb.remove(this.g),this.g=null);var b=this.layer.get("url");if(!b)P7(this);else if(b){var c=this.layer.Y().slice();hl(c,1/1.5);this.g=this.Qb.addImageryProvider(new Cesium.SingleTileImageryProvider({url:b,rectangle:Cesium.Rectangle.fromDegrees(c[0],c[1],c[2],c[3])}),a);B3(this.layer,this.g);N.dispatchEvent("map:glRepaint")}}};
g.Mz=function(a){if(a instanceof K){var b=a.j;"visible"==b?(this.u=a.o,this.layer&&this.g&&(B3(this.layer,this.g),N.dispatchEvent("map:glRepaint"))):"intensity"!=b&&"size"!=b&&"gradient"!=b||P7(this)}};g.Nz=function(){B3(this.layer,this.g);N.dispatchEvent("map:glRepaint")};
function P7(a){if(L.s().Qa()&&a.u){a.map.renderSync();for(var b=a.map.Wi(),c=a.map.j,d,e=0,f=c.layerStatesArray.length;e<f;++e)d=c.layerStatesArray[e],d=d.layer,d===a.layer&&(c.layerStatesArray[e].visible=!0,c.layerStatesArray[e].extent=void 0,d=c.extent.slice(),hl(d,2),c.extent=d);b.mj(c);a.rc()}}g.vs=function(){P7(this)};g.li=function(a){this.A!==a?(this.A=a,this.g&&(this.Qb.remove(this.g,!1),this.Qb.add(this.g,a++))):a=(this.g?this.Qb.indexOf(this.g):-1)+1;return a};g.reset=function(){this.rc()};function wEa(){var a=AZ;if(a&&!a.Ha().find("heatmap:export")){a=a.Ha();var b=a.find("Tools");a.R({label:"Heatmap",type:"group",children:[{label:"Export Heatmap...",eventType:"heatmap:export",tooltip:"Exports the heatmap as a KML Ground Overlay",da:['<i class="fa fa-fw fa-download"></i>'],Aa:xEa,za:yEa,qa:"layers.contextMenu.featureLayer.heatMap"}]});b.R({label:"Generate Heatmap",eventType:"heatmap:generate",tooltip:"Generate a heatmap of current features",da:['<i class="fa fa-fw fa-fire"></i>'],Aa:DZ,
za:zEa,qa:"layers.contextMenu.featureLayer.heatMap"})}}function xEa(a){this.visible=!1;a&&1==a.length&&(a=a[0],a instanceof ev&&(this.visible=a.W()instanceof L7))}function yEa(a){(a=a.getContext())&&1==a.length&&(a=a[0].W(),a instanceof L7&&qEa(a))}
function zEa(a){if(a=a.getContext())if(a=fv(a),a.length)for(var b=0;b<a.length;b++){var c=a[b],d=c.N();!d||0>=d.dg()?rj(tj,"No features in selected layer. Unable to generate heatmap.",Rh):(c={id:Vb(),sourceId:c.N().D(),title:c.S(),animate:!1,layerType:"Feature Layers",explicitType:"",type:"heatmap",loadOnce:!0},N.dispatchEvent(new Pha("configureAndAddLayer",c)))}};function Q7(){Kg.call(this);this.id="heatmap"}w(Q7,Kg);xa(Q7);Q7.prototype.init=function(){Yf(Uf.s(),"heatmap",N7);wEa();Y.H("dataSourceAdded",function(a){(a=a.source)&&a instanceof Rz&&(a.oa["heatmap:generate"]=!0)});Kk(Jk.s(),"heatmap",O7)};function AEa(a,b){return a+"["+uy(b)+"]"}function BEa(a){var b={};a=a.querySelectorAll("PropertyName");for(var c=[],d=0;d<a.length;d++){var e=su(a[d],!0).trim();e&&-1==c.indexOf(e)&&c.push(e)}c.forEach(function(a,c){a&&(b[a]="v"+c)});return b}
function CEa(a,b){if(fga(a)){a:{var c=new WC;XC(c,a);if(c.op&&c.g&&(a=c.op,b=b[c.g])){b=a.pd(b,c.literal);break a}b=""}return b}if(c=LC(a))a:{if((a=a.childNodes)&&0<a.length){for(var d=[],e=0;e<a.length;e++){var f=CEa(a[e],b);Hb(f)||d.push(f)}if(0<d.length)switch(c){case "And":b="("+d.join("&&")+")";break a;case "Or":b="("+d.join("||")+")";break a;case "Not":b="!("+d.join("||")+")";break a}}b=""}else b="";return b};function R7(){bC.call(this);this.Ta("New Filter Action");this.actions=[];this.u=Wa;this.B=void 0}w(R7,bC);g=R7.prototype;g.rg=function(a){R7.C.rg.call(this,a);var b=cC(this);if(b)a:{var c=this.B||AEa;a=[];var d=BEa(b);if(!pc(d)){for(var e in d){var f=c("item",e);a.push("var "+d[e]+"="+String(f)+";")}e=CEa(b,d);if(!Hb(e)){a.push("return ",e,";");a=Function("item",a.join(""));break a}}a=Wa}else a=Wa;this.u=a};
function DEa(a,b,c){if(c){c=c.filter(a.u);for(var d=0;d<a.actions.length;d++)a.actions[d].reset(b,c)}}g.af=function(a,b){if(b&&(b=b.filter(this.u),0<b.length))for(a=0;a<this.actions.length;a++)this.actions[a].Fa(b)};g.ra=function(a){a=R7.C.ra.call(this,a)||{};a.actions=this.actions.map(function(a){return a.ra()});return a};g.restore=function(a){R7.C.restore.call(this,a);this.actions.length=0;if(a=a.actions)for(var b=S7.s(),c=0;c<a.length;c++){var d=a[c];(d=T7(b,d.id,d))&&this.actions.push(d)}};
g.Rk=function(a){var b=this.S();var c=a.S();c=b<c?-1:b>c?1:0;b=this.actions.length;0==c&&(c=b<a.actions.length?-1:b>a.actions.length?1:0);if(0==c)for(;b--;){c=lG(this.actions[b].sc());var d=lG(a.actions[b].sc());c=c<d?-1:c>d?1:0}0==c&&(b=this.sb(),a=a.sb(),c=b<a?-1:b>a?1:0);return c};function EEa(a){return a.isEnabled()};function FEa(a,b){a=a?a.ba():"";b=b?b.ba():"";return xb(a,b)};function U7(a,b){this.g=a;this.index=b;this.nb=!1;this.title="Add/Remove "+S7.s().g;this.Ba=null;this.state="ready"}function GEa(a){var b=S7.s().g||"Entry";return"ready"!==a.state?(a.Ba="Command not in ready state",!1):a.g?a.g.type?a.g.sb()?!0:(a.Ba=b+" does not contain a filter",!1):(a.Ba=b+" type not set",!1):(a.Ba=b+" not provided",!1)}U7.prototype.add=function(){this.g&&HEa(S7.s(),this.g,this.index)};U7.prototype.remove=function(){this.g&&IEa(S7.s(),this.g)};function V7(a,b){U7.call(this,a,b);a&&(this.title="Add "+S7.s().g+' "'+a.S()+'"')}w(V7,U7);V7.prototype.Fa=function(){return GEa(this)?(this.state="executing",this.add(),this.state="success",!0):!1};V7.prototype.Db=function(){this.state="reverting";this.remove();this.state="ready";return!0};function W7(a,b){U7.call(this,a,b);a&&(this.title="Remove "+S7.s().g+' "'+a.S()+'"')}w(W7,U7);W7.prototype.Fa=function(){return GEa(this)?(this.state="executing",this.remove(),this.state="success",!0):!1};W7.prototype.Db=function(){this.state="reverting";this.add();this.state="ready";return!0};function JEa(a,b){var c=S7.s(),d=[];a.forEach(function(a){var e=cC(a);if(e){if(!b){var h=OC.rd(a.T());if(h){var k=h.uf();var l="filterable"}}k||(k=a.T(),l="exact");k=ny(c.u,void 0,void 0,{active:a.isEnabled()?"true":"false",title:a.S(),description:a.qb()||"",type:k,typeHint:l});l=Z("filter",k);kG(e,l,"ogc","http://www.opengis.net/ogc");var m=Z("actions",k);a.actions.forEach(function(a){m.appendChild(a.sc())});d.push(k)}});return d}
function X7(a){var b=a.S(),c=a.clone();c.ga(Vb());c.Ta(b+" Copy");a=S7.s();c=new V7(c);c.title="Copy "+a.g+' "'+b+'"';return c}function KEa(a){var b;a&&(a=OC.rd(a))&&(b=a.Se());return b||[]}function LEa(a,b){if(b){var c=[],d=S7.s(),e=Y7(d,b.T()),f=b.S();if(a){var h=fb(e,function(b){return b==a});f=a.S();c.push(new W7(a,h))}c.push(new V7(b,h));1<c.length?(b=new TP,b.bc(c),b.title="Update "+d.g+' "'+f+'"',AE(BE,b)):AE(BE,c[0])}}
function Z7(a){var b=Y7(S7.s(),a.T());b=fb(b,function(b){return b==a});0>b&&(b=void 0);return new W7(a,b)};function $7(){iV.call(this);var a=S7.s(),b=a.g+"s";this.description="Saves the current "+b;this.priority=90;this.g=a.A;this.title=b}w($7,iV);var a8=E.V("os.state.v4.FilterAction"),b8={};
$7.prototype.load=function(a,b){a=jV(a);if(a instanceof Element)try{var c=S7.s(),d=jr(a);if(d&&0<d.length){a=0;for(var e=d.length;a<e;a++){var f=d[a],h=MEa(f);if(h&&1==h.length){var k=h[0];k.ga(hV(b,k.D()));k.Ub(NEa(f,b));k.l=!0;k.Za(!0);HEa(c,k);b in b8||(b8[b]=[]);b8[b].push(k)}else E.error(a8,"There was an error loading a filter action for state file "+b+". Multiple entries were parsed from a single node.")}}}catch(l){E.error(a8,"There was an error loading a filter action for state file "+b,l)}else E.error(a8,
"Unable to load state content!")};function NEa(a,b){a=String(a.getAttribute("type"));return hV(b,a)}$7.prototype.remove=function(a){if(a in b8){for(var b=S7.s(),c=b8[a],d=0,e=c.length;d<e;d++)IEa(b,c[d]);delete b8[a]}};
$7.prototype.bd=function(a,b){try{for(var c=S7.s(),d=SB(tF.s()),e=[],f=0,h=d.length;f<h;f++){var k=Y7(c,d[f].D());e=e.concat(k.filter(EEa))}var l=JEa(e,!0);if(l)for(f=0;f<l.length;f++)b.appendChild(l[f]);b.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:ogc","http://www.opengis.net/ogc");this.Td(a,b)}catch(m){gV(this,m.message||"Unspecified error.")}};function c8(){this.g=null}c8.prototype.Cb=function(a){a instanceof ArrayBuffer&&(a=Dw(a)||null);a instanceof Document?this.g=a:"string"==typeof a&&(this.g=Wx(a))};c8.prototype.pc=function(){this.g=null};c8.prototype.Cd=function(){return!!this.g};c8.prototype.Zc=function(){if(this.g){var a=this.g,b=S7.s(),c=[];if((a=kr(a).querySelectorAll(b.u))&&0<a.length)for(b=0;b<a.length;b++){var d=MEa(a[b]);d&&0<d.length&&(c=c.concat(d))}this.g=null;return c}return null};
function MEa(a){var b=S7.s(),c=[],d=[],e=null,f=a.getAttribute("title")||"",h=a.getAttribute("description")||"",k=a.getAttribute("type")||"",l;"exact"==a.getAttribute("typeHint")?l=[k]:l=PC(k);if(k=a.querySelector("filter"))e=Xx(kr(k)),e=e.replace(/xmlns=("|')[^"']*("|')/g,""),e=e.replace(/ogc:/g,""),e=e.replace(/>\s+</g,"><");if((a=a.querySelector("actions"))&&a.childNodes.length)for(k=jr(a),a=0;a<k.length;a++){var m=void 0;var n=b,p=k[a],r=null;if(p){var u=p.localName.toLowerCase();for(m in n.l){var v=
n.l[m];if(v.j.toLowerCase()==u){r=v.clone();r.fd(p);break}}}(m=r)&&c.push(m)}if(e&&0<l.length)for(b=b.Yj(),b.Ta(f),b.Ub(l[0]),b.fb(h),b.rg(e),b.Za(!0),b.actions=c,d.push(b),a=1;a<l.length;a++)c=b.clone(),c.ga(Vb()),c.Ub(l[a]),d.push(c);return d};Q.directive("filteractionimport",[function(){var a=XS();a.controller=d8;return a}]);function d8(a,b,c){YS.call(this,a,b,c);this.l=S7.s().g;this.showMatch=!1}w(d8,bT);d8.$inject=["$scope","$element","$sce"];d8.prototype.Vy=function(){return new c8};d8.prototype.Wu=function(a){var b="Filter: "+KC(cC(a),1E3);a instanceof R7&&0<a.actions.length&&(a=a.actions.map(function(a){return a.ba()}).join(", ")||"None",b+="\nActions: "+a);return b};
d8.prototype.finish=function(){var a=S7.s(),b=[];this.Oo();for(var c in this.found)for(var d=this.found[c].filterModels,e=0;e<d.length;e++){var f=d[e].filter;f&&b.push(f)}c=qj.s();0<b.length?(a=a.g+(1==b.length?"":"s"),e=b.map(function(a){return new V7(a)}),1<e.length?(d=new TP,d.bc(e),d.title="Import "+b.length+" "+a):d=e[0],AE(BE,d),b="Successfully imported <b>"+b.length+"</b> "+a+".",rj(c,b,Sh)):(b="No "+a.g+"s were imported!",rj(c,b,Rh));kx(this.element)};d8.prototype.finish=d8.prototype.finish;
d8.prototype.yp=function(){return"fa-magic"};d8.prototype.getFilterIcon=d8.prototype.yp;function e8(){eT.call(this);this.label="Import "+S7.s().g+"s"}w(e8,eT);e8.prototype.l=function(){return'<filteractionimport filter-data="filterData" layer-id="layerId"></filteractionimport>'};lw("text/xml; subtype=FEATUREACTIONS",SS(/^featureActions$/,/\/state\//i),0,"text/xml");var f8=void 0;function OEa(a){this.visible=!1;a&&1<=a.length&&(this.visible=!0)}function PEa(a){this.visible=!1;a&&1==a.length&&(this.visible=!0)}function QEa(a){this.visible=!1;a&&1<a.length&&(this.visible=!0)}function REa(a){this.visible=!1;if(a&&1==a.length)"on"==a[0].getState()?this.visible=!1:this.visible=!0;else if(a&&1<a.length)for(var b=0;b<a.length;b++)if("off"==a[b].getState()){this.visible=!0;break}}
function SEa(a){this.visible=!1;if(a&&1==a.length)"off"==a[0].getState()?this.visible=!1:this.visible=!0;else if(a&&1<a.length)for(var b=0;b<a.length;b++)if("on"==a[b].getState()){this.visible=!0;break}}function TEa(a){var b=a.getContext();if(b&&1==b.length){var c=b[0].gb();c&&(b=X7(c),AE(BE,b))}else if(b&&1<b.length){a=[];for(var d=0;d<b.length;d++)if(c=b[d].gb())c=X7(c),a.push(c);a.length&&(b=new $B,b.bc(a),b.title="Copy feature action nodes"+(1<a.length?"s":""),AE(OE.s(),b))}}
function UEa(a){(a=a.getContext())&&1==a.length&&(a=a[0].gb())&&VEa(a.T(),a)}function WEa(a){if((a=a.getContext())&&1<=a.length){for(var b=[],c=[],d,e=0;e<a.length;e++){var f=a[e].gb();f&&(b.push(f),c.push(f),d=XEa(f.T()))}b.length&&c.length&&YEa(b,c,d,g8)}}function ZEa(a){(a=a.getContext())&&1==a.length&&(a=a[0].gb())&&(a=Z7(a),AE(BE,a))}
function $Ea(a){var b=a.getContext();if(b&&1<b.length){a=[];for(var c=0;c<b.length;c++){var d=b[c].gb();d&&(d=Z7(d),a.push(d))}a.length&&(b=new $B,b.bc(a.sort(function(a,b){return a.index>b.index?1:a.index<b.index?-1:0})),b.title="Remove feature action nodes"+(1<a.length?"s":""),AE(OE.s(),b))}}function aFa(a){if((a=a.getContext())&&1<=a.length)for(var b=0;b<a.length;b++)a[b].Ga("on")}function bFa(a){if((a=a.getContext())&&1<=a.length)for(var b=0;b<a.length;b++)a[b].Ga("off")};function h8(a,b){fE.call(this,a,b);this.G=S7.s().Qi().sort(FEa);this.u=-1;this.actions=[];this.availableActions=[];if((b=this.g)&&b.actions){b=b.actions.slice();for(var c=0;c<b.length;c++)this.actions.push({id:b[c].D(),action:b[c]})}this.element.find(".action-container").sortable({items:".filter-action-row",handle:".handle",axis:"y",containment:"parent",snap:!0,tolerance:"pointer",start:this.O.bind(this),stop:this.I.bind(this)});i8(this);0==this.actions.length&&this.Vt();a.$on("$destroy",t(this.o,
this));Y.H("dataSourceRemoved",this.B,!1,this)}w(h8,fE);h8.$inject=["$scope","$element"];h8.prototype.Vt=function(){if(0<this.availableActions.length){var a=S7.s(),b=this.availableActions[0].id;if(a=T7(a,b))this.actions.push({id:b,action:a}),i8(this)}};h8.prototype.addAction=h8.prototype.Vt;h8.prototype.AN=function(a){-1<a&&a<this.actions.length&&(this.actions.splice(a,1),i8(this),N.dispatchEvent("action:update"))};h8.prototype.removeAction=h8.prototype.AN;
h8.prototype.LO=function(a){if((a=this.actions[a])&&a.id!=a.action.D()){var b=T7(S7.s(),a.id);b&&(a.action=b,i8(this));N.dispatchEvent("action:update")}};h8.prototype.updateAction=h8.prototype.LO;function i8(a){for(var b=a.availableActions.length=0;b<a.G.length;b++){var c=a.G[b];c.unique&&a.actions.some(function(a){return a.id==c.D()})||a.availableActions.push({id:c.D(),label:c.ba()})}}
h8.prototype.qD=function(a){if(this.g&&a){var b=this.g.T();if(!ix("importActionConfig")){var c=a.l;c&&fx({id:"importActionConfig",label:a.label,icon:"fa fa-gear",x:"center",y:"center",width:350,"min-width":200,"max-width":2E3,height:"auto",modal:!0,"show-close":!1,"no-scroll":!0},"<confirm><"+c+"></"+c+"></confirm>",void 0,void 0,void 0,{action:a,type:b,yesText:"OK",yesIcon:"fa fa-check",yesButtonClass:"btn-primary",noText:"Cancel",noIcon:"fa fa-ban",noButtonClass:"btn-secondary"})}}};
h8.prototype.configAction=h8.prototype.qD;h8.prototype.B=function(a){a&&a.source&&this.g&&this.g.T()==a.source.D()&&this.cancel()};h8.prototype.o=function(){h8.C.o.call(this);Y.M("dataSourceRemoved",this.B,!1,this)};h8.prototype.cancel=function(){cFa();h8.C.cancel.call(this)};h8.prototype.cancel=h8.prototype.cancel;h8.prototype.finish=function(){cFa();this.g.actions=this.actions.map(function(a){return a.action});h8.C.finish.call(this)};h8.prototype.finish=h8.prototype.finish;
h8.prototype.Jm=function(){return 0==this.actions.length?!0:h8.C.Jm.call(this)};h8.prototype.isInvalid=h8.prototype.Jm;h8.prototype.VD=function(){return 0<this.availableActions.length?"Add a new action":"All available actions have been added"};h8.prototype.getAddActionTooltip=h8.prototype.VD;
h8.prototype.O=function(a,b){(a=this.element.find(".action-container").sortable("instance"))&&a.containment&&(a.containment[3]+=3);b.helper&&b.placeholder&&b.placeholder.height(b.helper.height());b.item&&(b.item.find(".handle").addClass("moving"),this.u=b.item.index())};h8.prototype.I=function(a,b){b.item&&(b.item.find(".handle").removeClass("moving"),a=b.item.index(),this.u!=a&&(Db(this.actions,this.u,a),R(this.scope)))};function cFa(){kx(ix("importActionConfig"))};Q.directive("editfeatureaction",[function(){var a=eE();a.templateUrl="v1541734487/views/plugin/featureaction/editfeatureaction.html";a.controller=j8;a.controllerAs="ctrl";return a}]);function j8(a,b){h8.call(this,a,b);this.j=this.l=null;N.H("action:update",this.mt,!1,this)}w(j8,h8);j8.$inject=["$scope","$element"];j8.prototype.o=function(){j8.C.o.call(this);N.M("action:update",this.mt,!1,this)};
j8.prototype.mt=function(){this.element.find(".labelCanvas").remove();this.element.find(".styleCanvas").remove();this.element.find(".soundPreview").remove();this.l=this.j=null;for(var a=0;a<this.actions.length;a++){var b=this.actions[a].action;if("featureStyleAction"==b.id){var c=b;b=new hq;var d;this.l=document.createElement("canvas");this.l.setAttribute("class","styleCanvas");this.l.height=27;this.l.width=150;this.element.find(".js-filter-action__controls:has(option[selected='selected'][value='string:featureStyleAction'])").append(this.l);
if(this.l){var e=this.l.getContext("2d");e.clearRect(0,0,this.l.clientWidth,this.l.clientHeight);e=aJ(e);c=fi(c.g);if(null!=c){(d=Wy[c.shape||Ky])&&d.config&&d.config.image&&nz(d.config,c);if(Yy.test(c.shape)){c.stroke.width=3;var f=az[c.shape];d=Wha([50,16],30,f);f&&(f=fi(c.centerShape?Wy[c.centerShape]:Wy.Point),f.config&&xz(f.config)?pz(f.config,1):pz(f.config,2),nz(f.config,c))}else pz(c,10),d=new hp([50,16]),xz(c)&&(c.image.anchor=[.5,.5],pz(c,2),jz(c,c.image.fill.color));b.tb(d);c=Az(wz.s(),
c);null!=c&&(d=c.Pa(),f=d.Fe(),2>f?(0==f&&d.load(),d.Vh(dFa,d)):e.Ih(b,c))}}}else"featureLabelAction"==b.id?(c=b,b=new hq,this.j=document.createElement("canvas"),this.j.setAttribute("class","labelCanvas"),this.j.height=24,this.j.width=150,this.element.find(".js-filter-action__controls:has(option[selected='selected'][value='string:featureLabelAction'])").append(this.j),this.j&&(e=this.j.getContext("2d"),e.clearRect(0,0,this.j.clientWidth,this.j.clientHeight),e=aJ(e),d=fi(c.g),null!=d&&(c=hz(d.color||
"rgba(255,255,255,1)"),d=fi(d.labels),d=QB(d),null!=d&&0<d.length&&(f=b.get("_style")||{},d[0].column="COLUMN",f.labels=d,f.labelColor=c,f.labelSize=14,b.set("_style",f,!0),b.set("showLabels",!0),b.set(d[0].column,"VALUE"),b.tb(new hp([20,10])),sz(b),c=b.Ib(),null!=c&&1<c.length&&e.Ih(b,c[1]))))):"featureSoundAction"==b.id&&(b=fi(b.ue),this.element.find(".js-filter-action__controls:has(option[selected='selected'][value='string:featureSoundAction'])").append('<span class="soundPreview"><i class="fa fa-fw fa-music"></i> '+
b.sound+"</span>"))}};j8.prototype.showActionPreview=j8.prototype.mt;function dFa(){this.Bl(dFa,this);3>this.Fe()&&N.dispatchEvent("action:update")};function XEa(a){var b=S7.s().g+"s";a&&(a=L.s().W(a),F(a,"os.layer.ILayer")&&(a=a.S())&&(b=a+" "+b));return b}function eFa(a){if(a){var b=kF.s().N(a);if(b){var c=null;b&&((c=b.getColumns())&&0<c.length&&(c=c.slice(),c.sort(Gx)),c||(b=sE.s().rd(b.D()))&&(c=b.Se().map(ofa)))}}return c||KEa(a)}
function VEa(a,b){var c=b?b.clone():void 0,d=eFa(a);b=LEa.bind(null,b);var e=S7.s(),f=e.g;c?f="Edit "+f:(c=e.Yj(),c.Za(!0),c.Ub(a),f="Create "+f);fx({id:"editfeatureaction",icon:"fa fa-magic",label:f,x:"center",y:"center","show-close":!0,"no-scroll":!1,"min-width":400,"min-height":500,"max-width":1E3,"max-height":1E3,modal:!0,width:850,height:600},"editfeatureaction",void 0,void 0,void 0,{entry:c,type:a,columns:d,callback:b})};function k8(){this.l=this.label=this.id="";this.unique=!0;this.j="AbstractImportAction"}k8.prototype.D=function(){return this.id};k8.prototype.getId=k8.prototype.D;k8.prototype.ba=function(){return this.label};k8.prototype.getLabel=k8.prototype.ba;k8.prototype.cE=function(){return this.l};k8.prototype.getConfigUI=k8.prototype.cE;k8.prototype.gG=function(){return this.unique};k8.prototype.isUnique=k8.prototype.gG;k8.prototype.clone=function(){var a=new this.constructor;a.restore(this.ra());return a};
k8.prototype.ra=function(a){a=a||{};a.id=this.id;return a};k8.prototype.sc=function(){return ny(this.j)};function l8(){k8.call(this);this.id="featureLabelAction";this.label="Set Label";this.l="featurelabelaction";this.j="featureLabelAction";this.g=fi(m8)}w(l8,k8);var m8={color:"rgba(255,255,255,1)",size:14,labels:[Cz()],customName:"",customValue:""};g=l8.prototype;g.reset=function(a,b){for(a=0;a<b.length;a++){var c=b[a];if(c){var d=c.get("_featureActionOriginalConfig");c.set("_style",d,!0)}}uz(b);(a=Dy(b[0]))&&Gz(a,b)};
g.Fa=function(a){var b=this.g.customName||void 0,c=this.g.customValue||void 0,d=this.g.labels;d=QB(d);for(var e=hz(this.g.color||"rgba(255,255,255,1)"),f=parseInt(this.g.size,10)||14,h=0;h<a.length;h++){var k=a[h];if(k){if(0<d.length){var l=k.get("_style"),m=fi(l)||{};m.temporary=!0;if(q(m))for(var n=0;n<m.length;n++)m[n].labels=d,m[n].labelColor=e,m[n].labelSize=f;else m.labels=d,m.labelColor=e,m.labelSize=f;k.set("_style",m,!0);kza(k);null==l||l.temporary||null!=k.get("_featureActionOriginalConfig")||
k.set("_featureActionOriginalConfig",l,!0)}b&&c&&(l=k.get(b),k.set(b,c),N.dispatchEvent(new Zx("feature:valueChange",k.id,c,l)))}}b&&c&&(c=Ey(a[0]))&&(PJ(c,b,void 0,!0,!0),c.dispatchEvent(new K("data")));uz(a);(b=Dy(a[0]))&&Gz(b,a);VB()};g.ra=function(a){a=l8.C.ra.call(this,a);a.labelConfig=this.g;return a};g.restore=function(a){if(a=a.labelConfig)this.g={},Zh(a,this.g)};
g.sc=function(){var a=l8.C.sc.call(this),b=this.g.color;b&&Z("color",a,ef(b));b=this.g.size;null!=b&&Z("size",a,String(b));b=this.g.customName;var c=this.g.customValue;b&&c&&(Z("customName",a,b),Z("customValue",a,c));b=this.g.labels;b=QB(b);if(0<b.length){c=Z("labels",a);for(var d=0;d<b.length;d++){var e=b[d];Z("label",c,void 0,{column:e.column,showColumn:String(e.showColumn)})}}return a};
g.fd=function(a){var b=fi(m8);if(a){var c=nG(a,"color");df(c)&&(b.color=hz(c));c=parseFloat(nG(a,"size"));isNaN(c)||(b.size=c);c=nG(a,"customName");var d=nG(a,"customValue");c&&d&&(b.customName=c,b.customValue=d);if((a=a.querySelectorAll("label"))&&0<a.length){c=[];for(d=0;d<a.length;d++){var e=a[d],f=e.getAttribute("column");e="true"==e.getAttribute("showColumn");f&&c.push({column:f,showColumn:e})}0<c.length&&(b.labels=c)}}this.g=b};function S7(){C.call(this);this.g="Import Action";this.u="importAction";this.A="importActions";this.j={};this.l={};this.log=fFa;Rj.s().Ua("load",this.load,!1,this);N.H("importAction:addEntry",this.yw,!1,this)}w(S7,C);xa(S7);var fFa=E.V("os.im.action.ImportActionManager");g=S7.prototype;g.J=function(){S7.C.J.call(this);N.M("importAction:addEntry",this.yw,!1,this)};function T7(a,b,c){var d=null;b&&a.l[b]&&(d=a.l[b].clone(),c&&d.restore(c));return d}g.Qi=function(){return ic(this.l)};
function n8(a,b){b.id?(b.id in a.l&&E.hb(a.log,'The import action with id "'+b.id+'" is being overridden!'),a.l[b.id]=b):E.error(a.log,'Unable to register import action without an identifier! Action label is "'+b.ba()+'".')}g.Yj=function(){return new R7};function Y7(a,b){if(b)b=a.j[b]?a.j[b].slice():[];else{b=[];for(var c in a.j)b=b.concat(a.j[c])}return b}
function HEa(a,b,c){if(b&&b.type&&b.sb()){var d=-1;b.type in a.j?(d=Y7(a,b.type),d=fb(d,function(a){return a.D()==b.D()})):a.j[b.type]=[];var e=a.j[b.type];-1<d?e[d]=b:-1<c&&c<e.length?jb(e,b,c):e.push(b);a.dispatchEvent("importAction:refresh");a.save()}}g.nm=function(){return null};g.af=function(a,b,c){if((b=b||this.nm(a))&&0<b.length){var d=this.j[a];if(d&&0<d.length)for(var e=0;e<d.length;e++)d[e].isEnabled()?d[e].af(a,b):c&&DEa(d[e],a,b)}};
function IEa(a,b){if(b&&b.type in a.j){var c=b.type,d=a.nm(b.type);if(d&&0<d.length){var e=a.j[c];if(e&&0<e.length)for(var f=0;f<e.length;f++)DEa(e[f],c,d)}c=a.j[b.type];mb(c,b);0==c.length&&delete a.j[b.type];a.af(b.type);a.dispatchEvent("importAction:refresh");a.save()}}g.load=function(){var a=M.get("os.importActions",{}),b;for(b in a){var c=[],d=a[b];if(d)for(var e=0;e<d.length;e++){var f=this.Yj();f.restore(d[e]);c.push(f)}this.j[b]=c}this.oy();this.dispatchEvent("importAction:refresh")};
g.oy=wa;g.save=function(){var a={},b;for(b in this.j){var c=this.j[b];if(0<c.length){for(var d=[],e=0;e<c.length;e++){var f=c[e];f.l||d.push(f.ra())}a[b]=d}}M.set("os.importActions",a)};
g.yw=function(a){var b=a.g;if(b&&!(b instanceof R7))try{var c=this.Yj();c.restore(b.ra());c instanceof R7?b=c:(E.error(this.log,"Failed adding "+this.g.toLowerCase()+". Unable to determine entry type."),b=null)}catch(d){E.error(this.log,"Failed adding "+this.g.toLowerCase()+":",d),b=null}b?(c=new V7(b),AE(BE,c),a.Fa&&(a=this.nm(b.T()),b.af(a))):rj(tj,"Failed adding "+this.g.toLowerCase()+". See the log for details.",Qh)};function gFa(){R7.call(this);this.Ta("New Feature Action");this.B=Afa}w(gFa,R7);function o8(){S7.call(this);this.g="Feature Action";this.log=hFa;this.A="featureActions";this.u="featureAction";this.o={}}w(o8,S7);xa(o8);yc(S7,{s:function(){return o8.s()}});var hFa=E.V("plugin.im.action.feature.Manager");g=o8.prototype;g.J=function(){o8.C.J.call(this);var a=tF.s();a&&(a.M("dataSourceAdded",this.Oz,!1,this),a.M("dataSourceRemoved",this.Pz,!1,this));for(var b in this.o)sf(this.o[b]);this.o={}};g.Yj=function(){return new gFa};g.nm=function(a){return(a=tF.s().N(a))?a.La():null};
g.oy=function(){var a=tF.s();a.H("dataSourceAdded",this.Oz,!1,this);a.H("dataSourceRemoved",this.Pz,!1,this);a=SB(a);for(var b=0,c=a.length;b<c;b++)iFa(this,a[b])};function iFa(a,b){if(F(b,"os.source.IImportSource")){var c=b.D();c&&!a.o[c]&&(a.o[c]=H(b,"propertychange",a.JM,a),a.af(c))}}g.Oz=function(a){a&&a.source&&iFa(this,a.source)};g.Pz=function(a){a&&a.source&&(a=a.source.D(),a in this.o&&(sf(this.o[a]),delete this.o[a]))};
g.JM=function(a){try{var b=a.j}catch(d){return}var c=a.target;c&&"preprocessFeatures"===b&&(a=a.o)&&0<a.length&&this.af(c.D(),a)};function p8(){k8.call(this);this.id="featureSoundAction";this.label="Set Sound";this.j="featureSoundAction";this.l="featureactionsoundconfig";this.ue=fi(q8);this.sounds=Wwa();var a=this.sounds.indexOf("Default");this.ue.sound=-1<a?this.sounds[a]:this.sounds[0]||""}w(p8,k8);var q8={sound:"",playDelay:30};g=p8.prototype;g.reset=wa;g.Fa=function(){k_.s().play(this.ue.sound,1E3*this.ue.playDelay)};g.ra=function(a){a=p8.C.ra.call(this,a);a.soundConfig=this.ue;return a};
g.restore=function(a){if(a=a.soundConfig)this.ue={},Zh(a,this.ue)};g.sc=function(){var a=p8.C.sc.call(this),b=this.ue.sound,c=this.ue.playDelay;null!=b&&Z("sound",a,String(b));null!=c&&Z("playDelay",a,String(c));return a};g.fd=function(a){var b=fi(q8);if(a){var c=nG(a,"playDelay");b.sound=String(nG(a,"sound"));b.playDelay=Number(c);this.ue=b}};function r8(){k8.call(this);this.id="featureStyleAction";this.label="Set Style";this.l="featureactionstyleconfig";this.j="featureStyleAction";this.o=Da(this);this.g=fi(Sy)}w(r8,k8);F(r8,"os.legend.ILegendRenderer");g=r8.prototype;g.reset=function(a,b){for(a=0;a<b.length;a++){var c=b[a];if(c){c.set("_featureStyleAction",void 0);c.set("shape",void 0,!0);c.set("centerShape",void 0,!0);var d=c.get("_featureActionOriginalConfig");c.set("_style",d,!0)}}uz(b);(a=Dy(b[0]))&&Gz(a,b)};
g.Fa=function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c){var d=c.get("_style"),e=fi(d)||{};e.temporary=!0;if(q(e))for(var f=0;f<e.length;f++)e[f].zIndex=10,nz(this.g,e[f]);else e.zIndex=10,nz(this.g,e);c.set("_style",e,!0);c.set("_featureStyleAction",this.o,!0);null==d||d.temporary||null!=c.get("_featureActionOriginalConfig")||c.set("_featureActionOriginalConfig",d,!0);(d=this.g.shape)&&d!=Ky?c.set("shape",d,!0):c.set("shape",void 0,!0);(d=this.g.centerShape)&&"Point"!=d?c.set("centerShape",
d,!0):c.set("centerShape",void 0,!0)}}uz(a);(b=Dy(a[0]))&&Gz(b,a)};g.ra=function(a){a=r8.C.ra.call(this,a);a.styleConfig=this.g;return a};g.restore=function(a){if(a=a.styleConfig)this.g={},Zh(a,this.g)};
g.sc=function(){var a=r8.C.sc.call(this),b=Iy(this.g,!0);b&&(Z("color",a,ef(b)),Z("opacity",a,String(3<b.length?b[3]:1)));b=oz(this.g);null!=b&&Z("size",a,String(b));b=this.g.shape||Ky;Z("shape",a,String(b));"Icon"==b&&(b=kz(this.g)||HB(),Z("iconSrc",a,b.path));b=this.g.centerShape||"Point";Z("centerShape",a,String(b));"Icon"==b&&(b=kz(this.g)||HB(),Z("iconSrc",a,b.path));Z("showRotation",a,String(this.g.showRotation||!1));Z("rotationColumn",a,String(this.g.rotationColumn||!1));return a};
g.fd=function(a){var b=fi(Sy);if(a){var c=nG(a,"color");if(df(c)){var d=ff(c);d&&(c=parseFloat(nG(a,"opacity")),d[3]=isNaN(c)?1:me(c,0,1),c=hz(d));jz(b,c)}d=parseFloat(nG(a,"size"));isNaN(d)||pz(b,d);if(d=nG(a,"shape"))b.shape=d,(c=nG(a,"centerShape"))&&(b.centerShape=c),("Icon"==d||az[d]&&"Icon"===c)&&lz(b,{path:nG(a,"iconSrc")});b.showRotation=!!nG(a,"showRotation");b.rotationColumn=nG(a,"rotationColumn")}this.g=b};
g.Kf=function(a,b,c){if(b&&0<b.length&&b.some(jFa,this)&&c instanceof R7){b=fi(this.g);var d=b.shape||Ky,e=Wy[d];e&&e.config&&e.config.image&&(nz(e.config,b),"Icon"==d?ai(b,["image","scale"],a.fontSize/32):ai(b,["image","radius"],Math.round(a.fontSize/3)));d=a.showVector?10:0;rJ(b,a,c.S(),d)}};function jFa(a){return a.la._featureStyleAction===this.o};function kFa(a,b){if(b.showFeatureActions){var c=a.N();if(c&&qJ(c)){a=Y7(o8.s(),c.D()).filter(lFa);var d=c.Zd();for(c=0;c<a.length;c++){var e=a[c];e.actions.filter(mFa).forEach(function(a){a.Kf(b,d,e)})}}}}function lFa(a){return a.actions.some(mFa)}function mFa(a){return F(a,"os.legend.ILegendRenderer")};function nFa(a){this.visible=!1;var b=S7.s();b&&!pc(b.l)&&a&&1==a.length&&(a=fv(a).filter(cR))&&1==a.length&&"Reference Layers"!=a[0].Sc()&&(a=a[0].N(),this.visible=F(a,"os.source.IImportSource"))}
function oFa(a){if((a=fv(a.getContext()).filter(cR))&&1==a.length&&"Reference Layers"!=a[0].Sc()){a=a[0].D();var b="Feature Actions",c=("featureActions-"+a).replace(/\s/g,"").replace(/[^\w]/g,"-");if(ix(c))hx(c);else{var d=Bg(a);d&&(b+=" for "+d);fx({id:c,label:b,key:c,icon:"fa fa-magic",x:"center",y:"center",width:500,height:500,"show-close":!0,"no-scroll":!0,"min-width":300,"max-width":2E3,"min-height":400,"max-height":2E3},"<featureactions></featureactions>",void 0,void 0,void 0,{type:a,helpTitle:"Feature Actions",
helpText:"Feature Actions perform tasks on data that matches a filter, as it is loaded into the application. For example, you can change the style of features if they match certain criteria.<br><br>Actions are executed in order (top-down), and data matching multiple filters will override previous actions. Actions can be reordered by dragging them in the list."})}}else rj(tj,"Unexpected layer selection. Please select a single layer and try again.",Rh)};Q.directive("filteractionnodeui",[function(){var a=Zva();a.controller=s8;a.template='<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-click="nodeUi.copy()"><i class="fa fa-copy fa-fw c-glyph" title="Copy the action"></i></span><span ng-click="nodeUi.edit()"><i class="fa fa-pencil fa-fw c-glyph" title="Edit the action"></i></span><span ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the action"></i></span></span>';return a}]);
function s8(a,b){FE.call(this,a,b)}w(s8,lZ);s8.$inject=["$scope","$element"];s8.prototype.copy=function(){var a=this.scope.item.gb();a&&(this.scope.$emit("importAction:copyEntry",a),O(P.s(),"importAction.copy",1))};s8.prototype.copy=s8.prototype.copy;s8.prototype.Rc=function(){var a=this.scope.item.gb();a&&(this.scope.$emit("importAction:editEntry",a),O(P.s(),"importAction.edit",1))};s8.prototype.edit=s8.prototype.Rc;
s8.prototype.remove=function(){var a=this.scope.item.gb();a&&(this.scope.$emit("importAction:removeEntry",a),O(P.s(),"importAction.remove",1))};s8.prototype.remove=s8.prototype.remove;function t8(a){kZ.call(this,a);this.cb=!1;this.Ca="If the action should automatically execute against loaded data";this.j="<filteractionnodeui></filteractionnodeui>"}w(t8,kZ);t8.prototype.rp=function(){var a=t8.C.rp.call(this);this.g&&this.g.actions&&(a+="\nActions: "+this.g.actions.map(function(a){return a.ba()}).join(", "));return a};t8.prototype.Ga=function(a){t8.C.Ga.call(this,a);S7.s().save()};
function pFa(a){return a?a.map(function(a){return a?new t8(a):void 0}).filter(function(a){return!!a}):[]}function u8(a){return a?a.map(function(a){return a.gb()}).filter(function(a){return!!a}):[]};var g8="selected";Q.directive("filteractionexport",[function(){return{restrict:"E",templateUrl:"v1541734487/views/im/action/filteractionexport.html",controller:v8,controllerAs:"ctrl"}}]);function v8(a,b){x.call(this);this.scope=a;this.element=b;this.exportType=a.exportType||"active";this.fileName=a.fileName;this.errorMsg=void 0;a.$emit("window.ready");a.$on("$destroy",this.dispose.bind(this));this.Zb()}w(v8,x);v8.$inject=["$scope","$element"];
v8.prototype.J=function(){v8.C.J.call(this);this.element=this.scope=null};v8.prototype.cancel=function(){kx(this.element)};v8.prototype.cancel=v8.prototype.cancel;
v8.prototype.Zb=function(){this.errorMsg=void 0;switch(this.exportType){case "active":this.scope.entries.some(EEa)||(this.errorMsg="No actions are currently active.");break;case "all":0==this.scope.entries.length&&(this.errorMsg="No actions are available to export.");break;case g8:this.scope.selected&&0!=this.scope.selected.length||(this.errorMsg="No actions are currently selected.")}};v8.prototype.validate=v8.prototype.Zb;
v8.prototype.save=function(){switch(this.exportType){case "active":var a=this.scope.entries.filter(function(a){return a.isEnabled()});break;case "all":a=this.scope.entries;break;case g8:a=this.scope.selected}a&&qFa(this.fileName+".xml",a);kx(this.element)};v8.prototype.save=v8.prototype.save;
function YEa(a,b,c,d){a={entries:a,selected:b,fileName:c,exportType:d};b={id:"filteractionexport",label:"Export "+S7.s().g+"s",icon:"fa fa-download",x:"center",y:"center",width:"400",height:"auto",modal:"true","show-close":"true"};fx(b,"<filteractionexport></filteractionexport>",void 0,void 0,void 0,a)}
function qFa(a,b){if(0<b.length){var c=S7.s();c=hG(c.A,"http://www.bit-sys.com/state/v4");if(b=JEa(b,!1))for(var d=0;d<b.length;d++)c.appendChild(b[d]);US(a,lG(c),"text/xml")}else rj(tj,"No actions to export.",Rh)};function w8(a,b){x.call(this);this.scope=a;this.element=b;this.g=this.scope.type;this.entries=[];this.selected=null;S7.s().H("importAction:refresh",this.refresh,!1,this);a.$on("importAction:copyEntry",this.HH.bind(this));a.$on("importAction:editEntry",this.dI.bind(this));a.$on("importAction:removeEntry",this.FJ.bind(this));a.$on("slickgrid.orderChange",this.sJ.bind(this));a.$on("$destroy",this.dispose.bind(this));this.refresh()}w(w8,x);w8.$inject=["$scope","$element"];
w8.prototype.J=function(){w8.C.J.call(this);S7.s().M("importAction:refresh",this.refresh,!1,this);this.element=this.scope=null};w8.prototype.refresh=function(){var a=Y7(S7.s(),this.g);this.entries=pFa(a);R(this.scope)};w8.prototype.apply=function(){rFa(this)};w8.prototype.apply=w8.prototype.apply;w8.prototype.close=function(){kx(this.element)};w8.prototype.close=w8.prototype.close;
function rFa(a){if(a.entries){var b=u8(a.entries),c=S7.s();if(a=a.g)c.j[a]=b,c.dispatchEvent("importAction:refresh"),c.save()}}w8.prototype.getColumns=function(){return KEa(this.g)};w8.prototype.j=function(){return S7.s().g+"s"};w8.prototype.editEntry=w8.prototype.Uf;g=w8.prototype;g.HH=function(a,b){a.stopPropagation();b&&(a=X7(b),AE(OE.s(),a))};g.dI=function(a,b){a.stopPropagation();b&&this.Uf(b)};g.sJ=function(a){a.stopPropagation();rFa(this)};
g.FJ=function(a,b){a.stopPropagation();b&&(a=Z7(b),AE(OE.s(),a))};g.LF=function(){return this.selected&&0<this.selected.length};w8.prototype.hasSelected=w8.prototype.LF;w8.prototype.Bk=function(){O(P.s(),"importAction.export",1);var a=u8(this.entries),b=u8(this.selected);YEa(a,b,this.j())};w8.prototype.launchExport=w8.prototype.Bk;w8.prototype.oG=function(){O(P.s(),"importAction.import",1);N.dispatchEvent(new Mw("importFile",void 0,void 0,{layerId:this.g}))};w8.prototype.launchImport=w8.prototype.oG;Q.directive("autoheight",[function(){return{restrict:"A",scope:{parent:"@",siblings:"@",height:"@autoheight",minHeight:"@minheight"},controller:x8}}]);
function x8(a,b){this.v=a;this.L=b;this.j=1;this.v.height&&(b=Number(this.v.height.replace(/%/,"")),isNaN(b)||100<b||0>=b?b=1:1<b&&100>=b&&(b/=100),this.j=b);this.g=this.l.bind(this);b=null;if(this.v&&this.L){var c=this.L.parent(),d=this.v.parent;d&&(b=c.closest(d));b&&b.length||(b=c)}if(this.ya=b)this.ya.resize(this.g),(b=a.siblings)&&this.ya.find(b).resize(this.g),Ck(this.l.bind(this));a.$on("$destroy",this.o.bind(this))}x8.$inject=["$scope","$element","$injector"];
x8.prototype.o=function(){if(this.ya){this.ya.removeResize(this.g);var a=this.v.siblings;if(a)try{this.ya.find(a).removeResize(this.g)}catch(b){}this.ya=null}this.v=this.L=this.g=null};x8.prototype.l=function(){if(this.L&&this.ya){var a=0,b=this.v.siblings;b&&this.ya.find(b).each(function(){a+=$(this).outerHeight(!0)});b=Number(this.v.minHeight)||0;b=Math.max((this.ya.height()-a)*this.j,b);this.L.css("height",b+"px")}};Q.directive("featureactions",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/im/action/importactions.html",controller:y8,controllerAs:"ctrl"}}]);function y8(a,b){this.contextMenu=f8;w8.call(this,a,b);Y.H("dataSourceRemoved",this.l,!1,this)}w(y8,w8);y8.$inject=["$scope","$element"];y8.prototype.l=function(a){a&&a.source&&this.g&&this.g==a.source.D()&&this.close()};y8.prototype.close=function(){y8.C.close.call(this);Y.M("dataSourceRemoved",this.l,!1,this)};
y8.prototype.close=y8.prototype.close;y8.prototype.apply=function(){y8.C.apply.call(this);if(this.g){var a=kF.s().N(this.g);if(a){var b=L.s().W(this.g),c=!0;void 0!==b.Va().featureActionRefresh&&(c=b.Va().featureActionRefresh);a.ah()&&c?a.refresh():o8.s().af(a.D(),a.La(),!0)}}};y8.prototype.apply=y8.prototype.apply;y8.prototype.getColumns=function(){return eFa(this.g)};y8.prototype.j=function(){return XEa(this.g)};y8.prototype.Uf=function(a){this.g&&VEa(this.g,a)};y8.prototype.editEntry=y8.prototype.Uf;Q.directive("addcolumnform",[function(){return{restrict:"E",replace:!0,scope:{name:"=",value:"=",validators:"&"},templateUrl:"v1541734487/views/data/addcolumnform.html",controller:z8,controllerAs:"ctrl"}}]);function z8(a,b){this.v=a;a.$on("$destroy",t(this.j,this));b(this.g.bind(this))}z8.$inject=["$scope","$timeout"];z8.prototype.j=function(){this.v=null};
z8.prototype.g=function(){if(this.v){var a=this.v.columnForm,b=this.v.validators?this.v.validators():null;a&&b&&b.forEach(function(b){var c=a[b.model];c&&(c.$validators[b.id]=b.handler)},this)}};function sFa(a,b,c){a=a.getColumns();if(b=b||c){c=0;for(var d=a.length;c<d;c++){var e=a[c],f=b.toLowerCase();if(!e.temp&&(e.field.toLowerCase()===f||e.name.toLowerCase()==f))return!1}}return!0};function A8(a,b){x.call(this);this.scope=a;this.element=b;this.action=a.action;this.type=a.type||"";a.$parent.confirmCallback=this.Wn.bind(this);a.$parent.confirmValue=this.action;a.$on("$destroy",this.dispose.bind(this))}w(A8,x);A8.$inject=["$scope","$element"];A8.prototype.J=function(){A8.C.J.call(this);this.scope=this.element=this.action=null};A8.prototype.ug=function(){this.scope&&this.scope.$emit("window.ready")};A8.prototype.Wn=wa;Q.directive("featurelabelaction",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/plugin/featureaction/featurelabelactionconfig.html",controller:B8,controllerAs:"ctrl"}}]);
function B8(a,b){A8.call(this,a,b);this.addCustomLabel=!1;this.validators=[];this.customLabelWarning="The custom label will be added to each feature, but will not appear on the map unless selected in the columns above.";this.j=new Wv;this.l=new Fh(this.yt,100,this);this.o=void 0;this.g=this.action&&this.action.g?fi(this.action.g):fi(m8);a.$on("labelColor.change",this.u.bind(this));a.$on("labelColor.reset",this.A.bind(this));a.$on("labelSize.spinstop",this.pg.bind(this));a.$on("labelcontrols:columnChange",
this.Zb.bind(this));a.$watch("config.customName",this.LH.bind(this));this.ug()}w(B8,A8);B8.$inject=["$scope","$element"];g=B8.prototype;g.J=function(){B8.C.J.call(this);z(this.l);this.l=null};
g.ug=function(){if(this.type){var a=kF.s().N(this.type);a&&this.validators.push({id:"duplicate",model:"name",handler:sFa.bind(this,a)})}this.g&&(this.scope.config=this.g,this.scope.color=this.o=ef(this.g.color||"rgba(255,255,255,1)"),this.scope.size=this.g.size||14,a=L.s().W(this.type),F(a,"os.layer.ILayer")&&(this.scope.columns=IH(a)),this.scope.columns||(this.scope.columns=[]),this.g.customName&&this.g.customValue&&(this.addCustomLabel=!0));this.yt();B8.C.ug.call(this)};
g.Wn=function(){this.action&&this.g&&(this.addCustomLabel||(this.g.customName="",this.g.customValue=""),this.action.g=this.g,N.dispatchEvent("action:update"))};g.Zb=function(){var a=this.j.name;this.showCustomWarning=this.addCustomLabel&&a?!this.scope.config.labels.some(function(b){return b.column===a}):!1};g.LH=function(a,b){a!=b&&this.l&&this.l.start()};
g.yt=function(){mb(this.scope.columns,this.j);var a=(this.g&&this.g.customName||"").trim();a&&(this.j.name=a,this.j.field=a,this.showCustomWarning=!1,this.addCustomLabel&&this.scope&&this.scope.columns&&(a=Jx.bind(void 0,"field",a),eb(this.scope.columns,a)||(this.scope.columns.push(this.j),this.scope.columns.sort(Fx))));this.Zb();R(this.scope)};B8.prototype.updateCustomColumn=B8.prototype.yt;
B8.prototype.u=function(a,b){a.stopPropagation();this.g&&(a=b?hz(b):"rgba(255,255,255,1)",this.g.color=a,this.scope.color=ef(a))};B8.prototype.A=function(a){a.stopPropagation();this.u(a,this.o)};B8.prototype.pg=function(a,b){a.stopPropagation();this.g&&null!=b&&(this.g.size=b)};Q.directive("featureactionlegendsettings",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/plugin/featureaction/featureactionlegendsettings.html"}}]);Q.directive("featureactionsoundconfig",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/plugin/featureaction/featuresoundactionconfig.html",controller:C8,controllerAs:"ctrl"}}]);function C8(a,b){A8.call(this,a,b);a.$on("playDelay.spinstop",this.j.bind(this));this.sounds=Wwa();this.g=this.action&&this.action.ue?fi(this.action.ue):fi(q8);this.ug()}w(C8,A8);C8.$inject=["$scope","$element"];
C8.prototype.ug=function(){C8.C.ug.call(this);this.scope.playDelay=this.g.playDelay;this.sound=this.g.sound;this.help="Set the time between sound notifications in seconds"};C8.prototype.Wn=function(){this.action&&this.g&&(this.action.ue=this.g)};C8.prototype.aK=function(){var a=this.sound;k_.s().play(a);this.g.sound=this.sound};C8.prototype.onSoundChange=C8.prototype.aK;C8.prototype.j=function(a,b){a.stopPropagation();this.g&&null!=b&&(this.g.playDelay=b)};Q.directive("featureactionstyleconfig",[function(){return{restrict:"E",replace:!0,template:'<div><vectorstylecontrols color="color" opacity="opacity" size="size" icon="icon" center-icon="centerIcon" icon-set="ctrl.iconSet" icon-src="ctrl.iconSrc" shape="shape" shapes="shapes" center-shape="centerShape" center-shapes="centerShapes" show-color-reset="true"></vectorstylecontrols><iconstylecontrols ng-show="ctrl.showRotationOption()" columns="columns" show-rotation="showRotation" rotation-column="rotationColumn"></iconstylecontrols></div>',
controller:D8,controllerAs:"ctrl"}}]);
function D8(a,b){A8.call(this,a,b);this.iconSet=JB;this.iconSrc=IB;this.g=fi(Sy);this.l=void 0;this.action&&this.action.g&&nz(this.action.g,this.g);a.$on("color.change",this.Qz.bind(this));a.$on("color.reset",this.KM.bind(this));a.$on("opacity.slidestop",this.qJ.bind(this));a.$on("size.slidestop",this.pg.bind(this));a.$on("icon:change",this.og.bind(this));a.$on("vector:shapeChange",this.uj.bind(this));a.$on("vector:centerShapeChange",this.pj.bind(this));a.$on(zL,this.o.bind(this));a.$on(AL,this.j.bind(this));
this.ug()}w(D8,A8);D8.$inject=["$scope","$element"];g=D8.prototype;
g.ug=function(){if(this.g){var a=Iy(this.g,!0);a?(this.scope.color=this.l=re(a),this.scope.opacity=3<a.length?a[3]:1):(this.scope.color=ef("rgba(255,255,255,1)"),this.scope.opacity=1);jz(this.g,Iy(this.g));this.scope.size=oz(this.g);this.scope.shape=this.g.shape||Ky;tFa(this);this.scope.centerShape=this.g.centerShape||"Point";uFa(this);this.scope.showRotation=this.g.showRotation||!1;this.scope.rotationColumn=this.g.rotationColumn||"";if(this.type&&(a=kF.s().N(this.type),kg(a,"os.source.Vector"))){var b=
jc(Wy);this.scope.shapes=ab(b,a.eB,a);this.scope.centerShapes=ab(b,a.Jv,a);this.scope.columns=dha(a);Hb(this.scope.rotationColumn)&&AK(a,"BEARING")&&(this.scope.rotationColumn="BEARING",this.j(void 0,this.scope.rotationColumn))}}D8.C.ug.call(this)};g.Wn=function(){this.action&&this.g&&(this.action.g=this.g,N.dispatchEvent("action:update"))};
g.Qz=function(a,b){a&&a.stopPropagation();if(this.g){a=b?hz(b):"rgba(255,255,255,1)";b=ff(a);var c=this.scope.opacity;b&&null!=c&&(b[3]=c,a=hz(b));jz(this.g,a);this.scope.color=ef(a)}};g.KM=function(a){a&&a.stopPropagation();this.Qz(a,this.l)};g.og=function(a,b){a&&a.stopPropagation();this.g&&b&&lz(this.g,b)};g.qJ=function(a,b){a&&a.stopPropagation();this.g&&null!=b&&Ty(this.g,b)};g.pg=function(a,b){a&&a.stopPropagation();this.g&&null!=b&&pz(this.g,b)};
g.uj=function(a,b){a&&a.stopPropagation();this.g&&(this.g.shape=b);tFa(this)};g.pj=function(a,b){a&&a.stopPropagation();this.g&&(this.g.centerShape=b);uFa(this)};function tFa(a){a.scope.icon=a.g&&"Icon"==a.g.shape?kz(a.g)||HB():null;a.og(null,a.scope.icon)}function uFa(a){a.scope.centerIcon=a.g&&"Icon"==a.g.centerShape?kz(a.g)||HB():null;a.og(null,a.scope.centerIcon)}
g.qt=function(){if(null!=this.scope){var a=this.scope.shape||"",b=this.scope.centerShape||"";return"Icon"==a||(Yy.test(a)||Xy.test(a))&&"Icon"==b}return!1};D8.prototype.showRotationOption=D8.prototype.qt;D8.prototype.o=function(a,b){a&&a.stopPropagation();this.g&&(this.g.showRotation=b)};D8.prototype.j=function(a,b){a&&a.stopPropagation();b&&this.g&&(this.g.rotationColumn=b)};function E8(){Kg.call(this);this.id="featureAction"}w(E8,Kg);xa(E8);E8.prototype.J=function(){E8.C.J.call(this);var a=AZ;a&&!a.Ha().find("featureAction:launch")&&(a=a.Ha().find("Tools"))&&a.removeChild("featureAction:launch");z(f8);f8=void 0};
E8.prototype.init=function(){var a=o8.s();n8(a,new l8);n8(a,new r8);n8(a,new p8);KM(GM.s(),"text/xml; subtype=FEATUREACTIONS",new e8);(a=AZ)&&!a.Ha().find("featureAction:launch")&&a.Ha().find("Tools").R({label:"Feature Actions...",eventType:"featureAction:launch",tooltip:"Perform actions on imported data matching a filter",da:['<i class="fa fa-fw fa-magic"></i>'],Aa:nFa,za:oFa,qa:"layers.contextMenu.featureActions"});a=BX.s();$U(a,"v3",$7);$U(a,"v4",$7);f8||(f8=new px(new aw({type:"root",children:[{label:"Copy",
eventType:"featureactionnodes:copy",tooltip:"Copy the action",da:['<i class="fa fa-copy fa-fw"></i>'],Aa:OEa,za:TEa,qa:"importAction.copy"},{label:"Edit",eventType:"featureactionnodes:edit",tooltip:"Edit the action",da:['<i class="fa fa-pencil fa-fw"></i>'],Aa:PEa,za:UEa,qa:"importAction.edit"},{label:"Export Selected",eventType:"featureactionnodes:export",tooltip:"Export the action",da:['<i class="fa fa-fw fa-download"></i>'],Aa:OEa,za:WEa,qa:"importAction.export"},{label:"Remove",eventType:"featureactionnodes:remove",
tooltip:"Remove the action",da:['<i class="fa fa-fw fa-times"></i>'],Aa:PEa,za:ZEa,qa:"importAction.remove"},{label:"Remove Selected",eventType:"featureactionnodes:removeSelected",tooltip:"Removes selected actions",da:['<i class="fa fa-fw fa-times"></i>'],Aa:QEa,za:$Ea,qa:"action.feature.node.removeSelected"},{label:"Toggle On",eventType:"featureactionnodes:toggleOn",tooltip:"Toggles the actions on",da:['<i class="fa fa-fw fa-check-square-o"></i>'],Aa:REa,za:aFa,qa:"action.feature.node.toggleOn"},
{label:"Toggle Off",eventType:"featureactionnodes:toggleOff",tooltip:"Toggles the actions off",da:['<i class="fa fa-fw fa-square-o"></i>'],Aa:SEa,za:bFa,qa:"action.feature.node.toggleOff"}]})));bia({priority:1E3,render:kFa,settingsUI:"featureactionlegendsettings",defaultSettings:{showFeatureActions:!0}})};function F8(a){return a.getAttributeNS("http://www.w3.org/1999/xlink","href")};function vFa(){}function wFa(a){var b=new xFa;return uu(a)?yFa(b,a):vu(a)?zFa(b,a):"string"===typeof a?(a=wu(a),yFa(b,a)):null};function xFa(){this.version=void 0}I(xFa,vFa);function yFa(a,b){for(b=b.firstChild;b;b=b.nextSibling)if(b.nodeType==Node.ELEMENT_NODE)return zFa(a,b);return null}function zFa(a,b){a.version=b.getAttribute("version").trim();return(a=Hu({version:a.version},AFa,b,[]))?a:null}function G8(a,b){return Hu({},BFa,a,b)}function H8(a,b){return Hu({},CFa,a,b)}function DFa(a,b){if(b=G8(a,b))return a=[vV(a.getAttribute("width")),vV(a.getAttribute("height"))],b.size=a,b}
function EFa(a,b){return Hu([],FFa,a,b)}
var I8=[null,"http://www.opengis.net/wms"],AFa=X(I8,{Service:V(function(a,b){return Hu({},GFa,a,b)}),Capability:V(function(a,b){return Hu({},HFa,a,b)})}),HFa=X(I8,{Request:V(function(a,b){return Hu({},IFa,a,b)}),Exception:V(function(a,b){return Hu([],JFa,a,b)}),Layer:V(function(a,b){return Hu({},KFa,a,b)})}),GFa=X(I8,{Name:V(wV),Title:V(wV),Abstract:V(wV),KeywordList:V(EFa),OnlineResource:V(F8),ContactInformation:V(function(a,b){return Hu({},LFa,a,b)}),Fees:V(wV),AccessConstraints:V(wV),LayerLimit:V(uV),
MaxWidth:V(uV),MaxHeight:V(uV)}),LFa=X(I8,{ContactPersonPrimary:V(function(a,b){return Hu({},MFa,a,b)}),ContactPosition:V(wV),ContactAddress:V(function(a,b){return Hu({},NFa,a,b)}),ContactVoiceTelephone:V(wV),ContactFacsimileTelephone:V(wV),ContactElectronicMailAddress:V(wV)}),MFa=X(I8,{ContactPerson:V(wV),ContactOrganization:V(wV)}),NFa=X(I8,{AddressType:V(wV),Address:V(wV),City:V(wV),StateOrProvince:V(wV),PostCode:V(wV),Country:V(wV)}),JFa=X(I8,{Format:yu(wV)}),KFa=X(I8,{Name:V(wV),Title:V(wV),
Abstract:V(wV),KeywordList:V(EFa),CRS:Au(wV),EX_GeographicBoundingBox:V(function(a,b){var c=Hu({},OFa,a,b);if(c){a=c.westBoundLongitude;b=c.southBoundLatitude;var d=c.eastBoundLongitude;c=c.northBoundLatitude;if(void 0!==a&&void 0!==b&&void 0!==d&&void 0!==c)return[a,b,d,c]}}),BoundingBox:Au(function(a){var b=[tV(a.getAttribute("minx")),tV(a.getAttribute("miny")),tV(a.getAttribute("maxx")),tV(a.getAttribute("maxy"))],c=[tV(a.getAttribute("resx")),tV(a.getAttribute("resy"))];return{crs:a.getAttribute("CRS"),
extent:b,res:c}}),Dimension:Au(function(a){return{name:a.getAttribute("name"),units:a.getAttribute("units"),unitSymbol:a.getAttribute("unitSymbol"),"default":a.getAttribute("default"),multipleValues:qV(a.getAttribute("multipleValues")),nearestValue:qV(a.getAttribute("nearestValue")),current:qV(a.getAttribute("current")),values:wV(a)}}),Attribution:V(function(a,b){return Hu({},PFa,a,b)}),AuthorityURL:Au(function(a,b){if(b=G8(a,b))return b.name=a.getAttribute("name"),b}),Identifier:Au(wV),MetadataURL:Au(function(a,
b){if(b=G8(a,b))return b.type=a.getAttribute("type"),b}),DataURL:Au(G8),FeatureListURL:Au(G8),Style:Au(function(a,b){return Hu({},QFa,a,b)}),MinScaleDenominator:V(sV),MaxScaleDenominator:V(sV),Layer:Au(function(a,b){var c=b[b.length-1],d=Hu({},KFa,a,b);if(d)return b=qV(a.getAttribute("queryable")),void 0===b&&(b=c.queryable),d.queryable=void 0!==b?b:!1,b=vV(a.getAttribute("cascaded")),void 0===b&&(b=c.cascaded),d.cascaded=b,b=qV(a.getAttribute("opaque")),void 0===b&&(b=c.opaque),d.opaque=void 0!==
b?b:!1,b=qV(a.getAttribute("noSubsets")),void 0===b&&(b=c.noSubsets),d.noSubsets=void 0!==b?b:!1,(b=tV(a.getAttribute("fixedWidth")))||(b=c.fixedWidth),d.fixedWidth=b,(a=tV(a.getAttribute("fixedHeight")))||(a=c.fixedHeight),d.fixedHeight=a,["Style","CRS","AuthorityURL"].forEach(function(a){a in c&&(d[a]=(d[a]||[]).concat(c[a]))}),"EX_GeographicBoundingBox BoundingBox Dimension Attribution MinScaleDenominator MaxScaleDenominator".split(" ").forEach(function(a){a in d||(d[a]=c[a])}),d})}),PFa=X(I8,
{Title:V(wV),OnlineResource:V(F8),LogoURL:V(DFa)}),OFa=X(I8,{westBoundLongitude:V(sV),eastBoundLongitude:V(sV),southBoundLatitude:V(sV),northBoundLatitude:V(sV)}),IFa=X(I8,{GetCapabilities:V(H8),GetMap:V(H8),GetFeatureInfo:V(H8)}),CFa=X(I8,{Format:Au(wV),DCPType:Au(function(a,b){return Hu({},RFa,a,b)})}),RFa=X(I8,{HTTP:V(function(a,b){return Hu({},SFa,a,b)})}),SFa=X(I8,{Get:V(G8),Post:V(G8)}),QFa=X(I8,{Name:V(wV),Title:V(wV),Abstract:V(wV),LegendURL:Au(DFa),StyleSheetURL:V(G8),StyleURL:V(G8)}),BFa=
X(I8,{Format:V(wV),OnlineResource:V(F8)}),FFa=X(I8,{Keyword:yu(wV)});function TFa(){}function UFa(a,b){if(a){var c=kc(a,["Attribution","Title"])||"";c&&((a=kc(a,["Attribution","OnlineResource"])||"")&&(c='<a href="'+a+'" target="_blank">'+c+"</a>"),c=Ak(c),b.I=c)}};function J8(){}w(J8,TFa);
J8.prototype.g=function(a,b){var c;if(a&&b){b.Ta(a.Title||"");b.fb(a.Abstract||"");UFa(a,b);var d=a.Name;if(d){b.oa=d;d=String(a.opaque).toLowerCase();b.Qk="1"==d||"true"==d;["Extent","Dimension"].forEach(function(d){if(d=a[d])for(c=0;c<d.length;c++)VFa(b,String(d[c].name),String(d[c].values))});b.sa=a.CRS;if((d=a.LatLonBoundingBox)&&0<d.length)for(c=0;c<d.length;c++)if("EPSG:4326"==d[c].crs){WFa(b,rb(d[c].extent));break}if(d=a.Style){var e=[],f=[];e.push(vc(Vga));for(c=0;c<d.length;c++){var h=d[c],
k=String(h.Title),l=String(h.Name),m={label:k?k:l,data:l};e.push(m);Wga.test(k)?(b.Yc(l),m.data=""):(h=kc(h,["LegendURL",0]))&&f.push(h)}e.length&&(b.Eb=e);f.length&&(b.jb=f)}if(d=kc(a,["KeywordList"])){e=[];for(c=d.length;c--;)f=String(d[c]),gb(e,f)||e.push(f);b.vb(e)}}}};function K8(){}w(K8,TFa);
K8.prototype.g=function(a,b){var c;if(a&&b&&(b.Ta(a.Title||""),b.fb(a.Abstract||""),UFa(a,b),c=a.Name)){b.oa=c;c=String(a.opaque).toLowerCase();b.Qk="1"==c||"true"==c;var d=a.Dimension;if(d)for(c=0;c<d.length;c++)VFa(b,String(d[c].name),String(d[c].values));var e=a.BoundingBox;if(e){d=null;for(c=0;c<e.length;c++)if("CRS:84"==e[c].crs){c=rb(e[c].extent);b.Ca=c;break}else"EPSG:4326"==e[c].crs&&(d=e[c]);!b.getBBox()&&d&&(c=rb(d.extent),b.Ca=[c[1],c[0],c[3],c[2]])}b.sa=a.CRS;if(d=a.Style){e=[];var f=
[];e.push(vc(Vga));for(c=0;c<d.length;c++){var h=d[c],k=String(h.Title),l=String(h.Name),m={label:k?k:l,data:l};e.push(m);Wga.test(k)?(b.Yc(l),m.data=""):(h=kc(h,["LegendURL",0]))&&f.push(h)}e.length&&(b.Eb=e);f.length&&(b.jb=f)}if(a=kc(a,["KeywordList"])){d=[];for(c=a.length;c--;)e=String(a[c]),gb(d,e)||d.push(e);b.vb(d)}}};var L8={"1.1.1":new J8,"1.3.0":new K8};function M8(){hF.call(this);this.log=N8;this.u="ogc";this.qf=[];this.gc=null;this.o={};this.g=new ko;this.K=null;this.kn=this.jn="";this.md=null;this.Df=!1;this.jb="";this.yf=[];this.pb="";this.l=null;this.B=this.Eb="";this.P=this.U=!1}w(M8,hF);var N8=E.V("os.ui.ogc.OGCServer");function O8(a){return a.jn||a.jb}function P8(a){return a.kn||a.B}g=M8.prototype;g.Oh=function(){return this.jb||O8(this)};g.si=function(a){this.jb=a};g.bj=function(){return this.B||P8(this)};g.vl=function(a){this.B=a};
g.init=function(){M8.C.init.call(this);this.g.ga("WFS (Features) Only");this.g.Da("WFS (Features) Only");this.o["WFS (Features) Only"]=0};g.Wb=function(a){M8.C.Wb.call(this,a);this.vl(a.wms);this.kn=a.wms;this.Eb=a.wmsTimeFormat;this.pb=a.wmsDateFormat;this.si(a.wfs);this.jn=a.wfs;this.md="wfsParams"in a?new ch(a.wfsParams):null;this.l="wmsParams"in a?new ch(a.wmsParams):null};
g.finish=function(){this.js()&&(this.K&&(this.Tj(this.K),this.K=null,XFa(this,this)),this.g.We()&&this.Qf(this.g),this.G||YFa(this),M8.C.finish.call(this))};
g.load=function(a){M8.C.load.call(this,a);this.Bc(null);this.P=this.U=!1;this.Hc=0;if(a=P8(this)){E.info(N8,this.ba()+" requesting WMS GetCapabilities");ZFa(this,a);var b=this.Ig;if(b&&0<b.length){this.Hc=b.length;for(var c=this.Ma(),d=0;d<b.length;d++){var e=a.replace(c,b[d]);ZFa(this,e,this.Aw,Ga(this.eH,b[d]))}}}else this.U=!0,this.finish();iF(this,!1);this.g.Bc(null);O8(this)?(E.info(N8,this.ba()+" requesting WFS GetCapabilities"),a=new Xg(O8(this)),b=this.md?this.md.clone():new ch,fh(b,!0),lh(b,
"service")||b.set("service","WFS"),b.set("request","GetCapabilities"),ah(a,b),b=new Ni(a),Si(b,"*/*"),b.H("success",this.uv,!1,this),b.H("error",this.Zm,!1,this),b.K=BH,E.ta(N8,"Loading WFS GetCapabilities from URL: "+a.toString()),this.Wa(!0),b.load()):(this.P=!0,this.finish())};g.js=function(){return M8.C.js.call(this)&&this.U&&this.P&&0>=this.Hc};g.Aw=function(a){z(a.target);this.Hc--;this.finish()};
g.eH=function(a,b){this.Ig&&(mb(this.Ig,a),0==this.Ig.length&&(this.Ig=null));a='Alternate URL "'+a+'" for '+this.ba()+" failed loading WMS GetCapabilities and has been removed.";rj(qj.s(),a,Qh,this.log);this.Aw(b)};
function ZFa(a,b,c,d){b=new Xg(b);var e=a.l?a.l.clone():new ch;fh(e,!0);lh(e,"service")||e.set("service","WMS");e.set("request","GetCapabilities");var f="1.3.0";lh(e,"version")&&(f=e.get("version"));e.set("version",f);ah(b,e);c=c||a.wv;d=d||a.Zm;e=new Ni(b);Si(e,"*/*");e.H("success",c,!1,a);e.H("error",d,!1,a);e.K=BH;E.ta(N8,"Loading WMS GetCapabilities from URL: "+b.toString());a.Wa(!0);e.load()}
g.wv=function(a){E.info(N8,this.ba()+" WMS GetCapabilities request completed. Parsing data...");a=a.target;a.M("success",this.wv);a.M("error",this.Zm);a:{var b=a.g,c='<a target="_blank" href="'+a.j.toString()+'">WMS Capabilities</a>';if(b){var d=void 0;a=void 0;try{b=b.replace(/<(\/)?SRS>/g,"<$1CRS>"),b=b.replace(/<LatLonBoundingBox/g,'<BoundingBox CRS="CRS:84"'),d=Wx(b),a=wFa(d)}catch(l){Q8(this,"The response XML for "+c+" is invalid!");break a}if(a){b=a.version;if(!this.ba())try{this.Da(a.Service.Title)}catch(l){}this.gc=
b in L8?L8[b]:L8["1.1.1"];c=d=null;var e=kc(a,"Capability","Request","GetMap","DCPType",0,"HTTP","Get","OnlineResource");if(e){var f=e.indexOf("?");-1<f?(d=e.substring(0,f),f<d.length-1&&(c=new ch(d.substring(f+1)))):d=e}null!=d&&(this.B=d||this.B);if((d=a)&&!this.G&&!M.get(["devSanity"],!1)&&(d=kc(d,"Service","AccessConstraints")))for(d=Qb(d,"&")?("document"in ra)?uaa(d):waa(d):d,d=Wx(d).querySelectorAll("ConsentStatement"),e=0,f=d.length;e<f;e++){var h=d[e].textContent;rj(qj.s(),h,Th)}(d=kc(a,"Service",
"Abstract"))&&"string"===typeof d&&this.qf.push(d);if(d=kc(a,"Capability","Layer")){if(!q(d)&&"Layer"in d){var k=kc(a,"Capability","Layer","CRS")||kc(a,"Capability","Layer","SRS");d=d.Layer}this.K=[];a=0;for(e=d.length;a<e;a++)(f=$Fa(this,d[a],b,k))&&this.K.push(f)}null!=c&&(this.l||(this.l=new ch),this.l.extend(c))}this.U=!0;this.finish()}else Q8(this,c+" response is empty!")}};
g.uv=function(a){E.info(N8,this.ba()+" WFS GetCapabilities request completed. Parsing data...");var b=a.target;b.M("success",this.uv);b.M("error",this.Zm);a:if(a=b.g,b='<a target="_blank" href="'+b.j.toString()+'">WFS Capabilities</a>',a){var c=null;try{c=Wx(a)}catch(y){Q8(this,"The response XML for "+b+" is invalid!");break a}if(!this.ba())try{var d=c.querySelector("Title");this.Da(d.textContent||d.value||d.nodeValue)}catch(y){}if(b=c.querySelector("Operation[name=GetFeature]")){d=b.querySelector("Post");
null!=d?(d=d.attributes[0],this.si(d.value||d.nodeValue),this.Df=!0):(d=b.querySelector("Get"),null!=d&&(d=d.attributes[0],this.si(d.value||d.nodeValue)));var e=["OUTPUTFORMAT","OutputFormat","outputFormat","outputformat"],f=[];d=0;for(a=e.length;d<a&&!f.length;d++)f=b.querySelectorAll("Parameter[name="+e[d]+"]  Value");b=[];d=0;for(a=f.length;d<a;d++)b.push(f[d].textContent);this.yf=b}d=c.querySelectorAll("ServiceIdentification");0<d.length&&(d=d[0].querySelectorAll("Abstract"),0<d.length&&this.qf.push(d[0].textContent));
b=this.D()+"#";c=c.querySelectorAll("FeatureType");f=Y;d=0;for(a=c.length;d<a;d++){var h=c[d],k=h.querySelectorAll("Name")[0],l=h.querySelectorAll("Title")[0].textContent;e=null;var m=k.textContent,n="",p=m;Qb(m,":")&&(p=m.split(":"),n=p[0],p=p[1]);n&&(n="xmlns:"+n,(k=k.getAttribute(n))&&(e=n+'="'+k+'"'));(k=f.Ka(b+m))||(k=f.Ka(b+p));k||(k=aGa(this,l));k||(k=oF(Y,"ogc"),k.ga(b+m),k.u=!0,k.Yc("rgba(255,255,255,1)"),k.Ta(l),k.Ec(this.ba()));k.Ia=this.u;if(l=h.querySelectorAll("Keyword")){n=k.getTags()||
[];for(var r=0,u=l.length;r<u;r++){var v=l[r].textContent;-1==n.indexOf(v)&&n.push(v)}k.vb(n)}tW(p)&&(k.ib=!0);(h=h.querySelector("Abstract"))&&!k.qb()&&k.fb(h.textContent);k.u=!0;k.si(this.Oh());k.kj=this.Df;k.O=m;k.Hc=e;k.zf=this.yf;k.A||(h=new XM,YM(h,k),this.g.R(h));e=k;e.Ze=this;pF(Y,e)}this.P=!0;this.finish()}else Q8(this,b+" response is empty!")};
function aGa(a,b){if(a=Qw(Y,a.D()+"#"))for(var c=0,d=a.length;c<d;c++){var e=a[c];if("ogc"===e.ag()&&e.S()==b&&(e.A||e.u))return a[c]}return null}g.Zm=function(a){var b=a.target;a=b.u;var c=b.j;z(b);b=c.toString();c=c.g.get("service");c='Request failed for <a target="_blank" href="'+b+'">'+c+" Capabilities</a>: ";a&&(c+=a.join(" "));Q8(this,c)};function Q8(a,b){a.getError()||(b="Server ["+a.ba()+"]: "+b,a.G||rj(qj.s(),b,Qh),E.error(N8,b),jF(a,b),a.Wa(!1))}
function $Fa(a,b,c,d,e){var f=null;if(a.gc){var h=null,k=b.Name;k&&(k=a.D()+"#"+k,h=Y.Ka(k));h||(k=b.Title)&&(h=aGa(a,k));if(h){var l=a.g.na();if(l){k=0;for(var m=l.length;k<m;k++)if(l[k].D()==h.D()){a.g.removeChild(l[k]);break}}}k=h||oF(Y,"ogc");k.Ia=a.u;a.gc.g(b,k);e=k.I||e;k.I=e||null;d=(k.sa||[]).concat(d);ub(d);k.sa=d;h=!1;k.rk()||(f=new XM,(m=k.oa)&&"IWMSLayer"!=m?(k.A=!0,k.gc=a.l,k.lj=c,k.vl(a.bj()),k.Cf=a.pb,k.Df=a.Eb,k.Ec(a.ba()),k.ga(a.D()+"#"+k.oa),k.Ze=a,pF(Y,k),YM(f,k)):h=!0);if("Layer"in
b)for(h=!0,f=new ko,f.ga(k.S()||""),f.Da(k.S()),po(f,k.qb()||""),b=b.Layer,q(b)||(b=[b]),k=0,m=b.length;k<m;k++)(l=$Fa(a,b[k],c,d,e))&&f.R(l);if(h&&(l=f.na(),!l||0===l.length))return null}return f}g.Qf=function(a){var b=a.D();if(b&&b in this.o&&this.We()){b=this.o[b];for(var c=this.na(),d=0,e=c.length;d<e;d++){var f=c[d].D();if(!(f&&f in this.o)||this.o[f]<b){var h=d;break}}}this.R(a,!1,h)};
function XFa(a,b,c){var d=b.na();if(d&&0<d.length){if(b.getParent()){var e=b.ba();e&&(c?c.push(e):c=[e]);e=0;for(var f=d.length;e<f;e++)XFa(a,d[e],c);c&&c.pop()}}else if(null!=c&&b instanceof XM&&(a=b.Ka()))try{a.getTags()||a.vb([]);var h=a.getTags();e=0;for(f=c.length;e<f;e++){var k=c[e];gb(h,k)||h.push(k)}}catch(l){}}
function YFa(a,b){b=b||a;if(b instanceof XM){var c=b.Ka();if(c)try{c.Mg=NaN,c.yh(),c.dispatchEvent(new K("title"))}catch(d){}}if((b=b.na())&&0<b.length)for(c=b.length;c--;)YFa(a,b[c])};function R8(){M8.call(this);this.log=bGa;this.u="geoserver"}w(R8,M8);var bGa=E.V("plugin.ogc.GeoServer");R8.prototype.Wb=function(a){this.init();this.Da(a.label);this.Za(a.enabled);this.Pe=a.editable;var b=a.url;this.vl(b);this.kn=b;this.si(b);this.jn=b;this.Eb=a.wmsTimeFormat||"{start}/{end}";this.pb=a.wmsDateFormat||"YYYY-MM-DDTHH:mm:ss[Z]"};var cGa=/\/(geoserver|.*?gs)(\/|(\/.*)?\/(ows|web)\/?)?([?#]|$)/i;function S8(a,b,c){this.u=this.g=null;this.A=!1;this.l=this.o=this.j=null;a&&(b=null!=b?b:[],b.sort(dGa),this.init(a,b,void 0!==c?c:!1))}function dGa(a,b){return Lb(a.name,b.name)}jg["os.ogc.wfs.FeatureType"]=S8;var eGa=["up","start","begin"],fGa=["down","stop","end"],T8={},gGa="gml:Point gml:LineString gml:Polygon gml:MultiPoint gml:MultiLineString gml:MultiPolygon gml:GeometryCollection gml:Geometry gml:Surface gml:MultiSurface gml:PointPropertyType gml:LineStringPropertyType gml:PolygonPropertyType gml:MultiPointPropertyType gml:MultiLineStringPropertyType gml:MultiPolygonPropertyType gml:GeometryCollectionPropertyType gml:GeometryPropertyType gml:SurfacePropertyType gml:MultiSurfacePropertyType".split(" ");
g=S8.prototype;g.ym=function(){return ab(this.g,hGa)};g.zp=function(){return this.u};g.DA=function(a){this.u=a};g.Be=function(){return this.j||!this.A?this.j:"validTime"};g.fo=function(a){this.j=a};g.bg=function(){return this.j&&this.o?this.o:this.Be()};g.Yn=function(a){this.o=a};g.getColumns=function(){return this.g};g.setColumns=function(a){this.g=a};
g.init=function(a,b,c){this.l=a;this.g=b;this.A=c;for(var d=a=null,e=null,f=b.length;f--;){var h=b[f],k=h.name,l=h.type,m=k.toLowerCase();h=l.toLowerCase();if(!this.u&&-1<gGa.indexOf(l))this.u=k;else{if(l=!a&&U8(h))a:if(l=m,this.l&&this.l in T8)l=T8[this.l][0].toLowerCase()==l;else{for(var n=eGa.length;n--;)if(Qb(l,eGa[n])){l=!0;break a}l=!1}if(l)a=k;else{if(l=!d&&U8(h))a:if(this.l&&this.l in T8)l=T8[this.l][1].toLowerCase()==m;else{for(l=fGa.length;l--;)if(Qb(m,fGa[l])){l=!0;break a}l=!1}l?d=k:gb(iGa,
k)&&this.g.splice(f,1)}}c||!U8(h)||e||(e=k)}a&&d&&(this.j=a,this.o=d);!this.j&&e&&(this.j=e)};g.ra=function(a){a=a||{};a.featureTypeUser={startDateColumnName:this.Be(),endDateColumnName:this.bg()};return a};g.restore=function(a){a.featureTypeUser&&(jGa(this,a.featureTypeUser.startDateColumnName)&&this.fo(a.featureTypeUser.startDateColumnName),jGa(this,a.featureTypeUser.endDateColumnName)&&this.Yn(a.featureTypeUser.endDateColumnName))};
function jGa(a,b){if(b&&a.g&&0<a.g.length)for(var c=0;c<a.g.length;c+=1)if(a.g[c]&&a.g[c].name===b)return!0;return!1}function U8(a){return Qb(a,"datetime")}function hGa(a){return U8(a.type.toLowerCase())}var iGa=["ID","DATE_TIME"];function kGa(){this.g=null}
kGa.prototype.parse=function(a){var b=[];a=Wx(a);a:{for(a=kr(a);null!==a;a=a.nextSibling)if(1==a.nodeType){var c=a;break a}c=null}if(c){if(!this.g){this.g=[];a=[];var d=[];for(c=kr(c);null!==c;c=c.nextSibling)1==c.nodeType&&("element"==c.localName?a.push(c):"complexType"==c.localName&&d.push(c));var e=0;for(c=a.length;e<c;e++){var f=a[e],h=null;if(f.getAttribute("name")){var k=f.getAttribute("type");if(k){var l=k.indexOf(":");-1!=l&&(k=k.substr(l+1));l=0;for(var m=d.length;l<m;l++){var n=d[l];if(k==
n.getAttribute("name")){h=n;break}}}}f&&h&&this.g.push({element:f,pD:h})}}a=0;for(d=this.g.length;a<d;a++){e=this.g[a];c=null;h=e.pD;e=e.element.getAttribute("name");f=!1;(k=h.querySelector("extension"))&&"gml:DynamicFeatureType"==k.getAttribute("base")&&(f=!0);h=h.querySelectorAll("element");k=[];l=0;for(m=h.length;l<m;l++){var p=h[l];n=p.getAttribute("name");var r=p.getAttribute("type");r||(p=p.querySelector("simpleType"))&&(p=p.querySelector("restriction"))&&(r=p.getAttribute("base"));if(n&&r){p=
r.indexOf(":");-1<p&&-1===r.indexOf("gml:")&&(r=r.substring(p+1));p=lGa;for(var u in p)p[u].test(r)&&(r=u);k.push({name:n,type:r})}}e&&(c=new S8(e,k,f));c&&b.push(c)}}return b};var lGa={decimal:/^double$/i,integer:/^(int|long)$/i,string:/^bool(ean)?$/i};function V8(){C.call(this);this.o=null;this.j=new ch;this.ab=this.g=this.l=null}w(V8,C);var W8=E.V("os.ogc.wfs.DescribeFeatureLoader");g=V8.prototype;g.Ma=function(){return this.ab};g.Mb=function(a){var b=a.indexOf("?");-1<b?(this.ab=a.substring(0,b),this.g||(a=new ch(a.substring(b+1),!1),fh(a,!0),lh(a,"typename")&&(this.g=a.get("typename")))):this.ab=a};g.ze=function(){return this.o};
g.load=function(){if(this.g&&this.ab){lh(this.j,"SERVICE")||this.j.set("SERVICE","WFS");lh(this.j,"VERSION")||this.j.set("VERSION","1.1.0");lh(this.j,"TYPENAME")||this.j.set("TYPENAME",this.g);this.j.set("REQUEST","DescribeFeatureType");var a=new Xg(this.ab);ah(a,this.j);this.l=new Ni(a);this.l.H("success",this.eL,!1,this);this.l.H("error",this.SH,!1,this);this.l.K=BH;E.info(W8,'Loading DescribeFeatureType for "'+this.g+'" on '+this.ab);this.l.load()}else this.dispatchEvent(new A("complete")),E.error(W8,
"DescribeFeatureType missing url and/or typename!")};g.eL=function(a){a=a.target;a.removeAllListeners();(a=(new kGa).parse(a.g))&&0<a.length?this.o=a[0]:E.error(W8,'Unable to parse DescribeFeatureType for "'+this.g+'" on '+this.ab+"!");this.dispatchEvent(new A("complete"))};g.SH=function(a){a.target.removeAllListeners();E.error(W8,'Failed to load DescribeFeatureType for "'+this.g+'" on '+this.ab+"!");this.dispatchEvent(new A("complete"))};function X8(){return{restrict:"E",scope:!0,template:X8.j,controller:Y8,controllerAs:"nodeUi"}}X8.j='<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.filtersEnabled" ng-click="nodeUi.filter()"><i class="fa fa-filter fa-fw c-glyph" title="Manage filters"ng-class="{\'text-success\': nodeUi.filtered, \'c-glyph__off\': !nodeUi.filtered}"></i></span></span>';Q.directive("filterabledescriptornodeui",[X8]);
function Y8(a,b){FE.call(this,a,b);this.l=a.item;lE.H("propertychange",this.g,!1,this);this.g()}w(Y8,FE);Y8.$inject=["$scope","$element"];Y8.prototype.destroy=function(){Y8.C.destroy.call(this);lE.M("propertychange",this.g,!1,this)};Y8.prototype.g=function(){var a=this.l.Ka();try{this.filtersEnabled=a.Zg()}catch(b){this.filtersEnabled=!1;return}a=a.Lh();this.filtered=cb(a,function(a){return zE(OC,a)})};Y8.prototype.filter=function(){var a=this.l.Ka();a&&a.hj()};Y8.prototype.filter=Y8.prototype.filter;function Z8(){LE.call(this);this.jb=this.l=this.P=this.K=this.Ca=this.I=null;this.Qk=!1;this.Eb=null;this.u=this.kj=!1;this.zf=this.Vb=this.Hc=this.O=null;this.A=!1;this.sa=this.lj=this.jg=this.Df=this.gc=this.Cf=this.oa=null;this.ib=!1;this.Hk=mGa;this.o="ogc"}w(Z8,LE);jg["plugin.ogc.OGCLayerDescriptor"]=Z8;F(Z8,"os.data.IAreaTest");F(Z8,"os.filter.IFilterable");F(Z8,"os.ui.ogc.IFeatureTypeDescriptor");F(Z8,"os.ui.ogc.IOGCDescriptor");var mGa=/#features/;g=Z8.prototype;g.uk=function(){return"Layer"};
g.T=function(){return this.A&&this.u?"Tile and Feature Groups":this.A?"Tile Layers":this.u?"Feature Layers":null};
g.gd=function(){var a=[];this.A&&a.push('<image xlink:href="v1541734487/images/tiles-base.png" x="0" y="0" width="16px" height="16px"><title>Tile layer</title></image>');this.u&&a.push('<image xlink:href="v1541734487/images/features-base.png" x="0" y="0" width="16px" height="16px"><title>Feature layer</title></image>');$8(this)&&a.push('<image class="time-icon" xlink:href="v1541734487/images/time-base.png" x="0" y="0" width="16px" height="16px"><title>This layer supports animation over time</title></image>');var b=
"",c=this.Ja()?ff(this.Ja()):[255,255,255,1];this.ib&&(b+='<i class="fa fa-exclamation-circle text-danger" title="This layer is soon to be deleted"></i>');return b+=Nz(Vb(),a,[],c)};g.wp=function(){var a="";this.A&&(a="Tiles");this.u&&(a+=this.A?" and Features":"Features");return a};g.Lh=function(){var a=[this.D()];this.A&&a.push(this.D()+"#tiles");this.u&&a.push(this.D()+"#features");return a};g.rk=function(){return this.Qk};g.getBBox=function(){return this.Ca};function WFa(a,b){a.Ca=b}g.ze=function(){return this.l};
g.Zg=function(){return this.u};g.Oh=function(){return this.Vb};g.si=function(a){this.Vb=a};g.bj=function(){return this.jg};g.vl=function(a){this.jg=a};function ZY(a){return a.Vb+"!!"+a.O}function VFa(a,b,c){null==a.P&&(a.P={});a.P[b]=c;"time"==b&&(c=c.split("/"),1<c.length?(b=(new Date(c[0])).getTime(),c=(new Date(c[1])).getTime(),a.aa=Math.min(c,b),a.U=Math.max(c,b)):(a.aa=NaN,a.U=NaN))}
g.xg=function(){if(this.isActive())this.K=this.xg.bind(this),this.zk()&&(Z8.C.xg.call(this),this.ib&&uW(this.S()),iM(this));else return Z8.C.xg.call(this);return!1};g.zk=function(){if(this.u&&!this.l){var a=new V8;a.Mb(this.Oh());a.g=this.O;a.Ua("complete",this.LM,!1,this);a.load();return!1}return!0};g.Vc=function(){return!1};function $8(a){return a.A?null!=a.P&&"time"in a.P:null!=a.l?null!==a.l.Be()||null!==a.l.bg():!1}
g.Va=function(){var a=[];this.A&&a.push(nGa(this));this.u&&a.push(oGa(this));return a};
function nGa(a){var b={};b.id=a.D()+"#tiles";var c=new ch;c.set("LAYERS",a.oa);c.set("VERSION",a.lj||"1.3.0");null!=a.gc&&c.extend(a.gc);b.baseColor=a.Ja();b.colorControl="colorControl:pickerReset";b.animate=$8(a);b.dateFormat=a.Cf;b.extent=a.getBBox();b.layerType=a.T();b.legends=a.jb;b.params=c;b.provider=a.rb();b.styles=a.Eb;b.tags=a.getTags();b.timeFormat=a.Df;b.title=a.S();b.type="WMS";b.projections=a.sa;(c=a.I)&&(b.attributions=[c]);c=a.bj();var d=[c];if(a.Ze){var e=a.Ze.Ma(),f=a.Ze.Ig;if(e&&
f)for(var h=0;h<f.length;h++)d.push(c.replace(e,f[h]))}b.urls=d;b.provider&&(b.visible=M.get(["providers",a.rb().toLowerCase(),"visible"],!0));return b}
function oGa(a){var b={};b.id=a.D()+"#features";var c=Xga();c.set("typename",a.O);a.Hc&&c.set("namespace",a.Hc);b.baseColor=a.Ja();b.color=a.Ja();b.colorControl="colorControl:pickerReset";b.animate=$8(a);b.exclusions=!0;b.featureType=a.l;b.filter=!0;b.layerType=a.T();b.load=!0;b.params=c;b.provider=a.rb();b.spatial=!0;b.tags=a.getTags();b.temporal=$8(a);b.title=a.S();b.type="WFS";if((c=a.Oh())&&a.Ze instanceof hF){var d=a.Ze.Ma();var e=a.Ze;var f=[e.url];e.Ig&&(f=f.concat(e.Ig));e.Ia>=f.length&&(e.Ia=
0);e=f[e.Ia++]||"";d&&e&&(c=c.replace(d,e))}b.url=c;b.usePost=a.kj;b.formats=a.zf;b.provider&&(b.visible=M.get(["providers",a.rb().toLowerCase(),"visible"],!0));return b}
g.LM=function(a){(a=a.target.ze())?(this.l=a,this.cb&&(this.l.restore(this.cb),this.cb=null,delete this.cb)):(Jja(this.Ne)?this.u=!1:this.setActive(!1),a=Jja(this.Ne)?"Failed loading DescribeFeatureType for "+this.O+". Feature requests have been disabled for this layer.":"Network is disconnected. "+this.O+" is unavailable.",rj(qj.s(),a,Qh));this.K&&(this.K(),this.K=null)};g.hj=function(){this.K=this.hj;if(this.zk()){var a=this.D()+"#features";GY(a,this.S()+" Features")}};g.uf=function(){return ZY(this)};
g.Se=function(){return this.l?this.l.getColumns():null};g.Ld=function(){return Z8.C.Ld.call(this)+"<filterabledescriptornodeui></filterabledescriptornodeui>"};g.ra=function(a){a=Z8.C.ra.call(this,a);this.l&&(a=this.l.ra(a));return a};g.restore=function(a){Z8.C.restore.call(this,a);this.l?this.l.restore(a):this.cb=a};g.pm=function(){return this.Lh().filter(function(a){return this.Hk.test(a)},this)};var pGa=SS(/^W((MT_)?M|F)S_Capabilities$/i,null),qGa=SS(/ExceptionReport$/,/\/(ows|ogc)(\/|$)/);function rGa(a){if(a)for(var b=0,c=a.length;b<c;b++)if(a[b])return a[b]}lw("ogc",function(a,b,c){return Vc([pGa(a,b,c),qGa(a,b,c)]).then(rGa)},0,"text/xml");function sGa(a,b){return Sc(b&&cGa.test(b.Ma()))}lw("geoserver",sGa,0,"ogc");lw("geoserver",sGa,0,"text/html");Q.directive("geoserver",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/forms/singleurl.html",controller:a9,controllerAs:"ctrl"}}]);function a9(a,b){e0.call(this,a,b);b=a.config.file;a.config.url=b?b.Ma().replace(/(\/geoserver|\/.*?gs)(\/.*)(web|ows)[#?\/].*$/,"/geoserver$1ows"):this.Ma();a.config.type="geoserver";a.urlExample="http://www.example.com/geoserver/ows"}w(a9,e0);a9.$inject=["$scope","$element"];a9.prototype.ik=function(){var a=new R8;a.Wb(this.scope.config);return a};
a9.prototype.Ma=function(){return this.g?P8(this.g):""};Q.directive("ogcserver",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/plugin/ogc/ui/ogcserverimport.html",controller:b9,controllerAs:"ctrl"}}]);
function b9(a,b){d0.call(this,a,b);a.config.type="ogc";if(b=a.config.file){var c=b.Pb(),d=b.Ma();if(c){var e=c.match(/title>([^<]*)<\//i);e&&1<e.length&&(a.config.label=e[1]);if(-1!=c.search(/wms/gi)||-1!=d.search(/wms/gi))a.config.wms=b.Ma();else if(-1!=c.search(/wfs/gi)||-1!=d.search(/wfs/gi))a.config.wfs=b.Ma()}}else this.g&&(a.config.label=this.g.ba(),a.config.wms=this.g.bj(),a.config.wfs=this.g.Oh());this.element.find('input[name="title"]').focus()}w(b9,d0);b9.$inject=["$scope","$element"];
g=b9.prototype;g.ik=function(){var a=this.g||new M8;a.Wb(this.scope.config);return a};g.bj=function(){return this.g?P8(this.g):""};g.Oh=function(){return this.g?O8(this.g):""};g.Ky=function(){var a={},b=["label","enabled","type","wms","wfs"],c=this.scope.config,d;for(d in c)-1<b.indexOf(d)&&(a[d]=c[d]);return a};g.Ou=function(){return this.bj()!==this.scope.config.wms||this.Oh()!==this.scope.config.wfs};
g.Hj=function(){this.g.Da(this.scope.config.label);this.g.vl(this.scope.config.wms);this.g.si(this.scope.config.wfs);this.g.kn=this.scope.config.wms;this.g.jn=this.scope.config.wfs;b9.C.Hj.call(this)};function c9(a){var b="<Or>",c=[],d=0,e;for(e in a)c.push(e),d=a[e].length;for(e=0;e<d;e++){for(var f="<And>",h=0;h<c.length;h++)f=Ub(f,("<PropertyIsEqualTo><PropertyName>"+c[h]+"</PropertyName><Literal>{{"+c[h]+"}}</Literal></PropertyIsEqualTo>").replace("{{"+c[h]+"}}",a[c[h]][e]));f+="</And>";0>b.indexOf(f)&&(b+=f)}h0.call(this,"relateLayer","filter","{identifiers}",b+"</Or>")}w(c9,h0);function d9(){}d9.prototype.format=function(a){return a.sb()||""};d9.prototype.wrap=function(a,b){b=b?"And":"Or";return"<"+b+">"+a+"</"+b+">"};d9.prototype.wrapAll=function(a){return a?"<And>"+a+"</And>":""};function e9(a){this.g=a||"GEOM"}e9.prototype.format=function(a){var b="",c=this.Z(a);if(c){var d=c.T();b=eD(a.get("title")||"New Area");a=eD(a.get("description"));switch(d){case "Circle":c=new qp([Up(Xo(c),Yo(c))]);b=nW(c,this.g,b,a)||"";break;case "MultiLineString":case "Polygon":d=c.getCoordinates();b=1==d.length&&$p(d[0],c.Y())?qta(c.Y(),this.g,b,a):nW(c,this.g,b,a)||"";break;case "LineString":case "MultiPolygon":b=nW(c,this.g,b,a)||"";break;default:b=qta(c.Y(),this.g,b,a)}}return b};
e9.prototype.Z=function(a){return a?a.Z():null};e9.prototype.ti=function(){return!0};e9.prototype.j=function(a){return a?"<Or>"+a+"</Or>":""};function f9(a){e9.call(this,a)}w(f9,e9);f9.prototype.j=function(a){return"<And>"+a+"</And>"};f9.prototype.format=function(a){a=f9.C.format.call(this,a);return a=a.replace(/(BBOX|Intersects)/g,"Disjoint")};function g9(a){e9.call(this,a)}w(g9,f9);g9.prototype.Z=function(a){(a=a.get("_originalGeometry")||a.Z())&&(a=a.clone().toLonLat());return a};function h9(a){e9.call(this,a)}w(h9,e9);h9.prototype.Z=function(a){if(a=a.get("_originalGeometry")||a.Z())a=a.clone().toLonLat(),kq(a);return a};function tGa(a){p0.call(this);this.modifier=new h0("filter","filter","{customFilter}","");this.o=new h9(a);this.u=new g9(a);this.j=new d9;this.g=!0}w(tGa,p0);function uGa(){this.g=this.l="validTime";this.j=!1}
uGa.prototype.format=function(a){var b=Sg(fK(a));1>b.length&&(a.o.isEmpty()?b=[hJ(a.j)]:(b=(new Date).getTime()+864E5,b=[$J(b,b+1E3)]));a="<Or>";for(var c=0;c<b.length;c++){var d="<And>";d+="<PropertyIsGreaterThanOrEqualTo><PropertyName>{endColumn}</PropertyName><Literal>{start}</Literal></PropertyIsGreaterThanOrEqualTo><PropertyIsLessThan><PropertyName>{startColumn}</PropertyName><Literal>{end}</Literal></PropertyIsLessThan>";var e=b[c],f=ZF(new Date(e.start),void 0,!1,!0),h=ZF(new Date(e.end),void 0,
!1,!0);this.j&&(h=1E3*Math.floor(e.start/1E3),f=ZF(new Date(h),void 0,!1,!0),e=1E3*Math.ceil(e.end/1E3),e=e<=h?h+1E3:e,h=ZF(new Date(e),void 0,!1,!0));d=d.replace(/{startColumn}/g,this.l);d=d.replace(/{endColumn}/g,this.g);d=d.replace(/{start}/g,f);d=d.replace(/{end}/g,h);d+="</And>";a+=d}return a+"</Or>"};function i9(){Hi.call(this,"FilterCleanerModifier",-100)}w(i9,Hi);i9.prototype.j=function(a){a=a.g;var b=a.get("filter");b&&a.set("filter",vGa(b))};function vGa(a){if(!a)return a;try{var b=Wx(a);if(b)return wGa(kr(b)),lG(b)}catch(c){}return a}function wGa(a){for(var b=kr(a),c;b;)c=b.nextSibling,wGa(b),b=c;b=a.localName;if("And"==b||"Or"==b||"Not"==b)kr(a)?"Not"!=b&&(!a.childNodes||2>a.childNodes.length)&&(b=a.parentNode,b.removeChild(a),b.appendChild(kr(a))):a.parentNode.removeChild(a)};function j9(){}var xGa="filter maxfeatures namespace outputformat request resulttype service sortby srsname typename version".split(" ");j9.prototype.rn=function(){return"text/xml"};
j9.prototype.format=function(a){var b=a.g,c=b.Xb(),d={};xGa.forEach(function(a){for(var e=0;e<c.length;e++)if(c[e].toLowerCase()===a){d[a]=b.get(c[e]);b.remove(c[e]);c.splice(e,1);break}});a=d.maxfeatures;a='maxFeatures="'+Math.min(void 0!=a?a:CH()+1,3E5)+'"';var e=d.version||"1.1.0",f=d.namespace||"",h=d.resulttype||"results";"hits"==h&&(a="");a='<?xml version="1.0" encoding="UTF-8" standalone="yes"?><wfs:GetFeature xmlns:wfs="http://www.opengis.net/wfs" xmlns:ogc="http://www.opengis.net/ogc" '+
f+' service="WFS" version="'+e+'" resultType="'+h+'" '+a;(e=d.outputformat)&&(a+=' outputFormat="'+e+'"');a=a+">"+('<wfs:Query srsName="'+(d.srsname||"EPSG:4326")+'" typeName="'+d.typename+'">');(e=d.sortby)&&(a+="<ogc:SortBy>"+e+"</ogc:SortBy>");(e=d.filter)&&(a+=e);return a+"</wfs:Query></wfs:GetFeature>"};Q.directive("chooseTimeColumn",[function(){return{restrict:"AE",replace:!0,scope:{id:"=",deferred:"="},templateUrl:"v1541734487/views/plugin/ogc/ui/choosetimecolumn.html",controller:k9,controllerAs:"chooseTime"}}]);function k9(a,b){x.call(this);this.v=a;this.L=b;this.j=Y.Ka(this.v.id);this.g=null;this.j?(this.g=this.j.ze(),this.v.title=this.j.S(),this.start=this.g.Be(),this.end=this.g.bg(),this.timeColumns=this.j.ze().ym(),a.$emit("window.ready")):kx(this.L)}w(k9,x);k9.$inject=["$scope","$element"];
k9.prototype.J=function(){k9.C.J.call(this);this.v=null};k9.prototype.save=function(){this.g.fo(this.start);this.g.Yn(this.end);this.v.deferred&&this.v.deferred.callback();kx(this.L);this.dispose()};k9.prototype.save=k9.prototype.save;
function yGa(a,b){ix("chooseTimeColumn")?hx("chooseTimeColumn"):fx({id:"chooseTimeColumn",label:"Choose Time Columns",icon:"fa fa-clock-o",x:"center",y:"center",width:"425","min-width":"400","max-width":"800",height:"auto","min-height":"200","max-height":"900",modal:"true"},'<choose-time-column id="id" deferred="deferred"></choose-time-column>',void 0,void 0,void 0,{id:a,deferred:b})};Q.directive("ogclayernodeui",[function(){var a=GE();a.template=a.template.replace(">",'><span ng-if="chooseTime" ng-click="nodeUi.chooseTime()"><i class="fa fa-clock-o fa-fw c-glyph" title="Choose Time Columns"></i></span>');a.controller=l9;return a}]);function l9(a,b){HE.call(this,a,b);this.g=Y.Ka(KE(this));b=!1;if(F(this.g,"os.ui.ogc.IFeatureTypeDescriptor")){var c=this.g.ze();c&&(b=(null!==c.Be()||null!==c.bg())&&2<=c.ym().length&&"validTime"!=c.Be())}a.chooseTime=b}w(l9,HE);
l9.$inject=["$scope","$element"];l9.prototype.hD=function(){var a=new nh;th(a,function(){this.g.setActive(!1);this.g.setActive(!0)},this);yGa(KE(this),a)};l9.prototype.chooseTime=l9.prototype.hD;function m9(){g0.call(this);this.j=!0;this.g=this.featureType=null}w(m9,g0);g=m9.prototype;g.ac=function(a){m9.C.ac.call(this,a);void 0!==a.describeType&&(this.j=a.describeType);void 0!==a.featureType&&(this.featureType=a.featureType);this.params&&(this.params.get("typename")&&(this.g=this.params.get("typename")),zGa(this,a))};
g.Me=function(a){this.ac(a);var b=this.N(a);b.ga(this.id);OK(b,this.vd(a));b.pi(this.Dd(a));EK(b,void 0!==this.animate?this.animate:!1);b.Ta(this.title);var c=this.W(b,a);a&&c.restore(a);this.j?this.featureType?AGa(this,c,a):this.url&&this.g&&(b=new V8,b.Mb(this.url),b.g=this.g,b.Ua("complete",this.MM.bind(this,c,a)),b.load()):a.load&&(b=c.N(),b.refresh());return c};
g.MM=function(a,b,c){(c=c.target.ze())?(this.featureType=c,AGa(this,a,b)):(a="Failed loading DescribeFeatureType for "+this.g+". Feature layer will not be loaded.",rj(qj.s(),a,Qh))};g.vd=function(a){a=m9.C.vd.call(this,a);var b=this.params.get("outputformat"),c=/json/i;b&&c.test(b)&&Si(a,"application/json, text/plain, */*");a.K=BH;a.U=new j9;return a};
function AGa(a,b,c){function d(){if(f&&!f.Xa()){var a=c.featureType=this.featureType;a&&Exa(b,c,a);this.Ll(b,c);(a=f.l)&&Pi(a,new i9)}}function e(){f&&!f.Xa()&&c.load&&f.refresh()}var f=b.N();if(a.featureType){var h=new nh;th(h,d,a);th(h,e);!(c.temporal&&2<=a.featureType.ym().length)||a.featureType.Be()&&a.featureType.bg()?h.callback():yGa(a.id,h)}else e()}
g.Ll=function(a,b){b=null!=b.animate?b.animate:!1;a=a.N().Mr();var c=[],d=this.featureType.Be(),e=this.featureType.bg();b&&d&&(d!=e?(b=new FT("start"),b.ja=d,b.format="ISO",c.push(b),b=new FT("end"),b.ja=e):(b=new FT("instant"),"validTime"==d&&-1<this.url.indexOf("/ogc/wfsServer")&&(d="DATE_TIME"),b.ja=d),b.format="ISO",c.push(b));c&&0<c.length&&FM(a,c);DM(a,["Altitude","Radius","SemiMajor","SemiMinor"])};var n9=[/^application\/json$/,/gml\\?3/i,/gml\\?2/i];
function zGa(a,b){b=b.formats;var c=a.params.get("outputformat");if(c)for(var d=0,e=n9.length;d<e;d++){var f=n9[d];if(c&&f.test(c))return d}if(b)for(d=0,e=n9.length;d<e;d++){f=n9[d];c=0;for(var h=b.length;c<h;c++)if(f.test(b[c]))return a.params&&a.params.set("outputformat",b[c]),d}return 1}m9.prototype.Jf=function(a){a=zGa(this,a);var b;0===a?(b=IM("geojson"))||(b=new r1):(b=new b6,2===a&&(b.format=new $5));return b};
m9.prototype.W=function(a){a=new Vz({source:a});a.Nf("<ogclayernodeui></ogclayernodeui>");return a};m9.prototype.N=function(a){a=m9.C.N.call(this,a);a.Is=!0;return a};function o9(){m9.call(this)}w(o9,m9);
o9.prototype.Ll=function(a,b){o9.C.Ll.call(this,a,b);var c=a.N(),d=null!=b.exclusions?b.exclusions:!1,e=null!=b.filter?b.filter:!1,f=null!=b.spatial?b.spatial:!1,h=null!=b.temporal?b.temporal:!!this.featureType.Be(),k=null!=b.featureIDs?b.featureIDs:null,l=null!=b.relatedLayer?b.relatedLayer:null;b=lE;if(k||h||f||e||d){var m={WS:d,filter:e,xv:!!k||!!l,eT:f,iB:h};if(e){var n=BGa.bind(void 0,a);a.o=n;n=CGa.bind(void 0,a);a.I=n}if(a=c.l)Pi(a,new V6(m)),k&&(k=new c9({ID:k}),Pi(a,k)),l&&(k=new c9(l),Pi(a,
k),c.ws=!0),(k=this.featureType.zp())&&(f||d||e)&&(d=new tGa(k),d.Cb(c),b.j.push(d),b.l.start()),h&&(d=new uGa,d.l=this.featureType.Be()||"validTime",d.g=this.featureType.bg()||"validTime",-1<this.url.indexOf("ogc/wfsServer")&&(d.j=!0),e=new h0("temporal","filter","{temporal}",""),h=new j0,h.l=d,h.g=e,h.Cb(c),d=DU.s(),c=c.D(),d.g[c]=h,EU(h,d.j,!1))}};function BGa(a){GY(a.D())}function CGa(a){return(a=a.Va())&&a.featureType&&(a=a.featureType)?a.getColumns():null};function p9(a){m3.call(this,a);this.Oq=!0}w(p9,m3);F(p9,"os.source.IStyle");p9.prototype.Ib=function(){var a=this.vf();if(a)var b=a.STYLES||"";return b};p9.prototype.zb=function(a){a="string"==typeof a?a:null!=a?a.data:"";if(a!=this.Ib()){var b=this.vf();b.STYLES=a;this.Gc.clear();this.updateParams(b);this.dispatchEvent(new K("style"))}};function q9(){G0.call(this);this.animate=!1}w(q9,G0);g=q9.prototype;g.ac=function(a){q9.C.ac.call(this,a);this.g=a.animate?hR:this.g};g.bp=function(a,b){q9.C.bp.call(this,a,b);a.B=b.styles||null;this.animate&&a instanceof hR&&b.dateFormat&&(a.I=b.dateFormat,K0(a))};
g.N=function(a){var b={EXCEPTIONS:"INIMAGE"};if(this.params){var c=this.params.get("VERSION");b.EXCEPTIONS="1.1.1"===c?"application/vnd.ogc.se_inimage":"INIMAGE";c=this.params.Xb();for(var d=0,e=c.length;d<e;d++){var f=c[d];b[a.caseSensitive?f:f.toUpperCase()]=this.params.get(f)}}a={urls:this.urls,params:b,projection:this.projection,tileGrid:this.tileGrid,crossOrigin:this.crossOrigin,wrapX:this.projection.Th()};return new p9(a)};
g.Pp=function(a){if(this.params)for(var b=this.params.Xb(),c=0,d=b.length;c<d;c++)if("WIDTH"==b[c].toUpperCase())return parseInt(this.params.get(b[c]),10);return q9.C.Pp.call(this,a)};g.Op=function(a){if(this.params)for(var b=this.params.Xb(),c=0,d=b.length;c<d;c++)if("HEIGHT"==b[c].toUpperCase())return parseInt(this.params.get(b[c]),10);return q9.C.Op.call(this,a)};function r9(){Kg.call(this);this.id="ogc"}w(r9,Kg);
r9.prototype.init=function(){var a=Y,b=new eF("geoserver",R8,"GeoServer","");mF(a,new eF("ogc",M8,"OGC Server","OGC Servers provide raster imagery through WMS (Web Map Service) and vector features through WFS (Web Feature Service) servers"));mF(a,b);nF(a,"ogc",Z8);a=Uf.s();Yf(a,"WMS",q9);Yf(a,"WFS",o9);var c=DGa;b="wfs";b in a.g&&E.hb(Vf,"Default layer config is being overridden for: "+b);a.g[b]=c;a=GM.s();KM(a,"ogc",new U_("<ogcserver></ogcserver>"));KM(a,"geoserver",new U_("<geoserver></geoserver>"))};
function DGa(){var a={load:!0,spatial:!0,temporal:!0,exclusions:!1,filter:!0,usePost:!0,params:Xga()};a.params.remove("maxfeatures");a.params.remove("outputformat");return a}CH=function(a){a=a||M.get("os.map.mapMode")||"2d";return M.get("maxFeatures."+a,5E4)};function s9(){}s9.prototype.di=function(){return["addLayer"]};s9.prototype.ad=function(a){if(a&&(q(a)||(a=[a]),a=a.filter(function(a){return Ba(a)}).map(function(a){a.id=a.id||Vb();return new fM(a)}),a.length)){if(1<a.length){var b=new TP;b.bc(a)}else b=a[0];AE(BE,b)}};function t9(){Kg.call(this);this.id="openpage"}w(t9,Kg);xa(t9);t9.prototype.init=function(){uj.s().Hg(new s9)};var EGa={relation:1.2,way:1.1},FGa={labelColor:"rgba(255,255,255,1)",labels:[{column:"display_name",showColumn:!1}],image:{type:"icon",scale:.75,src:"http://maps.google.com/mapfiles/kml/paddle/wht-blank.png",color:"rgba(0,255,255,1)"},stroke:{width:3,color:"rgba(0,0,255,1)"},fill:{color:"rgba(0,0,255,0.1)"}};function u9(){this.g=void 0;this.j=0;this.format=new FG}var GGa=E.V("plugin.osm.nom.NominatimParser");u9.prototype.Cb=function(a){this.pc();a instanceof ArrayBuffer&&(a=Dw(a)||null);if("string"===typeof a)try{var b=JSON.parse(a)}catch(c){E.error(GGa,"Failed parsing response:",c),b=void 0}else q(a)&&(b=a);b&&(this.g=b)};u9.prototype.pc=function(){this.g=void 0;this.j=0};u9.prototype.Cd=function(){return!!this.g&&this.g.length>this.j};
u9.prototype.Zc=function(){var a=this.g[this.j++];if(a)try{delete a.boundingbox;var b=a.geojson;if(b){var c=this.format.gl(b);c&&(Ap(c),a.geometry=c);delete a.geojson}else if(a.lon&&a.lat){var d=Number(a.lon),e=Number(a.lat);isNaN(d)||isNaN(e)||(a.geometry=new hp([d,e]))}var f=new hq(a)}catch(h){E.error(GGa,"Failed reading feature:",h)}return f};Q.directive("nominatimresultcard",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/plugin/osm/nom/nominatimresultcard.html",controller:v9,controllerAs:"ctrl"}}]);
function v9(a,b){E_.call(this,a,b);this.details="";a=[];b=this.qd("category");var c=this.qd("type");b&&c&&(b=ac(b),c=ac(c),a.push(b+" ("+c+")"));if(b=this.feature.get("extratags"))if((c=b.place)&&a.push(ac(c)),b=b.population)c=Number(b),isNaN(c)?a.push("Population: "+b):a.push("Population: "+c.toLocaleString());this.details=a.join(" - ")}w(v9,E_);v9.$inject=["$scope","$element"];v9.prototype.S=function(){return this.feature.get("display_name")||"Unknown Result"};v9.prototype.getTitle=v9.prototype.S;function w9(a){var b=100;if(a){var c=a.get("importance");if(c){var d=a.get("osm_type");d&&d in EGa&&(c*=EGa[d]);b+=c}}else b=0;G_.call(this,a,"display_name",b);a.set("_style",FGa,!0);sz(a)}w(w9,G_);w9.prototype.g=function(){return'<nominatimresultcard result="result"></nominatimresultcard>'};function x9(a){A7.call(this,"nominatim",a);this.type="nominatim"}w(x9,A7);F(x9,"os.search.IGeoSearch");x9.prototype.LA=function(){return!1};x9.prototype.vm=function(a){var b=M.get("plugin.osm.nom.url","");b&&a&&(b+="&limit="+a);return b};x9.prototype.ai=function(a){var b=a.target.g;if(b){var c=new u9;for(c.Cb(b);c.Cd();)(b=c.Zc())&&(q(b)?this.g.concat(b.map(function(a){return a?new w9(a):void 0}).filter($u)):this.g.push(new w9(b)))}x9.C.ai.call(this,a)};function y9(){Kg.call(this);this.id="nominatim"}w(y9,Kg);y9.prototype.init=function(){if(M.get("plugin.osm.nom.url")){var a=new x9("Places (OpenStreetMap)");HU(GU.s(),a)}};function z9(a){function b(a){a=k.getCoordinateFromPixel(Yr(k,a));Sq(T(l.X()),a);window.removeEventListener("mousemove",c);window.removeEventListener("mouseup",b)}function c(a){a=k.getCoordinateFromPixel(Yr(k,{clientX:a.clientX-n.offsetWidth/2,clientY:a.clientY+n.offsetHeight/2}));m.set(Y3,a)}a=a?a:{};this.j=void 0!==a.collapsed?a.collapsed:!0;this.A=void 0!==a.collapsible?a.collapsible:!0;this.A||(this.j=!1);var d=void 0!==a.className?a.className:"ol-overviewmap",e=void 0!==a.tipLabel?a.tipLabel:
"Overview map",f=void 0!==a.collapseLabel?a.collapseLabel:"\u00ab";"string"===typeof f?(this.u=document.createElement("span"),this.u.textContent=f):this.u=f;f=void 0!==a.label?a.label:"\u00bb";"string"===typeof f?(this.Sb=document.createElement("span"),this.Sb.textContent=f):this.Sb=f;var h=this.A&&!this.j?this.u:this.Sb;f=document.createElement("button");f.setAttribute("type","button");f.title=e;f.appendChild(h);H(f,"click",this.Iq,this);this.B=document.createElement("DIV");this.B.className="ol-overviewmap-map";
var k=this.g=new DN({controls:new ju,interactions:new ju,view:a.view});a.layers&&a.layers.forEach(function(a){Pv(dI(k)).push(a)},this);e=document.createElement("DIV");e.className="ol-overviewmap-box";e.style.boxSizing="border-box";this.l=new U3({position:[0,0],positioning:"bottom-left",element:e});Lka(this.g,this.l);e=document.createElement("div");e.className=d+" ol-unselectable ol-control"+(this.j&&this.A?" ol-collapsed":"")+(this.A?"":" ol-uncollapsible");e.appendChild(this.B);e.appendChild(f);
FN.call(this,{element:e,render:a.render?a.render:HGa,target:a.target});var l=this,m=this.l,n=this.l.ub();n.addEventListener("mousedown",function(){window.addEventListener("mousemove",c);window.addEventListener("mouseup",b)})}I(z9,FN);g=z9.prototype;
g.setMap=function(a){var b=this.X();a!==b&&(b&&((b=T(b))&&yf(b,Jf("rotation"),this.Fm,this),this.g.set("target",null)),FN.prototype.setMap.call(this,a),a&&(this.g.set("target",this.B),this.o.push(H(a,"propertychange",this.cq,this)),0===Ov(this.g).getLength()&&(b=dI(a),this.g.set("layergroup",b)),a=T(a)))&&(H(a,Jf("rotation"),this.Fm,this),qs(a)&&(this.g.lf(),A9(this)))};g.cq=function(a){"view"===a.key&&((a=a.oldValue)&&yf(a,Jf("rotation"),this.Fm,this),a=T(this.X()),H(a,Jf("rotation"),this.Fm,this))};
g.Fm=function(){us(T(this.g),ss(T(this.X())))};function HGa(){var a=this.X(),b=this.g;if(a.j&&b.j){var c=Xn(a);a=As(T(a),c);var d=Xn(b);c=As(T(b),d);var e=b.getPixelFromCoordinate([a[0],a[3]]),f=b.getPixelFromCoordinate([a[2],a[1]]);b=Math.abs(e[0]-f[0]);e=Math.abs(e[1]-f[1]);f=d[0];d=d[1];b<.1*f||e<.1*d||b>.75*f||e>.75*d?A9(this):Tk(c,a)||(c=this.X(),a=this.g,c=T(c),Sq(T(a),rs(c)))}IGa(this)}
function A9(a){var b=a.X();a=a.g;var c=Xn(b);b=As(T(b),c);a=T(a);hl(b,1/(.1*Math.pow(2,Math.log(7.5)/Math.LN2/2)));Cs(a,b)}function IGa(a){var b=a.X(),c=a.g;if(b.j&&c.j){var d=Xn(b),e=T(b),f=T(c);c=ss(e);b=a.l;var h=a.l.ub(),k=As(e,d);d=f.bb();e=[k[0],k[1]];f=[k[2],k[3]];if(a=rs(T(a.X()))){var l=[e[0]-a[0],e[1]-a[1]];ls(l,c);ks(l,a)}b.set(Y3,l);h&&(h.style.width=Math.abs((e[0]-f[0])/d)+"px",h.style.height=Math.abs((f[1]-e[1])/d)+"px")}}g.Iq=function(a){a.preventDefault();JGa(this)};
function JGa(a){a.element.classList.toggle("ol-collapsed");a.j?vm(a.u,a.Sb):vm(a.Sb,a.u);a.j=!a.j;var b=a.g;a.j||b.j||(b.lf(),A9(a),xf(b,"postrender",function(){IGa(this)},a))}g.Fd=function(a){this.A&&this.j!==a&&JGa(this)};function B9(a){function b(a){var d=L.s();d.Qa()&&(a=c.getCoordinateFromPixel(Yr(c,a)),dR(d,{center:a}));window.removeEventListener("mouseup",b)}z9.call(this,a);KGa(this);var c=this.g;this.l.ub().addEventListener("mousedown",function(){window.addEventListener("mouseup",b)})}w(B9,z9);var LGa=["overview","show"];B9.prototype.cq=function(a){"view"===a.key&&KGa(this);B9.C.cq.call(this,a)};
function KGa(a){var b=new ps({projection:S,minZoom:2,maxZoom:25});if(a.X()){var c=T(a.X());c&&(Sq(b,rs(c)),Tq(b,c.bb()))}a.g.set("view",b)}B9.prototype.Iq=function(a){B9.C.Iq.call(this,a);M.set(LGa,this.j)};function C9(){Kg.call(this);this.id="overview";this.control=null}w(C9,Kg);C9.prototype.init=function(){var a=M.get(LGa,!1);this.control=new B9({collapsed:a,label:"\u00ab",collapseLabel:"\u00bb",layers:[Ov(L.s().X()).g[0]]});L.s().X().controls.push(this.control)};function D9(a){return"file"!==a.l&&"local"!==a.l}function MGa(a,b,c){a=a.N();if(a instanceof NK){var d=a.l;if(d&&(d=d.j)&&D9(d)){var e=d.g;e||(e=new ch,ah(d,e));for(var f in b)e.set(f,b[f]);c&&c.forEach(function(a){e.remove(a)});a.refresh()}}else if(F(a,"os.ol.source.IUrlSource")){var h=a.vf();h&&(yc(h,b),c&&c.forEach(function(a){delete h[a]}),a.updateParams(h))}}
function NGa(a,b){if(a){var c=a.N();if(c instanceof NK){if(a="string"==typeof b?b:b[0],b=c.l)if(b=b.j)a=String(a).match(Wg),Yg(b,a[1]||"",!0),b.A=bh(a[2]||""),b.j=bh(a[3]||"",!0),Zg(b,a[4]),$g(b,a[5]||"",!0),c.refresh()}else F(c,"os.ol.source.IUrlSource")&&(b&&("string"==typeof b?c.Mb(b):0<b.length&&c.ul(b)),F(a,"os.layer.ILayer")&&a.Ei(yH))}};Q.directive("editrequestparams",[function(){return{restrict:"E",replace:!0,scope:{layer:"=",params:"="},templateUrl:"v1541734487/views/plugin/params/editrequestparams.html",controller:E9,controllerAs:"ctrl"}}]);
function E9(a,b){x.call(this);this.scope=a;this.element=b;this.g=0;this.initialKeys=[];this.multiUrl=!1;this.urls=this.selected=this.params=null;var c=a.layer||null;b=null;c&&(c=c.N(),c instanceof NK?(c=c.l)&&(c=c.j)&&(b=c.toString().replace(/\?.*/,"")||null):F(c,"os.ol.source.IUrlSource")&&(c=c.urls)&&(b=c.slice()));"string"==typeof b?(this.urls=[b],this.multiUrl=!1):b&&(this.urls=b,this.multiUrl=!0);if(b=a.params){this.params=[];for(var d in b)this.initialKeys.push(d),this.params.push({id:this.g++,
field:d,value:b[d]})}this.gridOptions={asyncEditorLoading:!1,autoEdit:!0,editable:!0,enableCellNavigation:!0,forceFitColumns:!0,fullWidthRows:!0,multiColumnSort:!1,multiSelect:!1};d=new Wv("Field","field");d.editor=Slick.Editors.Text;b=new Wv("Value","value");b.editor=Slick.Editors.Text;this.gridColumns=[d,b];a.$on("$destroy",this.dispose.bind(this));a.$emit("window.ready")}w(E9,x);E9.$inject=["$scope","$element"];E9.prototype.J=function(){E9.C.J.call(this);this.element=this.scope=null};
E9.prototype.cancel=function(){this.close()};E9.prototype.cancel=E9.prototype.cancel;E9.prototype.confirm=function(){this.scope&&this.scope.$broadcast("slickgrid.commitEdit");var a=this.scope.layer;if(a){if(this.params){var b={},c=[];this.params.forEach(function(a){var c=Tb(a.field);Hb(c)||(b[c]=Tb(a.value))});this.initialKeys.forEach(function(a){a in b||c.push(a)});MGa(a,b,c)}if(this.urls){var d=this.urls.filter(function(a){return!Hb(a)});0<d.length&&NGa(a,d)}}this.close()};
E9.prototype.confirm=E9.prototype.confirm;E9.prototype.close=function(){kx(this.element)};E9.prototype.KC=function(){this.params&&(this.params=this.params.concat([{id:this.g++,field:"",value:""}]))};E9.prototype.addRow=E9.prototype.KC;E9.prototype.CN=function(){this.selected&&this.params&&(mb(this.params,this.selected),this.params=this.params.slice())};E9.prototype.removeRow=E9.prototype.CN;E9.prototype.MC=function(){this.multiUrl&&this.urls&&this.urls.push("")};E9.prototype.addUrl=E9.prototype.MC;
E9.prototype.FN=function(a){null!=a&&this.urls&&this.urls.length>a&&this.urls.splice(a,1)};E9.prototype.removeUrl=E9.prototype.FN;E9.prototype.KE=function(a){return this.multiUrl?"URL "+(a+1):"URL"};E9.prototype.getUrlLabel=E9.prototype.KE;
E9.prototype.qO=function(){if(!this.urls||0==this.urls.length||this.urls.every(Hb))return this.errorMsg=(this.multiUrl?"At least one ":"")+"URL must be defined.",!1;if(this.params)for(var a=0;a<this.params.length;a++){var b=this.params[a];if(!Hb(Tb(b.value))&&Hb(Tb(b.field)))return this.errorMsg="Value defined without a Field.",!1}this.errorMsg="";return!0};E9.prototype.testValid=E9.prototype.qO;function OGa(a){this.visible=!1;if(a&&1===a.length&&(a=fv(a))&&1===a.length&&a[0]instanceof Sf){a:{a=a[0];var b=a.N();if(b instanceof NK){if(a=b.l){a=a.j;a=null!=a&&D9(a);break a}}else if(F(a,"os.layer.ILayer")&&F(b,"os.ol.source.IUrlSource")){a=!0;break a}a=!1}this.visible=a}}
function PGa(a){if((a=fv(a.getContext()))&&1===a.length&&a[0]instanceof Sf){a=a[0];var b=null,c=a.N();c instanceof NK?(c=c.l)&&(c=c.j)&&D9(c)&&(b=Bda(c.g)):F(c,"os.ol.source.IUrlSource")&&(c=c.vf())&&(b=fi(c));fx({id:"editParams",label:"Edit Parameters",icon:"fa fa-gears",key:"editparams",x:"center",y:"center",width:450,"min-width":450,"max-width":0,height:350,"min-height":250,"show-close":!0,modal:!0},'<editrequestparams layer="layer" params="params"></editrequestparams>',void 0,void 0,void 0,{layer:a,
params:b})}else rj(tj,"Unexpected layer selection. Please select a single layer and try again.",Rh)};function F9(){Kg.call(this);this.id="params"}w(F9,Kg);xa(F9);F9.prototype.J=function(){F9.C.J.call(this);var a=AZ;a&&!a.Ha().find("params:edit")&&(a=a.Ha().find("Layer"))&&a.removeChild("params:edit")};F9.prototype.init=function(){var a=AZ;a&&!a.Ha().find("params:edit")&&a.Ha().find("Layer").R({label:"Edit Parameters...",eventType:"params:edit",tooltip:"Edit request parameters for the layer",da:['<i class="fa fa-fw fa-gears"></i>'],Aa:OGa,za:PGa,qa:"params.editParams"})};Q.directive("peliasgeocoderattrcard",[function(){return{replace:!0,restrict:"E",templateUrl:"v1541734487/views/plugin/pelias/geocoder/attrcard.html",controller:QGa,controllerAs:"attrCtrl"}}]);function QGa(a,b){a=a.result.Xi();for(var c="",d=0,e=a.length;d<e;d++)c+="<div>"+a[d]+"</div>";b.html(c)}QGa.$inject=["$scope","$element"];Q.directive("peliasgeocoderresultcard",[function(){return{restrict:"E",templateUrl:"v1541734487/views/plugin/pelias/geocoder/resultcard.html",controller:G9,controllerAs:"resultCtrl"}}]);function G9(a,b){E_.call(this,a,b)}w(G9,E_);G9.$inject=["$scope","$element"];function H9(a){G_.call(this,a,"name");this.j=95+a.get("confidence")}w(H9,G_);H9.prototype.g=function(){return'<peliasgeocoderresultcard result="result"></peliasgeocoderresultcard>'};function I9(a){A7.call(this,"pelias.geocoder",a);this.type="pelias.geocoder";this.format=new FG;this.u=RGa}w(I9,A7);var RGa=E.V("plugin.pelias.geocoder.Search");
I9.prototype.vm=function(){var a=M.get(["plugin","pelias","geocoder","url"]);if(M.get(["plugin","pelias","geocoder","extentParams"])){var b=M.get(["plugin","pelias","geocoder","extentThreshold"],2E5),c=L.s().X().Y();c=Ql(c,S,"EPSG:4326");c[0]=Vo(c[0]);c[2]=Vo(c[2]);osasm.geodesicInverse(c.slice(0,2),c.slice(2,4)).distance<=b&&(a+="&boundary.rect.min_lat="+c[1]+"&boundary.rect.min_lon="+c[0]+"&boundary.rect.max_lat="+c[3]+"&boundary.rect.max_lon="+c[2])}M.get(["plugin","pelias","geocoder","focusPoint"])&&
(b=M.get(["plugin","pelias","geocoder","focusPointMinZoom"],4),T(L.s().X()).zm()>=b&&(b=rs(T(L.s().X()))))&&(b=Ml(b,S),a+="&focus.point.lat="+b[1]+"&focus.point.lon="+b[0]);return a};
I9.prototype.ai=function(a){var b=a.target;try{var c=JSON.parse(b.g)}catch(l){E.error(this.u,"The result JSON was malformed",l)}if(c&&(b=c.features,c={featureProjection:S},b))for(var d=0,e=b.length;d<e;d++)try{var f=b[d].bbox,h=this.format.Ls(b[d],c);f&&h.set("extent",f,!0);var k=h.la;k.housenumber&&k.street&&k.postalcode&&(k.address=[k.housenumber+" "+k.street,k.locality,k.region_a||k.region,k.postalcode].join(", "));this.g.push(new H9(h))}catch(l){E.error(this.u,"There was an error parsing a result",
l)}I9.C.ai.call(this,a)};function J9(){Kg.call(this);this.id="pelias.geocoder"}w(J9,Kg);J9.prototype.init=function(){M.get(["plugin","pelias","geocoder","url"])&&HU(GU.s(),new I9("Place search (Pelias)"))};var SGa="description _mdDescription centerShape shape labels showLabels showLabelColumns labelColor labelSize ALTITUDE ALTITUDE_UNITS SEMI_MAJOR SEMI_MINOR SEMI_MAJ_UNITS SEMI_MINOR_UNITS ORIENTATION BEARING".split(" ");
function TGa(a,b){var c=VP(a,b2);c.ga(J(c));var d=a.get("_style")||b||Sy;d=yz(a,d,b);b=xz(d);!b&&d.image&&(delete d.image.src,delete d.image.scale);c.set("_style",d);if(d=Jy(a)||Ky)d==Ky&&(d=b?"Icon":"Point"),d=d.replace(/^Selected /,""),c.set("shape",d);if(a=Ly(a)||Ky)a=a.replace(/^Selected /,""),c.set("centerShape",a);return c}function K9(a){return(a=o2(a))?(a=a.na())&&a.length?a[0]:null:null};Q.directive("placesnodeui",[function(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.canEdit()" ng-click="nodeUi.addFolder()"><i class="fa fa-folder fa-fw c-glyph" title="Create a new folder"></i></span><span ng-if="nodeUi.canEdit()" ng-click="nodeUi.addPlace()"><i class="fa fa-map-marker fa-fw c-glyph" title="Create a new place"></i></span><span ng-if="nodeUi.isRemovable()" ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the place></i></span></span>',
controller:L9,controllerAs:"nodeUi"}}]);function L9(a,b){HE.call(this,a,b)}w(L9,HE);L9.$inject=["$scope","$element"];L9.prototype.Qf=function(){var a=this.scope.item;a&&(a=K9(a))&&i2({parent:a})};L9.prototype.addFolder=L9.prototype.Qf;L9.prototype.Uj=function(){var a=this.scope.item;a&&(a=K9(a))&&j2({parent:a})};L9.prototype.addPlace=L9.prototype.Uj;L9.prototype.Gh=function(){var a=this.scope.item;return a?f7(a):!1};L9.prototype.canEdit=L9.prototype.Gh;L9.prototype.remove=function(){B2.s().removeLayer()};
L9.prototype.remove=L9.prototype.remove;function B2(){C.call(this);this.B=UGa;this.j=this.l=this.g=null;this.A=this.u=!1;this.o=new Fh(this.LN,250,this);N.H("reset",this.RM,!1,this);N.H("spatial:updateFeature",this.iA,!1,this);N.H("spatial:restoreFeature",this.iA,!1,this)}w(B2,C);xa(B2);var UGa=E.V("plugin.places.PlacesManager"),M9=Hw(btoa("//plugin.places"));g=B2.prototype;g.J=function(){B2.C.J.call(this);VGa(this)};g.Rz=function(){uh(hB(eB.s(),M9),this.PM,this.el,this)};
g.removeLayer=function(){this.g&&(this.g.Ag(!0),L.s().removeLayer(this.g,!1))};
g.PM=function(a){if(a){a=new g7;var b={animate:!0,color:"rgba(255,255,255,1)",collapsed:!0,columns:b2,editable:!0,id:"places",layerType:"Reference Layers",load:!0,provider:Wh()||null,showLabels:!1,showRoot:!1,title:"Saved Places",type:"kml",url:M9},c=M.get("places.options");c&&Zh(c,b,!0);this.g=a.Me(b);this.g.Ag(!1);this.g.P=!0;this.g.ql(b);this.g.ve("");this.g.zg("");this.g.Nf("<placesnodeui></placesnodeui>");this.g.Kf=wa;this.l=this.g.N();H(this.l,"propertychange",this.SM,this);this.l.ob()||WGa(this)}else this.A?
this.el("Failed saving empty place content to storage."):(this.A=!0,uh(N9('<kml xmlns="http://www.opengis.net/kml/2.2"><Document><name>Saved Places</name></Document></kml>'),this.Rz,this.el,this))};g.el=function(a,b){E.error(this.B,a,b)};function VGa(a){a.removeLayer();z(a.g);a.g=null;a.l=null;a.j=null}g.RM=function(){VGa(this);nj++;uh(N9('<kml xmlns="http://www.opengis.net/kml/2.2"><Document><name>Saved Places</name></Document></kml>'),mj,mj)};
function N9(a){var b=eB.s();a=Fw("Saved Places",M9,void 0,a);return jB(b,a)}g.LN=function(){if(this.j){var a=this.j,b=new h7;b.dt(SGa);b.ri("Saved Places");b.setItems(a&&a.na()||[]);x6(b,!0);b.Ua("complete",this.NM,!1,this);b.Ua("error",this.OM,!1,this);b.ad()}this.g&&M.set("places.options",this.g.ra())};g.NM=function(a){a=a.target;var b=a.qg||"";a.dispose();null!=b?N9(b):this.el("Failed exporting places to browser storage. Content was empty.")};g.OM=function(a){a.target.dispose();this.el("Failed exporting places to browser storage.")};
function XGa(a,b){if(b&&(b.Fh=b.Vc(),b!==a.j&&(b.P=!0,b.I=!0,b.U=!0),b=b.na()))for(var c=0;c<b.length;c++)XGa(a,b[c])}g.SM=function(a){var b=a.j;b===MH?this.l.ob()||WGa(this):!this.o||b!==QI&&b!==LI||(b=a.u,(a.o||b)&&this.o.start())};
function WGa(a){if(a.l){a.j=a.l.P.na()[0];if(a.j&&(XGa(a,a.j),a.j.collapsed=!1,a.j.H("propertychange",a.QM,!1,a),null==L.s().W("places")&&a.g)){a.g.Ag(!1);var b=Kv.s(),c=Mv(b,"places");eM(L.s(),a.g);c||(Qv(b,"places","draw",!1),b.update(),b.save())}a.u=!0;a.dispatchEvent("loaded")}}g.QM=function(){this.o&&this.o.start()};g.iA=function(){this.l.Rn()};Q.directive("saveplaces",[function(){return{restrict:"E",scope:{initSources:"&"},templateUrl:"v1541734487/views/plugin/places/saveplaces.html",controller:O9,controllerAs:"ctrl"}}]);
function O9(a,b){nR.call(this,a);this.element=b;this.config={title:"",description:"",tags:"",features:[]};this.columns=[];this.descSample=this.titleSample="";this.help={title:"Custom title given to all saved places.",titleColumn:"Column used to apply titles to all saved places. If a selected item doesn't have this field defined, a generic title will be given. You may also choose to apply a custom title to new places.",description:"Description applied to all saved places.",descColumn:"Column used to apply descriptions to all saved places. If a selected item doesn't have this field defined, the description will be left blank. You may also choose to apply a custom description to new places.",
tags:"Comma-delimited list of tags to apply to all saved places. Tags can be used to group or search places in the Layers tab of the Layers window.",tagsColumn:"Column used to apply tags to all saved places. Tags can be used to group or search places in the Layers tab of the Layers window.  If an item doesn't have this field defined, the tags will be left blank. You may also choose to provide your own custom tags."};a.$on("exportoptions:change",this.g.bind(this));setTimeout(function(){a.$emit("window.ready")},
0)}w(O9,nR);O9.$inject=["$scope","$element"];O9.prototype.J=function(){O9.C.J.call(this);this.element=null};O9.prototype.cancel=function(){kx(this.element)};O9.prototype.cancel=O9.prototype.cancel;
O9.prototype.confirm=function(){var a=this.config,b;if(b=B2.s().j){var c=a.features;if(c&&0!=c.length){var d=Ey(c[0]);if(d){for(var e=null!=c[0]?Hy(c[0],d):void 0,f=[],h=1,k,l=0;l<c.length;l++){var m=c[l];if(m){var n=TGa(m,e);if(a.titleColumn)var p=m.get(a.titleColumn.field);else a.title&&(p=a.title,1<a.features.length&&(p+=" "+(l+1)));p||(p="Unnamed Placemark "+h++);n.set("name",p);m=a.descColumn?m.get(a.descColumn.field):a.description;n.set("description",m);n=n2({feature:n});f.push(n)}}a=d.S();
if(c=b.na())for(l=0;l<c.length;l++)if(c[l].ba()==a){k=c[l];break}if(k){b=[];for(l=0;l<f.length;l++)b.push(new f2(f[l],k));k=new TP;k.bc(b)}else k=m2({name:a}),k.Bc(f),k=new f2(k,b);f=f.length;k.title="Save "+f+" Place"+(1<f?"s":"")+" from "+a;AE(BE,k)}}}rj(tj,"Added "+this.count+" feature"+(1<this.count?"s":"")+" to the Saved Places layer.",Sh);this.cancel()};O9.prototype.confirm=O9.prototype.confirm;O9.prototype.lq=function(a){return"places"!=a.D()};
O9.prototype.g=function(a,b,c){a.stopPropagation();this.config&&(this.config.features&&(this.config.features.length=0,b&&0<b.length&&(this.config.features=this.config.features.concat(b))),this.columns=c&&0<c.length?c[0].getColumns().slice():[],this.columns.sort(Fx))};function P9(a){this.visible=!1;if(this.eventType&&a&&1==a.length){var b=a[0];if(b instanceof k2){var c=B2.s();c=c.j.Ha();var d=c===b.Ha();if(d)switch(this.eventType){case "places:addFolder":case "places:addPlacemark":this.visible=b.Vc()&&b.Fh;break;case "places:editFolder":this.visible=b.Vc()&&b.P;break;case "places:editPlacemark":this.visible=!b.Vc()&&b.P;break;case "places:export":this.visible=null!=c&&b.Ha()==c;break;case "places:removePlace":this.visible=b.Vc()||b.We()?!1:b.U;break;case "places:removeAll":this.visible=
!1;break;default:this.visible=b.Vc()}}else if(b instanceof d7)switch(a=b.W(),a=null!=a&&"places"==a.D(),this.eventType){case "places:export":this.visible=a;break;case "places:addFolder":case "places:addPlacemark":this.visible=a&&f7(b);break;case "places:removeAll":this.visible=a&&b.We()}}else if(a&&1<a.length)for(var e=0;e<a.length;e++){b=a[e];if(b instanceof k2){c=B2.s();c=c.j.Ha();d=c===b.Ha();if(!d){this.visible=!1;break}switch(this.eventType){case "places:removePlace":this.visible=b.U;break;default:this.visible=
!1}}else this.visible=!1;if(!this.visible)break}}function YGa(a){a=uQ(a);return 1===a.length?"places"===a[0].get("sourceId"):!1}function ZGa(a){this.visible=!1;YGa(a)||1!==tQ(a).length||(this.visible=!0)}function $Ga(a){this.visible=YGa(a)}function aHa(a){a=uQ(a.getContext());if(1===a.length){a=a[0];var b=Y.N("places");if(b){a:{if(a){var c=a.D();if((b=b.K[c]||null)&&b.getFeature()===a)break a}b=null}b&&j2({feature:a,node:b})}}}
function Q9(a){var b=a.getContext();if(b&&1==b.length){var c=b[0];if(c instanceof k2){var d=c.N();if(d)switch(a.type){case "places:addFolder":i2({parent:c});break;case "places:addPlacemark":j2({parent:c});break;case "places:editFolder":i2({node:c});break;case "places:editPlacemark":j2({feature:c.getFeature(),node:c});break;case "places:export":C2(c);break;case "places:removePlace":a=new g2(c),AE(BE,a)}}else if(c instanceof d7){var e=o2(c).na()[0];if(e)switch(a.type){case "places:addFolder":i2({parent:e});
break;case "places:addPlacemark":j2({parent:e});break;case "places:export":C2(e);break;case "places:removeAll":a=c.na();e=[];for(var f=0;f<a.length;f++)c=new g2(a[f]),e.push(c);e.length&&(a=new $B,a.bc(e),a.title="Remove Place"+(1<e.length?"s":""),AE(OE.s(),a))}}}else if(b&&1<b.length){e=[];for(f=0;f<b.length;f++)if(c=b[f],c instanceof k2&&(d=c.N()))switch(a.type){case "places:removePlace":c=new g2(c),e.push(c)}e.length&&(a=new $B,a.bc(e),a.title="Remove Place"+(1<e.length?"s":""),AE(OE.s(),a))}}
function bHa(a){this.visible=!1;if(a&&1==a.length){var b=B2.s().j;if(b)if(a[0]instanceof d7)a=K9(a[0]),this.visible=null!=a&&a!=b;else if(a[0]instanceof ev){if(b=a[0].W(),"places"!=b.D()&&b instanceof Vz)if(b instanceof e7)this.visible=!0;else if(b=b.N(),b instanceof Rz&&0<b.dg()){var c=b.Zd();this.visible=null!=c&&0<c.length}}else a[0]instanceof k2&&(c=a[0].La(),this.visible=a[0].Ha()!=b.Ha()&&0<c.length)}}
function cHa(a){var b=a.getContext();b&&a instanceof A&&!Ci()&&(a.preventDefault(),a.stopPropagation(),a=B2.s().j,j2({geometry:new hp(b),parent:a}))}function dHa(a){var b=a.getContext();if(b&&a instanceof A&&!Ci()){a.preventDefault();a.stopPropagation();a=B2.s().j;var c,d,e=uQ(b);if(1===e.length){var f=Cy(e[0]);(d=e[0].Z())&&(c=d.clone());d=e[0].get("recordTime")}else b=tQ(b),1===b.length&&(c=b[0].clone());c&&j2({geometry:c,parent:a,name:f,time:d})}}
function eHa(a){var b=a.getContext();b&&a instanceof A&&!Ci()&&(a.preventDefault(),a.stopPropagation(),a=B2.s().j,b&&1==b.length&&(b[0]instanceof d7?(b=o2(b[0]).na())&&b!=a&&R9(b):b[0]instanceof ev?(b=b[0].W(),"places"!=b.D()&&(b instanceof e7?(b=(a=b.N())?a.P:void 0)&&R9(b):a&&b instanceof Vz&&(a=b.N(),ix("savePlaces")?hx("savePlaces"):fx({id:"savePlaces",label:"Save to Places",icon:"fa fa-map-marker",x:"center",y:"center",width:425,"min-width":300,"max-width":800,height:"auto","show-close":!0},
'<saveplaces init-sources="initSources"></saveplaces>',void 0,void 0,void 0,{initSources:a?[a]:void 0})))):b[0]instanceof k2&&b[0].Ha()!=a&&R9(b[0])))}function R9(a){var b=B2.s().j;if(b){q(a)||(a=[a]);for(var c=[],d=0;d<a.length;d++){var e=a[d],f=fHa(e);f&&(f=new f2(f,b),f.title="Save "+e.ba()+" to Places",c.push(f))}a=new TP;a.bc(c);AE(OE.s(),a)}}
function fHa(a){var b=null;if(a.Vc()){if(b=m2({name:a.ba()||"Unnamed Folder"}),a=a.na())for(var c=0;c<a.length;c++){var d=fHa(a[c]);d&&b.R(d)}}else if(a=a.getFeature())a=TGa(a),b=n2({feature:a});return b};function S9(){Kg.call(this);this.id="places"}w(S9,Kg);xa(S9);var gHa=E.V("plugin.places.PlacesPlugin");S9.prototype.J=function(){S9.C.J.call(this);var a=AZ;(a=a?a.Ha().find("Tools"):void 0)&&a.removeChild("Saved Places");(a=BU)&&(a=a.Ha().find("Coordinate"))&&a.removeChild("places:saveToPlaces");if(a=BU)if(a=a.Ha().find("Tools"))a.removeChild("places:saveToPlaces"),a.removeChild("places:editPlacemark")};
S9.prototype.init=function(){try{B2.s().Rz();var a=AZ;a&&!a.Ha().find("Saved Places")&&a.Ha().R({label:"Saved Places",type:"group",sort:BZ++,children:[{label:"Add Folder",eventType:"places:addFolder",tooltip:"Creates a new folder and adds it to the tree",da:['<i class="fa fa-fw fa-folder"></i>'],Aa:P9,za:Q9,qa:"places.addFolder"},{label:"Add Place",eventType:"places:addPlacemark",tooltip:"Creates a new saved place",da:['<i class="fa fa-fw fa-map-marker"></i>'],Aa:P9,za:Q9,qa:"places.addPlace"},{label:"Edit Folder",
eventType:"places:editFolder",tooltip:"Edit the folder label",da:['<i class="fa fa-fw fa-pencil"></i>'],Aa:P9,za:Q9,qa:"places.contextMenu.editFolder"},{label:"Edit Place",eventType:"places:editPlacemark",tooltip:"Edit the saved place",da:['<i class="fa fa-fw fa-pencil"></i>'],Aa:P9,za:Q9,qa:"places.contextMenu.editPlacemark"},{label:"Export Places...",eventType:"places:export",tooltip:"Exports Saved Places from the selected location",da:['<i class="fa fa-fw fa-download"></i>'],Aa:P9,za:Q9,qa:"places.contextMenu.export"},
{label:"Save to Places...",eventType:"places:saveToPlaces",tooltip:"Copies selected features to the Saved Places layer, or all features if none selected",da:['<i class="fa fa-fw fa-map-marker"></i>'],Aa:bHa,za:eHa,qa:"places.contextMenu.saveTo"},{label:"Remove",eventType:"places:removePlace",tooltip:"Removes the place",da:['<i class="fa fa-fw fa-times"></i>'],Aa:P9,za:Q9,qa:"places.removePlace"},{label:"Remove All",eventType:"places:removeAll",tooltip:"Removes all of the places",da:['<i class="fa fa-fw fa-times"></i>'],
Aa:P9,za:Q9,qa:"places.removeAll"}]});if((a=BU)&&!a.Ha().find("places:saveToPlaces")){var b=a.Ha().find("Coordinate");b&&b.R({label:"Save to Places...",eventType:"places:saveToPlaces",tooltip:"Creates a new saved place from this location",da:['<i class="fa fa-fw fa-map-marker"></i>'],za:cHa})}if(b=SP){var c=b.Ha().find("Tools");c.find("places:saveToPlaces")||(c.R({eventType:"places:saveToPlaces",label:"Save to Places...",tooltip:"Creates a new saved place from the area",da:['<i class="fa fa-fw fa-map-marker"></i>'],
Aa:ZGa,za:dHa}),c.R({eventType:"places:editPlacemark",label:"Edit Place",tooltip:"Edit the saved place",da:['<i class="fa fa-fw fa-pencil"></i>'],Aa:$Ga,za:aHa}))}}catch(d){E.error(gHa,"Failed initializing Places plugin:",d)}};function T9(){lt.call(this,{handleEvent:hHa});this.g=Ya($s,bt)}w(T9,lt);F(T9,"os.I3DSupport");T9.prototype.vc=function(){return!0};function hHa(a){var b=!1;if("keydown"==a.type&&this.g(a)){var c=a.originalEvent.keyCode;b=!0;switch(c){case 190:O(P.s(),"map.keyboard.copyCoordinates",1);iHa();break;default:b=!1}}b&&a.preventDefault();return!b};function U9(){Kg.call(this);this.id="position"}w(U9,Kg);xa(U9);U9.prototype.init=function(){if(BU){var a=BU,b=a.Ha().find("Coordinate");b&&b.R({label:"Copy Coordinates",eventType:"copy",tooltip:"Copy coordinates to clipboard",da:['<i class="fa fa-fw fa-sticky-note"></i>'],Bg:".",qa:"map.contextMenu.copyCoordinates"});a.H("copy",jHa)}L.s().X().interactions.push(new T9)};function jHa(a){iHa(a.getContext())}
function iHa(a){O(P.s(),"map.features.copyCoordinates",1);for(var b=L.s().X().controls.g,c=null,d=0,e=b.length;d<e;d++)if(b[d]instanceof PQ){c=b[d];break}if(c){b=c;if(a=a||b.ha.getCoordinateFromPixel(b.l)){c="";a=Ml(a,T(b.ha).Ra());for(f in b.j)c+=(0,b.j[f])(a)+"\n";c=c.substring(0,c.length-1);var f=c.replace(/&deg;/g,"\u00b0")}else f="";f&&(ix("copyPosition")?hx("copyPosition"):fx({id:"copyPosition",label:"Copy Coordinates",icon:"fa fa-sticky-note",x:"center",y:"center",width:"300",height:"auto",
modal:"true"},'<copy-position value="value"></copy-position>',void 0,void 0,void 0,{value:f}))}};Q.directive("lightstrip",[function(){return{restrict:"AE",replace:!0,template:'<canvas class="position-absolute" height="2" width=""></canvas>',controller:V9,SS:"ctrl"}}]);function V9(a,b){this.L=b;this.l=this.g=null;this.o=new bw;this.o.H("resize",this.j.bind(this),!1);N.H(XW,this.j,!1,this);a.$on("$destroy",this.u.bind(this));this.j()}V9.$inject=["$scope","$element"];
V9.prototype.u=function(){this.L=this.v=null;this.o.dispose();this.o=null;Gf(this.g,"change:center",this.j,this);N.M(XW,this.j,!1,this)};var W9=[{label:"nightEnd",color:"navy"},{label:"sunrise",color:"lightskyblue"},{label:"sunset",color:"gold"},{label:"night",color:"lightskyblue"}];
V9.prototype.j=function(a){a instanceof WW&&(this.l=a.l);if(this.l&&(a=L.s().X())){if(!this.g){this.g=T(a);if(!this.g)return;this.g.on("change:center",this.j,this)}if(a=rs(this.g)){this.L.attr("width",this.L.parent().width());var b=this.L[0].getContext("2d"),c=this.L.width(),d=this.L.height();if(144E5<this.l.interval)b.clearRect(0,0,c,d);else{a=Ml(a,S);for(var e=this.l.start,f=this.l.end,h=f-e,k=e,l=e;k<f;l+=864E5){for(var m=SunCalc.getTimes(new Date(l),a[1],a[0]),n=0,p=W9.length;n<p;n++){var r=m[W9[n].label].getTime();
if(r>k){k=c*(k-e)/h;var u=Math.min(c*(r-e)/h,c);b.fillStyle=W9[n].color;b.fillRect(k,0,u-k,d);k=r}}b.fillStyle=W9[0].color;b.fillRect(u,0,c-u,d)}}}}};Q.directive("suncalc",[function(){return{restrict:"AE",replace:!0,templateUrl:"v1541734487/views/plugin/suncalc/suncalc.html",controller:X9,controllerAs:"ctrl"}}]);function X9(a,b){this.v=a;this.L=b;this.l=a.coord||null;this.g=vg.s();a.$on("$destroy",this.o.bind(this));this.g.H("timeline.show",this.j,!1,this);this.j()}X9.$inject=["$scope","$element"];X9.prototype.o=function(){this.g.M("timeline.show",this.j,!1,this);this.L=this.v=null};X9.prototype.close=function(){kx(this.L)};
X9.prototype.close=X9.prototype.close;
X9.prototype.j=function(){var a=this.g.g;this.v.time=a;var b=new Date(a),c=this.l||rs(T(L.s().X()));if(c){c=Ml(c,S);this.v.coord=c;a=SunCalc.getTimes(b,c[1],c[0]);var d=SunCalc.getPosition(b,c[1],c[0]);a=[{label:"Dawn",time:a.dawn.getTime(),color:"#87CEFA"},{label:"Sunrise",time:a.sunrise.getTime(),color:"#FFA500"},{label:"Solar Noon",time:a.solarNoon.getTime(),color:"#FFD700"},{label:"Sunset",time:a.sunset.getTime(),color:"#FFA500"},{label:"Dusk",time:a.dusk.getTime(),color:"#87CEFA"},{label:"Night",
time:a.night.getTime(),color:"#000080"}];this.v.sun={altitude:d.altitude*Xp,azimuth:Xp*(d.azimuth+Math.PI)%360};d=SunCalc.getMoonTimes(b,c[1],c[0]);c=SunCalc.getMoonPosition(b,c[1],c[0]);b=SunCalc.getMoonIllumination(b);this.v.moonAlwaysDown=d.alwaysDown;this.v.moonAlwaysUp=d.alwaysUp;d.rise&&a.push({label:"Moonrise",time:d.rise.getTime(),color:"#ddd"});d.set&&a.push({label:"Moonset",time:d.set.getTime(),color:"#2F4F4F"});for(var e="",f=kHa,h=0,k=f.length;h<k;h++)if(b.phase>=f[h].min&&b.phase<f[h].max){e=
f[h].label;break}this.v.moon={alwaysUp:d.alwaysUp,alwaysDown:d.alwaysDown,azimuth:Xp*(c.azimuth+Math.PI)%360,altitude:c.altitude*Xp,brightness:Math.ceil(100*b.fraction)+"%",phase:e};a=a.filter(lHa);a.forEach(mHa);kaa(a);[].push(a);this.v.times=a;R(this.v)}};
var kHa=[{label:"New Moon",min:0,max:.03},{label:"Waxing Crescent",min:.03,max:.22},{label:"First Quarter",min:.22,max:.28},{label:"Waxing Gibbous",min:.28,max:.47},{label:"Full Moon",min:.47,max:.53},{label:"Waning Gibbous",min:.53,max:.72},{label:"Last Quarter",min:.72,max:.78},{label:"Waning Crescent",min:.78,max:.97},{label:"New Moon",min:.97,max:1}];function lHa(a){return"string"===typeof a.time||!isNaN(a.time)}function mHa(a){var b=se(a.color);a.textColor=re(dba(b))}
X9.prototype.TD=function(a){return"number"===typeof a?moment(a+UF).utc().format(RF[7]):a};X9.prototype.formatTime=X9.prototype.TD;X9.prototype.SD=function(a){return void 0!==a?moment(a+UF).utc().format(QF[20])+(0!==UF?" UTC":"")+VF:""};X9.prototype.formatDate=X9.prototype.SD;function Y9(){Kg.call(this);this.id="suncalc"}w(Y9,Kg);xa(Y9);Y9.prototype.init=function(){var a=BU;if(a){var b=a.Ha().find("Coordinate");b&&(b.R({label:"Sun/Moon Info",eventType:"suncalc",tooltip:"See sun/moon event times for this location",da:['<i class="fa fa-fw fa-sun-o"></i>']}),a.H("suncalc",nHa));(b=a.Ha().find("Options"))&&b.R({label:"Sunlight",eventType:"os.map.enableLighting",type:"check",tooltip:"Light the 3D globe with the Sun",za:oHa,Aa:pHa})}};
function pHa(){this.visible=L.s().Qa();this.selected=!!M.get("os.map.enableLighting",!1)}function oHa(){M.set("os.map.enableLighting",!this.selected)}function nHa(a){fx({id:"suncalc",label:"Sun and Moon Info",icon:"fa fa-sun-o",x:"center",y:"center",width:400,"min-width":400,"max-width":0,height:400,"min-height":300,"max-height":0,"show-close":!0},"<suncalc></suncalc>",void 0,void 0,void 0,{coord:a.getContext()})};Q.directive("tracknodeui",[function(){return{restrict:"AE",replace:!0,template:'<span ng-if="nodeUi.show()" class="d-flex flex-shrink-0"><span ng-if="nodeUi.canEdit()" ng-click="nodeUi.addFolder()"><i class="fa fa-folder fa-fw c-glyph" title="Create a new folder"></i></span><span ng-if="nodeUi.isRemovable()" ng-click="nodeUi.remove()"><i class="fa fa-times fa-fw c-glyph" title="Remove the layer and all saved tracks"></i></span></span></span>',controller:Z9,controllerAs:"nodeUi"}}]);
function Z9(a,b){HE.call(this,a,b)}w(Z9,HE);Z9.$inject=["$scope","$element"];Z9.prototype.Qf=function(){var a=this.scope.item;a&&(a=o2(a))&&i2({parent:a})};Z9.prototype.addFolder=Z9.prototype.Qf;Z9.prototype.Gh=function(){var a=this.scope.item;return null!=a&&f7(a)};Z9.prototype.canEdit=Z9.prototype.Gh;function qHa(a){e7.call(this,a);this.zg("");this.g=!0;this.l=!1;this.Kf=wa}w(qHa,e7);function $9(a){b7.call(this,a);this.yf=!1;a=new k2;a.Da("Tracks");a.Cb(this);c7(this,a)}w($9,b7);$9.prototype.Zd=function(){return $9.C.Zd.call(this,!0)};$9.prototype.Fs=function(a){$9.C.Fs.call(this,a);BDa(this.P.La(!1))};$9.prototype.Eo=function(){$9.C.Eo.call(this);BDa(this.P.La(!1))};$9.prototype.sq=function(){return!1};function a$(){g0.call(this)}w(a$,g7);a$.prototype.W=function(a){return new qHa({source:a})};a$.prototype.N=function(){return new $9(void 0)};a$.prototype.vd=function(){return null};function b$(){C.call(this);this.j=[];this.g=[];this.l=L.s();this.B=vg.s();this.o=new ij(this.I.bind(this));this.A=new CI(this.G,1500,this)}w(b$,C);xa(b$);var rHa=E.V("plugin.track.TrackManager");b$.prototype.J=function(){z(this.o);this.o=void 0;z(this.A);this.A=void 0;this.j.forEach(function(a){yf(a,"change",this.u,this)},this);this.j.length=0;this.g.length=0;this.B=this.l=void 0;b$.C.J.call(this)};
function sHa(a,b){b.forEach(function(a){a&&!gb(this.j,a)&&(this.j.push(a),H(a,"change",this.u,this))},a)}function tHa(a,b){b.forEach(function(a){if(a){yf(a,"change",this.u,this);ob(this.j,function(b){return b===a});ob(this.g,function(b){return b===a});for(var b=0;b<this.g.length;b++)this.g[b]==a&&nb(this.g,b)}},a)}b$.prototype.u=function(){var a=WJ(this.B),b=Fy.N("track");if(b)for(a=new qg(a.start,a.end),this.g=xg(b.o,a,!1,!1),b=0;b<this.g.length;b++)gb(this.j,this.g[b])||nb(this.g,b);this.A.Pd()};
b$.prototype.G=function(){this.o&&this.o.start(100,5E3)};b$.prototype.I=function(){try{var a=T(this.l.X());if(!a||!qs(a))return!1;var b=a.bb(),c=RB(this.l);if(Xk(c,Qn))return!1;if(this.l.X().j){var d=this.g;a=[];if(d)for(var e=0;e<d.length;e++){var f=d[e].get("_currentPosition");f&&a.push(f.getCoordinates())}var h=Nk(a);al(h)||Tk(Qk(c,-2),h)||this.l.Pi(h,5,Lq(this.l,b))}}catch(k){E.error(rHa,"Error checking if map was ready:",k)}return!0};Q.directive("confirmtrack",[function(){return{restrict:"E",templateUrl:"v1541734487/views/plugin/track/confirmtrack.html",controller:c$,controllerAs:"confirm"}}]);function c$(a){var b=X6();this.tracks=b?b.La():[];this.track=this.tracks[0]||void 0;a.$watch("confirm.track",function(b){a.$parent.confirmValue=b});a.$emit("window.ready")}c$.$inject=["$scope"];c$.prototype.JE=function(a){var b=a.get("name");return b?b:"Unnamed Track (id ="+a.D()+")"};c$.prototype.getTrackName=c$.prototype.JE;
function uHa(){return new Kc(function(a,b){fx({label:"Choose a Track",icon:"fa fa-share-alt",x:"center",y:"center",width:300,"min-width":200,"max-width":1200,height:"auto",modal:"true","show-close":"false","no-scroll":"true"},"<confirm><confirmtrack></confirmtrack></confirm>",void 0,void 0,void 0,{confirmCallback:a,cancelCallback:b,yesText:"OK",yesIcon:"fa fa-check",yesButtonClass:"btn-primary",noText:"Cancel",noIcon:"fa fa-ban",noButtonClass:"btn-secondary"})})};function vHa(a){return a&&1==a.length&&a[0]instanceof ev&&(a=a[0].W(),a instanceof Vz&&"track"!==a.D()&&(a=a.N(),a instanceof Rz))?0<a.dg():!1}function wHa(a){this.visible=vHa(a)}function xHa(a){var b=X6();this.visible=null!=b&&l2(b)&&vHa(a)}function yHa(a){var b;if(b=!!a)b=a?0<d$(a).length&&!zHa(a):!1;this.visible=b}function AHa(a){this.visible=!!a&&0<d$(a).length&&zHa(a)}
function zHa(a){if(a){var b=b$.s();a=d$(a);if(0<a.length){a:{for(var c=0;c<a.length;c++)if(!gb(b.j,a[c])){b=!1;break a}b=!0}return b}}return!1}function BHa(a){return a&&0<a.length?a.filter(function(a){return a instanceof k2&&null!=a.getFeature()&&a.Ha()===X6()}):null}function CHa(a){if(a=a.getContext())a=d$(a),0<a.length&&sHa(b$.s(),a)}function DHa(a){if(a=a.getContext())a=d$(a),0<a.length&&tHa(b$.s(),a)}
function d$(a){var b=[];if(a)if(a.feature&&iDa(a.feature))b.push(a.feature);else if(q(a)&&1===a.length){var c=BHa(a);c.length===a.length&&b.push(c[0].getFeature())}else if(kg(a,"os.source.Vector"))for(a=a.ee.slice(),c=0;c<a.length;c++)iDa(a[c])&&b.push(a[c]);return b}
function EHa(a){var b=fv(a.getContext());b=1===b.length?b[0]:void 0;if(b instanceof iu){var c=b.N();if(c){var d=c.ee.slice();0==d.length&&(d=c.La());if(0<d.length)switch(a.type){case "track:create":a=b.S()+" Track";yDa(a).then(function(a){wDa(d[0]).then(function(b){b={features:d,name:a,hO:b};var c=nDa(b);if(c){c=n2({feature:c});var e=X6(!0);e?(c=new f2(c,e),c.title="Create track from "+b.features.length+" features",AE(OE.s(),c)):E.error(W6,"Unable to create track: track layer missing")}else rj(tj,
"Track creation failed. There were no valid features to create a track from.",Rh)})});break;case "track:addTo":uHa().then(function(a){if(a){var b=d,c=a.get("_sortField");if(c){var e=mDa(b,c);c=b.length-e.length;if(e.length){var l=a.get("_originalGeometry")||a.Z();l.toLonLat();var m=l;if(m instanceof Jo)l=m;else{l=m.flatCoordinates.slice();var n=m.layout,p=m.stride;m=m.zd();for(var r=m.length;r--;){var u=m[r];l[u-p]!==l[u]&&360!==Math.abs(l[u-p])+Math.abs(l[u])||l[u-p+1]!==l[u+1]||!(3>p||l[u-p+2]===
l[u+2])||l.splice(u-p,p)}p=new Jo([],n);Ko(p,n,l);l=p}Ap(l);n=l.flatCoordinates;p=l.stride;for(m=0;m<e.length;m++)r=e[m],u=So(n,r[r.length-1],p,p-1),0>u?lb(n,r,~u):c++}c<b.length&&(b=l,b.toLonLat(),b=oq(b),Ap(b),b.set("_normalized",!0),sDa(a),a.set("_originalGeometry",b),Ps(a),Z6(a,!0),$6(a),rDa(a),Y6(a),b.set("_dirty",!0),a.dispatchEvent(new K("change:originalGeometry")));c&&E.info(W6,"Skipped "+c+" features due to missing/duplicate sort value.")}else E.error(W6,"Unable to add features to track: track is missing sorting data.")}})}}}}
;function e$(){Kg.call(this);this.id="track"}w(e$,Kg);xa(e$);
e$.prototype.init=function(){var a=AZ;a&&!a.Ha().find("track:create")&&(a=a.Ha().find("Tools"),a.R({label:"Create Track",eventType:"track:create",tooltip:"Creates a new track by linking selected features (or all features if none are selected) in time order.",da:['<i class="fa fa-fw fa-share-alt"></i>'],qa:"track.create-layer",Aa:wHa,za:EHa}),a.R({label:"Add to Track...",eventType:"track:addTo",tooltip:"Adds selected features (or all features if none are selected) to an existing track.",da:['<i class="fa fa-fw fa-share-alt"></i>'],
qa:"track.addTo-layer",Aa:xHa,za:EHa}),a.R({label:"Follow Track",eventType:"track:followTrack",tooltip:"Follow the track as it animates.",da:['<i class="fa fa-fw fa-globe"></i>'],qa:"track.followTrack",Aa:yHa,za:CHa}),a.R({label:"Unfollow Track",eventType:"track:unfollowTrack",tooltip:"Cancel following the track during animation.",da:['<i class="fa fa-fw fa-globe"></i>'],qa:"track.unfollowTrack",Aa:AHa,za:DHa}));if(a=SP)a=a.Ha().find("Features"),a.R({eventType:"track:followTrack",label:"Follow Track",
tooltip:"Follow the track as it animates.",da:['<i class="fa fa-fw fa-globe"></i>'],sort:80,Aa:yHa,za:CHa}),a.R({eventType:"track:unfollowTrack",label:"Unfollow Track",tooltip:"Cancel following the track during animation.",da:['<i class="fa fa-fw fa-globe"></i>'],sort:90,Aa:AHa,za:DHa});Yf(Uf.s(),"track",a$)};function f$(a,b,c,d,e){this.u=a;this.A=b;this.B=c;this.G={unique:this.qB,contains:this.rD};this.I=e;zF.call(this,a[0]);this.title="Join Layer";this.j=null;this.o=Cg(d||"Joined Layer")}w(f$,zF);g=f$.prototype;
g.Fa=function(){if(AF(this)){this.state="executing";var a=this.u.map(this.zG,this);if(a){var b=g$(a[0].D()),c=b.N();this.j=c.D();b.Ta(this.o);c.Ta(this.o);b=h$(this.u);c.setColumns(FHa(a,b));var d=this.A.map(this.G[this.B]||this.qB),e=GHa(this.j),f=this.I;a=a.map(function(a,b){a=i$(a,f);return{data:0===b?a.map(e):a,Yl:0===b,TF:d[b]}});a=Zca(a,HHa(b));c.zc(a);this.state="success";return!0}}return!1};g.qB=function(a){return function(b){return b.get(a)}};
g.rD=function(a){this.g=[];return function(b,c){b=b.get(a);if(c&&-1==this.g.indexOf(b))this.g.push(b);else if(b){c=0;for(var d=this.g.length;c<d;c++){var e=this.g[c];if(e&&-1!=e.indexOf(b)||-1!=b.indexOf(e))return e}}return b}.bind(this)};function HHa(a){return function(b,c){var d=b.la,e=c.la,f;for(f in d)void 0===e[f]&&(e[f]=d[f]);if(a)for(d=b.get("sourceId"),e=c.get("sourceId"),b=[],d&&a[d]&&b.push(a[d]),e&&a[e]&&b.push(a[e]),d=0,e=b.length;d<e;d++)IHa(b[d],c);return c}}
g.zG=function(a){this.l=a;return this.N()};g.Db=function(){this.state="reverting";this.j&&L.s().removeLayer(this.j);this.state="ready";return!0};Q.directive("mappingcounter",[function(){return{restrict:"E",replace:!0,scope:{sourceIds:"="},templateUrl:"v1541734487/views/plugin/vectortools/mappingcounter.html",controller:j$,controllerAs:"ctrl"}}]);
function j$(a){this.v=a;this.columnMappingHelp="Column Associations will put data from associated columns on the chosen layers into a single column on the resulting layer. This is useful when the layers you are joining have sparse data of the same type that you wish to analyze together in the resulting layer.";this.mappingCount=0;this.g();yR.s().H("propertychange",this.g,!1,this);a.$on("$destroy",this.j.bind(this))}j$.$inject=["$scope"];
j$.prototype.j=function(){yR.s().M("propertychange",this.g,!1,this);this.L=this.v=null};j$.prototype.g=function(){this.mappingCount=0;var a=h$(this.v.sourceIds),b;for(b in a)this.mappingCount+=gc(a[b]);R(this.v)};j$.prototype.mG=function(){Fua("columnMappingSettings")};j$.prototype.launchColumnMappings=j$.prototype.mG;Q.directive("join",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/plugin/vectortools/join.html",controller:k$,controllerAs:"ctrl"}}]);
function k$(a,b){qS.call(this);this.v=a;this.L=b;this.j=a.sourceIds;this.name="Joined Layer";this.joinMethod="unique";this.chooseLayerHelp="Joining layers compares values in the chosen columns for each layer against the Primary Layer and combines features whose values match. If the values match, the feature from the other layer will be merged into the matching features in the Primary Layer.";this.joinMethodHelp="The Join Method determines how we compare values between columns.<ul><li> Exact Match: Joins two features when the value is exactly the same on both.</li><li> Contains: Joins two features when one value contains the other.</li>";
this.joinSources=this.j.map(JHa).sort(KHa);this.primarySource=this.joinSources[0].id;this.init();a.$on("$destroy",this.J.bind(this));a.$emit("window.ready")}w(k$,qS);k$.$inject=["$scope","$element"];g=k$.prototype;g.J=function(){k$.C.J.call(this);this.L=this.v=null};g.init=function(){k$.C.init.call(this);zk.get("$timeout")(this.Qd.bind(this))};g.xj=function(a){k$.C.xj.call(this,a);mb(this.j,a.D());this.Qd()};g.xr=function(a){try{var b=a.j}catch(c){return}b===LI&&this.Qd()};
g.Qd=function(){this.v.joinForm.$setValidity("featureCount",!0);for(var a=this.count=0,b=this.j.length;a<b;a++){var c=Fy.N(this.j[a]);c&&(this.count+=c.La().length)}0===this.count?(this.v.joinForm.$setValidity("featureCount",!1),this.popoverText="Nothing to join.",this.popoverTitle="No Features",this.featureCountText="Nothing to join."):2*this.count>CH()&&(this.v.joinForm.$setValidity("featureCount",!1),this.popoverText="Too many features!",this.popoverTitle="Too Many Features",this.featureCountText=
"This join would result in too many features for OpenSphere to handle. Reduce the number of features you are joining and try again.");R(this.v)};g.close=function(){kx(this.L)};k$.prototype.close=k$.prototype.close;
k$.prototype.accept=function(){var a=this.joinSources.map(function(a){return a.id}),b=this.joinSources.map(function(a){return a.joinColumn.field}),c=a.indexOf(this.primarySource),d=a.splice(c,1);a=d.concat(a);d=b.splice(c,1);b=d.concat(b);a=new f$(a,b,this.joinMethod,this.name);AE(OE.s(),a);this.close()};k$.prototype.accept=k$.prototype.accept;function JHa(a){a=Fy.N(a);return{id:a.D(),title:a.S(),cols:a.getColumns().sort(LHa)}}function LHa(a,b){return Lb(a.name,b.name)}
function KHa(a,b){return Lb(a.title,b.title)};function MHa(a,b){this.g=a;this.state="ready";this.title="Merge Layers";this.j="";this.l=Cg(b||"Merged Layer")}g=MHa.prototype;g.state="ready";g.nb=!1;g.title="Merge layers";g.Ba=null;function NHa(a){for(var b=Array(a.g.length),c=0;c<a.g.length;c++)b[c]=Fy.N(a.g[c]);return b}
g.Fa=function(){if("ready"!==this.state){this.Ba="Command not in ready state.";var a=!1}else NHa(this)?a=!0:(this.state="error",a=!1);if(a&&(this.state="executing",(a=NHa(this))&&0<a.length)){var b=g$({timeEnabled:!0}),c=b.N();this.j=c.D();b.Ta(this.l);c.Ta(this.l);b=h$(this.g);c.setColumns(FHa(a,b));for(var d=[],e=0;e<a.length;e++){var f=a[e];if(f)for(var h=i$(f,void 0),k=null,l=b[f.D()],m=0;m<h.length;m++){var n=h[m];if(n){k||(k=Hy(n,f));var p=n,r=k;n=p.clone();n.ga(J(n));var u=p.get("_style")||
r||Sy;r=yz(p,u,r);n.set("_style",r);if(u=Jy(p))u==Ky&&(u=xz(r)?"Icon":"Point"),u=u.replace(/^Selected /,""),n.set("shape",u);if(p=Ly(p))p==Ky&&(p=xz(r)?"Icon":"Point"),p=p.replace(/^Selected /,""),n.set("centerShape",p);l&&IHa(l,n);n.get("CONTRIBUTING_SOURCE")||n.set("CONTRIBUTING_SOURCE",f.S(!0),!0);d.push(n)}}}PJ(c,"CONTRIBUTING_SOURCE");c.zc(d);this.state="success";return!0}return!1};g.Db=function(){this.state="reverting";L.s().removeLayer(this.j);this.state="ready";return!0};Q.directive("merge",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/plugin/vectortools/merge.html",controller:l$,controllerAs:"ctrl"}}]);function l$(a,b){qS.call(this);this.v=a;this.L=b;this.j=a.sourceIds;this.name="New Layer";this.featureCountText="";this.init();a.$on("$destroy",this.J.bind(this));a.$emit("window.ready")}w(l$,qS);l$.$inject=["$scope","$element"];g=l$.prototype;g.J=function(){l$.C.J.call(this);this.L=this.v=null};
g.init=function(){l$.C.init.call(this);zk.get("$timeout")(this.Qd.bind(this))};g.xj=function(a){l$.C.xj.call(this,a);mb(this.j,a.D());this.Qd()};g.xr=function(a){try{var b=a.j}catch(c){return}b===LI&&this.Qd()};
g.Qd=function(){this.v.mergeForm.$setValidity("featureCount",!0);for(var a=this.count=0,b=this.j.length;a<b;a++){var c=Fy.N(this.j[a]);c&&(this.count+=c.La().length)}0===this.count?(this.v.mergeForm.$setValidity("featureCount",!1),this.popoverText="Nothing to merge.",this.popoverTitle="No Features",this.featureCountText="Nothing to merge."):2*this.count>CH()&&(this.v.mergeForm.$setValidity("featureCount",!1),this.popoverText="Too many features!",this.popoverTitle="Too Many Features",this.featureCountText=
"This merge would result in too many features for OpenSphere to handle. Reduce the number of features you are merging and try again.");R(this.v)};g.close=function(){kx(this.L)};l$.prototype.close=l$.prototype.close;l$.prototype.accept=function(){var a=new MHa(this.j,this.name);AE(OE.s(),a);this.close()};l$.prototype.accept=l$.prototype.accept;var OHa=1;function i$(a,b){b=b||OHa;switch(b){case 0:return a.La();case 1:return a.Zd();case 2:return a.ee.slice();case 3:return mja(a);case 4:return lja(a);default:return[]}}function GHa(a){return function(b){b=b.clone();b.hc=!1;b.set("sourceId",a,!1);b.kf("_selectStyle",!1);b.kf("_highlightStyle",!1);b.hc=!0;return b}}
function g$(a){var b=L.s(),c=Vb(),d=new Rz;d.ga(c);var e=new Vz({source:d});e.ga(c);d.Ta(e.S());eM(b,e);if(a)if("string"===typeof a){if(a=b.W(a))e.restore(a.ra()),a=Cg(a.S()),e.Ta(a),d.Ta(a)}else e.restore(a);return e}
function h$(a){function b(a,b){k?(b.layer in a||(a[b.layer]={}),a[b.layer][b.column]=k):k=b.column;return a}function c(b){var c=h.indexOf(b.layer);return{column:b.column,layer:a[c],unit:b.unit}}function d(a,b){a=h.indexOf(a.layer);b=h.indexOf(b.layer);return xb(a,b)}function e(a){return-1<h.indexOf(a.layer)}function f(a,b){return-1<h.indexOf(b.layer)?a+1:a}var h=a.map(PHa),k=null;return JG(yR.s()).filter(function(a){return 1<a.getColumns().reduce(f,0)}).reduce(function(a,f){k=null;return f.getColumns().filter(e).map(c).sort(d).reduce(b,
a)},{})}function PHa(a){var b=Y.Ka(a);return b&&F(b,"os.filter.IFilterable")?b.uf():a}function IHa(a,b){if(a)for(var c in a){var d=a[c];void 0===b.get(d)&&(b.set(d,b.get(c),!0),b.kf(c))}}
function FHa(a,b){return a.reduce(function(a,b){return a.concat(b.getColumns().filter(function(b){if("string"===typeof b)return-1===a.indexOf(b);for(var c=0,d=a.length;c<d;c++)if("string"!==typeof a[c]&&a[c].field===b.field)return!1;return!0}))},[]).filter(function(a){a="string"===typeof a?a:a.field;for(var c in b){var e=b[c];if(a in e&&a!==e[a])return!1}return!0}).map(function(a){return a.clone()})};function m$(a,b){zF.call(this,a);this.title="Copy Layer";this.g="";this.j=b}w(m$,zF);m$.prototype.Fa=function(){if(AF(this)){this.state="executing";var a=this.N();if(a instanceof Rz){var b=g$(a.D()).N();this.g=b.D();var c=GHa(this.g);a=i$(a,this.j);b.zc(a.map(c));this.state="success";return!0}}return!1};m$.prototype.Db=function(){this.state="reverting";L.s().removeLayer(this.g);this.state="ready";return!0};function n$(){Kg.call(this);this.id="vectortools"}w(n$,Kg);xa(n$);
n$.prototype.init=function(){var a=AZ;if(a){var b=a.Ha().find("Tools"),c=["All","Shown","Selected","Unselected","Hidden"],d=1E3;[{label:"Copy",type:QHa,icon:"fa-copy",tooltip:"Creates a static copy of the layer"},{label:"Merge",type:o$,icon:"fa-compress",tooltip:"Merges multiple layers into a new static layer"},{label:"Join",type:p$,icon:"fa-object-group",tooltip:"Joins layers by a primary key"}].forEach(function(a){for(var e=b.R({label:a.label,type:"submenu",da:['<i class="fa fa-fw '+a.icon+'"></i>'],
sort:d++}),h=0,k=c.length;h<k;h++)e.R({label:c[h],eventType:a.type+" "+h,tooltip:a.tooltip,da:['<i class="fa fa-fw '+a.icon+'"></i>'],Aa:RHa,za:SHa,sort:h})})}};var QHa="layer.copy",o$="layer.merge",p$="layer.join";function RHa(a){this.visible=!1;a&&0<a.length&&(this.visible=a.every(function(a){return a instanceof ev?(a=a.W(),a instanceof Vz&&"draw"!==a.D()&&"Image"!==a.Sc()):!1}))}
function SHa(a){var b=a.type.split(/\s+/),c=b[0];1<b.length&&(OHa=parseInt(b[1],10));if((a=a.getContext())&&0<a.length)switch(c){case QHa:c=a.map(THa).filter($u).reduce(function(a,b){return a+b.La().length},0);if(2*c>CH()){c="Heads up! The copy you just attempted would result in too many features for the tool. Reduce the number of features in your layers before copying.";rj(qj.s(),c,Rh);break}else if(0===c){c="Nothing to copy.";rj(qj.s(),c,Th);break}c=a.map(UHa).filter($u);c.length&&(a=new $B,a.bc(c),
AE(OE.s(),a));break;case o$:case p$:a=a.map(VHa).filter($u),2>a.length?(c="You need to pick at least 2 layers for this operation. Please select another layer and try again.",rj(qj.s(),c,Rh)):c==o$?fx({label:"Merge "+a.length+" Layers",icon:"fa fa-compress","no-scroll":"true",x:"center",y:"center",width:"400",height:"auto","show-close":!0},"<merge></merge>",void 0,void 0,void 0,{sourceIds:a}):c==p$&&fx({label:"Join "+a.length+" Layers",icon:"fa fa-object-group","no-scroll":"true",x:"center",y:"center",
width:"500",height:"auto","show-close":!0},"<join></join>",void 0,void 0,void 0,{sourceIds:a})}}function VHa(a){return(a=dv(a))?a.D():void 0}function THa(a){if(a=dv(a))return Fy.N(a.D())||void 0}function UHa(a){return(a=dv(a))?new m$(a.D()):void 0};function q$(){Kg.call(this);this.id="weather"}w(q$,Kg);q$.prototype.init=function(){var a=WHa(),b=BU;a&&b&&(a=b.Ha().find("Coordinate"))&&(a.R({label:"Weather Forecast",eventType:"weather",tooltip:"Open the weather forecast for this location",da:['<i class="fa fa-fw fa-umbrella"></i>']}),b.H("weather",XHa))};function WHa(){var a=M.get(["weather","url"]);return a&&-1<a.indexOf("{lat}")&&-1<a.indexOf("{lon}")?a:null}
function XHa(a){a=a.getContext();var b=WHa();a=Ml(a,S);b&&(b=b.replace("{lon}",a[0].toString()),b=b.replace("{lat}",a[1].toString()),window.open(b,"_blank"))};function r$(a){a=a||{};var b=void 0!==a.projection?a.projection:"EPSG:3857";if(void 0!==a.tileGrid)var c=a.tileGrid;else{c={extent:nm(b),maxZoom:a.maxZoom,minZoom:a.minZoom,tileSize:a.tileSize};var d={};of(d,void 0!==c?c:{});void 0===d.extent&&(d.extent=Cl("EPSG:3857").Y());d.resolutions=mm(d.extent,d.maxZoom,d.tileSize);delete d.maxZoom;c=new Zl(d)}PH.call(this,{attributions:a.attributions,cacheSize:a.cacheSize,crossOrigin:a.crossOrigin,logo:a.logo,opaque:a.opaque,projection:b,reprojectionErrorThreshold:a.reprojectionErrorThreshold,
tileGrid:c,tileLoadFunction:a.tileLoadFunction,tilePixelRatio:a.tilePixelRatio,tileUrlFunction:a.tileUrlFunction,url:a.url,urls:a.urls,wrapX:void 0!==a.wrapX?a.wrapX:!0,transition:a.transition})}I(r$,PH);function s$(a){a.projection=void 0!==a.projection?a.projection:"EPSG:4326";this.o=a.zoomOffset||0;r$.call(this,a)}w(s$,r$);s$.prototype.Mb=function(a){a=this.urls=Zxa(a);this.xh(E0(bb(a,this.j,this)))};s$.prototype.ul=function(a){this.urls=a;this.xh(E0(bb(a,this.j,this)))};
s$.prototype.j=function(a){var b=/\{z\}|%z/g,c=/\{x\}|%x/g,d=/\{y\}|%y/g,e=/\{-y\}/g,f=this.o;return function(h){if(null!==h)return a.replace(b,(h[0]+f).toString()).replace(c,h[1].toString()).replace(d,(-h[2]-1).toString()).replace(e,function(){return((1<<h[0])-h[2]-1).toString()})}};function t$(){G0.call(this)}w(t$,G0);t$.prototype.N=function(a){a&&!a.tileSize&&(a.tileSize=512);a=fi(a);a.projection=this.projection;a.tileGrid=this.tileGrid;a.crossOrigin=this.crossOrigin;a.wrapX=this.projection.Th();return new s$(a)};function u$(){Kg.call(this);this.id="xyz"}w(u$,Kg);u$.prototype.init=function(){Yf(Uf.s(),"XYZ",t$)};function v$(a,b,c,d,e){mY.call(this,a,e,"v1541734487/","OpenSphere");this.Na=d;this.j=new ft(document);this.legend=this.timeline=!1;var f=f||document;f.addEventListener("mousedown",ED(HD));f.addEventListener("mouseup",ED(HD));f.addEventListener("contextmenu",ED(GD));ud&&qd&&Yd(document,"click",this.aN);od&&M.get(["showRedirect"],!0)&&(b=YHa+'<div class="mt-2">Detailed browser support can be found <a href="old.html">here</a>.</div><div class="form-check"><label class="form-check-label"><input type="checkbox" ng-model="mainCtrl.showRedirectChecked" class="form-check-input">Stop showing this message</label></div>',
gD({confirm:this.l.bind(this),cancel:ZHa,prompt:b,yesText:"Continue",noText:"",noIcon:"",windowOptions:{label:"Browser Not Supported",icon:"fa fa-frown-o",x:"center",y:"center",width:"400",height:"auto",modal:"true","no-scroll":"true",headerClass:"bg-warning u-bg-warning-text"}}));eka(sM.s());b=GM.s();JM(b,"Data filters for supported layers.");KM(b,"text/xml; subtype=FILTER",new fT);KM(b,"*/*",new gZ);jka(b,"os",gT);hT=zk.get("$sanitize");eB.s();xS.s();b=xS.s();UX(b,new FS);UX(b,new Uoa);UX(b,new toa);
UX(b,new Dq);UX(b,new Woa);UX(b,new yS);UX(b,new dpa);UX(b,new npa);UX(b,new Nna);UX(b,new bZ);UX(b,new gpa);b=gY.s();b.g||(b.g=new GR,b.g.Da("OpenSphere"),b.g.fb("This window displays many of the features available in OpenSphere, and if you have used them."),b.g.collapsed=!1,b.j.R(b.g));Yf(Uf.s(),"static",IT);Y=Fy=tF.s();Vva(lQ,new TS);RU=BX.s();PU(new NU("exclusionAreas","Exclusion Areas",CR,"Clear all exclusion query areas"));PU(new NU("queryEntries","Layer/Area/Filter query combinations",cxa,
"Clears all layer/area/filter query combinations"));PU(new NU("layers","Layers",DR,"Clear all layers except the defaults"));PU(new NU("mapPosition","Map Position",Goa,"Reset map position to the default"));PU(new NU("nonQueryFeatures","Non-query Features",Hoa,"Clears features in the Drawing Layer except for query features"));PU(new NU("queryAreas","Query Areas",BR,"Clear all spatial query areas"));PU(new NU("states","States",JZ,"Deactivate all states"));b=GU.s();b.B=C_;HU(b,new H_);b=iy.s();ky(b,new FT("instant"));
ky(b,new GT("instant"));ky(b,new HT("instant"));ky(b,new FT("start"));ky(b,new GT("start"));ky(b,new HT("start"));ky(b,new FT("end"));ky(b,new GT("end"));ky(b,new HT("end"));ky(b,new ET);ky(b,new kT);ky(b,new lT);ky(b,new sT);ky(b,new iT);ky(b,new xM);ky(b,new JJ);ky(b,new mT);ky(b,new KJ);ky(b,new LJ);b=QY.s();c=this.cF.bind(this);b.j=c;c=this.sv.bind(this);b.l=c;b=new aw({type:"root",children:[{label:"Box",eventType:"box",tooltip:"Draw a box for query, selection, and zoom",da:['<i class="fa fa-fw fa-square-o"></i> '],
za:HZ,sort:10},{label:"Circle",eventType:"circle",tooltip:"Draw a circle for query, selection, and zoom",da:['<i class="fa fa-fw fa-circle-o"></i> '],za:HZ,sort:20},{label:"Polygon",eventType:"polygon",tooltip:"Draw a polygon for query, selection, and zoom",da:['<i class="fa fa-fw fa-star-o"></i> '],za:HZ,sort:30},{label:"Choose Area",eventType:"chooseArea",tooltip:"Load data for a specific area",da:['<i class="fa fa-fw fa-list-ul"></i> '],za:HZ,sort:110},{label:"Enter Coordinates",eventType:"enterCoordinates",
tooltip:"Enter coordinates to load data",da:['<i class="fa fa-fw fa-calculator"></i> '],za:HZ,sort:120},{label:"Whole World",eventType:"queryWorld",tooltip:"Load data for the whole world",da:['<i class="fa fa-fw fa-map-o"></i> '],za:HZ,sort:140}]});b.R({label:"drawMenuSeparator",type:"separator",sort:100});GZ=new px(b);if(b=sZ.Ha().find("enable"))b.Aa=tZ(cwa);if(b=sZ.Ha().find("disable"))b.Aa=tZ(bwa);if(b=sZ.Ha().find("filter:apply"))b.Aa=tZ(ewa);if(b=sZ.Ha().find("filter:unapply"))b.Aa=tZ(dwa);if(b=
sZ.Ha().find(qK))b.Aa=tZ(fwa);if(b=sZ.Ha().find("filter:remove"))b.Aa=tZ(fwa);sZ.H("enable",wZ);sZ.H("disable",wZ);sZ.H("filter:apply",wZ);sZ.H("filter:unapply",wZ);sZ.H("filter:remove",wZ);sZ.H(qK,wZ);IZ||(IZ=new px(new aw({type:"root",children:[{label:"",eventType:"Major",type:"group",sort:0,children:[{label:"Add Data",eventType:"openwindow.addData",tooltip:"Browse the data catalog",da:['<i class="fa fa-fw fa-plus"></i>'],za:YX,qa:"addData.open",sort:0},{label:"Open File or URL",eventType:"importFile",
tooltip:"Import data from a local file or a URL",da:['<i class="fa fa-fw fa-folder-open"></i>'],Bg:(Bi()?"cmd":"ctrl")+"+o",qa:"addData.import",sort:1}]},{label:"",eventType:"Minor",type:"group",sort:1},{label:"Recent",eventType:"Recent",type:"group",Aa:swa,sort:2}]})));BU||(BU=new px(new aw({type:"root",children:[{label:"Map",type:"group",children:[{label:"Reset View",eventType:"resetView",tooltip:"Resets to the default view",da:['<i class="fa fa-fw fa-picture-o"></i>'],Bg:"V",sort:10,qa:"map.contextMenu.resetView"},
{label:"Reset Rotation",eventType:"resetRotation",tooltip:"Resets to the default rotation",da:['<i class="fa fa-fw fa-compass"></i>'],Bg:"R",sort:20,qa:"map.contextMenu.resetRotation"},{label:"Toggle 2D/3D View",eventType:"toggleView",tooltip:"Toggle the map view between 2D and 3D views",da:['<i class="fa fa-fw fa-globe"></i>'],sort:30,qa:"map.features.toggleMode"},{label:"Show Legend",eventType:"showLegend",tooltip:"Display the map legend",da:['<i class="fa fa-fw fa-map-signs"></i>'],sort:50,za:ira,
qa:"map.features.showLedgendContext"},{label:"Clear Selection",eventType:rK,tooltip:"Clears the selected features across all layers",da:['<i class="fa fa-fw fa-times-circle"></i>'],sort:60,za:jra,qa:"map.features.clearSelection"}]},{label:"Options",type:"group",sort:5,children:[{label:"Background Color",eventType:"bgColor",tooltip:"Change the map background color",da:[],Aa:hra,za:kra,qa:"map.features.setBackGroundColor"},{label:"Terrain",eventType:"os.map.enableTerrain",type:"check",tooltip:"Show terrain on the 3D globe",
Aa:mra,za:nra}]},{label:"Coordinate",type:"group",visible:!1,sort:10,children:[],Aa:gra}]})));AZ||(AZ=new px(new aw({type:"root",children:[{label:"Layer",type:"group",sort:BZ++,children:[{label:"Go To",eventType:vH,tooltip:"Repositions the map to show the layer",da:['<i class="fa fa-fw fa-fighter-jet"></i>'],Aa:DZ,za:mwa,qa:"layers.contextMenu.featureLayer.goTo",sort:CZ++},{label:"Identify",eventType:uH,tooltip:"Identifies a layer on the map",da:['<i class="fa fa-fw fa-eye"></i>'],Aa:DZ,za:nwa,qa:"layers.contextMenu.identify",
sort:CZ++},{label:"Clear Selection",eventType:rK,tooltip:"Clears the selection for the layer",da:['<i class="fa fa-fw fa-times-circle"></i>'],Aa:DZ,za:EZ,qa:"layers.contextMenu.featureLayer.clearSelection",sort:CZ++},{label:"Add to Timeline",eventType:WL,tooltip:"Enables layer animation when the timeline is open",da:['<i class="fa fa-fw fa-clock-o"></i>'],Aa:DZ,za:EZ,sort:CZ++},{label:"Remove From Timeline",eventType:VL,tooltip:"Disables layer animation when the timeline is open",da:['<i class="fa fa-fw fa-clock-o"></i>'],
Aa:DZ,za:EZ,sort:CZ++},{label:"Most Recent",eventType:RH,tooltip:"Adjusts application time to show the most recent data for the layer",da:['<i class="fa fa-fw fa-fast-forward"></i>'],Aa:DZ,za:EZ,qa:"layers.contextMenu.mostRecent",sort:CZ++},{label:"Refresh",eventType:yH,tooltip:"Refreshes the layer",da:['<i class="fa fa-fw fa-refresh"></i>'],Aa:DZ,za:EZ,qa:"layers.contextMenu.refresh",sort:CZ++},{label:"Clear Auto/Manual Color",eventType:ZL,tooltip:"Clears auto/manual coloring rules, resetting all features to the layer color",
da:['<i class="fa fa-fw fa-tint"></i>'],Aa:DZ,za:EZ,qa:"layers.contextMenu.resetColor",sort:CZ++},{label:"Lock",eventType:XL,tooltip:"Lock the layer to prevent data from changing",da:['<i class="fa fa-fw fa-lock"></i>'],Aa:DZ,za:EZ,qa:"layers.contextMenu.lock",sort:CZ++},{label:"Unlock",eventType:YL,tooltip:"Unlock the layer and refresh its data",da:['<i class="fa fa-fw fa-unlock-alt"></i>'],Aa:DZ,za:EZ,qa:"layers.contextMenu.unlock",sort:CZ++},{label:"Remove",eventType:xH,tooltip:"Removes the layer",
da:['<i class="fa fa-fw fa-times"></i>'],Aa:DZ,za:EZ,qa:"layers.contextMenu.remove",sort:CZ++},{label:"Rename",eventType:wH,tooltip:"Rename the layer",da:['<i class="fa fa-fw fa-i-cursor"></i>'],Aa:DZ,za:EZ,qa:"layers.contextMenu.rename",sort:CZ++},{label:"Show Description",eventType:SH,tooltip:"Gives details about the layer",da:['<i class="fa fa-fw fa-newspaper-o"></i>'],Aa:DZ,za:kwa,qa:"layers.contextMenu.showDescription",sort:CZ++}]},{label:"Tools",type:"group",sort:BZ++,children:[{label:"Export...",
eventType:qK,tooltip:"Repositions the map to show the layer",da:['<i class="fa fa-fw fa-download"></i>'],Aa:DZ,za:lwa,qa:"layers.contextMenu.export",sort:-1E3}]}]})));NZ||(NZ=new px(new aw({type:"root",children:[{label:"State",eventType:"state:save",tooltip:"Save the application state",da:['<i class="fa fa-fw fa-bookmark"></i>'],za:Awa,qa:"map.features.saveState",Bg:"Ctrl+S",sort:10}]})));b=SP;b||(b=SP=new rQ(new aw({type:"root",Aa:Dna,children:[{label:"Query",type:"group",sort:10,children:[{label:"Load",
eventType:"load",tooltip:"Clear queries, then query for this area for all layers",da:['<i class="fa fa-fw fa-circle-o"></i>'],sort:0,Aa:wQ},{label:"Add",eventType:"add",tooltip:"Add a query for this area for all layers",da:['<i class="fa fa-fw fa-plus-circle"></i>'],sort:1,Aa:wQ}]},{label:"Exclude",type:"group",sort:20,children:[{label:"Set",eventType:"exclude",tooltip:"Clear exclusions, then add an exclusion area for all layers",da:['<i class="fa fa-fw fa-ban"></i>'],sort:0,Aa:wQ},{label:"Add",eventType:"add_exclude",
tooltip:"Add an exclusion area for all layers",da:['<i class="fa fa-fw fa-minus-circle"></i>'],sort:1,Aa:wQ}]},{label:"Features",type:"group",sort:30,children:[{label:"Feature Info",eventType:"featureInfo",tooltip:"Show detailed metadata for the feature",da:['<i class="fa fa-fw fa-info-circle"></i>'],sort:10,Aa:wna},{label:"Select",eventType:sK,tooltip:"Select features in this area",da:['<i class="fa fa-fw fa-check-circle"></i>'],sort:20,Aa:wQ},{label:"Select Exclusive",eventType:tK,tooltip:"Select only features in this area, deselecting features outside of the area",
da:['<i class="fa fa-fw fa-check-circle"></i>'],sort:30,Aa:wQ},{label:"Deselect",eventType:uK,tooltip:"Deselect features in this area",da:['<i class="fa fa-fw fa-times-circle"></i>'],sort:40,Aa:wQ},{label:"Remove Features in Area",eventType:wK,tooltip:"Remove features in this area from the map",da:['<i class="fa fa-fw fa-times"></i>'],sort:50,Aa:wQ},{label:"Remove",tooltip:"Remove the feature from the layer",da:['<i class="fa fa-fw fa-times"></i>'],sort:60,za:yna,Aa:wna}]},{label:"Tools",type:"group",
sort:40,children:[{label:"Zoom",eventType:"zoom",tooltip:"Zoom the map to the feature(s)",da:['<i class="fa fa-fw fa-crop"></i>']},{label:"Modify Area...",eventType:"area:modify",tooltip:"Modify the area",da:['<i class="fa fa-fw fa-edit"></i>'],Aa:zna}]},{label:"Area",type:"group",sort:50,children:[{label:"Save Area...",eventType:"save",tooltip:"Save the area for future use",da:['<i class="fa fa-fw fa-save"></i>'],sort:10,Aa:Ana},{label:"Edit Area Details...",eventType:"edit",tooltip:"Edit area information such as title/description",
da:['<i class="fa fa-fw fa-pencil"></i>'],sort:20,Aa:yQ},{label:"Enable Area",eventType:"enable",tooltip:"Enable the area",da:['<i class="fa fa-fw fa-check-square-o"></i>'],sort:30,Aa:Cna},{label:"Disable Area",eventType:"disable",tooltip:"Disable the area",da:['<i class="fa fa-fw fa-square-o"></i>'],sort:40,Aa:Bna},{label:"Export...",eventType:qK,tooltip:"Export the area",da:['<i class="fa fa-fw fa-download"></i>'],sort:50,Aa:yQ},{label:"Merge...",eventType:"area:merge",tooltip:"Merge selected areas into a new area",
da:['<i class="fa fa-fw fa-link"></i>'],sort:60,Aa:vna},{label:"Remove Area",eventType:"removeArea",tooltip:"Remove the area",da:['<i class="fa fa-fw fa-times"></i>'],sort:70,Aa:yQ}]}]})),b.H("load",zQ),b.H("add",zQ),b.H("exclude",zQ),b.H("add_exclude",zQ),b.H("featureInfo",zQ),b.H("save",zQ),b.H("edit",zQ),b.H("enable",zQ),b.H("disable",zQ),b.H("removeArea",zQ),b.H("area:modify",zQ),b.H("area:merge",zQ),b.H(qK,zQ));if(b=QZ){c=b.Ha();e=au.s();d=e.l;e=e.g;f=0;var h=100,k;for(k in d){var l=d[k].distance;
if(l){var m=l.wf();l=l.S();var n=-1<l.indexOf("Only")?h++:f++;c.R({eventType:m,label:l,tooltip:"Switches to "+l,da:['<i class="fa fa-fw '+(m==e?"fa-check-circle-o":"fa-circle-o")+'"></i>'],sort:n,qa:aga["UNITS_"+m.toUpperCase()],Aa:Kwa});b.H(m,Jwa)}}100<h&&c.R({type:"separator",sort:99})}OZ.H("timeline.select",PZ);OZ.H("timeline.selectExclusive",PZ);OZ.H("timeline.deselect",PZ);OZ.H("timeline.load",Bwa);OZ.H("timeline.add",Cwa);OZ.H("timeline.slice",Dwa);OZ.H("timeline.zoom",Ewa);OZ.H("timeline.animate",
Gwa);OZ.H("timeline.animateSkip",Hwa);OZ.H("timeline.animateHold",Fwa);OZ.H("timeline.remove",PZ);OZ.H("timeline.activeWindow",Iwa);KZ||(KZ=new px(new aw({type:"root",children:[{label:"Import State",eventType:"importFile",tooltip:"Import a state from a local file or a URL",da:['<i class="fa fa-fw fa-cloud-download"></i>'],qa:"map.features.importState",sort:100},{label:"Save State",eventType:"state:save",tooltip:"Save the application state",da:['<i class="fa fa-fw fa-floppy-o"></i>'],za:twa,qa:"map.features.saveState",
sort:101},{label:"Disable States",eventType:"state:clear",tooltip:"Disable all active application states",da:['<i class="fa fa-fw fa-times"></i>'],za:twa,qa:"map.features.clearState",sort:102}]})),Y.H("addDescriptor",MZ),Y.H("removeDescriptor",MZ),Y.H("updateDescriptor",MZ),N.H("descriptorActivated",MZ),N.H("descriptorDeactivated",MZ),LZ=new CI(uwa,50));(k=AZ)&&!k.Ha().find(pK)&&k.Ha().find("Tools").R({label:"Create Buffer Region...",eventType:pK,tooltip:"Create buffer regions around loaded data",
da:['<i class="fa fa-fw fa-dot-circle-o"></i>'],Aa:DZ,za:qwa,qa:"layers.contextMenu.createBuffer"});(k=BU)&&!k.Ha().find(pK)&&k.Ha().find("Coordinate").R({label:"Create Buffer Region...",eventType:pK,tooltip:"Create a buffer region around the clicked coordinate",da:['<i class="fa fa-fw fa-dot-circle-o"></i>'],za:pwa});(k=SP)&&k.Ha().find("Tools").R({eventType:pK,label:"Create Buffer Region...",tooltip:"Create a buffer region from the feature(s)",da:['<i class="fa fa-fw fa-dot-circle-o"></i>'],Aa:owa,
za:rwa});Mwa();Tva=SP;bia({render:xpa,priority:-100,settingsUI:"colormodellegendsettings",defaultSettings:{showAuto:!1,showManual:!0,showColumn:!0}});k=L.s();k.G=ora;k.B=wpa;k.Ua("map:ready",this.JK,!1,this);On=L.s();OC=iba=EE.s();TG=jba=xQ.s();lE=kba=mH.s();zY=new px(new aw({type:"root",children:[{label:"Import File/URL",eventType:"query:importFile",tooltip:"Import areas from a file or URL",da:['<i class="fa fa-fw fa-cloud-download"></i>'],za:AY,sort:1},{label:"Enter Coordinates",eventType:"query:enterCoordinates",
tooltip:"Enter coordinates to load data for a box, circle, or polygon",da:['<i class="fa fa-fw fa-calculator"></i>'],za:AY,sort:2},{label:"Whole World",eventType:"query:queryWorld",tooltip:"Load data for the whole world",da:['<i class="fa fa-fw fa-map-o"></i>'],za:AY,sort:3}]}));We=new GM;JM(We,"Data filters for supported layers.");KM(We,"text/xml; subtype=FILTER",new fT);Xe=new sM;yR.s();a.$on("windowClose",this.zK.bind(this));a.$on("windowDragStart",this.Lx.bind(this));a.$on("windowDragStop",this.Lx.bind(this));
this.Sr()}w(v$,mY);v$.$inject=["$scope","$element","$compile","$timeout","$injector"];var $Ha=E.V("os.MainCtrl");g=v$.prototype;
g.destroy=function(){this.Tr();z(IZ);IZ=void 0;var a=AZ;(a=a?a.Ha().find("Tools"):void 0)&&a.removeChild(pK);(a=BU)&&(a=a.Ha().find("Coordinate"))&&a.removeChild(pK);(a=SP)&&(a=a.Ha().find("Tools"))&&a.removeChild(pK);z(zY);zY=void 0;z(GZ);GZ=void 0;sZ&&sZ.dispose();z(BU);BU=void 0;z(AZ);AZ=void 0;z(NZ);NZ=void 0;z(SP);SP=void 0;OZ&&OZ.dispose();z(QZ);QZ=void 0;z(KZ);KZ=void 0;z(LZ);LZ=void 0;this.Na=this.v=null};
g.zK=function(a,b){if(a=b.find("iframe")){b=0;for(var c=a.length;b<c;b++){var d=void 0;try{d=new Event("beforeunload")}catch(e){d=document.createEvent("Event"),d.initEvent("beforeunload",!0,!0)}a[b].contentWindow.dispatchEvent(d)}}};
g.Sr=function(){v$.C.Sr.call(this);eG();M.H("time.offset",Kga);Fk("nav-top-header","os-nav-top",100);Fk("nav-top-left","add-data-button",100);Fk("nav-top-left","layers-button",200);Fk("nav-top-left","os-draw-controls",300);Fk("nav-top-left","measure-button",400);Fk("nav-top-left","clear-button",500);Fk("nav-top-center","date-panel",1);Fk("nav-top-right","save-button",200);Fk("nav-top-right","state-button",300);Fk("nav-top-right",'<search-box show-clear="true"></search-box>',900);Fk("nav-top-right",
"help",1E3);Fk("nav-bottom-left",'<li id="zoom-level" class="nav-item mr-1 my-auto flex-shrink-0"></li>',100);Fk("nav-bottom-left","<scale-line></scale-line>",200);Fk("nav-bottom-left",'<li id="mouse-position" class="nav-item mr-1 my-auto flex-shrink-0"></li>',300);Fk("nav-bottom-right","settings-button",100);Fk("nav-bottom-right","legend-button",200);Fk("nav-bottom-right","servers-button",300);Fk("nav-bottom-right","alert-button",400);Fk("nav-bottom-right","history-button",500);Fk("nav-bottom-right",
"mute-button",600);var a=YQ.s(),b=Bi()?91:17;$Q(a,"General Controls",0,"Save State",[b,"+",83]);$Q(a,"General Controls",0,"Undo",[b,"+",90]);$Q(a,"General Controls",0,"Redo",Bi()?[b,"+",16,"+",90]:[b,"+",89]);M.get("metrics.enabled",!1)&&(aY.Ha().R({eventType:"metrics",label:"OpenSphere Capabilities",tooltip:"Display the OpenSphere Capabilities",da:['<i class="fa fa-fw fa-cubes"></i>'],sort:135}),aY.H("metrics",iwa))};g.Vq=function(){Ai.Za(!1)};g.jx=function(){Ai.Za(!0)};
g.hA=function(){N.H("reset",this.Nx,!1,this);N.H("configureAndAddLayer",this.gx,!1,this);N.H("toggleUI",this.Ox,!1,this);N.H("importFile",this.Ym,!1,this);N.H("importUrl",this.Ym,!1,this)};g.Tr=function(){N.M("reset",this.Nx,!1,this);N.M("configureAndAddLayer",this.gx,!1,this);N.M("toggleUI",this.Ox,!1,this);N.M("importFile",this.Ym,!1,this);N.M("importUrl",this.Ym,!1,this)};
g.Cv=function(){Di.ga("opensphere");Di.Ta("OpenSphere");Di.Hg(new hZ);M.get("xtEnabled",!0)&&Di.init();localStorage.setItem("opensphere.url",location.pathname);localStorage.setItem("opensphere.xt",Di.D())};
g.au=function(){Tj(lf,new G4);Tj(lf,E8.s());Tj(lf,new S4);Tj(lf,new O1);Tj(lf,new Q1);Tj(lf,H3.s());Tj(lf,new r9);Tj(lf,new u$);Tj(lf,new L2);Tj(lf,new F7);Tj(lf,new J9);Tj(lf,new y9);Tj(lf,new K5);Tj(lf,new d6);Tj(lf,new S5);Tj(lf,new t6);Tj(lf,new n7);Tj(lf,new z7);Tj(lf,new q$);Tj(lf,new C9);Tj(lf,new P0);Tj(lf,S9.s());Tj(lf,U9.s());Tj(lf,n$.s());Tj(lf,Q7.s());Tj(lf,F9.s());Tj(lf,Y9.s());Tj(lf,e$.s());Tj(lf,t9.s())};
g.Yt=function(){hY(kf,new pra);hY(kf,new qra);hY(kf,new rra);hY(kf,new Ioa);hY(kf,new sra);hY(kf,new tra);hY(kf,new xra)};
g.kr=function(a){v$.C.kr.call(this,a);a=Y;try{var b=M.get(lF());if(b){var c=Date.now();if(b)for(var d=0,e=b.length;d<e;d++)try{var f=oF(a,b[d].dType);f&&(f.restore(b[d]),f.D()&&(isNaN(f.Mg)||f.Mg>c)&&pF(a,f))}catch(y){E.hb(a.log,"There was an error loading data descriptor #"+d)}}b=M;c=["providers","userProviders"];e=0;for(var h=c.length;e<h;e++){var k=b.get([c[e]]),l;for(l in k){var m=k[l];if("object"==typeof m){m.id=l;f=!0;"enabled"in m&&("string"===typeof m.enabled?f="true"==m.enabled.toLowerCase():
f=m.enabled);a:{d=a;var n=m.type;if(n){n=n.toLowerCase();if(n in d.l){var p=null,r=d.l[n].g;r.s?p=r.s():p=new r;var u=p;break a}E.hb(d.log,'No provider exists for type "'+n+'".')}u=null}u&&(u.ga(l),u.Wb(m),u.Za(f),u.Pe=0<e,qF(a,u),u.kc()&&u.load())}}}for(var v in cF)N.H(cF[v],a.Bs,!1,a)}catch(y){E.error($Ha,"failed restoring descriptors from settings",y)}h=Uw.s();Vw(h,new Pw);h.A.$on("$routeUpdate",h.l.bind(h));h.o=!0;h.l();Fk("main-content",'<searchresults parent="#js-main"></searchresults>',100);
$w(Ww.s(),"v1541734487/onboarding/intro.json");this.j.H("key",this.HK,!1,this)};g.Lx=function(a){var b=L.s().X();b&&("windowDragStart"==a.name?ts(T(b),1,1):ts(T(b),1,-1))};g.aN=function(a){Nd(a,1)&&a.preventDefault()};g.JK=function(){this.scope.$watch("mainCtrl.timeline",this.HN.bind(this));this.Yt();this.au();lf.init()};g.HN=function(){L.s().lf()};function aIa(a,b){b=b.bind(a);return a.Na.bind(a,b)}
g.HK=function(a){var b=a.target,c=Bi()?a.metaKey:a.ctrlKey;if(!document.querySelector(".modal-backdrop,.window-modal-bg")){if(b.tagName!=="INPUT".toString()&&b.tagName!=="TEXTAREA".toString())switch(a.keyCode){case 90:c&&(a.preventDefault(),aIa(this,a.shiftKey?this.Os:this.oB)());break;case 89:c&&(a.preventDefault(),aIa(this,this.Os)())}switch(a.keyCode){case 75:c&&(O(P.s(),"map.keyboard.search",1),a.preventDefault(),$(".search-box .search-query").focus());break;case 76:a.altKey&&(O(P.s(),"map.keyboard.openLayers",
1),YX("layers"));break;case 79:c&&(O(P.s(),"map.keyboard.generalImport",1),a.preventDefault(),N.dispatchEvent("importFile"));break;case 83:c&&(O(P.s(),"map.keyboard.saveState",1),a.preventDefault(),aV(),R(this.scope))}}};g.Nx=function(){nj++;OC.clear();TG.clear();TG.save();var a=new nh;xh(a,eB.s().clear());var b=yR.s();b.clear();xh(a,b.save());uh(a,mj,mj).callback()};g.Ym=function(a){a=null!=a?a:new Mw("importFile");var b=new TM;PM(b,a);OM(b)};
g.gx=function(a){if(a=a.l)if(q(a)){for(var b=[],c=0,d=a.length;c<d;c++){var e=vc(a[c]);e=new fM(e);b.push(e)}c=new TP;c.bc(b);c.title="Add "+a.length+(1==a.length?" layer.":" layers.");AE(OE.s(),c)}else a=a instanceof Object?a:vc(a),e=new fM(a),e.title="Add "+a.type+' Layer "'+a.title+'"',a.loadOnce?e.Fa():AE(OE.s(),e)};
g.Ox=function(a){a.id in this?a.value&&ix(a.id)?hx(a.id):(this[a.id]="boolean"===typeof a.value?a.value:null!=a.params?!0:!this[a.id],R(this.scope)):YX(a.id);a.qa&&O(P.s(),a.qa,1);a.params&&this.Na(function(){Ck(Ga(cfa,a.id,a.params))})};g.cF=function(a){if(a=a[0])a.path&&Bw?this.sv(Gw(a.path)):(a=Ew(a))&&uh(a,this.IK,this.GK,this)};g.IK=function(a){N.dispatchEvent(new Mw("importFile",a))};g.GK=function(a){a&&"string"===typeof a&&(E.error($Ha,a),rj(qj.s(),a,Qh))};
g.sv=function(a){N.dispatchEvent(new Mw("importUrl",a))};g.oB=function(){O(P.s(),"map.undo",1);var a=OE.s();E.ta(VE,"undo"+a.g);(a.j.length&&-1<a.g||-1<a.l)&&a.pl(a.l-1)};v$.prototype.undoCommand=v$.prototype.oB;v$.prototype.Os=function(){O(P.s(),"map.redo",1);var a=OE.s();E.ta(VE,"redo "+a.g);a.j.length&&a.g<a.j.length-1&&a.pl(a.l+1)};v$.prototype.redoCommand=v$.prototype.Os;var ZHa=void 0,YHa="Internet Explorer does not offer a satisfactory user experience and is unsupported by OpenSphere. The application may become unresponsive as a result, and we recommend using Google Chrome. <b>Continue at your own risk.</b>";
v$.prototype.l=function(){M.set(["showRedirect"],!this.showRedirectChecked)};function w$(a){this.g=a}g=w$.prototype;g.init=function(){return this.store?th(this.store.init(),this.ax,this):Dh("Storage is undefined")};g.ax=function(){};g.Vx=function(){var a=[];$a(this.g,function(b){a.push(this.store.get(b))},this);var b=new Eh(a,!1,!0,!1,void 0,this);uh(b,this.TK,this.SK,this);return b};g.TK=function(a){var b={user:{}},c=!0;$a(a,function(a,e){(c=c&&a[0])&&(b.user[this.g[e]]=a[1]||{})},this);return c?b:Dh("Failed to retrieve part or all of the settings")};
g.SK=function(){this.Jg=!1};function lca(a,b){var c=[];try{$a(a.g,function(a){c.push(this.store.set(a,b[a]||{},!0))},a);var d=new Eh(c,!1,!0,!1,void 0,a);th(d,a.RJ,a);return d}catch(e){return Dh("Failed to save settings: "+e.message)}}g.RJ=function(a){if(!db(a,function(a){return a[0]}))return Dh("Failed to save part or all of settings")};function Nj(a,b){return a.store?a.store.remove(b):Ch()}g.name="base class";g.Jg=!0;g.Om=!1;g.DB="local";g.cD=!1;function x$(a,b){this.g=a;this.store=new bB(bIa,"opensphere.settings",b)}w(x$,w$);F(x$,"os.config.storage.ISettingsStorage");F(x$,"os.config.storage.ISettingsReadableStorage");F(x$,"os.config.storage.ISettingsWritableStorage");var bIa="settings";x$.prototype.name="IndexedDb";function y$(a,b){Oh.call(this,a,b)}w(y$,Oh);F(y$,"os.storage.IMechanism");y$.prototype.Fy=function(){var a=[];Rg(this.we(!1),function(b){a.push(b)});return a};function z$(a,b){this.g=b;b=new Jh;if(b.g)try{b.g.setItem("__sak","1");b.g.removeItem("__sak");var c=!0}catch(d){c=!1}else c=!1;(c=c?b:null)||(c=new Kh("UserDataSharedStore"),c=c.g?c:null);this.j=new y$(c,a),this.store=new DA(this.j)}w(z$,w$);F(z$,"os.config.storage.ISettingsStorage");F(z$,"os.config.storage.ISettingsReadableStorage");F(z$,"os.config.storage.ISettingsWritableStorage");
z$.prototype.ax=function(){try{var a=this.j.get("settings");if(a){var b=ki(JSON.parse(a));$a(this.g,function(a){this.j.set(a,JSON.stringify(b[a]||{}))},this);this.j.remove("settings")}}catch(c){return Dh("Failed to migrate localStorage settings")}};z$.prototype.name="localStorage";function A$(){this.g=null;this.namespace=[]}A$.prototype.init=function(){var a=M.g;dj(a,new Zi(this.g));dj(a,new z$("opensphere",this.namespace));dj(a,new x$(this.namespace));M.Ua("initialized",this.o,!1,this);M.init()};A$.prototype.o=function(){M.Ua("loaded",this.u,!1,this);M.load()};function B$(){A$.call(this);this.j=this.l=null}w(B$,A$);B$.prototype.u=function(){ipa().then(function(){if(this.l&&this.j){var a=document.querySelector(this.l);angular.element(a).ready(t(function(){angular.bootstrap(a,[this.j]);M.H("theme",lpa,!1,this)},this))}},function(a){if("string"===typeof a)throw Error(a);throw Error("Failed loading application theme: unspecified error.");},this)};function cIa(){B$.call(this);this.l="#ng-app";this.j="os";this.namespace=["core","opensphere"];this.g=this.g||"config/settings.json"}w(cIa,B$);function C$(){this.g=Ia()}var D$=null;C$.prototype.set=function(a){this.g=a};C$.prototype.reset=function(){this.set(Ia())};C$.prototype.get=function(){return this.g};function E$(a){this.j=a||"";D$||(D$=new C$);this.l=D$}E$.prototype.g=!1;function dIa(a){a=new Date(a.j);return F$(a.getFullYear()-2E3)+F$(a.getMonth()+1)+F$(a.getDate())+" "+F$(a.getHours())+":"+F$(a.getMinutes())+":"+F$(a.getSeconds())+"."+F$(Math.floor(a.getMilliseconds()/10))}function F$(a){return 10>a?"0"+a:String(a)}function eIa(a,b){a=(a.j-b)/1E3;b=a.toFixed(3);var c=0;if(1>a)c=2;else for(;100>a;)c++,a*=10;for(;0<c--;)b=" "+b;return b}function G$(a){E$.call(this,a)}w(G$,E$);G$.prototype.g=!0;function H$(a,b){this.l=a||"";this.o=[];this.P=b||"";this.A=new oj(fIa);this.U=t(this.IC,this);this.O=new G$(this.P);this.K={};1!=this.G&&(this.G=!0,Re(),Qe.Hg(this.U));this.u="1"==gIa(this.l,"enabled");ra.setInterval(t(this.NN,this),7500)}var fIa=500;H$.prototype.g=null;H$.prototype.B=!1;var hIa=H$.prototype.G=!1;g=H$.prototype;g.lu=null;g.wq=Ia();g.init=function(){this.u&&I$(this)};g.isEnabled=function(){return this.u};g.Za=function(a){(this.u=a)&&I$(this);iIa(this,"enabled",a?"1":"0")};
function J$(a){return!!a.g&&!a.g.closed}g.clear=function(){this.A.clear();J$(this)&&this.Hl()};
g.IC=function(a){if(!this.K[a.l]){var b=this.O;if(a){switch(a.o.value){case Ce.value:var c="dbg-sh";break;case De.value:c="dbg-sev";break;case Ee.value:c="dbg-w";break;case Fe.value:c="dbg-i";break;default:c="dbg-f"}var d=[];d.push(b.j," ");d.push("[",dIa(a),"] ");d.push("[",eIa(a,b.l.get()),"s] ");d.push("[",a.l,"] ");d=rk(d.join(""));var e=xk;if(b.g&&a.g){try{var f=a.g,h=va("window.location.href");if(ta(f))var k={message:f,name:"Unknown error",lineNumber:"Not available",fileName:h,stack:"Not available"};
else{b=!1;try{var l=f.lineNumber||f.line||"Not available"}catch(B){l="Not available",b=!0}try{var m=f.fileName||f.filename||f.sourceURL||ra.$googDebugFname||h}catch(B){m="Not available",b=!0}k=!b&&f.lineNumber&&f.fileName&&f.stack&&f.message&&f.name?f:{message:f.message||"Not available",name:f.name||"UnknownError",lineNumber:l,fileName:m,stack:f.stack||"Not available"}}var n=k.fileName;null!=n||(n="");if(/^https?:\/\//i.test(n)){var p=Zj(n);vi("view-source scheme plus HTTP/HTTPS URL");var r="view-source:"+
Xj(p);var u=ak(r)}else{var v=vi("sanitizedviewsrc");u=ak(ui(v))}var y=wk(rk("Message: "+k.message+"\nUrl: "),tk("a",{href:u,target:"_new"},k.fileName),rk("\nLine: "+k.lineNumber+"\n\nBrowser stack:\n"+k.stack+"-> [end]\n\nJS stack traversal:\n"+Hd(void 0)+"-> "))}catch(B){y=rk("Exception trying to expose exception! You win, we lose. "+B)}e=wk(yk,y)}a=rk(a.u);c=tk("span",{"class":c},wk(a,e));c=wk(d,c,yk)}else c=xk;this.u?(I$(this),this.A.add(c),K$(this,c)):this.A.add(c)}};
function K$(a,b){a.o.push(b);ra.clearTimeout(a.lu);750<Ia()-a.wq?a.Gt():a.lu=ra.setTimeout(t(a.Gt,a),250)}g.Gt=function(){this.wq=Ia();if(J$(this)){var a=this.g.document.body;a=a&&100>=a.scrollHeight-(a.scrollTop+a.clientHeight);var b=wk(this.o);this.g.document.write(ok(b));this.o.length=0;a&&this.g.scrollTo(0,1E6)}};function jIa(a){for(var b=a.A.Mc(),c=0;c<b.length;c++)K$(a,b[c])}
function I$(a){if(!J$(a)&&!a.B){var b=gIa(a.l,"dbg","0,0,800,500").split(","),c=Number(b[0]),d=Number(b[1]),e=Number(b[2]);b=Number(b[3]);a.B=!0;var f=od?a.l.replace(/[\s\-\.,]/g,"_"):a.l;a.g=window.open("",f,"width="+e+",height="+b+",toolbar=no,resizable=yes,scrollbars=yes,left="+c+",top="+d+",status=no,screenx="+c+",screeny="+d);a.g||hIa||(alert("Logger popup was blocked"),hIa=!0);a.B=!1;a.g&&a.Hl()}}g.Zi=function(){return lk(vi("*{font:normal 14px monospace;}.dbg-sev{color:#F00}.dbg-w{color:#E92}.dbg-sh{background-color:#fd4;font-weight:bold;color:#000}.dbg-i{color:#666}.dbg-f{color:#999}.dbg-ev{color:#0A0}.dbg-m{color:#990}"))};
g.Hl=function(){if(J$(this)){this.g.document.open();var a=tk("div",{"class":"dbg-ev",style:vi("text-align:center;")},wk("LOGGING",yk,tk("small",{},"Logger: "+this.l)));a=wk(vk(this.Zi()),tk("hr"),a,tk("hr"));K$(this,a);jIa(this)}};function iIa(a,b,c){document.cookie=(b+a.l).replace(/[;=\s]/g,"_")+"="+encodeURIComponent(c)+";path=/;expires="+(new Date(Ia()+2592E6)).toUTCString()}
function gIa(a,b,c){a=(b+a).replace(/[;=\s]/g,"_");b=String(document.cookie);var d=b.indexOf(a+"=");return-1!=d?(c=b.indexOf(";",d),decodeURIComponent(b.substring(d+a.length+1,-1==c?b.length:c))):c||""}g.NN=function(){J$(this)&&iIa(this,"dbg",(this.g.screenX||this.g.screenLeft||0)+","+(this.g.screenY||this.g.screenTop||0)+","+(this.g.outerWidth||800)+","+(this.g.outerHeight||500))};function L$(a,b){if(M$){var c=kIa(),d;for(d in c){c=d.replace("fancywindow.sel.","");c=Se(c);var e=c.g,f=window.localStorage.getItem(d).toString();e&&e.toString()==f||c.cj(Ne(f))}}H$.call(this,a,b);this.j=null}w(L$,H$);var M$;a:{try{M$=!!window.localStorage.getItem;break a}catch(a){}M$=!1}g=L$.prototype;
g.Gt=function(){this.wq=Ia();if(J$(this)){for(var a=this.j.ub("log"),b=100>=a.scrollHeight-(a.scrollTop+a.offsetHeight),c=0;c<this.o.length;c++){var d=this.j.Rh("DIV","logmsg");d.innerHTML=ok(this.o[c]);a.appendChild(d)}this.o.length=0;this.tA();b&&(a.scrollTop=a.scrollHeight)}};
g.Hl=function(){if(J$(this)){var a=this.g.document;a.open();var b=tk("head",{},wk(tk("title",{},"Logging: "+this.l),vk(this.Zi())));var c=tk("body",{},wk(tk("div",{id:"log",style:vi("overflow:auto")}),tk("div",{id:"head"},wk(tk("p",{},tk("b",{},"Logging: "+this.l)),tk("p",{},"LOGGING"),tk("span",{id:"clearbutton"},"clear"),tk("span",{id:"exitbutton"},"exit"),tk("span",{id:"openbutton"},"options"))),tk("div",{id:"options"},wk(tk("big",{},tk("b",{},"Options:")),tk("div",{id:"optionsarea"}),tk("span",
{id:"closebutton"},"save and close")))));b=tk("html",{},wk(b,c));a.write(ok(b));a.close();(od?a.body:this.g).onresize=t(this.tA,this);this.j=new Wq(a);this.j.ub("openbutton").onclick=t(this.EK,this);this.j.ub("closebutton").onclick=t(this.mD,this);this.j.ub("clearbutton").onclick=t(this.clear,this);this.j.ub("exitbutton").onclick=t(this.FD,this);jIa(this)}};
g.EK=function(){var a=this.j.ub("optionsarea");a.innerHTML=ok(xk);for(var b=N$(),c=this.j,d=0;d<b.length;d++){var e=b[d];e=c.Rh("DIV",{},lIa(this,"sel"+e.getName(),e.g?e.g.name:"INHERIT"),c.Rh("SPAN",{},e.getName()||"(root)"));a.appendChild(e)}this.j.ub("options").style.display="block";return!1};
function lIa(a,b,c){a=a.j;b=a.Rh("SELECT",{id:b});for(var d=0;d<Le.length;d++){var e=Le[d],f=a.Rh("OPTION",{},e.name);c==e.name&&(f.selected=!0);b.appendChild(f)}b.appendChild(a.Rh("OPTION",{selected:"INHERIT"==c},"INHERIT"));return b}
g.mD=function(){this.j.ub("options").style.display="none";for(var a=N$(),b=this.j,c=0;c<a.length;c++){var d=a[c],e=b.ub("sel"+d.getName());e=e.options[e.selectedIndex].text;"INHERIT"==e?d.cj(null):d.cj(Ne(e))}if(M$)for(a=N$(),b=kIa(),c=0;c<a.length;c++)d="fancywindow.sel."+a[c].getName(),e=a[c].g,d in b?e?window.localStorage.getItem(d)!=e.name&&window.localStorage.setItem(d,e.name):window.localStorage.removeItem(d):e&&window.localStorage.setItem(d,e.name);return!1};
g.tA=function(){var a=this.j,b=a.ub("log"),c=a.ub("head");b.style.top=c.offsetHeight+"px";b.style.height=a.g.body.offsetHeight-c.offsetHeight-(od?4:0)+"px"};g.FD=function(){this.Za(!1);this.g&&this.g.close()};
g.Zi=function(){var a=L$.C.Zi.call(this),b=lk(vi("html,body{height:100%;width:100%;margin:0px;padding:0px;background-color:#FFF;overflow:hidden}*{}.logmsg{border-bottom:1px solid #CCC;padding:2px;font:90% monospace}#head{position:absolute;width:100%;font:x-small arial;border-bottom:2px solid #999;background-color:#EEE;}#head p{margin:0px 5px;}#log{position:absolute;width:100%;background-color:#FFF;}#options{position:absolute;right:0px;width:50%;height:100%;border-left:1px solid #999;background-color:#DDD;display:none;padding-left: 5px;font:normal small arial;overflow:auto;}#openbutton,#closebutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:5px;font:x-small arial;}#clearbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:80px;font:x-small arial;}#exitbutton{text-decoration:underline;color:#00F;cursor:pointer;position:absolute;top:0px;right:50px;font:x-small arial;}select{font:x-small arial;margin-right:10px;}hr{border:0;height:5px;background-color:#8c8;color:#8c8;}"));return ik(a,
b)};function kIa(){for(var a={},b=0,c=window.localStorage.length;b<c;b++){var d=window.localStorage.key(b);null!=d&&Eb(d,"fancywindow.sel.")&&(a[d]=!0)}return a}function N$(){var a=ic(Pe);wb(a,function(a,c){return xb(a.getName(),c.getName())});return a};function O$(a,b){L$.call(this,a,b)}w(O$,L$);var mIa=vi("#log{background-color:#000;}.logmsg{color:#eee;}.dbg-i{color:#0f0;}#head{background-image: -webkit-gradient(linear,0 0,0 100%,from(#616972),color-stop(70%,#434c55),to(#384149));background-image: -webkit-linear-gradient(#616972,#434c55 70%,#384149);background-image: -moz-linear-gradient(top,#616972,#434c55 70%,#384149);background-image: -o-linear-gradient(#616972,#434c55 70%,#384149);background-image: linear-gradient(#616972,#434c55 70%,#384149);}#head p,#head p b{color:#eee;font-weight:bold;}#clearbutton,#exitbutton,#openbutton{color:#eee;}#closebutton{color:#333;}");
O$.prototype.Hl=function(){O$.C.Hl.call(this);this.g&&Zd(this.g,"beforeunload",this.I,!1,this)};O$.prototype.I=function(){this.Za(!1);this.g&&(de(this.g,"beforeunload",this.I,!1,this),this.g.close())};O$.prototype.Zi=function(){var a=O$.C.Zi.call(this),b=lk(mIa);return ik(a,b)};function P$(){qY.call(this);this.j=[]}w(P$,qY);P$.prototype.init=function(){P$.C.init.call(this);this.j.length=0;var a=new Date;a.setHours(0,0,0,0);this.j.push({label:"Today",time:a.getTime()});this.j.push({label:"Yesterday",time:a.getTime()-864E5});a.setDate(a.getDate()-a.getDay());this.j.push({label:"This Week",time:a.getTime()});a.setDate(a.getDate()-7);this.j.push({label:"Last Week",time:a.getTime()});a.setDate(a.getDate()-7);this.j.push({label:"2 Weeks Ago",time:a.getTime()})};
P$.prototype.J=function(){this.j.length=0;P$.C.J.call(this)};P$.prototype.ae=function(a){var b=[],c=null;a instanceof XM&&(c=a.Ka());if(c){a=0;for(var d=this.j.length;a<d;a++){var e=c.ud;if(!isNaN(e)&&e>=this.j[a].time){ib(b,a+this.j[a].label);break}}}return b};P$.prototype.Le=function(a){var b=new ko;b.ga(a);b.Da(a.substring(1));qo(b,!1);po(b,"All layers activated "+b.ba().toLowerCase());return b};function Q$(){qY.call(this)}w(Q$,qY);Q$.prototype.ae=function(a){var b=[],c=null;try{a instanceof XM?c=a.Ka().T():"getType"in a?c=a.getType():"type"in a&&(c=a.type)}catch(d){}c||(c="No Type");ib(b,c);return b};Q$.prototype.Le=function(a){var b=new ko;b.ga(a);b.Da(a);qo(b,!1);return b};function R$(a,b){this.G=Wh("the application");this.root=this.Av();this.o=new Fh(this.B,250,this);this.element=b;this.scope=a;this.A=a.filter||null;this.term="";this.views=this.qm();var c=M.get(["addData","groupBy"],"Source");this.view=this.qm()[c];this.g=this.Bv();this.g.j=this.A;a.$on("$destroy",this.Vk.bind(this));zk.get("$timeout")(function(){b.find(".js-input-search").focus()});this.search()}R$.$inject=["$scope","$element"];g=R$.prototype;g.Bv=function(){return new cY([],"providers",this.scope)};
g.Av=function(){var a=Y.o;a.H("propertychange",this.u,!1,this);return a};g.qm=function(){return{}};g.Vk=function(){this.o.dispose();this.o=null;this.root.M("propertychange",this.u,!1,this);this.element=this.scope=this.g=this.root=null};g.close=function(){kx(this.element)};R$.prototype.close=R$.prototype.close;R$.prototype.Lv=function(){return 0==this.g.l.length};R$.prototype.isTreeEmpty=R$.prototype.Lv;R$.prototype.u=function(a){"children"==a.j?this.search():R(this.scope)};
R$.prototype.search=function(){if(this.root&&this.g&&this.o){var a=(this.root.na()||[]).filter(nIa);this.g.l=a;this.o.start();O(P.s(),"addData.search",1)}};R$.prototype.search=R$.prototype.search;function nIa(a){if(a.kc()){try{if(a.ob)return!0}catch(b){}a=a.na();return!!a&&0<a.length}return!1}R$.prototype.Zq=function(){O(P.s(),"addData.groupBy",1);this.search()};R$.prototype.onGroupByChanged=R$.prototype.Zq;R$.prototype.Wo=function(){this.term="";this.search();this.element.find(".search").focus()};
R$.prototype.clearSearch=R$.prototype.Wo;R$.prototype.B=function(){var a=this.term,b=this.qm(),c;for(c in b)if(b[c]===this.view){M.set(["addData","groupBy"],c);break}dY(this.g,a,-1==this.view?null:this.view);R(this.scope)};
R$.prototype.Fp=function(){if(this.Lv())return"No data available. Click the Import File/URL button above to import data into "+this.G+".";var a=this.scope.selected;q(a)&&1==a.length&&(a=a[0]);if(a instanceof ko){var b="";a instanceof XM?(a=a.Ka())&&(b+=Gja(a)):b=a.Ve();b||(b="No description provided.");if(b)return O(P.s(),"addData.getInfo",1),Nb(b)}return"Select an item on the left to see more information."};R$.prototype.getInfo=R$.prototype.Fp;Q.directive("adddata",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/windows/adddata.html",controller:S$,controllerAs:"addData"}}]);
function S$(a,b){R$.call(this,a,b);this.showServerAlert=Y.Sh();(b=Ww.s())&&$w(b,"v1541734487/onboarding/adddata.json");a.filterName=null;tH&&Lwa&&(a.openServers=Nwa);rba&&Eua&&(a.openAlerts=YX.bind(void 0,"alerts"));a.$on("os.ui.window.params",this.l.bind(this));Y.H("dataProviderLoaded",this.j,!1,this);Y.H("editDataProvider",this.j,!1,this);Y.H("removeDataProvider",this.j,!1,this);M.H(s_,this.search,!1,this)}w(S$,R$);S$.$inject=["$scope","$element"];
var oIa={Favorites:new X1,INT:new $1,"Recently Updated":new T1,"Recently Used":new P$,Tag:new HY,Type:new Q$,Source:-1};S$.prototype.Vk=function(){Y.M("dataProviderLoaded",this.j,!1,this);Y.M("editDataProvider",this.j,!1,this);Y.M("removeDataProvider",this.j,!1,this);M.M(s_,this.search,!1,this);S$.C.Vk.call(this)};S$.prototype.qm=function(){return oIa};S$.prototype.j=function(a){this.scope&&(a=a?a.l:null,!a||a.getError())&&(this.showServerAlert=Y.Sh(),R(this.scope))};
S$.prototype.xD=function(){this.showServerAlert=!1};S$.prototype.dismissServerAlert=S$.prototype.xD;S$.prototype.nG=function(){O(P.s(),"addData.import",1);N.dispatchEvent("importFile")};S$.prototype.launchFileImport=S$.prototype.nG;S$.prototype.l=function(a,b){b.filterFunc&&(this.g.j=b.filterFunc,this.search(),this.scope.filterName=b.filterName)};S$.prototype.kD=function(){this.scope.filterName=null;this.g.j=null;this.search()};S$.prototype.clearFilter=S$.prototype.kD;Q.directive("clear",[function(){return{restrict:"AE",replace:!0,scope:!0,templateUrl:"v1541734487/views/window/clear.html",controller:T$,controllerAs:"clear"}}]);function T$(a,b,c){this.L=b;this.entries=ic(QU.getEntries());a.$on("windowCancel",this.g.bind(this));a.$on("$destroy",this.j.bind(this));c(function(){a.$emit("window.ready")})}T$.$inject=["$scope","$element","$timeout"];T$.prototype.j=function(){this.L=null};T$.prototype.g=function(){QU.reset()};
T$.prototype.cancel=function(){this.g();this.L&&kx(this.L)};T$.prototype.cancel=T$.prototype.cancel;T$.prototype.accept=function(){QU.clear();this.L&&kx(this.L)};T$.prototype.accept=T$.prototype.accept;function U$(a,b){this.g=xS.s();this.scope=a;this.Na=b;this.scope.settingsNodes=null;this.scope.selected=null;this.scope.$watch("selected",this.l.bind(this));this.scope.$on("$destroy",this.destroy.bind(this));this.g.H("settingsmanager:pluginadded",this.j,!1,this);this.g.H("settingsmanager:selectedchange",this.j,!1,this);this.j()}U$.$inject=["$scope","$timeout"];
U$.prototype.destroy=function(){this.Na=this.scope=this.scope.settingsNodes=null;this.g.M("settingsmanager:pluginadded",this.j,!1,this);this.g.M("settingsmanager:selectedchange",this.j,!1,this);this.g=null};U$.prototype.l=function(a){a&&a.D&&this.g.Nj(a)};U$.prototype.gg=function(a){return a&&a instanceof so?a.g.Ug()||"defaultsettingui":null};U$.prototype.getUi=U$.prototype.gg;U$.prototype.reset=function(){Iua()};U$.prototype.reset=U$.prototype.reset;
U$.prototype.j=function(){this.scope.settingsNodes=this.g.na();this.Na(t(function(){this.scope.selected=this.g.l;if(!this.scope.selected){for(var a=this.scope,b=this.g,c=null,d=b.na();d&&0<d.length;)c=d[0],d=c.na();b.Nj(c);a.selected=c}},this))};Q.directive("settings",[function(){return{restrict:"E",replace:!0,scope:{hideClose:"@?"},templateUrl:"v1541734487/views/config/settingswindow.html",controller:V$,controllerAs:"setCon"}}]);function V$(a,b,c){U$.call(this,a,b);this.L=c;a.$on("os.ui.window.params",this.o.bind(this))}w(V$,U$);V$.$inject=["$scope","$timeout","$element"];V$.prototype.destroy=function(){this.L=null};
V$.prototype.o=function(a,b){a=xS.s();for(var c=a.na(),d=0;d<c.length;d++){var e=c[d];if(b&&0<b.length&&e.ba()==b[0]){wS(a,e.D());break}}};V$.prototype.close=function(){kx(this.L)};V$.prototype.close=V$.prototype.close;Q.directive("map",[function(){return{restrict:"E",scope:!0,replace:!0,template:'<div id="map-container" class="mw-0 flex-fill"></div>',controller:W$,controllerAs:"mapCtrl"}}]);function W$(a){this.ha=L.s();a.$on("$destroy",this.j.bind(this));Ck(this.g.bind(this))}W$.$inject=["$scope"];var pIa=E.V("os.ui.MapCtrl");W$.prototype.j=function(){this.ha.dispose();this.ha=null};
W$.prototype.g=function(a){"string"===typeof a?E.error(pIa,"Error waiting for Angular to render the page: "+JSON.stringify(a)):this.ha&&this.ha.init()};Q.directive("metricdetails",[function(){return{restrict:"E",replace:!0,scope:{metric:"="},templateUrl:"v1541734487/views/config/metricdetails.html",controller:X$,controllerAs:"details"}}]);function X$(a){x.call(this);this.v=a;a.$on("$destroy",this.dispose.bind(this))}w(X$,x);X$.$inject=["$scope"];X$.prototype.J=function(){X$.C.J.call(this);this.v=null};
X$.prototype.ba=function(){if(this.v&&this.v.metric instanceof GR){for(var a=this.v.metric,b=[a.ba()],c;a&&(c=a.getParent());)if(a=c.ba())b.unshift(a),a=c;else break;return b.join(" > ")}return""};X$.prototype.getLabel=X$.prototype.ba;X$.prototype.qb=function(){return this.v&&this.v.metric instanceof GR?this.v.metric.qb()||"":""};X$.prototype.getDescription=X$.prototype.qb;Q.directive("metrics",[function(){return{restrict:"E",replace:!0,templateUrl:"v1541734487/views/config/metricscontainer.html",controller:Y$,controllerAs:"setCon"}}]);function Y$(a,b,c){R$.call(this,a,b);this.j=gY.s();this.Na=c;this.scope.metricsNodes=null;this.scope.selected=null;this.details="";this.j.H("metricsmanager:pluginadded",this.l,!1,this);this.j.H("metricsmanager:selectedchange",this.l,!1,this);this.l()}w(Y$,R$);Y$.$inject=["$scope","$element","$timeout"];
Y$.prototype.Vk=function(){this.scope.metricsNodes=null;Y$.C.Vk.call(this);this.Na=null;this.j.M("metricsmanager:pluginadded",this.l,!1,this);this.j.M("metricsmanager:selectedchange",this.l,!1,this)};Y$.prototype.Bv=function(){var a=gY.s().j.na()||[];return new cY(a,"metricsNodes",this.scope)};Y$.prototype.Av=function(){return gY.s().j};Y$.prototype.save=function(){P.s().save()};Y$.prototype.save=Y$.prototype.save;
Y$.prototype.l=function(){this.scope.metricsNodes=this.j.j.na();this.Na(t(function(){this.scope.selected=this.j.l;if(!this.scope.selected){var a=this.scope,b=this.j;b.Nj(b.g);a.selected=b.g}},this))};Q.directive("savedwindow",[function(){var a=dx();a.scope.key="@";a.controller=Z$;return a}]);function Z$(a,b,c){yc(a,qIa(a.key));ex.call(this,a,b,c)}w(Z$,ex);Z$.$inject=["$scope","$element","$timeout"];Z$.prototype.jd=function(a,b){if(b){var c=qIa(this.scope.key),d=b.position;d&&(c.x=d.left,c.y=d.top);if(d=b.size)c.width=d.width,c.height=d.height;d=this.scope.key;var e=M.get(["windows"])||{};e[d]=c;M.set(["windows"],e)}Z$.C.jd.call(this,a,b)};
function qIa(a){return(M.get(["windows"])||{})[a]||{}};var $$=angular.module("os",["ngAnimate","ngSanitize","ngRoute","os.ui"]);$$.cp=function(a){a.otherwise({template:"<os-main></os-main>",reloadOnSearch:!1})};Ja("os.Module.configureModule",$$.cp);$$.cp.$inject=["$routeProvider"];$$.config($$.cp);(function(){var a=new ij(function(){return window.osasm&&!!osasm.geodesicInverse});a.Ph=function(){if(document.querySelector(".os-app")){try{window.opener=null}catch(b){}Ai=new O$("os");Gi(kB);Gi(hA);Gi(iA);Gi(lB);(new cIa).init()}};a.start(50,1E4)})();
$$.directive("osMain",[function(){return{restrict:"E",replace:!0,scope:!0,templateUrl:"v1541734487/views/main.html",controller:v$,controllerAs:"mainCtrl"}}]);}).call(window);
//# sourceMappingURL=/home/jsalankey/opensphere-yarn-workspace/workspace/opensphere/.build/opensphere.min.map
